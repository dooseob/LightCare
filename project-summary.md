This file is a merged representation of a subset of the codebase, containing specifically included files and files not matching ignore patterns, combined into a single document by Repomix.
The content has been processed where comments have been removed, empty lines have been removed, content has been compressed (code blocks are separated by â‹®---- delimiter).

# File Summary

## Purpose
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  a. A header with the file path (## File: path/to/file)
  b. The full contents of the file in a code block

## Usage Guidelines
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
- Pay special attention to the Repository Description. These contain important context and guidelines specific to this project.

## Notes
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: src/main/java/**/*.java, src/main/resources/application.yml, src/main/resources/mapper/*.xml, build.gradle, README.md, CLAUDE.md, **/*.java, **/*.xml, **/*.yml, **/*.html, **/*.js, **/*.css, **/*.md, **/*.sql, **/*.properties
- Files matching these patterns are excluded: **/test/**, **/static/js/bootstrap*, **/static/js/jquery*, **/static/css/bootstrap*, **/*.html, **/backup/**, **/images/**, **/*.png, **/*.jpg, **/deploy-*.sh, **/facility-image-*.js, **/crop-*.html, **/edit.html, build/**, node_modules/**, .git/**, *.class, *.jar, *.war, *.log, target/**
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Code comments have been removed from supported file types
- Empty lines have been removed from all files
- Content has been compressed - code blocks are separated by â‹®---- delimiter
- Files are sorted by Git change count (files with more changes are at the bottom)

# User Provided Header
LightCare ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ í”Œë«í¼ - í”„ë¡œì íŠ¸ ìš”ì•½

# Directory Structure
```
gradle/
  wrapper/
    gradle-wrapper.properties
src/
  main/
    java/
      com/
        example/
          carelink/
            common/
              BaseDTO.java
              Constants.java
              CustomMultipartFile.java
              PageInfo.java
            config/
              DevSecurityConfig.java
              KakaoApiConfig.java
              ProdSecurityConfig.java
              SecurityConfig.java
              WebConfig.java
            controller/
              AdminController.java
              BoardController.java
              FacilityController.java
              FacilityImageApiController.java
              HomeController.java
              JobController.java
              MemberController.java
              ReviewController.java
            dao/
              BoardImageMapper.java
              BoardMapper.java
              FacilityImageMapper.java
              FacilityMapper.java
              JobApplicationMapper.java
              JobMapper.java
              MemberMapper.java
              ReviewImageMapper.java
              ReviewMapper.java
            dto/
              BoardDTO.java
              BoardImageDTO.java
              FacilityDTO.java
              FacilityImageDTO.java
              JobApplicationDTO.java
              JobDTO.java
              LoginDTO.java
              MemberDTO.java
              ReviewDTO.java
              ReviewImageDTO.java
            service/
              BoardImageService.java
              BoardService.java
              FacilityImageService.java
              FacilityService.java
              ImageOptimizationService.java
              JobService.java
              MemberService.java
              ReviewImageService.java
              ReviewService.java
            validation/
              groups/
                OnFacilityJoin.java
            CarelinkApplication.java
      Crolling.java
    resources/
      mapper/
        boardImageMapper.xml
        boardMapper.xml
        facilityImageMapper.xml
        facilityMapper.xml
        JobApplicationMapper.xml
        jobMapper.xml
        MemberMapper.xml
        reviewImageMapper.xml
        reviewMapper.xml
      static/
        css/
          advanced-image-cropper.css
          common.css
          facility-image-uploader.css
          image-compressor.css
          rich-text-editor.css
        js/
          board-detail.js
          board-navigation.js
          change-password.js
          common.js
          delete-member.js
          facility-edit.js
          facility-manage.js
          image-compressor.js
          job-detail.js
          job-edit.js
          kakaomap.js
          my-posts.js
          myinfo.js
          phone-formatter.js
          review-detail.js
          review-write.js
          rich-text-editor-v2.js
          rich-text-editor.js
          smart-scroll-utility.js
      application.yml
      db_performance_indexes.sql
      mybatis-config.xml
      schema-image-attachments.sql
      schema.sql
build.gradle
CLAUDE.md
docker-compose.aws.yml
docker-compose.yml
IMAGE_UPLOAD_TEST_CHECKLIST.md
lightcare-ai-summary.md
lightcare-summary.md
README.md
reset_all_data.sql
reset_facility_images.sql
schema-postgresql.sql
SECURITY_NOTICE.md
SETUP_GUIDE.md
system.properties
tomorrow-checklist.md
```

# Files

## File: gradle/wrapper/gradle-wrapper.properties
`````
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-8.13-bin.zip
networkTimeout=10000
validateDistributionUrl=true
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
`````

## File: src/main/java/com/example/carelink/dao/BoardImageMapper.java
`````java
public interface BoardImageMapper {
List<BoardImageDTO> getImagesByBoardId(@Param("boardId") Long boardId);
BoardImageDTO getImageById(@Param("imageId") Long imageId);
int countActiveImagesByBoardId(@Param("boardId") Long boardId);
int insertImage(BoardImageDTO imageDTO);
int insertImages(@Param("images") List<BoardImageDTO> images);
int updateImage(BoardImageDTO imageDTO);
int updateImageOrder(@Param("imageId") Long imageId,
â‹®----
int updateImageAltText(@Param("imageId") Long imageId,
â‹®----
int deleteImage(@Param("imageId") Long imageId);
int deactivateImage(@Param("imageId") Long imageId);
int deleteImagesByBoardId(@Param("boardId") Long boardId);
int getTotalImageCountByBoardType(@Param("boardType") String boardType);
Long getTotalImageSize();
`````

## File: src/main/java/com/example/carelink/dao/ReviewImageMapper.java
`````java
public interface ReviewImageMapper {
List<ReviewImageDTO> getImagesByReviewId(@Param("reviewId") Long reviewId);
ReviewImageDTO getImageById(@Param("imageId") Long imageId);
int countActiveImagesByReviewId(@Param("reviewId") Long reviewId);
List<ReviewImageDTO> getImagesByFacilityId(@Param("facilityId") Long facilityId);
int insertImage(ReviewImageDTO imageDTO);
int insertImages(@Param("images") List<ReviewImageDTO> images);
int updateImage(ReviewImageDTO imageDTO);
int updateImageOrder(@Param("imageId") Long imageId,
â‹®----
int updateImageAltText(@Param("imageId") Long imageId,
â‹®----
int deleteImage(@Param("imageId") Long imageId);
int deactivateImage(@Param("imageId") Long imageId);
int deleteImagesByReviewId(@Param("reviewId") Long reviewId);
int getTotalImageCountByFacilityId(@Param("facilityId") Long facilityId);
Long getTotalImageSize();
int getImageCountByMemberId(@Param("memberId") Long memberId);
`````

## File: src/main/java/com/example/carelink/dto/BoardImageDTO.java
`````java
public class BoardImageDTO {
â‹®----
public String getBestImagePath() {
if (webpPath != null && !webpPath.isEmpty()) {
â‹®----
if (fallbackJpgPath != null && !fallbackJpgPath.isEmpty()) {
â‹®----
public String getThumbnailBySize(String size) {
switch (size.toLowerCase()) {
â‹®----
return getBestImagePath();
â‹®----
public String getReadableFileSize() {
â‹®----
return String.format("%d %s", size, units[unitIndex]);
â‹®----
public double getCompressionRate() {
`````

## File: src/main/java/com/example/carelink/dto/LoginDTO.java
`````java
public class LoginDTO {
`````

## File: src/main/java/com/example/carelink/dto/ReviewImageDTO.java
`````java
public class ReviewImageDTO {
â‹®----
public String getBestImagePath() {
if (webpPath != null && !webpPath.isEmpty()) {
â‹®----
if (fallbackJpgPath != null && !fallbackJpgPath.isEmpty()) {
â‹®----
public String getThumbnailBySize(String size) {
switch (size.toLowerCase()) {
â‹®----
return getBestImagePath();
â‹®----
public String getReadableFileSize() {
â‹®----
return String.format("%d %s", size, units[unitIndex]);
â‹®----
public double getCompressionRate() {
`````

## File: src/main/java/com/example/carelink/service/BoardImageService.java
`````java
public class BoardImageService {
â‹®----
public List<BoardImageDTO> getImagesByBoardId(Long boardId) {
log.info("ê²Œì‹œê¸€ ì´ë¯¸ì§€ ì¡°íšŒ: boardId={}", boardId);
return boardImageMapper.getImagesByBoardId(boardId);
â‹®----
public List<BoardImageDTO> uploadImages(Long boardId, List<MultipartFile> imageFiles,
â‹®----
int existingCount = boardImageMapper.countActiveImagesByBoardId(boardId);
if (existingCount + imageFiles.size() > MAX_BOARD_IMAGES) {
throw new IllegalArgumentException(
String.format("ê²Œì‹œê¸€ ì´ë¯¸ì§€ëŠ” ìµœëŒ€ %dê°œê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤. í˜„ì¬ %dê°œ, ì¶”ê°€ ìš”ì²­ %dê°œ",
MAX_BOARD_IMAGES, existingCount, imageFiles.size())
â‹®----
for (int i = 0; i < imageFiles.size(); i++) {
MultipartFile file = imageFiles.get(i);
String altText = (altTexts != null && i < altTexts.size()) ? altTexts.get(i) : null;
â‹®----
BoardImageDTO imageDTO = processAndSaveImage(boardId, file, existingCount + i, altText);
uploadedImages.add(imageDTO);
â‹®----
log.error("ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨: boardId={}, fileName={}",
boardId, file.getOriginalFilename(), e);
â‹®----
if (!uploadedImages.isEmpty()) {
boardImageMapper.insertImages(uploadedImages);
log.info("ê²Œì‹œê¸€ ì´ë¯¸ì§€ {} ê°œ ì—…ë¡œë“œ ì™„ë£Œ: boardId={}", uploadedImages.size(), boardId);
â‹®----
public BoardImageDTO uploadImage(Long boardId, MultipartFile imageFile, String altText) {
â‹®----
String.format("ê²Œì‹œê¸€ ì´ë¯¸ì§€ëŠ” ìµœëŒ€ %dê°œê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.", MAX_BOARD_IMAGES)
â‹®----
BoardImageDTO imageDTO = processAndSaveImage(boardId, imageFile, existingCount, altText);
boardImageMapper.insertImage(imageDTO);
log.info("ê²Œì‹œê¸€ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ: boardId={}, imageId={}", boardId, imageDTO.getImageId());
â‹®----
private BoardImageDTO processAndSaveImage(Long boardId, MultipartFile file,
â‹®----
if (!imageOptimizationService.isSupportedImageFormat(file.getOriginalFilename())) {
throw new IllegalArgumentException("ì§€ì›í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ í˜•ì‹ì…ë‹ˆë‹¤. (JPG, PNG, GIF, WebP, BMP, TIFFë§Œ ê°€ëŠ¥)");
â‹®----
if (!imageOptimizationService.isValidImageMimeType(file.getContentType())) {
throw new IllegalArgumentException("ì˜¬ë°”ë¥¸ ì´ë¯¸ì§€ íŒŒì¼ì´ ì•„ë‹™ë‹ˆë‹¤. íŒŒì¼ì„ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.");
â‹®----
if (file.isEmpty() || file.getSize() == 0) {
throw new IllegalArgumentException("ë¹„ì–´ìˆëŠ” íŒŒì¼ì€ ì—…ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
String baseFileName = String.format("board_%d_%d_%s",
boardId, imageOrder, UUID.randomUUID().toString().substring(0, 8));
log.info("ê²Œì‹œíŒ ì´ë¯¸ì§€ WebP ë³€í™˜ ì‹œì‘: boardId={}, order={}, file={}",
boardId, imageOrder, file.getOriginalFilename());
â‹®----
imageOptimizationService.processImage(file, baseFileName, BOARD_UPLOAD_PATH);
BoardImageDTO imageDTO = BoardImageDTO.builder()
.boardId(boardId)
.imagePath(result.getOriginalWebPPath())
.webpPath(result.getOriginalWebPPath())
.thumbnailSmall(result.getThumbnails().get("small"))
.thumbnailMedium(result.getThumbnails().get("medium"))
.thumbnailLarge(result.getThumbnails().get("large"))
.fallbackJpgPath(result.getFallbackJpgPath())
.originalFilename(file.getOriginalFilename())
.fileSize(result.getOriginalSize())
.fileSizeWebp(result.getWebpSize())
.width(result.getOriginalWidth())
.height(result.getOriginalHeight())
.altText(altText != null ? altText : generateDefaultAltText(boardId, imageOrder))
.imageOrder(imageOrder)
.isActive(true)
.build();
log.info("ê²Œì‹œíŒ ì´ë¯¸ì§€ WebP ë³€í™˜ ì™„ë£Œ: boardId={}, webpPath={}",
boardId, imageDTO.getWebpPath());
â‹®----
private String generateDefaultAltText(Long boardId, int imageOrder) {
return String.format("ê²Œì‹œê¸€ #%dì˜ ì´ë¯¸ì§€ %d", boardId, imageOrder + 1);
â‹®----
public void updateImageOrder(Long imageId, Integer newOrder) {
boardImageMapper.updateImageOrder(imageId, newOrder);
log.info("ì´ë¯¸ì§€ ìˆœì„œ ë³€ê²½: imageId={}, newOrder={}", imageId, newOrder);
â‹®----
public void updateImageAltText(Long imageId, String altText) {
boardImageMapper.updateImageAltText(imageId, altText);
log.info("ì´ë¯¸ì§€ ëŒ€ì²´ í…ìŠ¤íŠ¸ ìˆ˜ì •: imageId={}", imageId);
â‹®----
public void deleteImage(Long imageId) {
BoardImageDTO image = boardImageMapper.getImageById(imageId);
â‹®----
boardImageMapper.deleteImage(imageId);
log.info("ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ: imageId={}", imageId);
â‹®----
public void deleteAllImagesByBoardId(Long boardId) {
List<BoardImageDTO> images = boardImageMapper.getImagesByBoardId(boardId);
boardImageMapper.deleteImagesByBoardId(boardId);
log.info("ê²Œì‹œê¸€ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì‚­ì œ: boardId={}, count={}", boardId, images.size());
`````

## File: src/main/java/com/example/carelink/service/ReviewImageService.java
`````java
public class ReviewImageService {
â‹®----
public List<ReviewImageDTO> getImagesByReviewId(Long reviewId) {
log.info("ë¦¬ë·° ì´ë¯¸ì§€ ì¡°íšŒ: reviewId={}", reviewId);
return reviewImageMapper.getImagesByReviewId(reviewId);
â‹®----
public List<ReviewImageDTO> getImagesByFacilityId(Long facilityId) {
log.info("ì‹œì„¤ ë¦¬ë·° ì´ë¯¸ì§€ ì¡°íšŒ: facilityId={}", facilityId);
return reviewImageMapper.getImagesByFacilityId(facilityId);
â‹®----
public List<ReviewImageDTO> uploadImages(Long reviewId, List<MultipartFile> imageFiles,
â‹®----
int existingCount = reviewImageMapper.countActiveImagesByReviewId(reviewId);
if (existingCount + imageFiles.size() > MAX_REVIEW_IMAGES) {
throw new IllegalArgumentException(
String.format("ë¦¬ë·° ì´ë¯¸ì§€ëŠ” ìµœëŒ€ %dê°œê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤. í˜„ì¬ %dê°œ, ì¶”ê°€ ìš”ì²­ %dê°œ",
MAX_REVIEW_IMAGES, existingCount, imageFiles.size())
â‹®----
for (int i = 0; i < imageFiles.size(); i++) {
MultipartFile file = imageFiles.get(i);
String altText = (altTexts != null && i < altTexts.size()) ? altTexts.get(i) : null;
â‹®----
ReviewImageDTO imageDTO = processAndSaveImage(reviewId, file, existingCount + i, altText);
uploadedImages.add(imageDTO);
â‹®----
log.error("ë¦¬ë·° ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨: reviewId={}, fileName={}",
reviewId, file.getOriginalFilename(), e);
â‹®----
if (!uploadedImages.isEmpty()) {
reviewImageMapper.insertImages(uploadedImages);
log.info("ë¦¬ë·° ì´ë¯¸ì§€ {} ê°œ ì—…ë¡œë“œ ì™„ë£Œ: reviewId={}", uploadedImages.size(), reviewId);
â‹®----
public ReviewImageDTO uploadImage(Long reviewId, MultipartFile imageFile, String altText) {
â‹®----
String.format("ë¦¬ë·° ì´ë¯¸ì§€ëŠ” ìµœëŒ€ %dê°œê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.", MAX_REVIEW_IMAGES)
â‹®----
ReviewImageDTO imageDTO = processAndSaveImage(reviewId, imageFile, existingCount, altText);
reviewImageMapper.insertImage(imageDTO);
log.info("ë¦¬ë·° ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ: reviewId={}, imageId={}", reviewId, imageDTO.getImageId());
â‹®----
private ReviewImageDTO processAndSaveImage(Long reviewId, MultipartFile file,
â‹®----
if (!imageOptimizationService.isSupportedImageFormat(file.getOriginalFilename())) {
throw new IllegalArgumentException("ì§€ì›í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ í˜•ì‹ì…ë‹ˆë‹¤.");
â‹®----
String baseFileName = String.format("review_%d_%d_%s",
reviewId, imageOrder, UUID.randomUUID().toString().substring(0, 8));
log.info("ë¦¬ë·° ì´ë¯¸ì§€ WebP ë³€í™˜ ì‹œì‘: reviewId={}, order={}, file={}",
reviewId, imageOrder, file.getOriginalFilename());
â‹®----
imageOptimizationService.processImage(file, baseFileName, REVIEW_UPLOAD_PATH);
ReviewImageDTO imageDTO = ReviewImageDTO.builder()
.reviewId(reviewId)
.imagePath("/uploads/review/" + baseFileName + "_original.jpg")
.webpPath("/uploads/review/" + result.getOriginalWebPPath())
.thumbnailSmall("/uploads/review/" + result.getThumbnails().get("small"))
.thumbnailMedium("/uploads/review/" + result.getThumbnails().get("medium"))
.thumbnailLarge("/uploads/review/" + result.getThumbnails().get("large"))
.fallbackJpgPath("/uploads/review/" + result.getFallbackJpgPath())
.originalFilename(file.getOriginalFilename())
.fileSize(file.getSize())
.fileSizeWebp((long)(file.getSize() * 0.3))
.width(result.getOriginalWidth())
.height(result.getOriginalHeight())
.altText(altText != null ? altText : generateDefaultAltText(reviewId, imageOrder))
.imageOrder(imageOrder)
.isActive(true)
.build();
log.info("ë¦¬ë·° ì´ë¯¸ì§€ WebP ë³€í™˜ ì™„ë£Œ: reviewId={}, webpPath={}",
reviewId, imageDTO.getWebpPath());
â‹®----
private String generateDefaultAltText(Long reviewId, int imageOrder) {
return String.format("ë¦¬ë·° #%dì˜ ì´ë¯¸ì§€ %d", reviewId, imageOrder + 1);
â‹®----
public void updateImageOrder(Long imageId, Integer newOrder) {
reviewImageMapper.updateImageOrder(imageId, newOrder);
log.info("ë¦¬ë·° ì´ë¯¸ì§€ ìˆœì„œ ë³€ê²½: imageId={}, newOrder={}", imageId, newOrder);
â‹®----
public void updateImageAltText(Long imageId, String altText) {
reviewImageMapper.updateImageAltText(imageId, altText);
log.info("ë¦¬ë·° ì´ë¯¸ì§€ ëŒ€ì²´ í…ìŠ¤íŠ¸ ìˆ˜ì •: imageId={}", imageId);
â‹®----
public void deleteImage(Long imageId) {
ReviewImageDTO image = reviewImageMapper.getImageById(imageId);
â‹®----
reviewImageMapper.deleteImage(imageId);
log.info("ë¦¬ë·° ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ: imageId={}", imageId);
â‹®----
public void deleteAllImagesByReviewId(Long reviewId) {
List<ReviewImageDTO> images = reviewImageMapper.getImagesByReviewId(reviewId);
reviewImageMapper.deleteImagesByReviewId(reviewId);
log.info("ë¦¬ë·°ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì‚­ì œ: reviewId={}, count={}", reviewId, images.size());
â‹®----
public int getTotalImageCountByFacilityId(Long facilityId) {
return reviewImageMapper.getTotalImageCountByFacilityId(facilityId);
â‹®----
public int getImageCountByMemberId(Long memberId) {
return reviewImageMapper.getImageCountByMemberId(memberId);
`````

## File: src/main/resources/mapper/boardImageMapper.xml
`````xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.BoardImageMapper">
    <resultMap id="boardImageResultMap" type="com.example.carelink.dto.BoardImageDTO">
        <id property="imageId" column="image_id"/>
        <result property="boardId" column="board_id"/>
        <result property="imagePath" column="image_path"/>
        <result property="webpPath" column="webp_path"/>
        <result property="thumbnailSmall" column="thumbnail_small"/>
        <result property="thumbnailMedium" column="thumbnail_medium"/>
        <result property="thumbnailLarge" column="thumbnail_large"/>
        <result property="fallbackJpgPath" column="fallback_jpg_path"/>
        <result property="originalFilename" column="original_filename"/>
        <result property="fileSize" column="file_size"/>
        <result property="fileSizeWebp" column="file_size_webp"/>
        <result property="width" column="width"/>
        <result property="height" column="height"/>
        <result property="altText" column="alt_text"/>
        <result property="caption" column="caption"/>
        <result property="imageOrder" column="image_order"/>
        <result property="isActive" column="is_active"/>
        <result property="uploadDate" column="upload_date"/>
        <result property="updatedAt" column="updated_at"/>
    </resultMap>
    <select id="getImagesByBoardId" resultMap="boardImageResultMap">
        SELECT *
        FROM board_images
        WHERE board_id = #{boardId}
          AND is_active = TRUE
        ORDER BY image_order ASC
    </select>
    <select id="getImageById" resultMap="boardImageResultMap">
        SELECT *
        FROM board_images
        WHERE image_id = #{imageId}
    </select>
    <select id="countActiveImagesByBoardId" resultType="int">
        SELECT COUNT(*)
        FROM board_images
        WHERE board_id = #{boardId}
          AND is_active = TRUE
    </select>
    <insert id="insertImage" parameterType="com.example.carelink.dto.BoardImageDTO"
            useGeneratedKeys="true" keyProperty="imageId">
        INSERT INTO board_images (
            board_id, image_path, webp_path,
            thumbnail_small, thumbnail_medium, thumbnail_large,
            fallback_jpg_path, original_filename,
            file_size, file_size_webp, width, height,
            alt_text, caption, image_order, is_active
        ) VALUES (
            #{boardId}, #{imagePath}, #{webpPath},
            #{thumbnailSmall}, #{thumbnailMedium}, #{thumbnailLarge},
            #{fallbackJpgPath}, #{originalFilename},
            #{fileSize}, #{fileSizeWebp}, #{width}, #{height},
            #{altText}, #{caption}, #{imageOrder}, #{isActive}
        )
    </insert>
    <insert id="insertImages" parameterType="list">
        INSERT INTO board_images (
            board_id, image_path, webp_path,
            thumbnail_small, thumbnail_medium, thumbnail_large,
            fallback_jpg_path, original_filename,
            file_size, file_size_webp, width, height,
            alt_text, caption, image_order, is_active
        ) VALUES
        <foreach collection="images" item="image" separator=",">
        (
            #{image.boardId}, #{image.imagePath}, #{image.webpPath},
            #{image.thumbnailSmall}, #{image.thumbnailMedium}, #{image.thumbnailLarge},
            #{image.fallbackJpgPath}, #{image.originalFilename},
            #{image.fileSize}, #{image.fileSizeWebp}, #{image.width}, #{image.height},
            #{image.altText}, #{image.caption}, #{image.imageOrder}, #{image.isActive}
        )
        </foreach>
    </insert>
    <update id="updateImage" parameterType="com.example.carelink.dto.BoardImageDTO">
        UPDATE board_images
        SET alt_text = #{altText},
            caption = #{caption},
            image_order = #{imageOrder},
            updated_at = CURRENT_TIMESTAMP
        WHERE image_id = #{imageId}
    </update>
    <update id="updateImageOrder">
        UPDATE board_images
        SET image_order = #{imageOrder},
            updated_at = CURRENT_TIMESTAMP
        WHERE image_id = #{imageId}
    </update>
    <update id="updateImageAltText">
        UPDATE board_images
        SET alt_text = #{altText},
            updated_at = CURRENT_TIMESTAMP
        WHERE image_id = #{imageId}
    </update>
    <delete id="deleteImage">
        DELETE FROM board_images
        WHERE image_id = #{imageId}
    </delete>
    <update id="deactivateImage">
        UPDATE board_images
        SET is_active = FALSE,
            updated_at = CURRENT_TIMESTAMP
        WHERE image_id = #{imageId}
    </update>
    <delete id="deleteImagesByBoardId">
        DELETE FROM board_images
        WHERE board_id = #{boardId}
    </delete>
    <select id="getTotalImageCountByBoardType" resultType="int">
        SELECT COUNT(bi.image_id)
        FROM board_images bi
        INNER JOIN board b ON bi.board_id = b.board_id
        WHERE b.board_type = #{boardType}
          AND bi.is_active = TRUE
    </select>
    <select id="getTotalImageSize" resultType="long">
        SELECT COALESCE(SUM(file_size), 0)
        FROM board_images
        WHERE is_active = TRUE
    </select>
</mapper>
`````

## File: src/main/resources/mapper/reviewImageMapper.xml
`````xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.ReviewImageMapper">
    <resultMap id="reviewImageResultMap" type="com.example.carelink.dto.ReviewImageDTO">
        <id property="imageId" column="image_id"/>
        <result property="reviewId" column="review_id"/>
        <result property="imagePath" column="image_path"/>
        <result property="webpPath" column="webp_path"/>
        <result property="thumbnailSmall" column="thumbnail_small"/>
        <result property="thumbnailMedium" column="thumbnail_medium"/>
        <result property="thumbnailLarge" column="thumbnail_large"/>
        <result property="fallbackJpgPath" column="fallback_jpg_path"/>
        <result property="originalFilename" column="original_filename"/>
        <result property="fileSize" column="file_size"/>
        <result property="fileSizeWebp" column="file_size_webp"/>
        <result property="width" column="width"/>
        <result property="height" column="height"/>
        <result property="altText" column="alt_text"/>
        <result property="caption" column="caption"/>
        <result property="imageOrder" column="image_order"/>
        <result property="isActive" column="is_active"/>
        <result property="uploadDate" column="upload_date"/>
        <result property="updatedAt" column="updated_at"/>
    </resultMap>
    <select id="getImagesByReviewId" resultMap="reviewImageResultMap">
        SELECT *
        FROM review_images
        WHERE review_id = #{reviewId}
          AND is_active = TRUE
        ORDER BY image_order ASC
    </select>
    <select id="getImageById" resultMap="reviewImageResultMap">
        SELECT *
        FROM review_images
        WHERE image_id = #{imageId}
    </select>
    <select id="countActiveImagesByReviewId" resultType="int">
        SELECT COUNT(*)
        FROM review_images
        WHERE review_id = #{reviewId}
          AND is_active = TRUE
    </select>
    <select id="getImagesByFacilityId" resultMap="reviewImageResultMap">
        SELECT ri.*
        FROM review_images ri
        INNER JOIN review r ON ri.review_id = r.review_id
        WHERE r.facility_id = #{facilityId}
          AND ri.is_active = TRUE
          AND r.is_visible = TRUE
        ORDER BY ri.upload_date DESC
    </select>
    <insert id="insertImage" parameterType="com.example.carelink.dto.ReviewImageDTO"
            useGeneratedKeys="true" keyProperty="imageId">
        INSERT INTO review_images (
            review_id, image_path, webp_path,
            thumbnail_small, thumbnail_medium, thumbnail_large,
            fallback_jpg_path, original_filename,
            file_size, file_size_webp, width, height,
            alt_text, caption, image_order, is_active
        ) VALUES (
            #{reviewId}, #{imagePath}, #{webpPath},
            #{thumbnailSmall}, #{thumbnailMedium}, #{thumbnailLarge},
            #{fallbackJpgPath}, #{originalFilename},
            #{fileSize}, #{fileSizeWebp}, #{width}, #{height},
            #{altText}, #{caption}, #{imageOrder}, #{isActive}
        )
    </insert>
    <insert id="insertImages" parameterType="list">
        INSERT INTO review_images (
            review_id, image_path, webp_path,
            thumbnail_small, thumbnail_medium, thumbnail_large,
            fallback_jpg_path, original_filename,
            file_size, file_size_webp, width, height,
            alt_text, caption, image_order, is_active
        ) VALUES
        <foreach collection="images" item="image" separator=",">
        (
            #{image.reviewId}, #{image.imagePath}, #{image.webpPath},
            #{image.thumbnailSmall}, #{image.thumbnailMedium}, #{image.thumbnailLarge},
            #{image.fallbackJpgPath}, #{image.originalFilename},
            #{image.fileSize}, #{image.fileSizeWebp}, #{image.width}, #{image.height},
            #{image.altText}, #{image.caption}, #{image.imageOrder}, #{image.isActive}
        )
        </foreach>
    </insert>
    <update id="updateImage" parameterType="com.example.carelink.dto.ReviewImageDTO">
        UPDATE review_images
        SET alt_text = #{altText},
            caption = #{caption},
            image_order = #{imageOrder},
            updated_at = CURRENT_TIMESTAMP
        WHERE image_id = #{imageId}
    </update>
    <update id="updateImageOrder">
        UPDATE review_images
        SET image_order = #{imageOrder},
            updated_at = CURRENT_TIMESTAMP
        WHERE image_id = #{imageId}
    </update>
    <update id="updateImageAltText">
        UPDATE review_images
        SET alt_text = #{altText},
            updated_at = CURRENT_TIMESTAMP
        WHERE image_id = #{imageId}
    </update>
    <delete id="deleteImage">
        DELETE FROM review_images
        WHERE image_id = #{imageId}
    </delete>
    <update id="deactivateImage">
        UPDATE review_images
        SET is_active = FALSE,
            updated_at = CURRENT_TIMESTAMP
        WHERE image_id = #{imageId}
    </update>
    <delete id="deleteImagesByReviewId">
        DELETE FROM review_images
        WHERE review_id = #{reviewId}
    </delete>
    <select id="getTotalImageCountByFacilityId" resultType="int">
        SELECT COUNT(ri.image_id)
        FROM review_images ri
        INNER JOIN review r ON ri.review_id = r.review_id
        WHERE r.facility_id = #{facilityId}
          AND ri.is_active = TRUE
    </select>
    <select id="getTotalImageSize" resultType="long">
        SELECT COALESCE(SUM(file_size), 0)
        FROM review_images
        WHERE is_active = TRUE
    </select>
    <select id="getImageCountByMemberId" resultType="int">
        SELECT COUNT(ri.image_id)
        FROM review_images ri
        INNER JOIN review r ON ri.review_id = r.review_id
        WHERE r.member_id = #{memberId}
          AND ri.is_active = TRUE
    </select>
</mapper>
`````

## File: src/main/resources/mybatis-config.xml
`````xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
    <settings>
        <setting name="mapUnderscoreToCamelCase" value="true"/>
        <setting name="callSettersOnNulls" value="true"/>
        <setting name="lazyLoadingEnabled" value="false"/>
    </settings>
    <typeAliases>
        <package name="com.example.carelink.dto"/>
    </typeAliases>
</configuration>
`````

## File: src/main/resources/schema-image-attachments.sql
`````sql
CREATE TABLE IF NOT EXISTS board_images (
    image_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'ì´ë¯¸ì§€ ID',
    board_id BIGINT NOT NULL COMMENT 'ê²Œì‹œê¸€ ID',
    image_path VARCHAR(500) NOT NULL COMMENT 'ì›ë³¸ ì´ë¯¸ì§€ ê²½ë¡œ',
    webp_path VARCHAR(500) COMMENT 'WebP ë³€í™˜ ì´ë¯¸ì§€ ê²½ë¡œ',
    thumbnail_small VARCHAR(500) COMMENT 'ì‘ì€ ì¸ë„¤ì¼ ê²½ë¡œ (300x200)',
    thumbnail_medium VARCHAR(500) COMMENT 'ì¤‘ê°„ ì¸ë„¤ì¼ ê²½ë¡œ (600x400)',
    thumbnail_large VARCHAR(500) COMMENT 'í° ì¸ë„¤ì¼ ê²½ë¡œ (1200x800)',
    fallback_jpg_path VARCHAR(500) COMMENT 'JPG fallback ê²½ë¡œ',
    original_filename VARCHAR(255) COMMENT 'ì›ë³¸ íŒŒì¼ëª…',
    file_size BIGINT COMMENT 'íŒŒì¼ í¬ê¸° (bytes)',
    file_size_webp BIGINT COMMENT 'WebP íŒŒì¼ í¬ê¸° (bytes)',
    width INT COMMENT 'ì´ë¯¸ì§€ ë„ˆë¹„',
    height INT COMMENT 'ì´ë¯¸ì§€ ë†’ì´',
    alt_text VARCHAR(255) COMMENT 'ì´ë¯¸ì§€ ëŒ€ì²´ í…ìŠ¤íŠ¸ (SEO/ì ‘ê·¼ì„±)',
    caption VARCHAR(500) COMMENT 'ì´ë¯¸ì§€ ì„¤ëª…',
    image_order INT DEFAULT 0 COMMENT 'ì´ë¯¸ì§€ ìˆœì„œ',
    is_active BOOLEAN DEFAULT TRUE COMMENT 'í™œì„± ìƒíƒœ',
    upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'ì—…ë¡œë“œ ì¼ì‹œ',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì • ì¼ì‹œ',
    FOREIGN KEY (board_id) REFERENCES board(board_id) ON DELETE CASCADE,
    INDEX idx_board_images_board_id (board_id),
    INDEX idx_board_images_order (board_id, image_order)
) COMMENT='ê²Œì‹œíŒ ì´ë¯¸ì§€ ì²¨ë¶€íŒŒì¼ (WebP ì§€ì›)';
CREATE TABLE IF NOT EXISTS review_images (
    image_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'ì´ë¯¸ì§€ ID',
    review_id BIGINT NOT NULL COMMENT 'ë¦¬ë·° ID',
    image_path VARCHAR(500) NOT NULL COMMENT 'ì›ë³¸ ì´ë¯¸ì§€ ê²½ë¡œ',
    webp_path VARCHAR(500) COMMENT 'WebP ë³€í™˜ ì´ë¯¸ì§€ ê²½ë¡œ',
    thumbnail_small VARCHAR(500) COMMENT 'ì‘ì€ ì¸ë„¤ì¼ ê²½ë¡œ (300x200)',
    thumbnail_medium VARCHAR(500) COMMENT 'ì¤‘ê°„ ì¸ë„¤ì¼ ê²½ë¡œ (600x400)',
    thumbnail_large VARCHAR(500) COMMENT 'í° ì¸ë„¤ì¼ ê²½ë¡œ (1200x800)',
    fallback_jpg_path VARCHAR(500) COMMENT 'JPG fallback ê²½ë¡œ',
    original_filename VARCHAR(255) COMMENT 'ì›ë³¸ íŒŒì¼ëª…',
    file_size BIGINT COMMENT 'íŒŒì¼ í¬ê¸° (bytes)',
    file_size_webp BIGINT COMMENT 'WebP íŒŒì¼ í¬ê¸° (bytes)',
    width INT COMMENT 'ì´ë¯¸ì§€ ë„ˆë¹„',
    height INT COMMENT 'ì´ë¯¸ì§€ ë†’ì´',
    alt_text VARCHAR(255) COMMENT 'ì´ë¯¸ì§€ ëŒ€ì²´ í…ìŠ¤íŠ¸ (SEO/ì ‘ê·¼ì„±)',
    caption VARCHAR(500) COMMENT 'ì´ë¯¸ì§€ ì„¤ëª…',
    image_order INT DEFAULT 0 COMMENT 'ì´ë¯¸ì§€ ìˆœì„œ',
    is_active BOOLEAN DEFAULT TRUE COMMENT 'í™œì„± ìƒíƒœ',
    upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'ì—…ë¡œë“œ ì¼ì‹œ',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì • ì¼ì‹œ',
    FOREIGN KEY (review_id) REFERENCES review(review_id) ON DELETE CASCADE,
    INDEX idx_review_images_review_id (review_id),
    INDEX idx_review_images_order (review_id, image_order)
) COMMENT='ë¦¬ë·° ì´ë¯¸ì§€ ì²¨ë¶€íŒŒì¼ (WebP ì§€ì›)';
ALTER TABLE board
ADD COLUMN IF NOT EXISTS image_count INT DEFAULT 0 COMMENT 'ì²¨ë¶€ ì´ë¯¸ì§€ ê°œìˆ˜',
ADD COLUMN IF NOT EXISTS has_images BOOLEAN DEFAULT FALSE COMMENT 'ì´ë¯¸ì§€ í¬í•¨ ì—¬ë¶€';
ALTER TABLE review
ADD COLUMN IF NOT EXISTS image_count INT DEFAULT 0 COMMENT 'ì²¨ë¶€ ì´ë¯¸ì§€ ê°œìˆ˜',
ADD COLUMN IF NOT EXISTS has_images BOOLEAN DEFAULT FALSE COMMENT 'ì´ë¯¸ì§€ í¬í•¨ ì—¬ë¶€';
DELIMITER $$
CREATE TRIGGER update_board_image_count
AFTER INSERT ON board_images
FOR EACH ROW
BEGIN
    UPDATE board
    SET image_count = (
        SELECT COUNT(*) FROM board_images
        WHERE board_id = NEW.board_id AND is_active = TRUE
    ),
    has_images = TRUE
    WHERE board_id = NEW.board_id;
END$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER update_review_image_count
AFTER INSERT ON review_images
FOR EACH ROW
BEGIN
    UPDATE review
    SET image_count = (
        SELECT COUNT(*) FROM review_images
        WHERE review_id = NEW.review_id AND is_active = TRUE
    ),
    has_images = TRUE
    WHERE review_id = NEW.review_id;
END$$
DELIMITER ;
`````

## File: docker-compose.aws.yml
`````yaml
version: '3.8'
services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: carelink-app
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - DB_URL=${DB_URL:-jdbc:mysql://localhost:3306/carelink?useSSL=false&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=UTF-8}
      - DB_USERNAME=${DB_USERNAME:-root}
      - DB_PASSWORD=${DB_PASSWORD:-mysql}
      - KAKAO_APP_KEY=${KAKAO_APP_KEY:-your_kakao_app_key}
      - KAKAO_REST_API_KEY=${KAKAO_REST_API_KEY:-your_kakao_rest_api_key}
      - UPLOAD_BASE_PATH=${UPLOAD_BASE_PATH:-/carelink-uploads/}
      - LOGGING_LEVEL_ROOT=INFO
      - LOGGING_LEVEL_COM_EXAMPLE_CARELINK=DEBUG
      - JAVA_OPTS=-Xms512m -Xmx1024m -XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0
    volumes:
      - carelink-uploads:/carelink-uploads
      - ./logs:/app/logs
    restart: unless-stopped
    networks:
      - carelink-network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/actuator/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
volumes:
  carelink-uploads:
    name: carelink-uploads
    driver: local
networks:
  carelink-network:
    name: carelink-network
    driver: bridge
`````

## File: IMAGE_UPLOAD_TEST_CHECKLIST.md
`````markdown
# ğŸ§ª ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

## ğŸ“‹ í…ŒìŠ¤íŠ¸ ì¤€ë¹„ì‚¬í•­

### âœ… ì‚¬ì „ ì¤€ë¹„
- [ ] Java 11+ ì„¤ì¹˜ í™•ì¸ (`java -version`)
- [ ] MySQL ì„œë²„ ì‹¤í–‰ ìƒíƒœ í™•ì¸
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì ìš© (`schema-image-attachments.sql`)
- [ ] ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„± (`setup-directories.bat` ì‹¤í–‰)
- [ ] Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ (`quick-test.bat` ë˜ëŠ” `gradlew.bat bootRun`)

---

## ğŸ¯ ê²Œì‹œê¸€ ì´ë¯¸ì§€ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸

### URL: `http://localhost:8080/board/write`

#### ê¸°ë³¸ ì—…ë¡œë“œ ê¸°ëŠ¥
- [ ] **ë“œë˜ê·¸ ì•¤ ë“œë¡­**: ì´ë¯¸ì§€ íŒŒì¼ì„ ë“œë˜ê·¸í•´ì„œ ì—…ë¡œë“œ ì˜ì—­ì— ë“œë¡­
- [ ] **íŒŒì¼ ì„ íƒ**: ì—…ë¡œë“œ ì˜ì—­ í´ë¦­ â†’ íŒŒì¼ ì„ íƒ ëŒ€í™”ìƒì â†’ ì´ë¯¸ì§€ ì„ íƒ
- [ ] **ë‹¤ì¤‘ ì„ íƒ**: Ctrl í‚¤ë¥¼ ëˆ„ë¥´ê³  ì—¬ëŸ¬ ì´ë¯¸ì§€ ë™ì‹œ ì„ íƒ
- [ ] **ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°**: ì„ íƒí•œ ì´ë¯¸ì§€ê°€ ì¦‰ì‹œ ë¯¸ë¦¬ë³´ê¸°ë¡œ í‘œì‹œë¨

#### ì œí•œì‚¬í•­ í…ŒìŠ¤íŠ¸
- [ ] **íŒŒì¼ ê°œìˆ˜ ì œí•œ**: 10ê°œ ì´ˆê³¼ ì„ íƒ ì‹œ ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
- [ ] **íŒŒì¼ í¬ê¸° ì œí•œ**: 5MB ì´ˆê³¼ íŒŒì¼ ì—…ë¡œë“œ ì‹œ ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
- [ ] **íŒŒì¼ í˜•ì‹ ì œí•œ**: JPG, PNG, GIF, WebP ì™¸ í˜•ì‹ ì—…ë¡œë“œ ì‹œ ê±°ë¶€

#### UI/UX í…ŒìŠ¤íŠ¸
- [ ] **í˜¸ë²„ íš¨ê³¼**: ì—…ë¡œë“œ ì˜ì—­ì— ë§ˆìš°ìŠ¤ ì˜¬ë¦´ ë•Œ ìƒ‰ìƒ ë³€í™”
- [ ] **ë“œë˜ê·¸ì˜¤ë²„ íš¨ê³¼**: íŒŒì¼ ë“œë˜ê·¸ ì¤‘ ì˜ì—­ ê°•ì¡° í‘œì‹œ
- [ ] **ì´ë¯¸ì§€ ì¹´ìš´í„°**: ìš°í•˜ë‹¨ì— "í˜„ì¬ê°œìˆ˜/10ê°œ" í‘œì‹œ
- [ ] **ê°œë³„ ì‚­ì œ**: ê° ì´ë¯¸ì§€ì˜ X ë²„íŠ¼ìœ¼ë¡œ ê°œë³„ ì‚­ì œ ê°€ëŠ¥
- [ ] **alt text ì…ë ¥**: ê° ì´ë¯¸ì§€ë§ˆë‹¤ ì„¤ëª… í…ìŠ¤íŠ¸ ì…ë ¥ ê°€ëŠ¥

#### ë°±ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸
- [ ] **ê²Œì‹œê¸€ ì‘ì„±**: ì´ë¯¸ì§€ì™€ í•¨ê»˜ ê²Œì‹œê¸€ ì •ìƒ ë“±ë¡
- [ ] **ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥**: `board_images` í…Œì´ë¸”ì— ì´ë¯¸ì§€ ì •ë³´ ì €ì¥ í™•ì¸
- [ ] **íŒŒì¼ ì‹œìŠ¤í…œ**: `C:/carelink-uploads/board/` í´ë”ì— íŒŒì¼ ì €ì¥ í™•ì¸

---

## â­ ë¦¬ë·° ì´ë¯¸ì§€ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸

### URL: `http://localhost:8080/review/write`

#### ê¸°ë³¸ ì—…ë¡œë“œ ê¸°ëŠ¥
- [ ] **ë“œë˜ê·¸ ì•¤ ë“œë¡­**: ì´ë¯¸ì§€ íŒŒì¼ì„ ë“œë˜ê·¸í•´ì„œ ì—…ë¡œë“œ ì˜ì—­ì— ë“œë¡­
- [ ] **íŒŒì¼ ì„ íƒ**: ì—…ë¡œë“œ ì˜ì—­ í´ë¦­ â†’ íŒŒì¼ ì„ íƒ ëŒ€í™”ìƒì â†’ ì´ë¯¸ì§€ ì„ íƒ
- [ ] **ë‹¤ì¤‘ ì„ íƒ**: ìµœëŒ€ 5ê°œê¹Œì§€ ì´ë¯¸ì§€ ë™ì‹œ ì„ íƒ
- [ ] **ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°**: ì„ íƒí•œ ì´ë¯¸ì§€ê°€ ì¦‰ì‹œ ë¯¸ë¦¬ë³´ê¸°ë¡œ í‘œì‹œë¨

#### ì œí•œì‚¬í•­ í…ŒìŠ¤íŠ¸
- [ ] **íŒŒì¼ ê°œìˆ˜ ì œí•œ**: 5ê°œ ì´ˆê³¼ ì„ íƒ ì‹œ ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
- [ ] **íŒŒì¼ í¬ê¸° ì œí•œ**: 5MB ì´ˆê³¼ íŒŒì¼ ì—…ë¡œë“œ ì‹œ ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
- [ ] **íŒŒì¼ í˜•ì‹ ì œí•œ**: ì´ë¯¸ì§€ íŒŒì¼ë§Œ í—ˆìš©

#### WebP ë³€í™˜ í…ŒìŠ¤íŠ¸
- [ ] **ìë™ ë³€í™˜**: JPG/PNG â†’ WebP ìë™ ë³€í™˜
- [ ] **ì¸ë„¤ì¼ ìƒì„±**: Small(300x200), Medium(600x400), Large(1200x800) ì¸ë„¤ì¼ ìƒì„±
- [ ] **í´ë°± JPG**: ë¸Œë¼ìš°ì € í˜¸í™˜ì„±ì„ ìœ„í•œ JPG í´ë°± íŒŒì¼ ìƒì„±
- [ ] **íŒŒì¼ í¬ê¸° ì ˆì•½**: WebP ë³€í™˜ìœ¼ë¡œ 50-70% ìš©ëŸ‰ ì ˆì•½ í™•ì¸

#### ë°±ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸
- [ ] **ë¦¬ë·° ì‘ì„±**: ì´ë¯¸ì§€ì™€ í•¨ê»˜ ë¦¬ë·° ì •ìƒ ë“±ë¡
- [ ] **ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥**: `review_images` í…Œì´ë¸”ì— ì´ë¯¸ì§€ ì •ë³´ ì €ì¥ í™•ì¸
- [ ] **íŒŒì¼ ì‹œìŠ¤í…œ**: `C:/carelink-uploads/review/` í´ë”ì— íŒŒì¼ ì €ì¥ í™•ì¸

---

## ğŸ”§ AJAX API í…ŒìŠ¤íŠ¸ (ê³ ê¸‰)

### ê°œë°œì ë„êµ¬(F12) ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ í™•ì¸

#### ê²Œì‹œê¸€ ì´ë¯¸ì§€ API
- [ ] **POST** `/board/api/upload-images/{boardId}`: ì´ë¯¸ì§€ ì—…ë¡œë“œ API
- [ ] **DELETE** `/board/api/delete-image/{imageId}`: ì´ë¯¸ì§€ ì‚­ì œ API
- [ ] **ì‘ë‹µ ìƒíƒœ**: 200 OK (ì„±ê³µ), 400/401/403 (ì˜¤ë¥˜)
- [ ] **ì‘ë‹µ ë°ì´í„°**: JSON í˜•íƒœë¡œ ì—…ë¡œë“œëœ ì´ë¯¸ì§€ ì •ë³´ ë°˜í™˜

#### ë¦¬ë·° ì´ë¯¸ì§€ API
- [ ] **POST** `/review/api/upload-images/{reviewId}`: ì´ë¯¸ì§€ ì—…ë¡œë“œ API
- [ ] **DELETE** `/review/api/delete-image/{imageId}`: ì´ë¯¸ì§€ ì‚­ì œ API
- [ ] **ì‘ë‹µ ì²˜ë¦¬**: ì„±ê³µ/ì‹¤íŒ¨ ë©”ì‹œì§€ ì ì ˆíˆ í‘œì‹œ

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ê²€ì¦

### `board_images` í…Œì´ë¸” í™•ì¸
```sql
SELECT * FROM board_images WHERE board_id = [ê²Œì‹œê¸€ID];
```
- [ ] `webp_path`: WebP ë³€í™˜ íŒŒì¼ ê²½ë¡œ
- [ ] `thumbnail_small/medium/large`: ì¸ë„¤ì¼ ê²½ë¡œë“¤
- [ ] `fallback_jpg_path`: JPG í´ë°± ê²½ë¡œ
- [ ] `alt_text`: ì‚¬ìš©ì ì…ë ¥ ì„¤ëª… í…ìŠ¤íŠ¸
- [ ] `file_size_webp < file_size`: WebP ì••ì¶• íš¨ê³¼ í™•ì¸

### `review_images` í…Œì´ë¸” í™•ì¸
```sql
SELECT * FROM review_images WHERE review_id = [ë¦¬ë·°ID];
```
- [ ] ë™ì¼í•œ êµ¬ì¡°ë¡œ ë°ì´í„° ì €ì¥ í™•ì¸

### ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸ í™•ì¸
```sql
SELECT board_id, image_count, has_images FROM board WHERE image_count > 0;
SELECT review_id, image_count, has_images FROM review WHERE image_count > 0;
```
- [ ] íŠ¸ë¦¬ê±°ë¡œ ìë™ ì—…ë°ì´íŠ¸ë˜ëŠ” ì¹´ìš´íŠ¸ í™•ì¸

---

## ğŸ“± ë°˜ì‘í˜• í…ŒìŠ¤íŠ¸

### ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸°ì—ì„œ í…ŒìŠ¤íŠ¸
- [ ] **ë°ìŠ¤í¬í†±** (1920x1080): ì •ìƒ í‘œì‹œ
- [ ] **íƒœë¸”ë¦¿** (768x1024): ë ˆì´ì•„ì›ƒ ì¡°ì • í™•ì¸
- [ ] **ëª¨ë°”ì¼** (375x667): í„°ì¹˜ ì¸í„°í˜ì´ìŠ¤ ë™ì‘ í™•ì¸

---

## ğŸ› ì˜¤ë¥˜ ìƒí™© í…ŒìŠ¤íŠ¸

### ì˜ˆìƒ ì˜¤ë¥˜ ìƒí™©ë“¤
- [ ] **ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜**: ì¸í„°ë„· ì—°ê²° ëŠê¹€ ì‹œ ì ì ˆí•œ ì˜¤ë¥˜ ë©”ì‹œì§€
- [ ] **ì„œë²„ ì˜¤ë¥˜**: ì„œë²„ ë‹¤ìš´ ì‹œ ì‚¬ìš©ì ì¹œí™”ì  ì˜¤ë¥˜ ì²˜ë¦¬
- [ ] **ê¶Œí•œ ì˜¤ë¥˜**: ë””ë ‰í† ë¦¬ ì“°ê¸° ê¶Œí•œ ì—†ì„ ë•Œ ì˜¤ë¥˜ ì²˜ë¦¬
- [ ] **ë””ìŠ¤í¬ ìš©ëŸ‰ ë¶€ì¡±**: ì¶©ë¶„í•œ ì €ì¥ ê³µê°„ì´ ì—†ì„ ë•Œ ì²˜ë¦¬

---

## âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ í™•ì¸ì‚¬í•­

### íŒŒì¼ ì‹œìŠ¤í…œ í™•ì¸
```
C:/carelink-uploads/
â”œâ”€â”€ board/
â”‚   â”œâ”€â”€ board_1_0_a1b2c3d4_original.jpg
â”‚   â”œâ”€â”€ board_1_0_a1b2c3d4.webp
â”‚   â”œâ”€â”€ board_1_0_a1b2c3d4_small.webp
â”‚   â”œâ”€â”€ board_1_0_a1b2c3d4_medium.webp
â”‚   â””â”€â”€ board_1_0_a1b2c3d4_large.webp
â””â”€â”€ review/
    â”œâ”€â”€ review_1_0_e5f6g7h8_original.jpg
    â”œâ”€â”€ review_1_0_e5f6g7h8.webp
    â”œâ”€â”€ review_1_0_e5f6g7h8_small.webp
    â”œâ”€â”€ review_1_0_e5f6g7h8_medium.webp
    â””â”€â”€ review_1_0_e5f6g7h8_large.webp
```

### ì„±ëŠ¥ í™•ì¸
- [ ] **í˜ì´ì§€ ë¡œë”© ì†ë„**: WebP ì´ë¯¸ì§€ë¡œ ë¹ ë¥¸ ë¡œë”© í™•ì¸
- [ ] **ì—…ë¡œë“œ ì†ë„**: ëŒ€ìš©ëŸ‰ ì´ë¯¸ì§€ì˜ ì›í™œí•œ ì—…ë¡œë“œ
- [ ] **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: ë‹¤ì¤‘ ì´ë¯¸ì§€ ì²˜ë¦¬ ì‹œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì—†ìŒ

---

## ğŸ‰ í…ŒìŠ¤íŠ¸ ì„±ê³µ ê¸°ì¤€

ëª¨ë“  ì²´í¬ë°•ìŠ¤ê°€ âœ…ë¡œ ì™„ë£Œë˜ë©´ ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ì´ ì™„ì „íˆ êµ¬í˜„ëœ ê²ƒì…ë‹ˆë‹¤!

### ğŸš€ ì¶”ê°€ ê°œì„  ì•„ì´ë””ì–´
- [ ] ì´ë¯¸ì§€ ìˆœì„œ ë³€ê²½ (ë“œë˜ê·¸ ì•¤ ë“œë¡­)
- [ ] ì´ë¯¸ì§€ í¸ì§‘ ê¸°ëŠ¥ (í¬ë¡­, íšŒì „)
- [ ] ì§„í–‰ë¥  í‘œì‹œ ë°”
- [ ] ì´ë¯¸ì§€ ì••ì¶• ì˜µì…˜
- [ ] ì›Œí„°ë§ˆí¬ ì¶”ê°€
- [ ] ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° í‘œì‹œ
`````

## File: lightcare-ai-summary.md
`````markdown
This file is a merged representation of a subset of the codebase, containing specifically included files and files not matching ignore patterns, combined into a single document by Repomix.
The content has been processed where comments have been removed, empty lines have been removed.

# File Summary

## Purpose
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  a. A header with the file path (## File: path/to/file)
  b. The full contents of the file in a code block

## Usage Guidelines
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
- Pay special attention to the Repository Description. These contain important context and guidelines specific to this project.

## Notes
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: src/main/java/**/*.java, src/main/resources/application.yml, src/main/resources/mapper/*.xml, build.gradle, README.md, CLAUDE.md
- Files matching these patterns are excluded: **/test/**, **/static/js/bootstrap*, **/static/js/jquery*, **/static/css/bootstrap*, **/*.html, **/backup/**, **/images/**, **/*.png, **/*.jpg, **/deploy-*.sh, **/facility-image-*.js, **/crop-*.html, **/edit.html
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Code comments have been removed from supported file types
- Empty lines have been removed from all files
- Files are sorted by Git change count (files with more changes are at the bottom)

# User Provided Header
LightCare Project Summary for AI Analysis

# Directory Structure
```
src/
  main/
    java/
      com/
        example/
          carelink/
            common/
              BaseDTO.java
              Constants.java
              CustomMultipartFile.java
              PageInfo.java
            config/
              DevSecurityConfig.java
              KakaoApiConfig.java
              ProdSecurityConfig.java
              SecurityConfig.java
              WebConfig.java
            controller/
              AdminController.java
              BoardController.java
              FacilityController.java
              FacilityImageApiController.java
              HomeController.java
              JobController.java
              MemberController.java
              ReviewController.java
            dao/
              BoardMapper.java
              FacilityImageMapper.java
              FacilityMapper.java
              JobApplicationMapper.java
              JobMapper.java
              MemberMapper.java
              ReviewMapper.java
            dto/
              BoardDTO.java
              FacilityDTO.java
              FacilityImageDTO.java
              JobApplicationDTO.java
              JobDTO.java
              LoginDTO.java
              MemberDTO.java
              ReviewDTO.java
            service/
              BoardService.java
              FacilityImageService.java
              FacilityService.java
              JobService.java
              MemberService.java
              ReviewService.java
            validation/
              groups/
                OnFacilityJoin.java
            CarelinkApplication.java
      Crolling.java
    resources/
      mapper/
        boardMapper.xml
        facilityImageMapper.xml
        facilityMapper.xml
        JobApplicationMapper.xml
        jobMapper.xml
        MemberMapper.xml
        reviewMapper.xml
      application.yml
build.gradle
CLAUDE.md
README.md
```

# Files

## File: src/main/java/com/example/carelink/dto/LoginDTO.java
````java
package com.example.carelink.dto;
import lombok.Data;
import javax.validation.constraints.NotBlank;
@Data
public class LoginDTO {
    @NotBlank(message = "ì‚¬ìš©ì IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”")
    private String userId;
    @NotBlank(message = "ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”")
    private String password;
    private boolean rememberMe;
}
````

## File: src/main/java/com/example/carelink/common/CustomMultipartFile.java
````java
package com.example.carelink.common;
import org.springframework.web.multipart.MultipartFile;
import java.io.*;
public class CustomMultipartFile implements MultipartFile {
    private final String name;
    private final String originalFilename;
    private final String contentType;
    private final byte[] content;
    public CustomMultipartFile(String name, String originalFilename, String contentType, byte[] content) {
        this.name = name;
        this.originalFilename = originalFilename;
        this.contentType = contentType;
        this.content = content;
    }
    @Override
    public String getName() {
        return name;
    }
    @Override
    public String getOriginalFilename() {
        return originalFilename;
    }
    @Override
    public String getContentType() {
        return contentType;
    }
    @Override
    public boolean isEmpty() {
        return content == null || content.length == 0;
    }
    @Override
    public long getSize() {
        return content != null ? content.length : 0;
    }
    @Override
    public byte[] getBytes() throws IOException {
        return content;
    }
    @Override
    public InputStream getInputStream() throws IOException {
        return new ByteArrayInputStream(content);
    }
    @Override
    public void transferTo(File dest) throws IOException, IllegalStateException {
        try (FileOutputStream fos = new FileOutputStream(dest)) {
            fos.write(content);
        }
    }
}
````

## File: src/main/java/com/example/carelink/common/PageInfo.java
````java
package com.example.carelink.common;
import lombok.Getter;
import lombok.Setter;
import java.util.List;
@Getter
@Setter
public class PageInfo<T> {
    private List<T> list;
    private int currentPage;
    private int pageSize;
    private int totalCount;
    private int totalPages;
    private int startPage;
    private int endPage;
    private boolean hasPrevious;
    private boolean hasNext;
    private boolean firstPage;
    private boolean lastPage;
    public PageInfo(List<T> list, int currentPage, int pageSize, int totalCount) {
        this.list = list;
        this.currentPage = currentPage;
        this.pageSize = pageSize;
        this.totalCount = totalCount;
        this.totalPages = (int) Math.ceil((double) totalCount / pageSize);
        this.startPage = Math.max(1, currentPage - 4);
        this.endPage = Math.min(totalPages, currentPage + 4);
        this.hasPrevious = currentPage > 1;
        this.hasNext = currentPage < totalPages;
        this.firstPage = currentPage == 1;
        this.lastPage = currentPage == totalPages;
    }
    public int getOffset() {
        return (currentPage - 1) * pageSize;
    }
    public boolean isFirstPage() {
        return currentPage == 1;
    }
    public boolean isLastPage() {
        return currentPage == totalPages;
    }
}
````

## File: src/main/java/com/example/carelink/config/DevSecurityConfig.java
````java
package com.example.carelink.config;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Profile;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.web.SecurityFilterChain;
@Configuration
@EnableWebSecurity
@Profile("dev")
public class DevSecurityConfig {
    @Bean
    public SecurityFilterChain devFilterChain(HttpSecurity http) throws Exception {
        http
            .csrf(csrf -> csrf.disable())
            .authorizeHttpRequests(auth -> auth
                .anyRequest().permitAll()
            )
            .formLogin(formLogin -> formLogin.disable())
            .httpBasic(httpBasic -> httpBasic.disable());
        return http.build();
    }
}
````

## File: src/main/java/com/example/carelink/config/KakaoApiConfig.java
````java
package com.example.carelink.config;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;
@Configuration
public class KakaoApiConfig implements WebMvcConfigurer {
    @Value("${api.kakao.app-key:#{null}}")
    private String kakaoAppKey;
    private String getKakaoAppKey() {
        String key = kakaoAppKey;
        if (key == null || key.isEmpty()) {
            key = System.getenv("KAKAO_APP_KEY");
            System.out.println("í™˜ê²½ë³€ìˆ˜ì—ì„œ ì§ì ‘ ì½ì€ API í‚¤: " + (key != null ? "ì¡´ì¬í•¨" : "ì—†ìŒ"));
        }
        return key;
    }
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new KakaoApiInterceptor());
    }
    public class KakaoApiInterceptor implements HandlerInterceptor {
        @Override
        public void postHandle(HttpServletRequest request, HttpServletResponse response,
                             Object handler, ModelAndView modelAndView) throws Exception {
            if (modelAndView != null && !modelAndView.getViewName().startsWith("redirect:")) {
                String apiKey = getKakaoAppKey();
                System.out.println("ë·°ì— ì „ë‹¬í•  API í‚¤: " + (apiKey != null && !apiKey.isEmpty() ? "ì¡´ì¬í•¨" : "ì—†ìŒ"));
                modelAndView.addObject("KAKAO_APP_KEY", apiKey);
            }
        }
    }
}
````

## File: src/main/java/com/example/carelink/config/ProdSecurityConfig.java
````java
package com.example.carelink.config;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Profile;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.web.SecurityFilterChain;
import org.springframework.security.web.util.matcher.AntPathRequestMatcher;
@Configuration
@EnableWebSecurity
@Profile("prod")
public class ProdSecurityConfig {
    @Bean
    public SecurityFilterChain prodFilterChain(HttpSecurity http) throws Exception {
        http
            .csrf(csrf -> csrf
                .csrfTokenRepository(org.springframework.security.web.csrf.CookieCsrfTokenRepository.withHttpOnlyFalse())
            )
            .authorizeHttpRequests(auth -> auth
                .requestMatchers(
                    new AntPathRequestMatcher("/css/**"),
                    new AntPathRequestMatcher("/js/**"),
                    new AntPathRequestMatcher("/images/**"),
                    new AntPathRequestMatcher("/favicon.ico")
                ).permitAll()
                .requestMatchers(
                    new AntPathRequestMatcher("/"),
                    new AntPathRequestMatcher("/member/login"),
                    new AntPathRequestMatcher("/member/join"),
                    new AntPathRequestMatcher("/member/checkUserId"),
                    new AntPathRequestMatcher("/facility/**"),
                    new AntPathRequestMatcher("/board/**"),
                    new AntPathRequestMatcher("/review/**"),
                    new AntPathRequestMatcher("/job/**"),
                    new AntPathRequestMatcher("/api/**"),
                    new AntPathRequestMatcher("/error")
                ).permitAll()
                .requestMatchers(new AntPathRequestMatcher("/admin/**")).hasRole("ADMIN")
                .anyRequest().authenticated()
            )
            .formLogin(formLogin -> formLogin
                .loginPage("/member/login")
                .defaultSuccessUrl("/")
                .failureUrl("/member/login?error=true")
                .permitAll()
            )
            .logout(logout -> logout
                .logoutRequestMatcher(new AntPathRequestMatcher("/member/logout"))
                .logoutSuccessUrl("/")
                .invalidateHttpSession(true)
                .deleteCookies("JSESSIONID")
                .permitAll()
            )
            .sessionManagement(session -> session
                .maximumSessions(1)
                .maxSessionsPreventsLogin(false)
            );
        return http.build();
    }
}
````

## File: src/main/java/com/example/carelink/controller/HomeController.java
````java
package com.example.carelink.controller;
import com.example.carelink.service.BoardService;
import com.example.carelink.service.FacilityService;
import com.example.carelink.service.JobService;
import com.example.carelink.service.MemberService;
import com.example.carelink.service.ReviewService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
@Slf4j
@Controller
@RequiredArgsConstructor
public class HomeController {
    private final MemberService memberService;
    private final FacilityService facilityService;
    private final JobService jobService;
    private final ReviewService reviewService;
    private final BoardService boardService;
    @GetMapping("/")
    public String home(Model model) {
        model.addAttribute("pageTitle", "ë©”ì¸");
        try {
            int facilityCount = facilityService.getFacilityCount();
            int jobCount = jobService.getJobCount();
            int reviewCount = reviewService.getReviewCount();
            int memberCount = memberService.getMemberCount();
            int boardCount = boardService.getBoardCount();
            model.addAttribute("facilityCount", facilityCount);
            model.addAttribute("jobCount", jobCount);
            model.addAttribute("reviewCount", reviewCount);
            model.addAttribute("memberCount", memberCount);
            model.addAttribute("boardCount", boardCount);
            log.info("í†µê³„ ë°ì´í„° - ì‹œì„¤: {}, êµ¬ì¸êµ¬ì§: {}, ë¦¬ë·°: {}, íšŒì›: {}, ê²Œì‹œê¸€: {}",
                    facilityCount, jobCount, reviewCount, memberCount, boardCount);
        } catch (Exception e) {
            log.error("í†µê³„ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨", e);
            model.addAttribute("facilityCount", 0);
            model.addAttribute("jobCount", 0);
            model.addAttribute("reviewCount", 0);
            model.addAttribute("memberCount", 0);
            model.addAttribute("boardCount", 0);
        }
        log.info("ë©”ì¸ í˜ì´ì§€ ì ‘ì†");
        return "index";
    }
    @GetMapping("/about")
    public String about(Model model) {
        model.addAttribute("pageTitle", "ì†Œê°œ");
        return "about";
    }
    @GetMapping("/error")
    public String error() {
        return "error";
    }
}
````

## File: src/main/java/com/example/carelink/dao/JobApplicationMapper.java
````java
package com.example.carelink.dao;
import com.example.carelink.dto.JobApplicationDTO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;
@Mapper
public interface JobApplicationMapper {
    int insertJobApplication(JobApplicationDTO jobApplication);
    int countByJobIdAndApplicantMemberId(@Param("jobId") Long jobId, @Param("applicantMemberId") Long applicantMemberId);
}
````

## File: src/main/java/com/example/carelink/dto/FacilityImageDTO.java
````java
package com.example.carelink.dto;
import lombok.Data;
import java.time.LocalDateTime;
@Data
public class FacilityImageDTO {
    private Long imageId;
    private Long facilityId;
    private String imagePath;
    private String imageAltText;
    private Integer imageOrder;
    private Boolean isMainImage;
    private LocalDateTime uploadDate;
    private LocalDateTime updatedAt;
}
````

## File: src/main/java/com/example/carelink/dto/JobApplicationDTO.java
````java
package com.example.carelink.dto;
import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.AllArgsConstructor;
import java.time.LocalDateTime;
@Data
@NoArgsConstructor
@AllArgsConstructor
public class JobApplicationDTO {
    private Long id;
    private Long jobId;
    private Long applicantMemberId;
    private LocalDateTime applicationDate;
    private String status;
}
````

## File: src/main/java/com/example/carelink/validation/groups/OnFacilityJoin.java
````java
package com.example.carelink.validation.groups;
public interface OnFacilityJoin {
}
````

## File: src/main/resources/mapper/JobApplicationMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.JobApplicationMapper">
    <insert id="insertJobApplication" parameterType="com.example.carelink.dto.JobApplicationDTO"
            useGeneratedKeys="true" keyProperty="id">
        INSERT INTO job_application (
            job_id,
            applicant_member_id,
            application_date,
            status
        ) VALUES (
            #{jobId},
            #{applicantMemberId},
            #{applicationDate},
            #{status}
        )
    </insert>
    <select id="countByJobIdAndApplicantMemberId" resultType="int">
        SELECT COUNT(*)
        FROM job_application
        WHERE job_id = #{jobId} AND applicant_member_id = #{applicantMemberId}
    </select>
    </mapper>
````

## File: src/main/java/com/example/carelink/common/Constants.java
````java
package com.example.carelink.common;
public class Constants {
    public static final String SESSION_MEMBER = "loginMember";
    public static final int MAX_LOGIN_ATTEMPTS = 5;
    public static final String MEMBER_ROLE_USER = "USER";
    public static final String MEMBER_ROLE_FACILITY = "FACILITY";
    public static final String MEMBER_ROLE_ADMIN = "ADMIN";
    public static final int DEFAULT_PAGE_SIZE = 10;
    public static final int DEFAULT_PAGE_BLOCK = 5;
    public static final String UPLOAD_BASE_PATH = "C:/carelink-uploads/";
    public static final String FACILITY_UPLOAD_PATH = UPLOAD_BASE_PATH + "facility/";
    public static final String PROFILE_UPLOAD_PATH = UPLOAD_BASE_PATH + "profile/";
    public static final String TEMP_UPLOAD_PATH = UPLOAD_BASE_PATH + "temp/";
    public static final String TEST_IMAGES_PATH = "/test-images/";
    public static final long MAX_FILE_SIZE = 10 * 1024 * 1024;
    public static final int MAX_FACILITY_IMAGES = 5;
    public static final int MAX_PROFILE_IMAGES = 1;
    public static final String[] ALLOWED_IMAGE_EXTENSIONS = {"jpg", "jpeg", "png", "webp"};
    public static final String JOB_TYPE_RECRUIT = "RECRUIT";
    public static final String JOB_TYPE_SEARCH = "SEARCH";
    public static final String JOB_STATUS_ACTIVE = "ACTIVE";
    public static final String JOB_STATUS_CLOSED = "CLOSED";
    public static final String FACILITY_TYPE_NURSING_HOME = "NURSING_HOME";
    public static final String FACILITY_TYPE_HOSPITAL = "HOSPITAL";
    public static final String FACILITY_TYPE_DAY_CARE = "DAY_CARE";
    public static final String SUCCESS = "success";
    public static final String ERROR = "error";
    public static final String DUPLICATE_ID = "duplicate_id";
    public static final String LOGIN_REQUIRED = "login_required";
}
````

## File: src/main/java/com/example/carelink/controller/AdminController.java
````java
package com.example.carelink.controller;
import com.example.carelink.common.Constants;
import com.example.carelink.dto.FacilityDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.service.FacilityService;
import com.example.carelink.service.MemberService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;
import javax.servlet.http.HttpSession;
import java.util.ArrayList;
import java.util.List;
@Controller
@RequestMapping("/admin")
@RequiredArgsConstructor
@Slf4j
public class AdminController {
    private final FacilityService facilityService;
    private final MemberService memberService;
    private boolean isAdmin(HttpSession session) {
        MemberDTO sessionMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        return sessionMember != null && "ADMIN".equals(sessionMember.getRole());
    }
    @GetMapping("")
    public String adminDashboard(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        if (!isAdmin(session)) {
            redirectAttributes.addFlashAttribute("errorMessage", "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/";
        }
        try {
            int pendingFacilities = facilityService.countPendingFacilities();
            int totalMembers = memberService.getTotalMemberCount();
            int facilityMembers = memberService.getFacilityMemberCount();
            int userMembers = totalMembers - facilityMembers;
            model.addAttribute("pendingFacilities", pendingFacilities);
            model.addAttribute("totalMembers", totalMembers);
            model.addAttribute("facilityMembers", facilityMembers);
            model.addAttribute("userMembers", userMembers);
            log.info("ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ - ìŠ¹ì¸ëŒ€ê¸°: {}, ì „ì²´íšŒì›: {}", pendingFacilities, totalMembers);
        } catch (Exception e) {
            log.error("ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            redirectAttributes.addFlashAttribute("errorMessage", "ëŒ€ì‹œë³´ë“œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return "admin/dashboard";
    }
    @GetMapping("/facilities")
    public String facilityManagement(@RequestParam(defaultValue = "PENDING") String status,
                                   HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        if (!isAdmin(session)) {
            redirectAttributes.addFlashAttribute("errorMessage", "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/";
        }
        try {
            log.info("ì‹œì„¤ ìŠ¹ì¸ ê´€ë¦¬ í˜ì´ì§€ ì ‘ê·¼ ì‹œë„ - ìƒíƒœ: {}", status);
            List<FacilityDTO> facilities = facilityService.getFacilitiesByApprovalStatus(status);
            log.info("ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ìƒíƒœ: {}, ê°œìˆ˜: {}", status, facilities != null ? facilities.size() : "null");
            if (facilities == null) {
                facilities = new ArrayList<>();
                log.warn("ì‹œì„¤ ëª©ë¡ì´ nullì´ì–´ì„œ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì´ˆê¸°í™”í–ˆìŠµë‹ˆë‹¤.");
            }
            model.addAttribute("facilities", facilities);
            model.addAttribute("currentStatus", status);
        } catch (Exception e) {
            log.error("ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - ìƒíƒœ: {}", status, e);
            model.addAttribute("facilities", new ArrayList<>());
            model.addAttribute("currentStatus", status);
            redirectAttributes.addFlashAttribute("errorMessage", "ì‹œì„¤ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
        }
        return "admin/facilities";
    }
    @PostMapping("/facilities/{facilityId}/approve")
    @ResponseBody
    public String approveFacility(@PathVariable Long facilityId,
                                @RequestParam String action,
                                @RequestParam(required = false) String reason,
                                HttpSession session) {
        if (!isAdmin(session)) {
            return "UNAUTHORIZED";
        }
        try {
            String newStatus;
            if ("approve".equals(action)) {
                newStatus = "APPROVED";
                facilityService.updateFacilityApprovalStatus(facilityId, newStatus, null);
                log.info("ì‹œì„¤ ìŠ¹ì¸ ì™„ë£Œ - ID: {}", facilityId);
            } else if ("reject".equals(action)) {
                newStatus = "REJECTED";
                facilityService.updateFacilityApprovalStatus(facilityId, newStatus, reason);
                log.info("ì‹œì„¤ ìŠ¹ì¸ ê±°ë¶€ - ID: {}, ì‚¬ìœ : {}", facilityId, reason);
            } else {
                return "INVALID_ACTION";
            }
            return "SUCCESS";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ìŠ¹ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - ID: {}", facilityId, e);
            return "ERROR";
        }
    }
    @GetMapping("/members")
    public String memberManagement(@RequestParam(defaultValue = "ALL") String role,
                                 @RequestParam(defaultValue = "1") int page,
                                 HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        if (!isAdmin(session)) {
            redirectAttributes.addFlashAttribute("errorMessage", "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/";
        }
        try {
            List<MemberDTO> members = memberService.getMembersByRole(role, page, 20);
            int totalCount = memberService.getMemberCountByRole(role);
            int totalPages = (int) Math.ceil((double) totalCount / 20);
            model.addAttribute("members", members);
            model.addAttribute("currentRole", role);
            model.addAttribute("currentPage", page);
            model.addAttribute("totalPages", totalPages);
            model.addAttribute("totalCount", totalCount);
            log.info("íšŒì› ê´€ë¦¬ í˜ì´ì§€ ì ‘ê·¼ - ì—­í• : {}, í˜ì´ì§€: {}, ì´ ê°œìˆ˜: {}", role, page, totalCount);
        } catch (Exception e) {
            log.error("íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            redirectAttributes.addFlashAttribute("errorMessage", "íšŒì› ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return "admin/members";
    }
    @PostMapping("/members/{memberId}/toggle-active")
    @ResponseBody
    public String toggleMemberActive(@PathVariable Long memberId, HttpSession session) {
        if (!isAdmin(session)) {
            return "UNAUTHORIZED";
        }
        try {
            boolean result = memberService.toggleMemberActive(memberId);
            log.info("íšŒì› í™œì„±í™” ìƒíƒœ ë³€ê²½ - ID: {}, ê²°ê³¼: {}", memberId, result);
            return result ? "SUCCESS" : "FAILED";
        } catch (Exception e) {
            log.error("íšŒì› í™œì„±í™” ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - ID: {}", memberId, e);
            return "ERROR";
        }
    }
    @GetMapping("/facilities/{facilityId}/detail")
    @ResponseBody
    public FacilityDTO getFacilityDetail(@PathVariable Long facilityId, HttpSession session) {
        if (!isAdmin(session)) {
            return null;
        }
        try {
            return facilityService.getFacilityById(facilityId);
        } catch (Exception e) {
            log.error("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - ID: {}", facilityId, e);
            return null;
        }
    }
    @GetMapping("/statistics")
    public String statistics(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        if (!isAdmin(session)) {
            redirectAttributes.addFlashAttribute("errorMessage", "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/";
        }
        try {
            model.addAttribute("totalMembers", memberService.getTotalMemberCount());
            model.addAttribute("facilityMembers", memberService.getFacilityMemberCount());
            model.addAttribute("approvedFacilities", facilityService.countApprovedFacilities());
            model.addAttribute("pendingFacilities", facilityService.countPendingFacilities());
            model.addAttribute("rejectedFacilities", facilityService.countRejectedFacilities());
            log.info("ê´€ë¦¬ì í†µê³„ í˜ì´ì§€ ì ‘ê·¼");
        } catch (Exception e) {
            log.error("í†µê³„ ë°ì´í„° ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            redirectAttributes.addFlashAttribute("errorMessage", "í†µê³„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return "admin/statistics";
    }
}
````

## File: src/main/java/com/example/carelink/dto/JobDTO.java
````java
package com.example.carelink.dto;
import com.example.carelink.common.BaseDTO;
import lombok.Data;
import lombok.EqualsAndHashCode;
import javax.validation.constraints.NotBlank;
import javax.validation.constraints.NotNull;
import java.math.BigDecimal;
import java.time.LocalDate;
@Data
@EqualsAndHashCode(callSuper = true)
public class JobDTO extends BaseDTO {
    private Long jobId;
    @NotBlank(message = "ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String title;
    @NotBlank(message = "ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String content;
    @NotBlank(message = "êµ¬ì¸êµ¬ì§ ìœ í˜•ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String jobType;
    @NotBlank(message = "ê·¼ë¬´ í˜•íƒœëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String workType;
    private String position;
    private Integer recruitCount;
    private String salaryType;
    private BigDecimal salaryMin;
    private BigDecimal salaryMax;
    private String salaryDescription;
    private String workLocation;
    private String workHours;
    private String experience;
    private String education;
    private String qualifications;
    private String benefits;
    private LocalDate startDate;
    private LocalDate endDate;
    private String contactName;
    private String contactPhone;
    private String contactEmail;
    @NotBlank(message = "ê²Œì‹œê¸€ ìƒíƒœëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String status;
    private Integer viewCount;
    private Integer applyCount;
    @NotNull(message = "ì‘ì„±ì ì •ë³´ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private Long memberId;
    private String memberName;
    private Long facilityId;
    private String facilityName;
    private String searchKeyword;
    private String searchJobType;
    private String searchWorkType;
    private String searchLocation;
    private String searchPosition;
    private String attachmentPath;
    private String attachmentName;
    private Integer priority;
    private boolean isHighlight;
}
````

## File: src/main/java/com/example/carelink/dto/ReviewDTO.java
````java
package com.example.carelink.dto;
import com.example.carelink.common.BaseDTO;
import lombok.Data;
import lombok.EqualsAndHashCode;
import javax.validation.constraints.Max;
import javax.validation.constraints.Min;
import javax.validation.constraints.NotBlank;
import javax.validation.constraints.NotNull;
@Data
@EqualsAndHashCode(callSuper = true)
public class ReviewDTO extends BaseDTO {
    private Long reviewId;
    @NotNull(message = "ì‹œì„¤ ì •ë³´ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private Long facilityId;
    private String facilityName;
    @NotNull(message = "ì‘ì„±ì ì •ë³´ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private Long memberId;
    private String memberName;
    @NotBlank(message = "ë¦¬ë·° ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String title;
    @NotBlank(message = "ë¦¬ë·° ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String content;
    @NotNull(message = "í‰ì ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    @Min(value = 1, message = "í‰ì ì€ 1ì  ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤")
    @Max(value = 5, message = "í‰ì ì€ 5ì  ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤")
    private Integer rating;
    private Integer serviceRating;
    private Integer facilityRating;
    private Integer staffRating;
    private Integer priceRating;
    private String reviewImage1;
    private String reviewImage2;
    private String reviewImage3;
    private String reviewImage1AltText;
    private String reviewImage2AltText;
    private String reviewImage3AltText;
    private Integer likeCount;
    private Integer dislikeCount;
    private Integer viewCount;
    private boolean isVisible;
    private String status;
    private Long parentReviewId;
    private Integer replyCount;
    private Integer replyDepth;
    private String searchKeyword;
    private Integer minRating;
    private Integer maxRating;
    private String sortBy;
    private Double facilityAverageRating;
    private Integer facilityReviewCount;
}
````

## File: src/main/java/com/example/carelink/CarelinkApplication.java
````java
package com.example.carelink;
import org.mybatis.spring.annotation.MapperScan;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
@SpringBootApplication
@MapperScan(basePackages = {"com.example.carelink.dao"})
public class CarelinkApplication {
    public static void main(String[] args) {
        SpringApplication.run(CarelinkApplication.class, args);
        System.out.println("========================================");
        System.out.println("    ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ ì‚¬ì´íŠ¸ ì‹œì‘ë¨!        ");
        System.out.println("    í¬íŠ¸: http://localhost:8080         ");
        System.out.println("========================================");
    }
}
````

## File: src/main/resources/mapper/jobMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.JobMapper">
    <resultMap id="jobResultMap" type="com.example.carelink.dto.JobDTO">
        <id property="jobId" column="job_id"/>
        <result property="title" column="title"/>
        <result property="content" column="content"/>
        <result property="jobType" column="job_type"/>
        <result property="workType" column="work_type"/>
        <result property="position" column="position"/>
        <result property="recruitCount" column="recruit_count"/>
        <result property="salaryType" column="salary_type"/>
        <result property="salaryMin" column="salary_min"/>
        <result property="salaryMax" column="salary_max"/>
        <result property="salaryDescription" column="salary_description"/>
        <result property="workLocation" column="work_location"/>
        <result property="workHours" column="work_hours"/>
        <result property="experience" column="experience"/>
        <result property="education" column="education"/>
        <result property="qualifications" column="qualifications"/>
        <result property="benefits" column="benefits"/>
        <result property="startDate" column="start_date"/>
        <result property="endDate" column="end_date"/>
        <result property="contactName" column="contact_name"/>
        <result property="contactPhone" column="contact_phone"/>
        <result property="contactEmail" column="contact_email"/>
        <result property="status" column="status"/>
        <result property="viewCount" column="view_count"/>
        <result property="applyCount" column="apply_count"/>
        <result property="memberId" column="member_id"/>
        <result property="memberName" column="member_name"/>
        <result property="facilityId" column="facility_id"/>
        <result property="facilityName" column="facility_name"/>
        <result property="attachmentPath" column="attachment_path"/>
        <result property="attachmentName" column="attachment_name"/>
        <result property="priority" column="priority"/>
        <result property="isHighlight" column="is_highlight"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
        <result property="isDeleted" column="is_deleted"/>
    </resultMap>
    <select id="findJobsWithSearch" parameterType="com.example.carelink.dto.JobDTO" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.is_deleted = false
        <if test="searchKeyword != null and searchKeyword != ''">
            AND (j.title LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR j.content LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR j.position LIKE CONCAT('%', #{searchKeyword}, '%'))
        </if>
        <if test="searchJobType != null and searchJobType != ''">
            AND j.job_type = #{searchJobType}
        </if>
        <if test="searchWorkType != null and searchWorkType != ''">
            AND j.work_type = #{searchWorkType}
        </if>
        <if test="searchLocation != null and searchLocation != ''">
            AND j.work_location LIKE CONCAT('%', #{searchLocation}, '%')
        </if>
        <if test="searchPosition != null and searchPosition != ''">
            AND j.position LIKE CONCAT('%', #{searchPosition}, '%')
        </if>
        ORDER BY j.priority DESC, j.created_at DESC
        <if test="size != null and size > 0">
            LIMIT #{size}
        </if>
        <if test="offset != null and offset >= 0">
            OFFSET #{offset}
        </if>
    </select>
    <select id="countJobsWithSearch" parameterType="com.example.carelink.dto.JobDTO" resultType="int">
        SELECT COUNT(*)
        FROM job_posting j
        WHERE j.is_deleted = false
        <if test="searchKeyword != null and searchKeyword != ''">
            AND (j.title LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR j.content LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR j.position LIKE CONCAT('%', #{searchKeyword}, '%'))
        </if>
        <if test="searchJobType != null and searchJobType != ''">
            AND j.job_type = #{searchJobType}
        </if>
        <if test="searchWorkType != null and searchWorkType != ''">
            AND j.work_type = #{searchWorkType}
        </if>
        <if test="searchLocation != null and searchLocation != ''">
            AND j.work_location LIKE CONCAT('%', #{searchLocation}, '%')
        </if>
        <if test="searchPosition != null and searchPosition != ''">
            AND j.position LIKE CONCAT('%', #{searchPosition}, '%')
        </if>
    </select>
    <select id="findJobById" parameterType="long" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.job_id = #{jobId} AND j.is_deleted = false
    </select>
    <insert id="insertJob" parameterType="com.example.carelink.dto.JobDTO" useGeneratedKeys="true" keyProperty="jobId">
        INSERT INTO job_posting (
            title, content, job_type, work_type, position, recruit_count,
            salary_type, salary_min, salary_max, salary_description,
            work_location, work_hours, experience, education, qualifications, benefits,
            start_date, end_date, contact_name, contact_phone, contact_email,
            status, member_id, facility_id, attachment_path, attachment_name,
            priority, is_highlight, created_at
        ) VALUES (
            #{title}, #{content}, #{jobType}, #{workType}, #{position}, #{recruitCount},
            #{salaryType}, #{salaryMin}, #{salaryMax}, #{salaryDescription},
            #{workLocation}, #{workHours}, #{experience}, #{education}, #{qualifications}, #{benefits},
            #{startDate}, #{endDate}, #{contactName}, #{contactPhone}, #{contactEmail},
            #{status}, #{memberId}, #{facilityId}, #{attachmentPath}, #{attachmentName},
            #{priority}, #{isHighlight}, NOW()
        )
    </insert>
    <update id="updateJob" parameterType="com.example.carelink.dto.JobDTO">
        UPDATE job_posting SET
            title = #{title},
            content = #{content},
            job_type = #{jobType},
            work_type = #{workType},
            position = #{position},
            recruit_count = #{recruitCount},
            salary_type = #{salaryType},
            salary_min = #{salaryMin},
            salary_max = #{salaryMax},
            salary_description = #{salaryDescription},
            work_location = #{workLocation},
            work_hours = #{workHours},
            experience = #{experience},
            education = #{education},
            qualifications = #{qualifications},
            benefits = #{benefits},
            start_date = #{startDate},
            end_date = #{endDate},
            contact_name = #{contactName},
            contact_phone = #{contactPhone},
            contact_email = #{contactEmail},
            status = #{status},
            facility_id = #{facilityId},
            attachment_path = #{attachmentPath},
            attachment_name = #{attachmentName},
            priority = #{priority},
            is_highlight = #{isHighlight},
            updated_at = NOW()
        WHERE job_id = #{jobId}
    </update>
    <update id="deleteJob" parameterType="long">
        UPDATE job_posting SET
            is_deleted = true,
            updated_at = NOW()
        WHERE job_id = #{jobId}
    </update>
    <update id="incrementViewCount" parameterType="long">
        UPDATE job_posting SET
            view_count = view_count + 1,
            updated_at = NOW()
        WHERE job_id = #{jobId}
    </update>
    <update id="incrementApplyCount" parameterType="long">
        UPDATE job_posting SET
            apply_count = apply_count + 1,
            updated_at = NOW()
        WHERE job_id = #{jobId}
    </update>
    <select id="findJobsByMemberId" parameterType="long" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.member_id = #{memberId} AND j.is_deleted = false
        ORDER BY j.created_at DESC
    </select>
    <select id="findJobsByFacilityId" parameterType="long" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.facility_id = #{facilityId} AND j.is_deleted = false
        ORDER BY j.created_at DESC
    </select>
    <select id="getJobList" parameterType="com.example.carelink.dto.JobDTO" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.is_deleted = false
        ORDER BY j.priority DESC, j.created_at DESC
        <if test="size != null and size > 0">
            LIMIT #{size}
        </if>
        <if test="page != null and page >= 0">
            OFFSET #{page}
        </if>
    </select>
    <select id="getJobById" parameterType="long" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.job_id = #{jobId} AND j.is_deleted = false
    </select>
    <select id="getPopularJobs" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.is_deleted = false AND j.status = 'ACTIVE'
        ORDER BY j.view_count DESC, j.apply_count DESC
        LIMIT 10
    </select>
    <select id="getJobCount" resultType="int">
        SELECT COUNT(*)
        FROM job_posting
        WHERE is_deleted = false AND status = 'ACTIVE'
    </select>
    <delete id="deleteByMemberId" parameterType="long">
        DELETE FROM job_posting WHERE member_id = #{memberId}
    </delete>
    <delete id="deleteByFacilityMemberId" parameterType="long">
        DELETE FROM job_posting
        WHERE facility_id IN (
            SELECT facility_id FROM facility WHERE registered_member_id = #{memberId}
        )
    </delete>
</mapper>
````

## File: CLAUDE.md
````markdown
# CLAUDE.md

ì´ ë¬¸ì„œëŠ” ì´ ì €ì¥ì†Œì—ì„œ Claude Code (claude.ai/code)ê°€ ì½”ë“œë¥¼ ë‹¤ë£° ë•Œ ì°¸ê³ í•  ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” í•œêµ­ íŒ€ì› 4ëª…ì´ ê°œë°œí•˜ëŠ” \*\*ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ ì›¹ì‚¬ì´íŠ¸ "ë¼ì´íŠ¸ì¼€ì–´(LightCare)"\*\*ì…ë‹ˆë‹¤. ì´ í”Œë«í¼ì€ ìš”ì–‘ ì‹œì„¤ê³¼ ìš”ì–‘ì—…ê³„ êµ¬ì§ìë¥¼ ì—°ê²°í•´ì£¼ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

* **ë°±ì—”ë“œ**: Spring Boot 2.7.18, MyBatis, MySQL
* **í”„ë¡ íŠ¸ì—”ë“œ**: Thymeleaf í…œí”Œë¦¿, Bootstrap 5, JavaScript
* **ë¹Œë“œ ë„êµ¬**: Gradle (Java 11 ì‚¬ìš©)
* **ë°ì´í„°ë² ì´ìŠ¤**: MySQL (ë¬¸ì ì¸ì½”ë”© utf8mb4)

---

## âš™ï¸ ê³µí†µ ê°œë°œ ëª…ë ¹ì–´

### ë¹Œë“œ ë° ì‹¤í–‰

```bash
# í”„ë¡œì íŠ¸ ë¹Œë“œ
./gradlew build

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
./gradlew bootRun

# ë¹Œë“œ ê²°ê³¼ë¬¼ ì •ë¦¬
./gradlew clean

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test

# ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
./gradlew check
```

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

```bash
# MySQL ì ‘ì† ë° DB ìƒì„±
mysql -u root -p
CREATE DATABASE carelink CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™”
# src/main/resources/schema.sql íŒŒì¼ì„ MySQLì—ì„œ ì‹¤í–‰
```

### ê°œë°œ ì„œë²„ ì •ë³´

* ì‹¤í–‰ ì£¼ì†Œ: `http://localhost:8080`
* DB ì—°ê²° ì£¼ì†Œ: `jdbc:mysql://localhost:3306/carelink`
* DevToolsë¥¼ í†µí•œ í•« ë¦¬ë¡œë“œ(Hot Reload) ì ìš©ë¨

---

## ğŸ§± ì•„í‚¤í…ì²˜ ê°œìš”

### íŒ€ êµ¬ì¡° (4ì¸ í˜‘ì—…)

ê¸°ëŠ¥ ì¤‘ì‹¬ì˜ ë¶„ì—… êµ¬ì¡°ë¡œ ìš´ì˜ë©ë‹ˆë‹¤:

* **íŒ€ì› A**: íšŒì› ê´€ë¦¬ (ë¡œê·¸ì¸, íšŒì›ê°€ì…, ë‚´ ì •ë³´)
* **íŒ€ì› B**: ì‹œì„¤ ê²€ìƒ‰ ë° ì§€ë„ ì—°ë™ (ì¹´ì¹´ì˜¤ë§µ)
* **íŒ€ì› C**: êµ¬ì¸êµ¬ì§ ê²Œì‹œíŒ (ê³µê³  ì‘ì„±, ì§€ì›)
* **íŒ€ì› D**: ë¦¬ë·° ì‹œìŠ¤í…œ ë° ì •ë³´ ê²Œì‹œíŒ

### íŒ¨í‚¤ì§€ êµ¬ì¡°

```
com.example.carelink/
â”œâ”€â”€ controller/          # ì»¨íŠ¸ë¡¤ëŸ¬ ê³„ì¸µ
â”œâ”€â”€ service/            # ì„œë¹„ìŠ¤ ê³„ì¸µ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
â”œâ”€â”€ dao/               # DAO ê³„ì¸µ (MyBatis ë§¤í¼)
â”œâ”€â”€ dto/               # DTO ê°ì²´
â””â”€â”€ common/            # ê³µí†µ ìœ í‹¸ ë° ìƒìˆ˜
```

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

ê´€ê³„í˜• í…Œì´ë¸” ê¸°ë°˜ìœ¼ë¡œ ì™¸ë˜í‚¤(FK)ë¥¼ ì ì ˆíˆ ì‚¬ìš©:

* **member**: ì‚¬ìš©ì ê³„ì • ë° ì¸ì¦ ì •ë³´
* **facility**: ìš”ì–‘ì‹œì„¤ ì •ë³´ (ìœ„ì¹˜ ì¢Œí‘œ í¬í•¨)
* **job\_posting**: êµ¬ì¸ê³µê³  ì •ë³´
* **review**: ì‹œì„¤ ë¦¬ë·° ë° í‰ì 
* **board**: ì»¤ë®¤ë‹ˆí‹°/ì •ë³´ ê²Œì‹œíŒ

### MyBatis êµ¬ì„±

* ì„¤ì • íŒŒì¼: `src/main/resources/mybatis-config.xml`
* ë§¤í¼ XML: `src/main/resources/mapper/*.xml`
* camelCase â†’ underscore ìë™ ë§¤í•‘ ì„¤ì •
* DTOìš© typeAlias ì‚¬ìš©

---

## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

* **Thymeleaf**: Spring Boot ì—°ë™ ì„œë²„ì‚¬ì´ë“œ í…œí”Œë¦¿
* **ë ˆì´ì•„ì›ƒ ì‹œìŠ¤í…œ**: `templates/layout/` í´ë”ì— header/footer ë¶„ë¦¬
* **ì •ì  ë¦¬ì†ŒìŠ¤**: `src/main/resources/static/` í´ë”ì— CSS/JS ì €ì¥
* **Bootstrap 5**: ë°˜ì‘í˜• UI í”„ë ˆì„ì›Œí¬ ì ìš©

---

## ğŸ§¾ ì£¼ìš” ì„¤ì • íŒŒì¼

### application.yml

* ì„œë²„ í¬íŠ¸: 8080
* ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´
* ê°œë°œ ì‹œ Thymeleaf ìºì‹œ ë¹„í™œì„±í™”
* íŒŒì¼ ì—…ë¡œë“œ ìµœëŒ€ ìš©ëŸ‰ 10MB
* MyBatis ë§¤í¼ ìœ„ì¹˜ ì§€ì •

### ê¸°íƒ€ ì„¤ì • ì‚¬í•­

* UTF-8 í•œê¸€ ì§€ì› í™œì„±í™”
* MyBatis ë° Spring Web ë¡œê·¸ ì¶œë ¥ ì„¤ì •
* DB íƒ€ì„ì¡´: Asia/Seoul

---

## ğŸ”„ ê°œë°œ íŒ¨í„´

### ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´

Spring MVC êµ¬ì¡°ë¥¼ ë”°ë¦„:

* `@Controller` ì‚¬ìš©
* Modelë¡œ View ë°ì´í„° ì „ë‹¬
* HTTP Method (@GetMapping, @PostMapping ë“±) ëª…í™•íˆ êµ¬ë¶„
* `@Slf4j`ë¡œ ë¡œê¹…

### ì„œë¹„ìŠ¤ ê³„ì¸µ

ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë¡œì§ ë¶„ë¦¬:

* íŠ¸ëœì­ì…˜ ì²˜ë¦¬
* ì…ë ¥ ê²€ì¦
* íš¡ë‹¨ ê´€ì‹¬ì‚¬ ê´€ë¦¬

### MyBatis ë§¤í¼

XML ê¸°ë°˜ SQL ì •ì˜:

* `#{}` ì‚¬ìš©í•œ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
* DTO ë§¤í•‘ ì„¤ì •
* JOIN í™œìš©í•œ ë³µí•© ì¡°íšŒ ì²˜ë¦¬

---

## âœ… í…ŒìŠ¤íŠ¸

### í…ŒìŠ¤íŠ¸ êµ¬ì¡°

* ë‹¨ìœ„ í…ŒìŠ¤íŠ¸: JUnit 5
* í†µí•© í…ŒìŠ¤íŠ¸: Spring Boot Test
* í…ŒìŠ¤íŠ¸ ì„¤ì •ì€ ìš´ì˜ê³¼ ë³„ë„ êµ¬ì„±

### í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test

# íŠ¹ì • í´ë˜ìŠ¤ë§Œ ì‹¤í–‰
./gradlew test --tests "ClassName"
```

---

## ğŸ¤ íŒ€ í˜‘ì—… ê·œì¹™

### Git ì›Œí¬í”Œë¡œìš°

* ê¸°ëŠ¥ ë¸Œëœì¹˜ ëª…: `feature/member-ê¸°ëŠ¥ëª…`
* ì»¤ë°‹ ë©”ì‹œì§€: `[feat] ê¸°ëŠ¥ ì„¤ëª…`
* PRì„ í†µí•œ ì½”ë“œ ë¦¬ë·° ì§„í–‰

### ì½”ë“œ ì»¨ë²¤ì…˜

* í´ë˜ìŠ¤ëª…: PascalCase
* ë©”ì„œë“œëª…: camelCase
* ìƒìˆ˜ëª…: UPPER\_SNAKE\_CASE
* íŒ¨í‚¤ì§€ëª…: ëª¨ë‘ ì†Œë¬¸ì

---

## âš ï¸ íŠ¹ì´ ì‚¬í•­

### í•œê¸€ ì§€ì›

* ëª¨ë“  í…ìŠ¤íŠ¸ ì½˜í…ì¸ ëŠ” í•œê¸€ë¡œ ì‘ì„±
* UTF-8 ì¸ì½”ë”© ìœ ì§€
* ì£¼ì„/ë¬¸ì„œë„ í•œê¸€ ê¸°ë°˜

### ì§€ë„ ì—°ë™

* ì¹´ì¹´ì˜¤ë§µ API ì—°ë™ ì˜ˆì •
* ìœ„ë„/ê²½ë„ ê¸°ë°˜ ì‹œì„¤ ê²€ìƒ‰ ê¸°ëŠ¥ í¬í•¨

### ì‚¬ìš©ì ì—­í• 

* `USER`: ì¼ë°˜ êµ¬ì§ì
* `FACILITY`: ìš”ì–‘ì‹œì„¤ ê´€ë¦¬ì
* `ADMIN`: ì‹œìŠ¤í…œ ê´€ë¦¬ì

---

## ğŸŒ í™˜ê²½ ë³€ìˆ˜

í™˜ê²½ ì„¤ì • ì‹œ ì•„ë˜ í•­ëª© í•„ìš”:

* `spring.datasource.password`: MySQL ë¹„ë°€ë²ˆí˜¸
* DB ì£¼ì†Œê°€ ë‹¤ë¥¼ ê²½ìš° `spring.datasource.url` ìˆ˜ì •
* ì¶”í›„ ì§€ë„ API í‚¤ ë“±ë¡ í•„ìš” (ì˜ˆì •)

### ğŸŸ¢ íŒ€ì› D (ë¦¬ë·°/ê²Œì‹œíŒ) - ì§„í–‰ë¥ : 100%

#### âœ… **ì™„ë£Œëœ ì‘ì—…**
**ë°±ì—”ë“œ ì™„ì „ êµ¬í˜„**:
- âœ… `ReviewService.java` (238ì¤„) - **ì™„ì „ êµ¬í˜„**
  - ë¦¬ë·° CRUD ë¡œì§
  - íŠ¸ëœì­ì…˜ ì²˜ë¦¬
  - ë¡œê¹… ì¶”ê°€
  - ìœ íš¨ì„± ê²€ì¦
  - í‰ì  ì‹œìŠ¤í…œ
  - ì¶”ì²œ/ë¹„ì¶”ì²œ ê¸°ëŠ¥

- âœ… `BoardService.java` (253ì¤„) - **ì™„ì „ êµ¬í˜„**
  - ê²Œì‹œê¸€ CRUD ë¡œì§
  - í˜ì´ì§• ì²˜ë¦¬
  - ê²€ìƒ‰ ë° ì¹´í…Œê³ ë¦¬ í•„í„°ë§
  - ì¸ê¸° ê²Œì‹œê¸€ ê¸°ëŠ¥
  - ì¡°íšŒìˆ˜ ì¦ê°€ ë¡œì§

- âœ… `ReviewMapper.java` & `reviewMapper.xml` - **ì™„ì „ êµ¬í˜„**
  - ëª¨ë“  í•„ìš” ë©”ì„œë“œ ì •ì˜
  - XML ì¿¼ë¦¬ ë§¤í•‘ ì™„ë£Œ

- âœ… `BoardMapper.java` & `boardMapper.xml` - **ì™„ì „ êµ¬í˜„**
  - ëª¨ë“  í•„ìš” ë©”ì„œë“œ ì •ì˜
  - XML ì¿¼ë¦¬ ë§¤í•‘ ì™„ë£Œ

**í”„ë¡ íŠ¸ì—”ë“œ ì™„ì„±**:
- âœ… `templates/review/list.html` (108ì¤„) - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/review/write.html` (122ì¤„) - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/list.html` - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/write.html` - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/detail.html` - **ì™„ì „ êµ¬í˜„**

#### ğŸ“Š **ì‹¤ì œ Story Point ë‹¬ì„±ë¥ **
- **ì™„ë£Œ**: LC-010 (ë¦¬ë·° ì‘ì„±) - 13/13 SP âœ…
- **ì™„ë£Œ**: LC-011 (ë¦¬ë·° ëª©ë¡ ê´€ë¦¬) - 13/13 SP âœ…
- **ì™„ë£Œ**: LC-012 (ì •ë³´ ê²Œì‹œíŒ) - 13/13 SP âœ…

**ì´ ë‹¬ì„±**: 39/39 SP (100%)

#### ğŸš€ **ë‹¤ìŒ ë‹¨ê³„**
1. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±**
   - ReviewService í…ŒìŠ¤íŠ¸
   - BoardService í…ŒìŠ¤íŠ¸
   - í†µí•© í…ŒìŠ¤íŠ¸

2. **ì„±ëŠ¥ ìµœì í™”**
   - ì¿¼ë¦¬ ìµœì í™”
   - ìºì‹± ì ìš©
   - N+1 ë¬¸ì œ í•´ê²°

3. **ì¶”ê°€ ê¸°ëŠ¥ ê°œë°œ**
   - ëŒ“ê¸€ ì‹œìŠ¤í…œ ê³ ë„í™”
   - íŒŒì¼ ì²¨ë¶€ ê¸°ëŠ¥
   - ì—ë””í„° ê¸°ëŠ¥ ê°•í™”
````

## File: README.md
````markdown
# LightCare (ë¼ì´íŠ¸ì¼€ì–´) - ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ í”Œë«í¼

![Spring Boot](https://img.shields.io/badge/Spring%20Boot-2.7.18-brightgreen.svg)
![Java](https://img.shields.io/badge/Java-11-orange.svg)
![MySQL](https://img.shields.io/badge/MySQL-8.0-blue.svg)
![MyBatis](https://img.shields.io/badge/MyBatis-2.3.1-red.svg)
![Build Status](https://img.shields.io/badge/Build-Passing-success.svg)

## ğŸ“– í”„ë¡œì íŠ¸ ê°œìš”

LightCareëŠ” í•œêµ­ì˜ ìš”ì–‘ì› ë° ë…¸ì¸ìš”ì–‘ì‹œì„¤ê³¼ êµ¬ì§ìë¥¼ ì—°ê²°í•˜ëŠ” ì „ë¬¸ êµ¬ì¸êµ¬ì§ í”Œë«í¼ì…ë‹ˆë‹¤. ê³ ë ¹í™” ì‚¬íšŒì— í•„ìš”í•œ ìš”ì–‘ ì„œë¹„ìŠ¤ ì¸ë ¥ì„ íš¨ìœ¨ì ìœ¼ë¡œ ë§¤ì¹­í•˜ê³ , ì‹œì„¤ê³¼ ê·¼ë¡œì ëª¨ë‘ì—ê²Œ ìµœì í™”ëœ í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤.

### ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

- **ğŸ‘¥ íšŒì› ê´€ë¦¬**: êµ¬ì§ì ë° ì‹œì„¤ ê´€ë¦¬ì íšŒì›ê°€ì…/ë¡œê·¸ì¸
- **ğŸ¥ ì‹œì„¤ ê²€ìƒ‰**: ì¹´ì¹´ì˜¤ë§µ ì—°ë™ ì‹œì„¤ ìœ„ì¹˜ ê²€ìƒ‰ ë° ìƒì„¸ ì •ë³´
- **ğŸ’¼ êµ¬ì¸êµ¬ì§**: ì±„ìš©ê³µê³  ë“±ë¡/ê²€ìƒ‰, ì§€ì› ì‹œìŠ¤í…œ
- **â­ ë¦¬ë·° ì‹œìŠ¤í…œ**: ì‹œì„¤ í‰ê°€ ë° í›„ê¸° ê³µìœ 
- **ğŸ“‹ ì •ë³´ ê²Œì‹œíŒ**: ì—…ê³„ ì •ë³´ ë° ê³µì§€ì‚¬í•­

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Framework**: Spring Boot 2.7.18
- **Language**: Java 11
- **Database**: MySQL 8.0
- **ORM**: MyBatis 2.3.1
- **Build Tool**: Gradle
- **Template Engine**: Thymeleaf

### Frontend
- **Template**: Thymeleaf
- **Styling**: Bootstrap 5, CSS3
- **JavaScript**: Vanilla JS
- **Maps**: Kakao Maps API

### Development Tools
- **IDE**: IntelliJ IDEA
- **Version Control**: Git/GitHub
- **Database Tool**: MySQL Workbench

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Java 11 ì´ìƒ
- MySQL 8.0 ì´ìƒ
- Git

### ì„¤ì¹˜ ë° ì‹¤í–‰

1. **ë ˆí¬ì§€í† ë¦¬ í´ë¡ **
   ```bash
   git clone https://github.com/dooseob/lightcare.git
   cd lightcare
   ```

2. **ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •**
   ```sql
   CREATE DATABASE carelink CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```

3. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •** (`src/main/resources/application.yml`)
   ```yaml
   spring:
     datasource:
       url: jdbc:mysql://localhost:3306/carelink
       username: root
       password: mysql
   ```

4. **ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™”**
   ```bash
   # MySQLì—ì„œ schema.sql ì‹¤í–‰
   mysql -u root -p carelink < src/main/resources/schema.sql
   ```

5. **ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰**
   ```bash
   ./gradlew bootRun
   ```

6. **ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†**
   ```
   http://localhost:8080
   ```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/com/example/carelink/
â”‚   â”‚   â”œâ”€â”€ controller/          # ì›¹ ìš”ì²­ ì²˜ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ HomeController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ FacilityController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ JobController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewController.java
â”‚   â”‚   â”‚   â””â”€â”€ BoardController.java
â”‚   â”‚   â”œâ”€â”€ service/             # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ FacilityService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ JobService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewService.java
â”‚   â”‚   â”‚   â””â”€â”€ BoardService.java
â”‚   â”‚   â”œâ”€â”€ dao/                 # ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberMapper.java
â”‚   â”‚   â”‚   â”œâ”€â”€ FacilityMapper.java
â”‚   â”‚   â”‚   â”œâ”€â”€ JobMapper.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewMapper.java
â”‚   â”‚   â”‚   â””â”€â”€ BoardMapper.java
â”‚   â”‚   â”œâ”€â”€ dto/                 # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberDTO.java
â”‚   â”‚   â”‚   â”œâ”€â”€ FacilityDTO.java
â”‚   â”‚   â”‚   â”œâ”€â”€ JobDTO.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewDTO.java
â”‚   â”‚   â”‚   â””â”€â”€ BoardDTO.java
â”‚   â”‚   â””â”€â”€ common/              # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚       â”œâ”€â”€ BaseDTO.java
â”‚   â”‚       â”œâ”€â”€ PageInfo.java
â”‚   â”‚       â””â”€â”€ Constants.java
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ static/              # ì •ì  ë¦¬ì†ŒìŠ¤
â”‚       â”‚   â”œâ”€â”€ css/
â”‚       â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ templates/           # Thymeleaf í…œí”Œë¦¿
â”‚       â”‚   â”œâ”€â”€ layout/
â”‚       â”‚   â”œâ”€â”€ member/
â”‚       â”‚   â”œâ”€â”€ facility/
â”‚       â”‚   â”œâ”€â”€ job/
â”‚       â”‚   â”œâ”€â”€ review/
â”‚       â”‚   â””â”€â”€ board/
â”‚       â”œâ”€â”€ mapper/              # MyBatis SQL ë§¤í¼
â”‚       â”‚   â”œâ”€â”€ memberMapper.xml
â”‚       â”‚   â”œâ”€â”€ facilityMapper.xml
â”‚       â”‚   â”œâ”€â”€ jobMapper.xml
â”‚       â”‚   â”œâ”€â”€ reviewMapper.xml
â”‚       â”‚   â””â”€â”€ boardMapper.xml
â”‚       â”œâ”€â”€ application.yml      # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
â”‚       â”œâ”€â”€ mybatis-config.xml   # MyBatis ì„¤ì •
â”‚       â””â”€â”€ schema.sql          # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
```

## ğŸ‘¥ íŒ€ êµ¬ì„± ë° ì—­í• 

| íŒ€ì› | ë‹´ë‹¹ ê¸°ëŠ¥ | ì£¼ìš” êµ¬í˜„ ì‚¬í•­ |
|------|----------|---------------|
| **íŒ€ì› A** | íšŒì› ê´€ë¦¬ | ë¡œê·¸ì¸, íšŒì›ê°€ì…, í”„ë¡œí•„ ê´€ë¦¬, ì„¸ì…˜ ê´€ë¦¬ |
| **íŒ€ì› B** | ì‹œì„¤ ê²€ìƒ‰ | ì¹´ì¹´ì˜¤ë§µ ì—°ë™, ì‹œì„¤ ì •ë³´ ê´€ë¦¬, ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ |
| **íŒ€ì› C** | êµ¬ì¸êµ¬ì§ | ì±„ìš©ê³µê³  ê²Œì‹œíŒ, ì§€ì› ì‹œìŠ¤í…œ, ì±„ìš© ê´€ë¦¬ |
| **íŒ€ì› D** | ë¦¬ë·° & ê²Œì‹œíŒ | ì‹œì„¤ ë¦¬ë·°, í‰ì  ì‹œìŠ¤í…œ, ì •ë³´ ê²Œì‹œíŒ |

## ğŸ—„ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ì£¼ìš” í…Œì´ë¸”

- **member**: íšŒì› ì •ë³´ (êµ¬ì§ì, ì‹œì„¤ ê´€ë¦¬ì)
- **facility**: ìš”ì–‘ì‹œì„¤ ì •ë³´ ë° ìœ„ì¹˜ ë°ì´í„°
- **job_posting**: ì±„ìš©ê³µê³  ì •ë³´
- **review**: ì‹œì„¤ ë¦¬ë·° ë° í‰ì 
- **board**: ì •ë³´ ê²Œì‹œíŒ

### ERD
```sql
-- ì£¼ìš” í…Œì´ë¸” ê´€ê³„
-- member (1) â†â†’ (N) job_posting
-- member (1) â†â†’ (N) review
-- facility (1) â†â†’ (N) job_posting
-- facility (1) â†â†’ (N) review
```

## ğŸ”§ ê°œë°œ ê°€ì´ë“œ

### ì½”ë”© ì»¨ë²¤ì…˜

- **í´ë˜ìŠ¤ëª…**: PascalCase (`MemberController`)
- **ë©”ì„œë“œëª…**: camelCase (`getMemberInfo`)
- **ìƒìˆ˜**: UPPER_SNAKE_CASE (`DEFAULT_PAGE_SIZE`)
- **íŒ¨í‚¤ì§€ëª…**: ì†Œë¬¸ì (`com.example.carelink`)

### Git ë¸Œëœì¹˜ ì „ëµ

```
main                 # ë©”ì¸ ë¸Œëœì¹˜
â”œâ”€â”€ feature/member   # íŒ€ì› A - íšŒì› ê´€ë¦¬
â”œâ”€â”€ feature/facility # íŒ€ì› B - ì‹œì„¤ ê²€ìƒ‰
â”œâ”€â”€ feature/job      # íŒ€ì› C - êµ¬ì¸êµ¬ì§
â””â”€â”€ feature/review   # íŒ€ì› D - ë¦¬ë·° ì‹œìŠ¤í…œ
```

### ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹

```
[feat] ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
[fix] ë²„ê·¸ ìˆ˜ì •
[docs] ë¬¸ì„œ ìˆ˜ì •
[style] ì½”ë“œ ìŠ¤íƒ€ì¼ ìˆ˜ì •
[refactor] ì½”ë“œ ë¦¬íŒ©í† ë§
[test] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test

# ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸
./gradlew build

# ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
./gradlew check
```

## ğŸ“ API ë¬¸ì„œ

### ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸

| Method | URL | ì„¤ëª… |
|--------|-----|------|
| GET | `/` | ë©”ì¸ í˜ì´ì§€ |
| GET/POST | `/member/login` | ë¡œê·¸ì¸ |
| GET/POST | `/member/join` | íšŒì›ê°€ì… |
| GET | `/facility/search` | ì‹œì„¤ ê²€ìƒ‰ |
| GET | `/job/list` | ì±„ìš©ê³µê³  ëª©ë¡ |
| GET | `/review/list` | ë¦¬ë·° ëª©ë¡ |
| GET | `/board/list` | ê²Œì‹œíŒ ëª©ë¡ |

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ

1. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜**
   ```
   í•´ê²°: application.ymlì˜ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • í™•ì¸
   ```

2. **MyBatis ë§¤í¼ ì˜¤ë¥˜**
   ```
   í•´ê²°: mapper XMLì˜ namespaceì™€ ì¸í„°í˜ì´ìŠ¤ ê²½ë¡œ ì¼ì¹˜ í™•ì¸
   ```

3. **Thymeleaf í…œí”Œë¦¿ ì˜¤ë¥˜**
   ```
   í•´ê²°: templates í´ë” ê²½ë¡œì™€ ì»¨íŠ¸ë¡¤ëŸ¬ ë°˜í™˜ê°’ ì¼ì¹˜ í™•ì¸
   ```

## ğŸ”„ ìµœê·¼ ì—…ë°ì´íŠ¸

### v1.0.0 (2025-06-22)
- âœ… í”„ë¡œì íŠ¸ ê¸°ë³¸ êµ¬ì¡° ì™„ì„±
- âœ… ì „ì²´ íŒŒì¼ ì—ëŸ¬ ë””ë²„ê¹… ì™„ë£Œ
- âœ… í˜ì´ì§• ë¡œì§ ì˜¤ë¥˜ ìˆ˜ì •
- âœ… Gradle ë¹Œë“œ ì„¤ì • ê°œì„ 
- âœ… ì½”ë“œ í’ˆì§ˆ ê°œì„  (NPE ë°©ì§€, ì¤‘ë³µ ì½”ë“œ ì œê±°)

## ğŸš€ í–¥í›„ ê°œë°œ ê³„íš

- [ ] **v1.1**: ë³´ì•ˆ ê°•í™” (ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”, CSRF ë³´í˜¸)
- [ ] **v1.2**: ì¹´ì¹´ì˜¤ë§µ API ì—°ë™ ì™„ì„±
- [ ] **v1.3**: ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ
- [ ] **v1.4**: ëª¨ë°”ì¼ ë°˜ì‘í˜• UI ê°œì„ 
- [ ] **v2.0**: AI ê¸°ë°˜ ë§¤ì¹­ ì‹œìŠ¤í…œ

## ğŸ¤ ê¸°ì—¬ ë°©ë²•

1. Fork í”„ë¡œì íŠ¸
2. Feature ë¸Œëœì¹˜ ìƒì„± (`git checkout -b feature/ìƒˆê¸°ëŠ¥`)
3. ë³€ê²½ì‚¬í•­ ì»¤ë°‹ (`git commit -m '[feat] ìƒˆê¸°ëŠ¥ ì¶”ê°€'`)
4. ë¸Œëœì¹˜ì— Push (`git push origin feature/ìƒˆê¸°ëŠ¥`)
5. Pull Request ìƒì„±

## ğŸ“ ì§€ì›

- **íŒ€ ì´ë©”ì¼**: lightcare-team@gmail.com
- **ì´ìŠˆ íŠ¸ë˜í‚¹**: [GitHub Issues](https://github.com/dooseob/lightcare/issues)
- **ìœ„í‚¤**: [í”„ë¡œì íŠ¸ ìœ„í‚¤](https://github.com/dooseob/lightcare/wiki)

## ğŸ“„ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„¼ìŠ¤ í•˜ì— ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

---

**LightCare íŒ€** - ìš”ì–‘ ì„œë¹„ìŠ¤ì˜ ë¯¸ë˜ë¥¼ ë°íˆëŠ” í”Œë«í¼ ğŸ’¡

### ğŸŸ¢ íŒ€ì› D (ë¦¬ë·°/ê²Œì‹œíŒ) - ì§„í–‰ë¥ : 100%

#### âœ… **ì™„ë£Œëœ ì‘ì—…**
**ë°±ì—”ë“œ ì™„ì „ êµ¬í˜„**:
- âœ… `ReviewService.java` (238ì¤„) - **ì™„ì „ êµ¬í˜„**
  - ë¦¬ë·° CRUD ë¡œì§
  - íŠ¸ëœì­ì…˜ ì²˜ë¦¬
  - ë¡œê¹… ì¶”ê°€
  - ìœ íš¨ì„± ê²€ì¦
  - í‰ì  ì‹œìŠ¤í…œ
  - ì¶”ì²œ/ë¹„ì¶”ì²œ ê¸°ëŠ¥

- âœ… `BoardService.java` (253ì¤„) - **ì™„ì „ êµ¬í˜„**
  - ê²Œì‹œê¸€ CRUD ë¡œì§
  - í˜ì´ì§• ì²˜ë¦¬
  - ê²€ìƒ‰ ë° ì¹´í…Œê³ ë¦¬ í•„í„°ë§
  - ì¸ê¸° ê²Œì‹œê¸€ ê¸°ëŠ¥
  - ì¡°íšŒìˆ˜ ì¦ê°€ ë¡œì§

- âœ… `ReviewMapper.java` & `reviewMapper.xml` - **ì™„ì „ êµ¬í˜„**
  - ëª¨ë“  í•„ìš” ë©”ì„œë“œ ì •ì˜
  - XML ì¿¼ë¦¬ ë§¤í•‘ ì™„ë£Œ

- âœ… `BoardMapper.java` & `boardMapper.xml` - **ì™„ì „ êµ¬í˜„**
  - ëª¨ë“  í•„ìš” ë©”ì„œë“œ ì •ì˜
  - XML ì¿¼ë¦¬ ë§¤í•‘ ì™„ë£Œ

**í”„ë¡ íŠ¸ì—”ë“œ ì™„ì„±**:
- âœ… `templates/review/list.html` (108ì¤„) - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/review/write.html` (122ì¤„) - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/list.html` - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/write.html` - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/detail.html` - **ì™„ì „ êµ¬í˜„**

#### ğŸ“Š **ì‹¤ì œ Story Point ë‹¬ì„±ë¥ **
- **ì™„ë£Œ**: LC-010 (ë¦¬ë·° ì‘ì„±) - 13/13 SP âœ…
- **ì™„ë£Œ**: LC-011 (ë¦¬ë·° ëª©ë¡ ê´€ë¦¬) - 13/13 SP âœ…
- **ì™„ë£Œ**: LC-012 (ì •ë³´ ê²Œì‹œíŒ) - 13/13 SP âœ…

**ì´ ë‹¬ì„±**: 39/39 SP (100%)

#### ğŸš€ **ë‹¤ìŒ ë‹¨ê³„**
1. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±**
   - ReviewService í…ŒìŠ¤íŠ¸
   - BoardService í…ŒìŠ¤íŠ¸
   - í†µí•© í…ŒìŠ¤íŠ¸

2. **ì„±ëŠ¥ ìµœì í™”**
   - ì¿¼ë¦¬ ìµœì í™”
   - ìºì‹± ì ìš©
   - N+1 ë¬¸ì œ í•´ê²°

3. **ì¶”ê°€ ê¸°ëŠ¥ ê°œë°œ**
   - ëŒ“ê¸€ ì‹œìŠ¤í…œ ê³ ë„í™”
   - íŒŒì¼ ì²¨ë¶€ ê¸°ëŠ¥
   - ì—ë””í„° ê¸°ëŠ¥ ê°•í™”
````

## File: src/main/java/com/example/carelink/config/SecurityConfig.java
````java
package com.example.carelink.config;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.web.SecurityFilterChain;
import org.springframework.security.web.firewall.HttpFirewall;
import org.springframework.security.web.firewall.StrictHttpFirewall;
import org.springframework.security.web.util.matcher.AntPathRequestMatcher;
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
    @Bean
    public HttpFirewall httpFirewall() {
        StrictHttpFirewall firewall = new StrictHttpFirewall();
        firewall.setAllowUrlEncodedDoubleSlash(true);
        return firewall;
    }
    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        http
                .csrf(csrf -> csrf.disable())
                .authorizeHttpRequests(authorize -> authorize
                        .requestMatchers(
                                new AntPathRequestMatcher("/css/**"),
                                new AntPathRequestMatcher("/js/**"),
                                new AntPathRequestMatcher("/images/**"),
                                new AntPathRequestMatcher("/favicon.ico")
                        ).permitAll()
                        .requestMatchers(
                                new AntPathRequestMatcher("/"),
                                new AntPathRequestMatcher("/member/login"),
                                new AntPathRequestMatcher("/member/join"),
                                new AntPathRequestMatcher("/member/checkUserId"),
                                new AntPathRequestMatcher("/facility/**"),
                                new AntPathRequestMatcher("/board/**"),
                                new AntPathRequestMatcher("/review/**"),
                                new AntPathRequestMatcher("/job/**"),
                                new AntPathRequestMatcher("/api/**"),
                                new AntPathRequestMatcher("/error")
                        ).permitAll()
                        .anyRequest().permitAll()
                )
                .formLogin(formLogin -> formLogin.disable())
                .logout(logout -> logout
                        .logoutRequestMatcher(new AntPathRequestMatcher("/member/logout"))
                        .logoutSuccessUrl("/")
                        .invalidateHttpSession(true)
                        .deleteCookies("JSESSIONID")
                        .permitAll()
                );
        return http.build();
    }
}
````

## File: src/main/java/com/example/carelink/config/WebConfig.java
````java
package com.example.carelink.config;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;
@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Value("${file.upload-dir.facility}")
    private String facilityUploadDir;
    @Value("${file.upload-dir.profile}")
    private String profileUploadDir;
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/uploads/facility/**")
                .addResourceLocations("file:" + facilityUploadDir);
        registry.addResourceHandler("/uploads/profile/**")
                .addResourceLocations("file:" + profileUploadDir);
        String projectRoot = System.getProperty("user.dir");
        registry.addResourceHandler("/test-images/facilities/**")
                .addResourceLocations("file:" + projectRoot + "/images/facilities/");
        registry.addResourceHandler("/test-images/profiles/**")
                .addResourceLocations("file:" + projectRoot + "/images/profiles/");
    }
}
````

## File: src/main/java/com/example/carelink/controller/FacilityImageApiController.java
````java
package com.example.carelink.controller;
import com.example.carelink.dto.FacilityImageDTO;
import com.example.carelink.dto.FacilityDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.service.FacilityImageService;
import com.example.carelink.service.FacilityService;
import com.example.carelink.common.Constants;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile;
import javax.servlet.http.HttpSession;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
@RestController
@RequestMapping("/facility/facility-images")
@RequiredArgsConstructor
@Slf4j
public class FacilityImageApiController {
    private final FacilityImageService facilityImageService;
    private final FacilityService facilityService;
    @PostMapping("/reorder/{facilityId}")
    public ResponseEntity<Map<String, Object>> reorderImages(
            @PathVariable Long facilityId,
            @RequestBody List<Long> imageIds) {
        Map<String, Object> response = new HashMap<>();
        try {
            log.info("ğŸ”„ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ API ìš”ì²­ - facilityId: {}, imageIds: {}", facilityId, imageIds);
            boolean success = facilityImageService.updateImageOrdersBatch(facilityId, imageIds);
            if (success) {
                response.put("success", true);
                response.put("message", "ì´ë¯¸ì§€ ìˆœì„œê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
                List<FacilityImageDTO> updatedImages = facilityImageService.getImagesByFacilityId(facilityId);
                response.put("images", updatedImages);
                log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ API ì„±ê³µ - facilityId: {}", facilityId);
                return ResponseEntity.ok(response);
            } else {
                response.put("success", false);
                response.put("message", "ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                log.warn("âš ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ API ì‹¤íŒ¨ - facilityId: {}", facilityId);
                return ResponseEntity.badRequest().body(response);
            }
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ API ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }
    @PostMapping("/auto-reorder/{facilityId}")
    public ResponseEntity<Map<String, Object>> autoReorderImages(@PathVariable Long facilityId) {
        Map<String, Object> response = new HashMap<>();
        try {
            log.info("ğŸ”„ ì‹œì„¤ ì´ë¯¸ì§€ ìë™ ìˆœì„œ ì¬ì •ë ¬ API ìš”ì²­ - facilityId: {}", facilityId);
            boolean success = facilityImageService.reorderAllFacilityImages(facilityId);
            if (success) {
                response.put("success", true);
                response.put("message", "ì´ë¯¸ì§€ ìˆœì„œê°€ ìë™ìœ¼ë¡œ ì¬ì •ë ¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
                List<FacilityImageDTO> reorderedImages = facilityImageService.getImagesByFacilityId(facilityId);
                response.put("images", reorderedImages);
                response.put("imageCount", reorderedImages.size());
                log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ìë™ ìˆœì„œ ì¬ì •ë ¬ API ì„±ê³µ - facilityId: {}, ì´ {}ì¥", facilityId, reorderedImages.size());
                return ResponseEntity.ok(response);
            } else {
                response.put("success", false);
                response.put("message", "ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                log.warn("âš ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ìë™ ìˆœì„œ ì¬ì •ë ¬ API ì‹¤íŒ¨ - facilityId: {}", facilityId);
                return ResponseEntity.badRequest().body(response);
            }
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ìë™ ìˆœì„œ ì¬ì •ë ¬ API ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }
    @GetMapping("/{facilityId}")
    public ResponseEntity<Map<String, Object>> getFacilityImages(@PathVariable Long facilityId, HttpSession session) {
        Map<String, Object> response = new HashMap<>();
        try {
            log.info("ğŸ“‹ ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ API ìš”ì²­ - facilityId: {}", facilityId);
            MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (member == null) {
                response.put("success", false);
                response.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return ResponseEntity.status(401).body(response);
            }
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                response.put("success", false);
                response.put("message", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
            if (!facility.getRegisteredMemberId().equals(member.getMemberId())
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                response.put("success", false);
                response.put("message", "í•´ë‹¹ ì‹œì„¤ ì´ë¯¸ì§€ë¥¼ ì¡°íšŒí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return ResponseEntity.status(403).body(response);
            }
            List<FacilityImageDTO> images = facilityImageService.getImagesByFacilityId(facilityId);
            FacilityImageDTO mainImage = facilityImageService.getMainImageByFacilityId(facilityId);
            response.put("success", true);
            response.put("images", images);
            response.put("mainImage", mainImage);
            response.put("imageCount", images.size());
            response.put("maxImages", 5);
            log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ API ì„±ê³µ - facilityId: {}, ì´ {}ì¥, memberId: {}", facilityId, images.size(), member.getMemberId());
            return ResponseEntity.ok(response);
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ API ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }
    @PutMapping("/{imageId}/order")
    public ResponseEntity<Map<String, Object>> updateImageOrder(
            @PathVariable Long imageId,
            @RequestParam Integer order) {
        Map<String, Object> response = new HashMap<>();
        try {
            log.info("ğŸ”¢ ê°œë³„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ API ìš”ì²­ - imageId: {}, order: {}", imageId, order);
            boolean success = facilityImageService.updateImageOrder(imageId, order);
            if (success) {
                response.put("success", true);
                response.put("message", "ì´ë¯¸ì§€ ìˆœì„œê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
                log.info("âœ… ê°œë³„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ API ì„±ê³µ - imageId: {}, order: {}", imageId, order);
                return ResponseEntity.ok(response);
            } else {
                response.put("success", false);
                response.put("message", "ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                log.warn("âš ï¸ ê°œë³„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ API ì‹¤íŒ¨ - imageId: {}, order: {}", imageId, order);
                return ResponseEntity.badRequest().body(response);
            }
        } catch (Exception e) {
            log.error("âŒ ê°œë³„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ API ì˜¤ë¥˜ - imageId: {}, order: {}", imageId, order, e);
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }
    @DeleteMapping("/{imageId}")
    public ResponseEntity<Map<String, Object>> deleteImage(@PathVariable Long imageId) {
        Map<String, Object> response = new HashMap<>();
        try {
            log.info("ğŸ—‘ï¸ ì´ë¯¸ì§€ ì‚­ì œ API ìš”ì²­ - imageId: {}", imageId);
            boolean success = facilityImageService.deleteFacilityImage(imageId);
            if (success) {
                response.put("success", true);
                response.put("message", "ì´ë¯¸ì§€ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
                log.info("âœ… ì´ë¯¸ì§€ ì‚­ì œ API ì„±ê³µ - imageId: {}", imageId);
                return ResponseEntity.ok(response);
            } else {
                response.put("success", false);
                response.put("message", "ì´ë¯¸ì§€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
        } catch (Exception e) {
            log.error("âŒ ì´ë¯¸ì§€ ì‚­ì œ API ì˜¤ë¥˜ - imageId: {}", imageId, e);
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }
    @PostMapping("/{imageId}/set-main")
    public ResponseEntity<Map<String, Object>> setMainImage(@PathVariable Long imageId) {
        Map<String, Object> response = new HashMap<>();
        try {
            log.info("â­ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • API ìš”ì²­ - imageId: {}", imageId);
            FacilityImageDTO imageInfo = facilityImageService.getImageById(imageId);
            if (imageInfo == null) {
                response.put("success", false);
                response.put("message", "ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
            boolean success = facilityImageService.setMainImage(imageInfo.getFacilityId(), imageId);
            if (success) {
                response.put("success", true);
                response.put("message", "ë©”ì¸ ì´ë¯¸ì§€ê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
                log.info("âœ… ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • API ì„±ê³µ - imageId: {}", imageId);
                return ResponseEntity.ok(response);
            } else {
                response.put("success", false);
                response.put("message", "ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
        } catch (Exception e) {
            log.error("âŒ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • API ì˜¤ë¥˜ - imageId: {}", imageId, e);
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }
    @PostMapping("/upload")
    public ResponseEntity<Map<String, Object>> uploadImages(
            @RequestParam("facilityId") Long facilityId,
            @RequestParam("images") List<MultipartFile> images,
            HttpSession session) {
        Map<String, Object> response = new HashMap<>();
        try {
            log.info("ğŸ“¤ ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ API ìš”ì²­ - facilityId: {}, ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, images.size());
            MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (member == null) {
                response.put("success", false);
                response.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return ResponseEntity.status(401).body(response);
            }
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                response.put("success", false);
                response.put("message", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
            if (!facility.getRegisteredMemberId().equals(member.getMemberId())
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                response.put("success", false);
                response.put("message", "í•´ë‹¹ ì‹œì„¤ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return ResponseEntity.status(403).body(response);
            }
            if (images == null || images.isEmpty()) {
                response.put("success", false);
                response.put("message", "ì—…ë¡œë“œí•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
            final long MAX_FILE_SIZE = 10 * 1024 * 1024;
            final int MAX_FILES = 5;
            if (images.size() > MAX_FILES) {
                response.put("success", false);
                response.put("message", "ìµœëŒ€ " + MAX_FILES + "ì¥ê¹Œì§€ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
            for (MultipartFile image : images) {
                if (image.getSize() > MAX_FILE_SIZE) {
                    response.put("success", false);
                    response.put("message", "íŒŒì¼ í¬ê¸°ê°€ 10MBë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + image.getOriginalFilename());
                    return ResponseEntity.badRequest().body(response);
                }
                String contentType = image.getContentType();
                if (contentType == null || !contentType.startsWith("image/")) {
                    response.put("success", false);
                    response.put("message", "ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: " + image.getOriginalFilename());
                    return ResponseEntity.badRequest().body(response);
                }
            }
            List<FacilityImageDTO> uploadedImages = facilityImageService.uploadMultipleImages(facilityId, images);
            response.put("success", true);
            response.put("message", images.size() + "ê°œì˜ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.");
            response.put("uploadedImages", uploadedImages);
            response.put("uploadCount", uploadedImages.size());
            log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ API ì„±ê³µ - facilityId: {}, ì—…ë¡œë“œ ìˆ˜: {}, memberId: {}",
                    facilityId, uploadedImages.size(), member.getMemberId());
            return ResponseEntity.ok(response);
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ API ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }
}
````

## File: src/main/java/com/example/carelink/dao/FacilityImageMapper.java
````java
package com.example.carelink.dao;
import com.example.carelink.dto.FacilityImageDTO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;
import java.util.List;
@Mapper
public interface FacilityImageMapper {
    List<FacilityImageDTO> getImagesByFacilityId(@Param("facilityId") Long facilityId);
    FacilityImageDTO getMainImageByFacilityId(@Param("facilityId") Long facilityId);
    int insertFacilityImage(FacilityImageDTO facilityImageDTO);
    int updateFacilityImage(FacilityImageDTO facilityImageDTO);
    int deleteFacilityImage(@Param("imageId") Long imageId);
    int deleteAllImagesByFacilityId(@Param("facilityId") Long facilityId);
    int countImagesByFacilityId(@Param("facilityId") Long facilityId);
    int updateMainImage(@Param("facilityId") Long facilityId, @Param("imageId") Long imageId);
    int clearMainImages(@Param("facilityId") Long facilityId);
    FacilityImageDTO getImageById(@Param("imageId") Long imageId);
    int updateImageOrder(@Param("imageId") Long imageId, @Param("imageOrder") Integer imageOrder);
}
````

## File: src/main/java/com/example/carelink/dao/ReviewMapper.java
````java
package com.example.carelink.dao;
import com.example.carelink.dto.ReviewDTO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;
import java.util.List;
@Mapper
public interface ReviewMapper {
    List<ReviewDTO> getReviewList(ReviewDTO searchDTO);
    List<ReviewDTO> findReviewsWithSearch(ReviewDTO searchDTO);
    int countReviewsWithSearch(ReviewDTO searchDTO);
    ReviewDTO getReviewById(@Param("reviewId") Long reviewId);
    ReviewDTO findReviewById(@Param("reviewId") Long reviewId);
    int insertReview(ReviewDTO reviewDTO);
    int updateReview(ReviewDTO reviewDTO);
    int deleteReview(@Param("reviewId") Long reviewId);
    int incrementViewCount(@Param("reviewId") Long reviewId);
    int incrementLikeCount(@Param("reviewId") Long reviewId);
    int incrementDislikeCount(@Param("reviewId") Long reviewId);
    List<ReviewDTO> getReviewsByFacilityId(@Param("facilityId") Long facilityId);
    List<ReviewDTO> findReviewsByFacilityId(@Param("facilityId") Long facilityId);
    List<ReviewDTO> findReviewsByMemberId(@Param("memberId") Long memberId);
    Double getAverageRating(@Param("facilityId") Long facilityId);
    List<ReviewDTO> getRecentReviews();
    int getReviewCount(ReviewDTO searchDTO);
    int getReviewCount();
    int deleteByMemberId(@Param("memberId") Long memberId);
    int deleteByFacilityMemberId(@Param("memberId") Long memberId);
}
````

## File: src/main/java/Crolling.java
````java
import java.io.*;
import java.util.*;
public class Crolling {
    public static void main(String[] args) {
        String rootDirectory = "D:\\cch\\project_2\\LightCare\\src\\main";
        String outputFilePath = "D:/LightCare.txt";
        try (BufferedWriter writer = new BufferedWriter(new FileWriter(outputFilePath))) {
            List<File> files = getAllFilesWithExtensions(rootDirectory, Arrays.asList(".java", ".jsp", ".xml", ".js", ".html", ".css"));
            for (File file : files) {
                System.out.println("íŒŒì¼ ì½ê¸°: " + file.getAbsolutePath());
                writeFileContentToFile(file, writer);
            }
            System.out.println("ëª¨ë“  íŒŒì¼ì„ í¬ë¡¤ë§í•˜ì—¬ " + outputFilePath + "ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    public static List<File> getAllFilesWithExtensions(String directoryPath, List<String> extensions) {
        List<File> matchedFiles = new ArrayList<>();
        File rootDirectory = new File(directoryPath);
        File[] files = rootDirectory.listFiles();
        if (files != null) {
            for (File file : files) {
                if (file.isDirectory()) {
                    matchedFiles.addAll(getAllFilesWithExtensions(file.getAbsolutePath(), extensions));
                } else {
                    for (String ext : extensions) {
                        if (file.getName().toLowerCase().endsWith(ext)) {
                            matchedFiles.add(file);
                            break;
                        }
                    }
                }
            }
        }
        return matchedFiles;
    }
    public static void writeFileContentToFile(File file, BufferedWriter writer) throws IOException {
        try (BufferedReader reader = new BufferedReader(new FileReader(file))) {
            writer.write("íŒŒì¼ëª…: " + file.getName() + "\n");
            writer.write("ê²½ë¡œ: " + file.getAbsolutePath() + "\n");
            writer.write("----------------------------------------------------\n");
            String line;
            while ((line = reader.readLine()) != null) {
                writer.write(line + "\n");
            }
            writer.write("\n\n");
        }
    }
}
````

## File: src/main/resources/mapper/facilityImageMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.FacilityImageMapper">
    <resultMap id="FacilityImageResultMap" type="com.example.carelink.dto.FacilityImageDTO">
        <id property="imageId" column="image_id"/>
        <result property="facilityId" column="facility_id"/>
        <result property="imagePath" column="image_path"/>
        <result property="imageAltText" column="image_alt_text"/>
        <result property="imageOrder" column="image_order"/>
        <result property="isMainImage" column="is_main_image"/>
        <result property="uploadDate" column="upload_date"/>
        <result property="updatedAt" column="updated_at"/>
    </resultMap>
    <select id="getImagesByFacilityId" resultMap="FacilityImageResultMap">
        SELECT
            image_id,
            facility_id,
            image_path,
            image_alt_text,
            image_order,
            is_main_image,
            upload_date,
            updated_at
        FROM facility_images
        WHERE facility_id = #{facilityId}
        ORDER BY image_order ASC, upload_date ASC
    </select>
    <select id="getMainImageByFacilityId" resultMap="FacilityImageResultMap">
        SELECT
            image_id,
            facility_id,
            image_path,
            image_alt_text,
            image_order,
            is_main_image,
            upload_date,
            updated_at
        FROM facility_images
        WHERE facility_id = #{facilityId}
        AND is_main_image = TRUE
        LIMIT 1
    </select>
    <insert id="insertFacilityImage" useGeneratedKeys="true" keyProperty="imageId">
        INSERT INTO facility_images (
            facility_id,
            image_path,
            image_alt_text,
            image_order,
            is_main_image,
            upload_date
        ) VALUES (
            #{facilityId},
            #{imagePath},
            #{imageAltText},
            #{imageOrder},
            #{isMainImage},
            NOW()
        )
    </insert>
    <update id="updateFacilityImage">
        UPDATE facility_images
        SET
            image_path = #{imagePath},
            image_alt_text = #{imageAltText},
            image_order = #{imageOrder},
            is_main_image = #{isMainImage},
            updated_at = NOW()
        WHERE image_id = #{imageId}
    </update>
    <delete id="deleteFacilityImage">
        DELETE FROM facility_images
        WHERE image_id = #{imageId}
    </delete>
    <delete id="deleteAllImagesByFacilityId">
        DELETE FROM facility_images
        WHERE facility_id = #{facilityId}
    </delete>
    <select id="countImagesByFacilityId" resultType="int">
        SELECT COUNT(*)
        FROM facility_images
        WHERE facility_id = #{facilityId}
    </select>
    <update id="clearMainImages">
        UPDATE facility_images
        SET is_main_image = FALSE, updated_at = NOW()
        WHERE facility_id = #{facilityId}
    </update>
    <update id="updateMainImage">
        UPDATE facility_images
        SET is_main_image = TRUE, updated_at = NOW()
        WHERE facility_id = #{facilityId} AND image_id = #{imageId}
    </update>
    <select id="getImageById" resultMap="FacilityImageResultMap">
        SELECT
            image_id,
            facility_id,
            image_path,
            image_alt_text,
            image_order,
            is_main_image,
            upload_date,
            updated_at
        FROM facility_images
        WHERE image_id = #{imageId}
    </select>
    <update id="updateImageOrder">
        UPDATE facility_images
        SET image_order = #{imageOrder}, updated_at = NOW()
        WHERE image_id = #{imageId}
    </update>
</mapper>
````

## File: src/main/resources/mapper/reviewMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.ReviewMapper">
    <resultMap id="reviewResultMap" type="com.example.carelink.dto.ReviewDTO">
        <id property="reviewId" column="review_id"/>
        <result property="facilityId" column="facility_id"/>
        <result property="facilityName" column="facility_name"/>
        <result property="memberId" column="member_id"/>
        <result property="memberName" column="member_name"/>
        <result property="title" column="title"/>
        <result property="content" column="content"/>
        <result property="rating" column="rating"/>
        <result property="serviceRating" column="service_rating"/>
        <result property="facilityRating" column="facility_rating"/>
        <result property="staffRating" column="staff_rating"/>
        <result property="priceRating" column="price_rating"/>
        <result property="reviewImage1" column="review_image1"/>
        <result property="reviewImage2" column="review_image2"/>
        <result property="reviewImage3" column="review_image3"/>
        <result property="likeCount" column="like_count"/>
        <result property="dislikeCount" column="dislike_count"/>
        <result property="viewCount" column="view_count"/>
        <result property="isVisible" column="is_visible"/>
        <result property="status" column="status"/>
        <result property="parentReviewId" column="parent_review_id"/>
        <result property="replyCount" column="reply_count"/>
        <result property="replyDepth" column="reply_depth"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
        <result property="isDeleted" column="is_deleted"/>
    </resultMap>
    <select id="findReviewsWithSearch" parameterType="com.example.carelink.dto.ReviewDTO" resultMap="reviewResultMap">
        SELECT
            r.*,
            m.name as member_name,
            f.facility_name
        FROM review r
        LEFT JOIN member m ON r.member_id = m.member_id
        LEFT JOIN facility f ON r.facility_id = f.facility_id
        WHERE r.is_deleted = false AND r.is_visible = true
        <if test="facilityId != null">
            AND r.facility_id = #{facilityId}
        </if>
        <if test="searchKeyword != null and searchKeyword != ''">
            AND (r.title LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR r.content LIKE CONCAT('%', #{searchKeyword}, '%'))
        </if>
        <if test="minRating != null">
            AND r.rating >= #{minRating}
        </if>
        <if test="maxRating != null">
            AND r.rating &lt;= #{maxRating}
        </if>
        <choose>
            <when test="sortBy != null and sortBy == 'RATING_HIGH'">
                ORDER BY r.rating DESC, r.created_at DESC
            </when>
            <when test="sortBy != null and sortBy == 'RATING_LOW'">
                ORDER BY r.rating ASC, r.created_at DESC
            </when>
            <when test="sortBy != null and sortBy == 'LIKE_COUNT'">
                ORDER BY r.like_count DESC, r.created_at DESC
            </when>
            <otherwise>
                ORDER BY r.created_at DESC
            </otherwise>
        </choose>
        <if test="size != null and size > 0 and offset != null and offset >= 0">
            LIMIT #{size} OFFSET #{offset}
        </if>
    </select>
    <select id="countReviewsWithSearch" parameterType="com.example.carelink.dto.ReviewDTO" resultType="int">
        SELECT COUNT(*)
        FROM review r
        WHERE r.is_deleted = false AND r.is_visible = true
        <if test="facilityId != null">
            AND r.facility_id = #{facilityId}
        </if>
        <if test="searchKeyword != null and searchKeyword != ''">
            AND (r.title LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR r.content LIKE CONCAT('%', #{searchKeyword}, '%'))
        </if>
        <if test="minRating != null">
            AND r.rating >= #{minRating}
        </if>
        <if test="maxRating != null">
            AND r.rating &lt;= #{maxRating}
        </if>
    </select>
    <select id="findReviewById" parameterType="long" resultMap="reviewResultMap">
        SELECT
            r.*,
            m.name as member_name,
            f.facility_name
        FROM review r
        LEFT JOIN member m ON r.member_id = m.member_id
        LEFT JOIN facility f ON r.facility_id = f.facility_id
        WHERE r.review_id = #{reviewId} AND r.is_deleted = false
    </select>
    <insert id="insertReview" parameterType="com.example.carelink.dto.ReviewDTO" useGeneratedKeys="true" keyProperty="reviewId">
        INSERT INTO review (
            facility_id, member_id, title, content, rating,
            service_rating, facility_rating, staff_rating, price_rating,
            review_image1, review_image2, review_image3,
            is_visible, status, parent_review_id, reply_depth,
            is_deleted, created_at
        ) VALUES (
            #{facilityId}, #{memberId}, #{title}, #{content}, #{rating},
            #{serviceRating}, #{facilityRating}, #{staffRating}, #{priceRating},
            #{reviewImage1}, #{reviewImage2}, #{reviewImage3},
            #{isVisible}, #{status}, #{parentReviewId}, #{replyDepth},
            #{isDeleted}, NOW()
        )
    </insert>
    <update id="updateReview" parameterType="com.example.carelink.dto.ReviewDTO">
        UPDATE review SET
            title = #{title},
            content = #{content},
            rating = #{rating},
            service_rating = #{serviceRating},
            facility_rating = #{facilityRating},
            staff_rating = #{staffRating},
            price_rating = #{priceRating},
            review_image1 = #{reviewImage1},
            review_image2 = #{reviewImage2},
            review_image3 = #{reviewImage3},
            is_visible = #{isVisible},
            status = #{status},
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>
    <update id="deleteReview" parameterType="long">
        UPDATE review SET
            is_deleted = true,
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>
    <update id="incrementViewCount" parameterType="long">
        UPDATE review SET
            view_count = view_count + 1,
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>
    <update id="incrementLikeCount" parameterType="long">
        UPDATE review SET
            like_count = like_count + 1,
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>
    <update id="incrementDislikeCount" parameterType="long">
        UPDATE review SET
            dislike_count = dislike_count + 1,
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>
    <select id="findReviewsByMemberId" parameterType="long" resultMap="reviewResultMap">
        SELECT
            r.*,
            m.name as member_name,
            f.facility_name
        FROM review r
        LEFT JOIN member m ON r.member_id = m.member_id
        LEFT JOIN facility f ON r.facility_id = f.facility_id
        WHERE r.member_id = #{memberId} AND r.is_deleted = false
        ORDER BY r.created_at DESC
    </select>
    <select id="findReviewsByFacilityId" parameterType="long" resultMap="reviewResultMap">
        SELECT
            r.*,
            m.name as member_name,
            f.facility_name
        FROM review r
        LEFT JOIN member m ON r.member_id = m.member_id
        LEFT JOIN facility f ON r.facility_id = f.facility_id
        WHERE r.facility_id = #{facilityId} AND r.is_deleted = false AND r.is_visible = true
        ORDER BY r.created_at DESC
    </select>
    <select id="getAverageRatingByFacilityId" parameterType="long" resultType="float">
        SELECT ROUND(AVG(rating), 1)
        FROM review
        WHERE facility_id = #{facilityId} AND is_deleted = false AND is_visible = true
    </select>
    <select id="getReviewCountByFacilityId" parameterType="long" resultType="int">
        SELECT COUNT(*)
        FROM review
        WHERE facility_id = #{facilityId} AND is_deleted = false AND is_visible = true
    </select>
    <select id="getReviewCount" resultType="int">
        SELECT COUNT(*)
        FROM review
        WHERE is_deleted = false AND is_visible = true
    </select>
    <select id="getAverageRating" parameterType="long" resultType="double">
        SELECT AVG(rating)
        FROM review
        WHERE facility_id = #{facilityId}
          AND is_deleted = false
          AND is_visible = true
    </select>
    <delete id="deleteByMemberId" parameterType="long">
        DELETE FROM review WHERE member_id = #{memberId}
    </delete>
    <delete id="deleteByFacilityMemberId" parameterType="long">
        DELETE FROM review
        WHERE facility_id IN (
            SELECT facility_id FROM facility WHERE registered_member_id = #{memberId}
        )
    </delete>
</mapper>
````

## File: src/main/java/com/example/carelink/common/BaseDTO.java
````java
package com.example.carelink.common;
import lombok.Data;
import java.time.LocalDateTime;
import com.fasterxml.jackson.annotation.JsonFormat;
@Data
public class BaseDTO {
    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")
    private LocalDateTime createdAt;
    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")
    private LocalDateTime updatedAt;
    private boolean isDeleted;
    private Integer page;
    private Integer pageSize;
    private Integer offset;
    private Integer size;
    public BaseDTO() {
        this.page = 1;
        this.pageSize = Constants.DEFAULT_PAGE_SIZE;
        this.offset = (this.page - 1) * this.pageSize;
        this.size = this.pageSize;
    }
}
````

## File: src/main/java/com/example/carelink/dao/MemberMapper.java
````java
package com.example.carelink.dao;
import com.example.carelink.dto.MemberDTO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;
import java.util.List;
@Mapper
public interface MemberMapper {
    MemberDTO findByUserId(@Param("userId") String userId);
    MemberDTO findById(@Param("memberId") Long memberId);
    MemberDTO findByEmail(@Param("email") String email);
    int insertMember(MemberDTO memberDTO);
    int updateMember(MemberDTO memberDTO);
    int softDeleteMember(@Param("userId") String userId);
    int updatePassword(MemberDTO memberDTO);
    int updateLoginSuccess(@Param("memberId") Long memberId);
    int updateLoginFail(@Param("memberId") Long memberId);
    int getTotalCount();
    List<MemberDTO> findMembersWithPaging(MemberDTO searchDTO);
    List<MemberDTO> findMembersByRole(@Param("role") String role);
    void updateMemberStatus(@Param("memberId") Long memberId, @Param("isActive") boolean isActive);
    int getMemberCount();
    boolean existsByUserId(@Param("userId") String userId);
    boolean existsByEmail(@Param("email") String email);
    int anonymizeMember(@Param("userId") String userId);
    int hardDeleteMember(@Param("userId") String userId);
    int getFacilityMemberCount();
    int getUserMemberCount();
    int getMemberCountByRole(@Param("role") String role);
}
````

## File: src/main/resources/mapper/MemberMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.MemberMapper">
    <resultMap id="memberResultMap" type="com.example.carelink.dto.MemberDTO">
        <id property="memberId" column="member_id"/>
        <result property="userId" column="user_id"/>
        <result property="password" column="password"/>
        <result property="name" column="name"/>
        <result property="email" column="email"/>
        <result property="phone" column="phone"/>
        <result property="role" column="role"/>
        <result property="address" column="address"/>
        <result property="detailAddress" column="detail_address"/>
        <result property="profileImage" column="profile_image"/>
        <result property="profileImageAltText" column="profile_image_alt_text"/>
        <result property="isActive" column="is_active"/>
        <result property="loginFailCount" column="login_fail_count"/>
        <result property="lastLoginAt" column="last_login_at"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
        <result property="isDeleted" column="is_deleted"/>
    </resultMap>
    <select id="findByUserId" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE user_id = #{userId}
          AND is_deleted = false
    </select>
    <select id="findById" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE member_id = #{memberId}
          AND is_deleted = false
    </select>
    <select id="findByEmail" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE email = #{email}
          AND is_deleted = false
    </select>
    <insert id="insertMember" parameterType="com.example.carelink.dto.MemberDTO" useGeneratedKeys="true" keyProperty="memberId">
        INSERT INTO member (
        member_id,
        user_id,
        password,
        name,
        email,
        phone,
        role,
        address,
        detail_address,
        profile_image,
        is_active,
        login_fail_count,
        last_login_at,
        is_deleted
        ) VALUES (
        #{memberId},
        #{userId, jdbcType=VARCHAR},
        #{password, jdbcType=VARCHAR},
        #{name, jdbcType=VARCHAR},
        #{email, jdbcType=VARCHAR},
        #{phone, jdbcType=VARCHAR},
        #{role, jdbcType=VARCHAR},
        #{address, jdbcType=VARCHAR},
        #{detailAddress, jdbcType=VARCHAR},
        #{profileImage, jdbcType=VARCHAR},
        #{isActive, jdbcType=BOOLEAN},
        #{loginFailCount, jdbcType=INTEGER},
        #{lastLoginAt, jdbcType=TIMESTAMP},
        #{isDeleted, jdbcType=BOOLEAN}
        )
    </insert>
    <select id="existsByUserId" resultType="boolean">
        SELECT COUNT(*) > 0 FROM member WHERE user_id = #{userId}
    </select>
    <select id="existsByEmail" resultType="boolean">
        SELECT COUNT(*) > 0 FROM member WHERE email = #{email}
    </select>
    <update id="updateMember" parameterType="MemberDTO">
        UPDATE member
        SET
            name = #{name},
            email = #{email},
            phone = #{phone},
            address = #{address},
            detail_address = #{detailAddress},
            profile_image = #{profileImage},
            profile_image_alt_text = #{profileImageAltText},
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>
    <update id="softDeleteMember">
        UPDATE member
        SET
            is_deleted = TRUE,
            is_active = FALSE,
            updated_at = NOW()
        WHERE user_id = #{userId}
    </update>
    <update id="anonymizeMember">
        UPDATE member
        SET
            name = 'íƒˆí‡´íšŒì›',
            email = NULL,
            phone = NULL,
            address = NULL,
            profile_image = NULL,
            password = 'DELETED',
            is_deleted = TRUE,
            is_active = FALSE,
            updated_at = NOW()
        WHERE user_id = #{userId}
    </update>
    <delete id="hardDeleteMember">
        DELETE FROM member WHERE user_id = #{userId}
    </delete>
    <update id="updatePassword" parameterType="MemberDTO">
        UPDATE member
        SET
            password = #{password},
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>
    <update id="updateLoginSuccess">
        UPDATE member
        SET login_fail_count = 0,
            last_login_at = NOW(),
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>
    <update id="updateLoginFail">
        UPDATE member
        SET login_fail_count = login_fail_count + 1,
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>
    <select id="getTotalCount" resultType="int">
        SELECT COUNT(*)
        FROM member
        WHERE is_deleted = FALSE
    </select>
    <select id="findMembersWithPaging" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE is_deleted = FALSE
        <if test="role != null and !role.isEmpty()">
            AND role = #{role}
        </if>
        ORDER BY created_at DESC
        LIMIT #{pageSize} OFFSET #{offset}
    </select>
    <select id="findMembersByRole" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE is_deleted = FALSE
        <if test="role != null and role != ''">
            AND role = #{role}
        </if>
        ORDER BY created_at DESC
    </select>
    <update id="updateMemberStatus">
        UPDATE member
        SET is_active = #{isActive},
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>
    <select id="getMemberCount" resultType="int">
        SELECT COUNT(*)
        FROM member
        WHERE is_deleted = false AND is_active = true
    </select>
    <select id="getFacilityMemberCount" resultType="int">
        SELECT COUNT(*)
        FROM member
        WHERE is_deleted = false
        AND role = 'FACILITY'
    </select>
    <select id="getUserMemberCount" resultType="int">
        SELECT COUNT(*)
        FROM member
        WHERE is_deleted = false
        AND role = 'USER'
    </select>
    <select id="getMemberCountByRole" resultType="int">
        SELECT COUNT(*)
        FROM member
        WHERE is_deleted = false
        <if test="role != null and role != ''">
            AND role = #{role}
        </if>
    </select>
</mapper>
````

## File: src/main/java/com/example/carelink/dao/BoardMapper.java
````java
package com.example.carelink.dao;
import com.example.carelink.dto.BoardDTO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;
import java.util.List;
@Mapper
public interface BoardMapper {
    List<BoardDTO> getBoardList(BoardDTO searchDTO);
    BoardDTO getBoardById(@Param("boardId") Long boardId);
    BoardDTO getBoardByIdIncludeDeleted(@Param("boardId") Long boardId);
    int insertBoard(BoardDTO boardDTO);
    int updateBoard(BoardDTO boardDTO);
    int deleteBoard(@Param("boardId") Long boardId);
    void increaseViewCount(@Param("boardId") Long boardId);
    void incrementViewCount(@Param("boardId") Long boardId);
    List<BoardDTO> getPopularBoards();
    List<BoardDTO> getBoardsByCategory(@Param("category") String category);
    int getBoardCount(BoardDTO searchDTO);
    List<BoardDTO> getPopularBoardsByCategory(@Param("category") String category);
    void incrementLikeCount(@Param("boardId") Long boardId);
    void decrementLikeCount(@Param("boardId") Long boardId);
    BoardDTO getPreviousBoard(@Param("boardId") Long boardId);
    BoardDTO getNextBoard(@Param("boardId") Long boardId);
    List<BoardDTO> findBoardsByMemberId(@Param("memberId") Long memberId);
    int deleteByMemberId(@Param("memberId") Long memberId);
}
````

## File: src/main/java/com/example/carelink/dao/FacilityMapper.java
````java
package com.example.carelink.dao;
import com.example.carelink.dto.FacilityDTO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;
import java.util.List;
@Mapper
public interface FacilityMapper {
    List<FacilityDTO> searchFacilities(FacilityDTO searchDTO);
    FacilityDTO getFacilityById(@Param("facilityId") Long facilityId);
    List<FacilityDTO> getAllFacilities();
    List<FacilityDTO> getAllActiveFacilities();
    int insertFacility(FacilityDTO facilityDTO);
    int updateFacility(FacilityDTO facilityDTO);
    int deleteFacility(@Param("facilityId") Long facilityId);
    int countFacilitiesByRegion(@Param("region") String region);
    int getFacilityCount();
    int deleteByMemberId(@Param("memberId") Long memberId);
    List<FacilityDTO> getFacilitiesByMemberId(@Param("memberId") Long memberId);
    FacilityDTO getFacilityByMemberId(@Param("memberId") Long memberId);
    int updateFacilityMainImage(@Param("facilityId") Long facilityId,
                               @Param("mainImagePath") String mainImagePath,
                               @Param("imageCount") Integer imageCount);
    List<FacilityDTO> getFacilitiesByApprovalStatus(@Param("approvalStatus") String approvalStatus);
    int updateFacilityApprovalStatus(@Param("facilityId") Long facilityId,
                                   @Param("approvalStatus") String approvalStatus,
                                   @Param("rejectionReason") String rejectionReason);
    int countFacilitiesByStatus(@Param("approvalStatus") String approvalStatus);
}
````

## File: src/main/java/com/example/carelink/dao/JobMapper.java
````java
package com.example.carelink.dao;
import com.example.carelink.dto.JobDTO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;
import java.util.List;
@Mapper
public interface JobMapper {
    List<JobDTO> findJobsWithSearch(JobDTO searchDTO);
    List<JobDTO> getJobList(JobDTO searchDTO);
    JobDTO findJobById(@Param("jobId") Long jobId);
    int insertJob(JobDTO jobDTO);
    int updateJob(JobDTO jobDTO);
    int deleteJob(@Param("jobId") Long jobId);
    List<JobDTO> getPopularJobs();
    List<JobDTO> searchJobs(JobDTO searchDTO);
    int countJobsWithSearch(JobDTO searchDTO);
    int getJobCount();
    void incrementApplyCount(@Param("jobId") Long jobId);
    List<JobDTO> findJobsByMemberId(@Param("memberId") Long memberId);
    int deleteByMemberId(@Param("memberId") Long memberId);
    int deleteByFacilityMemberId(@Param("memberId") Long memberId);
}
````

## File: src/main/java/com/example/carelink/dto/BoardDTO.java
````java
package com.example.carelink.dto;
import com.example.carelink.common.BaseDTO;
import lombok.Data;
import lombok.EqualsAndHashCode;
import javax.validation.constraints.NotBlank;
import javax.validation.constraints.NotNull;
import java.time.LocalDateTime;
@Data
@EqualsAndHashCode(callSuper = true)
public class BoardDTO extends BaseDTO {
    private Long boardId;
    @NotBlank(message = "ê²Œì‹œíŒ ìœ í˜•ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String boardType;
    @NotBlank(message = "ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String title;
    @NotBlank(message = "ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String content;
    @NotNull(message = "ì‘ì„±ì ì •ë³´ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private Long memberId;
    private String memberName;
    private String author;
    private Integer viewCount;
    private Integer likeCount;
    private Integer commentCount;
    private String attachmentPath;
    private String attachmentName;
    private Long attachmentSize;
    private Boolean isNotice;
    private Boolean isSecret;
    private Boolean isActive;
    private Boolean isDeleted;
    private String status;
    private String category;
    private String subCategory;
    private Integer priority = 1;
    private Boolean isPinned;
    private Long parentBoardId;
    private Integer replyDepth;
    private Integer replyOrder;
    private String qaType;
    private Boolean isAnswered;
    private Integer answerCount;
    private String searchKeyword;
    private String searchType;
    private String searchCategory;
    private String sortBy;
    private String sortOrder;
    private String tags;
    private String metaDescription;
    private String metaKeywords;
    private Integer page = 1;
    private Integer size = 10;
    private Integer offset = 0;
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
    public void setAuthor(String author) {
        this.author = (this.memberName != null && !this.memberName.isEmpty()) ? this.memberName : author;
    }
    public String getAuthor() {
        return (this.memberName != null && !this.memberName.isEmpty()) ? this.memberName : this.author;
    }
    public boolean getIsNew() {
        if (this.getCreatedAt() == null) return false;
        return this.getCreatedAt().isAfter(java.time.LocalDateTime.now().minusDays(1));
    }
    public boolean getIsHot() {
        return (this.viewCount != null && this.viewCount >= 100) ||
               (this.likeCount != null && this.likeCount >= 10);
    }
    public boolean getHasComments() {
        return this.commentCount != null && this.commentCount > 0;
    }
}
````

## File: src/main/java/com/example/carelink/service/BoardService.java
````java
package com.example.carelink.service;
import com.example.carelink.common.PageInfo;
import com.example.carelink.dao.BoardMapper;
import com.example.carelink.dto.BoardDTO;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import java.util.List;
import java.util.Map;
import java.util.HashMap;
@Slf4j
@Service
@RequiredArgsConstructor
public class BoardService {
    private final BoardMapper boardMapper;
    private static final int DEFAULT_PAGE_SIZE = 10;
    public PageInfo<BoardDTO> getBoardList(int page, String keyword, String category) {
        log.info("ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - page: {}, keyword: {}, category: {}", page, keyword, category);
        try {
            BoardDTO searchDTO = new BoardDTO();
            searchDTO.setPage(page);
            searchDTO.setSize(DEFAULT_PAGE_SIZE);
            searchDTO.setOffset((page - 1) * DEFAULT_PAGE_SIZE);
            if (keyword != null && !keyword.trim().isEmpty()) {
                searchDTO.setSearchKeyword(keyword.trim());
            }
            if (category != null && !category.trim().isEmpty() && !"all".equals(category)) {
                searchDTO.setCategory(category.trim());
            }
            log.info("ê²€ìƒ‰ ì¡°ê±´ - searchDTO: page={}, size={}, offset={}, keyword={}, category={}",
                searchDTO.getPage(), searchDTO.getSize(), searchDTO.getOffset(),
                searchDTO.getSearchKeyword(), searchDTO.getCategory());
            int totalCount = boardMapper.getBoardCount(searchDTO);
            log.info("ì „ì²´ ê²Œì‹œê¸€ ìˆ˜: {}", totalCount);
            List<BoardDTO> boardList = boardMapper.getBoardList(searchDTO);
            log.info("ì¡°íšŒëœ ê²Œì‹œê¸€ ìˆ˜: {}", boardList != null ? boardList.size() : 0);
            if (boardList != null && !boardList.isEmpty()) {
                log.info("ì²« ë²ˆì§¸ ê²Œì‹œê¸€ ì •ë³´ - ID: {}, ì œëª©: {}, ì‘ì„±ì: {}, is_active: {}, is_deleted: {}",
                    boardList.get(0).getBoardId(),
                    boardList.get(0).getTitle(),
                    boardList.get(0).getMemberName(),
                    boardList.get(0).getIsActive(),
                    boardList.get(0).getIsDeleted());
            } else {
                log.warn("ì¡°íšŒëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.");
            }
            PageInfo<BoardDTO> pageInfo = new PageInfo<>(boardList, page, DEFAULT_PAGE_SIZE, totalCount);
            log.info("í˜ì´ì§• ì •ë³´ - í˜„ì¬í˜ì´ì§€: {}, ì „ì²´í˜ì´ì§€: {}, ì „ì²´ê±´ìˆ˜: {}",
                pageInfo.getCurrentPage(), pageInfo.getTotalPages(), pageInfo.getTotalCount());
            return pageInfo;
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ê²Œì‹œê¸€ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public BoardDTO getBoardById(Long id) {
        log.info("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ ì‹œì‘ - boardId: {}", id);
        try {
            BoardDTO board = boardMapper.getBoardById(id);
            if (board == null) {
                throw new RuntimeException("í•´ë‹¹ ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + id);
            }
            log.info("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ ì™„ë£Œ - boardId: {}, title: {}", id, board.getTitle());
            return board;
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            throw new RuntimeException("ê²Œì‹œê¸€ ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public BoardDTO getBoardByIdIncludeDeleted(Long id) {
        log.info("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ (ì‚­ì œ í¬í•¨) ì‹œì‘ - boardId: {}", id);
        try {
            BoardDTO board = boardMapper.getBoardByIdIncludeDeleted(id);
            if (board != null) {
                log.info("ğŸ“„ ê²Œì‹œê¸€ ì¡°íšŒ ì„±ê³µ (ì‚­ì œ í¬í•¨) - boardId: {}, title: {}", id, board.getTitle());
                log.info("   ğŸ” DBì—ì„œ ì¡°íšŒëœ isDeleted ì›ë³¸ê°’: {}", board.getIsDeleted());
                log.info("   ğŸ” isDeleted null ì²´í¬: {}", board.getIsDeleted() == null ? "NULL" : "NOT NULL");
                if (board.getIsDeleted() != null) {
                    log.info("   ğŸ” isDeleted boolean ê°’: {} ({})", board.getIsDeleted(),
                        board.getIsDeleted() ? "ì‚­ì œë¨" : "ì •ìƒ");
                }
            } else {
                log.warn("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²Œì‹œê¸€ ì¡°íšŒ ì‹œë„ (ì‚­ì œ í¬í•¨) - boardId: {}", id);
            }
            return board;
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ (ì‚­ì œ í¬í•¨) ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            throw new RuntimeException("ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public int insertBoard(BoardDTO boardDTO) {
        log.info("ê²Œì‹œê¸€ ë“±ë¡ ì‹œì‘ - title: {}, memberId: {}", boardDTO.getTitle(), boardDTO.getMemberId());
        try {
            validateBoardData(boardDTO);
            if (boardDTO.getStatus() == null) {
                boardDTO.setStatus("ACTIVE");
            }
            if (boardDTO.getPriority() == null) {
                boardDTO.setPriority(0);
            }
            if (boardDTO.getReplyDepth() == null) {
                boardDTO.setReplyDepth(0);
            }
            if (boardDTO.getReplyOrder() == null) {
                boardDTO.setReplyOrder(0);
            }
            if (boardDTO.getIsNotice() == null) {
                boardDTO.setIsNotice(false);
            }
            if (boardDTO.getIsSecret() == null) {
                boardDTO.setIsSecret(false);
            }
            if (boardDTO.getIsActive() == null) {
                boardDTO.setIsActive(true);
            }
            if (boardDTO.getIsDeleted() == null) {
                boardDTO.setIsDeleted(false);
            }
            if (boardDTO.getIsPinned() == null) {
                boardDTO.setIsPinned(false);
            }
            if (boardDTO.getCategory() != null && "NOTICE".equals(boardDTO.getCategory())) {
                boardDTO.setIsNotice(true);
            }
            if (boardDTO.getBoardType() == null) {
                String category = boardDTO.getCategory();
                if ("NOTICE".equals(category)) {
                    boardDTO.setBoardType("NOTICE");
                } else if ("INFO".equals(category)) {
                    boardDTO.setBoardType("INFO");
                } else if ("QNA".equals(category)) {
                    boardDTO.setBoardType("QNA");
                } else if ("FAQ".equals(category)) {
                    boardDTO.setBoardType("FAQ");
                } else {
                    boardDTO.setBoardType("GENERAL");
                }
            }
            log.info("ğŸ“ ë“±ë¡ ì „ ìƒíƒœ í™•ì¸ - isDeleted: {}, isActive: {}",
                boardDTO.getIsDeleted(), boardDTO.getIsActive());
            int result = boardMapper.insertBoard(boardDTO);
            log.info("âœ… ê²Œì‹œê¸€ ë“±ë¡ ì™„ë£Œ - boardId: {}", boardDTO.getBoardId());
            if (boardDTO.getBoardId() != null) {
                BoardDTO savedBoard = boardMapper.getBoardByIdIncludeDeleted(boardDTO.getBoardId());
                if (savedBoard != null) {
                    log.info("ğŸ” ë“±ë¡ ì§í›„ DB ìƒíƒœ í™•ì¸ - boardId: {}, isDeleted: {}, isActive: {}",
                        savedBoard.getBoardId(), savedBoard.getIsDeleted(), savedBoard.getIsActive());
                } else {
                    log.warn("âš ï¸ ë“±ë¡ ì§í›„ ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. boardId: {}", boardDTO.getBoardId());
                }
            }
            return result;
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ê²Œì‹œê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public int updateBoard(BoardDTO boardDTO) {
        log.info("ê²Œì‹œê¸€ ìˆ˜ì • ì‹œì‘ - boardId: {}, title: {}", boardDTO.getBoardId(), boardDTO.getTitle());
        try {
            BoardDTO existingBoard = boardMapper.getBoardByIdIncludeDeleted(boardDTO.getBoardId());
            if (existingBoard == null) {
                throw new RuntimeException("ìˆ˜ì •í•  ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + boardDTO.getBoardId());
            }
            validateBoardData(boardDTO);
            if (boardDTO.getPriority() == null) {
                boardDTO.setPriority(1);
            }
            int result = boardMapper.updateBoard(boardDTO);
            log.info("ê²Œì‹œê¸€ ìˆ˜ì • ì™„ë£Œ - boardId: {}", boardDTO.getBoardId());
            return result;
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", boardDTO.getBoardId(), e);
            throw new RuntimeException("ê²Œì‹œê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public Map<String, Object> deleteBoard(Long id) {
        log.info("ê²Œì‹œê¸€ ì‚­ì œ ì‹œì‘ - boardId: {}", id);
        Map<String, Object> result = new HashMap<>();
        try {
            BoardDTO existingBoard = boardMapper.getBoardByIdIncludeDeleted(id);
            if (existingBoard == null) {
                log.warn("ì‚­ì œ ìš”ì²­ëœ ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: {}", id);
                result.put("success", false);
                result.put("code", "NOT_FOUND");
                result.put("message", "ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            log.info("ğŸ” ê²Œì‹œê¸€ ìƒíƒœ í™•ì¸ - boardId: {}", id);
            log.info("   - title: {}", existingBoard.getTitle());
            log.info("   - isDeleted ê°’: {}", existingBoard.getIsDeleted());
            log.info("   - isDeleted íƒ€ì…: {}", existingBoard.getIsDeleted() != null ? existingBoard.getIsDeleted().getClass().getSimpleName() : "null");
            log.info("ğŸ” ì‚­ì œ ìƒíƒœ ìƒì„¸ ë¶„ì„:");
            log.info("   - isDeleted ì›ë³¸ê°’: {}", existingBoard.getIsDeleted());
            log.info("   - isDeleted == null: {}", existingBoard.getIsDeleted() == null);
            log.info("   - isDeleted != null: {}", existingBoard.getIsDeleted() != null);
            if (existingBoard.getIsDeleted() != null) {
                log.info("   - isDeleted.booleanValue(): {}", existingBoard.getIsDeleted().booleanValue());
                log.info("   - Boolean.TRUE.equals(isDeleted): {}", Boolean.TRUE.equals(existingBoard.getIsDeleted()));
            }
            boolean isAlreadyDeleted = existingBoard.getIsDeleted() != null && existingBoard.getIsDeleted();
            log.info("ğŸ” ìµœì¢… ì‚­ì œ íŒì •: {}", isAlreadyDeleted);
            if (isAlreadyDeleted) {
                log.info("âŒ ì´ë¯¸ ì‚­ì œëœ ê²Œì‹œê¸€ì…ë‹ˆë‹¤. boardId: {}, isDeleted: {}", id, existingBoard.getIsDeleted());
                result.put("success", false);
                result.put("code", "ALREADY_DELETED");
                result.put("message", "ì´ë¯¸ ì‚­ì œëœ ê²Œì‹œê¸€ì…ë‹ˆë‹¤.");
                return result;
            }
            log.info("âœ… ì‚­ì œ ê°€ëŠ¥í•œ ê²Œì‹œê¸€ì…ë‹ˆë‹¤. boardId: {}, isDeleted: {}", id, existingBoard.getIsDeleted());
            int deleteResult = boardMapper.deleteBoard(id);
            if (deleteResult > 0) {
                log.info("ê²Œì‹œê¸€ ì‚­ì œ ì™„ë£Œ - boardId: {}, ì˜í–¥ë°›ì€ í–‰: {}", id, deleteResult);
                result.put("success", true);
                result.put("code", "DELETED");
                result.put("message", "ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
            } else {
                log.warn("ê²Œì‹œê¸€ ì‚­ì œ ì‹¤íŒ¨ - boardId: {}, ì˜í–¥ë°›ì€ í–‰: {}", id, deleteResult);
                result.put("success", false);
                result.put("code", "DELETE_FAILED");
                result.put("message", "ê²Œì‹œê¸€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            }
            return result;
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            result.put("success", false);
            result.put("code", "ERROR");
            result.put("message", "ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return result;
        }
    }
    @Transactional
    public void incrementViewCount(Long id) {
        log.info("ì¡°íšŒìˆ˜ ì¦ê°€ ì‹œì‘ - boardId: {}", id);
        try {
            boardMapper.incrementViewCount(id);
            log.info("ì¡°íšŒìˆ˜ ì¦ê°€ ì™„ë£Œ - boardId: {}", id);
        } catch (Exception e) {
            log.warn("ì¡°íšŒìˆ˜ ì¦ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {} (ë¬´ì‹œí•˜ê³  ì§„í–‰)", id, e);
        }
    }
    public List<BoardDTO> getPopularBoards() {
        log.info("ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹œì‘");
        try {
            List<BoardDTO> popularBoards = boardMapper.getPopularBoards();
            log.info("ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", popularBoards.size());
            return popularBoards;
        } catch (Exception e) {
            log.error("ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ì¸ê¸° ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public List<BoardDTO> getBoardsByCategory(String category) {
        log.info("ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - category: {}", category);
        try {
            List<BoardDTO> boards = boardMapper.getBoardsByCategory(category);
            log.info("ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - category: {}, ì¡°íšŒëœ ê±´ìˆ˜: {}", category, boards.size());
            return boards;
        } catch (Exception e) {
            log.error("ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - category: {}", category, e);
            throw new RuntimeException("ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public List<BoardDTO> getNoticeBoards() {
        log.info("ê³µì§€ì‚¬í•­ ëª©ë¡ ì¡°íšŒ ì‹œì‘");
        try {
            BoardDTO searchDTO = new BoardDTO();
            searchDTO.setCategory("NOTICE");
            searchDTO.setSize(5);
            searchDTO.setPage(1);
            List<BoardDTO> notices = boardMapper.getBoardList(searchDTO);
            log.info("ê³µì§€ì‚¬í•­ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", notices.size());
            return notices;
        } catch (Exception e) {
            log.error("ê³µì§€ì‚¬í•­ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ê³µì§€ì‚¬í•­ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    private void validateBoardData(BoardDTO boardDTO) {
        if (boardDTO.getMemberId() == null) {
            throw new IllegalArgumentException("ì‘ì„±ì IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (boardDTO.getTitle() == null || boardDTO.getTitle().trim().isEmpty()) {
            throw new IllegalArgumentException("ê²Œì‹œê¸€ ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (boardDTO.getContent() == null || boardDTO.getContent().trim().isEmpty()) {
            throw new IllegalArgumentException("ê²Œì‹œê¸€ ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (boardDTO.getTitle().length() > 200) {
            throw new IllegalArgumentException("ê²Œì‹œê¸€ ì œëª©ì€ 200ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
    }
    public List<BoardDTO> getPopularBoardsByCategory(String category) {
        log.info("ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - category: {}", category);
        try {
            List<BoardDTO> popularBoards;
            if (category == null || category.trim().isEmpty()) {
                popularBoards = boardMapper.getPopularBoards();
            } else {
                popularBoards = boardMapper.getPopularBoardsByCategory(category);
            }
            log.info("ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", popularBoards.size());
            return popularBoards;
        } catch (Exception e) {
            log.error("ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ì¸ê¸° ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public BoardDTO getPreviousBoard(Long currentId) {
        log.info("ì´ì „ ê²Œì‹œê¸€ ì¡°íšŒ ì‹œì‘ - currentId: {}", currentId);
        try {
            BoardDTO prevBoard = boardMapper.getPreviousBoard(currentId);
            log.info("ì´ì „ ê²Œì‹œê¸€ ì¡°íšŒ ì™„ë£Œ - prevBoardId: {}", prevBoard != null ? prevBoard.getBoardId() : "ì—†ìŒ");
            return prevBoard;
        } catch (Exception e) {
            log.error("ì´ì „ ê²Œì‹œê¸€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return null;
        }
    }
    public BoardDTO getNextBoard(Long currentId) {
        log.info("ë‹¤ìŒ ê²Œì‹œê¸€ ì¡°íšŒ ì‹œì‘ - currentId: {}", currentId);
        try {
            BoardDTO nextBoard = boardMapper.getNextBoard(currentId);
            log.info("ë‹¤ìŒ ê²Œì‹œê¸€ ì¡°íšŒ ì™„ë£Œ - nextBoardId: {}", nextBoard != null ? nextBoard.getBoardId() : "ì—†ìŒ");
            return nextBoard;
        } catch (Exception e) {
            log.error("ë‹¤ìŒ ê²Œì‹œê¸€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return null;
        }
    }
    @Transactional
    public void incrementLikeCount(Long id) {
        log.info("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ì¦ê°€ ì‹œì‘ - boardId: {}", id);
        try {
            boardMapper.incrementLikeCount(id);
            log.info("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ì¦ê°€ ì™„ë£Œ - boardId: {}", id);
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ì¦ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            throw new RuntimeException("ì¶”ì²œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public void decrementLikeCount(Long id) {
        log.info("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ê°ì†Œ ì‹œì‘ - boardId: {}", id);
        try {
            boardMapper.decrementLikeCount(id);
            log.info("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ê°ì†Œ ì™„ë£Œ - boardId: {}", id);
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ê°ì†Œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            throw new RuntimeException("ì¶”ì²œ ì·¨ì†Œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public int getBoardCount() {
        log.info("ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ ì¡°íšŒ ì‹œì‘");
        try {
            BoardDTO searchDTO = new BoardDTO();
            int count = boardMapper.getBoardCount(searchDTO);
            log.info("ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ ì¡°íšŒ ì™„ë£Œ - ì´ {}ê±´", count);
            return count;
        } catch (Exception e) {
            log.error("ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }
}
````

## File: src/main/resources/mapper/boardMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.BoardMapper">
    <resultMap id="boardResultMap" type="com.example.carelink.dto.BoardDTO">
        <id property="boardId" column="board_id"/>
        <result property="boardType" column="board_type"/>
        <result property="title" column="title"/>
        <result property="content" column="content"/>
        <result property="memberId" column="member_id"/>
        <result property="memberName" column="member_name"/>
        <result property="viewCount" column="view_count"/>
        <result property="likeCount" column="like_count"/>
        <result property="commentCount" column="comment_count"/>
        <result property="attachmentPath" column="attachment_path"/>
        <result property="attachmentName" column="attachment_name"/>
        <result property="attachmentSize" column="attachment_size"/>
        <result property="isNotice" column="is_notice"/>
        <result property="isSecret" column="is_secret"/>
        <result property="isDeleted" column="is_deleted"/>
        <result property="status" column="status"/>
        <result property="category" column="category"/>
        <result property="subCategory" column="sub_category"/>
        <result property="priority" column="priority"/>
        <result property="isPinned" column="is_pinned"/>
        <result property="parentBoardId" column="parent_board_id"/>
        <result property="replyDepth" column="reply_depth"/>
        <result property="replyOrder" column="reply_order"/>
        <result property="tags" column="tags"/>
        <result property="metaDescription" column="meta_description"/>
        <result property="metaKeywords" column="meta_keywords"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
    </resultMap>
    <select id="getBoardList" parameterType="com.example.carelink.dto.BoardDTO" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.board_type,
            b.title,
            b.content,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.is_notice,
            b.is_secret,
            COALESCE(b.is_active, true) as is_active,
            COALESCE(b.is_deleted, false) as is_deleted,
            b.status,
            b.category,
            b.sub_category,
            b.priority,
            b.is_pinned,
            b.tags,
            b.created_at,
            b.updated_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            <if test="searchKeyword != null and searchKeyword != ''">
                AND (b.title LIKE CONCAT('%', #{searchKeyword}, '%') OR b.content LIKE CONCAT('%', #{searchKeyword}, '%'))
            </if>
            <if test="category != null and category != ''">
                AND b.category = #{category}
            </if>
        ORDER BY
            b.is_notice DESC,
            b.created_at DESC
        LIMIT #{size} OFFSET #{offset}
    </select>
    <select id="getBoardCount" parameterType="com.example.carelink.dto.BoardDTO" resultType="int">
        SELECT COUNT(*)
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            <if test="searchKeyword != null and searchKeyword != ''">
                AND (b.title LIKE CONCAT('%', #{searchKeyword}, '%') OR b.content LIKE CONCAT('%', #{searchKeyword}, '%'))
            </if>
            <if test="category != null and category != ''">
                AND b.category = #{category}
            </if>
    </select>
    <select id="getBoardById" parameterType="long" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.board_type,
            b.title,
            b.content,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.attachment_path,
            b.attachment_name,
            b.attachment_size,
            b.is_notice,
            b.is_secret,
            COALESCE(b.is_active, true) as is_active,
            COALESCE(b.is_deleted, false) as is_deleted,
            b.status,
            b.category,
            b.sub_category,
            b.priority,
            b.is_pinned,
            b.parent_board_id,
            b.reply_depth,
            b.reply_order,
            b.tags,
            b.meta_description,
            b.meta_keywords,
            b.created_at,
            b.updated_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            b.board_id = #{boardId}
            AND COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
    </select>
    <select id="getBoardByIdIncludeDeleted" parameterType="long" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.board_type,
            b.title,
            b.content,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.attachment_path,
            b.attachment_name,
            b.attachment_size,
            b.is_notice,
            b.is_secret,
            COALESCE(b.is_active, true) as is_active,
            COALESCE(b.is_deleted, false) as is_deleted,
            b.status,
            b.category,
            b.sub_category,
            b.priority,
            b.is_pinned,
            b.parent_board_id,
            b.reply_depth,
            b.reply_order,
            b.tags,
            b.meta_description,
            b.meta_keywords,
            b.created_at,
            b.updated_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            b.board_id = #{boardId}
    </select>
    <insert id="insertBoard" parameterType="com.example.carelink.dto.BoardDTO" useGeneratedKeys="true" keyProperty="boardId">
        INSERT INTO board (
            board_type,
            title,
            content,
            member_id,
            attachment_path,
            attachment_name,
            attachment_size,
            is_notice,
            is_secret,
            is_active,
            is_deleted,
            category,
            sub_category,
            priority,
            is_pinned,
            parent_board_id,
            reply_depth,
            reply_order,
            tags,
            meta_description,
            meta_keywords,
            created_at,
            updated_at
        ) VALUES (
            #{boardType},
            #{title},
            #{content},
            #{memberId},
            #{attachmentPath},
            #{attachmentName},
            #{attachmentSize},
            #{isNotice},
            #{isSecret},
            #{isActive},
            #{isDeleted},
            #{category},
            #{subCategory},
            COALESCE(#{priority}, 1),
            #{isPinned},
            #{parentBoardId},
            #{replyDepth},
            #{replyOrder},
            #{tags},
            #{metaDescription},
            #{metaKeywords},
            NOW(),
            NOW()
        )
    </insert>
    <update id="updateBoard" parameterType="com.example.carelink.dto.BoardDTO">
        UPDATE board
        SET
            board_type = #{boardType},
            title = #{title},
            content = #{content},
            attachment_path = #{attachmentPath},
            attachment_name = #{attachmentName},
            attachment_size = #{attachmentSize},
            is_notice = #{isNotice},
            is_secret = #{isSecret},
            category = #{category},
            sub_category = #{subCategory},
            priority = COALESCE(#{priority}, 1),
            is_pinned = #{isPinned},
            tags = #{tags},
            meta_description = #{metaDescription},
            meta_keywords = #{metaKeywords},
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
    </update>
    <update id="deleteBoard" parameterType="long">
        UPDATE board
        SET
            is_deleted = true,
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_deleted, false) = false
    </update>
    <update id="incrementViewCount" parameterType="long">
        UPDATE board
        SET
            view_count = view_count + 1,
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_active, true) = true
            AND COALESCE(is_deleted, false) = false
    </update>
    <update id="increaseViewCount" parameterType="long">
        UPDATE board
        SET
            view_count = view_count + 1,
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_active, true) = true
            AND COALESCE(is_deleted, false) = false
    </update>
    <select id="getPopularBoards" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.category,
            b.is_notice,
            b.is_pinned,
            b.created_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.created_at >= DATE_SUB(NOW(), INTERVAL 7 DAY)
        ORDER BY
            (b.view_count * 0.4 + b.like_count * 0.4 + b.comment_count * 0.2) DESC
        LIMIT 5
    </select>
    <select id="getBoardsByCategory" parameterType="string" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.category,
            b.is_notice,
            b.is_pinned,
            b.created_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.category = #{category}
        ORDER BY
            b.created_at DESC
        LIMIT 10
    </select>
    <select id="getPopularBoardsByCategory" parameterType="string" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.category,
            b.is_notice,
            b.is_pinned,
            b.created_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.created_at >= DATE_SUB(NOW(), INTERVAL 7 DAY)
            <if test="category != null and category != ''">
                AND b.category = #{category}
            </if>
        ORDER BY
            (b.view_count * 0.4 + b.like_count * 0.4 + b.comment_count * 0.2) DESC
        LIMIT 5
    </select>
    <select id="getPreviousBoard" parameterType="long" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title
        FROM
            board b
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.board_id &lt; #{boardId}
        ORDER BY
            b.board_id DESC
        LIMIT 1
    </select>
    <select id="getNextBoard" parameterType="long" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title
        FROM
            board b
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.board_id &gt; #{boardId}
        ORDER BY
            b.board_id ASC
        LIMIT 1
    </select>
    <update id="incrementLikeCount" parameterType="long">
        UPDATE board
        SET
            like_count = like_count + 1,
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_active, true) = true
            AND COALESCE(is_deleted, false) = false
    </update>
    <update id="decrementLikeCount" parameterType="long">
        UPDATE board
        SET
            like_count = GREATEST(0, like_count - 1),
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_active, true) = true
            AND COALESCE(is_deleted, false) = false
    </update>
    <select id="findBoardsByMemberId" resultMap="boardResultMap">
        SELECT b.*, m.name as author_name
        FROM board b
        LEFT JOIN member m ON b.member_id = m.member_id
        WHERE b.member_id = #{memberId}
          AND b.is_deleted = false
        ORDER BY b.created_at DESC
    </select>
    <delete id="deleteByMemberId" parameterType="long">
        DELETE FROM board WHERE member_id = #{memberId}
    </delete>
</mapper>
````

## File: src/main/java/com/example/carelink/controller/BoardController.java
````java
package com.example.carelink.controller;
import com.example.carelink.common.PageInfo;
import com.example.carelink.common.Constants;
import com.example.carelink.dto.BoardDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.service.BoardService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
@Slf4j
@Controller
@RequestMapping("/board")
@RequiredArgsConstructor
public class BoardController {
    private final BoardService boardService;
    private final Map<String, Map<String, String>> boardTypeInfo = Map.of(
        "notice", Map.of("title", "ê³µì§€ì‚¬í•­", "description", "ì¤‘ìš”í•œ ê³µì§€ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”", "category", "NOTICE"),
        "info", Map.of("title", "ì •ë³´ê³µìœ ", "description", "ìœ ìš©í•œ ì •ë³´ë¥¼ ê³µìœ í•˜ê³  í•¨ê»˜ ë‚˜ëˆ„ì„¸ìš”", "category", "INFO"),
        "qna", Map.of("title", "Q&A", "description", "ê¶ê¸ˆí•œ ì ì„ ì§ˆë¬¸í•˜ê³  ë‹µë³€ì„ ë°›ì•„ë³´ì„¸ìš”", "category", "QNA"),
        "faq", Map.of("title", "ìì£¼ë¬»ëŠ”ì§ˆë¬¸", "description", "ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ê³¼ ë‹µë³€ì„ í™•ì¸í•˜ì„¸ìš”", "category", "FAQ"),
        "all", Map.of("title", "ì „ì²´ ê²Œì‹œíŒ", "description", "ëª¨ë“  ê²Œì‹œíŒì˜ ê¸€ì„ í•œë²ˆì— í™•ì¸í•˜ì„¸ìš”", "category", "")
    );
    /**
     * ê²Œì‹œíŒ ëª©ë¡ í˜ì´ì§€ (íƒ€ì…ë³„ êµ¬ë¶„ ì§€ì›)
     */
    @GetMapping
    public String listPage(Model model,
                          @RequestParam(defaultValue = "1") int page,
                          @RequestParam(defaultValue = "") String keyword,
                          @RequestParam(defaultValue = "") String category,
                          @RequestParam(defaultValue = "all") String type,
                          HttpServletResponse response) {
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
        response.setHeader("Pragma", "no-cache");
        response.setDateHeader("Expires", 0);
        Map<String, String> currentBoardInfo = boardTypeInfo.getOrDefault(type, boardTypeInfo.get("all"));
        String actualCategory = currentBoardInfo.get("category");
        if (category.isEmpty() && !actualCategory.isEmpty()) {
            category = actualCategory;
        }
        try {
            PageInfo<BoardDTO> pageInfo = boardService.getBoardList(page, keyword, category);
            List<BoardDTO> popularBoards = boardService.getPopularBoardsByCategory(category);
            model.addAttribute("pageInfo", pageInfo);
            model.addAttribute("boardList", pageInfo.getList());
            model.addAttribute("popularBoards", popularBoards != null ? popularBoards : List.of());
            model.addAttribute("keyword", keyword != null ? keyword : "");
            model.addAttribute("category", category != null ? category : "");
            model.addAttribute("type", type);
            model.addAttribute("currentPage", page);
        } catch (Exception e) {
            model.addAttribute("pageInfo", new PageInfo<>(List.of(), page, 10, 0));
            model.addAttribute("boardList", List.of());
            model.addAttribute("popularBoards", List.of());
            model.addAttribute("keyword", keyword != null ? keyword : "");
            model.addAttribute("category", category != null ? category : "");
            model.addAttribute("type", type);
            model.addAttribute("currentPage", page);
            model.addAttribute("error", "ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
        }
        model.addAttribute("boardTitle", currentBoardInfo.get("title"));
        model.addAttribute("boardDescription", currentBoardInfo.get("description"));
        model.addAttribute("pageTitle", currentBoardInfo.get("title"));
        if ("faq".equals(type)) {
            return "board/faq-list";
        } else if ("notice".equals(type)) {
            return "board/notice-list";
        } else if ("qna".equals(type)) {
            return "board/qna-list";
        }
        return "board/list";
    }
    @GetMapping("/write")
    public String writePage(Model model,
                          @RequestParam(defaultValue = "all") String type,
                          @RequestParam(required = false) String qaType,
                          HttpSession session,
                          RedirectAttributes redirectAttributes) {
        Long memberId = (Long) session.getAttribute("memberId");
        if (memberId == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        MemberDTO loginMember = (MemberDTO) session.getAttribute("loginMember");
        if (("notice".equals(type) || "faq".equals(type)) &&
            (loginMember == null || !"ADMIN".equals(loginMember.getRole()))) {
            redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ê²Œì‹œíŒì— ê¸€ì„ ì‘ì„±í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
            return "redirect:/board?type=" + type;
        }
        if ("qna".equals(type) && "ANSWER".equals(qaType) &&
            (loginMember == null || !"ADMIN".equals(loginMember.getRole()))) {
            redirectAttributes.addFlashAttribute("error", "ë‹µë³€í•˜ê¸°ëŠ” ê´€ë¦¬ìë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
            return "redirect:/board?type=" + type;
        }
        BoardDTO boardDTO = new BoardDTO();
        boardDTO.setMemberId(memberId);
        Map<String, String> currentBoardInfo = boardTypeInfo.getOrDefault(type, boardTypeInfo.get("all"));
        String defaultCategory = currentBoardInfo.get("category");
        if (!defaultCategory.isEmpty()) {
            boardDTO.setCategory(defaultCategory);
        }
        if ("qna".equals(type) && qaType != null) {
            boardDTO.setQaType(qaType);
            if ("QUESTION".equals(qaType)) {
                boardDTO.setIsAnswered(false);
                boardDTO.setAnswerCount(0);
            }
        }
        model.addAttribute("boardDTO", boardDTO);
        model.addAttribute("type", type);
        model.addAttribute("qaType", qaType);
        model.addAttribute("boardTitle", currentBoardInfo.get("title"));
        String pageTitle = currentBoardInfo.get("title");
        if ("qna".equals(type) && qaType != null) {
            pageTitle += ("QUESTION".equals(qaType) ? " - ì§ˆë¬¸í•˜ê¸°" : " - ë‹µë³€í•˜ê¸°");
        } else {
            pageTitle += " ì‘ì„±";
        }
        model.addAttribute("pageTitle", pageTitle);
        if ("faq".equals(type)) {
            return "board/faq-write";
        } else if ("notice".equals(type)) {
            return "board/write";
        } else if ("qna".equals(type)) {
            return "board/write";
        } else if ("info".equals(type)) {
            return "board/write";
        }
        return "board/write";
    }
    @PostMapping("/write")
    public String writeBoard(@ModelAttribute BoardDTO boardDTO,
                           @RequestParam(defaultValue = "all") String type,
                           @RequestParam(required = false) String qaType,
                           HttpSession session,
                           RedirectAttributes redirectAttributes) {
        try {
            Long memberId = (Long) session.getAttribute("memberId");
            if (memberId == null) {
                redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
            MemberDTO loginMember = (MemberDTO) session.getAttribute("loginMember");
            if (("notice".equals(type) || "faq".equals(type)) &&
                (loginMember == null || !"ADMIN".equals(loginMember.getRole()))) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ê²Œì‹œíŒì— ê¸€ì„ ì‘ì„±í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/board?type=" + type;
            }
            if ("qna".equals(type) && "ANSWER".equals(qaType) &&
                (loginMember == null || !"ADMIN".equals(loginMember.getRole()))) {
                redirectAttributes.addFlashAttribute("error", "ë‹µë³€í•˜ê¸°ëŠ” ê´€ë¦¬ìë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
                return "redirect:/board?type=" + type;
            }
            boardDTO.setMemberId(memberId);
            if ("qna".equals(type) && qaType != null) {
                boardDTO.setQaType(qaType);
                if ("QUESTION".equals(qaType)) {
                    boardDTO.setIsAnswered(false);
                    boardDTO.setAnswerCount(0);
                } else if ("ANSWER".equals(qaType)) {
                    boardDTO.setIsAnswered(null);
                    boardDTO.setAnswerCount(null);
                }
            }
            if (boardDTO.getIsNotice() == null) {
                boardDTO.setIsNotice(false);
            }
            if (boardDTO.getIsSecret() == null) {
                boardDTO.setIsSecret(false);
            }
            if (boardDTO.getIsActive() == null) {
                boardDTO.setIsActive(true);
            }
            if (boardDTO.getIsDeleted() == null) {
                boardDTO.setIsDeleted(false);
            }
            boardService.insertBoard(boardDTO);
            String successMessage = "ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.";
            if ("qna".equals(type) && qaType != null) {
                successMessage = "QUESTION".equals(qaType) ? "ì§ˆë¬¸ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤." : "ë‹µë³€ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.";
            }
            redirectAttributes.addFlashAttribute("message", successMessage);
            if ("all".equals(type)) {
                return "redirect:/board";
            } else {
                return "redirect:/board?type=" + type;
            }
        } catch (Exception e) {
            redirectAttributes.addFlashAttribute("error", "ê²Œì‹œê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            String redirectUrl = "redirect:/board/write?type=" + type;
            if (qaType != null) {
                redirectUrl += "&qaType=" + qaType;
            }
            return redirectUrl;
        }
    }
    @GetMapping("/detail/{id}")
    public String detailPage(@PathVariable Long id,
                           @RequestParam(defaultValue = "all") String type,
                           @RequestParam(defaultValue = "1") int page,
                           Model model,
                           RedirectAttributes redirectAttributes) {
        try {
            BoardDTO board = boardService.getBoardById(id);
            boardService.incrementViewCount(id);
            BoardDTO prevBoard = boardService.getPreviousBoard(id);
            BoardDTO nextBoard = boardService.getNextBoard(id);
            model.addAttribute("board", board);
            model.addAttribute("prevBoard", prevBoard);
            model.addAttribute("nextBoard", nextBoard);
            model.addAttribute("type", type);
            model.addAttribute("page", page);
            model.addAttribute("pageTitle", board.getTitle());
            return "board/detail";
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸° ì˜¤ë¥˜ - boardId: {}", id, e);
            redirectAttributes.addFlashAttribute("error", "ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + e.getMessage());
            return "redirect:/board?type=" + type;
        }
    }
    @GetMapping("/edit/{id}")
    public String editPage(@PathVariable Long id,
                          @RequestParam(name = "type", required = false) String type,
                         HttpSession session,
                         Model model,
                         RedirectAttributes redirectAttributes) {
        try {
            Long memberId = (Long) session.getAttribute("memberId");
            if (memberId == null) {
                redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
            BoardDTO board = boardService.getBoardByIdIncludeDeleted(id);
            if (board == null) {
                redirectAttributes.addFlashAttribute("error", "ìˆ˜ì •í•  ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/board?type=" + (type != null ? type : "all");
            }
            if (board.getIsDeleted() != null && board.getIsDeleted()) {
                redirectAttributes.addFlashAttribute("error", "ì‚­ì œëœ ê²Œì‹œê¸€ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/board/detail/" + id + "?type=" + (type != null ? type : "all");
            }
            log.info("ìˆ˜ì • í˜ì´ì§€ ì ‘ê·¼ - ê²Œì‹œê¸€ ID: {}, ì‘ì„±ì ID: {}, ìš”ì²­ì ID: {}", id, board.getMemberId(), memberId);
            MemberDTO loginMember = (MemberDTO) session.getAttribute("loginMember");
            boolean isAdmin = loginMember != null && "ADMIN".equals(loginMember.getRole());
            boolean isAuthor = board.getMemberId().equals(memberId);
            if (("NOTICE".equals(board.getCategory()) || "FAQ".equals(board.getCategory())) && !isAdmin) {
                log.warn("ê¶Œí•œ ì—†ëŠ” ìˆ˜ì • ì‹œë„ - ê³µì§€ì‚¬í•­/FAQ ìˆ˜ì • ê¶Œí•œ ì—†ìŒ. ìš”ì²­ì: {}", memberId);
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/board/detail/" + id + "?type=" + (type != null ? type : "all");
            }
            if (!isAuthor && !isAdmin) {
                log.warn("ê¶Œí•œ ì—†ëŠ” ìˆ˜ì • ì‹œë„ - ê²Œì‹œê¸€ ì‘ì„±ì: {}, ìš”ì²­ì: {}", board.getMemberId(), memberId);
                redirectAttributes.addFlashAttribute("error", "ì‘ì„±ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return "redirect:/board/detail/" + id + "?type=" + (type != null ? type : "all");
            }
            Map<String, String> currentBoardInfo = boardTypeInfo.getOrDefault(type != null ? type : "all", boardTypeInfo.get("all"));
            model.addAttribute("boardDTO", board);
            model.addAttribute("type", type != null ? type : "all");
            model.addAttribute("boardTitle", currentBoardInfo.get("title"));
            model.addAttribute("pageTitle", currentBoardInfo.get("title") + " ìˆ˜ì •");
            return "board/edit";
        } catch (Exception e) {
            log.error("ìˆ˜ì • í˜ì´ì§€ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            redirectAttributes.addFlashAttribute("error", "ìˆ˜ì • í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return "redirect:/board?type=" + (type != null ? type : "all");
        }
    }
    @PostMapping("/edit/{id}")
    public String editBoard(@PathVariable Long id,
                          @ModelAttribute BoardDTO boardDTO,
                          @RequestParam(defaultValue = "all") String type,
                          HttpSession session,
                          RedirectAttributes redirectAttributes) {
        try {
            Long memberId = (Long) session.getAttribute("memberId");
            if (memberId == null) {
                redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
            BoardDTO existingBoard = boardService.getBoardByIdIncludeDeleted(id);
            if (existingBoard == null) {
                redirectAttributes.addFlashAttribute("error", "ìˆ˜ì •í•  ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return getRedirectUrl(type);
            }
            if (existingBoard.getIsDeleted() != null && existingBoard.getIsDeleted()) {
                redirectAttributes.addFlashAttribute("error", "ì‚­ì œëœ ê²Œì‹œê¸€ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return getRedirectUrl(type);
            }
            log.info("ìˆ˜ì • ìš”ì²­ - ê²Œì‹œê¸€ ID: {}, ì‘ì„±ì ID: {}, ìš”ì²­ì ID: {}", id, existingBoard.getMemberId(), memberId);
            MemberDTO loginMember = (MemberDTO) session.getAttribute("loginMember");
            boolean isAdmin = loginMember != null && "ADMIN".equals(loginMember.getRole());
            boolean isAuthor = existingBoard.getMemberId().equals(memberId);
            if (("NOTICE".equals(existingBoard.getCategory()) || "FAQ".equals(existingBoard.getCategory())) && !isAdmin) {
                log.warn("ê¶Œí•œ ì—†ëŠ” ìˆ˜ì • ì‹œë„ - ê³µì§€ì‚¬í•­/FAQ ìˆ˜ì • ê¶Œí•œ ì—†ìŒ. ìš”ì²­ì: {}", memberId);
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/board/detail/" + id + "?type=" + type;
            }
            if (!isAuthor && !isAdmin) {
                log.warn("ê¶Œí•œ ì—†ëŠ” ìˆ˜ì • ì‹œë„ - ê²Œì‹œê¸€ ì‘ì„±ì: {}, ìš”ì²­ì: {}", existingBoard.getMemberId(), memberId);
                redirectAttributes.addFlashAttribute("error", "ì‘ì„±ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return "redirect:/board/detail/" + id + "?type=" + type;
            }
            boardDTO.setBoardId(id);
            boardDTO.setMemberId(memberId);
            if (boardDTO.getIsNotice() == null) {
                boardDTO.setIsNotice(false);
            }
            if (boardDTO.getIsSecret() == null) {
                boardDTO.setIsSecret(false);
            }
            if (boardDTO.getIsActive() == null) {
                boardDTO.setIsActive(true);
            }
            if (boardDTO.getIsDeleted() == null) {
                boardDTO.setIsDeleted(false);
            }
            boardService.updateBoard(boardDTO);
            log.info("ìˆ˜ì • ì™„ë£Œ - ê²Œì‹œê¸€ ID: {}", id);
            redirectAttributes.addFlashAttribute("message", "âœ… ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return "redirect:/board/detail/" + id + "?type=" + type;
        } catch (Exception e) {
            log.error("ìˆ˜ì • ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            redirectAttributes.addFlashAttribute("error", "âŒ ê²Œì‹œê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return "redirect:/board/edit/" + id + "?type=" + type;
        }
    }
    @PostMapping("/delete/{id}")
    public String deleteBoard(@PathVariable Long id,
                             @RequestParam(name = "type", required = false) String type,
                            HttpSession session,
                            RedirectAttributes redirectAttributes) {
        try {
            log.info("ğŸš€ ì‚­ì œ ìš”ì²­ ì‹œì‘ - ê²Œì‹œê¸€ ID: {}", id);
            Long memberId = (Long) session.getAttribute("memberId");
            log.info("ğŸ” ì„¸ì…˜ í™•ì¸ - memberId: {}", memberId);
            if (memberId == null) {
                log.warn("âŒ ë¡œê·¸ì¸ ì•ˆë¨ - ì‚­ì œ ì‹¤íŒ¨");
                redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
            BoardDTO board = boardService.getBoardByIdIncludeDeleted(id);
            log.info("ğŸ” ê²Œì‹œê¸€ ì¡°íšŒ ê²°ê³¼ - board: {}", board != null ? "ì¡´ì¬í•¨" : "ì—†ìŒ");
            if (board == null) {
                log.warn("âŒ ê²Œì‹œê¸€ ì—†ìŒ - ì‚­ì œ ì‹¤íŒ¨");
                redirectAttributes.addFlashAttribute("error", "ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return getRedirectUrl(type);
            }
            log.info("ğŸ” ê¶Œí•œ ì²´í¬ - ê²Œì‹œê¸€ ì‘ì„±ì: {}, ìš”ì²­ì: {}", board.getMemberId(), memberId);
            log.info("ì‚­ì œ ìš”ì²­ - ê²Œì‹œê¸€ ID: {}, ì‘ì„±ì ID: {}, ìš”ì²­ì ID: {}", id, board.getMemberId(), memberId);
            MemberDTO loginMember = (MemberDTO) session.getAttribute("loginMember");
            boolean isAdmin = loginMember != null && "ADMIN".equals(loginMember.getRole());
            boolean isAuthor = board.getMemberId().equals(memberId);
            if (("NOTICE".equals(board.getCategory()) || "FAQ".equals(board.getCategory())) && !isAdmin) {
                log.warn("âŒ ê¶Œí•œ ì—†ëŠ” ì‚­ì œ ì‹œë„ - ê³µì§€ì‚¬í•­/FAQ ì‚­ì œ ê¶Œí•œ ì—†ìŒ. ìš”ì²­ì: {}", memberId);
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ê²Œì‹œê¸€ì„ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return getRedirectUrl(type);
            }
            if (!isAuthor && !isAdmin) {
                log.warn("âŒ ê¶Œí•œ ì—†ëŠ” ì‚­ì œ ì‹œë„ - ê²Œì‹œê¸€ ì‘ì„±ì: {}, ìš”ì²­ì: {}", board.getMemberId(), memberId);
                redirectAttributes.addFlashAttribute("error", "ì‘ì„±ìë§Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return getRedirectUrl(type);
            }
            log.info("âœ… ê¶Œí•œ ì²´í¬ í†µê³¼ - ì‚­ì œ ì§„í–‰");
            Map<String, Object> deleteResult = boardService.deleteBoard(id);
            Boolean success = (Boolean) deleteResult.get("success");
            String message = (String) deleteResult.get("message");
            log.info("ì‚­ì œ ê²°ê³¼ - ì„±ê³µ: {}, ë©”ì‹œì§€: {}", success, message);
            if (success) {
                redirectAttributes.addFlashAttribute("message", "âœ… " + message);
            } else {
                redirectAttributes.addFlashAttribute("error", "âŒ " + message);
            }
            return getRedirectUrl(type);
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ì‚­ì œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            redirectAttributes.addFlashAttribute("error", "âŒ ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return getRedirectUrl(type);
        }
    }
    private String getRedirectUrl(String type) {
        if ("all".equals(type)) {
            return "redirect:/board";
        } else {
            return "redirect:/board?type=" + type;
        }
    }
    @PostMapping("/like/{id}")
    @ResponseBody
    public Map<String, Object> toggleLike(@PathVariable Long id,
                                        @RequestParam String action) {
        Map<String, Object> result = new HashMap<>();
        try {
            if ("like".equals(action)) {
                boardService.incrementLikeCount(id);
                result.put("success", true);
                result.put("message", "ì¶”ì²œë˜ì—ˆìŠµë‹ˆë‹¤.");
            } else if ("dislike".equals(action)) {
                boardService.decrementLikeCount(id);
                result.put("success", true);
                result.put("message", "ì¶”ì²œì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.");
            }
        } catch (Exception e) {
            result.put("success", false);
            result.put("message", "ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return result;
    }
    @GetMapping("/debug/board/{id}")
    @ResponseBody
    public Map<String, Object> debugBoardStatus(@PathVariable Long id) {
        Map<String, Object> result = new HashMap<>();
        try {
            log.info("ğŸ”§ ë””ë²„ê·¸ API í˜¸ì¶œ - boardId: {}", id);
            BoardDTO board = boardService.getBoardByIdIncludeDeleted(id);
            if (board == null) {
                result.put("error", "ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
                log.warn("ğŸ”§ ë””ë²„ê·¸ - ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ: {}", id);
                return result;
            }
            result.put("boardId", board.getBoardId());
            result.put("title", board.getTitle());
            result.put("isDeleted", board.getIsDeleted());
            result.put("isDeletedType", board.getIsDeleted() != null ? board.getIsDeleted().getClass().getSimpleName() : "null");
            result.put("isDeletedValue", board.getIsDeleted() != null ? board.getIsDeleted().toString() : "null");
            result.put("isActive", board.getIsActive());
            result.put("isActiveType", board.getIsActive() != null ? board.getIsActive().getClass().getSimpleName() : "null");
            result.put("createdAt", board.getCreatedAt());
            boolean wouldBeDeleted = board.getIsDeleted() != null && board.getIsDeleted();
            result.put("wouldBeConsideredDeleted", wouldBeDeleted);
            log.info("ğŸ”§ ë””ë²„ê·¸ ê²°ê³¼ - boardId: {}, isDeleted: {}, wouldBeDeleted: {}",
                id, board.getIsDeleted(), wouldBeDeleted);
            return result;
        } catch (Exception e) {
            log.error("ğŸ”§ ë””ë²„ê·¸ API ì˜¤ë¥˜ - boardId: {}", id, e);
            result.put("error", "ì˜¤ë¥˜ ë°œìƒ: " + e.getMessage());
            return result;
        }
    }
    private MemberDTO getCurrentMember(HttpSession session) {
        return (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
    }
    private Long getCurrentMemberId(HttpSession session) {
        return (Long) session.getAttribute("memberId");
    }
    private boolean isAdmin(HttpSession session) {
        MemberDTO loginMember = getCurrentMember(session);
        return loginMember != null && "ADMIN".equals(loginMember.getRole());
    }
    private boolean hasEditPermission(HttpSession session, Long authorMemberId) {
        Long currentMemberId = getCurrentMemberId(session);
        return (currentMemberId != null && currentMemberId.equals(authorMemberId)) || isAdmin(session);
    }
}
````

## File: src/main/java/com/example/carelink/controller/ReviewController.java
````java
package com.example.carelink.controller;
import com.example.carelink.common.PageInfo;
import com.example.carelink.common.Constants;
import com.example.carelink.dto.ReviewDTO;
import com.example.carelink.dto.FacilityDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.service.ReviewService;
import com.example.carelink.service.FacilityService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;
import javax.servlet.http.HttpSession;
import java.util.List;
import java.util.Map;
import java.util.HashMap;
@Slf4j
@Controller
@RequestMapping("/review")
@RequiredArgsConstructor
public class ReviewController {
    private final ReviewService reviewService;
    private final FacilityService facilityService;
    @GetMapping
    public String listPage(Model model,
                          @RequestParam(defaultValue = "1") int page,
                          @RequestParam(defaultValue = "") String keyword,
                          @RequestParam(required = false) Integer minRating,
                          @RequestParam(required = false) Long facilityId) {
        try {
            log.info("ë¦¬ë·° ëª©ë¡ í˜ì´ì§€ ì ‘ì† - page: {}, keyword: {}, minRating: {}, facilityId: {}",
                    page, keyword, minRating, facilityId);
            PageInfo<ReviewDTO> pageInfo = reviewService.getReviewList(page, keyword, minRating, facilityId);
            model.addAttribute("pageInfo", pageInfo);
            model.addAttribute("reviewList", pageInfo.getList());
            model.addAttribute("keyword", keyword != null ? keyword : "");
            model.addAttribute("minRating", minRating);
            model.addAttribute("facilityId", facilityId);
            model.addAttribute("currentPage", page);
            model.addAttribute("pageTitle", "ì‹œì„¤ ë¦¬ë·°");
            if (facilityId != null) {
                try {
                    FacilityDTO facility = facilityService.getFacilityById(facilityId);
                    model.addAttribute("selectedFacility", facility);
                    model.addAttribute("pageTitle", facility.getFacilityName() + " ë¦¬ë·°");
                } catch (Exception e) {
                    log.warn("ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨ - facilityId: {}", facilityId, e);
                }
            }
            return "review/list";
        } catch (Exception e) {
            log.error("ë¦¬ë·° ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            model.addAttribute("pageInfo", new PageInfo<>(List.of(), page, 10, 0));
            model.addAttribute("reviewList", List.of());
            model.addAttribute("keyword", keyword != null ? keyword : "");
            model.addAttribute("minRating", minRating);
            model.addAttribute("facilityId", facilityId);
            model.addAttribute("currentPage", page);
            model.addAttribute("error", "ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return "review/list";
        }
    }
    @GetMapping("/write")
    public String writePage(Model model,
                           @RequestParam(required = false) Long facilityId,
                           HttpSession session,
                           RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            log.warn("ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìì˜ ë¦¬ë·° ì‘ì„± í˜ì´ì§€ ì ‘ì† ì‹œë„");
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        try {
            log.info("ë¦¬ë·° ì‘ì„± í˜ì´ì§€ ì ‘ì† - facilityId: {}", facilityId);
            ReviewDTO reviewDTO = new ReviewDTO();
            List<FacilityDTO> facilityList = facilityService.getAllActiveFacilities();
            log.info("í™œì„±í™”ëœ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", facilityList.size());
            if (facilityId != null) {
                FacilityDTO selectedFacility = facilityService.getFacilityById(facilityId);
                if (selectedFacility != null) {
                    log.info("ì„ íƒëœ ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì„±ê³µ - facilityId: {}, facilityName: {}, status: {}",
                            facilityId, selectedFacility.getFacilityName(), selectedFacility.getStatus());
                    if ("ì‚­ì œë¨".equals(selectedFacility.getStatus())) {
                        model.addAttribute("error", "ì„ íƒí•˜ì‹  ì‹œì„¤ì€ ì‚­ì œë˜ì–´ ë¦¬ë·°ë¥¼ ì‘ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                    } else if ("ìŠ¹ì¸ëŒ€ê¸°".equals(selectedFacility.getStatus())) {
                        model.addAttribute("error", "ì„ íƒí•˜ì‹  ì‹œì„¤ì€ ì•„ì§ ìŠ¹ì¸ë˜ì§€ ì•Šì•„ ë¦¬ë·°ë¥¼ ì‘ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                    } else {
                        reviewDTO.setFacilityId(facilityId);
                        model.addAttribute("selectedFacility", selectedFacility);
                    }
                } else {
                    log.warn("ì„ íƒëœ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ - facilityId: {}", facilityId);
                    model.addAttribute("error", "ì„ íƒí•˜ì‹  ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                }
            }
            model.addAttribute("reviewDTO", reviewDTO);
            model.addAttribute("facilityList", facilityList);
            model.addAttribute("pageTitle", "ë¦¬ë·° ì‘ì„±");
            return "review/write";
        } catch (Exception e) {
            log.error("ë¦¬ë·° ì‘ì„± í˜ì´ì§€ ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            model.addAttribute("error", "ë¦¬ë·° ì‘ì„± í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return "review/write";
        }
    }
    @PostMapping("/write")
    public String writeReview(@ModelAttribute ReviewDTO reviewDTO,
                             HttpSession session,
                             RedirectAttributes redirectAttributes) {
        try {
            log.info("ë¦¬ë·° ë“±ë¡ ìš”ì²­ - title: {}, facilityId: {}", reviewDTO.getTitle(), reviewDTO.getFacilityId());
            MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (loginMember == null) {
                log.warn("ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìì˜ ë¦¬ë·° ì‘ì„± ì‹œë„");
                redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
            reviewDTO.setMemberId(loginMember.getMemberId());
            log.info("ë¦¬ë·° ì‘ì„±ì ì„¤ì • - memberId: {}, userId: {}", loginMember.getMemberId(), loginMember.getUserId());
            if (reviewDTO.getFacilityId() == null) {
                log.warn("ì‹œì„¤ì´ ì„ íƒë˜ì§€ ì•ŠìŒ");
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/write";
            }
            FacilityDTO facility = facilityService.getFacilityById(reviewDTO.getFacilityId());
            if (facility == null) {
                log.warn("ì„ íƒëœ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ - facilityId: {}", reviewDTO.getFacilityId());
                redirectAttributes.addFlashAttribute("error", "ì„ íƒí•œ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/write";
            }
            if (!facilityService.validateFacilityStatus(facility)) {
                log.warn("ìœ íš¨í•˜ì§€ ì•Šì€ ì‹œì„¤ ìƒíƒœ - facilityId: {}, status: {}",
                        facility.getFacilityId(), facility.getStatus());
                redirectAttributes.addFlashAttribute("error", facility.getStatusMessage());
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/write";
            }
            log.info("ì‹œì„¤ ì •ë³´ í™•ì¸ ì™„ë£Œ - facilityId: {}, facilityName: {}, status: {}",
                    facility.getFacilityId(), facility.getFacilityName(), facility.getStatus());
            if (reviewDTO.getTitle() == null || reviewDTO.getTitle().trim().isEmpty()) {
                log.warn("ì œëª©ì´ ì…ë ¥ë˜ì§€ ì•ŠìŒ");
                redirectAttributes.addFlashAttribute("error", "ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/write?facilityId=" + reviewDTO.getFacilityId();
            }
            if (reviewDTO.getContent() == null || reviewDTO.getContent().trim().length() < 10) {
                log.warn("ë‚´ìš©ì´ 10ì ë¯¸ë§Œì„");
                redirectAttributes.addFlashAttribute("error", "ë‚´ìš©ì„ 10ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/write?facilityId=" + reviewDTO.getFacilityId();
            }
            if (reviewDTO.getRating() == null || reviewDTO.getRating() < 1 || reviewDTO.getRating() > 5) {
                log.warn("í‰ì ì´ ìœ íš¨í•˜ì§€ ì•ŠìŒ - rating: {}", reviewDTO.getRating());
                redirectAttributes.addFlashAttribute("error", "í‰ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/write?facilityId=" + reviewDTO.getFacilityId();
            }
            reviewService.insertReview(reviewDTO);
            log.info("ë¦¬ë·° ë“±ë¡ ì„±ê³µ - reviewId: {}", reviewDTO.getReviewId());
            redirectAttributes.addFlashAttribute("message", "ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return "redirect:/review";
        } catch (Exception e) {
            log.error("ë¦¬ë·° ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            redirectAttributes.addFlashAttribute("error", "ë¦¬ë·° ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
            return "redirect:/review/write?facilityId=" + reviewDTO.getFacilityId();
        }
    }
    @GetMapping("/detail/{id}")
    public String detailPage(@PathVariable Long id, Model model, HttpSession session) {
        try {
            ReviewDTO review = reviewService.getReviewById(id);
            if (review == null) {
                model.addAttribute("error", "ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/review";
            }
            reviewService.incrementViewCount(id);
            List<ReviewDTO> otherReviews = reviewService.getReviewsByFacilityId(review.getFacilityId())
                    .stream()
                    .filter(r -> !r.getReviewId().equals(id))
                    .limit(5)
                    .collect(java.util.stream.Collectors.toList());
            model.addAttribute("review", review);
            model.addAttribute("otherReviews", otherReviews);
            model.addAttribute("pageTitle", review.getTitle());
            model.addAttribute("currentMemberId", getCurrentMemberId(session));
            return "review/detail";
        } catch (Exception e) {
            log.error("ë¦¬ë·° ìƒì„¸ë³´ê¸° ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            model.addAttribute("error", "ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + e.getMessage());
            return "redirect:/review";
        }
    }
    @GetMapping("/edit/{id}")
    public String editPage(@PathVariable Long id, Model model, HttpSession session, RedirectAttributes redirectAttributes) {
        try {
            ReviewDTO review = reviewService.getReviewById(id);
            if (review == null) {
                redirectAttributes.addFlashAttribute("error", "ìˆ˜ì •í•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/review";
            }
            if (!hasEditPermission(session, review.getMemberId())) {
                redirectAttributes.addFlashAttribute("error", "ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return "redirect:/review/detail/" + id;
            }
            model.addAttribute("reviewDTO", review);
            model.addAttribute("pageTitle", "ë¦¬ë·° ìˆ˜ì •");
            return "review/edit";
        } catch (Exception e) {
            log.error("ë¦¬ë·° ìˆ˜ì • í˜ì´ì§€ ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            redirectAttributes.addFlashAttribute("error", "ìˆ˜ì • í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return "redirect:/review";
        }
    }
    @PostMapping("/update")
    public String updateReview(@ModelAttribute ReviewDTO reviewDTO, HttpSession session, RedirectAttributes redirectAttributes) {
        try {
            log.info("ë¦¬ë·° ìˆ˜ì • ìš”ì²­ - reviewId: {}, title: {}", reviewDTO.getReviewId(), reviewDTO.getTitle());
            ReviewDTO existingReview = reviewService.getReviewById(reviewDTO.getReviewId());
            if (existingReview == null) {
                redirectAttributes.addFlashAttribute("error", "ìˆ˜ì •í•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/review";
            }
            if (!hasEditPermission(session, existingReview.getMemberId())) {
                redirectAttributes.addFlashAttribute("error", "ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return "redirect:/review/detail/" + reviewDTO.getReviewId();
            }
            if (reviewDTO.getTitle() == null || reviewDTO.getTitle().trim().isEmpty()) {
                redirectAttributes.addFlashAttribute("error", "ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/edit/" + reviewDTO.getReviewId();
            }
            if (reviewDTO.getContent() == null || reviewDTO.getContent().trim().length() < 10) {
                redirectAttributes.addFlashAttribute("error", "ë‚´ìš©ì„ 10ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/edit/" + reviewDTO.getReviewId();
            }
            if (reviewDTO.getRating() == null || reviewDTO.getRating() < 1 || reviewDTO.getRating() > 5) {
                redirectAttributes.addFlashAttribute("error", "í‰ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/edit/" + reviewDTO.getReviewId();
            }
            reviewDTO.setFacilityId(existingReview.getFacilityId());
            reviewDTO.setMemberId(existingReview.getMemberId());
            reviewDTO.setViewCount(existingReview.getViewCount());
            reviewDTO.setLikeCount(existingReview.getLikeCount());
            reviewDTO.setDislikeCount(existingReview.getDislikeCount());
            reviewDTO.setCreatedAt(existingReview.getCreatedAt());
            reviewService.updateReview(reviewDTO);
            log.info("ë¦¬ë·° ìˆ˜ì • ì„±ê³µ - reviewId: {}", reviewDTO.getReviewId());
            redirectAttributes.addFlashAttribute("message", "ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return "redirect:/review/detail/" + reviewDTO.getReviewId();
        } catch (Exception e) {
            log.error("ë¦¬ë·° ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", reviewDTO.getReviewId(), e);
            redirectAttributes.addFlashAttribute("error", "ë¦¬ë·° ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
            return "redirect:/review/edit/" + reviewDTO.getReviewId();
        }
    }
    @PostMapping("/delete/{id}")
    public String deleteReview(@PathVariable Long id, HttpSession session, RedirectAttributes redirectAttributes) {
        try {
            ReviewDTO existingReview = reviewService.getReviewById(id);
            if (existingReview == null) {
                redirectAttributes.addFlashAttribute("error", "ì‚­ì œí•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/review";
            }
            if (!hasEditPermission(session, existingReview.getMemberId())) {
                redirectAttributes.addFlashAttribute("error", "ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return "redirect:/review/detail/" + id;
            }
            reviewService.deleteReview(id);
            redirectAttributes.addFlashAttribute("message", "ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
        } catch (Exception e) {
            log.error("ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            redirectAttributes.addFlashAttribute("error", "ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
        }
        return "redirect:/review";
    }
    @PostMapping("/report/{id}")
    @ResponseBody
    public Map<String, Object> reportReview(@PathVariable Long id, @RequestBody Map<String, String> request, HttpSession session) {
        Map<String, Object> result = new HashMap<>();
        try {
            String reason = request.get("reason");
            if (reason == null || reason.trim().isEmpty()) {
                result.put("success", false);
                result.put("message", "ì‹ ê³  ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return result;
            }
            ReviewDTO review = reviewService.getReviewById(id);
            if (review == null) {
                result.put("success", false);
                result.put("message", "ì‹ ê³ í•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            Long currentMemberId = getCurrentMemberId(session);
            if (review.getMemberId().equals(currentMemberId)) {
                result.put("success", false);
                result.put("message", "ë³¸ì¸ì´ ì‘ì„±í•œ ë¦¬ë·°ëŠ” ì‹ ê³ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            log.info("ë¦¬ë·° ì‹ ê³  ì ‘ìˆ˜ - reviewId: {}, reason: {}, reporter: {}", id, reason, currentMemberId);
            result.put("success", true);
            result.put("message", "ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ê²€í†  í›„ ì ì ˆí•œ ì¡°ì¹˜ë¥¼ ì·¨í•˜ê² ìŠµë‹ˆë‹¤.");
        } catch (Exception e) {
            log.error("ë¦¬ë·° ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            result.put("success", false);
            result.put("message", "ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return result;
    }
    @PostMapping("/view/{id}")
    @ResponseBody
    public Map<String, Object> incrementViewCount(@PathVariable Long id) {
        Map<String, Object> result = new HashMap<>();
        try {
            reviewService.incrementViewCount(id);
            result.put("success", true);
        } catch (Exception e) {
            log.error("ì¡°íšŒìˆ˜ ì¦ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            result.put("success", false);
            result.put("message", "ì¡°íšŒìˆ˜ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return result;
    }
    @GetMapping("/api/facility/{facilityId}")
    @ResponseBody
    public Map<String, Object> getReviewsByFacility(@PathVariable Long facilityId,
                                                   @RequestParam(defaultValue = "1") int page) {
        Map<String, Object> result = new HashMap<>();
        try {
            List<ReviewDTO> reviews = reviewService.getReviewsByFacilityId(facilityId);
            Double averageRating = reviewService.getAverageRating(facilityId);
            result.put("success", true);
            result.put("reviews", reviews);
            result.put("averageRating", averageRating);
            result.put("reviewCount", reviews.size());
        } catch (Exception e) {
            result.put("success", false);
            result.put("message", "ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return result;
    }
    @PostMapping("/like/{id}")
    @ResponseBody
    public Map<String, Object> likeReview(@PathVariable Long id) {
        Map<String, Object> result = new HashMap<>();
        try {
            reviewService.likeReview(id);
            ReviewDTO review = reviewService.getReviewById(id);
            result.put("success", true);
            result.put("likeCount", review.getLikeCount());
            result.put("message", "ì¶”ì²œí•˜ì˜€ìŠµë‹ˆë‹¤.");
        } catch (Exception e) {
            result.put("success", false);
            result.put("message", "ì¶”ì²œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return result;
    }
    @PostMapping("/dislike/{id}")
    @ResponseBody
    public Map<String, Object> dislikeReview(@PathVariable Long id) {
        Map<String, Object> result = new HashMap<>();
        try {
            reviewService.dislikeReview(id);
            ReviewDTO review = reviewService.getReviewById(id);
            result.put("success", true);
            result.put("dislikeCount", review.getDislikeCount());
            result.put("message", "ë¹„ì¶”ì²œí•˜ì˜€ìŠµë‹ˆë‹¤.");
        } catch (Exception e) {
            result.put("success", false);
            result.put("message", "ë¹„ì¶”ì²œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return result;
    }
    private Long getCurrentMemberId(HttpSession session) {
        return (Long) session.getAttribute("memberId");
    }
    private boolean isAdmin(HttpSession session) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        return loginMember != null && "ADMIN".equals(loginMember.getRole());
    }
    private boolean hasEditPermission(HttpSession session, Long authorMemberId) {
        Long currentMemberId = getCurrentMemberId(session);
        return (currentMemberId != null && currentMemberId.equals(authorMemberId)) || isAdmin(session);
    }
}
````

## File: src/main/java/com/example/carelink/dto/FacilityDTO.java
````java
package com.example.carelink.dto;
import com.example.carelink.common.BaseDTO;
import lombok.Data;
import lombok.EqualsAndHashCode;
import lombok.NoArgsConstructor;
import lombok.AllArgsConstructor;
@Data
@EqualsAndHashCode(callSuper = true)
@NoArgsConstructor
@AllArgsConstructor
public class FacilityDTO extends BaseDTO {
    private Long facilityId;
    private String facilityName;
    private String facilityType;
    private String address;
    private String detailAddress;
    private String phone;
    private Double longitude;
    private Double latitude;
    private String description;
    private String facilityImage;
    private String facilityImageAltText;
    private String homepage;
    private Integer capacity;
    private Integer currentOccupancy;
    private String operatingHours;
    private String features;
    private Boolean isApproved;
    private Boolean isDeleted;
    private String approvalStatus;
    private String rejectionReason;
    private Long registeredMemberId;
    private String registeredMemberName;
    private String registeredUserName;
    private Double averageRating;
    private Integer reviewCount;
    private Integer gradeRating;
    private String region;
    private Double swLat;
    private Double swLng;
    private Double neLat;
    private Double neLng;
    private String status;
    public boolean isNormalStatus() {
        return "ì •ìƒ".equals(status);
    }
    public boolean isDeletedStatus() {
        return "ì‚­ì œë¨".equals(status);
    }
    public boolean isPendingStatus() {
        return "ìŠ¹ì¸ëŒ€ê¸°".equals(status);
    }
    public String getStatusMessage() {
        if (isDeletedStatus()) {
            return "ì‚­ì œëœ ì‹œì„¤ì…ë‹ˆë‹¤.";
        } else if (isPendingStatus()) {
            return "ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ì‹œì„¤ì…ë‹ˆë‹¤.";
        }
        return "";
    }
}
````

## File: src/main/java/com/example/carelink/dto/MemberDTO.java
````java
package com.example.carelink.dto;
import com.example.carelink.common.BaseDTO;
import com.example.carelink.validation.groups.OnFacilityJoin;
import lombok.Data;
import lombok.EqualsAndHashCode;
import org.springframework.web.multipart.MultipartFile;
import javax.validation.constraints.Email;
import javax.validation.constraints.NotBlank;
import javax.validation.constraints.Pattern;
import javax.validation.constraints.Size;
@Data
@EqualsAndHashCode(callSuper = true)
public class MemberDTO extends BaseDTO {
    private Long memberId;
    @NotBlank(message = "ì‚¬ìš©ì IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.")
    @Pattern(regexp = "^[a-zA-Z0-9]{4,20}$", message = "ì‚¬ìš©ì IDëŠ” 4-20ìì˜ ì˜ë¬¸, ìˆ«ìë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.")
    private String userId;
    @NotBlank(message = "ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.")
    @Pattern(regexp = "^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d@$!%*#?&]{8,20}$",
            message = "ë¹„ë°€ë²ˆí˜¸ëŠ” 8-20ìì˜ ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ 1ê°œ ì´ìƒ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.")
    private String password;
    @NotBlank(message = "ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.")
    @Size(max = 50, message = "ì´ë¦„ì€ 50ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
    private String name;
    @NotBlank(message = "ì´ë©”ì¼ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.")
    @Email(message = "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
    @Size(max = 100, message = "ì´ë©”ì¼ì€ 100ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
    private String email;
    @Pattern(regexp = "^$|^01(?:0|1|[6-9])-(?:\\d{3}|\\d{4})-\\d{4}$",
            message = "ì˜¬ë°”ë¥¸ íœ´ëŒ€í° ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
    private String phone;
    private String role;
    @NotBlank(message = "ì‹œì„¤ ì£¼ì†ŒëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.", groups = OnFacilityJoin.class)
    private String address;
    private String profileImage;
    private String profileImageAltText;
    private String facilityName;
    private String facilityType;
    private String facilityAddress;
    private String detailAddress;
    private String facilityPhone;
    private String description;
    private String homepage;
    private Integer capacity;
    private String operatingHours;
    private String features;
    private Double latitude;
    private Double longitude;
    private Boolean isActive;
    private Boolean isDeleted;
    private transient String passwordConfirm;
    private int loginFailCount;
    private java.time.LocalDateTime lastLoginAt;
    private transient MultipartFile profileImageFile;
}
````

## File: src/main/java/com/example/carelink/service/FacilityImageService.java
````java
package com.example.carelink.service;
import com.example.carelink.dao.FacilityImageMapper;
import com.example.carelink.dao.FacilityMapper;
import com.example.carelink.dto.FacilityImageDTO;
import com.example.carelink.common.Constants;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.web.multipart.MultipartFile;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.UUID;
@Service
public class FacilityImageService {
    private final FacilityImageMapper facilityImageMapper;
    private final FacilityMapper facilityMapper;
    private static final Logger log = LoggerFactory.getLogger(FacilityImageService.class);
    @Autowired
    public FacilityImageService(FacilityImageMapper facilityImageMapper, FacilityMapper facilityMapper) {
        this.facilityImageMapper = facilityImageMapper;
        this.facilityMapper = facilityMapper;
    }
    @Transactional(readOnly = true)
    public List<FacilityImageDTO> getImagesByFacilityId(Long facilityId) {
        log.info("ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - facilityId: {}", facilityId);
        List<FacilityImageDTO> images = facilityImageMapper.getImagesByFacilityId(facilityId);
        log.info("ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - facilityId: {}, ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, images.size());
        return images;
    }
    @Transactional(readOnly = true)
    public FacilityImageDTO getMainImageByFacilityId(Long facilityId) {
        log.info("ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ - facilityId: {}", facilityId);
        return facilityImageMapper.getMainImageByFacilityId(facilityId);
    }
    @Transactional
    public void saveFacilityImages(Long facilityId, List<MultipartFile> imageFiles, List<String> altTexts) {
        try {
            log.info("ğŸ“¸ ë‹¤ì¤‘ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì‹œì‘ - facilityId: {}, ìš”ì²­ ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, imageFiles.size());
            int existingImageCount = facilityImageMapper.countImagesByFacilityId(facilityId);
            List<MultipartFile> validFiles = new ArrayList<>();
            for (MultipartFile file : imageFiles) {
                if (!file.isEmpty() && validFiles.size() + existingImageCount < Constants.MAX_FACILITY_IMAGES) {
                    validateImageFile(file);
                    validFiles.add(file);
                }
            }
            if (validFiles.isEmpty()) {
                throw new IllegalArgumentException("ì €ì¥í•  ìœ íš¨í•œ ì´ë¯¸ì§€ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.");
            }
            if (existingImageCount + validFiles.size() > Constants.MAX_FACILITY_IMAGES) {
                log.warn("âš ï¸ ì¼ë¶€ ì´ë¯¸ì§€ëŠ” 5ì¥ ì œí•œìœ¼ë¡œ ì¸í•´ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê¸°ì¡´: {}ì¥, ìš”ì²­: {}ì¥, ì €ì¥ ê°€ëŠ¥: {}ì¥",
                    existingImageCount, imageFiles.size(), validFiles.size());
            }
            log.info("ğŸ“Š ì´ë¯¸ì§€ ì €ì¥ ê³„íš - ê¸°ì¡´: {}ì¥, ìƒˆë¡œ ì €ì¥: {}ì¥, ì´: {}ì¥",
                existingImageCount, validFiles.size(), existingImageCount + validFiles.size());
            for (int i = 0; i < validFiles.size(); i++) {
                MultipartFile file = validFiles.get(i);
                String altText = (altTexts != null && i < altTexts.size()) ? altTexts.get(i) : null;
                String imagePath = saveImageFile(file, facilityId.toString(), existingImageCount + i);
                FacilityImageDTO imageDTO = new FacilityImageDTO();
                imageDTO.setFacilityId(facilityId);
                imageDTO.setImagePath(imagePath);
                imageDTO.setImageAltText(altText);
                imageDTO.setImageOrder(existingImageCount + i);
                imageDTO.setIsMainImage(existingImageCount == 0 && i == 0);
                facilityImageMapper.insertFacilityImage(imageDTO);
                log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ - order: {}, path: {}", existingImageCount + i, imagePath);
            }
            updateFacilityMainImageInfo(facilityId);
            log.info("ğŸ‰ ë‹¤ì¤‘ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ - facilityId: {}, ì´ {}ì¥ ì €ì¥", facilityId, validFiles.size());
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public FacilityImageDTO saveSingleFacilityImage(Long facilityId, MultipartFile imageFile, String altText, Integer imageOrder) {
        return saveSingleFacilityImage(facilityId, imageFile, altText, imageOrder, null);
    }
    @Transactional
    public FacilityImageDTO saveSingleFacilityImage(Long facilityId, MultipartFile imageFile, String altText, Integer imageOrder, String customFileName) {
        try {
            log.info("ğŸ“¸ ë‹¨ì¼ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì‹œì‘ - facilityId: {}, order: {}, customFileName: '{}'", facilityId, imageOrder, customFileName);
            if (imageFile.isEmpty()) {
                throw new IllegalArgumentException("ì—…ë¡œë“œëœ ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
            }
            int existingImageCount = facilityImageMapper.countImagesByFacilityId(facilityId);
            if (existingImageCount >= Constants.MAX_FACILITY_IMAGES) {
                throw new IllegalArgumentException(String.format("ì‹œì„¤ ì´ë¯¸ì§€ëŠ” ìµœëŒ€ %dì¥ê¹Œì§€ë§Œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì¬ %dì¥ ë“±ë¡ë¨",
                    Constants.MAX_FACILITY_IMAGES, existingImageCount));
            }
            validateImageFile(imageFile);
            String imagePath = saveImageFileWithCustomName(imageFile, facilityId.toString(),
                imageOrder != null ? imageOrder : existingImageCount, customFileName);
            FacilityImageDTO imageDTO = new FacilityImageDTO();
            imageDTO.setFacilityId(facilityId);
            imageDTO.setImagePath(imagePath);
            imageDTO.setImageAltText(altText);
            imageDTO.setImageOrder(imageOrder != null ? imageOrder : existingImageCount);
            imageDTO.setIsMainImage(existingImageCount == 0);
            facilityImageMapper.insertFacilityImage(imageDTO);
            log.info("âœ… facility_images í…Œì´ë¸”ì— ì €ì¥ ì™„ë£Œ - imageId: {}, path: {}, í˜„ì¬ ì´ {}ì¥",
                imageDTO.getImageId(), imagePath, existingImageCount + 1);
            updateFacilityMainImageInfo(facilityId);
            return imageDTO;
        } catch (Exception e) {
            log.error("âŒ ë‹¨ì¼ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    private void updateFacilityMainImageInfo(Long facilityId) {
        try {
            int imageCount = facilityImageMapper.countImagesByFacilityId(facilityId);
            FacilityImageDTO mainImage = facilityImageMapper.getMainImageByFacilityId(facilityId);
            String mainImagePath = mainImage != null ? mainImage.getImagePath() : null;
            log.info("ğŸ”„ ì‹œì„¤ í…Œì´ë¸” ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ ì‹œì‘ - facilityId: {}, imageCount: {}, mainImagePath: {}",
                    facilityId, imageCount, mainImagePath);
            int updateResult = facilityMapper.updateFacilityMainImage(facilityId, mainImagePath, imageCount);
            if (updateResult > 0) {
                log.info("âœ… ì‹œì„¤ í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì„±ê³µ - facilityId: {}, ì—…ë°ì´íŠ¸ëœ í–‰: {}", facilityId, updateResult);
            } else {
                log.warn("âš ï¸ ì‹œì„¤ í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ - facilityId: {}, ì—…ë°ì´íŠ¸ëœ í–‰: {}", facilityId, updateResult);
            }
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ í…Œì´ë¸” ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
            throw new RuntimeException("ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    private String saveImageFileWithCustomName(MultipartFile file, String facilityId, int index, String customFileName) {
        try {
            String uploadDir = Constants.FACILITY_UPLOAD_PATH;
            File uploadDirFile = new File(uploadDir);
            if (!uploadDirFile.exists()) {
                boolean created = uploadDirFile.mkdirs();
                log.info("ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} - {}", uploadDir, created ? "ì„±ê³µ" : "ì‹¤íŒ¨");
            }
            String originalFilename = file.getOriginalFilename();
            String extension = "";
            String baseName = "";
            if (originalFilename != null && originalFilename.contains(".")) {
                extension = originalFilename.substring(originalFilename.lastIndexOf("."));
                baseName = originalFilename.substring(0, originalFilename.lastIndexOf("."));
            } else if (originalFilename != null) {
                baseName = originalFilename;
                extension = ".jpg";
            }
            String finalFileName;
            if (customFileName != null && !customFileName.trim().isEmpty()) {
                String userFileName = customFileName.trim();
                String userBaseName = userFileName;
                String userExtension = extension;
                if (userFileName.contains(".")) {
                    userBaseName = userFileName.substring(0, userFileName.lastIndexOf("."));
                    userExtension = userFileName.substring(userFileName.lastIndexOf("."));
                }
                String englishBaseName = convertKoreanToEnglish(userBaseName);
                String cleanBaseName = sanitizeFilename(englishBaseName);
                finalFileName = String.format("facility_%s_%d_%s_%s%s",
                        facilityId, index, cleanBaseName,
                        UUID.randomUUID().toString().substring(0, 8), userExtension);
                log.info("ğŸ“ ì‚¬ìš©ì ì§€ì • íŒŒì¼ëª… ì ìš©: '{}' â†’ '{}'", customFileName, finalFileName);
            } else {
                return saveImageFile(file, facilityId, index);
            }
            File savedFile = new File(uploadDir + finalFileName);
            file.transferTo(savedFile);
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì™„ë£Œ: {}", savedFile.getAbsolutePath());
            return "/uploads/facility/" + finalFileName;
        } catch (IOException e) {
            log.error("ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}, index={}, customFileName={}", facilityId, index, customFileName, e);
            throw new RuntimeException("ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    private String saveImageFile(MultipartFile file, String facilityId, int index) {
        try {
            String uploadDir = Constants.FACILITY_UPLOAD_PATH;
            File uploadDirFile = new File(uploadDir);
            if (!uploadDirFile.exists()) {
                boolean created = uploadDirFile.mkdirs();
                log.info("ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} - {}", uploadDir, created ? "ì„±ê³µ" : "ì‹¤íŒ¨");
            }
            String originalFilename = file.getOriginalFilename();
            String extension = "";
            String baseName = "";
            if (originalFilename != null && originalFilename.contains(".")) {
                extension = originalFilename.substring(originalFilename.lastIndexOf("."));
                baseName = originalFilename.substring(0, originalFilename.lastIndexOf("."));
            } else if (originalFilename != null) {
                baseName = originalFilename;
            }
            // í•œê¸€ íŒŒì¼ëª…ì„ ì˜ë¬¸ìœ¼ë¡œ ë³€í™˜
            String englishBaseName = convertKoreanToEnglish(baseName);
            String cleanBaseName = sanitizeFilename(englishBaseName);
            // ìµœì¢… íŒŒì¼ëª… ìƒì„±
            String savedFilename;
            if (!cleanBaseName.isEmpty() && !cleanBaseName.equals("facility_image")) {
                savedFilename = String.format("facility_%s_%d_%s_%s%s",
                        facilityId, index, cleanBaseName, UUID.randomUUID().toString().substring(0, 8), extension);
            } else {
                savedFilename = String.format("facility_%s_%d_%s%s",
                        facilityId, index, UUID.randomUUID().toString(), extension);
            }
            log.info("ğŸ“ íŒŒì¼ëª… ë³€í™˜: '{}' â†’ '{}'", originalFilename, savedFilename);
            File savedFile = new File(uploadDir + savedFilename);
            file.transferTo(savedFile);
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì™„ë£Œ: {}", savedFile.getAbsolutePath());
            return "/uploads/facility/" + savedFilename;
        } catch (IOException e) {
            log.error("ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}, index={}", facilityId, index, e);
            throw new RuntimeException("ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public void updateMainImage(Long facilityId, Long imageId) {
        try {
            log.info("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ ì‹œì‘ - facilityId: {}, imageId: {}", facilityId, imageId);
            facilityImageMapper.clearMainImages(facilityId);
            int result = facilityImageMapper.updateMainImage(facilityId, imageId);
            if (result == 0) {
                throw new RuntimeException("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            }
            log.info("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ ì™„ë£Œ - facilityId: {}, imageId: {}", facilityId, imageId);
        } catch (Exception e) {
            log.error("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}, imageId: {}", facilityId, imageId, e);
            throw new RuntimeException("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public boolean deleteFacilityImage(Long imageId) {
        try {
            log.info("ğŸ—‘ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ì™„ì „ ì‚­ì œ ì‹œì‘ - imageId: {}", imageId);
            FacilityImageDTO imageToDelete = facilityImageMapper.getImageById(imageId);
            if (imageToDelete == null) {
                log.warn("âš ï¸ ì‚­ì œí•  ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ - imageId: {}", imageId);
                return false;
            }
            String imagePath = imageToDelete.getImagePath();
            log.info("ğŸ“ ì‚­ì œ ëŒ€ìƒ íŒŒì¼: {}", imagePath);
            int result = facilityImageMapper.deleteFacilityImage(imageId);
            boolean dbDeleteSuccess = result > 0;
            if (dbDeleteSuccess) {
                log.info("âœ… DBì—ì„œ ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - imageId: {}", imageId);
                boolean fileDeleteSuccess = deleteImageFile(imagePath);
                if (fileDeleteSuccess) {
                    log.info("âœ… íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - path: {}", imagePath);
                } else {
                    log.warn("âš ï¸ íŒŒì¼ ì‚­ì œ ì‹¤íŒ¨í•˜ì˜€ì§€ë§Œ DB ì‚­ì œëŠ” ì„±ê³µ - path: {}", imagePath);
                }
                return true;
            } else {
                log.warn("âŒ DBì—ì„œ ì´ë¯¸ì§€ ì‚­ì œ ì‹¤íŒ¨ - imageId: {} (ê²°ê³¼: {})", imageId, result);
                return false;
            }
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - imageId: {}", imageId, e);
            return false;
        }
    }
    private boolean deleteImageFile(String imagePath) {
        try {
            if (imagePath == null || imagePath.trim().isEmpty()) {
                log.warn("âš ï¸ ì‚­ì œí•  íŒŒì¼ ê²½ë¡œê°€ ë¹„ì–´ìˆìŒ");
                return false;
            }
            String actualFilePath;
            if (imagePath.startsWith("/uploads/facility/")) {
                String filename = imagePath.substring("/uploads/facility/".length());
                actualFilePath = Constants.FACILITY_UPLOAD_PATH + filename;
            } else {
                log.warn("âš ï¸ ì˜ˆìƒì¹˜ ëª»í•œ íŒŒì¼ ê²½ë¡œ í˜•ì‹: {}", imagePath);
                return false;
            }
            log.info("ğŸ” ì‹¤ì œ íŒŒì¼ ê²½ë¡œ: {}", actualFilePath);
            File fileToDelete = new File(actualFilePath);
            if (fileToDelete.exists()) {
                boolean deleted = fileToDelete.delete();
                if (deleted) {
                    log.info("âœ… íŒŒì¼ ì‚­ì œ ì„±ê³µ: {}", actualFilePath);
                    return true;
                } else {
                    log.error("âŒ íŒŒì¼ ì‚­ì œ ì‹¤íŒ¨: {}", actualFilePath);
                    return false;
                }
            } else {
                log.warn("âš ï¸ ì‚­ì œí•  íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ: {}", actualFilePath);
                return true;
            }
        } catch (Exception e) {
            log.error("âŒ íŒŒì¼ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - imagePath: {}", imagePath, e);
            return false;
        }
    }
    @Transactional(readOnly = true)
    public int getImageCountByFacilityId(Long facilityId) {
        return facilityImageMapper.countImagesByFacilityId(facilityId);
    }
    @Transactional
    public boolean setMainImage(Long facilityId, Long imageId) {
        try {
            log.info("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì‹œì‘ - facilityId: {}, imageId: {}", facilityId, imageId);
            facilityImageMapper.clearMainImages(facilityId);
            int result = facilityImageMapper.updateMainImage(facilityId, imageId);
            boolean success = result > 0;
            if (success) {
                log.info("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì™„ë£Œ - facilityId: {}, imageId: {}", facilityId, imageId);
            } else {
                log.warn("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì‹¤íŒ¨ - facilityId: {}, imageId: {} (ê²°ê³¼: {})", facilityId, imageId, result);
            }
            return success;
        } catch (Exception e) {
            log.error("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}, imageId: {}", facilityId, imageId, e);
            return false;
        }
    }
    @Transactional(readOnly = true)
    public FacilityImageDTO getImageById(Long imageId) {
        log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì¡°íšŒ - imageId: {}", imageId);
        return facilityImageMapper.getImageById(imageId);
    }
    @Transactional(readOnly = true)
    public List<FacilityImageDTO> getAllImages() {
        log.info("ëª¨ë“  ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ (ì„ì‹œ)");
        return java.util.Collections.emptyList();
    }
    private String convertKoreanToEnglish(String korean) {
        if (korean == null || korean.trim().isEmpty()) {
            return "facility_image";
        }
        String input = korean.toLowerCase().trim();
        String result = input;
        java.util.Map<String, String> koreanToEnglish = java.util.Map.ofEntries(
            java.util.Map.entry("ì‹œì„¤", "facility"),
            java.util.Map.entry("ìš”ì–‘ì›", "nursing_home"),
            java.util.Map.entry("ìš”ì–‘ë³‘ì›", "nursing_hospital"),
            java.util.Map.entry("ë³‘ì›", "hospital"),
            java.util.Map.entry("ì˜ì›", "clinic"),
            java.util.Map.entry("ë°ì´ì¼€ì–´", "daycare"),
            java.util.Map.entry("ì„¼í„°", "center"),
            java.util.Map.entry("í™ˆ", "home"),
            java.util.Map.entry("ì¼€ì–´", "care"),
            java.util.Map.entry("ì™¸ê´€", "exterior"),
            java.util.Map.entry("ì™¸ë¶€", "exterior"),
            java.util.Map.entry("ê±´ë¬¼", "building"),
            java.util.Map.entry("ì…êµ¬", "entrance"),
            java.util.Map.entry("í˜„ê´€", "entrance"),
            java.util.Map.entry("ë‚´ë¶€", "interior"),
            java.util.Map.entry("ë¡œë¹„", "lobby"),
            java.util.Map.entry("ë³µë„", "corridor"),
            java.util.Map.entry("í™€", "hall"),
            java.util.Map.entry("ë°©", "room"),
            java.util.Map.entry("ê°ì‹¤", "room"),
            java.util.Map.entry("ì¹¨ì‹¤", "bedroom"),
            java.util.Map.entry("ìƒí™œì‹¤", "living_room"),
            java.util.Map.entry("íœ´ê²Œì‹¤", "rest_room"),
            java.util.Map.entry("ì‹ë‹¹", "dining_room"),
            java.util.Map.entry("ì£¼ë°©", "kitchen"),
            java.util.Map.entry("ì¹´í˜", "cafe"),
            java.util.Map.entry("í™”ì¥ì‹¤", "restroom"),
            java.util.Map.entry("ìš•ì‹¤", "bathroom"),
            java.util.Map.entry("ì„¸íƒì‹¤", "laundry"),
            java.util.Map.entry("ì¹˜ë£Œì‹¤", "treatment_room"),
            java.util.Map.entry("ì˜ë¬´ì‹¤", "medical_room"),
            java.util.Map.entry("ìƒë‹´ì‹¤", "consultation_room"),
            java.util.Map.entry("ê°„í˜¸ì‚¬ì‹¤", "nurses_station"),
            java.util.Map.entry("ì¬í™œì‹¤", "rehabilitation_room"),
            java.util.Map.entry("ë¬¼ë¦¬ì¹˜ë£Œì‹¤", "physical_therapy_room"),
            java.util.Map.entry("ìš´ë™ì‹¤", "exercise_room"),
            java.util.Map.entry("í—¬ìŠ¤ì¥", "gym"),
            java.util.Map.entry("í”„ë¡œê·¸ë¨ì‹¤", "program_room"),
            java.util.Map.entry("ê°•ë‹¹", "auditorium"),
            java.util.Map.entry("ë„ì„œì‹¤", "library"),
            java.util.Map.entry("ì˜¤ë½ì‹¤", "recreation_room"),
            java.util.Map.entry("ì •ì›", "garden"),
            java.util.Map.entry("ë§ˆë‹¹", "yard"),
            java.util.Map.entry("í…Œë¼ìŠ¤", "terrace"),
            java.util.Map.entry("ë°œì½”ë‹ˆ", "balcony"),
            java.util.Map.entry("ì£¼ì°¨ì¥", "parking_lot"),
            java.util.Map.entry("ì‚°ì±…ë¡œ", "walking_path"),
            java.util.Map.entry("ì—˜ë¦¬ë² ì´í„°", "elevator"),
            java.util.Map.entry("ê³„ë‹¨", "stairs"),
            java.util.Map.entry("ì‚¬ë¬´ì‹¤", "office"),
            java.util.Map.entry("ì ‘ìˆ˜ì²˜", "reception"),
            java.util.Map.entry("ê°„í˜¸", "nursing"),
            java.util.Map.entry("ê°„ë³‘", "care"),
            java.util.Map.entry("ì¹˜ë£Œ", "treatment"),
            java.util.Map.entry("ì¬í™œ", "rehabilitation"),
            java.util.Map.entry("ë¬¼ë¦¬ì¹˜ë£Œ", "physical_therapy"),
            java.util.Map.entry("ê±´ê°•ê´€ë¦¬", "health_care"),
            java.util.Map.entry("ê¹¨ë—í•œ", "clean"),
            java.util.Map.entry("ë°ì€", "bright"),
            java.util.Map.entry("ë„“ì€", "spacious"),
            java.util.Map.entry("ì•ˆì „í•œ", "safe"),
            java.util.Map.entry("í¸ì•ˆí•œ", "comfortable"),
            java.util.Map.entry("í˜„ëŒ€ì ", "modern"),
            java.util.Map.entry("ê³ ê¸‰", "premium"),
            java.util.Map.entry("ì•„ì¹¨", "morning"),
            java.util.Map.entry("ì ì‹¬", "lunch"),
            java.util.Map.entry("ì €ë…", "evening"),
            java.util.Map.entry("ì•", "front"),
            java.util.Map.entry("ë’¤", "back"),
            java.util.Map.entry("ì¸µ", "floor"),
            java.util.Map.entry("1ì¸µ", "first_floor"),
            java.util.Map.entry("2ì¸µ", "second_floor"),
            java.util.Map.entry("1", "one"),
            java.util.Map.entry("2", "two"),
            java.util.Map.entry("3", "three"),
            java.util.Map.entry("4", "four"),
            java.util.Map.entry("5", "five"),
            java.util.Map.entry("ì²«ë²ˆì§¸", "first"),
            java.util.Map.entry("ë‘ë²ˆì§¸", "second"),
            java.util.Map.entry("ì„¸ë²ˆì§¸", "third")
        );
        for (java.util.Map.Entry<String, String> entry : koreanToEnglish.entrySet()) {
            result = result.replace(entry.getKey(), entry.getValue());
        }
        if (containsKorean(result)) {
            result = convertKoreanToRomanization(result);
        }
        return result;
    }
    private String convertKoreanToRomanization(String korean) {
        if (korean == null || korean.trim().isEmpty()) {
            return "korean_text";
        }
        java.util.Map<String, String> koreanRomanization = java.util.Map.ofEntries(
            java.util.Map.entry("ã„±", "g"), java.util.Map.entry("ã„´", "n"), java.util.Map.entry("ã„·", "d"),
            java.util.Map.entry("ã„¹", "r"), java.util.Map.entry("ã…", "m"), java.util.Map.entry("ã…‚", "b"),
            java.util.Map.entry("ã……", "s"), java.util.Map.entry("ã…‡", ""), java.util.Map.entry("ã…ˆ", "j"),
            java.util.Map.entry("ã…Š", "ch"), java.util.Map.entry("ã…‹", "k"), java.util.Map.entry("ã…Œ", "t"),
            java.util.Map.entry("ã…", "p"), java.util.Map.entry("ã…", "h"),
            java.util.Map.entry("ã…", "a"), java.util.Map.entry("ã…‘", "ya"), java.util.Map.entry("ã…“", "eo"),
            java.util.Map.entry("ã…•", "yeo"), java.util.Map.entry("ã…—", "o"), java.util.Map.entry("ã…›", "yo"),
            java.util.Map.entry("ã…œ", "u"), java.util.Map.entry("ã… ", "yu"), java.util.Map.entry("ã…¡", "eu"),
            java.util.Map.entry("ã…£", "i"), java.util.Map.entry("ã…", "ae"), java.util.Map.entry("ã…”", "e"),
            java.util.Map.entry("ê°€", "ga"), java.util.Map.entry("ë‚˜", "na"), java.util.Map.entry("ë‹¤", "da"),
            java.util.Map.entry("ë¼", "ra"), java.util.Map.entry("ë§ˆ", "ma"), java.util.Map.entry("ë°”", "ba"),
            java.util.Map.entry("ì‚¬", "sa"), java.util.Map.entry("ì", "ja"), java.util.Map.entry("ì°¨", "cha"),
            java.util.Map.entry("ì¹´", "ka"), java.util.Map.entry("íƒ€", "ta"), java.util.Map.entry("íŒŒ", "pa"),
            java.util.Map.entry("í•˜", "ha"),
            java.util.Map.entry("ê¹€", "kim"), java.util.Map.entry("ì´", "lee"), java.util.Map.entry("ë°•", "park"),
            java.util.Map.entry("ìµœ", "choi"), java.util.Map.entry("ì •", "jung"), java.util.Map.entry("ê°•", "kang"),
            java.util.Map.entry("ì¡°", "cho"), java.util.Map.entry("ìœ¤", "yoon"), java.util.Map.entry("ì¥", "jang"),
            java.util.Map.entry("ì„", "lim"), java.util.Map.entry("í•œ", "han"), java.util.Map.entry("ì˜¤", "oh"),
            java.util.Map.entry("ì„œ", "seo"), java.util.Map.entry("ì‹ ", "shin"), java.util.Map.entry("ê¶Œ", "kwon"),
            java.util.Map.entry("í™©", "hwang"), java.util.Map.entry("ì•ˆ", "ahn"), java.util.Map.entry("ì†¡", "song"),
            java.util.Map.entry("ë¥˜", "ryu"), java.util.Map.entry("ì „", "jeon"), java.util.Map.entry("í™", "hong")
        );
        String result = korean;
        for (java.util.Map.Entry<String, String> entry : koreanRomanization.entrySet()) {
            result = result.replace(entry.getKey(), entry.getValue());
        }
        if (containsKorean(result)) {
            result = "korean_" + System.currentTimeMillis() % 10000;
        }
        return result;
    }
    private String sanitizeFilename(String filename) {
        if (filename == null || filename.trim().isEmpty()) {
            return "facility_image";
        }
        String sanitized = filename.replaceAll("[^a-zA-Z0-9_-]", "_")
                                  .replaceAll("_{2,}", "_")
                                  .replaceAll("^_+|_+$", ""); // ì•ë’¤ ì–¸ë”ìŠ¤ì½”ì–´ ì œê±°
        // ë„ˆë¬´ ê¸¸ë©´ ìë¥´ê¸° (ìµœëŒ€ 30ì)
        if (sanitized.length() > 30) {
            sanitized = sanitized.substring(0, 30);
        }
        // ë¹„ì–´ìˆìœ¼ë©´ ê¸°ë³¸ê°’
        if (sanitized.isEmpty()) {
            sanitized = "facility_image";
        }
        return sanitized;
    }
    private boolean containsKorean(String text) {
        if (text == null) return false;
        return text.matches(".*[ã„±-ã…ã…-ã…£ê°€-í£]+.*");
    }
    private void validateImageFile(MultipartFile file) {
        if (file == null || file.isEmpty()) {
            throw new IllegalArgumentException("ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
        }
        if (file.getSize() > Constants.MAX_FILE_SIZE) {
            throw new IllegalArgumentException(String.format("íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤. ìµœëŒ€ %dMBê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.",
                Constants.MAX_FILE_SIZE / (1024 * 1024)));
        }
        String originalFilename = file.getOriginalFilename();
        if (originalFilename == null || !originalFilename.contains(".")) {
            throw new IllegalArgumentException("ìœ íš¨í•˜ì§€ ì•Šì€ íŒŒì¼ì…ë‹ˆë‹¤.");
        }
        String extension = originalFilename.substring(originalFilename.lastIndexOf(".") + 1).toLowerCase();
        boolean isValidExtension = false;
        for (String allowedExt : Constants.ALLOWED_IMAGE_EXTENSIONS) {
            if (allowedExt.equals(extension)) {
                isValidExtension = true;
                break;
            }
        }
        if (!isValidExtension) {
            throw new IllegalArgumentException(String.format("ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤. ì§€ì› í˜•ì‹: %s",
                String.join(", ", Constants.ALLOWED_IMAGE_EXTENSIONS)));
        }
        String contentType = file.getContentType();
        if (contentType == null || !contentType.startsWith("image/")) {
            throw new IllegalArgumentException("ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
        }
        log.debug("âœ… ì´ë¯¸ì§€ íŒŒì¼ ê²€ì¦ í†µê³¼ - íŒŒì¼ëª…: {}, í¬ê¸°: {}KB, íƒ€ì…: {}",
            originalFilename, file.getSize() / 1024, contentType);
    }
    @Transactional
    public boolean updateImageOrder(Long imageId, Integer imageOrder) {
        try {
            log.info("ğŸ”¢ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ - imageId: {}, newOrder: {}", imageId, imageOrder);
            int result = facilityImageMapper.updateImageOrder(imageId, imageOrder);
            boolean success = result > 0;
            if (success) {
                log.info("âœ… ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì„±ê³µ - imageId: {}, newOrder: {}", imageId, imageOrder);
            } else {
                log.warn("âš ï¸ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ - imageId: {}, newOrder: {}", imageId, imageOrder);
            }
            return success;
        } catch (Exception e) {
            log.error("âŒ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - imageId: {}, newOrder: {}", imageId, imageOrder, e);
            return false;
        }
    }
    @Transactional
    public boolean reorderAllFacilityImages(Long facilityId) {
        try {
            log.info("ğŸ”„ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ ì‹œì‘ - facilityId: {}", facilityId);
            List<FacilityImageDTO> images = facilityImageMapper.getImagesByFacilityId(facilityId);
            if (images.isEmpty()) {
                log.info("â„¹ï¸ ì¬ì •ë ¬í•  ì´ë¯¸ì§€ê°€ ì—†ìŒ - facilityId: {}", facilityId);
                return true;
            }
            log.info("ğŸ“Š ì¬ì •ë ¬í•  ì´ë¯¸ì§€ ìˆ˜: {} - facilityId: {}", images.size(), facilityId);
            for (int i = 0; i < images.size(); i++) {
                FacilityImageDTO image = images.get(i);
                int newOrder = i;
                if (image.getImageOrder() == null || !image.getImageOrder().equals(newOrder)) {
                    int updateResult = facilityImageMapper.updateImageOrder(image.getImageId(), newOrder);
                    if (updateResult > 0) {
                        log.debug("âœ… ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ - imageId: {}, ê¸°ì¡´: {} â†’ ìƒˆë¡œìš´: {}",
                            image.getImageId(), image.getImageOrder(), newOrder);
                    } else {
                        log.warn("âš ï¸ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ ì‹¤íŒ¨ - imageId: {}, ìƒˆë¡œìš´ ìˆœì„œ: {}",
                            image.getImageId(), newOrder);
                    }
                }
            }
            log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ ì™„ë£Œ - facilityId: {}", facilityId);
            return true;
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            return false;
        }
    }
    @Transactional
    public boolean updateImageOrdersBatch(Long facilityId, List<Long> imageIds) {
        try {
            log.info("ğŸ”¢ ë°°ì¹˜ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì‹œì‘ - facilityId: {}, imageIds: {}", facilityId, imageIds);
            if (imageIds == null || imageIds.isEmpty()) {
                log.warn("âš ï¸ ì—…ë°ì´íŠ¸í•  ì´ë¯¸ì§€ ID ëª©ë¡ì´ ë¹„ì–´ìˆìŒ - facilityId: {}", facilityId);
                return false;
            }
            int existingImageCount = facilityImageMapper.countImagesByFacilityId(facilityId);
            if (imageIds.size() > existingImageCount) {
                log.warn("âš ï¸ ì „ë‹¬ë°›ì€ ì´ë¯¸ì§€ ID ìˆ˜ê°€ ê¸°ì¡´ ì´ë¯¸ì§€ ìˆ˜ë³´ë‹¤ ë§ìŒ - facilityId: {}, ì „ë‹¬ë°›ì€: {}, ê¸°ì¡´: {}",
                    facilityId, imageIds.size(), existingImageCount);
                return false;
            }
            int successCount = 0;
            for (int i = 0; i < imageIds.size(); i++) {
                Long imageId = imageIds.get(i);
                int newOrder = i;
                FacilityImageDTO existingImage = facilityImageMapper.getImageById(imageId);
                if (existingImage == null || !existingImage.getFacilityId().equals(facilityId)) {
                    log.warn("âš ï¸ ì˜ëª»ëœ ì´ë¯¸ì§€ ID ë˜ëŠ” ì‹œì„¤ ë¶ˆì¼ì¹˜ - imageId: {}, facilityId: {}",
                        imageId, facilityId);
                    continue;
                }
                int updateResult = facilityImageMapper.updateImageOrder(imageId, newOrder);
                if (updateResult > 0) {
                    successCount++;
                    log.debug("âœ… ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ - imageId: {}, ìƒˆë¡œìš´ ìˆœì„œ: {}", imageId, newOrder);
                } else {
                    log.warn("âš ï¸ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ - imageId: {}, ìƒˆë¡œìš´ ìˆœì„œ: {}", imageId, newOrder);
                }
            }
            boolean success = successCount == imageIds.size();
            if (success) {
                log.info("âœ… ë°°ì¹˜ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ - facilityId: {}, ì„±ê³µ: {}/{}",
                    facilityId, successCount, imageIds.size());
            } else {
                log.warn("âš ï¸ ë°°ì¹˜ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ë¶€ë¶„ ì‹¤íŒ¨ - facilityId: {}, ì„±ê³µ: {}/{}",
                    facilityId, successCount, imageIds.size());
            }
            return success;
        } catch (Exception e) {
            log.error("âŒ ë°°ì¹˜ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            return false;
        }
    }
    @Transactional
    public boolean deleteAllFacilityImages(Long facilityId) {
        try {
            log.info("ğŸ—‘ï¸ ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì™„ì „ ì‚­ì œ ì‹œì‘ - facilityId: {}", facilityId);
            List<FacilityImageDTO> imagesToDelete = facilityImageMapper.getImagesByFacilityId(facilityId);
            if (imagesToDelete.isEmpty()) {
                log.info("â„¹ï¸ ì‚­ì œí•  ì´ë¯¸ì§€ê°€ ì—†ìŒ - facilityId: {}", facilityId);
                return true;
            }
            log.info("ğŸ“Š ì‚­ì œí•  ì´ë¯¸ì§€ ìˆ˜: {}", imagesToDelete.size());
            List<String> imagePaths = new ArrayList<>();
            for (FacilityImageDTO image : imagesToDelete) {
                if (image.getImagePath() != null && !image.getImagePath().trim().isEmpty()) {
                    imagePaths.add(image.getImagePath());
                }
            }
            int deletedCount = facilityImageMapper.deleteAllImagesByFacilityId(facilityId);
            log.info("âœ… DBì—ì„œ {} ê°œ ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - facilityId: {}", deletedCount, facilityId);
            int fileDeletedCount = 0;
            for (String imagePath : imagePaths) {
                if (deleteImageFile(imagePath)) {
                    fileDeletedCount++;
                }
            }
            log.info("âœ… íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ {}/{} ê°œ íŒŒì¼ ì‚­ì œ ì™„ë£Œ", fileDeletedCount, imagePaths.size());
            return deletedCount > 0;
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            return false;
        }
    }
    @Transactional
    public List<FacilityImageDTO> uploadMultipleImages(Long facilityId, List<MultipartFile> images) {
        List<FacilityImageDTO> uploadedImages = new ArrayList<>();
        try {
            log.info("ğŸ“¤ ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œì‘ - facilityId: {}, ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, images.size());
            List<FacilityImageDTO> existingImages = facilityImageMapper.getImagesByFacilityId(facilityId);
            int currentCount = existingImages.size();
            int nextOrderNum = currentCount + 1;
            log.info("ê¸°ì¡´ ì´ë¯¸ì§€ ìˆ˜: {}, ì‹œì‘ ìˆœì„œ ë²ˆí˜¸: {}", currentCount, nextOrderNum);
            String uploadDir = Constants.FACILITY_UPLOAD_PATH;
            File directory = new File(uploadDir);
            if (!directory.exists()) {
                boolean created = directory.mkdirs();
                log.info("ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} (ì„±ê³µ: {})", uploadDir, created);
            }
            for (int i = 0; i < images.size(); i++) {
                MultipartFile image = images.get(i);
                try {
                    String originalFilename = image.getOriginalFilename();
                    String extension = "";
                    if (originalFilename != null && originalFilename.contains(".")) {
                        extension = originalFilename.substring(originalFilename.lastIndexOf("."));
                    }
                    String uniqueFilename = UUID.randomUUID().toString() + extension;
                    String filePath = uploadDir + uniqueFilename;
                    // íŒŒì¼ ì €ì¥
                    File destinationFile = new File(filePath);
                    image.transferTo(destinationFile);
                    log.info("íŒŒì¼ ì €ì¥ ì™„ë£Œ: {} -> {}", originalFilename, uniqueFilename);
                    // DTO ìƒì„±
                    FacilityImageDTO imageDTO = new FacilityImageDTO();
                    imageDTO.setFacilityId(facilityId);
                    imageDTO.setImagePath("/uploads/facility/" + uniqueFilename);
                    imageDTO.setImageAltText(originalFilename); // ALT í…ìŠ¤íŠ¸ì— ì›ë³¸ íŒŒì¼ëª… ì €ì¥
                    imageDTO.setImageOrder(nextOrderNum + i);
                    imageDTO.setIsMainImage(currentCount == 0 && i == 0); // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ê°€ ë©”ì¸
                    // DB ì €ì¥
                    int result = facilityImageMapper.insertFacilityImage(imageDTO);
                    if (result > 0) {
                        uploadedImages.add(imageDTO);
                        log.info("ì´ë¯¸ì§€ DB ì €ì¥ ì™„ë£Œ: {} (ìˆœì„œ: {})", uniqueFilename, imageDTO.getImageOrder());
                    } else {
                        log.warn("ì´ë¯¸ì§€ DB ì €ì¥ ì‹¤íŒ¨: {}", uniqueFilename);
                        // ì‹¤íŒ¨í•œ íŒŒì¼ ì‚­ì œ
                        destinationFile.delete();
                    }
                } catch (IOException e) {
                    log.error("ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì‹¤íŒ¨: {}", image.getOriginalFilename(), e);
                } catch (Exception e) {
                    log.error("ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜: {}", image.getOriginalFilename(), e);
                }
            }
            log.info("âœ… ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ - facilityId: {}, ì„±ê³µ: {}/{}",
                    facilityId, uploadedImages.size(), images.size());
            return uploadedImages;
        } catch (Exception e) {
            log.error("âŒ ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            // ì‹¤íŒ¨ ì‹œ ì—…ë¡œë“œëœ íŒŒì¼ë“¤ ë¡¤ë°±
            for (FacilityImageDTO uploadedImage : uploadedImages) {
                try {
                    if (uploadedImage.getImageId() != null) {
                        facilityImageMapper.deleteFacilityImage(uploadedImage.getImageId());
                    }
                    deleteImageFile(uploadedImage.getImagePath());
                } catch (Exception rollbackException) {
                    log.error("ë¡¤ë°± ì¤‘ ì˜¤ë¥˜:", rollbackException);
                }
            }
            throw new RuntimeException("ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
}
````

## File: src/main/java/com/example/carelink/service/ReviewService.java
````java
package com.example.carelink.service;
import com.example.carelink.common.PageInfo;
import com.example.carelink.dao.ReviewMapper;
import com.example.carelink.dto.ReviewDTO;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import java.util.List;
@Slf4j
@Service
@RequiredArgsConstructor
public class ReviewService {
    private final ReviewMapper reviewMapper;
    private static final int DEFAULT_PAGE_SIZE = 10;
    public PageInfo<ReviewDTO> getReviewList(int page, String keyword) {
        return getReviewList(page, keyword, null, null);
    }
    public PageInfo<ReviewDTO> getReviewList(int page, String keyword, Integer minRating) {
        return getReviewList(page, keyword, minRating, null);
    }
    public PageInfo<ReviewDTO> getReviewList(int page, String keyword, Integer minRating, Long facilityId) {
        log.info("ë¦¬ë·° ëª©ë¡ ì¡°íšŒ ì‹œì‘ - page: {}, keyword: {}, minRating: {}, facilityId: {}", page, keyword, minRating, facilityId);
        try {
            ReviewDTO searchDTO = new ReviewDTO();
            searchDTO.setPage(page);
            searchDTO.setSize(DEFAULT_PAGE_SIZE);
            if (keyword != null && !keyword.trim().isEmpty()) {
                searchDTO.setSearchKeyword(keyword.trim());
            }
            if (minRating != null) {
                searchDTO.setMinRating(minRating);
            }
            if (facilityId != null) {
                searchDTO.setFacilityId(facilityId);
            }
            int totalCount = reviewMapper.countReviewsWithSearch(searchDTO);
            List<ReviewDTO> reviewList = reviewMapper.findReviewsWithSearch(searchDTO);
            log.info("ë¦¬ë·° ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}, ì „ì²´: {}", reviewList.size(), totalCount);
            return new PageInfo<>(reviewList, page, DEFAULT_PAGE_SIZE, totalCount);
        } catch (Exception e) {
            log.error("ë¦¬ë·° ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ë¦¬ë·° ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public ReviewDTO getReviewById(Long id) {
        log.info("ë¦¬ë·° ìƒì„¸ ì¡°íšŒ ì‹œì‘ - reviewId: {}", id);
        try {
            ReviewDTO review = reviewMapper.findReviewById(id);
            if (review == null) {
                throw new RuntimeException("í•´ë‹¹ ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + id);
            }
            reviewMapper.incrementViewCount(id);
            log.info("ë¦¬ë·° ìƒì„¸ ì¡°íšŒ ì™„ë£Œ - reviewId: {}, title: {}", id, review.getTitle());
            return review;
        } catch (Exception e) {
            log.error("ë¦¬ë·° ìƒì„¸ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            throw new RuntimeException("ë¦¬ë·° ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public int insertReview(ReviewDTO reviewDTO) {
        log.info("ë¦¬ë·° ë“±ë¡ ì‹œì‘ - title: {}, facilityId: {}", reviewDTO.getTitle(), reviewDTO.getFacilityId());
        try {
            validateReviewData(reviewDTO);
            if (reviewDTO.getStatus() == null) {
                reviewDTO.setStatus("ACTIVE");
            }
            if (reviewDTO.getReplyDepth() == null) {
                reviewDTO.setReplyDepth(0);
            }
            reviewDTO.setVisible(true);
            reviewDTO.setDeleted(false);
            int result = reviewMapper.insertReview(reviewDTO);
            log.info("ë¦¬ë·° ë“±ë¡ ì™„ë£Œ - reviewId: {}", reviewDTO.getReviewId());
            return result;
        } catch (Exception e) {
            log.error("ë¦¬ë·° ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ë¦¬ë·° ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public List<ReviewDTO> getReviewsByFacilityId(Long facilityId) {
        log.info("ì‹œì„¤ë³„ ë¦¬ë·° ì¡°íšŒ ì‹œì‘ - facilityId: {}", facilityId);
        try {
            List<ReviewDTO> reviews = reviewMapper.findReviewsByFacilityId(facilityId);
            log.info("ì‹œì„¤ë³„ ë¦¬ë·° ì¡°íšŒ ì™„ë£Œ - facilityId: {}, ì¡°íšŒëœ ê±´ìˆ˜: {}", facilityId, reviews.size());
            return reviews;
        } catch (Exception e) {
            log.error("ì‹œì„¤ë³„ ë¦¬ë·° ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            throw new RuntimeException("ì‹œì„¤ë³„ ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public int deleteReview(Long id) {
        log.info("ë¦¬ë·° ì‚­ì œ ì‹œì‘ - reviewId: {}", id);
        try {
            ReviewDTO existingReview = reviewMapper.findReviewById(id);
            if (existingReview == null) {
                throw new RuntimeException("ì‚­ì œí•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + id);
            }
            int result = reviewMapper.deleteReview(id);
            log.info("ë¦¬ë·° ì‚­ì œ ì™„ë£Œ - reviewId: {}", id);
            return result;
        } catch (Exception e) {
            log.error("ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            throw new RuntimeException("ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public Double getAverageRating(Long facilityId) {
        log.info("í‰ê·  í‰ì  ì¡°íšŒ ì‹œì‘ - facilityId: {}", facilityId);
        try {
            Double averageRating = reviewMapper.getAverageRating(facilityId);
            if (averageRating == null) {
                averageRating = 0.0;
            }
            log.info("í‰ê·  í‰ì  ì¡°íšŒ ì™„ë£Œ - facilityId: {}, í‰ê·  í‰ì : {}", facilityId, averageRating);
            return averageRating;
        } catch (Exception e) {
            log.error("í‰ê·  í‰ì  ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            return 0.0;
        }
    }
    @Transactional
    public int likeReview(Long reviewId) {
        log.info("ë¦¬ë·° ì¶”ì²œ ì‹œì‘ - reviewId: {}", reviewId);
        try {
            int result = reviewMapper.incrementLikeCount(reviewId);
            log.info("ë¦¬ë·° ì¶”ì²œ ì™„ë£Œ - reviewId: {}", reviewId);
            return result;
        } catch (Exception e) {
            log.error("ë¦¬ë·° ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", reviewId, e);
            throw new RuntimeException("ë¦¬ë·° ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public int dislikeReview(Long reviewId) {
        log.info("ë¦¬ë·° ë¹„ì¶”ì²œ ì‹œì‘ - reviewId: {}", reviewId);
        try {
            int result = reviewMapper.incrementDislikeCount(reviewId);
            log.info("ë¦¬ë·° ë¹„ì¶”ì²œ ì™„ë£Œ - reviewId: {}", reviewId);
            return result;
        } catch (Exception e) {
            log.error("ë¦¬ë·° ë¹„ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", reviewId, e);
            throw new RuntimeException("ë¦¬ë·° ë¹„ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public List<ReviewDTO> getReviewsByMemberId(Long memberId) {
        log.info("íšŒì›ë³„ ë¦¬ë·° ì¡°íšŒ ì‹œì‘ - memberId: {}", memberId);
        try {
            List<ReviewDTO> reviews = reviewMapper.findReviewsByMemberId(memberId);
            log.info("íšŒì›ë³„ ë¦¬ë·° ì¡°íšŒ ì™„ë£Œ - memberId: {}, ì¡°íšŒëœ ê±´ìˆ˜: {}", memberId, reviews.size());
            return reviews;
        } catch (Exception e) {
            log.error("íšŒì›ë³„ ë¦¬ë·° ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - memberId: {}", memberId, e);
            throw new RuntimeException("íšŒì›ë³„ ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    private void validateReviewData(ReviewDTO reviewDTO) {
        if (reviewDTO.getFacilityId() == null) {
            throw new IllegalArgumentException("ì‹œì„¤ IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (reviewDTO.getMemberId() == null) {
            throw new IllegalArgumentException("íšŒì› IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (reviewDTO.getTitle() == null || reviewDTO.getTitle().trim().isEmpty()) {
            throw new IllegalArgumentException("ë¦¬ë·° ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (reviewDTO.getContent() == null || reviewDTO.getContent().trim().isEmpty()) {
            throw new IllegalArgumentException("ë¦¬ë·° ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (reviewDTO.getRating() == null || reviewDTO.getRating() < 1 || reviewDTO.getRating() > 5) {
            throw new IllegalArgumentException("í‰ì ì€ 1~5 ì‚¬ì´ì˜ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
        }
    }
    @Transactional(readOnly = true)
    public int getReviewCount() {
        try {
            return reviewMapper.getReviewCount();
        } catch (Exception e) {
            log.error("ë¦¬ë·° ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }
    @Transactional
    public int updateReview(ReviewDTO reviewDTO) {
        log.info("ë¦¬ë·° ìˆ˜ì • ì‹œì‘ - reviewId: {}, title: {}", reviewDTO.getReviewId(), reviewDTO.getTitle());
        try {
            ReviewDTO existingReview = reviewMapper.findReviewById(reviewDTO.getReviewId());
            if (existingReview == null) {
                throw new RuntimeException("ìˆ˜ì •í•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + reviewDTO.getReviewId());
            }
            validateReviewData(reviewDTO);
            if (reviewDTO.getStatus() == null || reviewDTO.getStatus().isEmpty()) {
                reviewDTO.setStatus("ACTIVE");
            }
            int result = reviewMapper.updateReview(reviewDTO);
            log.info("ë¦¬ë·° ìˆ˜ì • ì™„ë£Œ - reviewId: {}", reviewDTO.getReviewId());
            return result;
        } catch (Exception e) {
            log.error("ë¦¬ë·° ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", reviewDTO.getReviewId(), e);
            throw new RuntimeException("ë¦¬ë·° ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public int incrementViewCount(Long id) {
        log.info("ì¡°íšŒìˆ˜ ì¦ê°€ ì‹œì‘ - reviewId: {}", id);
        try {
            int result = reviewMapper.incrementViewCount(id);
            log.info("ì¡°íšŒìˆ˜ ì¦ê°€ ì™„ë£Œ - reviewId: {}", id);
            return result;
        } catch (Exception e) {
            log.error("ì¡°íšŒìˆ˜ ì¦ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            return 0;
        }
    }
}
````

## File: src/main/java/com/example/carelink/controller/JobController.java
````java
package com.example.carelink.controller;
import com.example.carelink.common.Constants;
import com.example.carelink.dto.JobDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.service.JobService;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;
import javax.servlet.http.HttpSession;
import java.util.List;
@Controller
@RequestMapping("/job")
@RequiredArgsConstructor
public class JobController {
    private final JobService jobService;
    @GetMapping
    public String listPage(Model model,
                          @RequestParam(defaultValue = "1") int page,
                          @RequestParam(defaultValue = "") String keyword,
                          @RequestParam(defaultValue = "") String jobType) {
        List<JobDTO> jobList = jobService.getJobList(page, keyword, jobType);
        model.addAttribute("jobList", jobList);
        model.addAttribute("keyword", keyword);
        model.addAttribute("jobType", jobType);
        model.addAttribute("currentPage", page);
        return "job/list";
    }
    @GetMapping("/write")
    public String writePage(@RequestParam(defaultValue = "RECRUIT") String type, Model model, HttpSession session) {
        MemberDTO loggedInMember = getCurrentMember(session);
        if (loggedInMember == null) {
            session.setAttribute("errorMessage", "ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”.");
            return "redirect:/member/login";
        }
        String defaultType = type;
        if ("FACILITY".equals(loggedInMember.getRole())) {
            defaultType = "RECRUIT";
        } else if ("USER".equals(loggedInMember.getRole())) {
            defaultType = "SEARCH";
        }
        JobDTO jobDTO = new JobDTO();
        jobDTO.setJobType(defaultType);
        model.addAttribute("jobDTO", jobDTO);
        model.addAttribute("selectedType", defaultType);
        model.addAttribute("currentMember", loggedInMember);
        return "job/write";
    }
    @PostMapping("/write")
    public String writeJob(@ModelAttribute JobDTO jobDTO, HttpSession session) {
        MemberDTO loggedInMember = getCurrentMember(session);
        if (loggedInMember == null) {
            session.setAttribute("errorMessage", "ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”.");
            return "redirect:/member/login";
        }
        String jobType = jobDTO.getJobType();
        String userRole = loggedInMember.getRole();
        if ("FACILITY".equals(userRole) && "SEARCH".equals(jobType)) {
            session.setAttribute("errorMessage", "ì‹œì„¤íšŒì›ì€ êµ¬ì¸ê³µê³ ë§Œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/job/write?type=RECRUIT";
        }
        if ("USER".equals(userRole) && "RECRUIT".equals(jobType)) {
            session.setAttribute("errorMessage", "ì¼ë°˜íšŒì›ì€ êµ¬ì§ê³µê³ ë§Œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/job/write?type=SEARCH";
        }
        if (jobDTO.getStatus() == null || jobDTO.getStatus().isEmpty()) {
            jobDTO.setStatus("ACTIVE");
        }
        jobDTO.setMemberId(loggedInMember.getMemberId());
        if (jobDTO.getPriority() == null) {
            jobDTO.setPriority(0);
        }
        try {
            jobService.insertJob(jobDTO);
            session.setAttribute("successMessage", "ê³µê³ ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return "redirect:/job";
        } catch (Exception e) {
            session.setAttribute("errorMessage", "ê³µê³  ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            return "redirect:/job/write?type=" + jobType;
        }
    }
    @GetMapping("/detail/{id}")
    public String detailPage(@PathVariable Long id, Model model, HttpSession session) {
        try {
            JobDTO job = jobService.getJobById(id);
            if (job == null) {
                session.setAttribute("errorMessage", "í•´ë‹¹ êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/job";
            }
            String formattedContent = "";
            if (job.getContent() != null) {
                formattedContent = job.getContent().replace(System.lineSeparator(), "<br>");
                formattedContent = formattedContent.replace("\n", "<br>");
            }
            model.addAttribute("formattedJobContent", formattedContent);
            MemberDTO loggedInMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (loggedInMember == null || !job.getMemberId().equals(loggedInMember.getMemberId())) {
            }
            model.addAttribute("job", job);
            return "job/detail";
        } catch (Exception e) {
            e.printStackTrace();
            session.setAttribute("errorMessage", "êµ¬ì¸ê³µê³  ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/job";
        }
    }
    @GetMapping("/edit/{id}")
    public String editPage(@PathVariable Long id, Model model, HttpSession session) {
        MemberDTO loggedInMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loggedInMember == null) {
            return "redirect:/member/login";
        }
        JobDTO job = jobService.getJobById(id);
        if (job == null) {
            session.setAttribute("errorMessage", "í•´ë‹¹ êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            return "redirect:/job";
        }
        if (!canEditJob(loggedInMember, job.getMemberId())) {
            session.setAttribute("errorMessage", "ìˆ˜ì • ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/job/detail/" + id;
        }
        model.addAttribute("jobDTO", job);
        return "job/edit";
    }
    @PostMapping("/edit/{id}")
    public String editJob(@PathVariable Long id, @ModelAttribute JobDTO jobDTO, HttpSession session) {
        MemberDTO loggedInMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loggedInMember == null) {
            return "redirect:/member/login";
        }
        JobDTO existingJob = jobService.getJobById(id);
        if (existingJob == null) {
            session.setAttribute("errorMessage", "í•´ë‹¹ êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            return "redirect:/job";
        }
        if (!canEditJob(loggedInMember, existingJob.getMemberId())) {
            session.setAttribute("errorMessage", "ìˆ˜ì • ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/job/detail/" + id;
        }
        jobDTO.setJobId(id);
        jobDTO.setMemberId(loggedInMember.getMemberId());
        jobService.updateJob(jobDTO);
        return "redirect:/job/detail/" + id;
    }
    @PostMapping("/delete/{id}")
    public String deleteJob(@PathVariable Long id, HttpSession session) {
        MemberDTO loggedInMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loggedInMember == null) {
            return "redirect:/member/login";
        }
        JobDTO existingJob = jobService.getJobById(id);
        if (existingJob == null) {
            session.setAttribute("errorMessage", "í•´ë‹¹ êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            return "redirect:/job";
        }
        boolean isOwner = existingJob.getMemberId().equals(loggedInMember.getMemberId());
        boolean isAdmin = "ADMIN".equals(loggedInMember.getRole());
        if (!isOwner && !isAdmin) {
            session.setAttribute("errorMessage", "ì‚­ì œ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ì‘ì„±ìë§Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/job/detail/" + id;
        }
        jobService.deleteJob(id);
        session.setAttribute("successMessage", "êµ¬ì¸ê³µê³ ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
        return "redirect:/job";
    }
    @PostMapping("/{id}/apply")
    public String applyForJob(@PathVariable Long id, HttpSession session, RedirectAttributes redirectAttributes) {
        MemberDTO loggedInMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loggedInMember == null) {
            redirectAttributes.addFlashAttribute("errorMessage", "ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”.");
            return "redirect:/member/login";
        }
        if (!"USER".equals(loggedInMember.getRole())) {
            redirectAttributes.addFlashAttribute("errorMessage", "ê°œì¸ íšŒì›ë§Œ êµ¬ì¸ê³µê³ ì— ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/job/detail/" + id;
        }
        try {
            jobService.applyForJob(id, loggedInMember.getMemberId());
            redirectAttributes.addFlashAttribute("successMessage", "êµ¬ì¸ê³µê³  ì§€ì›ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
            return "redirect:/job/detail/" + id;
        } catch (IllegalArgumentException e) {
            redirectAttributes.addFlashAttribute("errorMessage", e.getMessage());
            return "redirect:/job/detail/" + id;
        } catch (Exception e) {
            redirectAttributes.addFlashAttribute("errorMessage", "êµ¬ì¸ê³µê³  ì§€ì› ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            return "redirect:/job/detail/" + id;
        }
    }
    private MemberDTO getCurrentMember(HttpSession session) {
        return (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
    }
    private boolean canWriteRecruit(MemberDTO member) {
        return member != null && ("FACILITY".equals(member.getRole()) || "ADMIN".equals(member.getRole()));
    }
    private boolean canWriteSearch(MemberDTO member) {
        return member != null && ("USER".equals(member.getRole()) || "ADMIN".equals(member.getRole()));
    }
    private boolean canEditJob(MemberDTO member, Long authorId) {
        return member != null && (member.getMemberId().equals(authorId) || "ADMIN".equals(member.getRole()));
    }
    private boolean canApplyOrContact(MemberDTO member, Long authorId) {
        return member != null && !member.getMemberId().equals(authorId);
    }
    private boolean isAdmin(MemberDTO member) {
        return member != null && "ADMIN".equals(member.getRole());
    }
}
````

## File: src/main/java/com/example/carelink/service/JobService.java
````java
package com.example.carelink.service;
import com.example.carelink.dao.JobMapper;
import com.example.carelink.dto.JobApplicationDTO;
import com.example.carelink.dto.JobDTO;
import com.example.carelink.dao.JobApplicationMapper;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;
@Slf4j
@Service
@RequiredArgsConstructor
public class JobService {
    private final JobMapper jobMapper;
    private final JobApplicationMapper jobApplicationMapper;
    public List<JobDTO> getJobList(int currentPage, String keyword, String jobType) {
        log.info("êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - page: {}, keyword: {}, jobType: {}", currentPage, keyword, jobType);
        try {
            JobDTO searchDTO = new JobDTO();
            int pageSize = 10;
            searchDTO.setSize(pageSize);
            searchDTO.setPage((currentPage - 1) * pageSize);
            if (keyword != null && !keyword.trim().isEmpty()) {
                searchDTO.setSearchKeyword(keyword.trim());
            }
            if (jobType != null && !jobType.trim().isEmpty()) {
                searchDTO.setJobType(jobType.trim());
            }
            List<JobDTO> jobList = jobMapper.getJobList(searchDTO);
            log.info("êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", jobList.size());
            return jobList;
        } catch (Exception e) {
            log.error("êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return new ArrayList<>();
        }
    }
    public JobDTO getJobById(Long id) {
        log.info("êµ¬ì¸êµ¬ì§ ìƒì„¸ ì¡°íšŒ ì‹œì‘ - jobId: {}", id);
        try {
            JobDTO job = jobMapper.findJobById(id);
            if (job == null) {
                log.warn("êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ - jobId: {}", id);
                throw new RuntimeException("í•´ë‹¹ êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + id);
            }
            log.info("êµ¬ì¸êµ¬ì§ ìƒì„¸ ì¡°íšŒ ì™„ë£Œ - jobId: {}, title: {}", id, job.getTitle());
            return job;
        } catch (Exception e) {
            log.error("êµ¬ì¸êµ¬ì§ ìƒì„¸ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - jobId: {}", id, e);
            JobDTO job = new JobDTO();
            job.setJobId(id);
            job.setTitle("êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
            job.setContent("ì‹œìŠ¤í…œ ì˜¤ë¥˜ë¡œ ì¸í•´ ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            job.setJobType("RECRUIT");
            job.setWorkType("FULL_TIME");
            job.setPosition("ë¯¸ì •");
            job.setSalaryMin(java.math.BigDecimal.ZERO);
            job.setSalaryMax(java.math.BigDecimal.ZERO);
            job.setWorkLocation("ë¯¸ì •");
            job.setStatus("ACTIVE");
            job.setMemberId(1L);
            job.setViewCount(0);
            return job;
        }
    }
    public int insertJob(JobDTO jobDTO) {
        log.info("êµ¬ì¸êµ¬ì§ ë“±ë¡ ì‹œì‘ - title: {}, jobType: {}", jobDTO.getTitle(), jobDTO.getJobType());
        try {
            validateJobData(jobDTO);
            cleanAndValidateJobData(jobDTO);
            if (jobDTO.getStatus() == null) {
                jobDTO.setStatus("ACTIVE");
            }
            if (jobDTO.getPriority() == null) {
                jobDTO.setPriority(0);
            }
            int result = jobMapper.insertJob(jobDTO);
            log.info("êµ¬ì¸êµ¬ì§ ë“±ë¡ ì™„ë£Œ - jobId: {}", jobDTO.getJobId());
            return result;
        } catch (Exception e) {
            log.error("êµ¬ì¸êµ¬ì§ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("êµ¬ì¸êµ¬ì§ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public int updateJob(JobDTO jobDTO) {
        log.info("êµ¬ì¸êµ¬ì§ ìˆ˜ì • ì‹œì‘ - jobId: {}, title: {}", jobDTO.getJobId(), jobDTO.getTitle());
        try {
            JobDTO existingJob = jobMapper.findJobById(jobDTO.getJobId());
            if (existingJob == null) {
                throw new RuntimeException("ìˆ˜ì •í•  êµ¬ì¸êµ¬ì§ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + jobDTO.getJobId());
            }
            validateJobData(jobDTO);
            cleanAndValidateJobData(jobDTO);
            if (jobDTO.getPriority() == null) {
                jobDTO.setPriority(0);
                log.warn("priority ê°’ì´ nullì´ì–´ì„œ 0ìœ¼ë¡œ ìë™ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. jobId: {}", jobDTO.getJobId());
            }
            int result = jobMapper.updateJob(jobDTO);
            log.info("êµ¬ì¸êµ¬ì§ ìˆ˜ì • ì™„ë£Œ - jobId: {}", jobDTO.getJobId());
            return result;
        } catch (Exception e) {
            log.error("êµ¬ì¸êµ¬ì§ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - jobId: {}", jobDTO.getJobId(), e);
            throw new RuntimeException("êµ¬ì¸êµ¬ì§ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public int deleteJob(Long id) {
        log.info("êµ¬ì¸êµ¬ì§ ì‚­ì œ ì‹œì‘ - jobId: {}", id);
        try {
            int result = jobMapper.deleteJob(id);
            log.info("êµ¬ì¸êµ¬ì§ ì‚­ì œ ì™„ë£Œ - jobId: {}", id);
            return result;
        } catch (Exception e) {
            log.error("êµ¬ì¸êµ¬ì§ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - jobId: {}", id, e);
            throw new RuntimeException("êµ¬ì¸êµ¬ì§ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public List<JobDTO> getPopularJobs() {
        try {
            return jobMapper.getPopularJobs();
        } catch (Exception e) {
            log.error("ì¸ê¸° êµ¬ì¸êµ¬ì§ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return new ArrayList<>();
        }
    }
    public int getJobCount() {
        try {
            return jobMapper.getJobCount();
        } catch (Exception e) {
            log.error("êµ¬ì¸êµ¬ì§ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }
    private void validateJobData(JobDTO jobDTO) {
        if (jobDTO.getTitle() == null || jobDTO.getTitle().trim().isEmpty()) {
            throw new IllegalArgumentException("ì œëª©ì€ í•„ìˆ˜ ì…ë ¥ê°’ì…ë‹ˆë‹¤.");
        }
        if (jobDTO.getContent() == null || jobDTO.getContent().trim().isEmpty()) {
            throw new IllegalArgumentException("ë‚´ìš©ì€ í•„ìˆ˜ ì…ë ¥ê°’ì…ë‹ˆë‹¤.");
        }
        if (jobDTO.getJobType() == null || jobDTO.getJobType().trim().isEmpty()) {
            throw new IllegalArgumentException("êµ¬ì¸êµ¬ì§ ìœ í˜•ì€ í•„ìˆ˜ ì…ë ¥ê°’ì…ë‹ˆë‹¤.");
        }
        if (jobDTO.getMemberId() == null) {
            throw new IllegalArgumentException("ì‘ì„±ì ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.");
        }
    }
    private void cleanAndValidateJobData(JobDTO jobDTO) {
        log.info("ë°ì´í„° ì •ë¦¬ ì‹œì‘ - jobId: {}", jobDTO.getJobId());
        if (jobDTO.getTitle() != null) {
            jobDTO.setTitle(jobDTO.getTitle().trim());
        }
        if (jobDTO.getContent() != null) {
            jobDTO.setContent(jobDTO.getContent().trim());
        }
        if (jobDTO.getSalaryDescription() != null && !jobDTO.getSalaryDescription().trim().isEmpty()) {
            String cleanSalaryDesc = cleanDuplicateValues(jobDTO.getSalaryDescription());
            jobDTO.setSalaryDescription(cleanSalaryDesc);
            log.debug("ê¸‰ì—¬ ì„¤ëª… ì •ë¦¬ë¨: {} -> {}", jobDTO.getSalaryDescription(), cleanSalaryDesc);
        }
        if (jobDTO.getWorkHours() != null && !jobDTO.getWorkHours().trim().isEmpty()) {
            String cleanWorkHours = cleanDuplicateValues(jobDTO.getWorkHours());
            jobDTO.setWorkHours(cleanWorkHours);
            log.debug("ê·¼ë¬´ì‹œê°„ ì •ë¦¬ë¨: {} -> {}", jobDTO.getWorkHours(), cleanWorkHours);
        }
        if (jobDTO.getFacilityName() != null) {
            jobDTO.setFacilityName(jobDTO.getFacilityName().trim());
        }
        if (jobDTO.getWorkLocation() != null) {
            jobDTO.setWorkLocation(jobDTO.getWorkLocation().trim());
        }
        if (jobDTO.getContactPhone() != null) {
            jobDTO.setContactPhone(jobDTO.getContactPhone().trim());
        }
        if (jobDTO.getQualifications() != null && !jobDTO.getQualifications().trim().isEmpty()) {
            String cleanQualifications = cleanDuplicateValues(jobDTO.getQualifications());
            jobDTO.setQualifications(cleanQualifications);
        }
        log.info("ë°ì´í„° ì •ë¦¬ ì™„ë£Œ - jobId: {}", jobDTO.getJobId());
    }
    private String cleanDuplicateValues(String input) {
        if (input == null || input.trim().isEmpty()) {
            return input;
        }
        try {
            String[] values = input.split(",");
            return java.util.Arrays.stream(values)
                    .map(String::trim)
                    .filter(s -> !s.isEmpty())
                    .distinct()
                    .collect(java.util.stream.Collectors.joining(", "));
        } catch (Exception e) {
            log.warn("ê°’ ì •ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ, ì›ë³¸ ê°’ ë°˜í™˜: {}", input, e);
            return input.trim();
        }
    }
    @Transactional
    public void applyForJob(Long jobId, Long applicantMemberId) {
        log.info("êµ¬ì¸ê³µê³  ì§€ì› ë¡œì§ ì‹œì‘ - jobId: {}, applicantMemberId: {}", jobId, applicantMemberId);
        JobDTO jobDTO = jobMapper.findJobById(jobId);
        if (jobDTO == null) {
            log.warn("ì§€ì›í•  êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ - jobId: {}", jobId);
            throw new IllegalArgumentException("ì§€ì›í•  êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
        int existingApplications = jobApplicationMapper.countByJobIdAndApplicantMemberId(jobId, applicantMemberId);
        if (existingApplications > 0) {
            log.warn("ì´ë¯¸ ì§€ì›í•œ êµ¬ì¸ê³µê³ ì…ë‹ˆë‹¤ - jobId: {}, applicantMemberId: {}", jobId, applicantMemberId);
            throw new IllegalArgumentException("ì´ë¯¸ ì§€ì›í•œ êµ¬ì¸ê³µê³ ì…ë‹ˆë‹¤.");
        }
        JobApplicationDTO jobApplication = new JobApplicationDTO();
        jobApplication.setJobId(jobId);
        jobApplication.setApplicantMemberId(applicantMemberId);
        jobApplication.setApplicationDate(LocalDateTime.now());
        jobApplication.setStatus("PENDING");
        jobApplicationMapper.insertJobApplication(jobApplication);
        jobMapper.incrementApplyCount(jobId);
        log.info("êµ¬ì¸ê³µê³  ì§€ì› ë¡œì§ ì™„ë£Œ - jobId: {}, applicantMemberId: {}, ìƒì„±ëœ ì§€ì› ID: {}",
                jobId, applicantMemberId, jobApplication.getId());
    }
}
````

## File: build.gradle
````
plugins {
    id 'org.springframework.boot' version '2.7.18'
    id 'io.spring.dependency-management' version '1.0.15.RELEASE'
    id 'java'
}

group = 'com.example'
version = '0.0.1-SNAPSHOT'

java {
    sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11
}

repositories {
    mavenCentral()
}

dependencies {
    // Spring Boot ê¸°ë³¸ ì˜ì¡´ì„±
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-actuator'
    developmentOnly 'org.springframework.boot:spring-boot-devtools'

    // Thymeleaf í…œí”Œë¦¿ ì—”ì§„
    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'

    // MySQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° (ë¡œì»¬ ê°œë°œìš©)
    runtimeOnly 'com.mysql:mysql-connector-j'
    
    // PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° (Herokuìš©)
    runtimeOnly 'org.postgresql:postgresql'

    // MyBatis ì—°ë™
    implementation 'org.mybatis.spring.boot:mybatis-spring-boot-starter:2.3.1'

    // Lombok (ì½”ë“œ ìë™ ìƒì„±)
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'

    // ìœ íš¨ì„± ê²€ì¦
    implementation 'org.springframework.boot:spring-boot-starter-validation'

    // JSON ì²˜ë¦¬
    implementation 'com.fasterxml.jackson.core:jackson-databind'
    implementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310'

    // í…ŒìŠ¤íŠ¸ ì˜ì¡´ì„±
    testImplementation 'org.springframework.boot:spring-boot-starter-test'

    // Spring Security
    implementation 'org.springframework.boot:spring-boot-starter-security'

    // Thymeleafì™€ Spring Security ì—°ë™ì„ ìœ„í•œ í™•ì¥ ë¼ì´ë¸ŒëŸ¬ë¦¬
    implementation 'org.thymeleaf.extras:thymeleaf-extras-springsecurity5'

    // SpringDoc OpenAPI ì˜ì¡´ì„± ì¶”ê°€ (ì„ì‹œ ë¹„í™œì„±í™” - ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ í›„ í™œì„±í™” ì˜ˆì •)
    // implementation 'org.springdoc:springdoc-openapi-ui:1.7.0'
    // implementation 'org.springdoc:springdoc-openapi-security:1.7.0'

}

tasks.named('test') {
    useJUnitPlatform()
}
````

## File: src/main/java/com/example/carelink/service/FacilityService.java
````java
package com.example.carelink.service;
import com.example.carelink.dao.FacilityMapper;
import com.example.carelink.dto.FacilityDTO;
import com.example.carelink.dto.FacilityImageDTO;
import com.example.carelink.common.Constants;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.web.multipart.MultipartFile;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.UUID;
@Service
public class FacilityService {
    private final FacilityMapper facilityMapper;
    private final FacilityImageService facilityImageService;
    private static final Logger log = LoggerFactory.getLogger(FacilityService.class);
    @Autowired
    public FacilityService(FacilityMapper facilityMapper, FacilityImageService facilityImageService) {
        this.facilityMapper = facilityMapper;
        this.facilityImageService = facilityImageService;
    }
    public List<FacilityDTO> searchFacilities(FacilityDTO searchDTO) {
        log.info("ì‹œì„¤ ê²€ìƒ‰ ì„œë¹„ìŠ¤ í˜¸ì¶œ - facilityName: {}, address: {}, facilityType: {}",
                searchDTO.getFacilityName(), searchDTO.getAddress(), searchDTO.getFacilityType());
        List<FacilityDTO> results = facilityMapper.searchFacilities(searchDTO);
        log.info("ì‹œì„¤ ê²€ìƒ‰ ê²°ê³¼ - ì´ {}ê°œ ì‹œì„¤ ë°œê²¬", results.size());
        for (FacilityDTO facility : results) {
            try {
                FacilityImageDTO mainImage = facilityImageService.getMainImageByFacilityId(facility.getFacilityId());
                if (mainImage != null && mainImage.getImagePath() != null) {
                    facility.setFacilityImage(mainImage.getImagePath());
                }
            } catch (Exception e) {
                log.warn("ì‹œì„¤ ê²€ìƒ‰ ì¤‘ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ ì‹¤íŒ¨ - facilityId: {}", facility.getFacilityId(), e);
                facility.setFacilityImage(null);
            }
        }
        return results;
    }
    @Transactional(readOnly = true)
    public FacilityDTO getFacilityById(Long facilityId) {
        if (facilityId == null) {
            log.warn("ì‹œì„¤ IDê°€ nullì…ë‹ˆë‹¤.");
            return null;
        }
        log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì‹œì‘ - facilityId: {}", facilityId);
        FacilityDTO facility = facilityMapper.getFacilityById(facilityId);
        if (facility == null) {
            log.warn("ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ - facilityId: {}", facilityId);
            return null;
        }
        try {
            FacilityImageDTO mainImage = facilityImageService.getMainImageByFacilityId(facilityId);
            if (mainImage != null && mainImage.getImagePath() != null) {
                facility.setFacilityImage(mainImage.getImagePath());
                log.info("âœ… ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì™„ë£Œ - imagePath: {}", mainImage.getImagePath());
            } else {
                log.info("âš ï¸ ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì—†ìŒ - facilityId: {}", facilityId);
                facility.setFacilityImage(null);
            }
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            facility.setFacilityImage(null);
        }
        log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì™„ë£Œ - facilityName: {}, status: {}, mainImage: {}",
                facility.getFacilityName(), facility.getStatus(), facility.getFacilityImage());
        return facility;
    }
    public List<FacilityDTO> getAllFacilities() {
        try {
            log.info("ì „ì²´ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì‹œì‘");
            List<FacilityDTO> facilities = facilityMapper.getAllFacilities();
            log.info("ì „ì²´ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", facilities.size());
            return facilities;
        } catch (Exception e) {
            log.error("ì „ì²´ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ì‹œì„¤ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public int insertFacility(FacilityDTO facilityDTO) {
        return facilityMapper.insertFacility(facilityDTO);
    }
    public int updateFacility(FacilityDTO facilityDTO) {
        return facilityMapper.updateFacility(facilityDTO);
    }
    public int deleteFacility(Long facilityId) {
        return facilityMapper.deleteFacility(facilityId);
    }
    public int countFacilitiesByRegion(String region) {
        return facilityMapper.countFacilitiesByRegion(region);
    }
    public int getFacilityCount() {
        try {
            return facilityMapper.getFacilityCount();
        } catch (Exception e) {
            return 3;
        }
    }
    @Transactional(readOnly = true)
    public List<FacilityDTO> getAllActiveFacilities() {
        log.info("í™œì„±í™”ëœ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì‹œì‘");
        List<FacilityDTO> facilities = facilityMapper.getAllActiveFacilities();
        if (!facilities.isEmpty()) {
            FacilityDTO firstFacility = facilities.get(0);
            log.info("ì²« ë²ˆì§¸ ì‹œì„¤ ì •ë³´ - ID: {}, ì´ë¦„: {}, ìŠ¹ì¸ìƒíƒœ: {}",
                    firstFacility.getFacilityId(),
                    firstFacility.getFacilityName(),
                    firstFacility.getStatus());
        }
        log.info("í™œì„±í™”ëœ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", facilities.size());
        return facilities;
    }
    public boolean validateFacilityStatus(FacilityDTO facility) {
        if (facility == null) {
            log.warn("ì‹œì„¤ ì •ë³´ê°€ nullì…ë‹ˆë‹¤.");
            return false;
        }
        if (facility.isDeletedStatus()) {
            log.warn("ì‚­ì œëœ ì‹œì„¤ì…ë‹ˆë‹¤ - facilityId: {}", facility.getFacilityId());
            return false;
        }
        if (facility.isPendingStatus()) {
            log.warn("ìŠ¹ì¸ë˜ì§€ ì•Šì€ ì‹œì„¤ì…ë‹ˆë‹¤ - facilityId: {}", facility.getFacilityId());
            return false;
        }
        return true;
    }
    public List<FacilityDTO> getFacilitiesByMemberId(Long memberId) {
        try {
            log.info("íšŒì›ì˜ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - memberId: {}", memberId);
            List<FacilityDTO> facilities = facilityMapper.getFacilitiesByMemberId(memberId);
            if (!facilities.isEmpty()) {
                log.info("íšŒì›ì˜ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - memberId: {}, ì‹œì„¤ ìˆ˜: {}",
                        memberId, facilities.size());
            } else {
                log.info("íšŒì›ì˜ ì‹œì„¤ ì •ë³´ ì—†ìŒ - memberId: {}", memberId);
            }
            return facilities;
        } catch (Exception e) {
            log.error("íšŒì›ì˜ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - memberId: {}", memberId, e);
            throw new RuntimeException("ì‹œì„¤ ì •ë³´ ì¡°íšŒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public FacilityDTO getFacilityByMemberId(Long memberId) {
        try {
            log.info("íšŒì›ì˜ ì²« ë²ˆì§¸ ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì‹œì‘ - memberId: {}", memberId);
            List<FacilityDTO> facilities = facilityMapper.getFacilitiesByMemberId(memberId);
            if (!facilities.isEmpty()) {
                FacilityDTO facility = facilities.get(0);
                log.info("íšŒì›ì˜ ì²« ë²ˆì§¸ ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì™„ë£Œ - memberId: {}, facilityId: {}, facilityName: {}",
                        memberId, facility.getFacilityId(), facility.getFacilityName());
                return facility;
            } else {
                log.info("íšŒì›ì˜ ì‹œì„¤ ì •ë³´ ì—†ìŒ - memberId: {}", memberId);
                return null;
            }
        } catch (Exception e) {
            log.error("íšŒì›ì˜ ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - memberId: {}", memberId, e);
            throw new RuntimeException("ì‹œì„¤ ì •ë³´ ì¡°íšŒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public void updateFacility(FacilityDTO facilityDTO, MultipartFile facilityImageFile) {
        try {
            log.info("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì‹œì‘ - facilityId: {}, facilityName: {}",
                    facilityDTO.getFacilityId(), facilityDTO.getFacilityName());
            if (facilityImageFile != null && !facilityImageFile.isEmpty()) {
                String imagePath = saveFacilityImage(facilityImageFile, facilityDTO.getFacilityId().toString());
                facilityDTO.setFacilityImage(imagePath);
                log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸ - facilityId: {}, imagePath: {}",
                        facilityDTO.getFacilityId(), imagePath);
            }
            int result = facilityMapper.updateFacility(facilityDTO);
            if (result == 0) {
                throw new RuntimeException("ì‹œì„¤ ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            }
            log.info("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì™„ë£Œ - facilityId: {}", facilityDTO.getFacilityId());
        } catch (Exception e) {
            log.error("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityDTO.getFacilityId(), e);
            throw new RuntimeException("ì‹œì„¤ ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    private String saveFacilityImage(MultipartFile file, String facilityId) {
        try {
            String uploadDir = Constants.FACILITY_UPLOAD_PATH;
            File uploadDirFile = new File(uploadDir);
            if (!uploadDirFile.exists()) {
                boolean created = uploadDirFile.mkdirs();
                log.info("ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} - {}", uploadDir, created ? "ì„±ê³µ" : "ì‹¤íŒ¨");
            }
            String originalFilename = file.getOriginalFilename();
            String extension = "";
            if (originalFilename != null && originalFilename.contains(".")) {
                extension = originalFilename.substring(originalFilename.lastIndexOf("."));
            }
            String savedFilename = "facility_" + facilityId + "_" + UUID.randomUUID().toString() + extension;
            File savedFile = new File(uploadDir + savedFilename);
            file.transferTo(savedFile);
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ: {}", savedFile.getAbsolutePath());
            return "/uploads/facility/" + savedFilename;
        } catch (IOException e) {
            log.error("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            throw new RuntimeException("ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional(readOnly = true)
    public List<FacilityDTO> getFacilitiesByApprovalStatus(String status) {
        try {
            log.info("ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ - status: {}", status);
            List<FacilityDTO> facilities = facilityMapper.getFacilitiesByApprovalStatus(status);
            log.info("ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - status: {}, count: {}", status, facilities.size());
            return facilities;
        } catch (Exception e) {
            log.error("ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - status: {}", status, e);
            throw new RuntimeException("ì‹œì„¤ ëª©ë¡ ì¡°íšŒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public void updateFacilityApprovalStatus(Long facilityId, String newStatus, String reason) {
        try {
            log.info("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ - facilityId: {}, newStatus: {}, reason: {}",
                    facilityId, newStatus, reason);
            int result = facilityMapper.updateFacilityApprovalStatus(facilityId, newStatus, reason);
            if (result == 0) {
                throw new RuntimeException("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            }
            log.info("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ ì™„ë£Œ - facilityId: {}, newStatus: {}", facilityId, newStatus);
        } catch (Exception e) {
            log.error("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            throw new RuntimeException("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional(readOnly = true)
    public int countPendingFacilities() {
        try {
            int count = facilityMapper.countFacilitiesByStatus("PENDING");
            log.info("ìŠ¹ì¸ ëŒ€ê¸° ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì™„ë£Œ - count: {}", count);
            return count;
        } catch (Exception e) {
            log.error("ìŠ¹ì¸ ëŒ€ê¸° ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }
    @Transactional(readOnly = true)
    public int countApprovedFacilities() {
        try {
            int count = facilityMapper.countFacilitiesByStatus("APPROVED");
            log.info("ìŠ¹ì¸ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì™„ë£Œ - count: {}", count);
            return count;
        } catch (Exception e) {
            log.error("ìŠ¹ì¸ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }
    @Transactional(readOnly = true)
    public int countRejectedFacilities() {
        try {
            int count = facilityMapper.countFacilitiesByStatus("REJECTED");
            log.info("ê±°ë¶€ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì™„ë£Œ - count: {}", count);
            return count;
        } catch (Exception e) {
            log.error("ê±°ë¶€ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }
}
````

## File: src/main/java/com/example/carelink/service/MemberService.java
````java
package com.example.carelink.service;
import com.example.carelink.dao.MemberMapper;
import com.example.carelink.dao.FacilityMapper;
import com.example.carelink.dao.BoardMapper;
import com.example.carelink.dao.ReviewMapper;
import com.example.carelink.dao.JobMapper;
import com.example.carelink.dto.LoginDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.dto.FacilityDTO;
import org.springframework.web.multipart.MultipartFile;
import java.io.File;
import java.io.IOException;
import java.util.UUID;
import com.example.carelink.dto.BoardDTO;
import com.example.carelink.dto.ReviewDTO;
import com.example.carelink.dto.JobDTO;
import com.example.carelink.common.Constants;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import java.util.List;
import java.util.Map;
import java.util.HashMap;
import java.util.ArrayList;
import java.util.UUID;
@Slf4j
@Service
@RequiredArgsConstructor
public class MemberService {
    private final MemberMapper memberMapper;
    private final FacilityMapper facilityMapper;
    private final BoardMapper boardMapper;
    private final ReviewMapper reviewMapper;
    private final JobMapper jobMapper;
    private final PasswordEncoder passwordEncoder;
    public MemberDTO login(LoginDTO loginDTO) {
        try {
            MemberDTO member = memberMapper.findByUserId(loginDTO.getUserId());
            if (member == null) {
                log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ì ID: {}", loginDTO.getUserId());
                return null;
            }
            if (member.getIsDeleted() != null && member.getIsDeleted()) {
                log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ì‚­ì œ ì²˜ë¦¬ëœ ê³„ì •ì…ë‹ˆë‹¤. ID: {}", loginDTO.getUserId());
                return null;
            }
            if (member.getIsActive() != null && !member.getIsActive()) {
                log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ë¹„í™œì„±í™”ëœ ê³„ì •: {}", loginDTO.getUserId());
                return null;
            }
            if (member.getLoginFailCount() >= Constants.MAX_LOGIN_ATTEMPTS) {
                log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ë¡œê·¸ì¸ ì‹œë„ íšŸìˆ˜ ì´ˆê³¼. ID: {}", loginDTO.getUserId());
                return null;
            }
            log.info("=== ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ ë””ë²„ê·¸ ===");
            log.info("DB ì €ì¥ëœ ë¹„ë°€ë²ˆí˜¸: {}", member.getPassword());
            log.info("ì…ë ¥ëœ ë¹„ë°€ë²ˆí˜¸: {}", loginDTO.getPassword());
            boolean passwordMatches = loginDTO.getPassword().equals(member.getPassword());
            log.info("ë¹„ë°€ë²ˆí˜¸ ë§¤ì¹­ ê²°ê³¼: {}", passwordMatches);
            if (passwordMatches) {
                memberMapper.updateLoginSuccess(member.getMemberId());
                log.info("ë¡œê·¸ì¸ ì„±ê³µ: {}", loginDTO.getUserId());
                return member;
            } else {
                memberMapper.updateLoginFail(member.getMemberId());
                log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜. ID: {}, DB ë¹„ë°€ë²ˆí˜¸ ì‹œì‘: {}",
                    loginDTO.getUserId(), member.getPassword().substring(0, Math.min(10, member.getPassword().length())));
                return null;
            }
        } catch (Exception e) {
            log.error("ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", loginDTO.getUserId(), e);
            throw new RuntimeException("ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public void join(MemberDTO memberDTO) {
        join(memberDTO, null);
    }
    @Transactional
    public void join(MemberDTO memberDTO, MultipartFile facilityImageFile) {
        try {
            log.info("íšŒì›ê°€ì… ì²˜ë¦¬ ì‹œì‘ - userId: {}, address: {}, detailAddress: {}",
                    memberDTO.getUserId(), memberDTO.getAddress(), memberDTO.getDetailAddress());
            if (isUserIdDuplicate(memberDTO.getUserId())) {
                throw new IllegalArgumentException("ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤.");
            }
            if (memberDTO.getEmail() != null && !memberDTO.getEmail().trim().isEmpty()) {
                if (memberMapper.existsByEmail(memberDTO.getEmail())) {
                    throw new IllegalArgumentException("ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤.");
                }
            }
            memberDTO.setMemberId(null);
            if (memberDTO.getRole() == null || memberDTO.getRole().isEmpty()) {
                memberDTO.setRole(Constants.MEMBER_ROLE_USER);
            }
            memberDTO.setIsActive(true);
            memberDTO.setLoginFailCount(0);
            memberDTO.setIsDeleted(false);
            if (memberDTO.getPhone() != null && memberDTO.getPhone().isEmpty()) {
                memberDTO.setPhone(null);
            }
            if (memberDTO.getAddress() != null && memberDTO.getAddress().isEmpty()) {
                memberDTO.setAddress(null);
            }
            if (memberDTO.getDetailAddress() != null && memberDTO.getDetailAddress().isEmpty()) {
                memberDTO.setDetailAddress(null);
            }
            memberDTO.setProfileImage(null);
            memberDTO.setLastLoginAt(null);
            log.info("DB ì €ì¥ ì „ memberDTO - address: {}, detailAddress: {}",
                    memberDTO.getAddress(), memberDTO.getDetailAddress());
            int result = memberMapper.insertMember(memberDTO);
            if (result == 0) {
                throw new RuntimeException("íšŒì›ê°€ì… ë°ì´í„° ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. (ì˜í–¥ë°›ì€ í–‰ ì—†ìŒ)");
            }
            log.info("íšŒì›ê°€ì… DB ì €ì¥ ì„±ê³µ - memberId: {}", memberDTO.getMemberId());
            if (Constants.MEMBER_ROLE_FACILITY.equals(memberDTO.getRole()) && memberDTO.getFacilityName() != null) {
                FacilityDTO facilityDTO = new FacilityDTO();
                facilityDTO.setFacilityName(memberDTO.getFacilityName());
                facilityDTO.setFacilityType(memberDTO.getFacilityType());
                facilityDTO.setAddress(memberDTO.getAddress());
                facilityDTO.setDetailAddress(memberDTO.getDetailAddress());
                facilityDTO.setPhone(memberDTO.getFacilityPhone());
                facilityDTO.setDescription(memberDTO.getDescription());
                facilityDTO.setHomepage(memberDTO.getHomepage());
                facilityDTO.setCapacity(memberDTO.getCapacity());
                facilityDTO.setOperatingHours(memberDTO.getOperatingHours());
                facilityDTO.setFeatures(memberDTO.getFeatures());
                facilityDTO.setLatitude(memberDTO.getLatitude());
                facilityDTO.setLongitude(memberDTO.getLongitude());
                facilityDTO.setRegisteredMemberId(memberDTO.getMemberId());
                facilityDTO.setIsApproved(false);
                facilityDTO.setApprovalStatus("PENDING");
                if (facilityImageFile != null && !facilityImageFile.isEmpty()) {
                    String imagePath = saveFacilityImage(facilityImageFile, memberDTO.getUserId());
                    facilityDTO.setFacilityImage(imagePath);
                }
                int facilityResult = facilityMapper.insertFacility(facilityDTO);
                if (facilityResult == 0) {
                    throw new RuntimeException("ì‹œì„¤ ì •ë³´ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                }
                log.info("ì‹œì„¤ ì •ë³´ ì €ì¥ ì„±ê³µ: {}", facilityDTO.getFacilityName());
            }
            log.info("íšŒì›ê°€ì… ì„±ê³µ: {}", memberDTO.getUserId());
        } catch (IllegalArgumentException e) {
            log.warn("íšŒì›ê°€ì… ì‹¤íŒ¨ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§): {}", e.getMessage());
            throw e;
        } catch (Exception e) {
            log.error("íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ ë°œìƒ: {}", memberDTO.getUserId(), e);
            throw new RuntimeException("íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.", e);
        }
    }
    @Transactional(readOnly = true)
    public boolean isUserIdDuplicate(String userId) {
        try {
            return memberMapper.existsByUserId(userId);
        } catch (Exception e) {
            log.error("ì‚¬ìš©ì ID ì¤‘ë³µ ì²´í¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", userId, e);
            throw new RuntimeException("ì¤‘ë³µ ì²´í¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional(readOnly = true)
    public MemberDTO findById(Long memberId) {
        try {
            return memberMapper.findById(memberId);
        } catch (Exception e) {
            log.error("íšŒì› ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", memberId, e);
            throw new RuntimeException("íšŒì› ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional(readOnly = true)
    public MemberDTO getMemberByUserId(String userId) {
        try {
            return memberMapper.findByUserId(userId);
        } catch (Exception e) {
            log.error("ì‚¬ìš©ì IDë¡œ íšŒì› ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", userId, e);
            throw new RuntimeException("íšŒì› ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    public void updateMember(MemberDTO memberDTO, MultipartFile profileImageFile) throws Exception {
        log.info("íšŒì›ì •ë³´ ìˆ˜ì • ìš”ì²­: memberId={}, name={}, email={}",
                memberDTO.getMemberId(), memberDTO.getName(), memberDTO.getEmail());
        MemberDTO existingMember = memberMapper.findById(memberDTO.getMemberId());
        if (existingMember == null) {
            throw new IllegalArgumentException("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì›ì…ë‹ˆë‹¤.");
        }
        log.info("ê¸°ì¡´ íšŒì› ì •ë³´: memberId={}, name={}, email={}",
                existingMember.getMemberId(), existingMember.getName(), existingMember.getEmail());
        memberDTO.setPassword(existingMember.getPassword());
        memberDTO.setRole(existingMember.getRole());
        memberDTO.setIsActive(existingMember.getIsActive());
        memberDTO.setIsDeleted(existingMember.getIsDeleted());
        memberDTO.setLoginFailCount(existingMember.getLoginFailCount());
        memberDTO.setLastLoginAt(existingMember.getLastLoginAt());
        memberDTO.setCreatedAt(existingMember.getCreatedAt());
        if (profileImageFile != null && !profileImageFile.isEmpty()) {
            String profileImagePath = saveProfileImage(profileImageFile, existingMember.getUserId());
            memberDTO.setProfileImage(profileImagePath);
            if (existingMember.getProfileImage() != null && !existingMember.getProfileImage().isEmpty()) {
                try {
                    String projectRoot = System.getProperty("user.dir");
                    String oldImagePath = existingMember.getProfileImage();
                    if (oldImagePath.startsWith("/uploads/profile/")) {
                        String oldFileName = oldImagePath.substring("/uploads/profile/".length());
                        File oldFile = new File(projectRoot + "/src/main/resources/static" + oldImagePath);
                        if (oldFile.exists() && oldFile.delete()) {
                            log.info("ê¸°ì¡´ í”„ë¡œí•„ ì´ë¯¸ì§€ ì‚­ì œ ì„±ê³µ: {}", oldFile.getAbsolutePath());
                        }
                    }
                } catch (Exception e) {
                    log.warn("ê¸°ì¡´ í”„ë¡œí•„ ì´ë¯¸ì§€ ì‚­ì œ ì‹¤íŒ¨: {}", e.getMessage());
                }
            }
        } else {
            memberDTO.setProfileImage(existingMember.getProfileImage());
            log.debug("ìƒˆë¡œìš´ í”„ë¡œí•„ ì´ë¯¸ì§€ê°€ ì—†ì–´ ê¸°ì¡´ ì´ë¯¸ì§€ ìœ ì§€: {}", existingMember.getProfileImage());
        }
        log.info("ì—…ë°ì´íŠ¸í•  íšŒì› ì •ë³´: memberId={}, name={}, email={}, phone={}, address={}",
                memberDTO.getMemberId(), memberDTO.getName(), memberDTO.getEmail(),
                memberDTO.getPhone(), memberDTO.getAddress());
        int result = memberMapper.updateMember(memberDTO);
        log.info("íšŒì›ì •ë³´ ì—…ë°ì´íŠ¸ ì¿¼ë¦¬ ì‹¤í–‰ ê²°ê³¼: {} í–‰ì´ ì˜í–¥ë°›ìŒ", result);
        if (result == 0) {
            throw new RuntimeException("íšŒì› ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì˜í–¥ë°›ì€ í–‰: 0");
        }
        log.info("íšŒì›ì •ë³´ ìˆ˜ì • ì™„ë£Œ: userId={}, memberId={}", memberDTO.getUserId(), memberDTO.getMemberId());
    }
    @Transactional
    public void changePassword(String userId, String currentPassword, String newPassword, String confirmNewPassword) {
        MemberDTO member = memberMapper.findByUserId(userId);
        if (member == null) {
            throw new IllegalArgumentException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
        if (!currentPassword.equals(member.getPassword())) {
            throw new IllegalArgumentException("í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
        if (!newPassword.equals(confirmNewPassword)) {
            throw new IllegalArgumentException("ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ í™•ì¸ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
        if (newPassword.length() < 8) {
            throw new IllegalArgumentException("ìƒˆ ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
        }
        member.setPassword(newPassword);
        int result = memberMapper.updatePassword(member);
        if (result == 0) {
            throw new RuntimeException("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        }
        log.info("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì„œë¹„ìŠ¤: {} ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë¨.", userId);
    }
    @Transactional(readOnly = true)
    public Map<String, Integer> getUserContentCounts(Long memberId) {
        Map<String, Integer> counts = new HashMap<>();
        try {
            List<BoardDTO> boards = boardMapper.findBoardsByMemberId(memberId);
            List<ReviewDTO> reviews = reviewMapper.findReviewsByMemberId(memberId);
            List<JobDTO> jobs = jobMapper.findJobsByMemberId(memberId);
            int boardCount = boards != null ? boards.size() : 0;
            int reviewCount = reviews != null ? reviews.size() : 0;
            int jobCount = jobs != null ? jobs.size() : 0;
            counts.put("board", boardCount);
            counts.put("review", reviewCount);
            counts.put("job", jobCount);
            counts.put("total", boardCount + reviewCount + jobCount);
            log.info("ì‚¬ìš©ì ì½˜í…ì¸  ê°œìˆ˜ ì¡°íšŒ: memberId={}, ê²°ê³¼={}", memberId, counts);
            return counts;
        } catch (Exception e) {
            log.error("ì½˜í…ì¸  ê°œìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜: memberId={}", memberId, e);
            counts.put("board", 0);
            counts.put("review", 0);
            counts.put("job", 0);
            counts.put("total", 0);
            return counts;
        }
    }
    @Transactional(readOnly = true)
    public Map<String, Object> getMyPosts(Long memberId, String type, int page, int pageSize, int offset) {
        Map<String, Object> result = new HashMap<>();
        List<Map<String, Object>> posts = new ArrayList<>();
        try {
            Map<String, Integer> contentCounts = getUserContentCounts(memberId);
            result.put("contentCounts", contentCounts);
            if ("board".equals(type)) {
                List<BoardDTO> boards = boardMapper.findBoardsByMemberId(memberId);
                for (BoardDTO board : boards) {
                    Map<String, Object> post = new HashMap<>();
                    post.put("id", board.getBoardId());
                    post.put("title", board.getTitle());
                    post.put("content", board.getContent());
                    post.put("createdAt", board.getCreatedAt());
                    post.put("viewCount", board.getViewCount() != null ? board.getViewCount() : 0);
                    post.put("likeCount", board.getLikeCount() != null ? board.getLikeCount() : 0);
                    post.put("rating", null);
                    post.put("salary", null);
                    post.put("type", "board");
                    post.put("category", board.getBoardType());
                    post.put("url", "/board/detail/" + board.getBoardId());
                    posts.add(post);
                }
            } else if ("review".equals(type)) {
                List<ReviewDTO> reviews = reviewMapper.findReviewsByMemberId(memberId);
                for (ReviewDTO review : reviews) {
                    Map<String, Object> post = new HashMap<>();
                    post.put("id", review.getReviewId());
                    post.put("title", review.getTitle());
                    post.put("content", review.getContent());
                    post.put("createdAt", review.getCreatedAt());
                    post.put("viewCount", null);
                    post.put("likeCount", review.getLikeCount() != null ? review.getLikeCount() : 0);
                    post.put("rating", review.getRating());
                    post.put("salary", null);
                    post.put("type", "review");
                    post.put("category", "ë¦¬ë·°");
                    post.put("url", "/review/detail/" + review.getReviewId());
                    posts.add(post);
                }
            } else if ("job".equals(type)) {
                List<JobDTO> jobs = jobMapper.findJobsByMemberId(memberId);
                for (JobDTO job : jobs) {
                    Map<String, Object> post = new HashMap<>();
                    post.put("id", job.getJobId());
                    post.put("title", job.getTitle());
                    post.put("content", job.getContent());
                    post.put("createdAt", job.getCreatedAt());
                    post.put("viewCount", job.getViewCount() != null ? job.getViewCount() : 0);
                    post.put("likeCount", null);
                    post.put("rating", null);
                    post.put("salary", job.getSalaryDescription());
                    post.put("type", "job");
                    post.put("category", job.getJobType());
                    post.put("url", "/job/detail/" + job.getJobId());
                    posts.add(post);
                }
            } else {
                List<BoardDTO> boards = boardMapper.findBoardsByMemberId(memberId);
                List<ReviewDTO> reviews = reviewMapper.findReviewsByMemberId(memberId);
                List<JobDTO> jobs = jobMapper.findJobsByMemberId(memberId);
                for (BoardDTO board : boards) {
                    Map<String, Object> post = new HashMap<>();
                    post.put("id", board.getBoardId());
                    post.put("title", board.getTitle());
                    post.put("content", board.getContent());
                    post.put("createdAt", board.getCreatedAt());
                    post.put("viewCount", board.getViewCount() != null ? board.getViewCount() : 0);
                    post.put("likeCount", board.getLikeCount() != null ? board.getLikeCount() : 0);
                    post.put("rating", null);
                    post.put("salary", null);
                    post.put("type", "board");
                    post.put("category", board.getBoardType());
                    post.put("url", "/board/detail/" + board.getBoardId());
                    posts.add(post);
                }
                for (ReviewDTO review : reviews) {
                    Map<String, Object> post = new HashMap<>();
                    post.put("id", review.getReviewId());
                    post.put("title", review.getTitle());
                    post.put("content", review.getContent());
                    post.put("createdAt", review.getCreatedAt());
                    post.put("viewCount", null);
                    post.put("likeCount", review.getLikeCount() != null ? review.getLikeCount() : 0);
                    post.put("rating", review.getRating());
                    post.put("salary", null);
                    post.put("type", "review");
                    post.put("category", "ë¦¬ë·°");
                    post.put("url", "/review/detail/" + review.getReviewId());
                    posts.add(post);
                }
                for (JobDTO job : jobs) {
                    Map<String, Object> post = new HashMap<>();
                    post.put("id", job.getJobId());
                    post.put("title", job.getTitle());
                    post.put("content", job.getContent());
                    post.put("createdAt", job.getCreatedAt());
                    post.put("viewCount", job.getViewCount() != null ? job.getViewCount() : 0);
                    post.put("likeCount", null);
                    post.put("rating", null);
                    post.put("salary", job.getSalaryDescription());
                    post.put("type", "job");
                    post.put("category", job.getJobType());
                    post.put("url", "/job/detail/" + job.getJobId());
                    posts.add(post);
                }
            }
            posts.sort((a, b) -> ((java.time.LocalDateTime) b.get("createdAt")).compareTo((java.time.LocalDateTime) a.get("createdAt")));
            int totalCount = posts.size();
            int startIndex = Math.min(offset, totalCount);
            int endIndex = Math.min(offset + pageSize, totalCount);
            List<Map<String, Object>> pagedPosts = posts.subList(startIndex, endIndex);
            result.put("posts", pagedPosts);
            result.put("totalCount", totalCount);
            log.info("ë‚´ê°€ ì“´ ê¸€ ì¡°íšŒ ì™„ë£Œ: memberId={}, type={}, ì´{}\uac1c, í˜„ì¬í˜ì´ì§€ {}\uac1c",
                    memberId, type, totalCount, pagedPosts.size());
            return result;
        } catch (Exception e) {
            log.error("ë‚´ê°€ ì“´ ê¸€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜: memberId={}, type={}", memberId, type, e);
            result.put("posts", new ArrayList<>());
            result.put("totalCount", 0);
            result.put("contentCounts", Map.of("board", 0, "review", 0, "job", 0, "total", 0));
            return result;
        }
    }
    @Transactional
    public String deleteMemberWithOption(String userId, String deleteOption) {
        try {
            if ("anonymous".equals(deleteOption)) {
                int result = memberMapper.anonymizeMember(userId);
                if (result == 0) {
                    throw new RuntimeException("íšŒì› ìµëª…í™” ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                }
                log.info("íšŒì› ìµëª…í™” ì²˜ë¦¬ ì™„ë£Œ: {}", userId);
                return "íšŒì› íƒˆí‡´ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‘ì„±í•˜ì‹  ê²Œì‹œê¸€ì€ 'íƒˆí‡´íšŒì›'ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.";
            } else if ("complete".equals(deleteOption)) {
                deleteAllUserContent(userId);
                int result = memberMapper.hardDeleteMember(userId);
                if (result == 0) {
                    throw new RuntimeException("íšŒì› ì™„ì „ì‚­ì œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                }
                log.info("íšŒì› ì™„ì „ì‚­ì œ ì²˜ë¦¬ ì™„ë£Œ: {}", userId);
                return "íšŒì› íƒˆí‡´ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ê°œì¸ì •ë³´ì™€ ì‘ì„± ì½˜í…ì¸ ê°€ ì™„ì „íˆ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.";
            } else {
                int result = memberMapper.softDeleteMember(userId);
                if (result == 0) {
                    throw new RuntimeException("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                }
                log.info("íšŒì› ë…¼ë¦¬ì‚­ì œ ì²˜ë¦¬ ì™„ë£Œ: {}", userId);
                return "íšŒì› íƒˆí‡´ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.";
            }
        } catch (Exception e) {
            log.error("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: userId={}, option={}", userId, deleteOption, e);
            throw new RuntimeException("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public void deleteAllUserContent(String userId) {
        try {
            MemberDTO member = memberMapper.findByUserId(userId);
            if (member == null) {
                throw new RuntimeException("íšŒì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            }
            Long memberId = member.getMemberId();
            if (Constants.MEMBER_ROLE_FACILITY.equals(member.getRole())) {
                jobMapper.deleteByFacilityMemberId(memberId);
                log.info("ì‹œì„¤ êµ¬ì¸ê³µê³  ì‚­ì œ ì™„ë£Œ: memberId={}", memberId);
                reviewMapper.deleteByFacilityMemberId(memberId);
                log.info("ì‹œì„¤ ë¦¬ë·° ì‚­ì œ ì™„ë£Œ: memberId={}", memberId);
                facilityMapper.deleteByMemberId(memberId);
                log.info("ì‹œì„¤ ì •ë³´ ì‚­ì œ ì™„ë£Œ: memberId={}", memberId);
            }
            boardMapper.deleteByMemberId(memberId);
            reviewMapper.deleteByMemberId(memberId);
            jobMapper.deleteByMemberId(memberId);
            log.info("ì‚¬ìš©ì ì½˜í…ì¸  ì‚­ì œ ì™„ë£Œ: userId={}, memberId={}", userId, memberId);
        } catch (Exception e) {
            log.error("ì‚¬ìš©ì ì½˜í…ì¸  ì‚­ì œ ì¤‘ ì˜¤ë¥˜: userId={}", userId, e);
            throw e;
        }
    }
    @Transactional
    public void deleteMember(String userId) {
        int result = memberMapper.softDeleteMember(userId);
        if (result == 0) {
            throw new RuntimeException("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        log.info("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì™„ë£Œ: {}", userId);
    }
    private String saveProfileImage(MultipartFile file, String userId) {
        try {
            String uploadDir = Constants.PROFILE_UPLOAD_PATH;
            File uploadDirFile = new File(uploadDir);
            if (!uploadDirFile.exists()) {
                boolean created = uploadDirFile.mkdirs();
                log.info("í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} - {}", uploadDir, created ? "ì„±ê³µ" : "ì‹¤íŒ¨");
            }
            String originalFilename = file.getOriginalFilename();
            String extension = "";
            if (originalFilename != null && originalFilename.contains(".")) {
                extension = originalFilename.substring(originalFilename.lastIndexOf("."));
            }
            String savedFilename = "profile_" + userId + "_" + UUID.randomUUID().toString() + extension;
            File savedFile = new File(uploadDir + savedFilename);
            file.transferTo(savedFile);
            log.info("í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ: {}", savedFile.getAbsolutePath());
            return "/uploads/profile/" + savedFilename;
        } catch (IOException e) {
            log.error("í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: userId={}", userId, e);
            throw new RuntimeException("í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    private String saveFacilityImage(MultipartFile file, String userId) {
        try {
            String uploadDir = Constants.FACILITY_UPLOAD_PATH;
            File uploadDirFile = new File(uploadDir);
            if (!uploadDirFile.exists()) {
                boolean created = uploadDirFile.mkdirs();
                log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} - {}", uploadDir, created ? "ì„±ê³µ" : "ì‹¤íŒ¨");
            }
            String originalFilename = file.getOriginalFilename();
            String extension = "";
            if (originalFilename != null && originalFilename.contains(".")) {
                extension = originalFilename.substring(originalFilename.lastIndexOf("."));
            }
            String savedFilename = "facility_" + userId + "_" + UUID.randomUUID().toString() + extension;
            File savedFile = new File(uploadDir + savedFilename);
            file.transferTo(savedFile);
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ: {}", savedFile.getAbsolutePath());
            return "/uploads/facility/" + savedFilename;
        } catch (IOException e) {
            log.error("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: userId={}", userId, e);
            throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional(readOnly = true)
    public int getTotalMembersCount() {
        try {
            return memberMapper.getTotalCount();
        } catch (Exception e) {
            log.error("ì „ì²´ íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional(readOnly = true)
    public int getMemberCount() {
        try {
            return memberMapper.getMemberCount();
        } catch (Exception e) {
            log.error("íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }
    @Transactional(readOnly = true)
    public List<MemberDTO> getMembersWithPaging(MemberDTO searchDTO) {
        try {
            return memberMapper.findMembersWithPaging(searchDTO);
        } catch (Exception e) {
            log.error("í˜ì´ì§•ëœ íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional(readOnly = true)
    public List<MemberDTO> getMembersByRole(String role) {
        try {
            return memberMapper.findMembersByRole(role);
        } catch (Exception e) {
            log.error("ì—­í• ë³„ íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", role, e);
            throw new RuntimeException("ì—­í• ë³„ íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional
    public void updateMemberStatus(Long memberId, boolean isActive) {
        try {
            memberMapper.updateMemberStatus(memberId, isActive);
            log.info("íšŒì› ìƒíƒœ ë³€ê²½ ì™„ë£Œ: memberId={}, isActive={}", memberId, isActive);
        } catch (Exception e) {
            log.error("íšŒì› ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}", memberId, e);
            throw new RuntimeException("íšŒì› ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    @Transactional(readOnly = true)
    public int getTotalMemberCount() {
        try {
            return memberMapper.getTotalCount();
        } catch (Exception e) {
            log.error("ì „ì²´ íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }
    @Transactional(readOnly = true)
    public int getFacilityMemberCount() {
        try {
            return memberMapper.getFacilityMemberCount();
        } catch (Exception e) {
            log.error("ì‹œì„¤ íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }
    @Transactional(readOnly = true)
    public List<MemberDTO> getMembersByRole(String role, int page, int pageSize) {
        try {
            log.info("ì—­í• ë³„ íšŒì› ëª©ë¡ ì¡°íšŒ ì‹œì‘: role={}, page={}, pageSize={}", role, page, pageSize);
            String searchRole = "ALL".equals(role) ? null : role;
            List<MemberDTO> members = memberMapper.findMembersByRole(searchRole);
            log.info("ì—­í• ë³„ íšŒì› ì¡°íšŒ ì™„ë£Œ: role={}, count={} ëª…", role, members.size());
            return members;
        } catch (Exception e) {
            log.error("ì—­í• ë³„ íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: role={}, page={}", role, page, e);
            return new ArrayList<>();
        }
    }
    @Transactional(readOnly = true)
    public int getMemberCountByRole(String role) {
        try {
            if ("ALL".equals(role)) {
                return memberMapper.getTotalCount();
            } else if ("FACILITY".equals(role)) {
                return memberMapper.getFacilityMemberCount();
            } else if ("USER".equals(role)) {
                return memberMapper.getUserMemberCount();
            } else {
                return memberMapper.getMemberCountByRole(role);
            }
        } catch (Exception e) {
            log.error("ì—­í• ë³„ íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: role={}", role, e);
            return 0;
        }
    }
    @Transactional
    public boolean toggleMemberActive(Long memberId) {
        try {
            MemberDTO member = memberMapper.findById(memberId);
            if (member == null) {
                throw new RuntimeException("íšŒì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            }
            boolean newStatus = !Boolean.TRUE.equals(member.getIsActive());
            memberMapper.updateMemberStatus(memberId, newStatus);
            log.info("íšŒì› í™œì„±í™” ìƒíƒœ í† ê¸€ ì™„ë£Œ: memberId={}, newStatus={}", memberId, newStatus);
            return true;
        } catch (Exception e) {
            log.error("íšŒì› í™œì„±í™” ìƒíƒœ í† ê¸€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}", memberId, e);
            return false;
        }
    }
}
````

## File: src/main/resources/application.yml
````yaml
server:
  port: 8080
  servlet:
    context-path: /
    encoding:
      charset: UTF-8
      enabled: true
      force: true
spring:
  jackson:
    serialization:
      write-dates-as-timestamps: false
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: ${DB_URL:jdbc:mysql://localhost:3306/carelink?useSSL=false&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=UTF-8}
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:mysql}
    hikari:
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      maximum-pool-size: 10
      minimum-idle: 5
      pool-name: CareLink-HikariCP
      auto-commit: false
      transaction-isolation: TRANSACTION_READ_COMMITTED
  thymeleaf:
    prefix: classpath:/templates/
    suffix: .html
    mode: HTML
    encoding: UTF-8
    cache: false
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB
mybatis:
  type-aliases-package: com.example.carelink.dto
  mapper-locations: classpath:mapper/*.xml
  configuration:
    map-underscore-to-camel-case: true
    jdbc-type-for-null: varchar
    default-fetch-size: 100
    default-statement-timeout: 30
logging:
  level:
    root: INFO
    com.example.carelink: DEBUG
    com.example.carelink.dao: DEBUG
    org.springframework.web: DEBUG
    org.springframework.jdbc: DEBUG
    org.mybatis: DEBUG
    org.apache.ibatis: DEBUG
    org.springframework.transaction: DEBUG
    java.sql: DEBUG
    jdbc.sqltiming: INFO
    com.zaxxer.hikari: DEBUG
file:
  upload-dir:
    facility: C:/carelink-uploads/facility/
    profile: C:/carelink-uploads/profile/
    temp: C:/carelink-uploads/temp/
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: method
  show-actuator: true
  default-consumes-media-type: application/json
  default-produces-media-type: application/json
  paths-to-match:
    - /api/**
  packages-to-scan:
    - com.lightcare.controller
api:
  kakao:
    app-key: ${KAKAO_APP_KEY:b97b58672807a40c122a5deed8a98ea4}
````

## File: src/main/resources/mapper/facilityMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.FacilityMapper">
    <resultMap id="facilityResultMap" type="com.example.carelink.dto.FacilityDTO">
        <id property="facilityId" column="facility_id"/>
        <result property="facilityName" column="facility_name"/>
        <result property="facilityType" column="facility_type"/>
        <result property="address" column="address"/>
        <result property="detailAddress" column="detail_address"/>
        <result property="phone" column="phone"/>
        <result property="latitude" column="latitude"/>
        <result property="longitude" column="longitude"/>
        <result property="description" column="description"/>
        <result property="facilityImage" column="facility_image"/>
        <result property="facilityImageAltText" column="facility_image_alt_text"/>
        <result property="homepage" column="homepage"/>
        <result property="capacity" column="capacity"/>
        <result property="currentOccupancy" column="current_occupancy"/>
        <result property="operatingHours" column="operating_hours"/>
        <result property="features" column="features"/>
        <result property="averageRating" column="average_rating"/>
        <result property="reviewCount" column="review_count"/>
        <result property="gradeRating" column="grade_rating"/>
        <result property="registeredMemberId" column="registered_member_id"/>
        <result property="registeredMemberName" column="registered_member_name"/>
        <result property="isApproved" column="is_approved"/>
        <result property="approvalStatus" column="approval_status"/>
    </resultMap>
    <select id="searchFacilities" resultMap="facilityResultMap">
        SELECT f.*, m.name as registered_member_name
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        <where>
            f.is_deleted = false
            AND f.is_approved = true
            <if test="facilityName != null and facilityName != ''">
                AND f.facility_name LIKE CONCAT('%', #{facilityName}, '%')
            </if>
            <if test="facilityType != null and facilityType != ''">
                AND f.facility_type = #{facilityType}
            </if>
            <if test="address != null and address != ''">
                AND f.address LIKE CONCAT(#{address}, '%')
            </if>
            <if test="swLat != null and swLng != null and neLat != null and neLng != null">
                AND (f.latitude BETWEEN #{swLat} AND #{neLat})
                AND (f.longitude BETWEEN #{swLng} AND #{neLng})
            </if>
        </where>
        ORDER BY f.created_at DESC
    </select>
    <select id="getFacilityById" resultType="com.example.carelink.dto.FacilityDTO">
        SELECT
            f.facility_id,
            f.facility_name,
            f.facility_type,
            f.address,
            f.phone,
            f.latitude,
            f.longitude,
            f.description,
            f.facility_image,
            f.homepage,
            f.capacity,
            f.current_occupancy,
            f.operating_hours,
            f.features,
            f.average_rating,
            f.review_count,
            f.grade_rating,
            f.registered_member_id,
            m.name as registered_member_name,
            f.is_deleted,
            f.is_approved,
            CASE
                WHEN f.is_deleted = true THEN 'ì‚­ì œë¨'
                WHEN f.is_approved = false THEN 'ìŠ¹ì¸ëŒ€ê¸°'
                ELSE 'ì •ìƒ'
            END as status
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        WHERE f.facility_id = #{facilityId}
    </select>
    <select id="getAllFacilities" resultMap="facilityResultMap">
        SELECT f.*, m.name as registered_member_name
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        WHERE f.is_deleted = false
        AND f.is_approved = true
        ORDER BY f.created_at DESC
    </select>
    <insert id="insertFacility" parameterType="com.example.carelink.dto.FacilityDTO" useGeneratedKeys="true" keyProperty="facilityId">
        INSERT INTO facility (
            facility_name, facility_type, address, detail_address, phone,
            latitude, longitude, description, facility_image, facility_image_alt_text, homepage,
            capacity, current_occupancy, operating_hours, features,
            average_rating, review_count, registered_member_id,
            is_approved, approval_status
        ) VALUES (
                     #{facilityName}, #{facilityType}, #{address}, #{detailAddress}, #{phone},
                     #{latitude}, #{longitude}, #{description}, #{facilityImage}, #{facilityImageAltText}, #{homepage},
                     #{capacity}, #{currentOccupancy}, #{operatingHours}, #{features},
                     #{averageRating}, #{reviewCount}, #{registeredMemberId},
                     #{isApproved}, #{approvalStatus}
                 )
    </insert>
    <update id="updateFacility" parameterType="com.example.carelink.dto.FacilityDTO">
        UPDATE facility
        SET
            facility_name = #{facilityName},
            facility_type = #{facilityType},
            address = #{address},
            detail_address = #{detailAddress},
            phone = #{phone},
            latitude = #{latitude},
            longitude = #{longitude},
            description = #{description},
            facility_image = #{facilityImage},
            facility_image_alt_text = #{facilityImageAltText},
            homepage = #{homepage},
            capacity = #{capacity},
            current_occupancy = #{currentOccupancy},
            operating_hours = #{operatingHours},
            features = #{features},
            average_rating = #{averageRating},
            review_count = #{reviewCount},
            registered_member_id = #{registeredMemberId},
            is_approved = #{isApproved},
            approval_status = #{approvalStatus},
            updated_at = NOW()
        WHERE facility_id = #{facilityId}
    </update>
    <delete id="deleteFacility">
        DELETE FROM facility WHERE facility_id = #{facilityId}
    </delete>
    <select id="countFacilitiesByRegion" resultType="int">
        SELECT COUNT(*)
        FROM facility
        WHERE address LIKE CONCAT(#{region}, '%')
    </select>
    <select id="getFacilityCount" resultType="int">
        SELECT COUNT(*)
        FROM facility
        WHERE is_deleted = false
        AND is_approved = true
    </select>
    <select id="getAllActiveFacilities" resultType="com.example.carelink.dto.FacilityDTO">
        SELECT
            f.facility_id,
            f.facility_name,
            f.facility_type,
            f.address,
            f.phone,
            f.average_rating,
            f.review_count,
            f.registered_member_id,
            m.name as registered_member_name,
            f.is_deleted,
            f.is_approved,
            CASE
                WHEN f.is_deleted = true THEN 'ì‚­ì œë¨'
                WHEN f.is_approved = false THEN 'ìŠ¹ì¸ëŒ€ê¸°'
                ELSE 'ì •ìƒ'
            END as status
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        WHERE f.is_deleted = false
        AND f.is_approved = true
        ORDER BY f.facility_name ASC
    </select>
    <delete id="deleteByMemberId" parameterType="long">
        DELETE FROM facility WHERE registered_member_id = #{memberId}
    </delete>
    <select id="getFacilitiesByMemberId" parameterType="long" resultType="FacilityDTO">
        SELECT
            facility_id as facilityId,
            facility_name as facilityName,
            facility_type as facilityType,
            address,
            detail_address as detailAddress,
            phone,
            latitude,
            longitude,
            description,
            facility_image as facilityImage,
            homepage,
            capacity,
            current_occupancy as currentOccupancy,
            operating_hours as operatingHours,
            features,
            average_rating as averageRating,
            review_count as reviewCount,
            grade_rating as gradeRating,
            registered_member_id as registeredMemberId,
            is_approved as isApproved,
            approval_status as approvalStatus,
            created_at as createdAt,
            updated_at as updatedAt,
            is_deleted as isDeleted
        FROM facility
        WHERE registered_member_id = #{memberId} AND is_deleted = false
        ORDER BY created_at DESC
    </select>
    <select id="getFacilityByMemberId" parameterType="long" resultType="FacilityDTO">
        SELECT
            facility_id as facilityId,
            facility_name as facilityName,
            facility_type as facilityType,
            address,
            detail_address as detailAddress,
            phone,
            latitude,
            longitude,
            description,
            facility_image as facilityImage,
            homepage,
            capacity,
            current_occupancy as currentOccupancy,
            operating_hours as operatingHours,
            features,
            average_rating as averageRating,
            review_count as reviewCount,
            grade_rating as gradeRating,
            registered_member_id as registeredMemberId,
            is_approved as isApproved,
            approval_status as approvalStatus,
            created_at as createdAt,
            updated_at as updatedAt,
            is_deleted as isDeleted
        FROM facility
        WHERE registered_member_id = #{memberId} AND is_deleted = false
        ORDER BY created_at DESC
        LIMIT 1
    </select>
    <select id="getFacilitiesByApprovalStatus" parameterType="string" resultType="FacilityDTO">
        SELECT
            f.facility_id,
            f.facility_name,
            f.facility_type,
            f.address,
            f.detail_address,
            f.phone,
            f.description,
            f.homepage,
            f.capacity,
            f.operating_hours,
            f.features,
            f.facility_image,
            f.latitude,
            f.longitude,
            f.approval_status,
            f.registered_member_id,
            f.created_at,
            f.updated_at,
            m.user_id as registeredUserName,
            m.name as registeredMemberName
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        WHERE f.is_deleted = false
        <if test="approvalStatus != null and approvalStatus != ''">
            AND f.approval_status = #{approvalStatus}
        </if>
        ORDER BY f.created_at DESC
    </select>
    <update id="updateFacilityApprovalStatus">
        UPDATE facility
        SET
            approval_status = #{approvalStatus},
            is_approved = (#{approvalStatus} = 'APPROVED'),
            <if test="rejectionReason != null">
            description = CONCAT(COALESCE(description, ''), CHAR(10), 'ê±°ë¶€ì‚¬ìœ : ', #{rejectionReason}),
            </if>
            updated_at = NOW()
        WHERE facility_id = #{facilityId}
    </update>
    <select id="countFacilitiesByStatus" parameterType="string" resultType="int">
        SELECT COUNT(*)
        FROM facility
        WHERE is_deleted = false
        AND approval_status = #{approvalStatus}
    </select>
    <update id="updateFacilityMainImage">
        UPDATE facility
        SET
            facility_image = #{mainImagePath},
            image_count = #{imageCount},
            updated_at = NOW()
        WHERE facility_id = #{facilityId}
    </update>
</mapper>
````

## File: src/main/java/com/example/carelink/controller/FacilityController.java
````java
package com.example.carelink.controller;
import com.example.carelink.dto.FacilityDTO;
import com.example.carelink.dto.FacilityImageDTO;
import com.example.carelink.dto.ReviewDTO;
import com.example.carelink.service.FacilityService;
import com.example.carelink.service.ReviewService;
import com.example.carelink.service.FacilityImageService;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.context.annotation.Bean;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.common.Constants;
import org.springframework.beans.factory.annotation.Value;
import javax.servlet.http.HttpSession;
import java.util.List;
import java.util.ArrayList;
import java.util.Map;
import java.util.HashMap;
@Controller
@RequestMapping("/facility")
@RequiredArgsConstructor
@Slf4j
public class FacilityController {
    private final FacilityService facilityService;
    private final ReviewService reviewService;
    private final FacilityImageService facilityImageService;
    @Value("${api.kakao.app-key}")
    private String kakaoAppKey;
    @Bean
    public ObjectMapper objectMapper() {
        ObjectMapper mapper = new ObjectMapper();
        mapper.registerModule(new JavaTimeModule());
        return mapper;
    }
    @GetMapping("/facility-info/{facilityId}")
    @ResponseBody
    public Map<String, Object> getFacilityInfo(@PathVariable Long facilityId, HttpSession session) {
        Map<String, Object> result = new HashMap<>();
        try {
            MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (member == null) {
                result.put("success", false);
                result.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return result;
            }
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                result.put("success", false);
                result.put("message", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            if (!facility.getRegisteredMemberId().equals(member.getMemberId())
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                result.put("success", false);
                result.put("message", "í•´ë‹¹ ì‹œì„¤ ì •ë³´ë¥¼ ì¡°íšŒí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            result.put("success", true);
            result.put("facility", facility);
            log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ API ì¡°íšŒ ì™„ë£Œ: facilityId={}, memberId={}", facilityId, member.getMemberId());
        } catch (Exception e) {
            log.error("ì‹œì„¤ ìƒì„¸ ì •ë³´ API ì¡°íšŒ ì¤‘ ì˜¤ë¥˜: facilityId={}", facilityId, e);
            result.put("success", false);
            result.put("message", "ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return result;
    }
    @GetMapping("/manage/{facilityId}/edit")
    public String redirectToEdit(@PathVariable Long facilityId) {
        log.info("ë‚´ ì‹œì„¤ì—ì„œ ì‹œì„¤ ìˆ˜ì •ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸: facilityId={}", facilityId);
        return "redirect:/facility/edit/" + facilityId;
    }
    @GetMapping("/search")
    public String searchFacilities(
            @RequestParam(value = "facilityName", required = false) String facilityName,
            @RequestParam(value = "region", required = false) String region,
            @RequestParam(value = "facilityType", required = false) String facilityType,
            @RequestParam(value = "gradeRating", required = false) String gradeRating,
            Model model
    ) {
        log.info("ì‹œì„¤ ê²€ìƒ‰ í˜ì´ì§€ ì ‘ì† - facilityName: {}, region: {}, facilityType: {}, gradeRating: {}",
                facilityName, region, facilityType, gradeRating);
        List<FacilityDTO> facilityList = new ArrayList<>();
        try {
            facilityName = (facilityName != null && facilityName.trim().isEmpty()) ? null : facilityName;
            region = (region != null && region.trim().isEmpty()) ? null : region;
            facilityType = (facilityType != null && facilityType.trim().isEmpty()) ? null : facilityType;
            FacilityDTO searchCondition = new FacilityDTO();
            searchCondition.setFacilityName(facilityName != null ? facilityName.trim() : null);
            searchCondition.setFacilityType(facilityType);
            searchCondition.setAddress(region);
            facilityList = facilityService.searchFacilities(searchCondition);
            if (facilityList == null) {
                facilityList = new ArrayList<>();
            }
        } catch (Exception e) {
            log.error("ì‹œì„¤ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            facilityList = new ArrayList<>();
        }
        model.addAttribute("facilityList", facilityList);
        model.addAttribute("facilityName", facilityName);
        model.addAttribute("region", region);
        model.addAttribute("facilityType", facilityType);
        model.addAttribute("gradeRating", gradeRating);
        model.addAttribute("KAKAO_APP_KEY", kakaoAppKey);
        log.info("ê²€ìƒ‰ëœ ì‹œì„¤ ìˆ˜: {}", facilityList.size());
        return "facility/search";
    }
    @GetMapping("/detail/{facilityId}")
    public String getFacilityDetail(@PathVariable Long facilityId, Model model, HttpSession session) {
        log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ í˜ì´ì§€ ì ‘ì† - facilityId: {}", facilityId);
        try {
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                model.addAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/search";
            }
            List<ReviewDTO> recentReviews = reviewService.getReviewsByFacilityId(facilityId);
            if (recentReviews.size() > 5) {
                recentReviews = recentReviews.subList(0, 5);
            }
            Double averageRating = reviewService.getAverageRating(facilityId);
            MemberDTO sessionMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            boolean isAdmin = sessionMember != null && "ADMIN".equals(sessionMember.getRole());
            boolean isOwner = sessionMember != null && facility.getRegisteredMemberId() != null &&
                             facility.getRegisteredMemberId().equals(sessionMember.getMemberId());
            model.addAttribute("facility", facility);
            model.addAttribute("recentReviews", recentReviews);
            model.addAttribute("averageRating", averageRating);
            model.addAttribute("reviewCount", recentReviews.size());
            model.addAttribute("pageTitle", facility.getFacilityName() + " ìƒì„¸ì •ë³´");
            model.addAttribute("sessionMember", sessionMember);
            model.addAttribute("isAdmin", isAdmin);
            model.addAttribute("isOwner", isOwner);
            log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì™„ë£Œ - facilityId: {}, ë¦¬ë·° ìˆ˜: {}, ê´€ë¦¬ì: {}, ì†Œìœ ì: {}",
                    facilityId, recentReviews.size(), isAdmin, isOwner);
            return "facility/detail";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            model.addAttribute("error", "ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/search";
        }
    }
    @GetMapping("/manage")
    public String manageFacility(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (member == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        if (!Constants.MEMBER_ROLE_FACILITY.equals(member.getRole())) {
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ íšŒì›ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/";
        }
        try {
            List<FacilityDTO> facilities = facilityService.getFacilitiesByMemberId(member.getMemberId());
            model.addAttribute("facilities", facilities);
            model.addAttribute("facilityCount", facilities.size());
            log.info("ì‹œì„¤ ê´€ë¦¬ í˜ì´ì§€ ì ‘ê·¼: memberId={}, ì‹œì„¤ ìˆ˜={}",
                    member.getMemberId(), facilities.size());
            return "facility/manage";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ê´€ë¦¬ í˜ì´ì§€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}", member.getMemberId(), e);
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/";
        }
    }
    @GetMapping("/edit/{facilityId}")
    public String editFacilityForm(@PathVariable Long facilityId, HttpSession session,
                                   Model model, RedirectAttributes redirectAttributes) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (member == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        try {
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            if (!facility.getRegisteredMemberId().equals(member.getMemberId())
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            model.addAttribute("facility", facility);
            log.info("ì‹œì„¤ ìˆ˜ì • í˜ì´ì§€ ì ‘ê·¼: facilityId={}, memberId={}", facilityId, member.getMemberId());
            return "facility/edit";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ìˆ˜ì • í˜ì´ì§€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/manage";
        }
    }
    @PostMapping("/edit/{facilityId}")
    public String updateFacility(@PathVariable Long facilityId,
                                @ModelAttribute FacilityDTO facilityDTO,
                                @RequestParam(value = "facilityImageFile", required = false) MultipartFile facilityImageFile,
                                HttpSession session,
                                RedirectAttributes redirectAttributes) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (member == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        try {
            FacilityDTO existingFacility = facilityService.getFacilityById(facilityId);
            if (existingFacility == null) {
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            if (!existingFacility.getRegisteredMemberId().equals(member.getMemberId())
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            facilityDTO.setFacilityId(facilityId);
            facilityDTO.setRegisteredMemberId(existingFacility.getRegisteredMemberId());
            facilityDTO.setIsApproved(existingFacility.getIsApproved());
            String approvalStatus = existingFacility.getApprovalStatus();
            if (approvalStatus == null || approvalStatus.trim().isEmpty()) {
                if (existingFacility.getIsApproved() != null && existingFacility.getIsApproved()) {
                    approvalStatus = "APPROVED";
                    log.info("ğŸ”§ approval_status NULL ë°©ì§€ - ìŠ¹ì¸ëœ ì‹œì„¤: APPROVED");
                } else {
                    approvalStatus = "PENDING";
                    log.info("ğŸ”§ approval_status NULL ë°©ì§€ - ë¯¸ìŠ¹ì¸ ì‹œì„¤: PENDING");
                }
            }
            facilityDTO.setApprovalStatus(approvalStatus);
            facilityDTO.setAverageRating(existingFacility.getAverageRating());
            facilityDTO.setReviewCount(existingFacility.getReviewCount());
            facilityDTO.setCurrentOccupancy(existingFacility.getCurrentOccupancy());
            facilityDTO.setGradeRating(existingFacility.getGradeRating());
            facilityService.updateFacility(facilityDTO, facilityImageFile);
            log.info("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì™„ë£Œ: facilityId={}, memberId={}", facilityId, member.getMemberId());
            redirectAttributes.addFlashAttribute("message", "ì‹œì„¤ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/manage";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/edit/" + facilityId;
        }
    }
    @PostMapping("/delete/{facilityId}")
    public String deleteFacility(@PathVariable Long facilityId,
                                HttpSession session,
                                RedirectAttributes redirectAttributes) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (member == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        try {
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            if (!facility.getRegisteredMemberId().equals(member.getMemberId())
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            facilityService.deleteFacility(facilityId);
            log.info("ì‹œì„¤ ì‚­ì œ ì™„ë£Œ: facilityId={}, memberId={}", facilityId, member.getMemberId());
            redirectAttributes.addFlashAttribute("message", "ì‹œì„¤ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/manage";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/manage";
        }
    }
    @GetMapping("/api/{facilityId}")
    @ResponseBody
    public FacilityDTO getFacilityApi(@PathVariable Long facilityId, HttpSession session) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (member == null) {
            throw new RuntimeException("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        }
        FacilityDTO facility = facilityService.getFacilityById(facilityId);
        if (facility == null) {
            throw new RuntimeException("ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
        if (!facility.getRegisteredMemberId().equals(member.getMemberId())
            && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
            throw new RuntimeException("í•´ë‹¹ ì‹œì„¤ì„ ì¡°íšŒí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
        }
        return facility;
    }
    @GetMapping("/crop-images/{facilityId}")
    public String cropImagePage(@PathVariable Long facilityId,
                                HttpSession session,
                                Model model,
                                RedirectAttributes redirectAttributes) {
        try {
            MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (member == null) {
                redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            if (!facility.getRegisteredMemberId().equals(member.getMemberId())
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì˜ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            model.addAttribute("facility", facility);
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€ ì ‘ì†: facilityId={}, memberId={}", facilityId, member.getMemberId());
            return "facility/crop-images";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€ ì˜¤ë¥˜: facilityId={}", facilityId, e);
            redirectAttributes.addFlashAttribute("error", "í˜ì´ì§€ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/manage";
        }
    }
    @PostMapping("/crop-images/save/{facilityId}")
    @ResponseBody
    public Map<String, Object> saveFacilityImage(@PathVariable Long facilityId,
                                                @RequestParam("facilityImage") MultipartFile facilityImageFile,
                                                @RequestParam(value = "altText", required = false) String altText,
                                                @RequestParam(value = "format", required = false) String format,
                                                @RequestParam(value = "imageIndex", required = false) String imageIndex,
                                                @RequestParam(value = "customFileName", required = false) String customFileName,
                                                HttpSession session) {
        Map<String, Object> result = new HashMap<>();
        try {
            log.info("ğŸ”¥ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì‹œì‘ - facilityId: {}, ë°›ì€ íŒŒë¼ë¯¸í„°ë“¤ í™•ì¸", facilityId);
            log.info("ğŸ“‹ altText: '{}', format: '{}', imageIndex: '{}', customFileName: '{}'", altText, format, imageIndex, customFileName);
            log.info("ğŸ“ íŒŒì¼ ì •ë³´ - ì´ë¦„: '{}', í¬ê¸°: {}bytes, íƒ€ì…: '{}'",
                    facilityImageFile.getOriginalFilename(), facilityImageFile.getSize(), facilityImageFile.getContentType());
            MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (member == null) {
                log.error("âŒ ë¡œê·¸ì¸ëœ ì‚¬ìš©ìê°€ ì—†ìŒ");
                result.put("success", false);
                result.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return result;
            }
            log.info("ğŸ‘¤ ë¡œê·¸ì¸ ì‚¬ìš©ì: {} (role: {})", member.getUserId(), member.getRole());
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                result.put("success", false);
                result.put("message", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            if (!facility.getRegisteredMemberId().equals(member.getMemberId())
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                result.put("success", false);
                result.put("message", "í•´ë‹¹ ì‹œì„¤ì˜ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            log.info("ğŸ–¼ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ìš”ì²­ - facilityId: {}, í˜•ì‹: {}, ì¸ë±ìŠ¤: {}, í¬ê¸°: {} bytes",
                    facilityId, format, imageIndex, facilityImageFile.getSize());
            if (facilityImageFile.isEmpty()) {
                result.put("success", false);
                result.put("message", "ì—…ë¡œë“œëœ ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
                return result;
            }
            String finalAltText;
            if (altText != null && !altText.trim().isEmpty()) {
                finalAltText = altText.trim();
                log.info("ğŸ·ï¸ ì‹œì„¤ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ì„¤ì •: {}", finalAltText);
            } else {
                finalAltText = facility.getFacilityName() + " ì‹œì„¤ ì´ë¯¸ì§€";
                if (imageIndex != null && !imageIndex.isEmpty()) {
                    finalAltText += " " + (Integer.parseInt(imageIndex) + 1);
                }
                log.info("ğŸ·ï¸ ì‹œì„¤ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ê¸°ë³¸ê°’ ì„¤ì •: {}", finalAltText);
            }
            String contentType = facilityImageFile.getContentType();
            if (contentType != null) {
                log.info("ğŸ“· ì—…ë¡œë“œëœ ì´ë¯¸ì§€ í˜•ì‹: {}", contentType);
                if (contentType.contains("avif")) {
                    log.info("âœ¨ AVIF í˜•ì‹ ê°ì§€ - ìµœì  ì••ì¶• ì ìš©ë¨");
                } else if (contentType.contains("webp")) {
                    log.info("ğŸš€ WebP í˜•ì‹ ê°ì§€ - íš¨ìœ¨ì  ì••ì¶• ì ìš©ë¨");
                } else if (contentType.contains("jpeg")) {
                    log.info("ğŸ“¸ JPEG í˜•ì‹ ê°ì§€ - í˜¸í™˜ì„± ìš°ì„  ì ìš©ë¨");
                }
            }
            Integer orderIndex = imageIndex != null ? Integer.parseInt(imageIndex) : null;
            log.info("ğŸ”§ ì„œë¹„ìŠ¤ í˜¸ì¶œ ì „ - facilityId: {}, orderIndex: {}, altText: '{}', customFileName: '{}'",
                facilityId, orderIndex, finalAltText, customFileName);
            FacilityImageDTO savedImage = facilityImageService.saveSingleFacilityImage(
                facilityId, facilityImageFile, finalAltText, orderIndex, customFileName);
            log.info("âœ… ì„œë¹„ìŠ¤ í˜¸ì¶œ ì™„ë£Œ - ì €ì¥ëœ ì´ë¯¸ì§€ID: {}, ê²½ë¡œ: {}", savedImage.getImageId(), savedImage.getImagePath());
            result.put("success", true);
            result.put("message", "ì‹œì„¤ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
            result.put("facilityId", facilityId);
            result.put("imageIndex", imageIndex);
            result.put("imageId", savedImage.getImageId());
            result.put("imagePath", savedImage.getImagePath());
            log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì„±ê³µ: facilityId={}, imageId={}", facilityId, savedImage.getImageId());
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            result.put("success", false);
            result.put("message", "ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
        }
        return result;
    }
}
````

## File: src/main/java/com/example/carelink/controller/MemberController.java
````java
package com.example.carelink.controller;
import com.example.carelink.dto.LoginDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.service.MemberService;
import com.example.carelink.common.Constants;
import com.example.carelink.validation.groups.OnFacilityJoin;
import com.example.carelink.common.CustomMultipartFile;
import org.springframework.web.multipart.MultipartFile;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;
import javax.servlet.http.HttpSession;
import javax.validation.ConstraintViolation;
import javax.validation.Valid;
import javax.validation.Validator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Set;
@Slf4j
@Controller
@RequestMapping("/member")
@RequiredArgsConstructor
public class MemberController {
    private final MemberService memberService;
    @Autowired
    private Validator validator;
    @GetMapping("/login")
    public String loginForm(Model model) {
        model.addAttribute("loginDTO", new LoginDTO());
        return "member/login";
    }
    @PostMapping("/login")
    public String login(@Valid @ModelAttribute LoginDTO loginDTO,
                        BindingResult bindingResult,
                        HttpSession session,
                        RedirectAttributes redirectAttributes) {
        if (bindingResult.hasErrors()) {
            log.warn("ë¡œê·¸ì¸ í¼ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨: {}", bindingResult.getAllErrors());
            return "member/login";
        }
        log.info("ë¡œê·¸ì¸ ì‹œë„: userId={}, ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´={}", loginDTO.getUserId(), loginDTO.getPassword().length());
        try {
            MemberDTO loginMember = memberService.login(loginDTO);
            if (loginMember != null) {
                session.setAttribute(Constants.SESSION_MEMBER, loginMember);
                session.setAttribute("memberId", loginMember.getMemberId());
                log.info("ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œê·¸ì¸ ì„±ê³µ: userId={}, role={}", loginMember.getUserId(), loginMember.getRole());
                redirectAttributes.addFlashAttribute("message", "ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
                return "redirect:/";
            } else {
                log.warn("ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œê·¸ì¸ ì‹¤íŒ¨: userId={}", loginDTO.getUserId());
                redirectAttributes.addFlashAttribute("error", "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
        } catch (Exception e) {
            log.error("ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: userId={}", loginDTO.getUserId(), e);
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
    }
    @GetMapping("/logout")
    public String logout(HttpSession session, RedirectAttributes redirectAttributes) {
        if (session != null) {
            session.invalidate();
        }
        redirectAttributes.addFlashAttribute("message", "ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.");
        return "redirect:/";
    }
    @GetMapping("/join")
    public String joinForm(Model model) {
        model.addAttribute("memberDTO", new MemberDTO());
        return "member/join";
    }
    @PostMapping("/join")
    public String join(
            @Validated(value = {javax.validation.groups.Default.class})
            @ModelAttribute MemberDTO memberDTO,
            BindingResult bindingResult,
            @RequestParam(value = "facilityImageFile", required = false) MultipartFile facilityImageFile,
            HttpSession session,
            RedirectAttributes redirectAttributes,
            Model model) {
        if (!memberDTO.getPassword().equals(memberDTO.getPasswordConfirm())) {
            bindingResult.rejectValue("passwordConfirm", "password.mismatch", "ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            log.warn("íšŒì›ê°€ì… ì‹¤íŒ¨: ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ë¶ˆì¼ì¹˜");
            model.addAttribute("memberDTO", memberDTO);
            return "member/join";
        }
        if ("FACILITY".equalsIgnoreCase(memberDTO.getRole())) {
            Set<ConstraintViolation<MemberDTO>> violations = validator.validate(memberDTO, OnFacilityJoin.class);
            for (ConstraintViolation<MemberDTO> violation : violations) {
                bindingResult.rejectValue(violation.getPropertyPath().toString(), "", violation.getMessage());
            }
        }
        // 3. ìµœì¢… ìœ íš¨ì„± ê²€ì‚¬ ê²°ê³¼ í™•ì¸ (ê¸°ë³¸ ìœ íš¨ì„± + ìˆ˜ë™ ì¶”ê°€ëœ ìœ íš¨ì„±)
        if (bindingResult.hasErrors()) {
            log.warn("íšŒì›ê°€ì… ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨: {}", bindingResult.getAllErrors());
            model.addAttribute("memberDTO", memberDTO);
            return "member/join";
        }
        try {
            memberService.join(memberDTO, facilityImageFile);
            log.info("íšŒì›ê°€ì… ì„±ê³µ: {}", memberDTO.getUserId());
            LoginDTO loginDTO = new LoginDTO();
            loginDTO.setUserId(memberDTO.getUserId());
            loginDTO.setPassword(memberDTO.getPassword());
            MemberDTO loginMember = memberService.login(loginDTO);
            if (loginMember != null) {
                session.setAttribute(Constants.SESSION_MEMBER, loginMember);
                session.setAttribute("memberId", loginMember.getMemberId());
                log.info("íšŒì›ê°€ì… í›„ ìë™ ë¡œê·¸ì¸ ì„±ê³µ: userId={}", loginMember.getUserId());
                redirectAttributes.addFlashAttribute("message", "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. í™˜ì˜í•©ë‹ˆë‹¤!");
                return "redirect:/";
            } else {
                log.warn("íšŒì›ê°€ì…ì€ ì„±ê³µí–ˆìœ¼ë‚˜ ìë™ ë¡œê·¸ì¸ ì‹¤íŒ¨: {}", memberDTO.getUserId());
                redirectAttributes.addFlashAttribute("message", "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");
                return "redirect:/member/login";
            }
        } catch (IllegalArgumentException e) {
            log.warn("íšŒì›ê°€ì… ì‹¤íŒ¨: {}", e.getMessage());
            bindingResult.rejectValue("userId", "duplicate.userId", e.getMessage());
            return "member/join";
        } catch (Exception e) {
            log.error("íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ ë°œìƒ", e);
            redirectAttributes.addFlashAttribute("error", "íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "member/join";
        }
    }
    @PostMapping("/checkUserId")
    @ResponseBody
    public Map<String, Object> checkUserId(@RequestParam String userId) {
        Map<String, Object> result = new HashMap<>();
        try {
            boolean isDuplicate = memberService.isUserIdDuplicate(userId);
            result.put("isDuplicate", isDuplicate);
            result.put("message", isDuplicate ? "ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤." : "ì‚¬ìš© ê°€ëŠ¥í•œ ì•„ì´ë””ì…ë‹ˆë‹¤.");
        } catch (Exception e) {
            log.error("ì•„ì´ë”” ì¤‘ë³µ ì²´í¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            result.put("error", "ì¤‘ë³µ ì²´í¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return result;
    }
    @GetMapping("/debug/password-test")
    @ResponseBody
    public Map<String, Object> debugPasswordTest(@RequestParam(defaultValue = "admin") String userId,
                                                 @RequestParam(defaultValue = "admin123") String password) {
        Map<String, Object> result = new HashMap<>();
        try {
            MemberDTO member = memberService.getMemberByUserId(userId);
            if (member == null) {
                result.put("error", "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + userId);
                return result;
            }
            result.put("userId", member.getUserId());
            result.put("dbPasswordHash", member.getPassword());
            result.put("dbPasswordLength", member.getPassword().length());
            result.put("inputPassword", password);
            result.put("inputPasswordLength", password.length());
            boolean isValidBcryptFormat = member.getPassword().startsWith("$2a$") ||
                                        member.getPassword().startsWith("$2b$") ||
                                        member.getPassword().startsWith("$2y$");
            result.put("isValidBcryptFormat", isValidBcryptFormat);
            LoginDTO loginDTO = new LoginDTO();
            loginDTO.setUserId(userId);
            loginDTO.setPassword(password);
            MemberDTO loginResult = memberService.login(loginDTO);
            result.put("loginSuccess", loginResult != null);
            result.put("isActive", member.getIsActive());
            result.put("isDeleted", member.getIsDeleted());
            result.put("loginFailCount", member.getLoginFailCount());
            result.put("role", member.getRole());
            log.info("ë””ë²„ê¹… í…ŒìŠ¤íŠ¸ ê²°ê³¼: {}", result);
        } catch (Exception e) {
            log.error("ë””ë²„ê¹… í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            result.put("error", "í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: " + e.getMessage());
        }
        return result;
    }
    @GetMapping("/myinfo")
    public String verifyPasswordForm(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        return "member/verifyPassword";
    }
    @PostMapping("/myinfo/verify")
    public String verifyPassword(@RequestParam("password") String password,
                                HttpSession session,
                                RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        try {
            if (!password.equals(loginMember.getPassword())) {
                redirectAttributes.addFlashAttribute("error", "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                return "redirect:/member/myinfo";
            }
            return "redirect:/member/myinfo/edit";
        } catch (Exception e) {
            log.error("ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", loginMember.getUserId(), e);
            redirectAttributes.addFlashAttribute("error", "ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/myinfo";
        }
    }
    @GetMapping("/myinfo/edit")
    public String myInfoEdit(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        try {
            MemberDTO memberInfo = memberService.findById(loginMember.getMemberId());
            if (memberInfo == null) {
                redirectAttributes.addFlashAttribute("error", "ì‚¬ìš©ì ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                session.invalidate();
                return "redirect:/member/login";
            }
            session.setAttribute("myinfo_verified", true);
            model.addAttribute("memberDTO", memberInfo);
            return "member/myinfo";
        } catch (Exception e) {
            log.error("ë§ˆì´í˜ì´ì§€ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", loginMember.getUserId(), e);
            redirectAttributes.addFlashAttribute("error", "íšŒì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/";
        }
    }
    @GetMapping("/myinfo/crop-image")
    public String cropImagePage(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        Boolean myinfoVerified = (Boolean) session.getAttribute("myinfo_verified");
        if (myinfoVerified == null || !myinfoVerified) {
            redirectAttributes.addFlashAttribute("error", "ì˜¬ë°”ë¥¸ ê²½ë¡œë¡œ ì ‘ê·¼í•´ì£¼ì„¸ìš”.");
            return "redirect:/member/myinfo";
        }
        model.addAttribute("memberDTO", loginMember);
        return "member/crop-image";
    }
    @PostMapping("/myinfo/crop-image/upload")
    @ResponseBody
    public Map<String, Object> uploadTempImage(@RequestParam("imageFile") MultipartFile imageFile,
                                               HttpSession session) {
        Map<String, Object> result = new HashMap<>();
        try {
            MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (loginMember == null) {
                result.put("success", false);
                result.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return result;
            }
            if (imageFile.isEmpty()) {
                result.put("success", false);
                result.put("message", "ì´ë¯¸ì§€ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            if (imageFile.getSize() > 5 * 1024 * 1024) {
                result.put("success", false);
                result.put("message", "íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.");
                return result;
            }
            String contentType = imageFile.getContentType();
            if (contentType == null || !contentType.startsWith("image/")) {
                result.put("success", false);
                result.put("message", "ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
                return result;
            }
            byte[] imageBytes = imageFile.getBytes();
            String base64Image = "data:" + contentType + ";base64," +
                                java.util.Base64.getEncoder().encodeToString(imageBytes);
            session.setAttribute("tempImageData", base64Image);
            session.setAttribute("tempImageName", imageFile.getOriginalFilename());
            result.put("success", true);
            result.put("imageData", base64Image);
            result.put("message", "ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.");
        } catch (Exception e) {
            log.error("ì„ì‹œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            result.put("success", false);
            result.put("message", "ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return result;
    }
    @PostMapping("/myinfo/crop-image/save")
    @ResponseBody
    public Map<String, Object> saveCroppedImage(@RequestParam("croppedImage") MultipartFile croppedImageFile,
                                                @RequestParam(value = "altText", required = false) String altText,
                                                @RequestParam(value = "format", required = false) String format,
                                                @RequestParam(value = "quality", required = false) String quality,
                                                HttpSession session) {
        Map<String, Object> result = new HashMap<>();
        try {
            MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (loginMember == null) {
                result.put("success", false);
                result.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return result;
            }
            log.info("ğŸ–¼ï¸ í¬ë¡­ëœ ì´ë¯¸ì§€ ì €ì¥ ìš”ì²­ - í˜•ì‹: {}, í’ˆì§ˆ: {}, í¬ê¸°: {} bytes",
                    format, quality, croppedImageFile.getSize());
            log.info("ğŸ“ íŒŒì¼ ì •ë³´ - ì´ë¦„: {}, ì»¨í…ì¸  íƒ€ì…: {}",
                    croppedImageFile.getOriginalFilename(), croppedImageFile.getContentType());
            if (croppedImageFile.isEmpty()) {
                result.put("success", false);
                result.put("message", "ì—…ë¡œë“œëœ ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
                return result;
            }
            MemberDTO memberDTO = memberService.findById(loginMember.getMemberId());
            if (memberDTO == null) {
                result.put("success", false);
                result.put("message", "íšŒì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            log.info("ğŸ“‹ ë°›ì€ íŒŒë¼ë¯¸í„° - altText: '{}', format: '{}', quality: '{}'", altText, format, quality);
            if (altText != null && !altText.trim().isEmpty()) {
                memberDTO.setProfileImageAltText(altText.trim());
                log.info("ğŸ·ï¸ í”„ë¡œí•„ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ì„¤ì •: {}", altText.trim());
            } else {
                memberDTO.setProfileImageAltText("ì‚¬ìš©ì í”„ë¡œí•„ ì‚¬ì§„");
                log.info("ğŸ·ï¸ í”„ë¡œí•„ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ê¸°ë³¸ê°’ ì„¤ì •: ì‚¬ìš©ì í”„ë¡œí•„ ì‚¬ì§„");
            }
            String contentType = croppedImageFile.getContentType();
            if (contentType != null) {
                log.info("ğŸ“· ì—…ë¡œë“œëœ ì´ë¯¸ì§€ í˜•ì‹: {}", contentType);
                if (contentType.contains("avif")) {
                    log.info("âœ¨ AVIF í˜•ì‹ ê°ì§€ - ìµœì  ì••ì¶• ì ìš©ë¨");
                } else if (contentType.contains("webp")) {
                    log.info("ğŸš€ WebP í˜•ì‹ ê°ì§€ - íš¨ìœ¨ì  ì••ì¶• ì ìš©ë¨");
                } else if (contentType.contains("jpeg")) {
                    log.info("ğŸ“¸ JPEG í˜•ì‹ ê°ì§€ - í˜¸í™˜ì„± ìš°ì„  ì ìš©ë¨");
                }
            }
            memberService.updateMember(memberDTO, croppedImageFile);
            MemberDTO updatedMember = memberService.findById(loginMember.getMemberId());
            if (updatedMember != null) {
                session.setAttribute(Constants.SESSION_MEMBER, updatedMember);
            }
            session.removeAttribute("tempImageData");
            session.removeAttribute("tempImageName");
            result.put("success", true);
            result.put("message", "í”„ë¡œí•„ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
            result.put("profileImageUrl", updatedMember.getProfileImage());
        } catch (Exception e) {
            log.error("í¬ë¡­ëœ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            result.put("success", false);
            result.put("message", "ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return result;
    }
    @PostMapping("/myinfo/update")
    public String updateMember(@ModelAttribute MemberDTO memberDTO,
                               BindingResult bindingResult,
                               @RequestParam(value = "profileImageFile", required = false) MultipartFile profileImageFile,
                               HttpSession session,
                               Model model,
                               RedirectAttributes redirectAttributes) {
        log.info("íšŒì›ì •ë³´ ìˆ˜ì • ìš”ì²­: memberId={}, name={}, email={}",
                memberDTO.getMemberId(), memberDTO.getName(), memberDTO.getEmail());
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        log.info("ì„¸ì…˜ ë¡œê·¸ì¸ ë©¤ë²„: {}", loginMember != null ? loginMember.getMemberId() : "null");
        if (loginMember == null) {
            log.warn("ì„¸ì…˜ì— ë¡œê·¸ì¸ ì •ë³´ê°€ ì—†ìŒ");
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        if (!loginMember.getMemberId().equals(memberDTO.getMemberId())) {
            log.warn("ê¶Œí•œ ì—†ìŒ: ì„¸ì…˜ memberId={}, ìš”ì²­ memberId={}",
                    loginMember.getMemberId(), memberDTO.getMemberId());
            redirectAttributes.addFlashAttribute("error", "ê¶Œí•œì´ ì—†ê±°ë‚˜ ë¡œê·¸ì¸ ì •ë³´ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            return "redirect:/member/myinfo";
        }
        if (memberDTO.getName() == null || memberDTO.getName().trim().isEmpty()) {
            bindingResult.rejectValue("name", "NotBlank", "ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (memberDTO.getEmail() != null && !memberDTO.getEmail().trim().isEmpty()) {
            if (!memberDTO.getEmail().matches("^[A-Za-z0-9+_.-]+@(.+)$")) {
                bindingResult.rejectValue("email", "Email", "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.");
            }
        }
        if (memberDTO.getPhone() != null && !memberDTO.getPhone().trim().isEmpty()) {
            if (!memberDTO.getPhone().matches("^01(?:0|1|[6-9])-(?:\\d{3}|\\d{4})-\\d{4}$")) {
                bindingResult.rejectValue("phone", "Pattern", "ì˜¬ë°”ë¥¸ íœ´ëŒ€í° ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.");
            }
        }
        if (bindingResult.hasErrors()) {
            log.warn("íšŒì›ì •ë³´ ìˆ˜ì • ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨: {}", bindingResult.getAllErrors());
            model.addAttribute("memberDTO", memberDTO);
            return "member/myinfo";
        }
        try {
            log.info("íšŒì›ì •ë³´ ìˆ˜ì • ì„œë¹„ìŠ¤ í˜¸ì¶œ ì‹œì‘");
            memberService.updateMember(memberDTO, profileImageFile);
            log.info("íšŒì›ì •ë³´ ìˆ˜ì • ì„œë¹„ìŠ¤ í˜¸ì¶œ ì™„ë£Œ");
            MemberDTO updatedMember = memberService.findById(memberDTO.getMemberId());
            if (updatedMember != null) {
                session.setAttribute(Constants.SESSION_MEMBER, updatedMember);
                log.info("ì„¸ì…˜ ì •ë³´ ì—…ë°ì´íŠ¸ ì™„ë£Œ: {}", updatedMember.getName());
            } else {
                log.warn("ì—…ë°ì´íŠ¸ëœ íšŒì› ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨");
            }
            redirectAttributes.addFlashAttribute("message", "íšŒì›ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/myinfo/edit";
        } catch (Exception e) {
            log.error("íšŒì›ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}, userId={}",
                    memberDTO.getMemberId(), memberDTO.getUserId(), e);
            redirectAttributes.addFlashAttribute("error", "íšŒì›ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return "redirect:/member/myinfo/edit";
        }
    }
    @GetMapping("/mypage/change-password")
    public String changePasswordForm(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        return "member/changePassword";
    }
    @PostMapping("/mypage/change-password")
    public String changePassword(@RequestParam("currentPassword") String currentPassword,
                                 @RequestParam("newPassword") String newPassword,
                                 @RequestParam("confirmPassword") String confirmNewPassword,
                                 HttpSession session,
                                 RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        String userId = loginMember.getUserId();
        try {
            memberService.changePassword(userId, currentPassword, newPassword, confirmNewPassword);
            redirectAttributes.addFlashAttribute("message", "ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/myinfo/edit";
        } catch (IllegalArgumentException e) {
            redirectAttributes.addFlashAttribute("error", e.getMessage());
            return "redirect:/member/mypage/change-password";
        } catch (Exception e) {
            log.error("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", userId, e);
            redirectAttributes.addFlashAttribute("error", "ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/mypage/change-password";
        }
    }
    @GetMapping("/mypage/delete")
    public String deleteMemberForm(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        try {
            Map<String, Integer> contentCounts = memberService.getUserContentCounts(loginMember.getMemberId());
            model.addAttribute("member", loginMember);
            model.addAttribute("contentCounts", contentCounts);
            log.info("íšŒì›íƒˆí‡´ í˜ì´ì§€ ì ‘ê·¼: userId={}, ì‘ì„± ì½˜í…ì¸ ={}",
                    loginMember.getUserId(), contentCounts);
            return "member/deleteMember";
        } catch (Exception e) {
            log.error("íšŒì›íƒˆí‡´ í˜ì´ì§€ ë¡œë“œ ì¤‘ ì˜¤ë¥˜: {}", loginMember.getUserId(), e);
            model.addAttribute("member", loginMember);
            model.addAttribute("contentCounts", Map.of("board", 0, "review", 0, "job", 0));
            return "member/deleteMember";
        }
    }
    @PostMapping("/mypage/delete")
    public String deleteMember(@RequestParam("password") String password,
                              @RequestParam("confirmName") String confirmName,
                              @RequestParam("deleteOption") String deleteOption,
                              HttpSession session,
                              RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        String userId = loginMember.getUserId();
        log.info("íšŒì›íƒˆí‡´ ìš”ì²­: userId={}, ì…ë ¥ëœ ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´={}, ì…ë ¥ëœ ì´ë¦„={}, ì‚­ì œì˜µì…˜={}",
                userId, password.length(), confirmName, deleteOption);
        try {
            MemberDTO currentMember = memberService.findById(loginMember.getMemberId());
            if (currentMember == null) {
                log.warn("íšŒì›íƒˆí‡´: íšŒì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: memberId={}", loginMember.getMemberId());
                redirectAttributes.addFlashAttribute("error", "íšŒì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/member/mypage/delete";
            }
            log.info("ë¹„ë°€ë²ˆí˜¸ ë¹„êµ: DB ë¹„ë°€ë²ˆí˜¸={}, ì…ë ¥ ë¹„ë°€ë²ˆí˜¸={}",
                    currentMember.getPassword(), password);
            if (!password.equals(currentMember.getPassword())) {
                log.warn("íšŒì›íƒˆí‡´: ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜: userId={}", userId);
                redirectAttributes.addFlashAttribute("error", "í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                return "redirect:/member/mypage/delete";
            }
            log.info("ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì„±ê³µ: userId={}", userId);
            if (!confirmName.trim().equals(currentMember.getName().trim())) {
                log.warn("íšŒì›íƒˆí‡´: ì´ë¦„ ë¶ˆì¼ì¹˜: userId={}, ì…ë ¥ëœ ì´ë¦„={}, ë“±ë¡ëœ ì´ë¦„={}",
                        userId, confirmName, currentMember.getName());
                redirectAttributes.addFlashAttribute("error",
                        String.format("ì´ë¦„ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë“±ë¡ëœ ì´ë¦„ '%s'ë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.", currentMember.getName()));
                return "redirect:/member/mypage/delete";
            }
            log.info("ì´ë¦„ í™•ì¸ ì„±ê³µ: userId={}, ì´ë¦„={}", userId, confirmName);
            String resultMessage = memberService.deleteMemberWithOption(userId, deleteOption);
            log.info("íšŒì›íƒˆí‡´ ì™„ë£Œ: userId={}, ì˜µì…˜={}", userId, deleteOption);
            session.invalidate();
            redirectAttributes.addFlashAttribute("message", resultMessage + " ê·¸ë™ì•ˆ ì´ìš©í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.");
            return "redirect:/";
        } catch (Exception e) {
            log.error("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", userId, e);
            redirectAttributes.addFlashAttribute("error", "íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/mypage/delete";
        }
    }
    @GetMapping("/admin/members")
    public String listMembers(@RequestParam(defaultValue = "1") int page,
                              @RequestParam(defaultValue = "10") int pageSize,
                              @RequestParam(required = false) String role,
                              Model model, HttpSession session, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null || !Constants.MEMBER_ROLE_ADMIN.equals(loginMember.getRole())) {
            redirectAttributes.addFlashAttribute("error", "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/";
        }
        try {
            MemberDTO searchDTO = new MemberDTO();
            searchDTO.setPageSize(pageSize);
            searchDTO.setOffset((page - 1) * pageSize);
            searchDTO.setRole(role);
            List<MemberDTO> members = memberService.getMembersWithPaging(searchDTO);
            int totalMembers = memberService.getTotalMembersCount();
            int totalPages = (int) Math.ceil((double) totalMembers / pageSize);
            model.addAttribute("members", members);
            model.addAttribute("currentPage", page);
            model.addAttribute("totalPages", totalPages);
            model.addAttribute("pageSize", pageSize);
            model.addAttribute("currentRole", role);
            return "member/memberList";
        } catch (Exception e) {
            log.error("ê´€ë¦¬ì íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            redirectAttributes.addFlashAttribute("error", "íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/";
        }
    }
    @PostMapping("/admin/members/status")
    public String updateMemberStatus(@RequestParam Long memberId,
                                     @RequestParam boolean isActive,
                                     HttpSession session, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null || !Constants.MEMBER_ROLE_ADMIN.equals(loginMember.getRole())) {
            redirectAttributes.addFlashAttribute("error", "ê´€ë¦¬ì ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
            return "redirect:/member/admin/members";
        }
        try {
            memberService.updateMemberStatus(memberId, isActive);
            redirectAttributes.addFlashAttribute("message", "íšŒì› ìƒíƒœê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
        } catch (Exception e) {
            log.error("íšŒì› ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}", memberId, e);
            redirectAttributes.addFlashAttribute("error", "íšŒì› ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return "redirect:/member/admin/members";
    }
    @GetMapping("/mypost")
    public String myPosts(@RequestParam(defaultValue = "all") String type,
                         @RequestParam(defaultValue = "1") int page,
                         @RequestParam(defaultValue = "10") int pageSize,
                         HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        try {
            Long memberId = loginMember.getMemberId();
            log.info("ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ ìš”ì²­: memberId={}, type={}, page={}", memberId, type, page);
            int offset = (page - 1) * pageSize;
            Map<String, Object> result = memberService.getMyPosts(memberId, type, page, pageSize, offset);
            model.addAttribute("member", loginMember);
            model.addAttribute("posts", result.get("posts"));
            model.addAttribute("totalCount", result.get("totalCount"));
            model.addAttribute("currentType", type);
            model.addAttribute("currentPage", page);
            model.addAttribute("pageSize", pageSize);
            model.addAttribute("totalPages", (int) Math.ceil((double) (Integer) result.get("totalCount") / pageSize));
            Map<String, Integer> contentCounts = (Map<String, Integer>) result.get("contentCounts");
            model.addAttribute("contentCounts", contentCounts);
            log.info("ë‚´ê°€ ì“´ ê¸€ ì¡°íšŒ ì™„ë£Œ: ì´ {}ê°œ", result.get("totalCount"));
            return "member/myPosts";
        } catch (Exception e) {
            log.error("ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ ë¡œë“œ ì¤‘ ì˜¤ë¥˜: memberId={}", loginMember.getMemberId(), e);
            redirectAttributes.addFlashAttribute("error", "ë‚´ê°€ ì“´ ê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/myinfo/edit";
        }
    }
}
````
`````

## File: lightcare-summary.md
`````markdown
This file is a merged representation of the entire codebase, combined into a single document by Repomix.

# File Summary

## Purpose
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  a. A header with the file path (## File: path/to/file)
  b. The full contents of the file in a code block

## Usage Guidelines
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

## Notes
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)

# Directory Structure
```
backup/
  deprecated_files/
    crop-image.backup.html
    crop-image.backup.js
    edit.backup.html
    facility-image-cropper.backup.js
  facility-image-implementation/
    facility-image-implementation/
      detail-backup.html
      detail.html
      edit.html
      facility-detail-map.js
      facility-detail.js
      facility-edit.js
      FacilityController.java
      FacilityImageService.java
      README.md
gradle/
  wrapper/
    gradle-wrapper.properties
src/
  main/
    java/
      com/
        example/
          carelink/
            common/
              BaseDTO.java
              Constants.java
              CustomMultipartFile.java
              PageInfo.java
            config/
              DevSecurityConfig.java
              KakaoApiConfig.java
              ProdSecurityConfig.java
              SecurityConfig.java
              WebConfig.java
            controller/
              AdminController.java
              BoardController.java
              FacilityController.java
              FacilityImageApiController.java
              HomeController.java
              JobController.java
              MemberController.java
              ReviewController.java
            dao/
              BoardMapper.java
              FacilityImageMapper.java
              FacilityMapper.java
              JobApplicationMapper.java
              JobMapper.java
              MemberMapper.java
              ReviewMapper.java
            dto/
              BoardDTO.java
              FacilityDTO.java
              FacilityImageDTO.java
              JobApplicationDTO.java
              JobDTO.java
              LoginDTO.java
              MemberDTO.java
              ReviewDTO.java
            service/
              BoardService.java
              FacilityImageService.java
              FacilityService.java
              JobService.java
              MemberService.java
              ReviewService.java
            validation/
              groups/
                OnFacilityJoin.java
            CarelinkApplication.java
      Crolling.java
    resources/
      mapper/
        boardMapper.xml
        facilityImageMapper.xml
        facilityMapper.xml
        JobApplicationMapper.xml
        jobMapper.xml
        MemberMapper.xml
        reviewMapper.xml
      static/
        css/
          advanced-image-cropper.css
          common.css
          facility-image-uploader.css
          image-compressor.css
          rich-text-editor.css
        js/
          board-detail.js
          board-navigation.js
          change-password.js
          common.js
          delete-member.js
          facility-edit.js
          facility-image-core.js
          facility-image-cropper-module.js
          facility-image-data-module.js
          facility-image-dom-validator.js
          facility-image-event-coordinator.js
          facility-image-main-controller.js
          facility-image-seo-module.js
          facility-image-ui-module.js
          facility-image-upload-module.js
          facility-image-utils-module.js
          facility-manage.js
          image-compressor.js
          job-detail.js
          job-edit.js
          kakaomap.js
          my-posts.js
          myinfo.js
          phone-formatter.js
          review-detail.js
          review-write.js
          rich-text-editor-v2.js
          rich-text-editor.js
          smart-scroll-utility.js
      templates/
        admin/
          dashboard.html
          facilities.html
          members.html
          statistics.html
        board/
          detail.html
          edit.html
          faq-list.html
          faq-write.html
          list.html
          notice-list.html
          qna-list.html
          write.html
        facility/
          crop-images.html
          detail.html
          edit.backup.html
          edit.html
          manage.html
          search.html
        job/
          detail.html
          edit.html
          list.html
          write.html
        layout/
          footer.html
          header.html
        member/
          changePassword.html
          crop-image.backup.html
          crop-image.html
          deleteMember.html
          join.html
          login.html
          myinfo.html
          myPosts.html
          verifyPassword.html
        review/
          detail.html
          edit.html
          list.html
          write.html
        index.html
      application.yml
      db_performance_indexes.sql
      mybatis-config.xml
      schema.sql
.dockerignore
.repomixignore
build.gradle
CLAUDE.md
cleanup_files.sh
deploy-heroku.sh
deploy-ncp.sh
deploy-oracle.sh
deploy-railway.sh
deploy.sh
docker-compose.aws.yml
docker-compose.yml
docker-run-example.sh
Dockerfile
gradlew
gradlew.bat
ncp-server-setup.sh
nixpacks.toml
oracle-setup.sh
Procfile
README.md
reset_all_data.sql
reset_facility_images.sql
run-dev.bat
schema-postgresql.sql
SECURITY_NOTICE.md
start-server.sh
stop-server.sh
system.properties
tomorrow-checklist.md
```

# Files

## File: .repomixignore
````
# Build outputs
build/
target/
*.jar
*.war

# IDE files
.idea/
*.iml
.vscode/
.gradle/

# Dependencies
node_modules/

# Logs
*.log
logs/

# Database
*.db
*.sqlite

# Images and media
*.png
*.jpg
*.jpeg
*.gif
*.svg
*.ico

# Documents
docs/
*.pdf
*.doc
*.docx

# Test files
src/test/

# Config files with secrets
*.env
.env.*

# OS files
.DS_Store
Thumbs.db

# Git
.git/
.gitignore

# Other
*.zip
*.tar.gz
images/
static/images/
static/css/
static/js/bootstrap*
static/js/jquery*
````

## File: deploy-heroku.sh
````bash
#!/bin/bash

echo "ğŸš€ Heroku ë°°í¬ ìŠ¤í¬ë¦½íŠ¸"
echo "======================"

# ìƒ‰ìƒ ì •ì˜
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# 1. í”„ë¡œì íŠ¸ ë¹Œë“œ
echo -e "${YELLOW}ğŸ“¦ í”„ë¡œì íŠ¸ ë¹Œë“œ ì¤‘...${NC}"
./gradlew clean build -x test

if [ $? -eq 0 ]; then
    echo -e "${GREEN}âœ… ë¹Œë“œ ì„±ê³µ!${NC}"
else
    echo -e "${RED}âŒ ë¹Œë“œ ì‹¤íŒ¨!${NC}"
    exit 1
fi

# 2. Heroku CLI ì„¤ì¹˜ í™•ì¸
if ! command -v heroku &> /dev/null; then
    echo -e "${RED}âŒ Heroku CLIê°€ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.${NC}"
    echo "ë‹¤ìŒ ë§í¬ì—ì„œ ì„¤ì¹˜í•˜ì„¸ìš”: https://devcenter.heroku.com/articles/heroku-cli"
    exit 1
fi

# 3. Heroku ë¡œê·¸ì¸ í™•ì¸
echo -e "${YELLOW}ğŸ”‘ Heroku ë¡œê·¸ì¸ í™•ì¸ ì¤‘...${NC}"
heroku auth:whoami &> /dev/null
if [ $? -ne 0 ]; then
    echo -e "${YELLOW}ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. 'heroku login' ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.${NC}"
    heroku login
fi

# 4. Heroku ì•± ìƒì„±
echo -e "${YELLOW}ğŸ—ï¸  Heroku ì•± ìƒì„± ì¤‘...${NC}"
APP_NAME="elderberry-ai"
heroku create $APP_NAME

# 5. PostgreSQL ì• ë“œì˜¨ ì¶”ê°€
echo -e "${YELLOW}ğŸ—„ï¸  PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì¶”ê°€ ì¤‘...${NC}"
heroku addons:create heroku-postgresql:hobby-dev -a $APP_NAME

# 6. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
echo -e "${YELLOW}ğŸ”§ í™˜ê²½ë³€ìˆ˜ ì„¤ì • ì¤‘...${NC}"
heroku config:set KAKAO_APP_KEY=b97b58672807a40c122a5deed8a98ea4 -a $APP_NAME
heroku config:set SPRING_PROFILES_ACTIVE=heroku -a $APP_NAME

# 7. Git ì„¤ì • ë° ë°°í¬
echo -e "${YELLOW}ğŸ“¡ Git ë¦¬ëª¨íŠ¸ ì¶”ê°€ ë° ë°°í¬ ì¤‘...${NC}"
git remote add heroku https://git.heroku.com/$APP_NAME.git
git add .
git commit -m "Heroku ë°°í¬: $(date)"
git push heroku main

# 8. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™”
echo -e "${YELLOW}ğŸ—„ï¸  ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™” ì¤‘...${NC}"
heroku pg:psql -a $APP_NAME < schema-postgresql.sql

# 9. ì•± ì—´ê¸°
echo -e "${GREEN}ğŸ‰ ë°°í¬ ì™„ë£Œ!${NC}"
echo -e "${GREEN}ì•± URL: https://$APP_NAME.herokuapp.com${NC}"
heroku open -a $APP_NAME

echo ""
echo -e "${YELLOW}ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„:${NC}"
echo "1. ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì—°ê²°: heroku domains:add elderberry-ai.com -a $APP_NAME"
echo "2. DNS ì„¤ì •: elderberry-ai.comì˜ CNAMEì„ $APP_NAME.herokuapp.comìœ¼ë¡œ ì„¤ì •"
echo "3. SSL ì¸ì¦ì„œ: heroku certs:auto:enable -a $APP_NAME"
````

## File: deploy-ncp.sh
````bash
#!/bin/bash

# NCP ì„œë²„ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
# ì‚¬ìš©ë²•: ./deploy-ncp.sh

echo "ğŸš€ LightCare NCP ë°°í¬ ì‹œì‘..."

# 1. í”„ë¡œì íŠ¸ ë¹Œë“œ
echo "ğŸ“¦ í”„ë¡œì íŠ¸ ë¹Œë“œ ì¤‘..."
./gradlew clean build -x test

if [ $? -ne 0 ]; then
    echo "âŒ ë¹Œë“œ ì‹¤íŒ¨!"
    exit 1
fi

echo "âœ… ë¹Œë“œ ì™„ë£Œ!"

# 2. JAR íŒŒì¼ í™•ì¸
JAR_FILE="build/libs/carelink-0.0.1-SNAPSHOT.jar"
if [ ! -f "$JAR_FILE" ]; then
    echo "âŒ JAR íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: $JAR_FILE"
    exit 1
fi

# 3. ì„œë²„ ì •ë³´ ì„¤ì • (í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬)
SERVER_IP=${NCP_SERVER_IP:-"your-server-ip"}
SERVER_USER=${NCP_SERVER_USER:-"root"}
DEPLOY_PATH="/home/carelink"

echo "ğŸ“¤ ì„œë²„ë¡œ íŒŒì¼ ì „ì†¡ ì¤‘..."
echo "   ì„œë²„: $SERVER_USER@$SERVER_IP"
echo "   ê²½ë¡œ: $DEPLOY_PATH"

# 4. ì„œë²„ë¡œ JAR íŒŒì¼ ì „ì†¡
scp $JAR_FILE $SERVER_USER@$SERVER_IP:$DEPLOY_PATH/carelink.jar

if [ $? -ne 0 ]; then
    echo "âŒ íŒŒì¼ ì „ì†¡ ì‹¤íŒ¨!"
    exit 1
fi

# 5. ì„œë²„ ìŠ¤í¬ë¦½íŠ¸ ì „ì†¡
scp start-server.sh $SERVER_USER@$SERVER_IP:$DEPLOY_PATH/
scp stop-server.sh $SERVER_USER@$SERVER_IP:$DEPLOY_PATH/

# 6. ì„œë²„ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘
echo "ğŸ”„ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘ ì¤‘..."
ssh $SERVER_USER@$SERVER_IP << 'ENDSSH'
cd /home/carelink
chmod +x start-server.sh stop-server.sh

# ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
./stop-server.sh

# ìƒˆ ë²„ì „ ì‹œì‘
./start-server.sh

# ìƒíƒœ í™•ì¸
sleep 5
if pgrep -f "carelink.jar" > /dev/null; then
    echo "âœ… ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!"
    echo "ğŸ“Š í”„ë¡œì„¸ìŠ¤ ì •ë³´:"
    ps aux | grep carelink.jar | grep -v grep
else
    echo "âŒ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹¤íŒ¨!"
    echo "ë¡œê·¸ í™•ì¸: tail -f /var/log/carelink/application.log"
fi
ENDSSH

echo "ğŸ‰ ë°°í¬ ì™„ë£Œ!"
echo "ğŸŒ ì ‘ì† ì£¼ì†Œ: http://$SERVER_IP:8080"
````

## File: deploy-oracle.sh
````bash
#!/bin/bash

# Oracle Cloud ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
# ë¡œì»¬ì—ì„œ ì‹¤í–‰í•˜ì—¬ Oracle Cloud VMì— ë°°í¬

echo "ğŸ”® Oracle Cloud ë°°í¬ ìŠ¤í¬ë¦½íŠ¸"
echo "============================="

# ë³€ìˆ˜ ì„¤ì • (ìˆ˜ì • í•„ìš”)
SERVER_IP="your-oracle-server-ip"
SSH_KEY="~/.ssh/oracle-key"

# 1. í”„ë¡œì íŠ¸ ë¹Œë“œ
echo "ğŸ”¨ í”„ë¡œì íŠ¸ ë¹Œë“œ..."
./gradlew clean build -x test

# 2. JAR íŒŒì¼ í™•ì¸
if [ ! -f "build/libs/carelink-0.0.1-SNAPSHOT.jar" ]; then
    echo "âŒ JAR íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!"
    exit 1
fi

# 3. JAR íŒŒì¼ ì—…ë¡œë“œ
echo "ğŸ“¤ JAR íŒŒì¼ ì—…ë¡œë“œ..."
scp -i $SSH_KEY build/libs/carelink-0.0.1-SNAPSHOT.jar ubuntu@$SERVER_IP:/opt/lightcare/carelink.jar

# 4. ì„œë¹„ìŠ¤ ì¬ì‹œì‘
echo "ğŸ”„ ì„œë¹„ìŠ¤ ì¬ì‹œì‘..."
ssh -i $SSH_KEY ubuntu@$SERVER_IP "sudo systemctl restart lightcare"

# 5. ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
echo "âœ… ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸..."
ssh -i $SSH_KEY ubuntu@$SERVER_IP "sudo systemctl status lightcare"

echo "ğŸ‰ ë°°í¬ ì™„ë£Œ!"
echo "ğŸ“Œ ì ‘ì† ì£¼ì†Œ: http://$SERVER_IP:8080"
````

## File: deploy-railway.sh
````bash
#!/bin/bash

echo "ğŸš‚ Railway ë°°í¬ ìŠ¤í¬ë¦½íŠ¸"
echo "========================"

# 1. Git ìƒíƒœ í™•ì¸
echo "ğŸ“‹ Git ìƒíƒœ í™•ì¸..."
git status

# 2. ë³€ê²½ì‚¬í•­ ì»¤ë°‹
echo "ğŸ’¾ ë³€ê²½ì‚¬í•­ ì»¤ë°‹..."
git add .
git commit -m "Railway ë°°í¬ ì„¤ì • ì¶”ê°€"

# 3. Railway CLI ì„¤ì¹˜ í™•ì¸
if ! command -v railway &> /dev/null
then
    echo "âš ï¸ Railway CLIê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤."
    echo "ì„¤ì¹˜ ëª…ë ¹ì–´: npm install -g @railway/cli"
    exit 1
fi

# 4. Railway ë¡œê·¸ì¸
echo "ğŸ” Railway ë¡œê·¸ì¸..."
railway login

# 5. í”„ë¡œì íŠ¸ ìƒì„± ë˜ëŠ” ì—°ê²°
echo "ğŸ¯ Railway í”„ë¡œì íŠ¸ ì„¤ì •..."
railway link

# 6. ë°°í¬
echo "ğŸš€ ë°°í¬ ì‹œì‘..."
railway up

echo "âœ… ë°°í¬ ì™„ë£Œ!"
echo "ğŸ“Œ Railway ëŒ€ì‹œë³´ë“œì—ì„œ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”:"
echo "   - DB_URL"
echo "   - DB_USERNAME" 
echo "   - DB_PASSWORD"
echo "   - KAKAO_APP_KEY"
````

## File: deploy.sh
````bash
#!/bin/bash

echo "ğŸš€ LightCare ë°°í¬ ìŠ¤í¬ë¦½íŠ¸"
echo "=========================="

# 1. í”„ë¡œì íŠ¸ ë¹Œë“œ
echo "ğŸ“¦ í”„ë¡œì íŠ¸ ë¹Œë“œ ì¤‘..."
./gradlew clean build -x test

# 2. JAR íŒŒì¼ í™•ì¸
if [ -f "build/libs/carelink-*.jar" ]; then
    echo "âœ… JAR íŒŒì¼ ìƒì„± ì™„ë£Œ"
else
    echo "âŒ JAR íŒŒì¼ ìƒì„± ì‹¤íŒ¨"
    exit 1
fi

# 3. í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ìƒì„±
echo "ğŸ”§ í™˜ê²½ë³€ìˆ˜ ì„¤ì •..."
cat > application-production.yml << EOF
server:
  port: 8080

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/carelink?useSSL=false&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=UTF-8
    username: \${DB_USERNAME:root}
    password: \${DB_PASSWORD:mysql}

api:
  kakao:
    app-key: \${KAKAO_APP_KEY}
EOF

echo "âœ… ë°°í¬ ì¤€ë¹„ ì™„ë£Œ!"
echo "ğŸ’¡ ë‹¤ìŒ ë‹¨ê³„:"
echo "   1. AWS EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„±"
echo "   2. íƒ„ë ¥ì  IP í• ë‹¹" 
echo "   3. ë„ë©”ì¸ DNS ì„¤ì •"
echo "   4. ì„œë²„ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì—…ë¡œë“œ"
````

## File: gradlew
````
#!/bin/sh

#
# Copyright Â© 2015-2021 the original authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# SPDX-License-Identifier: Apache-2.0
#

##############################################################################
#
#   Gradle start up script for POSIX generated by Gradle.
#
#   Important for running:
#
#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is
#       noncompliant, but you have some other compliant shell such as ksh or
#       bash, then to run this script, type that shell name before the whole
#       command line, like:
#
#           ksh Gradle
#
#       Busybox and similar reduced shells will NOT work, because this script
#       requires all of these POSIX shell features:
#         * functions;
#         * expansions Â«$varÂ», Â«${var}Â», Â«${var:-default}Â», Â«${var+SET}Â»,
#           Â«${var#prefix}Â», Â«${var%suffix}Â», and Â«$( cmd )Â»;
#         * compound commands having a testable exit status, especially Â«caseÂ»;
#         * various built-in commands including Â«commandÂ», Â«setÂ», and Â«ulimitÂ».
#
#   Important for patching:
#
#   (2) This script targets any POSIX shell, so it avoids extensions provided
#       by Bash, Ksh, etc; in particular arrays are avoided.
#
#       The "traditional" practice of packing multiple parameters into a
#       space-separated string is a well documented source of bugs and security
#       problems, so this is (mostly) avoided, by progressively accumulating
#       options in "$@", and eventually passing that to Java.
#
#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,
#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;
#       see the in-line comments for details.
#
#       There are tweaks for specific operating systems such as AIX, CygWin,
#       Darwin, MinGW, and NonStop.
#
#   (3) This script is generated from the Groovy template
#       https://github.com/gradle/gradle/blob/HEAD/platforms/jvm/plugins-application/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt
#       within the Gradle project.
#
#       You can find Gradle at https://github.com/gradle/gradle/.
#
##############################################################################

# Attempt to set APP_HOME

# Resolve links: $0 may be a link
app_path=$0

# Need this for daisy-chained symlinks.
while
    APP_HOME=${app_path%"${app_path##*/}"}  # leaves a trailing /; empty if no leading path
    [ -h "$app_path" ]
do
    ls=$( ls -ld "$app_path" )
    link=${ls#*' -> '}
    case $link in             #(
      /*)   app_path=$link ;; #(
      *)    app_path=$APP_HOME$link ;;
    esac
done

# This is normally unused
# shellcheck disable=SC2034
APP_BASE_NAME=${0##*/}
# Discard cd standard output in case $CDPATH is set (https://github.com/gradle/gradle/issues/25036)
APP_HOME=$( cd -P "${APP_HOME:-./}" > /dev/null && printf '%s\n' "$PWD" ) || exit

# Use the maximum available, or set MAX_FD != -1 to use that value.
MAX_FD=maximum

warn () {
    echo "$*"
} >&2

die () {
    echo
    echo "$*"
    echo
    exit 1
} >&2

# OS specific support (must be 'true' or 'false').
cygwin=false
msys=false
darwin=false
nonstop=false
case "$( uname )" in                #(
  CYGWIN* )         cygwin=true  ;; #(
  Darwin* )         darwin=true  ;; #(
  MSYS* | MINGW* )  msys=true    ;; #(
  NONSTOP* )        nonstop=true ;;
esac

CLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar


# Determine the Java command to use to start the JVM.
if [ -n "$JAVA_HOME" ] ; then
    if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
        # IBM's JDK on AIX uses strange locations for the executables
        JAVACMD=$JAVA_HOME/jre/sh/java
    else
        JAVACMD=$JAVA_HOME/bin/java
    fi
    if [ ! -x "$JAVACMD" ] ; then
        die "ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
    fi
else
    JAVACMD=java
    if ! command -v java >/dev/null 2>&1
    then
        die "ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
    fi
fi

# Increase the maximum file descriptors if we can.
if ! "$cygwin" && ! "$darwin" && ! "$nonstop" ; then
    case $MAX_FD in #(
      max*)
        # In POSIX sh, ulimit -H is undefined. That's why the result is checked to see if it worked.
        # shellcheck disable=SC2039,SC3045
        MAX_FD=$( ulimit -H -n ) ||
            warn "Could not query maximum file descriptor limit"
    esac
    case $MAX_FD in  #(
      '' | soft) :;; #(
      *)
        # In POSIX sh, ulimit -n is undefined. That's why the result is checked to see if it worked.
        # shellcheck disable=SC2039,SC3045
        ulimit -n "$MAX_FD" ||
            warn "Could not set maximum file descriptor limit to $MAX_FD"
    esac
fi

# Collect all arguments for the java command, stacking in reverse order:
#   * args from the command line
#   * the main class name
#   * -classpath
#   * -D...appname settings
#   * --module-path (only if needed)
#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.

# For Cygwin or MSYS, switch paths to Windows format before running java
if "$cygwin" || "$msys" ; then
    APP_HOME=$( cygpath --path --mixed "$APP_HOME" )
    CLASSPATH=$( cygpath --path --mixed "$CLASSPATH" )

    JAVACMD=$( cygpath --unix "$JAVACMD" )

    # Now convert the arguments - kludge to limit ourselves to /bin/sh
    for arg do
        if
            case $arg in                                #(
              -*)   false ;;                            # don't mess with options #(
              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath
                    [ -e "$t" ] ;;                      #(
              *)    false ;;
            esac
        then
            arg=$( cygpath --path --ignore --mixed "$arg" )
        fi
        # Roll the args list around exactly as many times as the number of
        # args, so each arg winds up back in the position where it started, but
        # possibly modified.
        #
        # NB: a `for` loop captures its iteration list before it begins, so
        # changing the positional parameters here affects neither the number of
        # iterations, nor the values presented in `arg`.
        shift                   # remove old arg
        set -- "$@" "$arg"      # push replacement arg
    done
fi


# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
DEFAULT_JVM_OPTS='"-Xmx64m" "-Xms64m"'

# Collect all arguments for the java command:
#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and optsEnvironmentVar are not allowed to contain shell fragments,
#     and any embedded shellness will be escaped.
#   * For example: A user cannot expect ${Hostname} to be expanded, as it is an environment variable and will be
#     treated as '${Hostname}' itself on the command line.

set -- \
        "-Dorg.gradle.appname=$APP_BASE_NAME" \
        -classpath "$CLASSPATH" \
        org.gradle.wrapper.GradleWrapperMain \
        "$@"

# Stop when "xargs" is not available.
if ! command -v xargs >/dev/null 2>&1
then
    die "xargs is not available"
fi

# Use "xargs" to parse quoted args.
#
# With -n1 it outputs one arg per line, with the quotes and backslashes removed.
#
# In Bash we could simply go:
#
#   readarray ARGS < <( xargs -n1 <<<"$var" ) &&
#   set -- "${ARGS[@]}" "$@"
#
# but POSIX shell has neither arrays nor command substitution, so instead we
# post-process each arg (as a line of input to sed) to backslash-escape any
# character that might be a shell metacharacter, then use eval to reverse
# that process (while maintaining the separation between arguments), and wrap
# the whole thing up as a single "set" statement.
#
# This will of course break if any of these variables contains a newline or
# an unmatched quote.
#

eval "set -- $(
        printf '%s\n' "$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS" |
        xargs -n1 |
        sed ' s~[^-[:alnum:]+,./:=@_]~\\&~g; ' |
        tr '\n' ' '
    )" '"$@"'

exec "$JAVACMD" "$@"
````

## File: ncp-server-setup.sh
````bash
#!/bin/bash

# NCP ì„œë²„ ì´ˆê¸° ì„¤ì • ìŠ¤í¬ë¦½íŠ¸
# ì„œë²„ì— SSH ì ‘ì† í›„ ì‹¤í–‰

echo "ğŸ”§ NCP ì„œë²„ ì´ˆê¸° ì„¤ì • ì‹œì‘..."

# 1. ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
echo "ğŸ“¦ ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸..."
sudo apt-get update
sudo apt-get upgrade -y

# 2. Java 11 ì„¤ì¹˜
echo "â˜• Java 11 ì„¤ì¹˜..."
sudo apt-get install openjdk-11-jdk -y
java -version

# 3. MySQL í´ë¼ì´ì–¸íŠ¸ ì„¤ì¹˜
echo "ğŸ¬ MySQL í´ë¼ì´ì–¸íŠ¸ ì„¤ì¹˜..."
sudo apt-get install mysql-client -y

# 4. Nginx ì„¤ì¹˜ (ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œìš©)
echo "ğŸŒ Nginx ì„¤ì¹˜..."
sudo apt-get install nginx -y

# 5. ë°©í™”ë²½ ì„¤ì •
echo "ğŸ”’ ë°©í™”ë²½ ì„¤ì •..."
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 80/tcp    # HTTP
sudo ufw allow 443/tcp   # HTTPS
sudo ufw allow 8080/tcp  # Spring Boot
sudo ufw --force enable

# 6. ì• í”Œë¦¬ì¼€ì´ì…˜ ë””ë ‰í† ë¦¬ ìƒì„±
echo "ğŸ“ ë””ë ‰í† ë¦¬ ìƒì„±..."
sudo mkdir -p /home/carelink
sudo mkdir -p /home/carelink/uploads/{facility,profile,temp}
sudo mkdir -p /var/log/carelink

# 7. ì‚¬ìš©ì ìƒì„± (ë³´ì•ˆ)
echo "ğŸ‘¤ carelink ì‚¬ìš©ì ìƒì„±..."
sudo useradd -m -s /bin/bash carelink
sudo chown -R carelink:carelink /home/carelink
sudo chown -R carelink:carelink /var/log/carelink

# 8. Nginx ì„¤ì •
echo "âš™ï¸ Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„¤ì •..."
sudo tee /etc/nginx/sites-available/carelink << 'EOF'
server {
    listen 80;
    server_name your-domain.com;
    
    client_max_body_size 50M;
    
    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # íƒ€ì„ì•„ì›ƒ ì„¤ì •
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }
    
    # ì •ì  íŒŒì¼ ì§ì ‘ ì„œë¹™ (ì„±ëŠ¥ í–¥ìƒ)
    location /css/ {
        alias /home/carelink/static/css/;
        expires 30d;
    }
    
    location /js/ {
        alias /home/carelink/static/js/;
        expires 30d;
    }
    
    location /images/ {
        alias /home/carelink/static/images/;
        expires 30d;
    }
}
EOF

# Nginx ì‚¬ì´íŠ¸ í™œì„±í™”
sudo ln -sf /etc/nginx/sites-available/carelink /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx

# 9. Systemd ì„œë¹„ìŠ¤ ìƒì„±
echo "ğŸš€ Systemd ì„œë¹„ìŠ¤ ìƒì„±..."
sudo tee /etc/systemd/system/carelink.service << 'EOF'
[Unit]
Description=LightCare Spring Boot Application
After=syslog.target network.target

[Service]
Type=simple
User=carelink
Group=carelink
WorkingDirectory=/home/carelink

Environment="SPRING_PROFILES_ACTIVE=prod"
Environment="DB_HOST=your-db-endpoint"
Environment="DB_NAME=carelink"
Environment="DB_USERNAME=carelink"
Environment="DB_PASSWORD=your-db-password"
Environment="KAKAO_APP_KEY=b97b58672807a40c122a5deed8a98ea4"

ExecStart=/usr/bin/java -Xms512m -Xmx1024m -jar /home/carelink/carelink.jar
ExecStop=/bin/kill -TERM $MAINPID

Restart=on-failure
RestartSec=10

StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
EOF

sudo systemctl daemon-reload
sudo systemctl enable carelink.service

# 10. ë¡œê·¸ ë¡œí…Œì´ì…˜ ì„¤ì •
echo "ğŸ“ ë¡œê·¸ ë¡œí…Œì´ì…˜ ì„¤ì •..."
sudo tee /etc/logrotate.d/carelink << 'EOF'
/var/log/carelink/*.log {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 0644 carelink carelink
    sharedscripts
    postrotate
        systemctl reload carelink
    endscript
}
EOF

echo "âœ… ì„œë²„ ì´ˆê¸° ì„¤ì • ì™„ë£Œ!"
echo ""
echo "ğŸ“Œ ë‹¤ìŒ ë‹¨ê³„:"
echo "1. DB ì—”ë“œí¬ì¸íŠ¸ ë° ë¹„ë°€ë²ˆí˜¸ ì„¤ì •"
echo "2. ë„ë©”ì¸ ì„¤ì • (/etc/nginx/sites-available/carelink)"
echo "3. JAR íŒŒì¼ ì—…ë¡œë“œ í›„ ì„œë¹„ìŠ¤ ì‹œì‘:"
echo "   sudo systemctl start carelink"
echo "   sudo systemctl status carelink"
echo "   sudo journalctl -u carelink -f"
````

## File: nixpacks.toml
````toml
[phases.setup]
nixPkgs = ["...", "jdk11"]

[start]
cmd = "java -jar -Dserver.port=$PORT build/libs/carelink-0.0.1-SNAPSHOT.jar"
````

## File: oracle-setup.sh
````bash
#!/bin/bash

echo "ğŸ”® Oracle Cloud ì„œë²„ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸"
echo "=================================="

# 1. ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
echo "ğŸ“¦ ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸..."
sudo apt update && sudo apt upgrade -y

# 2. Java 11 ì„¤ì¹˜
echo "â˜• Java 11 ì„¤ì¹˜..."
sudo apt install openjdk-11-jdk -y
java -version

# 3. MySQL 8 ì„¤ì¹˜
echo "ğŸ—„ï¸ MySQL 8.0 ì„¤ì¹˜..."
sudo apt install mysql-server -y

# 4. MySQL ë³´ì•ˆ ì„¤ì •
echo "ğŸ”’ MySQL ë³´ì•ˆ ì„¤ì •..."
sudo mysql << EOF
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'LightCare2024!';
CREATE DATABASE carelink CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'lightcare'@'%' IDENTIFIED BY 'LightCare2024!';
GRANT ALL PRIVILEGES ON carelink.* TO 'lightcare'@'%';
FLUSH PRIVILEGES;
EOF

# 5. ë°©í™”ë²½ ì„¤ì •
echo "ğŸ”¥ ë°©í™”ë²½ ê·œì¹™ ì„¤ì •..."
sudo iptables -I INPUT 6 -m state --state NEW -p tcp --dport 8080 -j ACCEPT
sudo iptables -I INPUT 6 -m state --state NEW -p tcp --dport 80 -j ACCEPT
sudo iptables -I INPUT 6 -m state --state NEW -p tcp --dport 443 -j ACCEPT
sudo netfilter-persistent save

# 6. ì• í”Œë¦¬ì¼€ì´ì…˜ ë””ë ‰í† ë¦¬ ìƒì„±
echo "ğŸ“ ì• í”Œë¦¬ì¼€ì´ì…˜ ë””ë ‰í† ë¦¬ ìƒì„±..."
sudo mkdir -p /opt/lightcare
sudo chown ubuntu:ubuntu /opt/lightcare

# 7. ì„œë¹„ìŠ¤ íŒŒì¼ ìƒì„±
echo "ğŸ¯ ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ ìƒì„±..."
sudo tee /etc/systemd/system/lightcare.service > /dev/null << 'EOF'
[Unit]
Description=LightCare Spring Boot Application
After=syslog.target

[Service]
User=ubuntu
ExecStart=/usr/bin/java -jar /opt/lightcare/carelink.jar
SuccessExitStatus=143
StandardOutput=append:/var/log/lightcare/app.log
StandardError=append:/var/log/lightcare/error.log
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# 8. ë¡œê·¸ ë””ë ‰í† ë¦¬ ìƒì„±
sudo mkdir -p /var/log/lightcare
sudo chown ubuntu:ubuntu /var/log/lightcare

# 9. ì„œë¹„ìŠ¤ ë“±ë¡
sudo systemctl daemon-reload
sudo systemctl enable lightcare

echo "âœ… Oracle Cloud ì„œë²„ ì„¤ì • ì™„ë£Œ!"
echo ""
echo "ğŸ“Œ ë‹¤ìŒ ë‹¨ê³„:"
echo "1. JAR íŒŒì¼ì„ /opt/lightcare/carelink.jarë¡œ ì—…ë¡œë“œ"
echo "2. sudo systemctl start lightcare ë¡œ ì„œë¹„ìŠ¤ ì‹œì‘"
echo "3. http://ì„œë²„IP:8080 ìœ¼ë¡œ ì ‘ì† í…ŒìŠ¤íŠ¸"
````

## File: Procfile
````
web: java -Dserver.port=$PORT -Dspring.profiles.active=heroku -jar build/libs/carelink-*.jar
````

## File: schema-postgresql.sql
````sql
-- PostgreSQLìš© ìŠ¤í‚¤ë§ˆ (Heroku ë°°í¬ìš©)

-- íšŒì› í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS member (
    member_id SERIAL PRIMARY KEY,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    name VARCHAR(50) NOT NULL,
    phone VARCHAR(15),
    role VARCHAR(20) DEFAULT 'USER',
    is_approved BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ì‹œì„¤ í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS facility (
    facility_id SERIAL PRIMARY KEY,
    facility_name VARCHAR(100) NOT NULL,
    address VARCHAR(200) NOT NULL,
    detail_address VARCHAR(100),
    phone VARCHAR(15),
    facility_type VARCHAR(50),
    description TEXT,
    latitude DECIMAL(10, 8),
    longitude DECIMAL(11, 8),
    is_approved BOOLEAN DEFAULT false,
    registered_member_id INTEGER REFERENCES member(member_id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ì‹œì„¤ ì´ë¯¸ì§€ í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS facility_image (
    image_id SERIAL PRIMARY KEY,
    facility_id INTEGER REFERENCES facility(facility_id) ON DELETE CASCADE,
    image_path VARCHAR(500) NOT NULL,
    is_main BOOLEAN DEFAULT false,
    display_order INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ë¦¬ë·° í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS review (
    review_id SERIAL PRIMARY KEY,
    facility_id INTEGER REFERENCES facility(facility_id) ON DELETE CASCADE,
    member_id INTEGER REFERENCES member(member_id) ON DELETE CASCADE,
    rating INTEGER CHECK (rating >= 1 AND rating <= 5),
    content TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ê²Œì‹œíŒ í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS board (
    board_id SERIAL PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    content TEXT,
    board_type VARCHAR(50) DEFAULT 'info',
    member_id INTEGER REFERENCES member(member_id) ON DELETE CASCADE,
    view_count INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- êµ¬ì¸ê³µê³  í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS job_posting (
    job_id SERIAL PRIMARY KEY,
    facility_id INTEGER REFERENCES facility(facility_id) ON DELETE CASCADE,
    title VARCHAR(200) NOT NULL,
    content TEXT,
    job_type VARCHAR(50),
    salary VARCHAR(100),
    working_hours VARCHAR(100),
    requirements TEXT,
    benefits TEXT,
    is_active BOOLEAN DEFAULT true,
    deadline TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- êµ¬ì§ ì§€ì› í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS job_application (
    application_id SERIAL PRIMARY KEY,
    job_id INTEGER REFERENCES job_posting(job_id) ON DELETE CASCADE,
    member_id INTEGER REFERENCES member(member_id) ON DELETE CASCADE,
    cover_letter TEXT,
    resume_path VARCHAR(500),
    status VARCHAR(20) DEFAULT 'PENDING',
    applied_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX IF NOT EXISTS idx_facility_location ON facility(latitude, longitude);
CREATE INDEX IF NOT EXISTS idx_facility_type ON facility(facility_type);
CREATE INDEX IF NOT EXISTS idx_review_facility ON review(facility_id);
CREATE INDEX IF NOT EXISTS idx_board_type ON board(board_type);
CREATE INDEX IF NOT EXISTS idx_job_active ON job_posting(is_active);
````

## File: start-server.sh
````bash
#!/bin/bash

# ì„œë²„ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸
echo "ğŸš€ LightCare ì„œë²„ ì‹œì‘..."

# ë¡œê·¸ ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p /var/log/carelink
mkdir -p /home/carelink/uploads/{facility,profile,temp}

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
export SPRING_PROFILES_ACTIVE=prod
export DB_HOST=${DB_HOST:-"localhost"}
export DB_NAME=${DB_NAME:-"carelink"}
export DB_USERNAME=${DB_USERNAME:-"carelink"}
export DB_PASSWORD=${DB_PASSWORD:-"your-db-password"}
export KAKAO_APP_KEY=${KAKAO_APP_KEY:-"b97b58672807a40c122a5deed8a98ea4"}

# Java ì˜µì…˜ ì„¤ì •
JAVA_OPTS="-Xms512m -Xmx1024m"
JAVA_OPTS="$JAVA_OPTS -Dspring.profiles.active=prod"
JAVA_OPTS="$JAVA_OPTS -Dfile.encoding=UTF-8"
JAVA_OPTS="$JAVA_OPTS -Djava.net.preferIPv4Stack=true"

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ (ë°±ê·¸ë¼ìš´ë“œ)
nohup java $JAVA_OPTS -jar /home/carelink/carelink.jar > /var/log/carelink/console.log 2>&1 &

echo "âœ… PID: $!"
echo $! > /home/carelink/carelink.pid

echo "ğŸ“ ë¡œê·¸ í™•ì¸:"
echo "   tail -f /var/log/carelink/application.log"
echo "   tail -f /var/log/carelink/console.log"
````

## File: stop-server.sh
````bash
#!/bin/bash

# ì„œë²„ ì¢…ë£Œ ìŠ¤í¬ë¦½íŠ¸
echo "ğŸ›‘ LightCare ì„œë²„ ì¢…ë£Œ ì¤‘..."

# PID íŒŒì¼ í™•ì¸
PID_FILE="/home/carelink/carelink.pid"

if [ -f "$PID_FILE" ]; then
    PID=$(cat $PID_FILE)
    if ps -p $PID > /dev/null; then
        echo "í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ: PID $PID"
        kill $PID
        sleep 3
        
        # ê°•ì œ ì¢…ë£Œ í•„ìš”ì‹œ
        if ps -p $PID > /dev/null; then
            echo "ê°•ì œ ì¢…ë£Œ ì‹¤í–‰..."
            kill -9 $PID
        fi
        
        rm -f $PID_FILE
        echo "âœ… ì„œë²„ê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."
    else
        echo "âš ï¸ PID $PID í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ì¤‘ì´ì§€ ì•ŠìŠµë‹ˆë‹¤."
        rm -f $PID_FILE
    fi
else
    echo "âš ï¸ PID íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ ê²€ìƒ‰ ì¤‘..."
    
    # JAR íŒŒì¼ë¡œ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ì°¾ê¸°
    PID=$(pgrep -f "carelink.jar")
    
    if [ ! -z "$PID" ]; then
        echo "í”„ë¡œì„¸ìŠ¤ ë°œê²¬: PID $PID"
        kill $PID
        sleep 3
        
        if pgrep -f "carelink.jar" > /dev/null; then
            echo "ê°•ì œ ì¢…ë£Œ ì‹¤í–‰..."
            pkill -9 -f "carelink.jar"
        fi
        echo "âœ… ì„œë²„ê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."
    else
        echo "â„¹ï¸ ì‹¤í–‰ì¤‘ì¸ ì„œë²„ê°€ ì—†ìŠµë‹ˆë‹¤."
    fi
fi
````

## File: system.properties
````
java.runtime.version=11
````

## File: tomorrow-checklist.md
````markdown
# ğŸ“‹ ë‚´ì¼ Oracle Cloud ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

## 1. Oracle Cloud ê°€ì… ì¬ì‹œë„
- [ ] 24ì‹œê°„ í›„ ì¬ì‹œë„
- [ ] ì‹œí¬ë¦¿ ëª¨ë“œ ë¸Œë¼ìš°ì € ì‚¬ìš©
- [ ] ë‹¤ë¥¸ ì¹´ë“œ ì¤€ë¹„ (í•„ìš”ì‹œ)

## 2. ê°€ì… ì„±ê³µ í›„ ìˆœì„œ

### Step 1: VM ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
```
ì´ë¦„: lightcare-server
Shape: VM.Standard.E2.1.Micro (Always Free)
OS: Ubuntu 20.04
Region: Korea Central (ì¶˜ì²œ)
```

### Step 2: SSH í‚¤ ë‹¤ìš´ë¡œë“œ
- Private Key ì•ˆì „í•œ ê³³ì— ì €ì¥
- ê¶Œí•œ ì„¤ì •: chmod 400 ssh-key.key

### Step 3: Security List ì„¤ì •
```
í¬íŠ¸ 22, 80, 443, 8080 ì˜¤í”ˆ
```

### Step 4: ì„œë²„ ì ‘ì† í›„ ì‹¤í–‰
```bash
# 1. ì„œë²„ ì ‘ì†
ssh -i ssh-key.key ubuntu@<public-ip>

# 2. ê¸°ë³¸ íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸
sudo apt update && sudo apt upgrade -y

# 3. Java 11 ì„¤ì¹˜
sudo apt install openjdk-11-jdk -y

# 4. MySQL ì„¤ì¹˜
sudo apt install mysql-server -y

# 5. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ìƒì„±
mkdir /home/ubuntu/lightcare
```

## 3. ë¡œì»¬ì—ì„œ ì¤€ë¹„í•  ê²ƒ

### JAR íŒŒì¼ ë¹Œë“œ
```bash
# Windows í™˜ê²½
./gradlew.bat clean build -x test

# ë¹Œë“œëœ íŒŒì¼ ìœ„ì¹˜
build/libs/carelink-0.0.1-SNAPSHOT.jar
```

### í™˜ê²½ë³€ìˆ˜ ì¤€ë¹„
```
DB_PASSWORD=ì„¤ì •í• ë¹„ë°€ë²ˆí˜¸
KAKAO_APP_KEY=b97b58672807a40c122a5deed8a98ea4
```

## 4. ë°°í¬ ëª…ë ¹ì–´

### JAR íŒŒì¼ ì—…ë¡œë“œ
```bash
scp -i ssh-key.key build/libs/*.jar ubuntu@<ip>:/home/ubuntu/lightcare/
```

### ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
```bash
# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
java -jar carelink-0.0.1-SNAPSHOT.jar

# ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
nohup java -jar carelink-0.0.1-SNAPSHOT.jar &
```

## 5. í™•ì¸ì‚¬í•­
- [ ] http://<public-ip>:8080 ì ‘ì† í…ŒìŠ¤íŠ¸
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
- [ ] ë¡œê·¸ íŒŒì¼ í™•ì¸

## ğŸ’¡ Tips
- Oracle CloudëŠ” í•œë²ˆ ì„¤ì •í•˜ë©´ ì˜êµ¬ ë¬´ë£Œ
- ì£¼ê¸°ì ìœ¼ë¡œ ì ‘ì†í•´ì„œ ê³„ì • í™œì„± ìœ ì§€
- ë¬¸ì œ ë°œìƒì‹œ ë‹¤ì‹œ ì—°ë½ì£¼ì„¸ìš”!
````

## File: gradle/wrapper/gradle-wrapper.properties
````
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-8.13-bin.zip
networkTimeout=10000
validateDistributionUrl=true
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
````

## File: src/main/java/com/example/carelink/dto/LoginDTO.java
````java
package com.example.carelink.dto;

import lombok.Data;
import javax.validation.constraints.NotBlank;

/**
 * ë¡œê·¸ì¸ ìš”ì²­ DTO
 * íŒ€ì› A ë‹´ë‹¹: ë¡œê·¸ì¸ ê¸°ëŠ¥ì—ì„œ ì‚¬ìš©
 */
@Data
public class LoginDTO {
    
    @NotBlank(message = "ì‚¬ìš©ì IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”")
    private String userId;        // ì‚¬ìš©ì ID
    
    @NotBlank(message = "ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”")
    private String password;      // ë¹„ë°€ë²ˆí˜¸
    
    private boolean rememberMe;   // ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€
}
````

## File: src/main/resources/mybatis-config.xml
````xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-config.dtd">

<configuration>
    <!-- ì„¤ì • -->
    <settings>
        <!-- ì¹´ë©œì¼€ì´ìŠ¤ ìë™ ë§¤í•‘ í™œì„±í™” -->
        <setting name="mapUnderscoreToCamelCase" value="true"/>
        <!-- NULL ê°’ë„ í˜¸ì¶œë˜ë„ë¡ ì„¤ì • -->
        <setting name="callSettersOnNulls" value="true"/>
        <!-- ì§€ì—° ë¡œë”© ë¹„í™œì„±í™” -->
        <setting name="lazyLoadingEnabled" value="false"/>
    </settings>

    <!-- íƒ€ì… ë³„ì¹­ ì„¤ì • -->
    <typeAliases>
        <package name="com.example.carelink.dto"/>
    </typeAliases>
</configuration>
````

## File: docker-compose.aws.yml
````yaml
version: '3.8'

services:
  # Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ (AWS EC2/RDS ì—°ê²°)
  app:
    build: 
      context: .
      dockerfile: Dockerfile
    container_name: carelink-app
    ports:
      - "8080:8080"
    environment:
      # Spring Boot í”„ë¡œí•„
      - SPRING_PROFILES_ACTIVE=prod
      
      # ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (AWS RDS)
      - DB_URL=${DB_URL:-jdbc:mysql://localhost:3306/carelink?useSSL=false&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=UTF-8}
      - DB_USERNAME=${DB_USERNAME:-root}
      - DB_PASSWORD=${DB_PASSWORD:-mysql}
      
      # ì¹´ì¹´ì˜¤ API í‚¤
      - KAKAO_APP_KEY=${KAKAO_APP_KEY:-your_kakao_app_key}
      - KAKAO_REST_API_KEY=${KAKAO_REST_API_KEY:-your_kakao_rest_api_key}
      
      # íŒŒì¼ ì—…ë¡œë“œ ê²½ë¡œ
      - UPLOAD_BASE_PATH=${UPLOAD_BASE_PATH:-/carelink-uploads/}
      
      # ë¡œê·¸ ì„¤ì •
      - LOGGING_LEVEL_ROOT=INFO
      - LOGGING_LEVEL_COM_EXAMPLE_CARELINK=DEBUG
      
      # JVM ë©”ëª¨ë¦¬ ì„¤ì •
      - JAVA_OPTS=-Xms512m -Xmx1024m -XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0
      
    volumes:
      - carelink-uploads:/carelink-uploads
      - ./logs:/app/logs
    restart: unless-stopped
    networks:
      - carelink-network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/actuator/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

volumes:
  carelink-uploads:
    name: carelink-uploads
    driver: local

networks:
  carelink-network:
    name: carelink-network
    driver: bridge
````

## File: docker-run-example.sh
````bash
# ë¡œì»¬ í…ŒìŠ¤íŠ¸ìš© (MySQL ë¡œì»¬ ì„œë²„)
docker run -d \
  --name carelink-app \
  -p 8080:8080 \
  -e SPRING_PROFILES_ACTIVE=prod \
  -e DB_URL="jdbc:mysql://host.docker.internal:3306/carelink?useSSL=false&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=UTF-8" \
  -e DB_USERNAME=root \
  -e DB_PASSWORD=mysql \
  -e KAKAO_APP_KEY=0948e3e4faa457fb6083f68e1ce10458 \
  -e UPLOAD_BASE_PATH=/carelink-uploads/ \
  -v carelink-uploads:/carelink-uploads \
  carelink-app

# AWS RDS ì‚¬ìš©ì‹œ
docker run -d \
  --name carelink-app \
  -p 8080:8080 \
  -e SPRING_PROFILES_ACTIVE=prod \
  -e DB_URL="jdbc:mysql://your-rds-endpoint.region.rds.amazonaws.com:3306/carelink?useSSL=true&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=UTF-8" \
  -e DB_USERNAME=root \
  -e DB_PASSWORD=your-rds-password \
  -e KAKAO_APP_KEY=0948e3e4faa457fb6083f68e1ce10458 \
  -e UPLOAD_BASE_PATH=/carelink-uploads/ \
  -v carelink-uploads:/carelink-uploads \
  carelink-app
````

## File: gradlew.bat
````
@rem
@rem Copyright 2015 the original author or authors.
@rem
@rem Licensed under the Apache License, Version 2.0 (the "License");
@rem you may not use this file except in compliance with the License.
@rem You may obtain a copy of the License at
@rem
@rem      https://www.apache.org/licenses/LICENSE-2.0
@rem
@rem Unless required by applicable law or agreed to in writing, software
@rem distributed under the License is distributed on an "AS IS" BASIS,
@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@rem See the License for the specific language governing permissions and
@rem limitations under the License.
@rem
@rem SPDX-License-Identifier: Apache-2.0
@rem

@if "%DEBUG%"=="" @echo off
@rem ##########################################################################
@rem
@rem  Gradle startup script for Windows
@rem
@rem ##########################################################################

@rem Set local scope for the variables with windows NT shell
if "%OS%"=="Windows_NT" setlocal

set DIRNAME=%~dp0
if "%DIRNAME%"=="" set DIRNAME=.
@rem This is normally unused
set APP_BASE_NAME=%~n0
set APP_HOME=%DIRNAME%

@rem Resolve any "." and ".." in APP_HOME to make it shorter.
for %%i in ("%APP_HOME%") do set APP_HOME=%%~fi

@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
set DEFAULT_JVM_OPTS="-Xmx64m" "-Xms64m"

@rem Find java.exe
if defined JAVA_HOME goto findJavaFromJavaHome

set JAVA_EXE=java.exe
%JAVA_EXE% -version >NUL 2>&1
if %ERRORLEVEL% equ 0 goto execute

echo. 1>&2
echo ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH. 1>&2
echo. 1>&2
echo Please set the JAVA_HOME variable in your environment to match the 1>&2
echo location of your Java installation. 1>&2

goto fail

:findJavaFromJavaHome
set JAVA_HOME=%JAVA_HOME:"=%
set JAVA_EXE=%JAVA_HOME%/bin/java.exe

if exist "%JAVA_EXE%" goto execute

echo. 1>&2
echo ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME% 1>&2
echo. 1>&2
echo Please set the JAVA_HOME variable in your environment to match the 1>&2
echo location of your Java installation. 1>&2

goto fail

:execute
@rem Setup the command line

set CLASSPATH=%APP_HOME%\gradle\wrapper\gradle-wrapper.jar


@rem Execute Gradle
"%JAVA_EXE%" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% "-Dorg.gradle.appname=%APP_BASE_NAME%" -classpath "%CLASSPATH%" org.gradle.wrapper.GradleWrapperMain %*

:end
@rem End local scope for the variables with windows NT shell
if %ERRORLEVEL% equ 0 goto mainEnd

:fail
rem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of
rem the _cmd.exe /c_ return code!
set EXIT_CODE=%ERRORLEVEL%
if %EXIT_CODE% equ 0 set EXIT_CODE=1
if not ""=="%GRADLE_EXIT_CONSOLE%" exit %EXIT_CODE%
exit /b %EXIT_CODE%

:mainEnd
if "%OS%"=="Windows_NT" endlocal

:omega
````

## File: run-dev.bat
````
@echo off
title LightCare ê°œë°œ í™˜ê²½
color 0A
echo.
echo =============================================
echo  ğŸš€ LightCare ê°œë°œ í™˜ê²½ì„ ì‹œì‘í•©ë‹ˆë‹¤
echo =============================================
echo.

REM .env íŒŒì¼ ì¡´ì¬ í™•ì¸
if not exist ".env" (
    echo âŒ .env íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!
    echo    í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— .env íŒŒì¼ì„ ìƒì„±í•´ì£¼ì„¸ìš”.
    pause
    exit /b 1
)

echo ğŸ“‹ .env íŒŒì¼ì—ì„œ í™˜ê²½ë³€ìˆ˜ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤...
echo.

REM .env íŒŒì¼ì—ì„œ í™˜ê²½ë³€ìˆ˜ ë¡œë“œ
for /f "usebackq eol=# tokens=1,2 delims==" %%a in (".env") do (
    if not "%%a"=="" (
        echo   âœ… %%a ì„¤ì • ì™„ë£Œ
        set "%%a=%%b"
    )
)

echo.
echo ğŸ”‘ í™˜ê²½ë³€ìˆ˜ í™•ì¸:
echo   - KAKAO_APP_KEY: %KAKAO_APP_KEY:~0,10%...
echo   - DB_USERNAME: %DB_USERNAME%
echo   - DB_URLì´ ì„¤ì •ë¨
echo.

echo ğŸ—„ï¸ MySQL ì—°ê²°ì„ í™•ì¸í•©ë‹ˆë‹¤...
mysql -u %DB_USERNAME% -p%DB_PASSWORD% -e "SELECT 1;" 2>nul
if errorlevel 1 (
    echo âš ï¸  MySQL ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. MySQLì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.
    echo.
)

echo ğŸŒ± Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹œì‘í•©ë‹ˆë‹¤...
echo.
echo =============================================
echo  ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë˜ë©´:
echo  ğŸ‘‰ http://localhost:8080 ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”
echo  ğŸ‘‰ ì¢…ë£Œí•˜ë ¤ë©´ Ctrl+C ë¥¼ ëˆ„ë¥´ì„¸ìš”
echo =============================================
echo.

REM Gradle ì‹¤í–‰
call gradlew.bat bootRun

echo.
echo ğŸ“‹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
pause
````

## File: SECURITY_NOTICE.md
````markdown
# ğŸš¨ ì¤‘ìš” ë³´ì•ˆ ê³µì§€

## âš ï¸ íŒ€ì› í•„ë… ì‚¬í•­

### ğŸ“‹ ì‹¤ì œ API í‚¤ ì •ë³´
- **ì‹¤ì œ ìƒˆë¡œìš´ ì¹´ì¹´ì˜¤ API í‚¤**: 
- **ì´ í‚¤ëŠ” íŒ€ì›ë“¤ë§Œ ì‚¬ìš©í•˜ê³  ì™¸ë¶€ì— ë…¸ì¶œí•˜ì§€ ë§ˆì„¸ìš”!**

### ğŸ” ë³´ì•ˆ ì£¼ì˜ì‚¬í•­

#### 1. ë¬¸ì„œ íŒŒì¼ ë³´ì•ˆ
- ëª¨ë“  MD íŒŒì¼ì—ì„œëŠ” ì‹¤ì œ API í‚¤ë¥¼ `ìƒˆë¡œ_ë°œê¸‰ë°›ì€_í‚¤`ë¡œ í‘œì‹œ
- ì‹¤ì œ í‚¤ëŠ” ì´ ë¬¸ì„œì™€ .env íŒŒì¼ì—ì„œë§Œ ê´€ë¦¬
- **ì´ íŒŒì¼(SECURITY_NOTICE.md)ì€ ì ˆëŒ€ Gitì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”!**

#### 2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •ì‹œ ì£¼ì˜
```env
# .env íŒŒì¼ì— ì‹¤ì œ í‚¤ ì…ë ¥
KAKAO_APP_KEY=
KAKAO_REST_API_KEY=
```

#### 3. íŒ€ ë‚´ë¶€ ê³µìœ  ë°©ë²•
- ìŠ¬ë™/ë””ìŠ¤ì½”ë“œ DMìœ¼ë¡œë§Œ ê³µìœ 
- ê³µê°œ ì±„ë„ì— í‚¤ ì •ë³´ ì ˆëŒ€ ê¸ˆì§€
- ìŠ¤í¬ë¦°ìƒ· ì‹œ í‚¤ ì •ë³´ ëª¨ìì´í¬ ì²˜ë¦¬

### ğŸš« ì ˆëŒ€ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ
- ì‹¤ì œ API í‚¤ë¥¼ MD íŒŒì¼ì— ì‘ì„±
- ê³µê°œ ì±„ë„ì— í‚¤ ì •ë³´ ê³µìœ 
- ì†ŒìŠ¤ì½”ë“œì— í‚¤ í•˜ë“œì½”ë”©
- ì´ íŒŒì¼ì„ Gitì— ì»¤ë°‹

### âœ… ì˜¬ë°”ë¥¸ ì‘ì—… ë°©ë²•
1. ì´ ë¬¸ì„œì—ì„œ ì‹¤ì œ í‚¤ í™•ì¸
2. ê°œì¸ .env íŒŒì¼ì—ë§Œ ì‹¤ì œ í‚¤ ì…ë ¥
3. ë¬¸ì„œ ì‘ì„±ì‹œ `ìƒˆë¡œ_ë°œê¸‰ë°›ì€_í‚¤` í”Œë ˆì´ìŠ¤í™€ë” ì‚¬ìš©
4. íŒ€ì› ë¬¸ì˜ì‹œ DMìœ¼ë¡œ í‚¤ ì •ë³´ ê³µìœ 

---

**ğŸ”’ ì´ íŒŒì¼ì€ ë¡œì»¬ì—ì„œë§Œ ë³´ê´€í•˜ê³  Gitì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”!**
````

## File: backup/deprecated_files/crop-image.backup.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item"><a href="/member/myinfo">ë§ˆì´í˜ì´ì§€</a></li>
                <li class="breadcrumb-item active" aria-current="page">í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­</li>
            </ol>
        </nav>
        
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
                <div class="card shadow">
                    <div class="card-body p-4">
                        <div class="text-center mb-4">
                            <h3 class="card-title fw-bold text-primary">
                                <i class="fas fa-crop me-2"></i>
                                í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­
                            </h3>
                            <p class="text-muted">ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨(3:4)ì— ë§ì¶° í”„ë¡œí•„ ì‚¬ì§„ì„ ì¡°ì ˆí•˜ì„¸ìš”</p>
                        </div>

                        <!-- ê³ ê¸‰ ì´ë¯¸ì§€ í¬ë¡­í¼ ì»¨í…Œì´ë„ˆ -->
                        <div id="profileImageCropper"></div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ê³ ê¸‰ ì´ë¯¸ì§€ í¬ë¡­í¼ -->
<link rel="stylesheet" href="/css/advanced-image-cropper.css">
<script src="/js/advanced-image-cropper.js"></script>

<script>
$(document).ready(function() {
    // í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­í¼ ì´ˆê¸°í™”
    initializeProfileImageCropper();
});

// í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­í¼ ì´ˆê¸°í™”
function initializeProfileImageCropper() {
    const profileImageCropper = new AdvancedImageCropper('profileImageCropper', {
        // í”„ë¡œí•„ ì´ë¯¸ì§€ ìµœì í™” ì„¤ì •
        aspectRatio: 3/4, // í”„ë¡œí•„ ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨
        cropWidth: 300,
        cropHeight: 400,
        previewStyle: 'profile',
        title: 'í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ',
        quality: 0.9,
        enableAltText: true,
        showSteps: true,
        
        // í¬ë¡­ ì™„ë£Œ ì½œë°±
        onCropComplete: function(result) {
            console.log('í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ ì™„ë£Œ:', result);
            
            // ì„œë²„ì— í¬ë¡­ëœ ì´ë¯¸ì§€ ì €ì¥
            saveProfileImage(result);
        },
        
        // ì—ëŸ¬ ì½œë°±
        onError: function(message) {
            console.error('í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ ì˜¤ë¥˜:', message);
            showErrorMessage('ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + message);
        }
    });
    
    // ì „ì—­ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì €ì¥
    window.profileImageCropper = profileImageCropper;
}

// í”„ë¡œí•„ ì´ë¯¸ì§€ ì„œë²„ ì €ì¥
function saveProfileImage(result) {
    // ë¡œë”© í‘œì‹œ
    showLoadingMessage('í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì¤‘...');
    
    const formData = new FormData();
    formData.append('croppedImage', result.imageData);
    formData.append('altText', result.altText);
    
    fetch('/member/myinfo/crop-image/save', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        hideLoadingMessage();
        
        if (data.success) {
            showSuccessMessage('í”„ë¡œí•„ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
            
            // 2ì´ˆ í›„ ë§ˆì´í˜ì´ì§€ë¡œ ì´ë™
            setTimeout(() => {
                window.location.href = '/member/myinfo/edit';
            }, 2000);
        } else {
            showErrorMessage(data.message || 'í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    })
    .catch(error => {
        hideLoadingMessage();
        console.error('í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì˜¤ë¥˜:', error);
        showErrorMessage('í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    });
}

// ë¡œë”© ë©”ì‹œì§€ í‘œì‹œ
function showLoadingMessage(message) {
    const existingLoading = document.querySelector('.loading-overlay');
    if (existingLoading) existingLoading.remove();
    
    const loadingDiv = document.createElement('div');
    loadingDiv.className = 'loading-overlay position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center';
    loadingDiv.style.cssText = 'background: rgba(0,0,0,0.5); z-index: 9999;';
    loadingDiv.innerHTML = `
        <div class="text-center text-white">
            <div class="spinner-border mb-3" role="status"></div>
            <div>${message}</div>
        </div>
    `;
    
    document.body.appendChild(loadingDiv);
}

// ë¡œë”© ë©”ì‹œì§€ ìˆ¨ê¹€
function hideLoadingMessage() {
    const loadingOverlay = document.querySelector('.loading-overlay');
    if (loadingOverlay) {
        loadingOverlay.remove();
    }
}

// ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
function showSuccessMessage(message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-success alert-dismissible fade show position-fixed top-0 start-50 translate-middle-x mt-3';
    alertDiv.style.cssText = 'z-index: 10000; min-width: 300px;';
    alertDiv.innerHTML = `
        <i class="fas fa-check-circle me-2"></i>${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    document.body.appendChild(alertDiv);
    
    // 5ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 5000);
}

// ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
function showErrorMessage(message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-danger alert-dismissible fade show position-fixed top-0 start-50 translate-middle-x mt-3';
    alertDiv.style.cssText = 'z-index: 10000; min-width: 300px;';
    alertDiv.innerHTML = `
        <i class="fas fa-exclamation-triangle me-2"></i>${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    document.body.appendChild(alertDiv);
    
    // 10ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 10000);
}
</script>

</body>
</html>
````

## File: backup/deprecated_files/crop-image.backup.js
````javascript
/**
 * í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ ì „ìš© JavaScript
 * í•œêµ­ í‘œì¤€ ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨(3:4) ìµœì í™” ë²„ì „
 * Cropper.js ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
 */

// ì „ì—­ ë³€ìˆ˜
let cropper = null;
let originalImageData = null;
let originalImage = null;

// DOM ìš”ì†Œ
const elements = {};

// ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    initializeElements();
    setupEventListeners();
    console.log('í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€ ì´ˆê¸°í™” ì™„ë£Œ (Cropper.js)');
});

// DOM ìš”ì†Œ ì´ˆê¸°í™”
function initializeElements() {
    elements.imageInput = document.getElementById('imageInput');
    elements.cropImage = document.getElementById('cropImage');
    elements.uploadSection = document.getElementById('uploadSection');
    elements.cropSection = document.getElementById('cropSection');
    elements.completeSection = document.getElementById('completeSection');
    elements.previewCanvas = document.getElementById('previewCanvas');
    elements.finalPreview = document.getElementById('finalPreview');
    elements.zoomIndicator = document.getElementById('zoomIndicator');
    elements.zoomLevel = document.getElementById('zoomLevel');
    elements.zoomStatus = document.getElementById('zoomStatus');
    
    // ë‹¨ê³„ ìš”ì†Œ
    elements.steps = {
        step1: document.getElementById('step1'),
        step2: document.getElementById('step2'),
        step3: document.getElementById('step3')
    };
    
    // ë²„íŠ¼ ìš”ì†Œ
    elements.buttons = {
        zoomIn: document.getElementById('zoomIn'),
        zoomOut: document.getElementById('zoomOut'),
        resetZoom: document.getElementById('resetZoom'),
        backToUpload: document.getElementById('backToUpload'),
        cropAndSave: document.getElementById('cropAndSave'),
        cropAnother: document.getElementById('cropAnother')
    };
}

// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
function setupEventListeners() {
    // íŒŒì¼ ì…ë ¥ ì´ë²¤íŠ¸ ë“±ë¡
    if (elements.imageInput) {
        elements.imageInput.removeEventListener('change', handleImageUpload);
        elements.imageInput.addEventListener('change', handleImageUpload);
        console.log('íŒŒì¼ ì…ë ¥ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ë¨');
    }
    
    // í™•ëŒ€/ì¶•ì†Œ ë²„íŠ¼
    if (elements.buttons.zoomIn) {
        elements.buttons.zoomIn.addEventListener('click', () => {
            if (cropper) {
                cropper.zoom(0.1);
            }
        });
    }
    
    if (elements.buttons.zoomOut) {
        elements.buttons.zoomOut.addEventListener('click', () => {
            if (cropper) {
                cropper.zoom(-0.1);
            }
        });
    }
    
    if (elements.buttons.resetZoom) {
        elements.buttons.resetZoom.addEventListener('click', () => {
            if (cropper) {
                cropper.reset();
            }
        });
    }
    
    // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼
    if (elements.buttons.backToUpload) {
        elements.buttons.backToUpload.addEventListener('click', goToUploadStep);
    }
    
    if (elements.buttons.cropAndSave) {
        elements.buttons.cropAndSave.addEventListener('click', cropAndSaveImage);
    }
    
    if (elements.buttons.cropAnother) {
        elements.buttons.cropAnother.addEventListener('click', goToUploadStep);
    }
    
    // íŒŒì¼ ì„ íƒ ë²„íŠ¼
    const fileSelectBtn = document.getElementById('fileSelectBtn');
    if (fileSelectBtn) {
        fileSelectBtn.addEventListener('click', () => {
            console.log('íŒŒì¼ ì„ íƒ ë²„íŠ¼ í´ë¦­ë¨');
            if (elements.imageInput) {
                elements.imageInput.click();
            }
        });
    }
    
    // ë“œë˜ê·¸ ì•¤ ë“œë¡­ (ì—…ë¡œë“œ ì˜ì—­ ì „ì²´)
    const uploadArea = document.querySelector('.upload-area');
    if (uploadArea) {
        uploadArea.addEventListener('dragover', handleDragOver);
        uploadArea.addEventListener('drop', handleDrop);
        
        // ì—…ë¡œë“œ ì˜ì—­ í´ë¦­ ì‹œ íŒŒì¼ ì„ íƒ (ë²„íŠ¼ ì˜ì—­ ì œì™¸)
        uploadArea.addEventListener('click', (event) => {
            if (!event.target.closest('#fileSelectBtn')) {
                console.log('ì—…ë¡œë“œ ì˜ì—­ í´ë¦­ë¨');
                if (elements.imageInput) {
                    elements.imageInput.click();
                }
            }
        });
    }
}

// ë“œë˜ê·¸ ì˜¤ë²„ ì²˜ë¦¬
function handleDragOver(event) {
    event.preventDefault();
    event.currentTarget.style.borderColor = '#0d6efd';
    event.currentTarget.style.backgroundColor = '#f8f9ff';
}

// ë“œë¡­ ì²˜ë¦¬
function handleDrop(event) {
    event.preventDefault();
    const files = event.dataTransfer.files;
    if (files.length > 0) {
        handleImageFile(files[0]);
    }
    
    // ìŠ¤íƒ€ì¼ ë¦¬ì…‹
    event.currentTarget.style.borderColor = '';
    event.currentTarget.style.backgroundColor = '';
}

// ì´ë¯¸ì§€ ì—…ë¡œë“œ ì²˜ë¦¬
function handleImageUpload(event) {
    console.log('íŒŒì¼ ì—…ë¡œë“œ ì´ë²¤íŠ¸ ë°œìƒ:', event);
    const file = event.target.files[0];
    if (file) {
        console.log('ì„ íƒëœ íŒŒì¼:', file.name, file.size, file.type);
        handleImageFile(file);
    } else {
        console.log('ì„ íƒëœ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤');
    }
}

// ì´ë¯¸ì§€ íŒŒì¼ ì²˜ë¦¬
function handleImageFile(file) {
    console.log('ì´ë¯¸ì§€ íŒŒì¼ ì²˜ë¦¬ ì‹œì‘:', file.name);
    
    // íŒŒì¼ íƒ€ì… ê²€ì¦
    if (!file.type.startsWith('image/')) {
        alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
        return;
    }
    
    // íŒŒì¼ í¬ê¸° ê²€ì¦ (5MB)
    if (file.size > 5 * 1024 * 1024) {
        alert('íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.');
        return;
    }
    
    // ì§€ì›ë˜ëŠ” í˜•ì‹ ê²€ì¦
    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png'];
    if (!allowedTypes.includes(file.type)) {
        alert('JPG, PNG íŒŒì¼ë§Œ ì§€ì›ë©ë‹ˆë‹¤.');
        return;
    }
    
    console.log('íŒŒì¼ ê²€ì¦ í†µê³¼, FileReader ì‹œì‘');
    
    // ë¡œì»¬ì—ì„œ ì´ë¯¸ì§€ ë¡œë“œ
    const reader = new FileReader();
    reader.onload = function(e) {
        console.log('FileReader ë¡œë“œ ì™„ë£Œ');
        originalImageData = e.target.result;
        loadImageToCropper(originalImageData);
        goToCropStep();
    };
    reader.onerror = function(e) {
        console.error('FileReader ì˜¤ë¥˜:', e);
        alert('íŒŒì¼ ì½ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    };
    reader.readAsDataURL(file);
}

// í¬ë¡­í¼ì— ì´ë¯¸ì§€ ë¡œë“œ
function loadImageToCropper(imageData) {
    if (!elements.cropImage) return;
    
    elements.cropImage.src = imageData;
    elements.cropImage.style.display = 'block';
    
    // ì´ë¯¸ì§€ê°€ ë¡œë“œëœ í›„ í¬ë¡­í¼ ì´ˆê¸°í™”
    elements.cropImage.onload = function() {
        console.log('ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ, í¬ë¡­í¼ ì´ˆê¸°í™” ì‹œì‘');
        setTimeout(() => {
            initializeCropper();
        }, 100);
    };
}

// í¬ë¡­í¼ ì´ˆê¸°í™” (Cropper.js ì‚¬ìš©)
function initializeCropper() {
    if (cropper) {
        cropper.destroy();
    }
    
    console.log('ğŸš€ Cropper.js ì´ˆê¸°í™” ì‹œì‘');
    
    // í•œêµ­ í‘œì¤€ ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨ ì ìš© (ê°€ë¡œ3:ì„¸ë¡œ4)
    const aspectRatio = 3 / 4; // 0.75 (ì„¸ë¡œê°€ ë” ê¸´ í˜•íƒœ)
    
    cropper = new Cropper(elements.cropImage, {
        aspectRatio: aspectRatio, // 3:4 ë¹„ìœ¨
        viewMode: 1, // í¬ë¡­ ë°•ìŠ¤ë¥¼ ìº”ë²„ìŠ¤ ë‚´ë¶€ë¡œ ì œí•œ
        dragMode: 'move', // ë“œë˜ê·¸ ëª¨ë“œ
        autoCropArea: 0.8, // ìë™ í¬ë¡­ ì˜ì—­ í¬ê¸°
        restore: false, // í¬ê¸° ì¡°ì • ì‹œ í¬ë¡­ ë°•ìŠ¤ ë³µì› ì•ˆí•¨
        guides: true, // ê°€ì´ë“œ ë¼ì¸ í‘œì‹œ
        center: true, // ì¤‘ì•™ í‘œì‹œì í‘œì‹œ
        highlight: true, // í¬ë¡­ ë°•ìŠ¤ í•˜ì´ë¼ì´íŠ¸
        cropBoxMovable: true, // í¬ë¡­ ë°•ìŠ¤ ì´ë™ ê°€ëŠ¥
        cropBoxResizable: true, // í¬ë¡­ ë°•ìŠ¤ í¬ê¸° ì¡°ì • ê°€ëŠ¥
        toggleDragModeOnDblclick: false, // ë”ë¸”í´ë¦­ìœ¼ë¡œ ë“œë˜ê·¸ ëª¨ë“œ í† ê¸€ ì•ˆí•¨
        
        // ì´ˆê¸°í™” ì™„ë£Œ ì‹œ
        ready: function() {
            console.log('âœ… Cropper.js ì´ˆê¸°í™” ì™„ë£Œ');
            console.log('ğŸ“ ì„¤ì •ëœ aspectRatio:', aspectRatio);
            console.log('ğŸ¯ ëª©í‘œ: ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨ (3:4, ì„¸ë¡œê°€ ë” ê¸´ í˜•íƒœ)');
            
            // ì´ˆê¸° í¬ë¡­ ë°ì´í„° í™•ì¸
            const cropData = cropper.getData();
            const currentRatio = cropData.width / cropData.height;
            console.log('ğŸ“Š ì´ˆê¸° í¬ë¡­ ì˜ì—­:', Math.round(cropData.width), 'x', Math.round(cropData.height));
            console.log('ğŸ“Š ì´ˆê¸° ì‹¤ì œ ë¹„ìœ¨:', currentRatio.toFixed(3), 'ëª©í‘œ:', aspectRatio.toFixed(3));
            
            // ì´ˆê¸° ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
            updatePreview();
        },
        
        // í¬ë¡­ ë³€ê²½ ì‹œ
        crop: function(event) {
            const data = event.detail;
            const currentRatio = data.width / data.height;
            
            // ë¹„ìœ¨ í™•ì¸ ë¡œê·¸
            if (Math.abs(currentRatio - aspectRatio) > 0.01) {
                console.log('âš ï¸ ë¹„ìœ¨ í™•ì¸:', currentRatio.toFixed(3), 'ëª©í‘œ:', aspectRatio.toFixed(3));
            }
            
            // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
            updatePreview();
        }
    });
    
    // ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ ì¶”ê°€ (ì´ë¯¸ì§€ í™•ëŒ€/ì¶•ì†Œ ìš°ì„ , í•œê³„ì ì—ì„œ í˜ì´ì§€ ìŠ¤í¬ë¡¤)
    setupSmartScroll();
}

// ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥
function setupSmartScroll() {
    if (!cropper || !elements.cropImage) return;
    
    const cropContainer = elements.cropImage.parentElement;
    if (!cropContainer) return;
    
    // ìµœëŒ€/ìµœì†Œ ì¤Œ ë ˆë²¨ ì„¤ì •
    const MIN_ZOOM = 0.1;  // ìµœì†Œ ì¤Œ (10%)
    const MAX_ZOOM = 3.0;  // ìµœëŒ€ ì¤Œ (300%)
    
    console.log('ğŸ–±ï¸ ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ í™œì„±í™”');
    
    cropContainer.addEventListener('wheel', function(event) {
        if (!cropper) return;
        
        // í˜„ì¬ ì¤Œ ë ˆë²¨ í™•ì¸ (ë” ì •í™•í•œ ë°©ì‹)
        const canvasData = cropper.getCanvasData();
        const containerData = cropper.getContainerData();
        const currentZoom = canvasData.naturalWidth > 0 ? canvasData.width / canvasData.naturalWidth : 1;
        
        const isZoomingIn = event.deltaY < 0;  // íœ ì„ ìœ„ë¡œ ì˜¬ë¦¬ë©´ í™•ëŒ€
        const isZoomingOut = event.deltaY > 0; // íœ ì„ ì•„ë˜ë¡œ ë‚´ë¦¬ë©´ ì¶•ì†Œ
        
        console.log('ğŸ” í˜„ì¬ ì¤Œ:', currentZoom.toFixed(2), 'ë°©í–¥:', isZoomingIn ? 'í™•ëŒ€' : 'ì¶•ì†Œ');
        
        // ë” ê´€ëŒ€í•œ ì„ê³„ê°’ ì„¤ì •
        const maxThreshold = 2.8;  // ì¡°ê¸ˆ ë” ë‚®ì€ ìµœëŒ€ê°’
        const minThreshold = 0.2;  // ì¡°ê¸ˆ ë” ë†’ì€ ìµœì†Œê°’
        
        // í™•ëŒ€ ì‹œ: ìµœëŒ€ ì¤Œ ê·¼ì²˜ì—ì„œ í˜ì´ì§€ ìŠ¤í¬ë¡¤ í—ˆìš©
        if (isZoomingIn && currentZoom >= maxThreshold) {
            updateZoomIndicator(currentZoom, 'ìµœëŒ€ í™•ëŒ€');
            console.log('ğŸ“ˆ ìµœëŒ€ í™•ëŒ€ ê·¼ì²˜ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ì‹¤í–‰');
            
            // í˜ì´ì§€ ìŠ¤í¬ë¡¤ì„ ë” ë¶€ë“œëŸ½ê²Œ ì‹¤í–‰
            const scrollAmount = event.deltaY * 0.5; // ìŠ¤í¬ë¡¤ ê°•ë„ ì¡°ì ˆ
            window.scrollBy({
                top: scrollAmount,
                behavior: 'smooth'
            });
            return;
        }
        
        // ì¶•ì†Œ ì‹œ: ìµœì†Œ ì¤Œ ê·¼ì²˜ì—ì„œ í˜ì´ì§€ ìŠ¤í¬ë¡¤ í—ˆìš©  
        if (isZoomingOut && currentZoom <= minThreshold) {
            updateZoomIndicator(currentZoom, 'ìµœì†Œ ì¶•ì†Œ');
            console.log('ğŸ“‰ ìµœì†Œ ì¶•ì†Œ ê·¼ì²˜ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ì‹¤í–‰');
            
            // í˜ì´ì§€ ìŠ¤í¬ë¡¤ì„ ë” ë¶€ë“œëŸ½ê²Œ ì‹¤í–‰
            const scrollAmount = event.deltaY * 0.5; // ìŠ¤í¬ë¡¤ ê°•ë„ ì¡°ì ˆ
            window.scrollBy({
                top: scrollAmount,
                behavior: 'smooth'
            });
            return;
        }
        
        // ì´ë¯¸ì§€ í™•ëŒ€/ì¶•ì†Œ ë²”ìœ„ ë‚´ì—ì„œëŠ” ê¸°ë³¸ ìŠ¤í¬ë¡¤ ì°¨ë‹¨í•˜ê³  ì¤Œ ì ìš©
        event.preventDefault();
        event.stopPropagation();
        
        const zoomDelta = isZoomingIn ? 0.1 : -0.1;
        cropper.zoom(zoomDelta);
        
        // ì¤Œ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
        const newZoom = Math.max(MIN_ZOOM, Math.min(MAX_ZOOM, currentZoom + zoomDelta));
        updateZoomIndicator(newZoom, isZoomingIn ? 'í™•ëŒ€' : 'ì¶•ì†Œ');
        
    }, { passive: false }); // passive: falseë¡œ ì„¤ì •í•´ì•¼ preventDefault ì‘ë™
}

// ì¤Œ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
function updateZoomIndicator(zoomLevel, status) {
    if (!elements.zoomIndicator || !elements.zoomLevel || !elements.zoomStatus) return;
    
    // ì¤Œ ë ˆë²¨ì„ í¼ì„¼íŠ¸ë¡œ í‘œì‹œ
    const zoomPercent = Math.round(zoomLevel * 100);
    elements.zoomLevel.textContent = zoomPercent + '%';
    
    // ìƒíƒœ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
    let statusMessage = '';
    let statusClass = '';
    
    if (status === 'ìµœëŒ€ í™•ëŒ€') {
        statusMessage = '(ìµœëŒ€ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ê°€ëŠ¥)';
        statusClass = 'text-warning';
    } else if (status === 'ìµœì†Œ ì¶•ì†Œ') {
        statusMessage = '(ìµœì†Œ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ê°€ëŠ¥)';
        statusClass = 'text-info';
    } else {
        statusMessage = `(${status} ì¤‘)`;
        statusClass = 'text-success';
    }
    
    elements.zoomStatus.textContent = statusMessage;
    elements.zoomStatus.className = `ms-2 ${statusClass}`;
    
    // ì¤Œ í‘œì‹œê¸° ë³´ì´ê¸°
    elements.zoomIndicator.style.display = 'block';
    
    // 3ì´ˆ í›„ ìë™ ìˆ¨ê¹€
    clearTimeout(window.zoomIndicatorTimeout);
    window.zoomIndicatorTimeout = setTimeout(() => {
        if (elements.zoomIndicator) {
            elements.zoomIndicator.style.display = 'none';
        }
    }, 3000);
}

// ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
function updatePreview() {
    if (!cropper || !elements.previewCanvas) {
        return;
    }
    
    console.log('ğŸ–¼ï¸ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ ì‹œì‘');
    
    // í¬ë¡­ëœ ì´ë¯¸ì§€ë¥¼ ìº”ë²„ìŠ¤ì— ê·¸ë¦¬ê¸°
    const canvas = cropper.getCroppedCanvas({
        width: 90,  // ë¯¸ë¦¬ë³´ê¸° ìº”ë²„ìŠ¤ í¬ê¸°ì™€ ë™ì¼
        height: 120,
        imageSmoothingEnabled: true,
        imageSmoothingQuality: 'high'
    });
    
    if (canvas) {
        const ctx = elements.previewCanvas.getContext('2d');
        ctx.clearRect(0, 0, elements.previewCanvas.width, elements.previewCanvas.height);
        
        // í¬ë¡­ëœ ì´ë¯¸ì§€ë¥¼ ë¯¸ë¦¬ë³´ê¸° ìº”ë²„ìŠ¤ì— ê·¸ë¦¬ê¸°
        ctx.drawImage(canvas, 0, 0, elements.previewCanvas.width, elements.previewCanvas.height);
        
        console.log('âœ… ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ ì™„ë£Œ');
    }
}

// í¬ë¡­ ë° ì €ì¥
function cropAndSaveImage() {
    if (!cropper) {
        alert('ì´ë¯¸ì§€ë¥¼ ë¨¼ì € ë¡œë“œí•´ì£¼ì„¸ìš”.');
        return;
    }
    
    setButtonLoading(elements.buttons.cropAndSave, true, 'ì €ì¥ ì¤‘...');
    
    try {
        // ìµœì¢… í¬ë¡­ëœ ì´ë¯¸ì§€ ìƒì„± (ê³ í’ˆì§ˆ)
        const canvas = cropper.getCroppedCanvas({
            width: 300,   // ìµœì¢… ì´ë¯¸ì§€ ê°€ë¡œ í¬ê¸°
            height: 400,  // ìµœì¢… ì´ë¯¸ì§€ ì„¸ë¡œ í¬ê¸° (3:4 ë¹„ìœ¨)
            imageSmoothingEnabled: true,
            imageSmoothingQuality: 'high'
        });
        
        if (canvas) {
            // Base64ë¡œ ë³€í™˜í•˜ì—¬ ì„œë²„ì— ì „ì†¡
            const croppedImageData = canvas.toDataURL('image/jpeg', 0.9);
            saveImageToServer(croppedImageData);
        } else {
            throw new Error('ìº”ë²„ìŠ¤ ìƒì„± ì‹¤íŒ¨');
        }
        
    } catch (error) {
        console.error('í¬ë¡­ ì²˜ë¦¬ ì˜¤ë¥˜:', error);
        setButtonLoading(elements.buttons.cropAndSave, false);
        alert('ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
}

// ì„œë²„ì— í¬ë¡­ëœ ì´ë¯¸ì§€ ì €ì¥
function saveImageToServer(croppedImageData) {
    const formData = new FormData();
    formData.append('croppedImage', croppedImageData);
    
    fetch('/member/myinfo/crop-image/save', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        setButtonLoading(elements.buttons.cropAndSave, false);
        
        if (data.success) {
            // ìµœì¢… ë¯¸ë¦¬ë³´ê¸° ì„¤ì •
            if (elements.finalPreview) {
                elements.finalPreview.src = croppedImageData;
            }
            
            // ì„±ê³µ ì‹œ ì™„ë£Œ ë‹¨ê³„ í‘œì‹œ
            goToCompleteStep();
            console.log('í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì„±ê³µ');
            
            // 3ì´ˆ í›„ ë§ˆì´í˜ì´ì§€ë¡œ ìë™ ì´ë™ (ì„ íƒì‚¬í•­)
            setTimeout(() => {
                window.location.href = '/member/myinfo/edit';
            }, 2000);
        } else {
            alert(data.message || 'ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    })
    .catch(error => {
        setButtonLoading(elements.buttons.cropAndSave, false);
        console.error('ì €ì¥ ì˜¤ë¥˜:', error);
        alert('ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    });
}

// ë‹¨ê³„ ì´ë™ í•¨ìˆ˜ë“¤
function goToUploadStep() {
    hideAllSections();
    if (elements.uploadSection) elements.uploadSection.style.display = 'block';
    updateStepIndicator(1);
    
    // ì´ˆê¸°í™”
    if (elements.imageInput) elements.imageInput.value = '';
    if (cropper) {
        cropper.destroy();
        cropper = null;
    }
    originalImageData = null;
    originalImage = null;
}

function goToCropStep() {
    hideAllSections();
    if (elements.cropSection) elements.cropSection.style.display = 'block';
    updateStepIndicator(2);
}

function goToCompleteStep() {
    hideAllSections();
    if (elements.completeSection) elements.completeSection.style.display = 'block';
    updateStepIndicator(3);
}

// ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
function hideAllSections() {
    if (elements.uploadSection) elements.uploadSection.style.display = 'none';
    if (elements.cropSection) elements.cropSection.style.display = 'none';
    if (elements.completeSection) elements.completeSection.style.display = 'none';
}

// ë‹¨ê³„ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
function updateStepIndicator(currentStep) {
    // ëª¨ë“  ë‹¨ê³„ ì´ˆê¸°í™”
    Object.values(elements.steps).forEach(step => {
        if (step) {
            step.classList.remove('active', 'completed');
        }
    });
    
    // í˜„ì¬ ë‹¨ê³„ê¹Œì§€ í™œì„±í™”
    for (let i = 1; i <= currentStep; i++) {
        const step = elements.steps[`step${i}`];
        if (step) {
            if (i === currentStep) {
                step.classList.add('active');
            } else {
                step.classList.add('completed');
            }
        }
    }
}

// ë²„íŠ¼ ë¡œë”© ìƒíƒœ ì„¤ì •
function setButtonLoading(button, isLoading, loadingText = 'ì²˜ë¦¬ ì¤‘...') {
    if (!button) return;
    
    if (isLoading) {
        button.disabled = true;
        button.classList.add('loading');
        button.setAttribute('data-original-text', button.innerHTML);
        button.innerHTML = `<i class="fas fa-spinner fa-spin me-1"></i>${loadingText}`;
    } else {
        button.disabled = false;
        button.classList.remove('loading');
        const originalText = button.getAttribute('data-original-text');
        if (originalText) {
            button.innerHTML = originalText;
        }
    }
}
````

## File: backup/deprecated_files/facility-image-cropper.backup.js
````javascript
/**
 * ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ ì „ìš© JavaScript
 * í”„ë¡œí•„ ì´ë¯¸ì§€ ë°©ì‹ì„ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ì¤‘ ì´ë¯¸ì§€ ì²˜ë¦¬ ì¶”ê°€
 * 16:9 ë¹„ìœ¨ ìµœì í™” ë²„ì „
 */

// ì „ì—­ ë³€ìˆ˜
let cropper = null;
let originalImages = [];
let croppedImages = [];
let currentImageIndex = 0;
let facilityId = null;
let smartScrollInstance = null;

// DOM ìš”ì†Œë“¤
const elements = {};

// ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸ¬ ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­í¼ ì´ˆê¸°í™” ì‹œì‘');
    
    // URLì—ì„œ ì‹œì„¤ ID ì¶”ì¶œ
    const pathParts = window.location.pathname.split('/');
    facilityId = pathParts[pathParts.length - 1];
    console.log('ğŸ¢ ì‹œì„¤ ID:', facilityId);
    
    initializeElements();
    setupEventListeners();
    setupDragAndDrop();
    
    console.log('âœ… ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­í¼ ì´ˆê¸°í™” ì™„ë£Œ');
});

// DOM ìš”ì†Œ ì´ˆê¸°í™” (í”„ë¡œí•„ ì´ë¯¸ì§€ ë°©ì‹ ì ìš©)
function initializeElements() {
    console.log('ğŸ” DOM ìš”ì†Œ ì´ˆê¸°í™” ì‹œì‘');
    
    // ê¸°ë³¸ ìš”ì†Œë“¤
    elements.imageInput = document.getElementById('imageInput');
    elements.uploadSection = document.getElementById('uploadSection');
    elements.cropSection = document.getElementById('cropSection');
    elements.compressionSection = document.getElementById('compressionSection');
    elements.completeSection = document.getElementById('completeSection');
    
    // ì—…ë¡œë“œ ê´€ë ¨
    elements.uploadArea = document.getElementById('uploadArea');
    elements.fileSelectBtn = document.getElementById('fileSelectBtn');
    
    // ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸
    elements.imageListSection = document.getElementById('imageListSection');
    elements.imageList = document.getElementById('imageList');
    elements.imageCount = document.getElementById('imageCount');
    
    // í¬ë¡­ ê´€ë ¨
    elements.cropImage = document.getElementById('cropImage');
    elements.previewCanvas = document.getElementById('previewCanvas');
    elements.currentImageNumber = document.getElementById('currentImageNumber');
    elements.imageDimensions = document.getElementById('imageDimensions');
    elements.imageFileName = document.getElementById('imageFileName');
    
    // ì¤Œ í‘œì‹œê¸°
    elements.zoomIndicator = document.getElementById('zoomIndicator');
    elements.zoomLevel = document.getElementById('zoomLevel');
    elements.zoomStatus = document.getElementById('zoomStatus');
    
    // ë‹¨ê³„ í‘œì‹œê¸°
    elements.steps = {
        step1: document.getElementById('step1'),
        step2: document.getElementById('step2'),
        step3: document.getElementById('step3'),
        step4: document.getElementById('step4')
    };
    
    // ë²„íŠ¼ë“¤
    elements.buttons = {
        fileSelect: document.getElementById('fileSelectBtn'),
        backToUpload: document.getElementById('backToUploadBtn'),
        prevImage: document.getElementById('prevImageBtn'),
        nextImage: document.getElementById('nextImageBtn'),
        cropCurrent: document.getElementById('cropCurrentBtn'),
        zoomIn: document.getElementById('zoomInBtn'),
        zoomOut: document.getElementById('zoomOutBtn'),
        rotateLeft: document.getElementById('rotateLeftBtn'),
        rotateRight: document.getElementById('rotateRightBtn'),
        reset: document.getElementById('resetBtn')
    };
    
    console.log('âœ… DOM ìš”ì†Œ ì´ˆê¸°í™” ì™„ë£Œ');
    
    // í•„ìˆ˜ ìš”ì†Œ ê²€ì¦
    const requiredElements = ['imageInput', 'uploadSection', 'cropSection'];
    const missingElements = requiredElements.filter(key => !elements[key]);
    
    if (missingElements.length > 0) {
        console.error('âŒ í•„ìˆ˜ DOM ìš”ì†Œê°€ ì—†ìŠµë‹ˆë‹¤:', missingElements);
    }
}

// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • (í”„ë¡œí•„ ì´ë¯¸ì§€ ë°©ì‹ ì ìš©)
function setupEventListeners() {
    console.log('ğŸ”— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì‹œì‘');
    
    // íŒŒì¼ ì…ë ¥ ì´ë²¤íŠ¸
    if (elements.imageInput) {
        elements.imageInput.removeEventListener('change', handleMultipleImageUpload);
        elements.imageInput.addEventListener('change', handleMultipleImageUpload);
        console.log('ğŸ“ íŒŒì¼ ì…ë ¥ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ë¨');
    }
    
    // íŒŒì¼ ì„ íƒ ë²„íŠ¼ (í”„ë¡œí•„ ë°©ì‹)
    const fileSelectBtn = document.getElementById('fileSelectBtn');
    if (fileSelectBtn) {
        fileSelectBtn.addEventListener('click', () => {
            console.log('ğŸ“ íŒŒì¼ ì„ íƒ ë²„íŠ¼ í´ë¦­ë¨');
            if (elements.imageInput) {
                elements.imageInput.click();
            }
        });
        console.log('âœ… íŒŒì¼ ì„ íƒ ë²„íŠ¼ ì´ë²¤íŠ¸ ë“±ë¡ ì™„ë£Œ');
    }
    
    // í¬ë¡­ ì»¨íŠ¸ë¡¤ ë²„íŠ¼ë“¤
    if (elements.buttons.zoomIn) {
        elements.buttons.zoomIn.addEventListener('click', () => zoomCropper(0.1));
    }
    if (elements.buttons.zoomOut) {
        elements.buttons.zoomOut.addEventListener('click', () => zoomCropper(-0.1));
    }
    if (elements.buttons.rotateLeft) {
        elements.buttons.rotateLeft.addEventListener('click', () => rotateCropper(-90));
    }
    if (elements.buttons.rotateRight) {
        elements.buttons.rotateRight.addEventListener('click', () => rotateCropper(90));
    }
    if (elements.buttons.reset) {
        elements.buttons.reset.addEventListener('click', () => resetCropper());
    }
    
    // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ë“¤
    if (elements.buttons.backToUpload) {
        elements.buttons.backToUpload.addEventListener('click', goToUploadStep);
    }
    if (elements.buttons.prevImage) {
        elements.buttons.prevImage.addEventListener('click', goToPreviousImage);
    }
    if (elements.buttons.nextImage) {
        elements.buttons.nextImage.addEventListener('click', goToNextImage);
    }
    if (elements.buttons.cropCurrent) {
        elements.buttons.cropCurrent.addEventListener('click', cropCurrentImage);
    }
    
    // ì••ì¶• ë‹¨ê³„ ë²„íŠ¼ë“¤ ì¶”ê°€
    const backToCropBtn = document.getElementById('backToCropBtn');
    if (backToCropBtn) {
        backToCropBtn.addEventListener('click', () => {
            console.log('ğŸ”™ í¬ë¡­ ë‹¨ê³„ë¡œ ëŒì•„ê°€ê¸°');
            goToCropStep();
        });
    }
    
    const saveAllImagesBtn = document.getElementById('saveAllImagesBtn');
    if (saveAllImagesBtn) {
        saveAllImagesBtn.addEventListener('click', () => {
            console.log('ğŸ’¾ ëª¨ë“  ì´ë¯¸ì§€ ì €ì¥ ì‹œì‘');
            saveAllImages();
        });
    }
    
    // ì••ì¶• ì„¤ì • ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    setupCompressionControls();
    
    // ì™„ë£Œ ë‹¨ê³„ ë²„íŠ¼ë“¤
    const addMoreImagesBtn = document.getElementById('addMoreImagesBtn');
    if (addMoreImagesBtn) {
        addMoreImagesBtn.addEventListener('click', () => {
            console.log('â• ì´ë¯¸ì§€ ë” ì¶”ê°€ ë²„íŠ¼ í´ë¦­');
            goToUploadStep();
        });
    }
    
    // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
    setupKeyboardShortcuts();
    
    console.log('âœ… ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì™„ë£Œ');
}

// ì••ì¶• ì„¤ì • ì»¨íŠ¸ë¡¤ ì„¤ì • (ìƒˆë¡œ ì¶”ê°€)
function setupCompressionControls() {
    // í’ˆì§ˆ ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
    const qualitySlider = document.getElementById('qualitySlider');
    const qualityPercent = document.getElementById('qualityPercent');
    
    if (qualitySlider && qualityPercent) {
        qualitySlider.addEventListener('input', function() {
            const value = Math.round(this.value * 100);
            qualityPercent.textContent = value + '%';
            updateCompressionPreview();
        });
        
        // ì´ˆê¸°ê°’ ì„¤ì •
        qualityPercent.textContent = Math.round(qualitySlider.value * 100) + '%';
    }
    
    // ì´ë¯¸ì§€ í˜•ì‹ ë¼ë””ì˜¤ ì´ë²¤íŠ¸
    const formatRadios = document.querySelectorAll('input[name="imageFormat"]');
    formatRadios.forEach(radio => {
        radio.addEventListener('change', function() {
            updateCompressionPreview();
            console.log('ğŸ”„ ì´ë¯¸ì§€ í˜•ì‹ ë³€ê²½:', this.value);
        });
    });
    
    // ìë™ ìµœì í™” ì²´í¬ë°•ìŠ¤
    const autoOptimize = document.getElementById('autoOptimize');
    if (autoOptimize) {
        autoOptimize.addEventListener('change', function() {
            updateCompressionPreview();
            console.log('ğŸ¤– ìë™ ìµœì í™”:', this.checked);
        });
    }
    
    console.log('âš™ï¸ ì••ì¶• ì»¨íŠ¸ë¡¤ ì„¤ì • ì™„ë£Œ');
}

// ëª¨ë“  ì´ë¯¸ì§€ ì €ì¥ ê¸°ëŠ¥ (ì„œë²„ í†µì‹  êµ¬í˜„)
function saveAllImages() {
    if (croppedImages.length === 0) {
        alert('ì €ì¥í•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    console.log('ğŸ“¤ ì‹œì„¤ ì´ë¯¸ì§€ ì„œë²„ ì €ì¥ ì‹œì‘');
    const saveBtn = document.getElementById('saveAllImagesBtn');
    setButtonLoading(saveBtn, true, 'ì €ì¥ ì¤‘...');
    
    // Alt í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
    const altTextInput = document.getElementById('altTextInput');
    const altText = altTextInput ? altTextInput.value.trim() : '';
    
    // ì••ì¶• ì„¤ì • ê°€ì ¸ì˜¤ê¸°
    const qualitySlider = document.getElementById('qualitySlider');
    const quality = qualitySlider ? parseFloat(qualitySlider.value) : 0.8;
    
    const formatRadios = document.querySelectorAll('input[name="imageFormat"]:checked');
    const format = formatRadios.length > 0 ? formatRadios[0].value : 'jpeg';
    
    // FormData ìƒì„±
    const formData = new FormData();
    formData.append('facilityId', facilityId);
    formData.append('altText', altText);
    formData.append('quality', quality);
    formData.append('format', format);
    
    // í¬ë¡­ëœ ì´ë¯¸ì§€ë“¤ ì¶”ê°€
    croppedImages.forEach((image, index) => {
        if (image && image.croppedDataUrl) {
            formData.append(`croppedImage_${index}`, image.croppedDataUrl);
            formData.append(`originalName_${index}`, image.name);
        }
    });
    
    console.log(`ğŸ“¸ ì „ì†¡í•  ì´ë¯¸ì§€ ìˆ˜: ${croppedImages.filter(img => img && img.croppedDataUrl).length}`);
    
    // ì„œë²„ì— ì €ì¥ ìš”ì²­
    fetch(`/facility/crop-images/${facilityId}/save`, {
        method: 'POST',
        body: formData
    })
    .then(response => {
        console.log('ğŸ“¡ ì„œë²„ ì‘ë‹µ ìƒíƒœ:', response.status);
        return response.json();
    })
    .then(data => {
        setButtonLoading(saveBtn, false);
        console.log('ğŸ“¥ ì„œë²„ ì‘ë‹µ ë°ì´í„°:', data);
        
        if (data.success) {
            console.log('âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì„±ê³µ');
            goToCompleteStep();
            
            // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
            setTimeout(() => {
                alert('ì‹œì„¤ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }, 500);
            
        } else {
            console.error('âŒ ì €ì¥ ì‹¤íŒ¨:', data.message);
            alert(data.message || 'ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    })
    .catch(error => {
        setButtonLoading(saveBtn, false);
        console.error('ğŸš¨ ì €ì¥ ì˜¤ë¥˜:', error);
        alert('ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    });
}

// ì™„ë£Œ ë‹¨ê³„ë¡œ ì´ë™ (ìƒˆë¡œ ì¶”ê°€)
function goToCompleteStep() {
    hideAllSections();
    if (elements.completeSection) {
        elements.completeSection.style.display = 'block';
        console.log('ğŸ† ì™„ë£Œ ë‹¨ê³„ í‘œì‹œ');
    }
    updateStepIndicator(4);
    
    // ì™„ë£Œëœ ì´ë¯¸ì§€ë“¤ í‘œì‹œ
    updateFinalImagesGrid();
}

// ìµœì¢… ì´ë¯¸ì§€ ê·¸ë¦¬ë“œ ì—…ë°ì´íŠ¸ (ìƒˆë¡œ ì¶”ê°€)
function updateFinalImagesGrid() {
    const finalImagesGrid = document.getElementById('finalImagesGrid');
    if (!finalImagesGrid) return;
    
    finalImagesGrid.innerHTML = '';
    
    croppedImages.forEach((image, index) => {
        if (image && image.croppedDataUrl) {
            const imageElement = document.createElement('div');
            imageElement.className = 'col-md-3 col-sm-4 col-6 mb-3';
            imageElement.innerHTML = `
                <div class="card">
                    <img src="${image.croppedDataUrl}" class="card-img-top" style="height: 120px; object-fit: cover;">
                    <div class="card-body p-2">
                        <small class="text-muted">ì´ë¯¸ì§€ ${index + 1}</small>
                    </div>
                </div>
            `;
            finalImagesGrid.appendChild(imageElement);
        }
    });
    
    console.log(`ğŸ–¼ï¸ ìµœì¢… ì´ë¯¸ì§€ ê·¸ë¦¬ë“œ ì—…ë°ì´íŠ¸: ${croppedImages.length}ê°œ`);
}

// ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì„¤ì • (í”„ë¡œí•„ ë°©ì‹ ì ìš©)
function setupDragAndDrop() {
    const uploadArea = elements.uploadArea;
    if (!uploadArea) return;
    
    uploadArea.addEventListener('dragover', handleDragOver);
    uploadArea.addEventListener('drop', handleDrop);
    
    // ì—…ë¡œë“œ ì˜ì—­ í´ë¦­ ì‹œ íŒŒì¼ ì„ íƒ (í”„ë¡œí•„ ë°©ì‹)
    uploadArea.addEventListener('click', (event) => {
        if (!event.target.closest('#fileSelectBtn')) {
            console.log('ğŸ–±ï¸ ì—…ë¡œë“œ ì˜ì—­ í´ë¦­ë¨');
            if (elements.imageInput) {
                elements.imageInput.click();
            }
        }
    });
    
    console.log('ğŸ¯ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì„¤ì • ì™„ë£Œ');
}

// ë“œë˜ê·¸ ì˜¤ë²„ ì²˜ë¦¬ (í”„ë¡œí•„ ë°©ì‹)
function handleDragOver(event) {
    event.preventDefault();
    event.currentTarget.style.borderColor = '#0d6efd';
    event.currentTarget.style.backgroundColor = '#f8f9ff';
}

// ë“œë¡­ ì²˜ë¦¬ (í”„ë¡œí•„ ë°©ì‹)
function handleDrop(event) {
    event.preventDefault();
    const files = Array.from(event.dataTransfer.files);
    if (files.length > 0) {
        console.log(`ğŸ¯ ë“œë¡­ëœ íŒŒì¼ ìˆ˜: ${files.length}`);
        handleMultipleFiles(files);
    }
    
    // ìŠ¤íƒ€ì¼ ë¦¬ì…‹
    event.currentTarget.style.borderColor = '';
    event.currentTarget.style.backgroundColor = '';
}

// ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì²˜ë¦¬
function handleMultipleImageUpload(event) {
    console.log('ğŸ“ ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ ì´ë²¤íŠ¸ ë°œìƒ');
    const files = Array.from(event.target.files);
    handleMultipleFiles(files);
}

// ë‹¤ì¤‘ íŒŒì¼ ì²˜ë¦¬ ë©”ì¸ ë¡œì§
function handleMultipleFiles(files) {
    if (files.length === 0) {
        console.log('ì„ íƒëœ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤');
        return;
    }
    
    console.log(`ğŸ“¸ ì„ íƒëœ íŒŒì¼ ìˆ˜: ${files.length}`);
    
    // ìµœëŒ€ 5ì¥ ì œí•œ
    if (files.length > 5) {
        alert('ìµœëŒ€ 5ì¥ê¹Œì§€ë§Œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
        return;
    }
    
    // íŒŒì¼ ê²€ì¦
    const validFiles = files.filter(file => validateImageFile(file));
    if (validFiles.length === 0) {
        alert('ìœ íš¨í•œ ì´ë¯¸ì§€ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    if (validFiles.length !== files.length) {
        alert(`${files.length - validFiles.length}ê°œ íŒŒì¼ì´ í˜•ì‹ ì˜¤ë¥˜ë¡œ ì œì™¸ë˜ì—ˆìŠµë‹ˆë‹¤.`);
    }
    
    // ê¸°ì¡´ ì´ë¯¸ì§€ ì´ˆê¸°í™”
    originalImages = [];
    croppedImages = [];
    currentImageIndex = 0;
    
    // ëª¨ë“  íŒŒì¼ ì²˜ë¦¬
    processMultipleFiles(validFiles);
}

// ì´ë¯¸ì§€ íŒŒì¼ ê²€ì¦ (í”„ë¡œí•„ ë°©ì‹)
function validateImageFile(file) {
    console.log(`ğŸ” íŒŒì¼ ê²€ì¦: ${file.name}`);
    
    // íŒŒì¼ íƒ€ì… ê²€ì¦
    if (!file.type.startsWith('image/')) {
        console.error(`âŒ ì´ë¯¸ì§€ íŒŒì¼ì´ ì•„ë‹˜: ${file.name}`);
        return false;
    }
    
    // ì§€ì›ë˜ëŠ” í˜•ì‹ ê²€ì¦
    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
        console.error(`âŒ ì§€ì›ë˜ì§€ ì•ŠëŠ” í˜•ì‹: ${file.name} (${file.type})`);
        return false;
    }
    
    // íŒŒì¼ í¬ê¸° ê²€ì¦ (10MB)
    if (file.size > 10 * 1024 * 1024) {
        console.error(`âŒ íŒŒì¼ í¬ê¸° ì´ˆê³¼: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)}MB)`);
        return false;
    }
    
    console.log(`âœ… íŒŒì¼ ê²€ì¦ í†µê³¼: ${file.name}`);
    return true;
}

// ë‹¤ì¤‘ íŒŒì¼ ìˆœì°¨ ì²˜ë¦¬ (í”„ë¡œí•„ ë°©ì‹ ì™„ì „ ì ìš©)
function processMultipleFiles(files) {
    let processedCount = 0;
    
    files.forEach((file, index) => {
        processSingleFile(file, index, () => {
            processedCount++;
            console.log(`ğŸ“¸ ì²˜ë¦¬ ì§„í–‰ë¥ : ${processedCount}/${files.length}`);
            
            if (processedCount === files.length) {
                console.log('âœ… ëª¨ë“  ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ - í”„ë¡œí•„ ë°©ì‹ ì ìš©');
                
                // í”„ë¡œí•„ ë°©ì‹: ì¦‰ì‹œ ì‹¤í–‰ (íƒ€ì´ë° ë¬¸ì œ í•´ê²°)
                showImageList();
                loadCurrentImageToCropper();
                goToCropStep();
                
                console.log('ğŸš€ ëª¨ë“  ë‹¨ê³„ ì‹¤í–‰ ì™„ë£Œ');
            }
        });
    });
}

// ë‹¨ì¼ íŒŒì¼ ì²˜ë¦¬ (í”„ë¡œí•„ ë°©ì‹ ì ìš©)
function processSingleFile(file, index, callback) {
    console.log(`ğŸ–¼ï¸ ì´ë¯¸ì§€ ì²˜ë¦¬ ì‹œì‘: ${file.name} (${index + 1})`);
    
    const reader = new FileReader();
    reader.onload = function(e) {
        const imageData = {
            id: index,
            name: file.name,
            size: file.size,
            type: file.type,
            dataUrl: e.target.result,
            originalFile: file
        };
        
        originalImages.push(imageData);
        console.log(`âœ… ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ: ${file.name}`);
        
        if (callback) callback();
    };
    
    reader.onerror = function() {
        console.error(`âŒ íŒŒì¼ ì½ê¸° ì‹¤íŒ¨: ${file.name}`);
        alert(`${file.name} íŒŒì¼ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
    };
    
    reader.readAsDataURL(file);
}

// í¬ë¡­í¼ ì´ˆê¸°í™” (16:9 ë¹„ìœ¨)
function initializeCropper() {
    if (!elements.cropImage) {
        console.error('âŒ cropImage ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    console.log('ğŸ”§ í¬ë¡­í¼ ì´ˆê¸°í™” - 16:9 ë¹„ìœ¨');
    
    // ê¸°ì¡´ í¬ë¡­í¼ ì •ë¦¬
    if (cropper) {
        cropper.destroy();
        cropper = null;
    }
    
    // ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ì¸ìŠ¤í„´ìŠ¤ ì •ë¦¬
    if (smartScrollInstance) {
        smartScrollInstance.destroy();
        smartScrollInstance = null;
    }
    
    cropper = new Cropper(elements.cropImage, {
        aspectRatio: 16 / 9, // ì‹œì„¤ ì‚¬ì§„ì€ 16:9 ë¹„ìœ¨
        viewMode: 1,
        dragMode: 'move',
        autoCropArea: 0.8,
        responsive: true,
        restore: false,
        guides: true,
        center: true,
        highlight: false,
        cropBoxMovable: true,
        cropBoxResizable: true,
        toggleDragModeOnDblclick: true,
        rotatable: true,
        scalable: true,
        zoomable: true,
        minCropBoxWidth: 200,
        minCropBoxHeight: 112,
        ready() {
            console.log('âœ… í¬ë¡­í¼ ì¤€ë¹„ ì™„ë£Œ');
            updatePreview();
            // í”„ë¡œí•„ ë°©ì‹: í¬ë¡­í¼ ì¤€ë¹„ ì™„ë£Œ í›„ ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ì„¤ì •
            setTimeout(() => {
                setupSmartScroll();
            }, 100);
        },
        crop: updatePreview
    });
}

// ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ì„¤ì • (í”„ë¡œí•„ ë°©ì‹ ì •í™•íˆ ë³µì‚¬)
function setupSmartScroll() {
    if (!cropper || !elements.cropImage) return;
    
    const cropContainer = elements.cropImage.parentElement;
    if (!cropContainer) return;
    
    // ìµœëŒ€/ìµœì†Œ ì¤Œ ë ˆë²¨ ì„¤ì • (í”„ë¡œí•„ê³¼ ì •í™•íˆ ë™ì¼)
    const MIN_ZOOM = 0.1;  // ìµœì†Œ ì¤Œ (10%)
    const MAX_ZOOM = 3.0;  // ìµœëŒ€ ì¤Œ (300%)
    
    console.log('ğŸ–±ï¸ ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ í™œì„±í™”');
    
    cropContainer.addEventListener('wheel', function(event) {
        if (!cropper) return;
        
        // í˜„ì¬ ì¤Œ ë ˆë²¨ í™•ì¸ (í”„ë¡œí•„ê³¼ ì •í™•íˆ ë™ì¼í•œ ë°©ì‹)
        const canvasData = cropper.getCanvasData();
        const containerData = cropper.getContainerData();
        const currentZoom = canvasData.naturalWidth > 0 ? canvasData.width / canvasData.naturalWidth : 1;
        
        const isZoomingIn = event.deltaY < 0;  // íœ ì„ ìœ„ë¡œ ì˜¬ë¦¬ë©´ í™•ëŒ€
        const isZoomingOut = event.deltaY > 0; // íœ ì„ ì•„ë˜ë¡œ ë‚´ë¦¬ë©´ ì¶•ì†Œ
        
        console.log('ğŸ” í˜„ì¬ ì¤Œ:', currentZoom.toFixed(2), 'ë°©í–¥:', isZoomingIn ? 'í™•ëŒ€' : 'ì¶•ì†Œ');
        
        // í”„ë¡œí•„ê³¼ ì •í™•íˆ ë™ì¼í•œ ì„ê³„ê°’ ì„¤ì •
        const maxThreshold = 2.8;  // ì¡°ê¸ˆ ë” ë‚®ì€ ìµœëŒ€ê°’
        const minThreshold = 0.2;  // ì¡°ê¸ˆ ë” ë†’ì€ ìµœì†Œê°’
        
        // í™•ëŒ€ ì‹œ: ìµœëŒ€ ì¤Œ ê·¼ì²˜ì—ì„œ í˜ì´ì§€ ìŠ¤í¬ë¡¤ í—ˆìš©
        if (isZoomingIn && currentZoom >= maxThreshold) {
            updateZoomIndicator(currentZoom, 'ìµœëŒ€ í™•ëŒ€');
            console.log('ğŸ“ˆ ìµœëŒ€ í™•ëŒ€ ê·¼ì²˜ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ì‹¤í–‰');
            
            // í˜ì´ì§€ ìŠ¤í¬ë¡¤ì„ ë” ë¶€ë“œëŸ½ê²Œ ì‹¤í–‰ (í”„ë¡œí•„ê³¼ ì •í™•íˆ ë™ì¼)
            const scrollAmount = event.deltaY * 0.5; // ìŠ¤í¬ë¡¤ ê°•ë„ ì¡°ì ˆ
            window.scrollBy({
                top: scrollAmount,
                behavior: 'smooth'
            });
            return;
        }
        
        // ì¶•ì†Œ ì‹œ: ìµœì†Œ ì¤Œ ê·¼ì²˜ì—ì„œ í˜ì´ì§€ ìŠ¤í¬ë¡¤ í—ˆìš©  
        if (isZoomingOut && currentZoom <= minThreshold) {
            updateZoomIndicator(currentZoom, 'ìµœì†Œ ì¶•ì†Œ');
            console.log('ğŸ“‰ ìµœì†Œ ì¶•ì†Œ ê·¼ì²˜ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ì‹¤í–‰');
            
            // í˜ì´ì§€ ìŠ¤í¬ë¡¤ì„ ë” ë¶€ë“œëŸ½ê²Œ ì‹¤í–‰ (í”„ë¡œí•„ê³¼ ì •í™•íˆ ë™ì¼)
            const scrollAmount = event.deltaY * 0.5; // ìŠ¤í¬ë¡¤ ê°•ë„ ì¡°ì ˆ
            window.scrollBy({
                top: scrollAmount,
                behavior: 'smooth'
            });
            return;
        }
        
        // ì´ë¯¸ì§€ í™•ëŒ€/ì¶•ì†Œ ë²”ìœ„ ë‚´ì—ì„œëŠ” ê¸°ë³¸ ìŠ¤í¬ë¡¤ ì°¨ë‹¨í•˜ê³  ì¤Œ ì ìš©
        event.preventDefault();
        event.stopPropagation();
        
        const zoomDelta = isZoomingIn ? 0.1 : -0.1;
        cropper.zoom(zoomDelta);
        
        // ì¤Œ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
        const newZoom = Math.max(MIN_ZOOM, Math.min(MAX_ZOOM, currentZoom + zoomDelta));
        updateZoomIndicator(newZoom, isZoomingIn ? 'í™•ëŒ€' : 'ì¶•ì†Œ');
        
    }, { passive: false }); // passive: falseë¡œ ì„¤ì •í•´ì•¼ preventDefault ì‘ë™
}

// ì¤Œ í‘œì‹œê¸° ì—…ë°ì´íŠ¸ (í”„ë¡œí•„ ë°©ì‹ ì™„ì „ ì ìš©)
function updateZoomIndicator(zoomLevel, status) {
    if (!elements.zoomIndicator || !elements.zoomLevel || !elements.zoomStatus) return;
    
    // ì¤Œ ë ˆë²¨ì„ í¼ì„¼íŠ¸ë¡œ í‘œì‹œ (í”„ë¡œí•„ê³¼ ë™ì¼)
    const zoomPercent = Math.round(zoomLevel * 100);
    elements.zoomLevel.textContent = zoomPercent + '%';
    
    // ìƒíƒœ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸ (í”„ë¡œí•„ê³¼ ë™ì¼)
    let statusMessage = '';
    let statusClass = '';
    
    if (status === 'ìµœëŒ€ í™•ëŒ€') {
        statusMessage = '(ìµœëŒ€ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ê°€ëŠ¥)';
        statusClass = 'text-warning';
    } else if (status === 'ìµœì†Œ ì¶•ì†Œ') {
        statusMessage = '(ìµœì†Œ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ê°€ëŠ¥)';
        statusClass = 'text-info';
    } else {
        statusMessage = `(${status} ì¤‘)`;
        statusClass = 'text-success';
    }
    
    elements.zoomStatus.textContent = statusMessage;
    elements.zoomStatus.className = `ms-2 ${statusClass}`;
    
    // ì¤Œ í‘œì‹œê¸° ë³´ì´ê¸° (í”„ë¡œí•„ê³¼ ë™ì¼)
    elements.zoomIndicator.style.display = 'block';
    
    // 3ì´ˆ í›„ ìë™ ìˆ¨ê¹€ (í”„ë¡œí•„ê³¼ ë™ì¼)
    clearTimeout(window.zoomIndicatorTimeout);
    window.zoomIndicatorTimeout = setTimeout(() => {
        if (elements.zoomIndicator) {
            elements.zoomIndicator.style.display = 'none';
        }
    }, 3000);
}

// í˜„ì¬ ì´ë¯¸ì§€ë¥¼ í¬ë¡­í¼ì— ë¡œë“œ
function loadCurrentImageToCropper() {
    if (originalImages.length === 0) return;
    
    const currentImage = originalImages[currentImageIndex];
    if (!currentImage) return;
    
    console.log(`ğŸ–¼ï¸ í¬ë¡­í¼ì— ì´ë¯¸ì§€ ë¡œë“œ: ${currentImage.name} (${currentImageIndex + 1}/${originalImages.length})`);
    
    // í˜„ì¬ ì´ë¯¸ì§€ ë²ˆí˜¸ ì—…ë°ì´íŠ¸
    if (elements.currentImageNumber) {
        elements.currentImageNumber.textContent = `${currentImageIndex + 1}/${originalImages.length}`;
    }
    if (elements.imageDimensions) {
        elements.imageDimensions.textContent = 'ê³„ì‚° ì¤‘...';
    }
    if (elements.imageFileName) {
        elements.imageFileName.textContent = currentImage.name;
    }
    
    // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
    if (elements.buttons.prevImage) {
        elements.buttons.prevImage.style.display = currentImageIndex > 0 ? 'inline-block' : 'none';
    }
    if (elements.buttons.nextImage) {
        elements.buttons.nextImage.style.display = currentImageIndex < originalImages.length - 1 ? 'inline-block' : 'none';
    }
    
    elements.cropImage.src = currentImage.dataUrl;
    elements.cropImage.style.display = 'block';
    
    elements.cropImage.onload = function() {
        console.log('ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ, í¬ë¡­í¼ ì´ˆê¸°í™” ì‹œì‘');
        setTimeout(() => {
            initializeCropper();
            updateImageDimensions();
        }, 100);
    };
}

// ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ (16:9 ë¹„ìœ¨)
function updatePreview() {
    if (!cropper || !elements.previewCanvas) return;
    
    console.log('ğŸ–¼ï¸ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ ì‹œì‘');
    
    // í¬ë¡­ëœ ì´ë¯¸ì§€ë¥¼ ìº”ë²„ìŠ¤ì— ê·¸ë¦¬ê¸° (16:9 ë¹„ìœ¨)
    const canvas = cropper.getCroppedCanvas({
        width: 192,
        height: 108,
        imageSmoothingEnabled: true,
        imageSmoothingQuality: 'high'
    });
    
    if (canvas) {
        const ctx = elements.previewCanvas.getContext('2d');
        ctx.clearRect(0, 0, elements.previewCanvas.width, elements.previewCanvas.height);
        ctx.drawImage(canvas, 0, 0, elements.previewCanvas.width, elements.previewCanvas.height);
        console.log('âœ… ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ ì™„ë£Œ');
    }
}

// ì´ë¯¸ì§€ í¬ê¸° ì •ë³´ ì—…ë°ì´íŠ¸
function updateImageDimensions() {
    if (!cropper || !elements.imageDimensions) return;
    
    const imageData = cropper.getImageData();
    elements.imageDimensions.textContent = `${Math.round(imageData.naturalWidth)} Ã— ${Math.round(imageData.naturalHeight)}`;
}

// ë‹¨ê³„ ì´ë™ í•¨ìˆ˜ë“¤
function goToUploadStep() {
    hideAllSections();
    if (elements.uploadSection) elements.uploadSection.style.display = 'block';
    updateStepIndicator(1);
    
    // ì´ˆê¸°í™”
    if (elements.imageInput) elements.imageInput.value = '';
    if (cropper) {
        cropper.destroy();
        cropper = null;
    }
    if (smartScrollInstance) {
        smartScrollInstance.destroy();
        smartScrollInstance = null;
    }
    originalImages = [];
    croppedImages = [];
    currentImageIndex = 0;
}

function goToCropStep() {
    hideAllSections();
    if (elements.cropSection) elements.cropSection.style.display = 'block';
    updateStepIndicator(2);
}

// ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸° (ì••ì¶• ì„¹ì…˜ í¬í•¨)
function hideAllSections() {
    const sections = ['uploadSection', 'cropSection', 'compressionSection', 'completeSection'];
    sections.forEach(sectionId => {
        const section = elements[sectionId];
        if (section) {
            section.style.display = 'none';
            console.log(`ğŸ™ˆ ${sectionId} ì„¹ì…˜ ìˆ¨ê¹€`);
        }
    });
    
    // ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸ ì„¹ì…˜ë„ ìˆ¨ê¹€
    if (elements.imageListSection) {
        elements.imageListSection.style.display = 'none';
    }
}

// ë‹¨ê³„ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
function updateStepIndicator(currentStep) {
    if (!elements.steps) return;
    
    // ëª¨ë“  ë‹¨ê³„ ì´ˆê¸°í™”
    Object.values(elements.steps).forEach(step => {
        if (step) {
            step.classList.remove('active', 'completed');
        }
    });
    
    // í˜„ì¬ ë‹¨ê³„ê¹Œì§€ í™œì„±í™”
    for (let i = 1; i <= currentStep; i++) {
        const step = elements.steps[`step${i}`];
        if (step) {
            if (i === currentStep) {
                step.classList.add('active');
            } else {
                step.classList.add('completed');
            }
        }
    }
}

// ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸ í‘œì‹œ
function showImageList() {
    if (!elements.imageListSection || !elements.imageList) return;
    
    if (elements.imageCount) {
        elements.imageCount.textContent = originalImages.length;
    }
    elements.imageList.innerHTML = '';
    
    originalImages.forEach((image, index) => {
        const imageItem = document.createElement('div');
        imageItem.className = 'col-md-4 col-lg-3';
        imageItem.innerHTML = `
            <div class="card image-item" data-index="${index}">
                <div class="card-img-top position-relative">
                    <img src="${image.dataUrl}" class="img-fluid" style="height: 120px; object-fit: cover;">
                    <div class="position-absolute top-0 end-0 p-1">
                        <span class="badge bg-primary">${index + 1}</span>
                    </div>
                </div>
                <div class="card-body p-2">
                    <h6 class="card-title text-truncate small mb-1">${image.name}</h6>
                    <small class="text-muted">${formatFileSize(image.size)}</small>
                </div>
            </div>
        `;
        
        elements.imageList.appendChild(imageItem);
    });
    
    if (elements.imageListSection) {
        elements.imageListSection.style.display = 'block';
    }
}

// íŒŒì¼ í¬ê¸° í¬ë§·íŒ…
function formatFileSize(bytes) {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
}

// í¬ë¡­í¼ ì¤Œ
function zoomCropper(ratio) {
    if (!cropper) return;
    cropper.zoom(ratio);
}

// í¬ë¡­í¼ íšŒì „
function rotateCropper(degree) {
    if (!cropper) return;
    cropper.rotate(degree);
}

// í¬ë¡­í¼ ë¦¬ì…‹
function resetCropper() {
    if (!cropper) return;
    cropper.reset();
}

// ì´ì „ ì´ë¯¸ì§€ë¡œ ì´ë™
function goToPreviousImage() {
    if (currentImageIndex > 0) {
        currentImageIndex--;
        loadCurrentImageToCropper();
    }
}

// ë‹¤ìŒ ì´ë¯¸ì§€ë¡œ ì´ë™
function goToNextImage() {
    if (currentImageIndex < originalImages.length - 1) {
        currentImageIndex++;
        loadCurrentImageToCropper();
    }
}

// í˜„ì¬ ì´ë¯¸ì§€ í¬ë¡­ (í”„ë¡œí•„ ë°©ì‹ + ë‹¤ìŒ ë‹¨ê³„ ì´ë™ ì¶”ê°€)
function cropCurrentImage() {
    if (!cropper) {
        alert('í¬ë¡­í¼ê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
        return;
    }
    
    console.log(`ğŸ”„ ì´ë¯¸ì§€ í¬ë¡­ ì¤‘: ${currentImageIndex + 1}/${originalImages.length}`);
    
    // ë²„íŠ¼ ë¡œë”© ìƒíƒœ ì„¤ì • (í”„ë¡œí•„ ë°©ì‹)
    const cropBtn = elements.buttons.cropCurrent;
    setButtonLoading(cropBtn, true, 'í¬ë¡­ ì¤‘...');
    
    try {
        // í¬ë¡­ëœ ì´ë¯¸ì§€ ìƒì„± (16:9 ë¹„ìœ¨)
        const canvas = cropper.getCroppedCanvas({
            width: 800,
            height: 450, // 16:9 ë¹„ìœ¨
            imageSmoothingEnabled: true,
            imageSmoothingQuality: 'high'
        });
        
        if (canvas) {
            const croppedImageData = canvas.toDataURL('image/jpeg', 0.9);
            
            // í¬ë¡­ëœ ì´ë¯¸ì§€ ì €ì¥
            croppedImages[currentImageIndex] = {
                ...originalImages[currentImageIndex],
                croppedDataUrl: croppedImageData,
                isCropped: true
            };
            
            console.log(`âœ… ì´ë¯¸ì§€ í¬ë¡­ ì™„ë£Œ: ${currentImageIndex + 1}`);
            
            // ë‹¤ìŒ ì´ë¯¸ì§€ë¡œ ìë™ ì´ë™ ë˜ëŠ” ì••ì¶• ë‹¨ê³„ë¡œ
            if (currentImageIndex < originalImages.length - 1) {
                // ë‹¤ìŒ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ ì´ë™
                setTimeout(() => {
                    setButtonLoading(cropBtn, false);
                    goToNextImage();
                }, 500);
            } else {
                // ëª¨ë“  ì´ë¯¸ì§€ í¬ë¡­ ì™„ë£Œ ì‹œ ì••ì¶• ë‹¨ê³„ë¡œ ì´ë™
                console.log('ğŸ‰ ëª¨ë“  ì´ë¯¸ì§€ í¬ë¡­ ì™„ë£Œ - ì••ì¶• ë‹¨ê³„ë¡œ ì´ë™');
                setTimeout(() => {
                    setButtonLoading(cropBtn, false);
                    goToCompressionStep();
                }, 500);
            }
        } else {
            throw new Error('ìº”ë²„ìŠ¤ ìƒì„± ì‹¤íŒ¨');
        }
        
    } catch (error) {
        console.error('í¬ë¡­ ì²˜ë¦¬ ì˜¤ë¥˜:', error);
        setButtonLoading(cropBtn, false);
        alert('ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
}

// ì••ì¶• ë‹¨ê³„ë¡œ ì´ë™ (ìƒˆë¡œ ì¶”ê°€)
function goToCompressionStep() {
    hideAllSections();
    if (elements.compressionSection) {
        elements.compressionSection.style.display = 'block';
        console.log('ğŸ“¦ ì••ì¶• ë‹¨ê³„ í‘œì‹œ ì™„ë£Œ');
    }
    updateStepIndicator(3);
    
    // í¬ë¡­ëœ ì´ë¯¸ì§€ë“¤ì„ ì••ì¶• ë¯¸ë¦¬ë³´ê¸°ì— í‘œì‹œ
    updateCompressionPreview();
}

// ì••ì¶• ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ (ì‹¤ì‹œê°„ ë°˜ì˜)
function updateCompressionPreview() {
    const finalPreviewImage = document.getElementById('finalPreviewImage');
    const compressionSavings = document.getElementById('compressionSavings');
    const currentFormat = document.getElementById('currentFormat');
    
    if (!finalPreviewImage || croppedImages.length === 0) return;
    
    // ì²« ë²ˆì§¸ í¬ë¡­ëœ ì´ë¯¸ì§€ë¥¼ ë¯¸ë¦¬ë³´ê¸°ë¡œ í‘œì‹œ
    const firstCroppedImage = croppedImages.find(img => img && img.croppedDataUrl);
    if (!firstCroppedImage) return;
    
    // í˜„ì¬ ì„¤ì • ê°€ì ¸ì˜¤ê¸°
    const qualitySlider = document.getElementById('qualitySlider');
    const quality = qualitySlider ? parseFloat(qualitySlider.value) : 0.8;
    
    const formatRadios = document.querySelectorAll('input[name="imageFormat"]:checked');
    const format = formatRadios.length > 0 ? formatRadios[0].value : 'jpeg';
    
    // ì„ íƒëœ í˜•ì‹ì— ë”°ë¼ ì´ë¯¸ì§€ ì¬ì••ì¶•
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    const img = new Image();
    
    img.onload = function() {
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.drawImage(img, 0, 0);
        
        // í˜•ì‹ë³„ ì••ì¶• ì ìš©
        let mimeType = 'image/jpeg';
        let compressionRatio = 0.7; // ê¸°ë³¸ ì••ì¶•ë¥ 
        
        switch(format) {
            case 'avif':
                mimeType = 'image/avif';
                compressionRatio = 0.9; // AVIFëŠ” ë†’ì€ ì••ì¶•ë¥ 
                break;
            case 'webp':
                mimeType = 'image/webp';
                compressionRatio = 0.8; // WebPëŠ” ì¤‘ê°„ ì••ì¶•ë¥ 
                break;
            case 'jpeg':
            default:
                mimeType = 'image/jpeg';
                compressionRatio = 0.7; // JPEGëŠ” ë‚®ì€ ì••ì¶•ë¥ 
                break;
        }
        
        // ì••ì¶•ëœ ì´ë¯¸ì§€ ìƒì„±
        const compressedDataUrl = canvas.toDataURL(mimeType, quality);
        finalPreviewImage.src = compressedDataUrl;
        
        // ì••ì¶• ì •ë³´ ì—…ë°ì´íŠ¸
        if (compressionSavings) {
            const savingsPercent = Math.round(compressionRatio * 100);
            compressionSavings.textContent = `í‰ê·  ${savingsPercent}% ìš©ëŸ‰ ì ˆì•½`;
            compressionSavings.className = 'compression-savings text-success fw-bold mb-2';
        }
        
        if (currentFormat) {
            currentFormat.textContent = format.toUpperCase();
            currentFormat.className = 'fw-bold';
        }
        
        console.log(`ğŸ”§ ì••ì¶• ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸: ${format.toUpperCase()}, í’ˆì§ˆ: ${Math.round(quality * 100)}%`);
    };
    
    img.src = firstCroppedImage.croppedDataUrl;
}

// ë²„íŠ¼ ë¡œë”© ìƒíƒœ ì„¤ì • (í”„ë¡œí•„ ë°©ì‹ê³¼ ë™ì¼)
function setButtonLoading(button, isLoading, loadingText = 'ì²˜ë¦¬ ì¤‘...') {
    if (!button) return;
    
    if (isLoading) {
        button.disabled = true;
        button.classList.add('loading');
        button.setAttribute('data-original-text', button.innerHTML);
        button.innerHTML = `<i class="fas fa-spinner fa-spin me-1"></i>${loadingText}`;
    } else {
        button.disabled = false;
        button.classList.remove('loading');
        const originalText = button.getAttribute('data-original-text');
        if (originalText) {
            button.innerHTML = originalText;
        }
    }
}

// í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì„¤ì •
function setupKeyboardShortcuts() {
    document.addEventListener('keydown', function(event) {
        // ì…ë ¥ í•„ë“œì—ì„œëŠ” ë‹¨ì¶•í‚¤ ë¹„í™œì„±í™”
        if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {
            return;
        }
        
        switch (event.key) {
            case '+':
            case '=':
                event.preventDefault();
                zoomCropper(0.1);
                break;
                
            case '-':
                event.preventDefault();
                zoomCropper(-0.1);
                break;
                
            case 'r':
            case 'R':
                event.preventDefault();
                rotateCropper(90);
                break;
                
            case 'l':
            case 'L':
                event.preventDefault();
                rotateCropper(-90);
                break;
                
            case 'Enter':
                event.preventDefault();
                if (elements.buttons.cropCurrent && !elements.buttons.cropCurrent.disabled) {
                    cropCurrentImage();
                }
                break;
                
            case 'Escape':
                event.preventDefault();
                resetCropper();
                break;
                
            case 'ArrowLeft':
                event.preventDefault();
                if (elements.buttons.prevImage && elements.buttons.prevImage.style.display !== 'none') {
                    goToPreviousImage();
                }
                break;
                
            case 'ArrowRight':
                event.preventDefault();
                if (elements.buttons.nextImage && elements.buttons.nextImage.style.display !== 'none') {
                    goToNextImage();
                }
                break;
        }
    });
    
    console.log('âŒ¨ï¸ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì„¤ì • ì™„ë£Œ');
}

// í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ ì •ë¦¬
window.addEventListener('beforeunload', function() {
    if (cropper) {
        cropper.destroy();
    }
    if (smartScrollInstance) {
        smartScrollInstance.destroy();
    }
});
````

## File: backup/facility-image-implementation/facility-image-implementation/facility-detail-map.js
````javascript
/**
 * ì‹œì„¤ ìƒì„¸ë³´ê¸° í˜ì´ì§€ ì§€ë„ ê¸°ëŠ¥ ì „ìš© JavaScript
 * - ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ì‚¬ìš©í•œ ì‹œì„¤ ìœ„ì¹˜ í‘œì‹œ
 * - ì¸í¬ìœˆë„ìš° ë° ê¸¸ì°¾ê¸° ê¸°ëŠ¥
 * - ì§€ë„ ì»¨íŠ¸ë¡¤ ë° ì—ëŸ¬ ì²˜ë¦¬
 */

// ì „ì—­ ë³€ìˆ˜
let detailMap = null;
let detailMarker = null;
let detailInfoWindow = null;
let facilityMapData = {};

/**
 * ì‹œì„¤ ì§€ë„ ë°ì´í„° ì´ˆê¸°í™”
 * @param {Object} data - Thymeleafì—ì„œ ì „ë‹¬ë°›ì€ ì‹œì„¤ ë°ì´í„°
 */
function initializeFacilityMapData(data) {
    facilityMapData = data;
    console.log('ğŸ—ºï¸ ì‹œì„¤ ì§€ë„ ë°ì´í„° ì´ˆê¸°í™”:', facilityMapData);
}

/**
 * ì‹œì„¤ ìƒì„¸ë³´ê¸° ì§€ë„ ì´ˆê¸°í™”
 */
function initializeFacilityDetailMap() {
    console.log('ğŸ—ºï¸ ì‹œì„¤ ìƒì„¸ë³´ê¸° ì§€ë„ ì´ˆê¸°í™” ì‹œì‘');
    
    const mapContainer = document.getElementById('facilityMap');
    if (!mapContainer) {
        console.error('âŒ ì§€ë„ ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    let mapCenter = new kakao.maps.LatLng(37.566826, 126.9786567); // ê¸°ë³¸ê°’: ì„œìš¸ ì‹œì²­
    
    // ì‹œì„¤ ìœ„ì¹˜ê°€ ìˆë‹¤ë©´ í•´ë‹¹ ìœ„ì¹˜ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ì •
    if (facilityMapData.latitude && facilityMapData.longitude) {
        mapCenter = new kakao.maps.LatLng(facilityMapData.latitude, facilityMapData.longitude);
        console.log('ğŸ“ ì‹œì„¤ ìœ„ì¹˜:', facilityMapData.latitude, facilityMapData.longitude);
    } else {
        console.warn('âš ï¸ ì‹œì„¤ ìœ„ì¹˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
    }
    
    const mapOption = {
        center: mapCenter,
        level: 3 // ìƒì„¸ í˜ì´ì§€ì´ë¯€ë¡œ ë” í™•ëŒ€í•´ì„œ ë³´ì—¬ì¤Œ
    };
    
    try {
        detailMap = new kakao.maps.Map(mapContainer, mapOption);
        console.log('âœ… ì§€ë„ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì™„ë£Œ');
        
        // ì‹œì„¤ ìœ„ì¹˜ì— ë§ˆì»¤ ì¶”ê°€
        if (facilityMapData.latitude && facilityMapData.longitude) {
            addFacilityMarker();
            addMapControls();
            console.log('âœ… ì‹œì„¤ ìƒì„¸ë³´ê¸° ì§€ë„ ì´ˆê¸°í™” ì™„ë£Œ');
        } else {
            showNoLocationMessage(mapContainer);
        }
    } catch (error) {
        console.error('âŒ ì§€ë„ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜:', error);
        showMapErrorMessage(mapContainer);
    }
}

/**
 * ì‹œì„¤ ë§ˆì»¤ ì¶”ê°€
 */
function addFacilityMarker() {
    const position = new kakao.maps.LatLng(facilityMapData.latitude, facilityMapData.longitude);
    
    // ë§ˆì»¤ ìƒì„±
    detailMarker = new kakao.maps.Marker({
        position: position,
        map: detailMap
    });
    
    // ì¸í¬ìœˆë„ìš° ìƒì„± (ê°œì„ ëœ ë””ìì¸)
    const infoWindowContent = createInfoWindowContent();
    
    detailInfoWindow = new kakao.maps.InfoWindow({
        content: infoWindowContent,
        removable: true
    });
    
    // ë§ˆì»¤ í´ë¦­ ì´ë²¤íŠ¸
    kakao.maps.event.addListener(detailMarker, 'click', function() {
        detailInfoWindow.open(detailMap, detailMarker);
    });
    
    // ì´ˆê¸°ì— ì¸í¬ìœˆë„ìš° ì—´ê¸° (1ì´ˆ í›„)
    setTimeout(() => {
        detailInfoWindow.open(detailMap, detailMarker);
    }, 1000);
    
    console.log('ğŸ“ ì‹œì„¤ ë§ˆì»¤ ë° ì¸í¬ìœˆë„ìš° ìƒì„± ì™„ë£Œ');
}

/**
 * ì¸í¬ìœˆë„ìš° ì»¨í…ì¸  ìƒì„±
 * @returns {string} HTML ì»¨í…ì¸ 
 */
function createInfoWindowContent() {
    return `
        <div class="info-window p-3" style="width:320px; border-radius: 8px; font-family: 'Noto Sans KR', sans-serif;">
            <h6 class="mb-2 text-primary fw-bold">
                <i class="fas fa-building me-1"></i>${facilityMapData.name || 'ì‹œì„¤ëª…'}
            </h6>
            <p class="mb-2 small text-dark">
                <i class="fas fa-map-marker-alt text-danger me-1"></i>
                ${facilityMapData.address || 'ì£¼ì†Œ ì •ë³´ ì—†ìŒ'}
            </p>
            <div class="d-flex justify-content-between align-items-center">
                <p class="mb-0 small">
                    <i class="fas fa-phone text-success me-1"></i>
                    <a href="tel:${facilityMapData.phone || ''}" class="text-decoration-none text-success fw-medium">
                        ${facilityMapData.phone || 'ì „í™”ë²ˆí˜¸ ì—†ìŒ'}
                    </a>
                </p>
                <button class="btn btn-sm btn-outline-primary" onclick="openKakaoMapRoute()">
                    <i class="fas fa-route me-1"></i>ê¸¸ì°¾ê¸°
                </button>
            </div>
            <div class="mt-2 text-center">
                <small class="text-muted">
                    <i class="fas fa-info-circle me-1"></i>
                    ì •í™•í•œ ìœ„ì¹˜ë¥¼ í™•ì¸í•˜ì„¸ìš”
                </small>
            </div>
        </div>
    `;
}

/**
 * ì§€ë„ ì»¨íŠ¸ë¡¤ ì¶”ê°€
 */
function addMapControls() {
    // ì§€ë„ íƒ€ì… ì»¨íŠ¸ë¡¤ ì¶”ê°€
    const mapTypeControl = new kakao.maps.MapTypeControl();
    detailMap.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);
    
    // ì¤Œ ì»¨íŠ¸ë¡¤ ì¶”ê°€
    const zoomControl = new kakao.maps.ZoomControl();
    detailMap.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
    
    console.log('ğŸ›ï¸ ì§€ë„ ì»¨íŠ¸ë¡¤ ì¶”ê°€ ì™„ë£Œ');
}

/**
 * ì¹´ì¹´ì˜¤ë§µ ê¸¸ì°¾ê¸° ì—´ê¸°
 */
function openKakaoMapRoute() {
    if (facilityMapData.latitude && facilityMapData.longitude && facilityMapData.name) {
        const url = `https://map.kakao.com/link/to/${encodeURIComponent(facilityMapData.name)},${facilityMapData.latitude},${facilityMapData.longitude}`;
        window.open(url, '_blank');
        console.log('ğŸ›£ï¸ ì¹´ì¹´ì˜¤ë§µ ê¸¸ì°¾ê¸° ì—´ê¸°:', url);
    } else {
        alert('ê¸¸ì°¾ê¸° ì •ë³´ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.');
    }
}

/**
 * ìœ„ì¹˜ ì •ë³´ ì—†ìŒ ë©”ì‹œì§€ í‘œì‹œ
 * @param {HTMLElement} container - ì§€ë„ ì»¨í…Œì´ë„ˆ
 */
function showNoLocationMessage(container) {
    container.innerHTML = `
        <div class="d-flex align-items-center justify-content-center h-100 text-muted bg-light rounded" style="height: 400px;">
            <div class="text-center">
                <i class="fas fa-exclamation-triangle fa-3x mb-3 text-warning"></i>
                <h5 class="mb-2">ìœ„ì¹˜ ì •ë³´ ì—†ìŒ</h5>
                <p class="mb-0">ì´ ì‹œì„¤ì˜ ìœ„ì¹˜ ì •ë³´ê°€ ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
                <small class="text-muted mt-2 d-block">ì‹œì„¤ ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</small>
            </div>
        </div>
    `;
    console.log('âš ï¸ ìœ„ì¹˜ ì •ë³´ ì—†ìŒ ë©”ì‹œì§€ í‘œì‹œ');
}

/**
 * ì§€ë„ ë¡œë“œ ì‹¤íŒ¨ ë©”ì‹œì§€ í‘œì‹œ
 * @param {HTMLElement} container - ì§€ë„ ì»¨í…Œì´ë„ˆ
 */
function showMapErrorMessage(container) {
    container.innerHTML = `
        <div class="d-flex align-items-center justify-content-center h-100 text-muted bg-light rounded" style="height: 400px;">
            <div class="text-center">
                <i class="fas fa-exclamation-triangle fa-3x mb-3 text-danger"></i>
                <h5 class="mb-2">ì§€ë„ ë¡œë“œ ì‹¤íŒ¨</h5>
                <p class="mb-0">ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
                <button class="btn btn-outline-primary btn-sm mt-2" onclick="location.reload()">
                    <i class="fas fa-refresh me-1"></i>ìƒˆë¡œê³ ì¹¨
                </button>
            </div>
        </div>
    `;
    console.log('âŒ ì§€ë„ ë¡œë“œ ì‹¤íŒ¨ ë©”ì‹œì§€ í‘œì‹œ');
}

/**
 * ì§€ë„ í¬ê¸° ì¡°ì • (ì°½ í¬ê¸° ë³€ê²½ ì‹œ)
 */
function resizeFacilityMap() {
    if (detailMap) {
        detailMap.relayout();
        console.log('ğŸ“ ì§€ë„ í¬ê¸° ì¡°ì • ì™„ë£Œ');
    }
}

// ì°½ í¬ê¸° ë³€ê²½ ì‹œ ì§€ë„ í¬ê¸° ì¡°ì •
window.addEventListener('resize', resizeFacilityMap);
````

## File: backup/facility-image-implementation/facility-image-implementation/facility-detail.js
````javascript
/**
 * ì‹œì„¤ ìƒì„¸ë³´ê¸° í˜ì´ì§€ ì „ìš© JavaScript
 * - ì´ë¯¸ì§€ í™•ëŒ€ ëª¨ë‹¬ ê¸°ëŠ¥
 * - 5ì´ˆ ìë™ ìŠ¬ë¼ì´ë“œ
 * - í™”ì‚´í‘œ ë„¤ë¹„ê²Œì´ì…˜
 * - í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
 */

// ì „ì—­ ë³€ìˆ˜
let facilityData = {};
let facilityImages = [];
let currentModalIndex = 0;
let modalCarousel;
let autoSlideInterval;
let isAutoSliding = false;

/**
 * ì‹œì„¤ ë°ì´í„° ì´ˆê¸°í™”
 * @param {Object} data - Thymeleafì—ì„œ ì „ë‹¬ë°›ì€ ì‹œì„¤ ë°ì´í„°
 */
function initializeFacilityData(data) {
    facilityData = data;
    console.log('ğŸ¢ ì‹œì„¤ ë°ì´í„° ì´ˆê¸°í™”:', facilityData);
}

/**
 * ì‹œì„¤ ì´ë¯¸ì§€ ë°ì´í„° ì´ˆê¸°í™”
 * @param {Array} images - Thymeleafì—ì„œ ì „ë‹¬ë°›ì€ ì´ë¯¸ì§€ ë°ì´í„°
 */
function initializeFacilityImages(images) {
    facilityImages = images || [];
    console.log('ğŸ“¸ ì‹œì„¤ ì´ë¯¸ì§€ ë°ì´í„° ì´ˆê¸°í™” - ì´ë¯¸ì§€ ìˆ˜:', facilityImages.length);
    console.log('ğŸ“¸ ì´ë¯¸ì§€ ëª©ë¡:', facilityImages);
}

/**
 * DOM ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
 */
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸ–¼ï¸ ì‹œì„¤ ìƒì„¸ë³´ê¸° DOM ë¡œë“œ ì™„ë£Œ');
    
    // ì‹œì„¤ ë“±ê¸‰ ìƒ‰ìƒ ì ìš©
    applyGradeColors();
    
    // ëª¨ë‹¬ ìš”ì†Œ í™•ì¸
    const modal = document.getElementById('imageModal');
    if (!modal) {
        console.error('âŒ ì´ë¯¸ì§€ ëª¨ë‹¬ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    } else {
        console.log('âœ… ì´ë¯¸ì§€ ëª¨ë‹¬ ìš”ì†Œ í™•ì¸ë¨');
    }
});

/**
 * ì‹œì„¤ ë“±ê¸‰ ìƒ‰ìƒ ì ìš©
 */
function applyGradeColors() {
    $('.grade-badge').each(function() {
        const grade = parseInt($(this).data('grade'));
        switch(grade) {
            case 1: $(this).addClass('bg-success'); break;
            case 2: $(this).addClass('bg-info'); break;
            case 3: $(this).addClass('bg-warning'); break;
            case 4: $(this).addClass('bg-secondary'); break;
            case 5: $(this).addClass('bg-danger'); break;
            default: $(this).addClass('bg-secondary');
        }
    });
    
    $('.grade-rating').each(function() {
        const grade = parseInt($(this).data('grade'));
        switch(grade) {
            case 1: $(this).addClass('text-success'); break;
            case 2: $(this).addClass('text-info'); break;
            case 3: $(this).addClass('text-warning'); break;
            case 4: $(this).addClass('text-secondary'); break;
            case 5: $(this).addClass('text-danger'); break;
            default: $(this).addClass('text-muted');
        }
    });
}

/**
 * ì´ë¯¸ì§€ ëª¨ë‹¬ ì—´ê¸°
 * @param {number} imageIndex - í‘œì‹œí•  ì´ë¯¸ì§€ ì¸ë±ìŠ¤
 */
function openImageModal(imageIndex = 0) {
    console.log('ğŸ–¼ï¸ ì´ë¯¸ì§€ ëª¨ë‹¬ ì—´ê¸° ì‹œë„ - imageIndex:', imageIndex);
    console.log('ğŸ“¸ ì‚¬ìš© ê°€ëŠ¥í•œ ì´ë¯¸ì§€ ìˆ˜:', facilityImages.length);
    
    if (facilityImages.length === 0) {
        console.warn('âš ï¸ í‘œì‹œí•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤');
        alert('í‘œì‹œí•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    currentModalIndex = Math.max(0, Math.min(imageIndex, facilityImages.length - 1));
    console.log('ğŸ“ ì‹¤ì œ ëª¨ë‹¬ ì¸ë±ìŠ¤:', currentModalIndex);
    
    setupModalCarousel();
    
    const modalElement = document.getElementById('imageModal');
    const modal = new bootstrap.Modal(modalElement);
    
    // ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±° (ì¤‘ë³µ ë°©ì§€)
    modalElement.removeEventListener('shown.bs.modal', handleModalShown);
    modalElement.removeEventListener('hidden.bs.modal', handleModalHidden);
    
    // ìƒˆ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    modalElement.addEventListener('shown.bs.modal', handleModalShown);
    modalElement.addEventListener('hidden.bs.modal', handleModalHidden);
    
    modal.show();
    console.log('âœ… ëª¨ë‹¬ í‘œì‹œ ì™„ë£Œ');
}

/**
 * ëª¨ë‹¬ í‘œì‹œ ì™„ë£Œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
 */
function handleModalShown() {
    console.log('ğŸ¯ ëª¨ë‹¬ì´ ì™„ì „íˆ ì—´ë¦¼ - ìºëŸ¬ì…€ ì´ˆê¸°í™”');
    if (modalCarousel) {
        modalCarousel.to(currentModalIndex);
        updateModalImageInfo();
    }
    startAutoSlide();
}

/**
 * ëª¨ë‹¬ ìˆ¨ê¹€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
 */
function handleModalHidden() {
    console.log('ğŸšª ëª¨ë‹¬ì´ ë‹«í˜ - ì •ë¦¬ ì‘ì—…');
    stopAutoSlide();
}

/**
 * ëª¨ë‹¬ ìºëŸ¬ì…€ ì„¤ì •
 */
function setupModalCarousel() {
    console.log('ğŸ”§ ëª¨ë‹¬ ìºëŸ¬ì…€ ì„¤ì • ì‹œì‘');
    
    const carouselInner = document.getElementById('modalCarouselInner');
    const indicators = document.getElementById('modalCarouselIndicators');
    
    if (!carouselInner || !indicators) {
        console.error('âŒ ëª¨ë‹¬ ìºëŸ¬ì…€ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
        return;
    }
    
    // ê¸°ì¡´ ìºëŸ¬ì…€ ì¸ìŠ¤í„´ìŠ¤ í•´ì œ
    if (modalCarousel) {
        modalCarousel.dispose();
        modalCarousel = null;
    }
    
    // ê¸°ì¡´ ë‚´ìš© ì •ë¦¬
    carouselInner.innerHTML = '';
    indicators.innerHTML = '';
    
    console.log('ğŸ“¸ ëª¨ë‹¬ì— í‘œì‹œí•  ì´ë¯¸ì§€ ìˆ˜:', facilityImages.length);
    
    // ì´ë¯¸ì§€ ì•„ì´í…œ ìƒì„±
    facilityImages.forEach((image, index) => {
        console.log(`ğŸ–¼ï¸ ì´ë¯¸ì§€ ${index + 1} ìƒì„±:`, image.path);
        
        // ìºëŸ¬ì…€ ì•„ì´í…œ
        const carouselItem = document.createElement('div');
        carouselItem.className = `carousel-item ${index === currentModalIndex ? 'active' : ''}`;
        carouselItem.innerHTML = `
            <div class="d-flex justify-content-center align-items-center" style="height: 80vh;">
                <img src="${image.path}" 
                     class="img-fluid" 
                     style="max-height: 100%; max-width: 100%; object-fit: contain;" 
                     alt="${image.alt || 'ì‹œì„¤ ì´ë¯¸ì§€'}"
                     onerror="this.src='/images/default_facility.jpg'">
            </div>
        `;
        carouselInner.appendChild(carouselItem);
        
        // ì¸ë””ì¼€ì´í„° ë²„íŠ¼ (ì´ë¯¸ì§€ê°€ 2ê°œ ì´ìƒì¼ ë•Œë§Œ)
        if (facilityImages.length > 1) {
            const indicator = document.createElement('button');
            indicator.type = 'button';
            indicator.setAttribute('data-bs-target', '#modalCarousel');
            indicator.setAttribute('data-bs-slide-to', index);
            indicator.className = index === currentModalIndex ? 'active' : '';
            indicator.setAttribute('aria-label', `ì´ë¯¸ì§€ ${index + 1}`);
            indicators.appendChild(indicator);
        }
    });
    
    // ìºëŸ¬ì…€ ìš”ì†Œ í‘œì‹œ/ìˆ¨ê¹€ ì²˜ë¦¬
    const prevBtn = document.querySelector('#modalCarousel .carousel-control-prev');
    const nextBtn = document.querySelector('#modalCarousel .carousel-control-next');
    
    if (facilityImages.length <= 1) {
        if (prevBtn) prevBtn.style.display = 'none';
        if (nextBtn) nextBtn.style.display = 'none';
        indicators.style.display = 'none';
    } else {
        if (prevBtn) prevBtn.style.display = 'block';
        if (nextBtn) nextBtn.style.display = 'block';
        indicators.style.display = 'block';
    }
    
    // ìºëŸ¬ì…€ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
    const carouselElement = document.getElementById('modalCarousel');
    modalCarousel = new bootstrap.Carousel(carouselElement, {
        interval: false, // ìë™ ìŠ¬ë¼ì´ë“œëŠ” ë³„ë„ë¡œ ê´€ë¦¬
        ride: false,
        wrap: true
    });
    
    // ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
    carouselElement.removeEventListener('slide.bs.carousel', handleCarouselSlide);
    carouselElement.removeEventListener('slid.bs.carousel', handleCarouselSlid);
    
    // ìŠ¬ë¼ì´ë“œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    carouselElement.addEventListener('slide.bs.carousel', handleCarouselSlide);
    carouselElement.addEventListener('slid.bs.carousel', handleCarouselSlid);
    
    updateModalImageInfo();
    console.log('âœ… ëª¨ë‹¬ ìºëŸ¬ì…€ ì„¤ì • ì™„ë£Œ');
}

/**
 * ìºëŸ¬ì…€ ìŠ¬ë¼ì´ë“œ ì‹œì‘ ì´ë²¤íŠ¸
 */
function handleCarouselSlide(event) {
    console.log('ğŸ”„ ìºëŸ¬ì…€ ìŠ¬ë¼ì´ë“œ ì‹œì‘:', event.from, 'â†’', event.to);
    currentModalIndex = event.to;
}

/**
 * ìºëŸ¬ì…€ ìŠ¬ë¼ì´ë“œ ì™„ë£Œ ì´ë²¤íŠ¸
 */
function handleCarouselSlid(event) {
    console.log('âœ… ìºëŸ¬ì…€ ìŠ¬ë¼ì´ë“œ ì™„ë£Œ:', event.to);
    currentModalIndex = event.to;
    updateModalImageInfo();
}

/**
 * ëª¨ë‹¬ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸
 */
function updateModalImageInfo() {
    const counter = document.getElementById('modalImageCounter');
    const altText = document.getElementById('modalImageAlt');
    
    if (facilityImages.length > 0 && currentModalIndex < facilityImages.length) {
        counter.textContent = `${currentModalIndex + 1} / ${facilityImages.length}`;
        altText.textContent = facilityImages[currentModalIndex].alt || 'ì‹œì„¤ ì´ë¯¸ì§€';
    }
}

/**
 * ìë™ ìŠ¬ë¼ì´ë“œ ì‹œì‘
 */
function startAutoSlide() {
    if (facilityImages.length <= 1) return;
    
    isAutoSliding = true;
    updateAutoSlideButton();
    
    autoSlideInterval = setInterval(() => {
        if (modalCarousel) {
            modalCarousel.next();
        }
    }, 5000);
    
    console.log('â–¶ï¸ ìë™ ìŠ¬ë¼ì´ë“œ ì‹œì‘');
}

/**
 * ìë™ ìŠ¬ë¼ì´ë“œ ì •ì§€
 */
function stopAutoSlide() {
    isAutoSliding = false;
    updateAutoSlideButton();
    
    if (autoSlideInterval) {
        clearInterval(autoSlideInterval);
        autoSlideInterval = null;
    }
    
    console.log('â¸ï¸ ìë™ ìŠ¬ë¼ì´ë“œ ì •ì§€');
}

/**
 * ìë™ ìŠ¬ë¼ì´ë“œ í† ê¸€
 */
function toggleAutoSlide() {
    if (isAutoSliding) {
        stopAutoSlide();
    } else {
        startAutoSlide();
    }
}

/**
 * ìë™ ìŠ¬ë¼ì´ë“œ ë²„íŠ¼ ì—…ë°ì´íŠ¸
 */
function updateAutoSlideButton() {
    const icon = document.getElementById('autoSlideIcon');
    const text = document.getElementById('autoSlideText');
    
    if (icon && text) {
        if (isAutoSliding) {
            icon.className = 'fas fa-pause';
            text.textContent = 'ì¼ì‹œì •ì§€';
        } else {
            icon.className = 'fas fa-play';
            text.textContent = 'ìë™ì¬ìƒ';
        }
    }
}

/**
 * ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
 */
function downloadImage() {
    if (facilityImages.length === 0 || currentModalIndex >= facilityImages.length) return;
    
    const currentImage = facilityImages[currentModalIndex];
    const link = document.createElement('a');
    link.href = currentImage.path;
    link.download = `ì‹œì„¤ì´ë¯¸ì§€_${currentModalIndex + 1}.jpg`;
    link.click();
    
    console.log('ğŸ’¾ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ:', currentImage.path);
}

/**
 * ì „í™”í•˜ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
 */
function callFacilityPhone(button) {
    const phone = button.getAttribute('data-phone');
    if (phone) {
        window.location.href = `tel:${phone}`;
    }
}

/**
 * ë¦¬ë·° ì‘ì„± í˜ì´ì§€ë¡œ ì´ë™
 */
function writeReview() {
    if (facilityData.facilityId) {
        window.location.href = `/review/write?facilityId=${facilityData.facilityId}`;
    }
}

/**
 * ì£¼ë³€ êµ¬ì¸ì •ë³´ ê²€ìƒ‰
 */
function searchNearbyJobs() {
    if (facilityData.latitude && facilityData.longitude) {
        window.location.href = `/job/list?lat=${facilityData.latitude}&lng=${facilityData.longitude}&radius=5`;
    }
}

/**
 * ì¹´ì¹´ì˜¤í†¡ ê³µìœ í•˜ê¸°
 */
function shareToKakao() {
    if (!facilityData) return;
    
    const facilityName = facilityData.name || 'ì‹œì„¤ëª…';
    const address = facilityData.address || 'ì£¼ì†Œ';
    const logoImageUrl = facilityData.facilityImage || '/images/default_facility.jpg';

    if (window.Kakao) {
        Kakao.Link.sendDefault({
            objectType: 'location',
            address: address,
            addressTitle: facilityName,
            content: {
                title: facilityName,
                description: `${address}\nìƒì„¸ ì •ë³´ ë³´ê¸°`,
                imageUrl: logoImageUrl,
                link: {
                    mobileWebUrl: window.location.href,
                    webUrl: window.location.href
                }
            },
            buttons: [
                {
                    title: 'ìƒì„¸ ì •ë³´ ë³´ê¸°',
                    link: {
                        mobileWebUrl: window.location.href,
                        webUrl: window.location.href
                    }
                }
            ]
        });
    } else {
        alert('ì¹´ì¹´ì˜¤í†¡ ê³µìœ í•˜ê¸°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }
}

/**
 * ì‹œì„¤ ì‚­ì œ í•¨ìˆ˜
 */
function deleteFacility(facilityId) {
    if (confirm('ì •ë§ë¡œ ì´ ì‹œì„¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ì‹œì„¤ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
        // AJAXë¡œ ì‚­ì œ ìš”ì²­
        fetch('/facility/delete/' + facilityId, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        })
        .then(response => {
            if (response.ok) {
                alert('ì‹œì„¤ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                window.location.href = '/facility/search';
            } else {
                alert('ì‹œì„¤ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('ì‹œì„¤ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        });
    }
}

// í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (ëª¨ë‹¬ì´ ì—´ë ¤ìˆì„ ë•Œ)
document.addEventListener('keydown', function(e) {
    const modal = document.getElementById('imageModal');
    if (!modal || !modal.classList.contains('show')) return;
    
    switch(e.key) {
        case 'ArrowLeft':
            e.preventDefault();
            if (modalCarousel) modalCarousel.prev();
            break;
        case 'ArrowRight':
            e.preventDefault();
            if (modalCarousel) modalCarousel.next();
            break;
        case ' ': // ìŠ¤í˜ì´ìŠ¤ë°”
            e.preventDefault();
            toggleAutoSlide();
            break;
        case 'Escape':
            e.preventDefault();
            bootstrap.Modal.getInstance(modal)?.hide();
            break;
    }
});
````

## File: backup/facility-image-implementation/facility-image-implementation/facility-edit.js
````javascript
// facility-edit.js

// ì‹œì„¤ ì£¼ì†Œ ê²€ìƒ‰ í•¨ìˆ˜
function searchFacilityAddress() {
    new daum.Postcode({
        oncomplete: function(data) {
            let fullAddr = data.roadAddress || data.jibunAddress;
            
            // ì£¼ì†Œ í•„ë“œ ì—…ë°ì´íŠ¸
            document.getElementById('facilityAddress').value = fullAddr;
            
            // ì§€ë„ì— ìœ„ì¹˜ í‘œì‹œ
            updateMapAndCoordinates(fullAddr);
        }
    }).open();
}

// ì§€ë„ ì—…ë°ì´íŠ¸ ë° ì¢Œí‘œ ì„¤ì • í•¨ìˆ˜
function updateMapAndCoordinates(address) {
    const geocoder = new kakao.maps.services.Geocoder();
    
    geocoder.addressSearch(address, function(result, status) {
        if (status === kakao.maps.services.Status.OK) {
            const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
            
            // ì¢Œí‘œë¥¼ íˆë“  í•„ë“œì— ì €ì¥
            document.getElementById('latitude').value = result[0].y;
            document.getElementById('longitude').value = result[0].x;
            
            // ì§€ë„ ì»¨í…Œì´ë„ˆ í‘œì‹œ
            const mapContainer = document.getElementById('mapPreviewContainer');
            mapContainer.style.display = 'block';
            
            // ì§€ë„ ì´ˆê¸°í™”
            const mapOption = {
                center: coords,
                level: 3
            };
            
            const map = new kakao.maps.Map(document.getElementById('previewMap'), mapOption);
            
            // ë§ˆì»¤ ì¶”ê°€
            const marker = new kakao.maps.Marker({
                position: coords
            });
            marker.setMap(map);
            
            // ì¸í¬ìœˆë„ìš° ì¶”ê°€
            const infowindow = new kakao.maps.InfoWindow({
                content: '<div style="width:150px;text-align:center;padding:6px 0;">ì„ íƒëœ ìœ„ì¹˜</div>'
            });
            infowindow.open(map, marker);
        }
    });
}

// ìš´ì˜ì‹œê°„ ë¼ë””ì˜¤ ë²„íŠ¼ ì²˜ë¦¬
function handleOperatingHours() {
    const radio24 = document.getElementById('operating24');
    const radioCustom = document.getElementById('operatingCustom');
    const customInput = document.getElementById('customOperatingHours');
    const hiddenInput = document.getElementById('operatingHours');
    
    function updateOperatingHours() {
        if (radio24.checked) {
            customInput.style.display = 'none';
            hiddenInput.value = '24ì‹œê°„';
        } else if (radioCustom.checked) {
            customInput.style.display = 'block';
            hiddenInput.value = customInput.value || '';
        }
    }
    
    radio24.addEventListener('change', updateOperatingHours);
    radioCustom.addEventListener('change', updateOperatingHours);
    customInput.addEventListener('input', function() {
        if (radioCustom.checked) {
            hiddenInput.value = this.value;
        }
    });
    
    // ì´ˆê¸° ìƒíƒœ ì„¤ì •
    updateOperatingHours();
}

// ì „í™”ë²ˆí˜¸ í¬ë§·íŒ…
function formatPhoneNumber(input) {
    let value = input.value.replace(/\D/g, '');
    let formattedValue = '';
    
    if (value.startsWith('02')) {
        // ì„œìš¸ ì§€ì—­ë²ˆí˜¸
        if (value.length <= 2) {
            formattedValue = value;
        } else if (value.length <= 6) {
            formattedValue = value.slice(0, 2) + '-' + value.slice(2);
        } else if (value.length <= 10) {
            formattedValue = value.slice(0, 2) + '-' + value.slice(2, 6) + '-' + value.slice(6);
        } else {
            formattedValue = value.slice(0, 2) + '-' + value.slice(2, 6) + '-' + value.slice(6, 10);
        }
    } else if (value.startsWith('01')) {
        // íœ´ëŒ€í° ë²ˆí˜¸
        if (value.length <= 3) {
            formattedValue = value;
        } else if (value.length <= 7) {
            formattedValue = value.slice(0, 3) + '-' + value.slice(3);
        } else if (value.length <= 11) {
            formattedValue = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7);
        } else {
            formattedValue = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7, 11);
        }
    } else if (value.length >= 3) {
        // ê¸°íƒ€ ì§€ì—­ë²ˆí˜¸
        if (value.length <= 3) {
            formattedValue = value;
        } else if (value.length <= 7) {
            formattedValue = value.slice(0, 3) + '-' + value.slice(3);
        } else if (value.length <= 11) {
            formattedValue = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7);
        } else {
            formattedValue = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7, 11);
        }
    } else {
        formattedValue = value;
    }
    
    input.value = formattedValue;
}

// í¼ ìœ íš¨ì„± ê²€ì‚¬
function validateForm() {
    const requiredFields = [
        { id: 'facilityName', name: 'ì‹œì„¤ëª…' },
        { id: 'facilityType', name: 'ì‹œì„¤ ìœ í˜•' },
        { id: 'facilityAddress', name: 'ì£¼ì†Œ' },
        { id: 'phone', name: 'ì „í™”ë²ˆí˜¸' }
    ];
    
    for (let field of requiredFields) {
        const element = document.getElementById(field.id);
        if (!element.value.trim()) {
            alert(`${field.name}ì„(ë¥¼) ì…ë ¥í•´ì£¼ì„¸ìš”.`);
            element.focus();
            return false;
        }
    }
    
    // ì „í™”ë²ˆí˜¸ íŒ¨í„´ ê²€ì‚¬
    const phonePattern = /^(02-\d{3,4}-\d{4}|0(3[1-3]|4[1-3]|5[1-5]|6[1-4]|70)-\d{3,4}-\d{4}|01[016-9]-\d{3,4}-\d{4})$/;
    const phone = document.getElementById('phone').value;
    if (!phonePattern.test(phone)) {
        alert('ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.');
        document.getElementById('phone').focus();
        return false;
    }
    
    return true;
}

// í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì‹¤í–‰
document.addEventListener('DOMContentLoaded', function() {
    // ìš´ì˜ì‹œê°„ ì²˜ë¦¬ ì´ˆê¸°í™”
    handleOperatingHours();
    
    // ì „í™”ë²ˆí˜¸ ì…ë ¥ í¬ë§·íŒ…
    const phoneInput = document.getElementById('phone');
    if (phoneInput) {
        phoneInput.addEventListener('input', function() {
            formatPhoneNumber(this);
        });
    }
    
    // ê¸°ì¡´ ì£¼ì†Œê°€ ìˆëŠ” ê²½ìš° ì§€ë„ í‘œì‹œ
    const existingAddress = document.getElementById('facilityAddress').value;
    if (existingAddress) {
        updateMapAndCoordinates(existingAddress);
    }
    
    // í¼ ì œì¶œ ì‹œ ìœ íš¨ì„± ê²€ì‚¬
    const form = document.getElementById('facilityEditForm');
    if (form) {
        form.addEventListener('submit', function(e) {
            if (!validateForm()) {
                e.preventDefault();
            }
        });
    }
});
````

## File: backup/facility-image-implementation/facility-image-implementation/FacilityController.java
````java
package com.example.carelink.controller;

import com.example.carelink.dto.FacilityDTO;
import com.example.carelink.dto.FacilityImageDTO;
import com.example.carelink.dto.ReviewDTO;
import com.example.carelink.service.FacilityService;
import com.example.carelink.service.ReviewService;
import com.example.carelink.service.FacilityImageService;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.context.annotation.Bean;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.common.Constants;
import javax.servlet.http.HttpSession;

import java.util.List;
import java.util.ArrayList; // ArrayListë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì¶”ê°€ëœ import ë¬¸
import java.util.Map;
import java.util.HashMap;

@Controller
@RequestMapping("/facility")
@RequiredArgsConstructor
@Slf4j
public class FacilityController {

    private final FacilityService facilityService;
    private final ReviewService reviewService;
    private final FacilityImageService facilityImageService;

    /**
     * Jackson ObjectMapperì— Java 8 ë‚ ì§œ/ì‹œê°„ ëª¨ë“ˆì„ ë“±ë¡í•©ë‹ˆë‹¤.
     * ì´ ë©”ì„œë“œëŠ” Spring ì»¨í…ìŠ¤íŠ¸ì— ObjectMapper ë¹ˆì„ ë“±ë¡í•˜ì—¬
     * LocalDateTime ì§ë ¬í™” ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤.
     */
    @Bean
    public ObjectMapper objectMapper() {
        ObjectMapper mapper = new ObjectMapper();
        mapper.registerModule(new JavaTimeModule());
        return mapper;
    }

    /**
     * ì‹œì„¤ ê²€ìƒ‰ í˜ì´ì§€ ë° ê²€ìƒ‰ ê²°ê³¼ ì¡°íšŒ
     */
    @GetMapping("/search")
    public String searchFacilities(
            @RequestParam(value = "facilityName", required = false) String facilityName,
            @RequestParam(value = "region", required = false) String region,
            @RequestParam(value = "facilityType", required = false) String facilityType,
            @RequestParam(value = "gradeRating", required = false) String gradeRating,
            Model model
    ) {
        log.info("ì‹œì„¤ ê²€ìƒ‰ í˜ì´ì§€ ì ‘ì† - facilityName: {}, region: {}, facilityType: {}, gradeRating: {}",
                facilityName, region, facilityType, gradeRating);

        // ë¹ˆ ë¬¸ìì—´ì„ nullë¡œ ë³€í™˜
        facilityName = (facilityName != null && facilityName.trim().isEmpty()) ? null : facilityName;
        region = (region != null && region.trim().isEmpty()) ? null : region;
        facilityType = (facilityType != null && facilityType.trim().isEmpty()) ? null : facilityType;

        FacilityDTO searchCondition = new FacilityDTO();
        searchCondition.setFacilityName(facilityName != null ? facilityName.trim() : null);
        searchCondition.setFacilityType(facilityType);
        searchCondition.setAddress(region); // ì§€ì—­ ê²€ìƒ‰ìš©

        // gradeRating ê¸°ëŠ¥ì€ í˜„ì¬ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì— ì—†ìœ¼ë¯€ë¡œ ë¹„í™œì„±í™”
        // try {
        //     if (gradeRating != null && !gradeRating.isEmpty()) {
        //         searchCondition.setGradeRating(Integer.parseInt(gradeRating));
        //     }
        // } catch (NumberFormatException e) {
        //     log.warn("Invalid gradeRating format: {}", gradeRating);
        // }

        // DTO ê°ì²´ë¥¼ ì„œë¹„ìŠ¤ ë©”ì„œë“œë¡œ ì „ë‹¬í•˜ì—¬ ê²€ìƒ‰ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
        List<FacilityDTO> facilityList = facilityService.searchFacilities(searchCondition);

        // ê²€ìƒ‰ ê²°ê³¼ê°€ nullì¼ ê²½ìš° ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì´ˆê¸°í™”í•˜ì—¬ Thymeleaf ì˜¤ë¥˜ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.
        if (facilityList == null) {
            facilityList = new ArrayList<>();
        }

        // ê° ì‹œì„¤ì˜ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ
        for (FacilityDTO facility : facilityList) {
            try {
                FacilityImageDTO mainImage = facilityImageService.getMainImageByFacilityId(facility.getFacilityId());
                if (mainImage != null) {
                    facility.setFacilityImage(mainImage.getImagePath());
                    facility.setFacilityImageAltText(mainImage.getImageAltText());
                }
            } catch (Exception e) {
                log.warn("ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ ì‹¤íŒ¨ - facilityId: {}", facility.getFacilityId(), e);
            }
        }

        // ê²€ìƒ‰ ê²°ê³¼ë¥¼ ëª¨ë¸ì— ì¶”ê°€í•©ë‹ˆë‹¤.
        model.addAttribute("facilityList", facilityList);
        model.addAttribute("facilityName", facilityName);
        model.addAttribute("region", region);
        model.addAttribute("facilityType", facilityType);
        model.addAttribute("gradeRating", gradeRating);

        log.info("ê²€ìƒ‰ëœ ì‹œì„¤ ìˆ˜: {}", facilityList.size());

        // 'search.html' í…œí”Œë¦¿ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
        return "facility/search";
    }

    /**
     * ì‹œì„¤ ìƒì„¸ ì •ë³´ í˜ì´ì§€
     */
    @GetMapping("/detail/{facilityId}")
    public String getFacilityDetail(@PathVariable Long facilityId, Model model, HttpSession session) {
        log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ í˜ì´ì§€ ì ‘ì† - facilityId: {}", facilityId);
        
        try {
            // ì‹œì„¤ ì •ë³´ ì¡°íšŒ
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                model.addAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/search";
            }
            
            // í•´ë‹¹ ì‹œì„¤ì˜ ë¦¬ë·° ëª©ë¡ ì¡°íšŒ (ìµœê·¼ 5ê°œ)
            List<ReviewDTO> recentReviews = reviewService.getReviewsByFacilityId(facilityId);
            if (recentReviews.size() > 5) {
                recentReviews = recentReviews.subList(0, 5);
            }
            
            // ì‹œì„¤ì˜ í‰ê·  í‰ì  ì¡°íšŒ
            Double averageRating = reviewService.getAverageRating(facilityId);
            
            // ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì¡°íšŒ
            List<FacilityImageDTO> facilityImages = facilityImageService.getImagesByFacilityId(facilityId);
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - facilityId: {}, ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, facilityImages.size());
            
            // ì„¸ì…˜ì—ì„œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ (ê´€ë¦¬ì ê¶Œí•œ ì²´í¬ìš©)
            MemberDTO sessionMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            boolean isAdmin = sessionMember != null && "ADMIN".equals(sessionMember.getRole());
            boolean isOwner = sessionMember != null && facility.getRegisteredMemberId() != null && 
                             facility.getRegisteredMemberId().equals(sessionMember.getMemberId());
            
            model.addAttribute("facility", facility);
            model.addAttribute("recentReviews", recentReviews);
            model.addAttribute("averageRating", averageRating);
            model.addAttribute("reviewCount", recentReviews.size());
            model.addAttribute("facilityImages", facilityImages);
            model.addAttribute("pageTitle", facility.getFacilityName() + " ìƒì„¸ì •ë³´");
            model.addAttribute("sessionMember", sessionMember);
            model.addAttribute("isAdmin", isAdmin);
            model.addAttribute("isOwner", isOwner);
            
            log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì™„ë£Œ - facilityId: {}, ë¦¬ë·° ìˆ˜: {}, ê´€ë¦¬ì: {}, ì†Œìœ ì: {}", 
                    facilityId, recentReviews.size(), isAdmin, isOwner);
            
            return "facility/detail";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            model.addAttribute("error", "ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/search";
        }
    }

    /**
     * ì‹œì„¤ ê´€ë¦¬ í˜ì´ì§€
     */
    @GetMapping("/manage")
    public String manageFacility(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        
        if (member == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        
        if (!Constants.MEMBER_ROLE_FACILITY.equals(member.getRole())) {
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ íšŒì›ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/";
        }
        
        try {
            // íšŒì›ì˜ ëª¨ë“  ì‹œì„¤ ì •ë³´ ì¡°íšŒ
            List<FacilityDTO> facilities = facilityService.getFacilitiesByMemberId(member.getMemberId());
            
            // ê° ì‹œì„¤ë³„ êµ¬ì¸ê³µê³  ìˆ˜ ì¡°íšŒ (TODO: í–¥í›„ JobServiceì—ì„œ ì¡°íšŒ)
            // for (FacilityDTO facility : facilities) {
            //     int jobCount = jobService.getJobCountByFacilityId(facility.getFacilityId());
            //     facility.setJobCount(jobCount);
            // }
            
            model.addAttribute("facilities", facilities);
            model.addAttribute("facilityCount", facilities.size());
            log.info("ì‹œì„¤ ê´€ë¦¬ í˜ì´ì§€ ì ‘ê·¼: memberId={}, ì‹œì„¤ ìˆ˜={}", 
                    member.getMemberId(), facilities.size());
            
            return "facility/manage";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ê´€ë¦¬ í˜ì´ì§€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}", member.getMemberId(), e);
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/";
        }
    }

    /**
     * ì‹œì„¤ ìˆ˜ì • í˜ì´ì§€
     */
    @GetMapping("/edit/{facilityId}")
    public String editFacilityForm(@PathVariable Long facilityId, HttpSession session, 
                                   Model model, RedirectAttributes redirectAttributes) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        
        if (member == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        
        try {
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            
            if (facility == null) {
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            // ê¶Œí•œ í™•ì¸ (ì‹œì„¤ ì†Œìœ ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì • ê°€ëŠ¥)
            if (!facility.getRegisteredMemberId().equals(member.getMemberId()) 
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            model.addAttribute("facility", facility);
            log.info("ì‹œì„¤ ìˆ˜ì • í˜ì´ì§€ ì ‘ê·¼: facilityId={}, memberId={}", facilityId, member.getMemberId());
            
            return "facility/edit";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ìˆ˜ì • í˜ì´ì§€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/manage";
        }
    }

    /**
     * ì‹œì„¤ ìˆ˜ì • ì²˜ë¦¬
     */
    @PostMapping("/edit/{facilityId}")
    public String updateFacility(@PathVariable Long facilityId,
                                @ModelAttribute FacilityDTO facilityDTO,
                                @RequestParam(value = "facilityImageFile", required = false) MultipartFile facilityImageFile,
                                HttpSession session,
                                RedirectAttributes redirectAttributes) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        
        if (member == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        
        try {
            FacilityDTO existingFacility = facilityService.getFacilityById(facilityId);
            
            if (existingFacility == null) {
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            // ê¶Œí•œ í™•ì¸
            if (!existingFacility.getRegisteredMemberId().equals(member.getMemberId()) 
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            // ê¸°ë³¸ ì •ë³´ ìœ ì§€
            facilityDTO.setFacilityId(facilityId);
            facilityDTO.setRegisteredMemberId(existingFacility.getRegisteredMemberId());
            facilityDTO.setIsApproved(existingFacility.getIsApproved());
            
            // approval_statusê°€ nullì¸ ê²½ìš° ê¸°ë³¸ê°’ ì„¤ì •
            String approvalStatus = existingFacility.getApprovalStatus();
            if (approvalStatus == null || approvalStatus.trim().isEmpty()) {
                // ê¸°ì¡´ ì‹œì„¤ì˜ is_approved ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì ì ˆí•œ ê°’ ì„¤ì •
                if (existingFacility.getIsApproved() != null && existingFacility.getIsApproved()) {
                    approvalStatus = "APPROVED";
                    log.info("ğŸ”§ approval_status NULL ë°©ì§€ - ìŠ¹ì¸ëœ ì‹œì„¤: APPROVED");
                } else {
                    approvalStatus = "PENDING";
                    log.info("ğŸ”§ approval_status NULL ë°©ì§€ - ë¯¸ìŠ¹ì¸ ì‹œì„¤: PENDING");
                }
            }
            facilityDTO.setApprovalStatus(approvalStatus);
            
            facilityDTO.setAverageRating(existingFacility.getAverageRating());
            facilityDTO.setReviewCount(existingFacility.getReviewCount());
            facilityDTO.setCurrentOccupancy(existingFacility.getCurrentOccupancy());
            facilityDTO.setGradeRating(existingFacility.getGradeRating());
            
            // ì‹œì„¤ ì •ë³´ ìˆ˜ì • (ì´ë¯¸ì§€ íŒŒì¼ í¬í•¨)
            facilityService.updateFacility(facilityDTO, facilityImageFile);
            
            log.info("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì™„ë£Œ: facilityId={}, memberId={}", facilityId, member.getMemberId());
            redirectAttributes.addFlashAttribute("message", "ì‹œì„¤ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
            
            return "redirect:/facility/manage";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/edit/" + facilityId;
        }
    }

    /**
     * ì‹œì„¤ ì‚­ì œ
     */
    @PostMapping("/delete/{facilityId}")
    public String deleteFacility(@PathVariable Long facilityId,
                                HttpSession session,
                                RedirectAttributes redirectAttributes) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        
        if (member == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        
        try {
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            
            if (facility == null) {
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            // ê¶Œí•œ í™•ì¸
            if (!facility.getRegisteredMemberId().equals(member.getMemberId()) 
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            // ì‹œì„¤ ì‚­ì œ
            facilityService.deleteFacility(facilityId);
            
            log.info("ì‹œì„¤ ì‚­ì œ ì™„ë£Œ: facilityId={}, memberId={}", facilityId, member.getMemberId());
            redirectAttributes.addFlashAttribute("message", "ì‹œì„¤ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
            
            return "redirect:/facility/manage";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/manage";
        }
    }

    /**
     * ì‹œì„¤ API - AJAXìš©
     */
    @GetMapping("/api/{facilityId}")
    @ResponseBody
    public FacilityDTO getFacilityApi(@PathVariable Long facilityId, HttpSession session) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        
        if (member == null) {
            throw new RuntimeException("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        }
        
        FacilityDTO facility = facilityService.getFacilityById(facilityId);
        
        if (facility == null) {
            throw new RuntimeException("ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
        
        // ê¶Œí•œ í™•ì¸ (ì‹œì„¤ ì†Œìœ ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ì¡°íšŒ ê°€ëŠ¥)
        if (!facility.getRegisteredMemberId().equals(member.getMemberId()) 
            && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
            throw new RuntimeException("í•´ë‹¹ ì‹œì„¤ì„ ì¡°íšŒí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
        }
        
        return facility;
    }

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€
     */
    @GetMapping("/crop-images/{facilityId}")
    public String cropImagePage(@PathVariable Long facilityId, 
                                HttpSession session, 
                                Model model, 
                                RedirectAttributes redirectAttributes) {
        try {
            MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            
            if (member == null) {
                redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
            
            // ì‹œì„¤ ì •ë³´ ì¡°íšŒ
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            // ê¶Œí•œ í™•ì¸ (ì‹œì„¤ ì†Œìœ ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥)
            if (!facility.getRegisteredMemberId().equals(member.getMemberId()) 
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì˜ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            model.addAttribute("facility", facility);
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€ ì ‘ì†: facilityId={}, memberId={}", facilityId, member.getMemberId());
            
            return "facility/crop-images";
            
        } catch (Exception e) {
            log.error("ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€ ì˜¤ë¥˜: facilityId={}", facilityId, e);
            redirectAttributes.addFlashAttribute("error", "í˜ì´ì§€ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/manage";
        }
    }

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì²˜ë¦¬ (ë‹¤ì¤‘ ì´ë¯¸ì§€ ì§€ì›)
     */
    @PostMapping("/crop-images/save/{facilityId}")
    @ResponseBody
    public Map<String, Object> saveFacilityImage(@PathVariable Long facilityId,
                                                @RequestParam("facilityImage") MultipartFile facilityImageFile,
                                                @RequestParam(value = "altText", required = false) String altText,
                                                @RequestParam(value = "format", required = false) String format,
                                                @RequestParam(value = "imageIndex", required = false) String imageIndex,
                                                HttpSession session) {
        Map<String, Object> result = new HashMap<>();
        
        try {
            MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (member == null) {
                result.put("success", false);
                result.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return result;
            }
            
            // ì‹œì„¤ ì •ë³´ ì¡°íšŒ ë° ê¶Œí•œ í™•ì¸
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                result.put("success", false);
                result.put("message", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            
            if (!facility.getRegisteredMemberId().equals(member.getMemberId()) 
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                result.put("success", false);
                result.put("message", "í•´ë‹¹ ì‹œì„¤ì˜ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            
            log.info("ğŸ–¼ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ìš”ì²­ - facilityId: {}, í˜•ì‹: {}, ì¸ë±ìŠ¤: {}, í¬ê¸°: {} bytes", 
                    facilityId, format, imageIndex, facilityImageFile.getSize());
            
            // ì—…ë¡œë“œëœ íŒŒì¼ì´ ìœ íš¨í•œì§€ í™•ì¸
            if (facilityImageFile.isEmpty()) {
                result.put("success", false);
                result.put("message", "ì—…ë¡œë“œëœ ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
                return result;
            }
            
            // Alt í…ìŠ¤íŠ¸ ì„¤ì •
            String finalAltText;
            if (altText != null && !altText.trim().isEmpty()) {
                finalAltText = altText.trim();
                log.info("ğŸ·ï¸ ì‹œì„¤ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ì„¤ì •: {}", finalAltText);
            } else {
                // ê¸°ë³¸ê°’ ì„¤ì •
                finalAltText = facility.getFacilityName() + " ì‹œì„¤ ì´ë¯¸ì§€";
                if (imageIndex != null && !imageIndex.isEmpty()) {
                    finalAltText += " " + (Integer.parseInt(imageIndex) + 1);
                }
                log.info("ğŸ·ï¸ ì‹œì„¤ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ê¸°ë³¸ê°’ ì„¤ì •: {}", finalAltText);
            }
            
            // ì´ë¯¸ì§€ í˜•ì‹ ì •ë³´ ë¡œê¹…
            String contentType = facilityImageFile.getContentType();
            if (contentType != null) {
                log.info("ğŸ“· ì—…ë¡œë“œëœ ì´ë¯¸ì§€ í˜•ì‹: {}", contentType);
                if (contentType.contains("avif")) {
                    log.info("âœ¨ AVIF í˜•ì‹ ê°ì§€ - ìµœì  ì••ì¶• ì ìš©ë¨");
                } else if (contentType.contains("webp")) {
                    log.info("ğŸš€ WebP í˜•ì‹ ê°ì§€ - íš¨ìœ¨ì  ì••ì¶• ì ìš©ë¨");
                } else if (contentType.contains("jpeg")) {
                    log.info("ğŸ“¸ JPEG í˜•ì‹ ê°ì§€ - í˜¸í™˜ì„± ìš°ì„  ì ìš©ë¨");
                }
            }
            
            // ë‹¤ì¤‘ ì´ë¯¸ì§€ ì‹œìŠ¤í…œìœ¼ë¡œ ì €ì¥
            Integer orderIndex = imageIndex != null ? Integer.parseInt(imageIndex) : null;
            FacilityImageDTO savedImage = facilityImageService.saveSingleFacilityImage(
                facilityId, facilityImageFile, finalAltText, orderIndex);
            
            result.put("success", true);
            result.put("message", "ì‹œì„¤ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
            result.put("facilityId", facilityId);
            result.put("imageIndex", imageIndex);
            result.put("imageId", savedImage.getImageId());
            result.put("imagePath", savedImage.getImagePath());
            
            log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì„±ê³µ: facilityId={}, imageId={}", facilityId, savedImage.getImageId());
            
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            result.put("success", false);
            result.put("message", "ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
        }
        
        return result;
    }
    
    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ API
     */
    @GetMapping("/api/{facilityId}/images")
    @ResponseBody
    public List<FacilityImageDTO> getFacilityImages(@PathVariable Long facilityId, HttpSession session) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        
        if (member == null) {
            throw new RuntimeException("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        }
        
        FacilityDTO facility = facilityService.getFacilityById(facilityId);
        if (facility == null) {
            throw new RuntimeException("ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
        
        // ê¶Œí•œ í™•ì¸ (ì‹œì„¤ ì†Œìœ ì, ê´€ë¦¬ì, ë˜ëŠ” ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ì¡°íšŒ í—ˆìš©)
        // í•„ìš”ì— ë”°ë¼ ê¶Œí•œ ì²´í¬ ë¡œì§ ìˆ˜ì • ê°€ëŠ¥
        
        return facilityImageService.getImagesByFacilityId(facilityId);
    }
}
````

## File: backup/facility-image-implementation/facility-image-implementation/FacilityImageService.java
````java
package com.example.carelink.service;

import com.example.carelink.dao.FacilityImageMapper;
import com.example.carelink.dao.FacilityMapper;
import com.example.carelink.dto.FacilityImageDTO;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.web.multipart.MultipartFile;

import java.io.File;
import java.io.IOException;
import java.util.List;
import java.util.UUID;

@Service
public class FacilityImageService {

    private final FacilityImageMapper facilityImageMapper;
    private final FacilityMapper facilityMapper;
    private static final Logger log = LoggerFactory.getLogger(FacilityImageService.class);

    @Autowired
    public FacilityImageService(FacilityImageMapper facilityImageMapper, FacilityMapper facilityMapper) {
        this.facilityImageMapper = facilityImageMapper;
        this.facilityMapper = facilityMapper;
    }

    /**
     * ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì¡°íšŒ
     */
    @Transactional(readOnly = true)
    public List<FacilityImageDTO> getImagesByFacilityId(Long facilityId) {
        log.info("ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - facilityId: {}", facilityId);
        List<FacilityImageDTO> images = facilityImageMapper.getImagesByFacilityId(facilityId);
        log.info("ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - facilityId: {}, ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, images.size());
        return images;
    }

    /**
     * ì‹œì„¤ì˜ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ
     */
    @Transactional(readOnly = true)
    public FacilityImageDTO getMainImageByFacilityId(Long facilityId) {
        log.info("ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ - facilityId: {}", facilityId);
        return facilityImageMapper.getMainImageByFacilityId(facilityId);
    }

    /**
     * ë‹¤ì¤‘ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥
     */
    @Transactional
    public void saveFacilityImages(Long facilityId, List<MultipartFile> imageFiles, List<String> altTexts) {
        try {
            log.info("ğŸ“¸ ë‹¤ì¤‘ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì‹œì‘ - facilityId: {}, ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, imageFiles.size());
            
            // ìµœëŒ€ 5ì¥ ì œí•œ ê²€ì‚¬
            if (imageFiles.size() > 5) {
                throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ëŠ” ìµœëŒ€ 5ì¥ê¹Œì§€ë§Œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš”ì²­ëœ ì´ë¯¸ì§€ ìˆ˜: " + imageFiles.size() + "ì¥");
            }
            
            // ê¸°ì¡´ ì´ë¯¸ì§€ ê°œìˆ˜ í™•ì¸
            int existingImageCount = facilityImageMapper.countImagesByFacilityId(facilityId);
            if (existingImageCount + imageFiles.size() > 5) {
                throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ëŠ” ìµœëŒ€ 5ì¥ê¹Œì§€ë§Œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. " +
                        "í˜„ì¬: " + existingImageCount + "ì¥, ì¶”ê°€ ìš”ì²­: " + imageFiles.size() + "ì¥");
            }
            
            // ê¸°ì¡´ ì´ë¯¸ì§€ ì‚­ì œ (ì„ íƒì )
            // facilityImageMapper.deleteAllImagesByFacilityId(facilityId);
            
            for (int i = 0; i < imageFiles.size(); i++) {
                MultipartFile file = imageFiles.get(i);
                String altText = (altTexts != null && i < altTexts.size()) ? altTexts.get(i) : null;
                
                if (!file.isEmpty()) {
                    // íŒŒì¼ ì €ì¥
                    String imagePath = saveImageFile(file, facilityId.toString(), i);
                    
                    // ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
                    FacilityImageDTO imageDTO = new FacilityImageDTO();
                    imageDTO.setFacilityId(facilityId);
                    imageDTO.setImagePath(imagePath);
                    imageDTO.setImageAltText(altText);
                    imageDTO.setImageOrder(i);
                    imageDTO.setIsMainImage(i == 0); // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ë¥¼ ë©”ì¸ìœ¼ë¡œ ì„¤ì •
                    
                    facilityImageMapper.insertFacilityImage(imageDTO);
                    log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ - index: {}, path: {}", i, imagePath);
                }
            }
            
            log.info("ğŸ‰ ëª¨ë“  ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ - facilityId: {}", facilityId);
            
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ë‹¨ì¼ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥
     */
    @Transactional
    public FacilityImageDTO saveSingleFacilityImage(Long facilityId, MultipartFile imageFile, String altText, Integer imageOrder) {
        try {
            log.info("ğŸ“¸ ë‹¨ì¼ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì‹œì‘ - facilityId: {}, order: {}", facilityId, imageOrder);
            
            if (imageFile.isEmpty()) {
                throw new IllegalArgumentException("ì—…ë¡œë“œëœ ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
            }
            
            // íŒŒì¼ ì €ì¥
            String imagePath = saveImageFile(imageFile, facilityId.toString(), imageOrder != null ? imageOrder : 0);
            
            // ê¸°ì¡´ ì´ë¯¸ì§€ ê°œìˆ˜ í™•ì¸ ë° ìµœëŒ€ ì œí•œ ê²€ì‚¬
            int existingImageCount = facilityImageMapper.countImagesByFacilityId(facilityId);
            log.info("ğŸ“Š ê¸°ì¡´ ì´ë¯¸ì§€ ê°œìˆ˜: {}/5", existingImageCount);
            
            if (existingImageCount >= 5) {
                throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ëŠ” ìµœëŒ€ 5ì¥ê¹Œì§€ë§Œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì¬: " + existingImageCount + "ì¥");
            }
            
            // ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
            FacilityImageDTO imageDTO = new FacilityImageDTO();
            imageDTO.setFacilityId(facilityId);
            imageDTO.setImagePath(imagePath);
            imageDTO.setImageAltText(altText);
            imageDTO.setImageOrder(imageOrder != null ? imageOrder : existingImageCount);
            imageDTO.setIsMainImage(existingImageCount == 0); // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ë©´ ë©”ì¸ìœ¼ë¡œ ì„¤ì •
            
            facilityImageMapper.insertFacilityImage(imageDTO);
            log.info("âœ… facility_images í…Œì´ë¸”ì— ì €ì¥ ì™„ë£Œ - imageId: {}, path: {}", imageDTO.getImageId(), imagePath);
            
            // ì‹œì„¤ í…Œì´ë¸”ì˜ ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ë„ ì—…ë°ì´íŠ¸
            updateFacilityMainImageInfo(facilityId);
            
            return imageDTO;
            
        } catch (Exception e) {
            log.error("âŒ ë‹¨ì¼ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ì‹œì„¤ í…Œì´ë¸”ì˜ ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸
     */
    private void updateFacilityMainImageInfo(Long facilityId) {
        try {
            // ì‹œì„¤ì˜ ì´ ì´ë¯¸ì§€ ìˆ˜ ì¡°íšŒ
            int imageCount = facilityImageMapper.countImagesByFacilityId(facilityId);
            
            // ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ
            FacilityImageDTO mainImage = facilityImageMapper.getMainImageByFacilityId(facilityId);
            String mainImagePath = mainImage != null ? mainImage.getImagePath() : null;
            
            log.info("ğŸ”„ ì‹œì„¤ í…Œì´ë¸” ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ - facilityId: {}, imageCount: {}, mainImagePath: {}", 
                    facilityId, imageCount, mainImagePath);
            
            // ì‹œì„¤ í…Œì´ë¸”ì˜ ì´ë¯¸ì§€ ê´€ë ¨ ì •ë³´ ì—…ë°ì´íŠ¸
            int result = facilityMapper.updateFacilityImageInfo(facilityId, imageCount, mainImagePath);
            if (result > 0) {
                log.info("âœ… ì‹œì„¤ í…Œì´ë¸” ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ ì™„ë£Œ - facilityId: {}", facilityId);
            } else {
                log.warn("âš ï¸ ì‹œì„¤ í…Œì´ë¸” ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ - facilityId: {}", facilityId);
            }
            
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ í…Œì´ë¸” ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
        }
    }

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ë©”ì„œë“œ
     */
    private String saveImageFile(MultipartFile file, String facilityId, int index) {
        try {
            // í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ ê¸°ë°˜ìœ¼ë¡œ ì ˆëŒ€ ê²½ë¡œ ì„¤ì •
            String projectRoot = System.getProperty("user.dir");
            String uploadDir = projectRoot + "/src/main/resources/static/uploads/facility/";
            File uploadDirFile = new File(uploadDir);
            if (!uploadDirFile.exists()) {
                boolean created = uploadDirFile.mkdirs();
                log.info("ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} - {}", uploadDir, created ? "ì„±ê³µ" : "ì‹¤íŒ¨");
            }
            
            // íŒŒì¼ëª… ìƒì„± (facilityId + index + UUID + ì›ë³¸ í™•ì¥ì)
            String originalFilename = file.getOriginalFilename();
            String extension = "";
            if (originalFilename != null && originalFilename.contains(".")) {
                extension = originalFilename.substring(originalFilename.lastIndexOf("."));
            }
            String savedFilename = String.format("facility_%s_%d_%s%s", 
                    facilityId, index, UUID.randomUUID().toString(), extension);
            
            // íŒŒì¼ ì €ì¥
            File savedFile = new File(uploadDir + savedFilename);
            file.transferTo(savedFile);
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì™„ë£Œ: {}", savedFile.getAbsolutePath());
            
            // ì›¹ ê²½ë¡œ ë°˜í™˜
            return "/uploads/facility/" + savedFilename;
            
        } catch (IOException e) {
            log.error("ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}, index={}", facilityId, index, e);
            throw new RuntimeException("ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½
     */
    @Transactional
    public void updateMainImage(Long facilityId, Long imageId) {
        try {
            log.info("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ ì‹œì‘ - facilityId: {}, imageId: {}", facilityId, imageId);
            
            // ê¸°ì¡´ ë©”ì¸ ì´ë¯¸ì§€ í•´ì œ
            facilityImageMapper.clearMainImages(facilityId);
            
            // ìƒˆ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •
            int result = facilityImageMapper.updateMainImage(facilityId, imageId);
            if (result == 0) {
                throw new RuntimeException("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            }
            
            log.info("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ ì™„ë£Œ - facilityId: {}, imageId: {}", facilityId, imageId);
            
        } catch (Exception e) {
            log.error("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}, imageId: {}", facilityId, imageId, e);
            throw new RuntimeException("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ ì‚­ì œ
     */
    @Transactional
    public void deleteFacilityImage(Long imageId) {
        try {
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì‚­ì œ ì‹œì‘ - imageId: {}", imageId);
            
            int result = facilityImageMapper.deleteFacilityImage(imageId);
            if (result == 0) {
                throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            }
            
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - imageId: {}", imageId);
            
        } catch (Exception e) {
            log.error("ì‹œì„¤ ì´ë¯¸ì§€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - imageId: {}", imageId, e);
            throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ì‹œì„¤ì˜ ì´ë¯¸ì§€ ê°œìˆ˜ ì¡°íšŒ
     */
    @Transactional(readOnly = true)
    public int getImageCountByFacilityId(Long facilityId) {
        return facilityImageMapper.countImagesByFacilityId(facilityId);
    }
}
````

## File: backup/facility-image-implementation/facility-image-implementation/README.md
````markdown
# ì‹œì„¤ ì´ë¯¸ì§€ êµ¬í˜„ ë°±ì—… (80% ì™„ì„±)

ì´ ë””ë ‰í† ë¦¬ëŠ” ì‹œì„¤ ì´ë¯¸ì§€ ë“±ë¡/ê´€ë¦¬ ê¸°ëŠ¥ êµ¬í˜„ì˜ ë°±ì—…ì…ë‹ˆë‹¤.

## ë°±ì—…ëœ íŒŒì¼ë“¤

### ë°±ì—”ë“œ íŒŒì¼
- `FacilityImageService.java` - ì‹œì„¤ ì´ë¯¸ì§€ ì„œë¹„ìŠ¤ ë¡œì§ (ìµœëŒ€ 5ì¥ ì œí•œ í¬í•¨)
- `FacilityController.java` - ì‹œì„¤ ê´€ë ¨ ì»¨íŠ¸ë¡¤ëŸ¬

### í”„ë¡ íŠ¸ì—”ë“œ íŒŒì¼
- `facility-detail.js` - ì‹œì„¤ ìƒì„¸ë³´ê¸° ì „ìš© JavaScript (ì´ë¯¸ì§€ ëª¨ë‹¬, ìŠ¬ë¼ì´ë” ë“±)
- `facility-detail-map.js` - ì‹œì„¤ ìƒì„¸ë³´ê¸° ì§€ë„ ê¸°ëŠ¥ ì „ìš© JavaScript
- `facility-edit.js` - ì‹œì„¤ ìˆ˜ì • í˜ì´ì§€ JavaScript
- `detail.html` - ê°œì„ ëœ ì‹œì„¤ ìƒì„¸ë³´ê¸° í…œí”Œë¦¿
- `edit.html` - ì‹œì„¤ ìˆ˜ì • í…œí”Œë¦¿
- `detail-backup.html` - ì›ë³¸ ë°±ì—… íŒŒì¼

## êµ¬í˜„ëœ ê¸°ëŠ¥ (ì•½ 80% ì™„ì„±)

### âœ… ì™„ì„±ëœ ê¸°ëŠ¥
1. **ì´ë¯¸ì§€ ì—…ë¡œë“œ/ì‚­ì œ**
   - ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì—…ë¡œë“œ
   - ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥
   - ê°œë³„ ì´ë¯¸ì§€ ì‚­ì œ
   - ìµœëŒ€ 5ì¥ ì œí•œ

2. **ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë”**
   - 5ì´ˆ ìë™ ìŠ¬ë¼ì´ë“œ
   - í™”ì‚´í‘œ ë„¤ë¹„ê²Œì´ì…˜
   - ì¸ë””ì¼€ì´í„° ì 

3. **ì´ë¯¸ì§€ í™•ëŒ€ ëª¨ë‹¬**
   - í´ë¦­ ì‹œ ì „ì²´í™”ë©´ í™•ëŒ€
   - ëª¨ë‹¬ ë‚´ ìŠ¬ë¼ì´ë”
   - ìë™ì¬ìƒ/ì¼ì‹œì •ì§€ ì»¨íŠ¸ë¡¤
   - ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥
   - í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì§€ì›

4. **ì§€ë„ ê¸°ëŠ¥**
   - ì¹´ì¹´ì˜¤ë§µ ì—°ë™
   - ì‹œì„¤ ìœ„ì¹˜ ë§ˆì»¤
   - ì¸í¬ìœˆë„ìš°
   - ê¸¸ì°¾ê¸° ê¸°ëŠ¥

### ğŸ”§ ë³´ì™„ì´ í•„ìš”í•œ ë¶€ë¶„ (ì•½ 20%)
1. **ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”**
   - ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì²˜ë¦¬
   - ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì²˜ë¦¬

2. **ì„±ëŠ¥ ìµœì í™”**
   - ì´ë¯¸ì§€ ë¡œë”© ìµœì í™”
   - ë©”ëª¨ë¦¬ ê´€ë¦¬

3. **ì ‘ê·¼ì„± ê°œì„ **
   - ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì›
   - í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì™„ì„±

## ê¸°ìˆ  ìŠ¤íƒ
- **ë°±ì—”ë“œ**: Spring Boot, MyBatis
- **í”„ë¡ íŠ¸ì—”ë“œ**: Thymeleaf, Bootstrap 5, JavaScript
- **ì§€ë„**: ì¹´ì¹´ì˜¤ë§µ API

## ì‚¬ìš© ë°©ë²•
1. ì´ì „ ë²„ì „ìœ¼ë¡œ ë˜ëŒë¦° í›„
2. í•„ìš”í•œ íŒŒì¼ë“¤ì„ ì ì ˆí•œ ìœ„ì¹˜ì— ë³µì‚¬
3. ë‹¨ê³„ë³„ë¡œ ê¸°ëŠ¥ ì¬êµ¬í˜„

## ì£¼ìš” ê°œì„ ì‚¬í•­
- Thymeleafì™€ JavaScript ì¶©ëŒ ë°©ì§€
- ì™¸ë¶€ JavaScript íŒŒì¼ ë¶„ë¦¬
- ì•ˆì „í•œ ë°ì´í„° ì „ë‹¬ ë©”ì»¤ë‹ˆì¦˜
- ëª¨ë“ˆí™”ëœ ì½”ë“œ êµ¬ì¡°

ìƒì„± ì¼ì‹œ: 2025-07-05
ë°±ì—… ì‚¬ìœ : ì´ì „ ë²„ì „ìœ¼ë¡œ ë˜ëŒë¦¬ê¸° ì „ 80% ì™„ì„±ëœ ê¸°ëŠ¥ ë³´ì¡´
````

## File: src/main/java/com/example/carelink/common/CustomMultipartFile.java
````java
package com.example.carelink.common;

import org.springframework.web.multipart.MultipartFile;

import java.io.*;

/**
 * ì»¤ìŠ¤í…€ MultipartFile êµ¬í˜„
 * Base64 ë°ì´í„°ë¥¼ MultipartFileë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤
 */
public class CustomMultipartFile implements MultipartFile {
    private final String name;
    private final String originalFilename;
    private final String contentType;
    private final byte[] content;

    public CustomMultipartFile(String name, String originalFilename, String contentType, byte[] content) {
        this.name = name;
        this.originalFilename = originalFilename;
        this.contentType = contentType;
        this.content = content;
    }

    @Override
    public String getName() {
        return name;
    }

    @Override
    public String getOriginalFilename() {
        return originalFilename;
    }

    @Override
    public String getContentType() {
        return contentType;
    }

    @Override
    public boolean isEmpty() {
        return content == null || content.length == 0;
    }

    @Override
    public long getSize() {
        return content != null ? content.length : 0;
    }

    @Override
    public byte[] getBytes() throws IOException {
        return content;
    }

    @Override
    public InputStream getInputStream() throws IOException {
        return new ByteArrayInputStream(content);
    }

    @Override
    public void transferTo(File dest) throws IOException, IllegalStateException {
        try (FileOutputStream fos = new FileOutputStream(dest)) {
            fos.write(content);
        }
    }
}
````

## File: src/main/java/com/example/carelink/common/PageInfo.java
````java
package com.example.carelink.common;

import lombok.Getter;
import lombok.Setter;

import java.util.List;

/**
 * í˜ì´ì§• ì²˜ë¦¬ë¥¼ ìœ„í•œ ì •ë³´ í´ë˜ìŠ¤
 * ëª¨ë“  ëª©ë¡ ì¡°íšŒì—ì„œ ì‚¬ìš©í•˜ëŠ” í˜ì´ì§• ì •ë³´
 */
@Getter
@Setter
public class PageInfo<T> {
    
    private List<T> list;           // ë°ì´í„° ëª©ë¡
    private int currentPage;        // í˜„ì¬ í˜ì´ì§€
    private int pageSize;           // í˜ì´ì§€ë‹¹ ë°ì´í„° ìˆ˜
    private int totalCount;         // ì „ì²´ ë°ì´í„° ìˆ˜
    private int totalPages;         // ì „ì²´ í˜ì´ì§€ ìˆ˜
    private int startPage;          // ì‹œì‘ í˜ì´ì§€ ë²ˆí˜¸
    private int endPage;            // ë í˜ì´ì§€ ë²ˆí˜¸
    private boolean hasPrevious;    // ì´ì „ í˜ì´ì§€ ì¡´ì¬ ì—¬ë¶€
    private boolean hasNext;        // ë‹¤ìŒ í˜ì´ì§€ ì¡´ì¬ ì—¬ë¶€
    private boolean firstPage;      // ì²« í˜ì´ì§€ ì—¬ë¶€
    private boolean lastPage;       // ë§ˆì§€ë§‰ í˜ì´ì§€ ì—¬ë¶€
    
    /**
     * í˜ì´ì§• ì •ë³´ ìƒì„±
     * @param list ë°ì´í„° ëª©ë¡
     * @param currentPage í˜„ì¬ í˜ì´ì§€
     * @param pageSize í˜ì´ì§€ë‹¹ ë°ì´í„° ìˆ˜
     * @param totalCount ì „ì²´ ë°ì´í„° ìˆ˜
     */
    public PageInfo(List<T> list, int currentPage, int pageSize, int totalCount) {
        this.list = list;
        this.currentPage = currentPage;
        this.pageSize = pageSize;
        this.totalCount = totalCount;
        
        // ì „ì²´ í˜ì´ì§€ ìˆ˜ ê³„ì‚°
        this.totalPages = (int) Math.ceil((double) totalCount / pageSize);
        
        // í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜ ë²”ìœ„ ê³„ì‚° (ì‹œì‘, ë í˜ì´ì§€)
        this.startPage = Math.max(1, currentPage - 4);
        this.endPage = Math.min(totalPages, currentPage + 4);
        
        // ì´ì „/ë‹¤ìŒ í˜ì´ì§€ ì¡´ì¬ ì—¬ë¶€
        this.hasPrevious = currentPage > 1;
        this.hasNext = currentPage < totalPages;
        this.firstPage = currentPage == 1;
        this.lastPage = currentPage == totalPages;
    }
    
    /**
     * í˜ì´ì§€ ì˜¤í”„ì…‹ ê³„ì‚°
     */
    public int getOffset() {
        return (currentPage - 1) * pageSize;
    }
    
    /**
     * í˜„ì¬ í˜ì´ì§€ê°€ ì²« í˜ì´ì§€ì¸ì§€ í™•ì¸
     */
    public boolean isFirstPage() {
        return currentPage == 1;
    }
    
    /**
     * í˜„ì¬ í˜ì´ì§€ê°€ ë§ˆì§€ë§‰ í˜ì´ì§€ì¸ì§€ í™•ì¸
     */
    public boolean isLastPage() {
        return currentPage == totalPages;
    }
}
````

## File: src/main/java/com/example/carelink/config/DevSecurityConfig.java
````java
package com.example.carelink.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Profile;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.web.SecurityFilterChain;

/**
 * ê°œë°œ í™˜ê²½ ì „ìš© ë³´ì•ˆ ì„¤ì •
 * ê°œë°œ í¸ì˜ì„±ì„ ìœ„í•´ ë³´ì•ˆì„ ì™„í™”í•œ ì„¤ì •
 */
@Configuration
@EnableWebSecurity
@Profile("dev")
public class DevSecurityConfig {

    @Bean
    public SecurityFilterChain devFilterChain(HttpSecurity http) throws Exception {
        http
            .csrf(csrf -> csrf.disable()) // ê°œë°œ í™˜ê²½ì—ì„œëŠ” CSRF ë¹„í™œì„±í™”
            .authorizeHttpRequests(auth -> auth
                .anyRequest().permitAll() // ê°œë°œ í™˜ê²½ì—ì„œëŠ” ëª¨ë“  ìš”ì²­ í—ˆìš©
            )
            .formLogin(formLogin -> formLogin.disable()) // ê°œë°œ í™˜ê²½ì—ì„œëŠ” ê¸°ë³¸ í¼ ë¡œê·¸ì¸ ë¹„í™œì„±í™”
            .httpBasic(httpBasic -> httpBasic.disable()); // ê°œë°œ í™˜ê²½ì—ì„œëŠ” Basic ì¸ì¦ ë¹„í™œì„±í™”

        return http.build();
    }
}
````

## File: src/main/java/com/example/carelink/config/KakaoApiConfig.java
````java
package com.example.carelink.config;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;

/**
 * ì¹´ì¹´ì˜¤ API í‚¤ ì„¤ì •ì„ ìœ„í•œ Configuration
 */
@Configuration
public class KakaoApiConfig implements WebMvcConfigurer {

    @Value("${api.kakao.app-key:#{null}}")
    private String kakaoAppKey;
    
    // í™˜ê²½ë³€ìˆ˜ë¥¼ ì§ì ‘ ì½ëŠ” ë°©ë²•ë„ ì¶”ê°€
    private String getKakaoAppKey() {
        String key = kakaoAppKey;
        if (key == null || key.isEmpty()) {
            key = System.getenv("KAKAO_APP_KEY");
            System.out.println("í™˜ê²½ë³€ìˆ˜ì—ì„œ ì§ì ‘ ì½ì€ API í‚¤: " + (key != null ? "ì¡´ì¬í•¨" : "ì—†ìŒ"));
        }
        return key;
    }

    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new KakaoApiInterceptor());
    }

    /**
     * ëª¨ë“  í˜ì´ì§€ì— KAKAO_APP_KEYë¥¼ ìë™ìœ¼ë¡œ ì¶”ê°€í•˜ëŠ” ì¸í„°ì…‰í„°
     */
    public class KakaoApiInterceptor implements HandlerInterceptor {

        @Override
        public void postHandle(HttpServletRequest request, HttpServletResponse response, 
                             Object handler, ModelAndView modelAndView) throws Exception {
            
            if (modelAndView != null && !modelAndView.getViewName().startsWith("redirect:")) {
                // ëª¨ë“  ë·°ì— KAKAO_APP_KEY ì¶”ê°€
                String apiKey = getKakaoAppKey();
                System.out.println("ë·°ì— ì „ë‹¬í•  API í‚¤: " + (apiKey != null && !apiKey.isEmpty() ? "ì¡´ì¬í•¨" : "ì—†ìŒ"));
                modelAndView.addObject("KAKAO_APP_KEY", apiKey);
            }
        }
    }
}
````

## File: src/main/java/com/example/carelink/config/ProdSecurityConfig.java
````java
package com.example.carelink.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Profile;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.web.SecurityFilterChain;
import org.springframework.security.web.util.matcher.AntPathRequestMatcher;

/**
 * ìš´ì˜ í™˜ê²½ ì „ìš© ë³´ì•ˆ ì„¤ì •
 * ì‹¤ì œ ì„œë¹„ìŠ¤ í™˜ê²½ì— ì í•©í•œ ë³´ì•ˆ ê°•í™” ì„¤ì •
 */
@Configuration
@EnableWebSecurity
@Profile("prod")
public class ProdSecurityConfig {

    @Bean
    public SecurityFilterChain prodFilterChain(HttpSecurity http) throws Exception {
        http
            .csrf(csrf -> csrf
                .csrfTokenRepository(org.springframework.security.web.csrf.CookieCsrfTokenRepository.withHttpOnlyFalse())
            ) // ìš´ì˜ í™˜ê²½ì—ì„œëŠ” CSRF ë³´í˜¸ í™œì„±í™”
            .authorizeHttpRequests(auth -> auth
                // ì •ì  ë¦¬ì†ŒìŠ¤ í—ˆìš©
                .requestMatchers(
                    new AntPathRequestMatcher("/css/**"),
                    new AntPathRequestMatcher("/js/**"),
                    new AntPathRequestMatcher("/images/**"),
                    new AntPathRequestMatcher("/favicon.ico")
                ).permitAll()
                // ì¸ì¦ ì—†ì´ ì ‘ê·¼ì„ í—ˆìš©í•  URL ì„¤ì • (ê¸°ì¡´ SecurityConfigì™€ ë™ì¼)
                .requestMatchers(
                    new AntPathRequestMatcher("/"),                    // ë©”ì¸ í˜ì´ì§€
                    new AntPathRequestMatcher("/member/login"),       // ë¡œê·¸ì¸ í¼ í˜ì´ì§€ ë° ì²˜ë¦¬
                    new AntPathRequestMatcher("/member/join"),        // íšŒì›ê°€ì… í¼ í˜ì´ì§€ ë° ì²˜ë¦¬
                    new AntPathRequestMatcher("/member/checkUserId"), // ì•„ì´ë”” ì¤‘ë³µ í™•ì¸ Ajax
                    new AntPathRequestMatcher("/facility/**"),        // ì‹œì„¤ ê²€ìƒ‰ í˜ì´ì§€ (ë¹„íšŒì›ë„ ì ‘ê·¼ ê°€ëŠ¥)
                    new AntPathRequestMatcher("/board/**"),           // ê²Œì‹œíŒ í˜ì´ì§€ (ë¹„íšŒì›ë„ ì ‘ê·¼ ê°€ëŠ¥)
                    new AntPathRequestMatcher("/review/**"),          // ë¦¬ë·° í˜ì´ì§€ (ë¹„íšŒì›ë„ ì ‘ê·¼ ê°€ëŠ¥)
                    new AntPathRequestMatcher("/job/**"),             // êµ¬ì¸êµ¬ì§ í˜ì´ì§€ (ë¹„íšŒì›ë„ ì ‘ê·¼ ê°€ëŠ¥)
                    new AntPathRequestMatcher("/api/**"),             // API ê²½ë¡œ (í•„ìš”ì‹œ)
                    new AntPathRequestMatcher("/error")               // ì—ëŸ¬ í˜ì´ì§€ (í•„ìš”ì‹œ)
                ).permitAll()
                // ê´€ë¦¬ì í˜ì´ì§€ëŠ” ADMIN ê¶Œí•œ í•„ìš”
                .requestMatchers(new AntPathRequestMatcher("/admin/**")).hasRole("ADMIN")
                // ë‚˜ë¨¸ì§€ëŠ” ì¸ì¦ í•„ìš” (ìš´ì˜ í™˜ê²½)
                .anyRequest().authenticated()
            )
            .formLogin(formLogin -> formLogin
                .loginPage("/member/login")
                .defaultSuccessUrl("/")
                .failureUrl("/member/login?error=true")
                .permitAll()
            )
            .logout(logout -> logout
                .logoutRequestMatcher(new AntPathRequestMatcher("/member/logout")) // ë¡œê·¸ì•„ì›ƒ URL
                .logoutSuccessUrl("/") // ë¡œê·¸ì•„ì›ƒ ì„±ê³µ ì‹œ ì´ë™ í˜ì´ì§€
                .invalidateHttpSession(true) // ì„¸ì…˜ ë¬´íš¨í™”
                .deleteCookies("JSESSIONID") // ì¿ í‚¤ ì‚­ì œ
                .permitAll()
            )
            .sessionManagement(session -> session
                .maximumSessions(1) // ë™ì‹œ ë¡œê·¸ì¸ ì„¸ì…˜ 1ê°œë¡œ ì œí•œ
                .maxSessionsPreventsLogin(false) // ìƒˆ ë¡œê·¸ì¸ ì‹œ ê¸°ì¡´ ì„¸ì…˜ ë¬´íš¨í™”
            );

        return http.build();
    }
}
````

## File: src/main/java/com/example/carelink/controller/HomeController.java
````java
package com.example.carelink.controller;

import com.example.carelink.service.BoardService;
import com.example.carelink.service.FacilityService;
import com.example.carelink.service.JobService;
import com.example.carelink.service.MemberService;
import com.example.carelink.service.ReviewService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;

/**
 * í™ˆí˜ì´ì§€ ì»¨íŠ¸ë¡¤ëŸ¬
 * ë©”ì¸ í˜ì´ì§€ ë° ê³µí†µ í˜ì´ì§€ ì²˜ë¦¬
 */
@Slf4j
@Controller
@RequiredArgsConstructor
public class HomeController {

    private final MemberService memberService;
    private final FacilityService facilityService;
    private final JobService jobService;
    private final ReviewService reviewService;
    private final BoardService boardService;

    /**
     * ë©”ì¸ í™ˆí˜ì´ì§€
     */
    @GetMapping("/")
    public String home(Model model) {
        model.addAttribute("pageTitle", "ë©”ì¸");
        
        try {
            // ì‹¤ì œ í†µê³„ ë°ì´í„° ì¡°íšŒ
            int facilityCount = facilityService.getFacilityCount();
            int jobCount = jobService.getJobCount();
            int reviewCount = reviewService.getReviewCount();
            int memberCount = memberService.getMemberCount();
            int boardCount = boardService.getBoardCount();
            
            model.addAttribute("facilityCount", facilityCount);
            model.addAttribute("jobCount", jobCount);
            model.addAttribute("reviewCount", reviewCount);
            model.addAttribute("memberCount", memberCount);
            model.addAttribute("boardCount", boardCount);
            
            log.info("í†µê³„ ë°ì´í„° - ì‹œì„¤: {}, êµ¬ì¸êµ¬ì§: {}, ë¦¬ë·°: {}, íšŒì›: {}, ê²Œì‹œê¸€: {}", 
                    facilityCount, jobCount, reviewCount, memberCount, boardCount);
        } catch (Exception e) {
            log.error("í†µê³„ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨", e);
            // ì—ëŸ¬ ë°œìƒ ì‹œ ê¸°ë³¸ê°’ ì„¤ì •
            model.addAttribute("facilityCount", 0);
            model.addAttribute("jobCount", 0);
            model.addAttribute("reviewCount", 0);
            model.addAttribute("memberCount", 0);
            model.addAttribute("boardCount", 0);
        }
        
        log.info("ë©”ì¸ í˜ì´ì§€ ì ‘ì†");
        return "index";
    }

    /**
     * ì†Œê°œ í˜ì´ì§€
     */
    @GetMapping("/about")
    public String about(Model model) {
        model.addAttribute("pageTitle", "ì†Œê°œ");
        return "about";
    }

    /**
     * ì˜¤ë¥˜ í˜ì´ì§€
     */
    @GetMapping("/error")
    public String error() {
        return "error";
    }
}
````

## File: src/main/java/com/example/carelink/dao/JobApplicationMapper.java
````java
package com.example.carelink.dao;

import com.example.carelink.dto.JobApplicationDTO; // ë°©ê¸ˆ ìƒì„±í•œ JobApplicationDTO ì„í¬íŠ¸
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param; // @Param ì–´ë…¸í…Œì´ì…˜ ì„í¬íŠ¸

@Mapper // ì´ ì¸í„°í˜ì´ìŠ¤ê°€ MyBatis ë§¤í¼ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
public interface JobApplicationMapper {

    // ìƒˆë¡œìš´ ì§€ì› ì •ë³´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì‚½ì…í•˜ëŠ” ë©”ì„œë“œ
    // JobApplicationDTO ê°ì²´ë¥¼ ë°›ì•„ì„œ DBì— ì €ì¥í•˜ê³ , ì‚½ì…ëœ ë ˆì½”ë“œ ìˆ˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    int insertJobApplication(JobApplicationDTO jobApplication);

    // íŠ¹ì • ê³µê³ ì— ëŒ€í•œ íŠ¹ì • íšŒì›ì˜ ì§€ì› ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ë©”ì„œë“œ
    // job_idì™€ applicant_member_idë¥¼ ë°›ì•„ì„œ í•´ë‹¹ ì¡°ê±´ì— ë§ëŠ” ì§€ì›ì„œì˜ ìˆ˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    int countByJobIdAndApplicantMemberId(@Param("jobId") Long jobId, @Param("applicantMemberId") Long applicantMemberId);

    // TODO: (ì„ íƒ ì‚¬í•­) í•„ìš”í•œ ê²½ìš° ë‹¤ë¥¸ ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ ë©”ì„œë“œ ì¶”ê°€
    // ì˜ˆ:
    // JobApplicationDTO findById(Long id);
    // List<JobApplicationDTO> findByJobId(Long jobId);
    // List<JobApplicationDTO> findByApplicantMemberId(Long applicantMemberId);
    // int updateStatus(@Param("id") Long id, @Param("status") String status);
}
````

## File: src/main/java/com/example/carelink/dto/FacilityImageDTO.java
````java
package com.example.carelink.dto;

import lombok.Data;
import java.time.LocalDateTime;

/**
 * ì‹œì„¤ ì´ë¯¸ì§€ DTO
 * ë‹¤ì¤‘ ì´ë¯¸ì§€ ì§€ì›ì„ ìœ„í•œ ë³„ë„ DTO
 */
@Data
public class FacilityImageDTO {
    private Long imageId;
    private Long facilityId;
    private String imagePath;
    private String imageAltText;
    private Integer imageOrder;
    private Boolean isMainImage;
    private LocalDateTime uploadDate;
    private LocalDateTime updatedAt;
}
````

## File: src/main/java/com/example/carelink/dto/JobApplicationDTO.java
````java
package com.example.carelink.dto;

import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.AllArgsConstructor;

import java.time.LocalDateTime; // LocalDateTime í´ë˜ìŠ¤ ì„í¬íŠ¸

@Data // Lombok: getter, setter, equals, hashCode, toString ìë™ ìƒì„±
@NoArgsConstructor // Lombok: ê¸°ë³¸ ìƒì„±ì ìë™ ìƒì„±
@AllArgsConstructor // Lombok: ëª¨ë“  í•„ë“œë¥¼ ì¸ìë¡œ ë°›ëŠ” ìƒì„±ì ìë™ ìƒì„±
public class JobApplicationDTO {

    private Long id; // ì§€ì›ì„œì˜ ê³ ìœ  ID (ë°ì´í„°ë² ì´ìŠ¤ì˜ ê¸°ë³¸ í‚¤)
    private Long jobId; // ì§€ì›í•œ êµ¬ì¸/êµ¬ì§ ê³µê³ ì˜ ID (JobDTOì˜ jobIdì™€ ì—°ê²°)
    private Long applicantMemberId; // ì§€ì›í•œ ê°œì¸ íšŒì›ì˜ ID (MemberDTOì˜ memberIdì™€ ì—°ê²°)
    private LocalDateTime applicationDate; // ì§€ì› ì¼ì‹œ (ì§€ì› ë²„íŠ¼ í´ë¦­ ì‹œì˜ ì‹œê°„)
    private String status; // ì§€ì› ìƒíƒœ (ì˜ˆ: "PENDING", "ACCEPTED", "REJECTED" ë“±)

    // TODO: (ì„ íƒ ì‚¬í•­) í•„ìš”í•œ ê²½ìš° ì¶”ê°€ í•„ë“œ
    // ì˜ˆë¥¼ ë“¤ì–´, ì´ë ¥ì„œ íŒŒì¼ ê²½ë¡œ, ìê¸°ì†Œê°œì„œ ë‚´ìš© ë“±ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    // private String resumePath;
    // private String coverLetter;
}
````

## File: src/main/java/com/example/carelink/validation/groups/OnFacilityJoin.java
````java
package com.example.carelink.validation.groups;

public interface OnFacilityJoin {
}
````

## File: src/main/resources/mapper/JobApplicationMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.JobApplicationMapper">

    <insert id="insertJobApplication" parameterType="com.example.carelink.dto.JobApplicationDTO"
            useGeneratedKeys="true" keyProperty="id">
        INSERT INTO job_application (
            job_id,
            applicant_member_id,
            application_date,
            status
        ) VALUES (
            #{jobId},
            #{applicantMemberId},
            #{applicationDate},
            #{status}
        )
    </insert>

    <select id="countByJobIdAndApplicantMemberId" resultType="int">
        SELECT COUNT(*)
        FROM job_application
        WHERE job_id = #{jobId} AND applicant_member_id = #{applicantMemberId}
    </select>

    </mapper>
````

## File: src/main/resources/static/css/facility-image-uploader.css
````css
/**
 * ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë” ìŠ¤íƒ€ì¼
 * ì‚¬ìš©ì ì¹œí™”ì ì´ê³  í˜„ëŒ€ì ì¸ ë””ìì¸
 */

.facility-image-uploader {
    max-width: 100%;
    margin: 0 auto;
}

/* ì—…ë¡œë“œ ì˜ì—­ */
.upload-area {
    border: 2px dashed #dee2e6;
    border-radius: 12px;
    padding: 40px 20px;
    text-align: center;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.upload-area::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    transition: left 0.5s ease;
}

.upload-area:hover {
    border-color: #007bff;
    background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,123,255,0.15);
}

.upload-area:hover::before {
    left: 100%;
}

.upload-area.drag-over {
    border-color: #28a745;
    background: linear-gradient(135deg, #e8f5e8 0%, #c3e6cb 100%);
    transform: scale(1.02);
}

.upload-content {
    position: relative;
    z-index: 1;
}

.upload-icon {
    margin-bottom: 20px;
}

.upload-icon i {
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

.upload-title {
    color: #495057;
    font-weight: 600;
    margin-bottom: 10px;
}

.upload-description {
    font-size: 16px;
    margin-bottom: 15px;
}

.upload-format-info {
    margin-bottom: 20px;
}

/* ë¯¸ë¦¬ë³´ê¸° ì˜ì—­ */
.preview-area {
    border: 1px solid #dee2e6;
    border-radius: 12px;
    padding: 20px;
    background: #fff;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.preview-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid #e9ecef;
}

.preview-header h6 {
    color: #495057;
    font-weight: 600;
}

.preview-image-container {
    position: relative;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    margin-bottom: 20px;
}

.preview-image {
    width: 100%;
    max-height: 300px;
    object-fit: cover;
    display: block;
}

.image-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0,0,0,0.7));
    color: white;
    padding: 15px;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.preview-image-container:hover .image-overlay {
    opacity: 1;
}

.image-info {
    display: flex;
    gap: 15px;
    font-size: 14px;
}

.image-size, .image-dimensions {
    background: rgba(255,255,255,0.2);
    padding: 4px 8px;
    border-radius: 4px;
    backdrop-filter: blur(5px);
}

/* ì••ì¶• ì„¤ì • */
.compression-settings {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    border: 1px solid #e9ecef;
}

.compression-savings {
    font-size: 14px;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.form-range {
    appearance: none;
    background: transparent;
    cursor: pointer;
}

.form-range::-webkit-slider-track {
    background: #dee2e6;
    height: 6px;
    border-radius: 3px;
}

.form-range::-webkit-slider-thumb {
    appearance: none;
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #007bff;
    cursor: pointer;
    border: 2px solid #fff;
    box-shadow: 0 2px 6px rgba(0,123,255,0.3);
}

.form-range::-moz-range-track {
    background: #dee2e6;
    height: 6px;
    border-radius: 3px;
    border: none;
}

.form-range::-moz-range-thumb {
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #007bff;
    cursor: pointer;
    border: 2px solid #fff;
    box-shadow: 0 2px 6px rgba(0,123,255,0.3);
}

/* Alt í…ìŠ¤íŠ¸ ì„¹ì…˜ */
.alt-text-section {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 8px;
    padding: 15px;
}

.alt-text-section .form-label {
    color: #856404;
    font-weight: 600;
}

/* ì§„í–‰ë¥  ì˜ì—­ */
.progress-area {
    margin: 20px 0;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e9ecef;
}

.progress {
    height: 8px;
    border-radius: 4px;
    background: #e9ecef;
    overflow: hidden;
}

.progress-bar {
    background: linear-gradient(45deg, #007bff, #0056b3);
    transition: width 0.3s ease;
}

.progress-text {
    margin-top: 10px;
    color: #6c757d;
    font-weight: 500;
}

/* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.btn {
    border-radius: 8px;
    font-weight: 500;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255,255,255,0.3);
    transition: all 0.3s ease;
    transform: translate(-50%, -50%);
}

.btn:hover::before {
    width: 300px;
    height: 300px;
}

.btn-lg {
    padding: 12px 30px;
    font-size: 16px;
    font-weight: 600;
}

.btn-primary {
    background: linear-gradient(45deg, #007bff, #0056b3);
    border: none;
    box-shadow: 0 4px 15px rgba(0,123,255,0.3);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,123,255,0.4);
}

.btn-outline-danger {
    border-color: #dc3545;
    color: #dc3545;
}

.btn-outline-danger:hover {
    background: #dc3545;
    border-color: #dc3545;
    color: white;
    transform: translateY(-1px);
}

.btn-outline-secondary {
    border-color: #6c757d;
    color: #6c757d;
}

.btn-outline-secondary:hover {
    background: #6c757d;
    border-color: #6c757d;
    color: white;
}

/* ì—ëŸ¬ ë©”ì‹œì§€ */
.error-message {
    border-radius: 8px;
    border: none;
    background: linear-gradient(45deg, #dc3545, #c82333);
    color: white;
    font-weight: 500;
    animation: slideInDown 0.3s ease;
}

@keyframes slideInDown {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ë°˜ì‘í˜• ë””ìì¸ */
@media (max-width: 768px) {
    .upload-area {
        padding: 30px 15px;
    }
    
    .upload-title {
        font-size: 1.1rem;
    }
    
    .upload-description {
        font-size: 14px;
    }
    
    .preview-area {
        padding: 15px;
    }
    
    .compression-settings {
        padding: 12px;
    }
    
    .btn-lg {
        padding: 10px 25px;
        font-size: 15px;
    }
    
    .image-info {
        flex-direction: column;
        gap: 8px;
    }
}

@media (max-width: 576px) {
    .preview-header {
        flex-direction: column;
        gap: 10px;
        text-align: center;
    }
    
    .compression-settings .row {
        flex-direction: column;
    }
    
    .compression-settings .col-md-6 {
        margin-bottom: 15px;
    }
}

/* ë‹¤í¬ ëª¨ë“œ ì§€ì› */
@media (prefers-color-scheme: dark) {
    .upload-area {
        background: linear-gradient(135deg, #343a40 0%, #495057 100%);
        border-color: #495057;
    }
    
    .upload-title, .upload-description {
        color: #f8f9fa;
    }
    
    .preview-area {
        background: #343a40;
        border-color: #495057;
    }
    
    .compression-settings {
        background: #495057;
        border-color: #6c757d;
    }
    
    .alt-text-section {
        background: #856404;
        border-color: #ffc107;
    }
    
    .progress-area {
        background: #495057;
        border-color: #6c757d;
    }
}

/* ì• ë‹ˆë©”ì´ì…˜ í–¥ìƒ */
.facility-image-uploader * {
    transition: all 0.3s ease;
}

/* í¬ì»¤ìŠ¤ ìƒíƒœ */
.btn:focus,
.form-control:focus,
.form-range:focus {
    box-shadow: 0 0 0 0.2rem rgba(0,123,255,0.25);
    outline: none;
}

/* ë¡œë”© ìƒíƒœ */
.loading {
    pointer-events: none;
    opacity: 0.6;
}

.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin: -10px 0 0 -10px;
    border: 2px solid #fff;
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}
````

## File: src/main/resources/static/css/image-compressor.css
````css
/* ì´ë¯¸ì§€ ì••ì¶• UI ìŠ¤íƒ€ì¼ */
.image-compressor-wrapper {
    position: relative;
}

.image-upload-area {
    min-height: 120px;
    cursor: pointer;
    transition: all 0.3s ease;
    background: #f8f9fa;
}

.image-upload-area:hover {
    background: #e9ecef;
}

.image-upload-area.drag-over {
    border-color: #007bff !important;
    background: #e7f3ff !important;
}

.upload-icon svg {
    transition: transform 0.3s ease;
}

.image-upload-area:hover .upload-icon svg {
    transform: scale(1.1);
}

.compression-settings {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 1rem;
}

.compression-settings h4 {
    color: #495057;
    margin-bottom: 1rem;
}

.quality-slider {
    accent-color: #007bff;
}

.max-width-input {
    font-size: 0.875rem;
}

.compress-btn {
    background: linear-gradient(45deg, #007bff, #0056b3);
    border: none;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(0,123,255,0.2);
}

.compress-btn:hover {
    background: linear-gradient(45deg, #0056b3, #004085);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0,123,255,0.3);
}

.file-preview {
    max-height: 400px;
    overflow-y: auto;
}

.preview-item {
    background: #ffffff;
    transition: all 0.3s ease;
}

.preview-item:hover {
    background: #f8f9fa;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.preview-item img {
    object-fit: cover;
    border: 1px solid #dee2e6;
}

.compression-result {
    text-align: right;
}

.compression-result .text-green-600 {
    color: #28a745 !important;
}

.compression-progress {
    background: #ffffff;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 1rem;
}

.progress-bar {
    overflow: hidden;
    position: relative;
}

.progress-fill {
    background: linear-gradient(90deg, #007bff, #28a745);
    position: relative;
    overflow: hidden;
}

.progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    animation: progress-shine 2s infinite;
}

@keyframes progress-shine {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.compression-summary {
    background: linear-gradient(135deg, #d4edda, #c3e6cb);
    border: 1px solid #b8dabc;
    animation: slideIn 0.5s ease-out;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.compression-summary h4 {
    color: #155724;
}

.compression-summary .text-green-700 {
    color: #155724 !important;
}

/* ë°˜ì‘í˜• ë””ìì¸ */
@media (max-width: 768px) {
    .compression-settings .grid-cols-2 {
        grid-template-columns: 1fr;
    }
    
    .preview-item {
        flex-direction: column;
        text-align: center;
    }
    
    .preview-item .flex {
        flex-direction: column;
        align-items: center;
    }
    
    .compression-result {
        text-align: center;
        margin-top: 1rem;
    }
}

/* ë“œë˜ê·¸ ì•¤ ë“œë¡­ ìƒíƒœ */
.image-upload-area.border-blue-400 {
    border-color: #60a5fa !important;
}

.image-upload-area.bg-blue-50 {
    background-color: #eff6ff !important;
}

/* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
.loading-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid #f3f3f3;
    border-top: 3px solid #007bff;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* ì••ì¶• í’ˆì§ˆ í‘œì‹œ */
.quality-indicator {
    position: relative;
    height: 4px;
    background: #e9ecef;
    border-radius: 2px;
    overflow: hidden;
}

.quality-indicator::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: linear-gradient(90deg, #dc3545, #ffc107, #28a745);
    border-radius: 2px;
    transition: width 0.3s ease;
}

.quality-indicator[data-quality="0.1"]::before { width: 10%; }
.quality-indicator[data-quality="0.2"]::before { width: 20%; }
.quality-indicator[data-quality="0.3"]::before { width: 30%; }
.quality-indicator[data-quality="0.4"]::before { width: 40%; }
.quality-indicator[data-quality="0.5"]::before { width: 50%; }
.quality-indicator[data-quality="0.6"]::before { width: 60%; }
.quality-indicator[data-quality="0.7"]::before { width: 70%; }
.quality-indicator[data-quality="0.8"]::before { width: 80%; }
.quality-indicator[data-quality="0.9"]::before { width: 90%; }
.quality-indicator[data-quality="1"]::before { width: 100%; }

/* íˆ´íŒ ìŠ¤íƒ€ì¼ */
.tooltip-text {
    position: relative;
    cursor: help;
}

.tooltip-text::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: white;
    padding: 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: 1000;
}

.tooltip-text:hover::after {
    opacity: 1;
}

/* ì„±ê³µ ë©”ì‹œì§€ */
.success-message {
    background: linear-gradient(135deg, #d4edda, #c3e6cb);
    border: 1px solid #b8dabc;
    color: #155724;
    padding: 1rem;
    border-radius: 8px;
    margin-top: 1rem;
    animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* íŒŒì¼ í¬ê¸° í‘œì‹œ */
.file-size {
    font-family: 'Courier New', monospace;
    font-weight: 600;
}

.file-size.original {
    color: #dc3545;
}

.file-size.compressed {
    color: #28a745;
}

/* ì••ì¶•ë¥  ë°°ì§€ */
.compression-badge {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    background: #28a745;
    color: white;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
}

.compression-badge.high {
    background: #28a745;
}

.compression-badge.medium {
    background: #ffc107;
    color: #212529;
}

.compression-badge.low {
    background: #dc3545;
}

/* Alt íƒœê·¸ ì…ë ¥ UI ìŠ¤íƒ€ì¼ */
.alt-tags-section {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 1rem;
    border: 1px solid #e9ecef;
}

.alt-tags-section h4 {
    color: #495057;
    margin-bottom: 1rem;
}

.alt-tag-item {
    background: #ffffff;
    transition: all 0.3s ease;
    border: 1px solid #dee2e6;
}

.alt-tag-item:hover {
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    transform: translateY(-1px);
}

.file-icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
}

.alt-text-input {
    border: 1px solid #ced4da;
    border-radius: 4px;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    resize: vertical;
}

.alt-text-input:focus {
    border-color: #007bff;
    box-shadow: 0 0 0 0.2rem rgba(0,123,255,0.25);
    outline: 0;
}

.char-count {
    font-size: 0.75rem;
    font-weight: 500;
}

.auto-suggestion {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 4px;
    padding: 0.5rem;
    margin-top: 0.5rem;
}

.auto-suggestion .auto-alt-text {
    font-style: italic;
    color: #856404;
    font-weight: 500;
}

.use-suggestion {
    text-decoration: none !important;
    font-size: 0.75rem;
    color: #28a745 !important;
    transition: color 0.3s ease;
}

.use-suggestion:hover {
    color: #1e7e34 !important;
}

.use-suggestion:disabled {
    color: #6c757d !important;
    cursor: not-allowed;
}

/* SEO ë„ì›€ë§ íˆ´íŒ */
.seo-help {
    position: relative;
    display: inline-block;
    cursor: help;
}

.seo-help::before {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: white;
    padding: 0.5rem 0.75rem;
    border-radius: 4px;
    font-size: 0.75rem;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: 1000;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

.seo-help::after {
    content: '';
    position: absolute;
    bottom: 115%;
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-top-color: #333;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: 1000;
}

.seo-help:hover::before,
.seo-help:hover::after {
    opacity: 1;
}

/* ìë™ ìƒì„± ì²´í¬ë°•ìŠ¤ */
.form-check-input:checked {
    background-color: #007bff;
    border-color: #007bff;
}

.form-check-label {
    color: #495057;
    font-weight: 500;
}

/* ë°˜ì‘í˜• ë””ìì¸ */
@media (max-width: 768px) {
    .alt-tag-item .d-flex {
        flex-direction: column;
    }
    
    .file-icon {
        align-self: center;
        margin-bottom: 1rem;
    }
    
    .char-count {
        float: none !important;
        display: block;
        text-align: center;
        margin-top: 0.25rem;
    }
    
    .auto-suggestion {
        text-align: center;
    }
    
    .use-suggestion {
        display: block;
        margin-top: 0.5rem;
    }
}

/* ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ */
.alt-tags-section {
    animation: slideInUp 0.3s ease-out;
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.alt-tag-item {
    animation: fadeInScale 0.3s ease-out;
}

@keyframes fadeInScale {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* ì„±ê³µ ìƒíƒœ */
.alt-input-success {
    border-color: #28a745 !important;
}

.alt-input-success:focus {
    border-color: #28a745 !important;
    box-shadow: 0 0 0 0.2rem rgba(40,167,69,0.25) !important;
}

/* ê²½ê³  ìƒíƒœ */
.alt-input-warning {
    border-color: #ffc107 !important;
}

.alt-input-warning:focus {
    border-color: #ffc107 !important;
    box-shadow: 0 0 0 0.2rem rgba(255,193,7,0.25) !important;
}
````

## File: src/main/resources/static/js/board-detail.js
````javascript
// ê²Œì‹œê¸€ ìƒì„¸ í˜ì´ì§€ ì „ìš© JavaScript
console.log('board-detail.js ë¡œë“œë¨');

function deleteBoard(event) {
    console.log('ì‚­ì œ í•¨ìˆ˜ ì‹¤í–‰');
    
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }
    
    var button = event ? event.target.closest('button') : document.querySelector('button[data-board-id]');
    console.log('ë²„íŠ¼:', button);
    
    if (!button) {
        alert('ì‚­ì œ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return false;
    }
    
    var boardId = parseInt(button.getAttribute('data-board-id'));
    var type = button.getAttribute('data-type') || 'all';
    
    console.log('boardId:', boardId, 'type:', type);
    
    if (!boardId || isNaN(boardId)) {
        alert('ê²Œì‹œê¸€ IDê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
        return false;
    }
    
    if (!confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        return false;
    }
    
    button.disabled = true;
    button.innerHTML = 'ì‚­ì œ ì¤‘...';
    
    var formData = new FormData();
    formData.append('type', type);
    
    fetch('/board/delete/' + boardId, {
        method: 'POST',
        body: formData
    })
    .then(function(response) {
        console.log('ì‘ë‹µ ìƒíƒœ:', response.status);
        if (response.ok || response.status === 302) {
            window.location.href = '/board?type=' + type;
        } else {
            alert('ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            button.disabled = false;
            button.innerHTML = '<i class="fas fa-trash me-1"></i>ì‚­ì œ';
        }
    })
    .catch(function(error) {
        console.error('ì—ëŸ¬:', error);
        alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        button.disabled = false;
        button.innerHTML = '<i class="fas fa-trash me-1"></i>ì‚­ì œ';
    });
    
    return false;
}

function likeBoard() {
    var deleteButton = document.querySelector('button[data-board-id]');
    var boardId = deleteButton ? parseInt(deleteButton.getAttribute('data-board-id')) : 0;
    
    if (!boardId) {
        alert('ê²Œì‹œê¸€ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    fetch('/board/like/' + boardId, {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: 'action=like'
    })
    .then(function(response) { return response.json(); })
    .then(function(data) {
        if (data.success) {
            var likeCount = document.getElementById('likeCount');
            if (likeCount) {
                likeCount.textContent = parseInt(likeCount.textContent) + 1;
            }
            alert(data.message || 'ì¶”ì²œë˜ì—ˆìŠµë‹ˆë‹¤.');
        } else {
            alert(data.message || 'ì¶”ì²œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    })
    .catch(function(error) {
        console.error('ì—ëŸ¬:', error);
        alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    });
}

function shareBoard() {
    var title = document.title.replace(' - CareLink', '') || 'ê²Œì‹œê¸€';
    var url = window.location.href;
    
    if (navigator.clipboard) {
        navigator.clipboard.writeText(url).then(function() {
            alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }).catch(function() {
            prompt('ë§í¬ë¥¼ ë³µì‚¬í•˜ì„¸ìš”:', url);
        });
    } else {
        prompt('ë§í¬ë¥¼ ë³µì‚¬í•˜ì„¸ìš”:', url);
    }
}

function reportBoard() {
    if (confirm('ì´ ê²Œì‹œê¸€ì„ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        alert('ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.');
    }
}

console.log('board-detail.js ë¡œë“œ ì™„ë£Œ');
````

## File: src/main/resources/static/js/board-navigation.js
````javascript
/**
 * ê²Œì‹œíŒ ë„¤ë¹„ê²Œì´ì…˜ ê³µí†µ JavaScript
 * ëª¨ë“  ê²Œì‹œíŒ í…œí”Œë¦¿ì—ì„œ ì‚¬ìš©
 * íƒ­ í´ë¦­ ì‹œ ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ ë¬¸ì œ í•´ê²°
 */

$(document).ready(function() {
    console.log('ê²Œì‹œíŒ ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œë¨');
    
    // ê²Œì‹œíŒ íƒ€ì… ë§í¬ í´ë¦­ ì‹œ íˆìŠ¤í† ë¦¬ êµì²´ (í•µì‹¬ ê¸°ëŠ¥)
    $('.board-type-link, .btn-group a[href*="/board"]').on('click', function(e) {
        const url = $(this).attr('href');
        
        // í˜„ì¬ ê²Œì‹œíŒ í˜ì´ì§€ì—ì„œ ë‹¤ë¥¸ íƒ­ìœ¼ë¡œ ì´ë™í•  ë•Œë§Œ íˆìŠ¤í† ë¦¬ êµì²´
        if (url && window.location.pathname.includes('/board')) {
            e.preventDefault();
            
            // ë¸Œë¼ìš°ì € ì§€ì› ì²´í¬ í›„ íˆìŠ¤í† ë¦¬ êµì²´
            if (history.replaceState) {
                history.replaceState(null, null, url);
                console.log('íˆìŠ¤í† ë¦¬ êµì²´ë¨:', url);
            }
            
            // í˜ì´ì§€ ì´ë™
            window.location.href = url;
        }
        // ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œ ê²Œì‹œíŒìœ¼ë¡œ ì˜¤ëŠ” ê²½ìš°ëŠ” ì •ìƒì ì¸ íˆìŠ¤í† ë¦¬ ì¶”ê°€
    });
    
    // ê²€ìƒ‰ í¼ê³¼ í˜ì´ì§€ë„¤ì´ì…˜ë„ ë™ì¼í•˜ê²Œ ì²˜ë¦¬
    $(document).on('click', '.pagination .page-link', function(e) {
        const url = $(this).attr('href');
        
        if (url && url !== '#' && url !== 'javascript:void(0)' && window.location.pathname.includes('/board')) {
            e.preventDefault();
            if (history.replaceState) {
                history.replaceState(null, null, url);
            }
            window.location.href = url;
        }
    });
    
    $(document).on('submit', 'form[action*="/board"]', function(e) {
        if (window.location.pathname.includes('/board')) {
            e.preventDefault();
            const form = $(this);
            const url = form.attr('action') || '/board';
            const formData = form.serialize();
            const fullUrl = url + '?' + formData;
            
            if (history.replaceState) {
                history.replaceState(null, null, fullUrl);
            }
            window.location.href = fullUrl;
        }
    });
});
````

## File: src/main/resources/static/js/change-password.js
````javascript
// ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í˜ì´ì§€ JavaScript
// Thymeleaf ì¸ë¼ì¸ JavaScriptë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì™„ì „íˆ ë¶„ë¦¬ëœ JavaScript íŒŒì¼

document.addEventListener('DOMContentLoaded', function() {
    // ìƒìˆ˜ ì •ì˜
    const PASSWORD_PATTERN = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,20}$/;
    const MIN_PASSWORD_LENGTH = 8;
    
    // DOM ìš”ì†Œ ì„ íƒ
    const elements = {
        form: document.getElementById('changePasswordForm'),
        currentPassword: document.getElementById('currentPassword'),
        newPassword: document.getElementById('newPassword'),
        confirmPassword: document.getElementById('confirmPassword'),
        submitButton: document.getElementById('submitButton'),
        toggleButtons: {
            current: document.getElementById('toggleCurrentPassword'),
            new: document.getElementById('toggleNewPassword'),
            confirm: document.getElementById('toggleConfirmPassword')
        },
        feedbacks: {
            current: document.getElementById('currentPasswordFeedback'),
            new: document.getElementById('newPasswordFeedback'),
            confirm: document.getElementById('confirmPasswordFeedback')
        }
    };

    // ë””ë²„ê¹…: DOM ìš”ì†Œ í™•ì¸
    console.log('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í˜ì´ì§€ DOM ìš”ì†Œ:', elements);

    // ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ/ìˆ¨ê¹€ í† ê¸€ í•¨ìˆ˜
    function setupPasswordToggle(inputElement, toggleButton) {
        if (!inputElement || !toggleButton) {
            console.warn('ë¹„ë°€ë²ˆí˜¸ í† ê¸€ ìš”ì†Œê°€ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }

        toggleButton.addEventListener('click', function() {
            const icon = this.querySelector('i');
            if (inputElement.type === 'password') {
                inputElement.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                inputElement.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });
    }

    // ëª¨ë“  ë¹„ë°€ë²ˆí˜¸ í† ê¸€ ì„¤ì •
    setupPasswordToggle(elements.currentPassword, elements.toggleButtons.current);
    setupPasswordToggle(elements.newPassword, elements.toggleButtons.new);
    setupPasswordToggle(elements.confirmPassword, elements.toggleButtons.confirm);

    // ì…ë ¥ í•„ë“œ ìœ íš¨ì„± ê²€ì‚¬ ìƒíƒœ ì´ˆê¸°í™”
    function clearValidationState(inputElement) {
        if (inputElement) {
            inputElement.classList.remove('is-valid', 'is-invalid');
        }
    }

    // í”¼ë“œë°± ë©”ì‹œì§€ ì„¤ì •
    function setFeedback(feedbackElement, message, isValid) {
        if (!feedbackElement) return;
        
        feedbackElement.textContent = message;
        if (isValid) {
            feedbackElement.classList.remove('invalid-feedback');
            feedbackElement.classList.add('valid-feedback');
        } else {
            feedbackElement.classList.remove('valid-feedback');
            feedbackElement.classList.add('invalid-feedback');
        }
    }

    // ì…ë ¥ í•„ë“œ ìœ íš¨ì„± ìƒíƒœ ì„¤ì •
    function setValidationState(inputElement, isValid) {
        if (!inputElement) return;
        
        if (isValid) {
            inputElement.classList.remove('is-invalid');
            inputElement.classList.add('is-valid');
        } else {
            inputElement.classList.remove('is-valid');
            inputElement.classList.add('is-invalid');
        }
    }

    // í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
    function validateCurrentPassword() {
        const value = elements.currentPassword.value.trim();
        const isValid = value.length >= MIN_PASSWORD_LENGTH;
        
        if (value === '') {
            clearValidationState(elements.currentPassword);
            setFeedback(elements.feedbacks.current, '', true);
            return false;
        }
        
        setValidationState(elements.currentPassword, isValid);
        if (!isValid) {
            setFeedback(elements.feedbacks.current, 'í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.', false);
        } else {
            setFeedback(elements.feedbacks.current, '', true);
        }
        
        return isValid;
    }

    // ìƒˆ ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
    function validateNewPassword() {
        const value = elements.newPassword.value;
        const isValid = PASSWORD_PATTERN.test(value);
        
        if (value === '') {
            clearValidationState(elements.newPassword);
            setFeedback(elements.feedbacks.new, '', true);
            return false;
        }
        
        setValidationState(elements.newPassword, isValid);
        if (!isValid) {
            setFeedback(elements.feedbacks.new, '8-20ìì˜ ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ 1ê°œ ì´ìƒ í¬í•¨í•´ì£¼ì„¸ìš”.', false);
        } else {
            // í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ì™€ ê°™ì€ì§€ í™•ì¸
            if (value === elements.currentPassword.value) {
                setValidationState(elements.newPassword, false);
                setFeedback(elements.feedbacks.new, 'í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ì™€ ë‹¤ë¥¸ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', false);
                return false;
            }
            setFeedback(elements.feedbacks.new, 'ì‚¬ìš© ê°€ëŠ¥í•œ ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤.', true);
        }
        
        return isValid && value !== elements.currentPassword.value;
    }

    // ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ê²€ì¦
    function validateConfirmPassword() {
        const newPasswordValue = elements.newPassword.value;
        const confirmValue = elements.confirmPassword.value;
        const isValid = confirmValue !== '' && newPasswordValue === confirmValue;
        
        if (confirmValue === '') {
            clearValidationState(elements.confirmPassword);
            setFeedback(elements.feedbacks.confirm, '', true);
            return false;
        }
        
        setValidationState(elements.confirmPassword, isValid);
        if (!isValid) {
            setFeedback(elements.feedbacks.confirm, 'ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.', false);
        } else {
            setFeedback(elements.feedbacks.confirm, 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•©ë‹ˆë‹¤.', true);
        }
        
        return isValid;
    }

    // í¼ ì œì¶œ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
    function updateSubmitButton() {
        const isCurrentValid = validateCurrentPassword();
        const isNewValid = validateNewPassword();
        const isConfirmValid = validateConfirmPassword();
        
        const isFormValid = isCurrentValid && isNewValid && isConfirmValid;
        
        if (elements.submitButton) {
            elements.submitButton.disabled = !isFormValid;
        }
        
        return isFormValid;
    }

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
    if (elements.currentPassword) {
        elements.currentPassword.addEventListener('input', function() {
            // í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ë©´ ìƒˆ ë¹„ë°€ë²ˆí˜¸ë„ ë‹¤ì‹œ ê²€ì¦
            validateCurrentPassword();
            if (elements.newPassword.value) {
                validateNewPassword();
            }
            updateSubmitButton();
        });
        
        elements.currentPassword.addEventListener('blur', function() {
            validateCurrentPassword();
            updateSubmitButton();
        });
    }

    if (elements.newPassword) {
        elements.newPassword.addEventListener('input', function() {
            validateNewPassword();
            // ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ë©´ í™•ì¸ ë¹„ë°€ë²ˆí˜¸ë„ ë‹¤ì‹œ ê²€ì¦
            if (elements.confirmPassword.value) {
                validateConfirmPassword();
            }
            updateSubmitButton();
        });
        
        elements.newPassword.addEventListener('blur', function() {
            validateNewPassword();
            updateSubmitButton();
        });
    }

    if (elements.confirmPassword) {
        elements.confirmPassword.addEventListener('input', function() {
            validateConfirmPassword();
            updateSubmitButton();
        });
        
        elements.confirmPassword.addEventListener('blur', function() {
            validateConfirmPassword();
            updateSubmitButton();
        });
    }

    // í¼ ì œì¶œ ì´ë²¤íŠ¸
    if (elements.form) {
        elements.form.addEventListener('submit', function(event) {
            // ìµœì¢… ìœ íš¨ì„± ê²€ì‚¬
            const isFormValid = updateSubmitButton();
            
            if (!isFormValid) {
                event.preventDefault();
                console.log('í¼ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨');
                
                // ì²« ë²ˆì§¸ ì˜¤ë¥˜ í•„ë“œì— í¬ì»¤ìŠ¤
                if (!validateCurrentPassword() && elements.currentPassword) {
                    elements.currentPassword.focus();
                } else if (!validateNewPassword() && elements.newPassword) {
                    elements.newPassword.focus();
                } else if (!validateConfirmPassword() && elements.confirmPassword) {
                    elements.confirmPassword.focus();
                }
                
                return false;
            }
            
            // í¼ ì œì¶œ ì¤‘ ë²„íŠ¼ ë¹„í™œì„±í™”
            if (elements.submitButton) {
                elements.submitButton.disabled = true;
                elements.submitButton.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>ë³€ê²½ ì¤‘...';
            }
            
            console.log('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í¼ ì œì¶œ');
            return true;
        });
    }

    // ì´ˆê¸° ìƒíƒœ ì„¤ì •
    updateSubmitButton();
    
    console.log('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í˜ì´ì§€ JavaScript ì´ˆê¸°í™” ì™„ë£Œ');
});
````

## File: src/main/resources/static/js/facility-edit.js
````javascript
// facility-edit.js

// ì‹œì„¤ ì£¼ì†Œ ê²€ìƒ‰ í•¨ìˆ˜
function searchFacilityAddress() {
    new daum.Postcode({
        oncomplete: function(data) {
            let fullAddr = data.roadAddress || data.jibunAddress;
            
            // ì£¼ì†Œ í•„ë“œ ì—…ë°ì´íŠ¸
            document.getElementById('facilityAddress').value = fullAddr;
            
            // ì§€ë„ì— ìœ„ì¹˜ í‘œì‹œ
            updateMapAndCoordinates(fullAddr);
        }
    }).open();
}

// ì§€ë„ ì—…ë°ì´íŠ¸ ë° ì¢Œí‘œ ì„¤ì • í•¨ìˆ˜
function updateMapAndCoordinates(address) {
    const geocoder = new kakao.maps.services.Geocoder();
    
    geocoder.addressSearch(address, function(result, status) {
        if (status === kakao.maps.services.Status.OK) {
            const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
            
            // ì¢Œí‘œë¥¼ íˆë“  í•„ë“œì— ì €ì¥
            document.getElementById('latitude').value = result[0].y;
            document.getElementById('longitude').value = result[0].x;
            
            // ì§€ë„ ì»¨í…Œì´ë„ˆ í‘œì‹œ
            const mapContainer = document.getElementById('mapPreviewContainer');
            mapContainer.style.display = 'block';
            
            // ì§€ë„ ì´ˆê¸°í™”
            const mapOption = {
                center: coords,
                level: 3
            };
            
            const map = new kakao.maps.Map(document.getElementById('previewMap'), mapOption);
            
            // ë§ˆì»¤ ì¶”ê°€
            const marker = new kakao.maps.Marker({
                position: coords
            });
            marker.setMap(map);
            
            // ì¸í¬ìœˆë„ìš° ì¶”ê°€
            const infowindow = new kakao.maps.InfoWindow({
                content: '<div style="width:150px;text-align:center;padding:6px 0;">ì„ íƒëœ ìœ„ì¹˜</div>'
            });
            infowindow.open(map, marker);
        }
    });
}

// ìš´ì˜ì‹œê°„ ë¼ë””ì˜¤ ë²„íŠ¼ ì²˜ë¦¬
function handleOperatingHours() {
    const radio24 = document.getElementById('operating24');
    const radioCustom = document.getElementById('operatingCustom');
    const customInput = document.getElementById('customOperatingHours');
    const hiddenInput = document.getElementById('operatingHours');
    
    function updateOperatingHours() {
        if (radio24.checked) {
            customInput.style.display = 'none';
            hiddenInput.value = '24ì‹œê°„';
        } else if (radioCustom.checked) {
            customInput.style.display = 'block';
            hiddenInput.value = customInput.value || '';
        }
    }
    
    radio24.addEventListener('change', updateOperatingHours);
    radioCustom.addEventListener('change', updateOperatingHours);
    customInput.addEventListener('input', function() {
        if (radioCustom.checked) {
            hiddenInput.value = this.value;
        }
    });
    
    // ì´ˆê¸° ìƒíƒœ ì„¤ì •
    updateOperatingHours();
}

// ì „í™”ë²ˆí˜¸ í¬ë§·íŒ…
function formatPhoneNumber(input) {
    let value = input.value.replace(/\D/g, '');
    let formattedValue = '';
    
    if (value.startsWith('02')) {
        // ì„œìš¸ ì§€ì—­ë²ˆí˜¸
        if (value.length <= 2) {
            formattedValue = value;
        } else if (value.length <= 6) {
            formattedValue = value.slice(0, 2) + '-' + value.slice(2);
        } else if (value.length <= 10) {
            formattedValue = value.slice(0, 2) + '-' + value.slice(2, 6) + '-' + value.slice(6);
        } else {
            formattedValue = value.slice(0, 2) + '-' + value.slice(2, 6) + '-' + value.slice(6, 10);
        }
    } else if (value.startsWith('01')) {
        // íœ´ëŒ€í° ë²ˆí˜¸
        if (value.length <= 3) {
            formattedValue = value;
        } else if (value.length <= 7) {
            formattedValue = value.slice(0, 3) + '-' + value.slice(3);
        } else if (value.length <= 11) {
            formattedValue = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7);
        } else {
            formattedValue = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7, 11);
        }
    } else if (value.length >= 3) {
        // ê¸°íƒ€ ì§€ì—­ë²ˆí˜¸
        if (value.length <= 3) {
            formattedValue = value;
        } else if (value.length <= 7) {
            formattedValue = value.slice(0, 3) + '-' + value.slice(3);
        } else if (value.length <= 11) {
            formattedValue = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7);
        } else {
            formattedValue = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7, 11);
        }
    } else {
        formattedValue = value;
    }
    
    input.value = formattedValue;
}

// í¼ ìœ íš¨ì„± ê²€ì‚¬
function validateForm() {
    const requiredFields = [
        { id: 'facilityName', name: 'ì‹œì„¤ëª…' },
        { id: 'facilityType', name: 'ì‹œì„¤ ìœ í˜•' },
        { id: 'facilityAddress', name: 'ì£¼ì†Œ' },
        { id: 'phone', name: 'ì „í™”ë²ˆí˜¸' }
    ];
    
    for (let field of requiredFields) {
        const element = document.getElementById(field.id);
        if (!element.value.trim()) {
            alert(`${field.name}ì„(ë¥¼) ì…ë ¥í•´ì£¼ì„¸ìš”.`);
            element.focus();
            return false;
        }
    }
    
    // ì „í™”ë²ˆí˜¸ íŒ¨í„´ ê²€ì‚¬
    const phonePattern = /^(02-\d{3,4}-\d{4}|0(3[1-3]|4[1-3]|5[1-5]|6[1-4]|70)-\d{3,4}-\d{4}|01[016-9]-\d{3,4}-\d{4})$/;
    const phone = document.getElementById('phone').value;
    if (!phonePattern.test(phone)) {
        alert('ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.');
        document.getElementById('phone').focus();
        return false;
    }
    
    return true;
}

// í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì‹¤í–‰
document.addEventListener('DOMContentLoaded', function() {
    // ìš´ì˜ì‹œê°„ ì²˜ë¦¬ ì´ˆê¸°í™”
    handleOperatingHours();
    
    // ì „í™”ë²ˆí˜¸ ì…ë ¥ í¬ë§·íŒ…
    const phoneInput = document.getElementById('phone');
    if (phoneInput) {
        phoneInput.addEventListener('input', function() {
            formatPhoneNumber(this);
        });
    }
    
    // ê¸°ì¡´ ì£¼ì†Œê°€ ìˆëŠ” ê²½ìš° ì§€ë„ í‘œì‹œ
    const existingAddress = document.getElementById('facilityAddress').value;
    if (existingAddress) {
        updateMapAndCoordinates(existingAddress);
    }
    
    // í¼ ì œì¶œ ì‹œ ìœ íš¨ì„± ê²€ì‚¬
    const form = document.getElementById('facilityEditForm');
    if (form) {
        form.addEventListener('submit', function(e) {
            if (!validateForm()) {
                e.preventDefault();
            }
        });
    }
});
````

## File: src/main/resources/static/js/facility-image-core.js
````javascript
/**
 * ì‹œì„¤ ì´ë¯¸ì§€ í•µì‹¬ ëª¨ë“ˆ (Core Module)
 * ëª¨ë“  ì‹œì„¤ ì´ë¯¸ì§€ ëª¨ë“ˆì˜ ê¸°ë°˜ì´ ë˜ëŠ” í•µì‹¬ ê¸°ëŠ¥ ì œê³µ
 * 
 * ì£¼ìš” ê¸°ëŠ¥:
 * - ì „ì—­ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê´€ë¦¬
 * - ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ
 * - ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
 * - ëª¨ë“ˆ ì´ˆê¸°í™” ë° ì¢…ì†ì„± ê´€ë¦¬
 * - ê³µí†µ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
 * - ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹…
 * - ë¸Œë¼ìš°ì € í˜¸í™˜ì„± ì²´í¬
 * 
 * @version 1.0.0
 * @author LightCare Team
 */

(function() {
    'use strict';
    
    // ================================================
    // ì „ì—­ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì´ˆê¸°í™”
    // ================================================
    
    // ë©”ì¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„± (ì¤‘ë³µ ë°©ì§€)
    if (typeof window.FacilityImageSystem === 'undefined') {
        window.FacilityImageSystem = {};
    }
    
    // ëª¨ë“ˆ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
    window.FacilityImageSystem.Core = {};
    
    // ================================================
    // ìƒìˆ˜ ì •ì˜
    // ================================================
    
    const CONSTANTS = {
        VERSION: '1.0.0',
        MODULE_NAME: 'FacilityImageCore',
        
        // íŒŒì¼ ì œí•œ
        MAX_FILE_SIZE: 10 * 1024 * 1024, // 10MB
        MAX_IMAGES: 5,
        ALLOWED_TYPES: ['image/jpeg', 'image/png', 'image/webp', 'image/avif'],
        
        // ì´ë¯¸ì§€ í¬ê¸° ì œí•œ
        MAX_WIDTH: 1920,
        MAX_HEIGHT: 1200,
        CROP_RATIO: 16/9,
        
        // í’ˆì§ˆ ì„¤ì •
        DEFAULT_QUALITY: 0.8,
        WEBP_QUALITY: 0.85,
        
        // ë‹¨ê³„ ì •ì˜
        STEPS: {
            UPLOAD: 1,
            CROP: 2,
            MANAGE: 3
        },
        
        // ìƒíƒœ ì •ì˜
        STATUS: {
            IDLE: 'idle',
            LOADING: 'loading',
            PROCESSING: 'processing',
            SUCCESS: 'success',
            ERROR: 'error'
        },
        
        // ì´ë²¤íŠ¸ íƒ€ì…
        EVENTS: {
            INITIALIZED: 'initialized',
            STATE_CHANGED: 'stateChanged',
            STEP_CHANGED: 'stepChanged',
            IMAGE_ADDED: 'imageAdded',
            IMAGE_REMOVED: 'imageRemoved',
            IMAGE_PROCESSED: 'imageProcessed',
            ERROR: 'error',
            SUCCESS: 'success'
        }
    };
    
    // ================================================
    // ì „ì—­ ìƒíƒœ ê´€ë¦¬
    // ================================================
    
    const globalState = {
        // ì‹œìŠ¤í…œ ìƒíƒœ
        isInitialized: false,
        currentStep: CONSTANTS.STEPS.UPLOAD,
        status: CONSTANTS.STATUS.IDLE,
        
        // ì‹œì„¤ ì •ë³´
        facilityId: null,
        facilityName: null,
        
        // ì´ë¯¸ì§€ ë°ì´í„°
        originalImages: [],
        processedImages: [],
        uploadedImages: [],
        
        // í˜„ì¬ ì‘ì—… ìƒíƒœ
        currentImageIndex: 0,
        isProcessing: false,
        
        // ì„¤ì •
        settings: {
            maxFileSize: CONSTANTS.MAX_FILE_SIZE,
            maxImages: CONSTANTS.MAX_IMAGES,
            allowedTypes: CONSTANTS.ALLOWED_TYPES,
            cropRatio: CONSTANTS.CROP_RATIO,
            quality: CONSTANTS.DEFAULT_QUALITY,
            enableCompression: true,
            enableSEO: true,
            enableAltText: true
        },
        
        // ë¸Œë¼ìš°ì € ì§€ì› ì •ë³´
        browserSupport: {
            avif: false,
            webp: false,
            dragDrop: false,
            fileReader: false
        },
        
        // ì—ëŸ¬ ìƒíƒœ
        errors: [],
        warnings: []
    };
    
    // ================================================
    // ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
    // ================================================
    
    const eventSystem = {
        listeners: {},
        
        /**
         * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
         * @param {string} eventType - ì´ë²¤íŠ¸ íƒ€ì…
         * @param {Function} callback - ì½œë°± í•¨ìˆ˜
         */
        on(eventType, callback) {
            if (!this.listeners[eventType]) {
                this.listeners[eventType] = [];
            }
            this.listeners[eventType].push(callback);
        },
        
        /**
         * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
         * @param {string} eventType - ì´ë²¤íŠ¸ íƒ€ì…
         * @param {Function} callback - ì œê±°í•  ì½œë°± í•¨ìˆ˜
         */
        off(eventType, callback) {
            if (!this.listeners[eventType]) return;
            
            this.listeners[eventType] = this.listeners[eventType].filter(
                listener => listener !== callback
            );
        },
        
        /**
         * ì´ë²¤íŠ¸ ë°œìƒ
         * @param {string} eventType - ì´ë²¤íŠ¸ íƒ€ì…
         * @param {*} data - ì „ë‹¬í•  ë°ì´í„°
         */
        emit(eventType, data) {
            if (!this.listeners[eventType]) return;
            
            this.listeners[eventType].forEach(callback => {
                try {
                    callback(data);
                } catch (error) {
                    console.error(`ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜ (${eventType}):`, error);
                }
            });
        },
        
        /**
         * ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
         */
        removeAllListeners() {
            this.listeners = {};
        }
    };
    
    // ================================================
    // ë¡œê¹… ì‹œìŠ¤í…œ
    // ================================================
    
    const logger = {
        isEnabled: true,
        prefix: 'ğŸ¢ [FacilityImageCore]',
        
        /**
         * ì¼ë°˜ ë¡œê·¸
         * @param {string} message - ë©”ì‹œì§€
         * @param {*} data - ì¶”ê°€ ë°ì´í„°
         */
        log(message, data = null) {
            if (!this.isEnabled) return;
            
            const timestamp = new Date().toLocaleTimeString();
            console.log(`${this.prefix} [${timestamp}] ${message}`, data || '');
        },
        
        /**
         * ì—ëŸ¬ ë¡œê·¸
         * @param {string} message - ë©”ì‹œì§€
         * @param {Error} error - ì—ëŸ¬ ê°ì²´
         */
        error(message, error = null) {
            if (!this.isEnabled) return;
            
            const timestamp = new Date().toLocaleTimeString();
            console.error(`${this.prefix} [${timestamp}] âŒ ${message}`, error || '');
        },
        
        /**
         * ê²½ê³  ë¡œê·¸
         * @param {string} message - ë©”ì‹œì§€
         * @param {*} data - ì¶”ê°€ ë°ì´í„°
         */
        warn(message, data = null) {
            if (!this.isEnabled) return;
            
            const timestamp = new Date().toLocaleTimeString();
            console.warn(`${this.prefix} [${timestamp}] âš ï¸ ${message}`, data || '');
        },
        
        /**
         * ì„±ê³µ ë¡œê·¸
         * @param {string} message - ë©”ì‹œì§€
         * @param {*} data - ì¶”ê°€ ë°ì´í„°
         */
        success(message, data = null) {
            if (!this.isEnabled) return;
            
            const timestamp = new Date().toLocaleTimeString();
            console.log(`${this.prefix} [${timestamp}] âœ… ${message}`, data || '');
        },
        
        /**
         * ìƒíƒœ ì²´í¬ ë¡œê·¸
         */
        checkState() {
            if (!this.isEnabled) return;
            
            this.log('í˜„ì¬ ìƒíƒœ ì²´í¬', {
                isInitialized: globalState.isInitialized,
                currentStep: globalState.currentStep,
                status: globalState.status,
                facilityId: globalState.facilityId,
                imagesCount: globalState.originalImages.length,
                isProcessing: globalState.isProcessing
            });
        }
    };
    
    // ================================================
    // ìƒíƒœ ê´€ë¦¬ í•¨ìˆ˜
    // ================================================
    
    const stateManager = {
        /**
         * ìƒíƒœ ì—…ë°ì´íŠ¸ (ë¶ˆë³€ì„± ë³´ì¥)
         * @param {Object} updates - ì—…ë°ì´íŠ¸í•  ìƒíƒœ
         * @returns {Object} ìƒˆë¡œìš´ ìƒíƒœ
         */
        updateState(updates) {
            const oldState = { ...globalState };
            Object.assign(globalState, updates);
            
            // ìƒíƒœ ë³€ê²½ ì´ë²¤íŠ¸ ë°œìƒ
            eventSystem.emit(CONSTANTS.EVENTS.STATE_CHANGED, {
                oldState,
                newState: globalState,
                changes: updates
            });
            
            logger.log('ìƒíƒœ ì—…ë°ì´íŠ¸', updates);
            return globalState;
        },
        
        /**
         * í˜„ì¬ ìƒíƒœ ë°˜í™˜
         * @returns {Object} í˜„ì¬ ìƒíƒœ
         */
        getState() {
            return { ...globalState };
        },
        
        /**
         * ìƒíƒœ ì´ˆê¸°í™”
         */
        resetState() {
            const initialState = {
                isInitialized: false,
                currentStep: CONSTANTS.STEPS.UPLOAD,
                status: CONSTANTS.STATUS.IDLE,
                facilityId: null,
                facilityName: null,
                originalImages: [],
                processedImages: [],
                uploadedImages: [],
                currentImageIndex: 0,
                isProcessing: false,
                errors: [],
                warnings: []
            };
            
            this.updateState(initialState);
            logger.log('ìƒíƒœ ì´ˆê¸°í™” ì™„ë£Œ');
        },
        
        /**
         * ë‹¨ê³„ ë³€ê²½
         * @param {number} step - ë³€ê²½í•  ë‹¨ê³„
         */
        changeStep(step) {
            if (step < 1 || step > 3) {
                logger.error('ì˜ëª»ëœ ë‹¨ê³„ ë²ˆí˜¸:', step);
                return;
            }
            
            const oldStep = globalState.currentStep;
            this.updateState({ currentStep: step });
            
            // ë‹¨ê³„ ë³€ê²½ ì´ë²¤íŠ¸ ë°œìƒ
            eventSystem.emit(CONSTANTS.EVENTS.STEP_CHANGED, {
                oldStep,
                newStep: step
            });
            
            logger.log(`ë‹¨ê³„ ë³€ê²½: ${oldStep} â†’ ${step}`);
        },
        
        /**
         * ì—ëŸ¬ ì¶”ê°€
         * @param {string} message - ì—ëŸ¬ ë©”ì‹œì§€
         * @param {Error} error - ì—ëŸ¬ ê°ì²´
         */
        addError(message, error = null) {
            const errorObj = {
                message,
                error: error ? error.message : null,
                timestamp: new Date().toISOString(),
                stack: error ? error.stack : null
            };
            
            globalState.errors.push(errorObj);
            this.updateState({ status: CONSTANTS.STATUS.ERROR });
            
            eventSystem.emit(CONSTANTS.EVENTS.ERROR, errorObj);
            logger.error(message, error);
        },
        
        /**
         * ê²½ê³  ì¶”ê°€
         * @param {string} message - ê²½ê³  ë©”ì‹œì§€
         */
        addWarning(message) {
            const warningObj = {
                message,
                timestamp: new Date().toISOString()
            };
            
            globalState.warnings.push(warningObj);
            logger.warn(message);
        }
    };
    
    // ================================================
    // ë¸Œë¼ìš°ì € í˜¸í™˜ì„± ì²´í¬
    // ================================================
    
    const browserSupport = {
        /**
         * ë¸Œë¼ìš°ì € ì§€ì› ê¸°ëŠ¥ ì²´í¬
         */
        async checkSupport() {
            logger.log('ë¸Œë¼ìš°ì € ì§€ì› ê¸°ëŠ¥ ì²´í¬ ì‹œì‘');
            
            const support = {
                avif: await this.checkImageFormat('avif'),
                webp: await this.checkImageFormat('webp'),
                dragDrop: this.checkDragDropSupport(),
                fileReader: this.checkFileReaderSupport()
            };
            
            stateManager.updateState({ browserSupport: support });
            logger.log('ë¸Œë¼ìš°ì € ì§€ì› ê¸°ëŠ¥ ì²´í¬ ì™„ë£Œ', support);
            
            return support;
        },
        
        /**
         * ì´ë¯¸ì§€ í¬ë§· ì§€ì› ì²´í¬
         * @param {string} format - ì²´í¬í•  í¬ë§· (webp, avif)
         * @returns {Promise<boolean>} ì§€ì› ì—¬ë¶€
         */
        checkImageFormat(format) {
            return new Promise((resolve) => {
                const canvas = document.createElement('canvas');
                canvas.width = 1;
                canvas.height = 1;
                
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                ctx.fillRect(0, 0, 1, 1);
                
                const dataURL = canvas.toDataURL(`image/${format}`);
                const supported = dataURL.indexOf(`data:image/${format}`) === 0;
                
                resolve(supported);
            });
        },
        
        /**
         * ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì§€ì› ì²´í¬
         * @returns {boolean} ì§€ì› ì—¬ë¶€
         */
        checkDragDropSupport() {
            const div = document.createElement('div');
            return (('draggable' in div) || ('ondragstart' in div && 'ondrop' in div)) && 
                   'FormData' in window && 'FileReader' in window;
        },
        
        /**
         * FileReader ì§€ì› ì²´í¬
         * @returns {boolean} ì§€ì› ì—¬ë¶€
         */
        checkFileReaderSupport() {
            return 'FileReader' in window;
        }
    };
    
    // ================================================
    // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
    // ================================================
    
    const utils = {
        /**
         * ì‹œì„¤ ID ì¶”ì¶œ
         * @returns {number|null} ì‹œì„¤ ID
         */
        extractFacilityId() {
            let facilityId = null;
            
            try {
                // 1. URL ê²½ë¡œì—ì„œ ì¶”ì¶œ
                const pathParts = window.location.pathname.split('/');
                const lastPart = pathParts[pathParts.length - 1];
                if (!isNaN(lastPart) && lastPart !== '') {
                    facilityId = parseInt(lastPart);
                }
                
                // 2. ë©”íƒ€ íƒœê·¸ì—ì„œ ì¶”ì¶œ
                if (!facilityId) {
                    const metaTag = document.querySelector('meta[name="facility-id"]');
                    if (metaTag) {
                        facilityId = parseInt(metaTag.getAttribute('content'));
                    }
                }
                
                // 3. íˆë“  ì¸í’‹ì—ì„œ ì¶”ì¶œ
                if (!facilityId) {
                    const hiddenInput = document.querySelector('input[name="facilityId"]');
                    if (hiddenInput) {
                        facilityId = parseInt(hiddenInput.value);
                    }
                }
                
                // 4. ë°ì´í„° ì†ì„±ì—ì„œ ì¶”ì¶œ
                if (!facilityId) {
                    const container = document.querySelector('[data-facility-id]');
                    if (container) {
                        facilityId = parseInt(container.dataset.facilityId);
                    }
                }
                
            } catch (error) {
                logger.error('ì‹œì„¤ ID ì¶”ì¶œ ì¤‘ ì˜¤ë¥˜:', error);
            }
            
            return facilityId;
        },
        
        /**
         * íŒŒì¼ í¬ê¸° í¬ë§·íŒ…
         * @param {number} bytes - ë°”ì´íŠ¸
         * @returns {string} í¬ë§·ëœ í¬ê¸°
         */
        formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        },
        
        /**
         * íŒŒì¼ ìœ í˜• ê²€ì¦
         * @param {File} file - ê²€ì¦í•  íŒŒì¼
         * @returns {boolean} ìœ íš¨í•œ íŒŒì¼ì¸ì§€ ì—¬ë¶€
         */
        validateFileType(file) {
            return CONSTANTS.ALLOWED_TYPES.includes(file.type);
        },
        
        /**
         * íŒŒì¼ í¬ê¸° ê²€ì¦
         * @param {File} file - ê²€ì¦í•  íŒŒì¼
         * @returns {boolean} ìœ íš¨í•œ í¬ê¸°ì¸ì§€ ì—¬ë¶€
         */
        validateFileSize(file) {
            return file.size <= CONSTANTS.MAX_FILE_SIZE;
        },
        
        /**
         * ê³ ìœ  ID ìƒì„±
         * @returns {string} ê³ ìœ  ID
         */
        generateUniqueId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        },
        
        /**
         * ë””ë°”ìš´ìŠ¤ í•¨ìˆ˜
         * @param {Function} func - ì‹¤í–‰í•  í•¨ìˆ˜
         * @param {number} wait - ëŒ€ê¸° ì‹œê°„ (ms)
         * @returns {Function} ë””ë°”ìš´ìŠ¤ëœ í•¨ìˆ˜
         */
        debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        },
        
        /**
         * ìŠ¤ë¡œí‹€ í•¨ìˆ˜
         * @param {Function} func - ì‹¤í–‰í•  í•¨ìˆ˜
         * @param {number} limit - ì œí•œ ì‹œê°„ (ms)
         * @returns {Function} ìŠ¤ë¡œí‹€ëœ í•¨ìˆ˜
         */
        throttle(func, limit) {
            let inThrottle;
            return function(...args) {
                if (!inThrottle) {
                    func.apply(this, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            };
        }
    };
    
    // ================================================
    // ì´ˆê¸°í™” í•¨ìˆ˜
    // ================================================
    
    const core = {
        /**
         * í•µì‹¬ ëª¨ë“ˆ ì´ˆê¸°í™”
         * @param {Object} options - ì´ˆê¸°í™” ì˜µì…˜
         * @returns {Promise<boolean>} ì´ˆê¸°í™” ì„±ê³µ ì—¬ë¶€
         */
        async initialize(options = {}) {
            if (globalState.isInitialized) {
                logger.warn('ì´ë¯¸ ì´ˆê¸°í™”ë¨ - ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€');
                return true;
            }
            
            logger.log('í•µì‹¬ ëª¨ë“ˆ ì´ˆê¸°í™” ì‹œì‘');
            
            try {
                // ì„¤ì • ë³‘í•©
                if (options.settings) {
                    Object.assign(globalState.settings, options.settings);
                }
                
                // ì‹œì„¤ ID ì¶”ì¶œ
                const facilityId = utils.extractFacilityId();
                if (!facilityId) {
                    throw new Error('ì‹œì„¤ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                // ë¸Œë¼ìš°ì € ì§€ì› ì²´í¬
                await browserSupport.checkSupport();
                
                // ìƒíƒœ ì—…ë°ì´íŠ¸
                stateManager.updateState({
                    isInitialized: true,
                    facilityId: facilityId,
                    status: CONSTANTS.STATUS.IDLE
                });
                
                // ì´ˆê¸°í™” ì™„ë£Œ ì´ë²¤íŠ¸ ë°œìƒ
                eventSystem.emit(CONSTANTS.EVENTS.INITIALIZED, {
                    facilityId,
                    settings: globalState.settings,
                    browserSupport: globalState.browserSupport
                });
                
                logger.success('í•µì‹¬ ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ', {
                    facilityId,
                    version: CONSTANTS.VERSION
                });
                
                return true;
                
            } catch (error) {
                stateManager.addError('í•µì‹¬ ëª¨ë“ˆ ì´ˆê¸°í™” ì‹¤íŒ¨', error);
                return false;
            }
        },
        
        /**
         * í•µì‹¬ ëª¨ë“ˆ ì¢…ë£Œ
         */
        destroy() {
            logger.log('í•µì‹¬ ëª¨ë“ˆ ì¢…ë£Œ');
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
            eventSystem.removeAllListeners();
            
            // ìƒíƒœ ì´ˆê¸°í™”
            stateManager.resetState();
            
            logger.success('í•µì‹¬ ëª¨ë“ˆ ì¢…ë£Œ ì™„ë£Œ');
        },
        
        /**
         * ëª¨ë“ˆ ì •ë³´ ë°˜í™˜
         * @returns {Object} ëª¨ë“ˆ ì •ë³´
         */
        getInfo() {
            return {
                name: CONSTANTS.MODULE_NAME,
                version: CONSTANTS.VERSION,
                isInitialized: globalState.isInitialized,
                facilityId: globalState.facilityId,
                currentStep: globalState.currentStep,
                status: globalState.status
            };
        }
    };
    
    // ================================================
    // ëª¨ë“ˆ ë…¸ì¶œ
    // ================================================
    
    // Core ëª¨ë“ˆ API ë…¸ì¶œ
    window.FacilityImageSystem.Core = {
        // ìƒìˆ˜
        CONSTANTS,
        
        // ì‹œìŠ¤í…œ
        core,
        stateManager,
        eventSystem,
        logger,
        utils,
        browserSupport,
        
        // í¸ì˜ í•¨ìˆ˜
        initialize: core.initialize.bind(core),
        destroy: core.destroy.bind(core),
        getState: stateManager.getState.bind(stateManager),
        updateState: stateManager.updateState.bind(stateManager),
        on: eventSystem.on.bind(eventSystem),
        off: eventSystem.off.bind(eventSystem),
        emit: eventSystem.emit.bind(eventSystem)
    };
    
    // ì „ì—­ ì ‘ê·¼ì„ ìœ„í•œ ë‹¨ì¶• ì°¸ì¡°
    window.FacilityImageCore = window.FacilityImageSystem.Core;
    
    logger.log('í•µì‹¬ ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');
    
})();
````

## File: src/main/resources/static/js/facility-image-cropper-module.js
````javascript
/**
 * ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ ëª¨ë“ˆ (Cropper Module)
 * ì´ë¯¸ì§€ í¬ë¡­ ê¸°ëŠ¥ì— íŠ¹í™”ëœ ëª¨ë“ˆ
 * 
 * ì£¼ìš” ê¸°ëŠ¥:
 * - Cropper.js ê¸°ë°˜ ì´ë¯¸ì§€ í¬ë¡­
 * - 16:9 ë¹„ìœ¨ ìë™ í¬ë¡­
 * - ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°
 * - ì¤Œ ì»¨íŠ¸ë¡¤ ë° ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤
 * - í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì§€ì›
 * - í¬ë¡­ ë°ì´í„° ê²€ì¦ ë° ì €ì¥
 * - ì´ë¯¸ì§€ í’ˆì§ˆ ìµœì í™”
 * 
 * @version 1.0.0
 * @author LightCare Team
 * @requires FacilityImageCore
 * @requires Cropper.js
 */

(function() {
    'use strict';
    
    // Core ëª¨ë“ˆ ì˜ì¡´ì„± ì²´í¬
    if (!window.FacilityImageCore) {
        throw new Error('FacilityImageCore ëª¨ë“ˆì´ í•„ìš”í•©ë‹ˆë‹¤.');
    }
    
    const Core = window.FacilityImageCore;
    
    // ================================================
    // ëª¨ë“ˆ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
    // ================================================
    
    if (!window.FacilityImageSystem.Cropper) {
        window.FacilityImageSystem.Cropper = {};
    }
    
    // ================================================
    // ìƒìˆ˜ ì •ì˜
    // ================================================
    
    const CROPPER_CONSTANTS = {
        MODULE_NAME: 'FacilityImageCropper',
        VERSION: '1.0.0',
        
        // í¬ë¡­ ì„¤ì •
        ASPECT_RATIO: 16/9,
        VIEW_MODE: 1,
        CROP_BOX_MOVABLE: true,
        CROP_BOX_RESIZABLE: true,
        TOGGLEABLE: false,
        ZOOMABLE: true,
        SCALABLE: true,
        ROTATABLE: false,
        
        // ì¤Œ ì„¤ì •
        MIN_ZOOM: 0.1,
        MAX_ZOOM: 3.0,
        ZOOM_STEP: 0.1,
        ZOOM_THRESHOLD_MIN: 0.2,
        ZOOM_THRESHOLD_MAX: 2.8,
        
        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        KEYBOARD_SHORTCUTS: {
            ZOOM_IN: 'Equal',        // + í‚¤
            ZOOM_OUT: 'Minus',       // - í‚¤
            RESET: 'KeyR',           // R í‚¤
            MOVE_LEFT: 'ArrowLeft',  // â† í‚¤
            MOVE_RIGHT: 'ArrowRight',// â†’ í‚¤
            MOVE_UP: 'ArrowUp',      // â†‘ í‚¤
            MOVE_DOWN: 'ArrowDown',  // â†“ í‚¤
            SAVE: 'KeyS',            // S í‚¤ (Ctrl+S)
            NEXT: 'KeyN'             // N í‚¤ (ë‹¤ìŒ ì´ë¯¸ì§€)
        },
        
        // í¬ë¡­ í’ˆì§ˆ ì„¤ì •
        OUTPUT_OPTIONS: {
            format: 'image/jpeg',
            quality: 0.85,
            maxWidth: 1920,
            maxHeight: 1080,
            fillColor: '#ffffff'
        }
    };
    
    // ================================================
    // í¬ë¡­í¼ ìƒíƒœ ê´€ë¦¬
    // ================================================
    
    const cropperState = {
        // í¬ë¡­í¼ ì¸ìŠ¤í„´ìŠ¤
        instance: null,
        
        // í˜„ì¬ ì´ë¯¸ì§€ ì •ë³´
        currentImage: null,
        currentImageIndex: 0,
        
        // í¬ë¡­ ë°ì´í„°
        cropData: null,
        
        // UI ìš”ì†Œ
        elements: {
            container: null,
            image: null,
            canvas: null,
            zoomIndicator: null,
            zoomLevel: null,
            controls: {}
        },
        
        // ìƒíƒœ í”Œë˜ê·¸
        isInitialized: false,
        isCropping: false,
        isProcessing: false,
        
        // ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ìœ í‹¸ë¦¬í‹°
        smartScroll: null,
        
        // ì„¤ì •
        settings: {
            aspectRatio: CROPPER_CONSTANTS.ASPECT_RATIO,
            viewMode: CROPPER_CONSTANTS.VIEW_MODE,
            ...CROPPER_CONSTANTS.OUTPUT_OPTIONS
        }
    };
    
    // ================================================
    // DOM ìš”ì†Œ ê´€ë¦¬
    // ================================================
    
    const domManager = {
        /**
         * DOM ìš”ì†Œ ì´ˆê¸°í™”
         * @returns {boolean} ì´ˆê¸°í™” ì„±ê³µ ì—¬ë¶€
         */
        initializeElements() {
            const elements = {
                container: document.querySelector('.crop-image-container, #cropImageContainer'),
                image: document.querySelector('#cropImage'),
                canvas: document.querySelector('#previewCanvas'),
                zoomIndicator: document.querySelector('#zoomIndicator'),
                zoomLevel: document.querySelector('#zoomLevel'),
                controls: {
                    zoomIn: document.querySelector('#zoomInBtn, .zoom-in-btn'),
                    zoomOut: document.querySelector('#zoomOutBtn, .zoom-out-btn'),
                    reset: document.querySelector('#resetZoomBtn, .reset-btn'),
                    save: document.querySelector('#saveCurrentAndGoNext, .save-btn'),
                    next: document.querySelector('#nextImageBtn, .next-btn'),
                    prev: document.querySelector('#prevImageBtn, .prev-btn')
                }
            };
            
            cropperState.elements = elements;
            
            // í•„ìˆ˜ ìš”ì†Œ ì²´í¬
            if (!elements.image) {
                Core.logger.error('í¬ë¡­ ì´ë¯¸ì§€ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return false;
            }
            
            // ë™ì  ìš”ì†Œ ìƒì„±
            this.createMissingElements();
            
            Core.logger.log('DOM ìš”ì†Œ ì´ˆê¸°í™” ì™„ë£Œ', {
                hasContainer: !!elements.container,
                hasImage: !!elements.image,
                hasCanvas: !!elements.canvas
            });
            
            return true;
        },
        
        /**
         * ëˆ„ë½ëœ ìš”ì†Œ ë™ì  ìƒì„±
         */
        createMissingElements() {
            const elements = cropperState.elements;
            
            // ì¤Œ í‘œì‹œê¸° ìƒì„±
            if (!elements.zoomIndicator) {
                elements.zoomIndicator = this.createZoomIndicator();
            }
            
            // ë¯¸ë¦¬ë³´ê¸° ìº”ë²„ìŠ¤ ìƒì„±
            if (!elements.canvas) {
                elements.canvas = this.createPreviewCanvas();
            }
            
            // ì»¨íŠ¸ë¡¤ ë²„íŠ¼ ìƒì„±
            this.createMissingControls();
        },
        
        /**
         * ì¤Œ í‘œì‹œê¸° ìƒì„±
         * @returns {HTMLElement} ì¤Œ í‘œì‹œê¸° ìš”ì†Œ
         */
        createZoomIndicator() {
            const indicator = document.createElement('div');
            indicator.id = 'zoomIndicator';
            indicator.className = 'zoom-indicator position-fixed';
            indicator.style.cssText = `
                top: 20px; 
                right: 20px; 
                z-index: 1000; 
                background: rgba(0,0,0,0.8); 
                color: white; 
                padding: 8px 12px; 
                border-radius: 6px; 
                font-size: 12px;
                display: none;
                transition: opacity 0.3s ease;
            `;
            
            indicator.innerHTML = `
                <i class="fas fa-search me-1"></i>
                <span id="zoomLevel">100%</span>
                <span id="zoomStatus" class="ms-2"></span>
            `;
            
            document.body.appendChild(indicator);
            cropperState.elements.zoomLevel = indicator.querySelector('#zoomLevel');
            
            return indicator;
        },
        
        /**
         * ë¯¸ë¦¬ë³´ê¸° ìº”ë²„ìŠ¤ ìƒì„±
         * @returns {HTMLCanvasElement} ìº”ë²„ìŠ¤ ìš”ì†Œ
         */
        createPreviewCanvas() {
            const canvas = document.createElement('canvas');
            canvas.id = 'previewCanvas';
            canvas.width = 320;
            canvas.height = 180;
            canvas.style.cssText = `
                width: 100%; 
                height: 100%; 
                border: 1px solid #dee2e6; 
                border-radius: 4px;
                background: #f8f9fa;
            `;
            
            // ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ì°¾ê¸°
            const previewContainer = document.querySelector('.crop-preview-panel, .preview-container');
            if (previewContainer) {
                previewContainer.appendChild(canvas);
            }
            
            return canvas;
        },
        
        /**
         * ëˆ„ë½ëœ ì»¨íŠ¸ë¡¤ ë²„íŠ¼ ìƒì„±
         */
        createMissingControls() {
            const controls = cropperState.elements.controls;
            
            // ì¤Œ ì»¨íŠ¸ë¡¤ì´ ì—†ëŠ” ê²½ìš° ìƒì„±
            if (!controls.zoomIn || !controls.zoomOut || !controls.reset) {
                this.createZoomControls();
            }
        },
        
        /**
         * ì¤Œ ì»¨íŠ¸ë¡¤ ìƒì„±
         */
        createZoomControls() {
            const controlsHtml = `
                <div class="crop-controls mt-3">
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-outline-secondary btn-sm" id="zoomInBtn">
                            <i class="fas fa-search-plus me-1"></i>í™•ëŒ€
                        </button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" id="zoomOutBtn">
                            <i class="fas fa-search-minus me-1"></i>ì¶•ì†Œ
                        </button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" id="resetZoomBtn">
                            <i class="fas fa-undo me-1"></i>ì´ˆê¸°í™”
                        </button>
                    </div>
                </div>
            `;
            
            const container = cropperState.elements.container;
            if (container) {
                container.insertAdjacentHTML('beforeend', controlsHtml);
                
                // ì°¸ì¡° ì—…ë°ì´íŠ¸
                const controls = cropperState.elements.controls;
                controls.zoomIn = document.getElementById('zoomInBtn');
                controls.zoomOut = document.getElementById('zoomOutBtn');
                controls.reset = document.getElementById('resetZoomBtn');
            }
        }
    };
    
    // ================================================
    // í¬ë¡­í¼ ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬
    // ================================================
    
    const cropperInstance = {
        /**
         * í¬ë¡­í¼ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
         * @param {HTMLImageElement} imageElement - ì´ë¯¸ì§€ ìš”ì†Œ
         * @param {Object} options - í¬ë¡­í¼ ì˜µì…˜
         * @returns {Object} í¬ë¡­í¼ ì¸ìŠ¤í„´ìŠ¤
         */
        create(imageElement, options = {}) {
            if (!imageElement) {
                throw new Error('ì´ë¯¸ì§€ ìš”ì†Œê°€ í•„ìš”í•©ë‹ˆë‹¤.');
            }
            
            const defaultOptions = {
                aspectRatio: cropperState.settings.aspectRatio,
                viewMode: CROPPER_CONSTANTS.VIEW_MODE,
                dragMode: 'move',
                cropBoxMovable: CROPPER_CONSTANTS.CROP_BOX_MOVABLE,
                cropBoxResizable: CROPPER_CONSTANTS.CROP_BOX_RESIZABLE,
                toggleDragModeOnDblclick: false,
                zoomable: CROPPER_CONSTANTS.ZOOMABLE,
                scalable: CROPPER_CONSTANTS.SCALABLE,
                rotatable: CROPPER_CONSTANTS.ROTATABLE,
                checkOrientation: false,
                modal: true,
                guides: true,
                center: true,
                highlight: true,
                background: true,
                autoCrop: true,
                autoCropArea: 0.8,
                movable: true,
                responsive: true,
                restore: true,
                checkCrossOrigin: true,
                minContainerWidth: 320,
                minContainerHeight: 180,
                minCanvasWidth: 0,
                minCanvasHeight: 0,
                minCropBoxWidth: 0,
                minCropBoxHeight: 0,
                
                // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
                ready: this.onReady.bind(this),
                cropstart: this.onCropStart.bind(this),
                cropmove: this.onCropMove.bind(this),
                cropend: this.onCropEnd.bind(this),
                crop: this.onCrop.bind(this),
                zoom: this.onZoom.bind(this)
            };
            
            const cropperOptions = { ...defaultOptions, ...options };
            
            try {
                // ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ ì œê±°
                this.destroy();
                
                // ìƒˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
                cropperState.instance = new Cropper(imageElement, cropperOptions);
                
                Core.logger.log('í¬ë¡­í¼ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì™„ë£Œ');
                return cropperState.instance;
                
            } catch (error) {
                Core.logger.error('í¬ë¡­í¼ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹¤íŒ¨:', error);
                throw error;
            }
        },
        
        /**
         * í¬ë¡­í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê±°
         */
        destroy() {
            if (cropperState.instance) {
                cropperState.instance.destroy();
                cropperState.instance = null;
                Core.logger.log('í¬ë¡­í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê±° ì™„ë£Œ');
            }
        },
        
        /**
         * í¬ë¡­í¼ ì¤€ë¹„ ì™„ë£Œ ì´ë²¤íŠ¸
         */
        onReady() {
            cropperState.isInitialized = true;
            
            // ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ì´ˆê¸°í™”
            if (window.SmartScrollUtility) {
                cropperState.smartScroll = new SmartScrollUtility(cropperState.instance);
            }
            
            // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
            this.updatePreview();
            
            Core.emit(Core.CONSTANTS.EVENTS.SUCCESS, {
                type: 'cropper_ready',
                message: 'í¬ë¡­í¼ ì¤€ë¹„ ì™„ë£Œ'
            });
            
            Core.logger.success('í¬ë¡­í¼ ì¤€ë¹„ ì™„ë£Œ');
        },
        
        /**
         * í¬ë¡­ ì‹œì‘ ì´ë²¤íŠ¸
         */
        onCropStart() {
            cropperState.isCropping = true;
            this.showZoomIndicator();
        },
        
        /**
         * í¬ë¡­ ì´ë™ ì´ë²¤íŠ¸
         */
        onCropMove() {
            this.updatePreview();
        },
        
        /**
         * í¬ë¡­ ì¢…ë£Œ ì´ë²¤íŠ¸
         */
        onCropEnd() {
            cropperState.isCropping = false;
            this.hideZoomIndicator();
            this.updatePreview();
        },
        
        /**
         * í¬ë¡­ ë°ì´í„° ë³€ê²½ ì´ë²¤íŠ¸
         * @param {Object} event - í¬ë¡­ ì´ë²¤íŠ¸
         */
        onCrop(event) {
            cropperState.cropData = event.detail;
            this.updatePreview();
        },
        
        /**
         * ì¤Œ ë³€ê²½ ì´ë²¤íŠ¸
         * @param {Object} event - ì¤Œ ì´ë²¤íŠ¸
         */
        onZoom(event) {
            const ratio = event.detail.ratio;
            this.updateZoomIndicator(ratio);
            this.updatePreview();
        },
        
        /**
         * ì¤Œ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
         * @param {number} ratio - ì¤Œ ë¹„ìœ¨
         */
        updateZoomIndicator(ratio) {
            const zoomLevel = cropperState.elements.zoomLevel;
            if (zoomLevel) {
                zoomLevel.textContent = Math.round(ratio * 100) + '%';
            }
            
            this.showZoomIndicator();
        },
        
        /**
         * ì¤Œ í‘œì‹œê¸° í‘œì‹œ
         */
        showZoomIndicator() {
            const indicator = cropperState.elements.zoomIndicator;
            if (indicator) {
                indicator.style.display = 'block';
                indicator.style.opacity = '1';
                
                // 3ì´ˆ í›„ ìë™ ìˆ¨ê¹€
                clearTimeout(this.zoomIndicatorTimeout);
                this.zoomIndicatorTimeout = setTimeout(() => {
                    this.hideZoomIndicator();
                }, 3000);
            }
        },
        
        /**
         * ì¤Œ í‘œì‹œê¸° ìˆ¨ê¹€
         */
        hideZoomIndicator() {
            const indicator = cropperState.elements.zoomIndicator;
            if (indicator) {
                indicator.style.opacity = '0';
                setTimeout(() => {
                    indicator.style.display = 'none';
                }, 300);
            }
        },
        
        /**
         * ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
         */
        updatePreview() {
            if (!cropperState.instance || !cropperState.elements.canvas) return;
            
            try {
                const canvas = cropperState.elements.canvas;
                const croppedCanvas = cropperState.instance.getCroppedCanvas({
                    width: canvas.width,
                    height: canvas.height,
                    fillColor: cropperState.settings.fillColor
                });
                
                if (croppedCanvas) {
                    const ctx = canvas.getContext('2d');
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.drawImage(croppedCanvas, 0, 0, canvas.width, canvas.height);
                }
                
            } catch (error) {
                Core.logger.error('ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
            }
        }
    };
    
    // ================================================
    // í¬ë¡­ ì»¨íŠ¸ë¡¤ ê´€ë¦¬
    // ================================================
    
    const cropperControls = {
        /**
         * ì»¨íŠ¸ë¡¤ ì´ë²¤íŠ¸ ì„¤ì •
         */
        setupControls() {
            const controls = cropperState.elements.controls;
            
            // ì¤Œ ì»¨íŠ¸ë¡¤
            if (controls.zoomIn) {
                controls.zoomIn.addEventListener('click', () => this.zoomIn());
            }
            if (controls.zoomOut) {
                controls.zoomOut.addEventListener('click', () => this.zoomOut());
            }
            if (controls.reset) {
                controls.reset.addEventListener('click', () => this.reset());
            }
            
            // ë„¤ë¹„ê²Œì´ì…˜ ì»¨íŠ¸ë¡¤
            if (controls.next) {
                controls.next.addEventListener('click', () => this.nextImage());
            }
            if (controls.prev) {
                controls.prev.addEventListener('click', () => this.prevImage());
            }
            
            // ì €ì¥ ì»¨íŠ¸ë¡¤
            if (controls.save) {
                controls.save.addEventListener('click', () => this.saveCrop());
            }
            
            // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
            this.setupKeyboardShortcuts();
            
            Core.logger.log('í¬ë¡­ ì»¨íŠ¸ë¡¤ ì„¤ì • ì™„ë£Œ');
        },
        
        /**
         * í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì„¤ì •
         */
        setupKeyboardShortcuts() {
            document.addEventListener('keydown', (event) => {
                if (!cropperState.isInitialized) return;
                
                // í…ìŠ¤íŠ¸ ì…ë ¥ ì¤‘ì¼ ë•ŒëŠ” ë¬´ì‹œ
                if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {
                    return;
                }
                
                const shortcuts = CROPPER_CONSTANTS.KEYBOARD_SHORTCUTS;
                
                switch (event.code) {
                    case shortcuts.ZOOM_IN:
                        event.preventDefault();
                        this.zoomIn();
                        break;
                    case shortcuts.ZOOM_OUT:
                        event.preventDefault();
                        this.zoomOut();
                        break;
                    case shortcuts.RESET:
                        event.preventDefault();
                        this.reset();
                        break;
                    case shortcuts.MOVE_LEFT:
                        event.preventDefault();
                        this.moveLeft();
                        break;
                    case shortcuts.MOVE_RIGHT:
                        event.preventDefault();
                        this.moveRight();
                        break;
                    case shortcuts.MOVE_UP:
                        event.preventDefault();
                        this.moveUp();
                        break;
                    case shortcuts.MOVE_DOWN:
                        event.preventDefault();
                        this.moveDown();
                        break;
                    case shortcuts.SAVE:
                        if (event.ctrlKey) {
                            event.preventDefault();
                            this.saveCrop();
                        }
                        break;
                    case shortcuts.NEXT:
                        event.preventDefault();
                        this.nextImage();
                        break;
                }
            });
        },
        
        /**
         * í™•ëŒ€
         */
        zoomIn() {
            if (cropperState.instance) {
                cropperState.instance.zoom(CROPPER_CONSTANTS.ZOOM_STEP);
                Core.logger.log('ì´ë¯¸ì§€ í™•ëŒ€');
            }
        },
        
        /**
         * ì¶•ì†Œ
         */
        zoomOut() {
            if (cropperState.instance) {
                cropperState.instance.zoom(-CROPPER_CONSTANTS.ZOOM_STEP);
                Core.logger.log('ì´ë¯¸ì§€ ì¶•ì†Œ');
            }
        },
        
        /**
         * ì´ˆê¸°í™”
         */
        reset() {
            if (cropperState.instance) {
                cropperState.instance.reset();
                Core.logger.log('í¬ë¡­í¼ ì´ˆê¸°í™”');
            }
        },
        
        /**
         * ì™¼ìª½ ì´ë™
         */
        moveLeft() {
            if (cropperState.instance) {
                cropperState.instance.move(-10, 0);
            }
        },
        
        /**
         * ì˜¤ë¥¸ìª½ ì´ë™
         */
        moveRight() {
            if (cropperState.instance) {
                cropperState.instance.move(10, 0);
            }
        },
        
        /**
         * ìœ„ìª½ ì´ë™
         */
        moveUp() {
            if (cropperState.instance) {
                cropperState.instance.move(0, -10);
            }
        },
        
        /**
         * ì•„ë˜ìª½ ì´ë™
         */
        moveDown() {
            if (cropperState.instance) {
                cropperState.instance.move(0, 10);
            }
        },
        
        /**
         * ë‹¤ìŒ ì´ë¯¸ì§€
         */
        nextImage() {
            Core.emit('nextImage');
        },
        
        /**
         * ì´ì „ ì´ë¯¸ì§€
         */
        prevImage() {
            Core.emit('prevImage');
        },
        
        /**
         * í¬ë¡­ ì €ì¥
         */
        saveCrop() {
            if (!cropperState.instance) return;
            
            try {
                const croppedCanvas = cropperState.instance.getCroppedCanvas({
                    width: cropperState.settings.maxWidth,
                    height: cropperState.settings.maxHeight,
                    fillColor: cropperState.settings.fillColor
                });
                
                if (croppedCanvas) {
                    croppedCanvas.toBlob((blob) => {
                        Core.emit('imageCropped', {
                            blob: blob,
                            index: cropperState.currentImageIndex,
                            cropData: cropperState.cropData
                        });
                    }, cropperState.settings.format, cropperState.settings.quality);
                }
                
            } catch (error) {
                Core.logger.error('í¬ë¡­ ì €ì¥ ì‹¤íŒ¨:', error);
            }
        }
    };
    
    // ================================================
    // ë©”ì¸ í¬ë¡­í¼ ê°ì²´
    // ================================================
    
    const cropper = {
        /**
         * í¬ë¡­í¼ ëª¨ë“ˆ ì´ˆê¸°í™”
         * @param {Object} options - ì´ˆê¸°í™” ì˜µì…˜
         * @returns {Promise<boolean>} ì´ˆê¸°í™” ì„±ê³µ ì—¬ë¶€
         */
        async initialize(options = {}) {
            if (cropperState.isInitialized) {
                Core.logger.warn('í¬ë¡­í¼ ëª¨ë“ˆì´ ì´ë¯¸ ì´ˆê¸°í™”ë¨');
                return true;
            }
            
            Core.logger.log('í¬ë¡­í¼ ëª¨ë“ˆ ì´ˆê¸°í™” ì‹œì‘');
            
            try {
                // ì„¤ì • ë³‘í•©
                if (options.settings) {
                    Object.assign(cropperState.settings, options.settings);
                }
                
                // DOM ìš”ì†Œ ì´ˆê¸°í™”
                if (!domManager.initializeElements()) {
                    throw new Error('DOM ìš”ì†Œ ì´ˆê¸°í™” ì‹¤íŒ¨');
                }
                
                // ì»¨íŠ¸ë¡¤ ì„¤ì •
                cropperControls.setupControls();
                
                Core.logger.success('í¬ë¡­í¼ ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                return true;
                
            } catch (error) {
                Core.logger.error('í¬ë¡­í¼ ëª¨ë“ˆ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                return false;
            }
        },
        
        /**
         * ì´ë¯¸ì§€ ë¡œë“œ
         * @param {string|File} image - ì´ë¯¸ì§€ URL ë˜ëŠ” íŒŒì¼
         * @param {number} index - ì´ë¯¸ì§€ ì¸ë±ìŠ¤
         * @returns {Promise<boolean>} ë¡œë“œ ì„±ê³µ ì—¬ë¶€
         */
        async loadImage(image, index = 0) {
            if (!cropperState.elements.image) {
                throw new Error('ì´ë¯¸ì§€ ìš”ì†Œê°€ ì—†ìŠµë‹ˆë‹¤.');
            }
            
            Core.logger.log(`ì´ë¯¸ì§€ ë¡œë“œ ì‹œì‘: ${index}`);
            
            try {
                cropperState.currentImageIndex = index;
                cropperState.isProcessing = true;
                
                // ì´ë¯¸ì§€ ì†ŒìŠ¤ ì„¤ì •
                if (typeof image === 'string') {
                    cropperState.elements.image.src = image;
                } else if (image instanceof File) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        cropperState.elements.image.src = e.target.result;
                    };
                    reader.readAsDataURL(image);
                } else {
                    throw new Error('ì§€ì›í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ í˜•ì‹ì…ë‹ˆë‹¤.');
                }
                
                // ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ ëŒ€ê¸°
                await new Promise((resolve, reject) => {
                    cropperState.elements.image.onload = () => {
                        // í¬ë¡­í¼ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
                        cropperInstance.create(cropperState.elements.image);
                        cropperState.currentImage = image;
                        cropperState.isProcessing = false;
                        resolve();
                    };
                    
                    cropperState.elements.image.onerror = () => {
                        cropperState.isProcessing = false;
                        reject(new Error('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨'));
                    };
                });
                
                Core.logger.success(`ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ: ${index}`);
                return true;
                
            } catch (error) {
                cropperState.isProcessing = false;
                Core.logger.error('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:', error);
                throw error;
            }
        },
        
        /**
         * í¬ë¡­ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
         * @returns {Object} í¬ë¡­ ë°ì´í„°
         */
        getCropData() {
            if (!cropperState.instance) {
                return null;
            }
            
            return {
                cropBoxData: cropperState.instance.getCropBoxData(),
                canvasData: cropperState.instance.getCanvasData(),
                imageData: cropperState.instance.getImageData()
            };
        },
        
        /**
         * í¬ë¡­ëœ ìº”ë²„ìŠ¤ ê°€ì ¸ì˜¤ê¸°
         * @param {Object} options - ìº”ë²„ìŠ¤ ì˜µì…˜
         * @returns {HTMLCanvasElement} í¬ë¡­ëœ ìº”ë²„ìŠ¤
         */
        getCroppedCanvas(options = {}) {
            if (!cropperState.instance) {
                return null;
            }
            
            const defaultOptions = {
                width: cropperState.settings.maxWidth,
                height: cropperState.settings.maxHeight,
                fillColor: cropperState.settings.fillColor
            };
            
            return cropperState.instance.getCroppedCanvas({ ...defaultOptions, ...options });
        },
        
        /**
         * í¬ë¡­ëœ ì´ë¯¸ì§€ Blob ê°€ì ¸ì˜¤ê¸°
         * @param {Object} options - ì´ë¯¸ì§€ ì˜µì…˜
         * @returns {Promise<Blob>} í¬ë¡­ëœ ì´ë¯¸ì§€ Blob
         */
        async getCroppedBlob(options = {}) {
            const canvas = this.getCroppedCanvas(options);
            if (!canvas) {
                throw new Error('í¬ë¡­ëœ ìº”ë²„ìŠ¤ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
            
            return new Promise((resolve, reject) => {
                canvas.toBlob((blob) => {
                    if (blob) {
                        resolve(blob);
                    } else {
                        reject(new Error('Blob ìƒì„± ì‹¤íŒ¨'));
                    }
                }, cropperState.settings.format, cropperState.settings.quality);
            });
        },
        
        /**
         * í¬ë¡­í¼ ì œê±°
         */
        destroy() {
            cropperInstance.destroy();
            
            if (cropperState.smartScroll) {
                cropperState.smartScroll.destroy();
                cropperState.smartScroll = null;
            }
            
            // ìƒíƒœ ì´ˆê¸°í™”
            cropperState.isInitialized = false;
            cropperState.currentImage = null;
            cropperState.currentImageIndex = 0;
            cropperState.cropData = null;
            cropperState.isCropping = false;
            cropperState.isProcessing = false;
            
            Core.logger.log('í¬ë¡­í¼ ëª¨ë“ˆ ì œê±° ì™„ë£Œ');
        },
        
        /**
         * ëª¨ë“ˆ ì •ë³´ ë°˜í™˜
         * @returns {Object} ëª¨ë“ˆ ì •ë³´
         */
        getInfo() {
            return {
                name: CROPPER_CONSTANTS.MODULE_NAME,
                version: CROPPER_CONSTANTS.VERSION,
                isInitialized: cropperState.isInitialized,
                currentImageIndex: cropperState.currentImageIndex,
                isProcessing: cropperState.isProcessing,
                settings: cropperState.settings
            };
        }
    };
    
    // ================================================
    // ëª¨ë“ˆ ë…¸ì¶œ
    // ================================================
    
    // Cropper ëª¨ë“ˆ API ë…¸ì¶œ
    window.FacilityImageSystem.Cropper = {
        // ìƒìˆ˜
        CONSTANTS: CROPPER_CONSTANTS,
        
        // ë©”ì¸ ê°ì²´
        cropper,
        
        // ë‚´ë¶€ ê°ì²´ (ê³ ê¸‰ ì‚¬ìš©ììš©)
        cropperInstance,
        cropperControls,
        domManager,
        
        // ìƒíƒœ (ì½ê¸° ì „ìš©)
        getState: () => ({ ...cropperState }),
        
        // í¸ì˜ í•¨ìˆ˜
        initialize: cropper.initialize.bind(cropper),
        loadImage: cropper.loadImage.bind(cropper),
        getCropData: cropper.getCropData.bind(cropper),
        getCroppedCanvas: cropper.getCroppedCanvas.bind(cropper),
        getCroppedBlob: cropper.getCroppedBlob.bind(cropper),
        destroy: cropper.destroy.bind(cropper)
    };
    
    // ì „ì—­ ì ‘ê·¼ì„ ìœ„í•œ ë‹¨ì¶• ì°¸ì¡°
    window.FacilityImageCropper = window.FacilityImageSystem.Cropper;
    
    Core.logger.log('í¬ë¡­í¼ ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');
    
})();
````

## File: src/main/resources/static/js/facility-image-data-module.js
````javascript
/**
 * ì‹œì„¤ ì´ë¯¸ì§€ ë°ì´í„° ëª¨ë“ˆ (Data Module)
 * ì„œë²„ í†µì‹ , ë°ì´í„° ê´€ë¦¬, API í˜¸ì¶œ ì „ìš© ëª¨ë“ˆ
 * 
 * @version 1.0.0
 * @author LightCare Team
 * @requires FacilityImageCore
 */

(function() {
    'use strict';
    
    if (!window.FacilityImageCore) {
        throw new Error('FacilityImageCore ëª¨ë“ˆì´ í•„ìš”í•©ë‹ˆë‹¤.');
    }
    
    const Core = window.FacilityImageCore;
    
    if (!window.FacilityImageSystem.Data) {
        window.FacilityImageSystem.Data = {};
    }
    
    // ================================================
    // ìƒìˆ˜ ì •ì˜
    // ================================================
    
    const DATA_CONSTANTS = {
        MODULE_NAME: 'FacilityImageData',
        VERSION: '1.0.0',
        
        API_ENDPOINTS: {
            UPLOAD: '/facility/facility-images/upload',
            DELETE: '/facility/facility-images/delete',
            REORDER: '/facility/facility-images/reorder',
            GET_IMAGES: '/facility/facility-images',
            SET_MAIN: '/facility/facility-images/main'
        },
        
        REQUEST_TIMEOUT: 30000,
        RETRY_ATTEMPTS: 3,
        RETRY_DELAY: 1000
    };
    
    // ================================================
    // ë°ì´í„° ìƒíƒœ ê´€ë¦¬
    // ================================================
    
    const dataState = {
        isInitialized: false,
        facilityId: null,
        existingImages: [],
        uploadQueue: [],
        isUploading: false,
        uploadProgress: { current: 0, total: 0 },
        cache: new Map()
    };
    
    // ================================================
    // HTTP í´ë¼ì´ì–¸íŠ¸
    // ================================================
    
    const httpClient = {
        async request(url, options = {}) {
            const defaultOptions = {
                timeout: DATA_CONSTANTS.REQUEST_TIMEOUT,
                headers: {
                    'Content-Type': 'application/json'
                }
            };
            
            const config = { ...defaultOptions, ...options };
            
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), config.timeout);
                
                const response = await fetch(url, {
                    ...config,
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const contentType = response.headers.get('content-type');
                if (contentType && contentType.includes('application/json')) {
                    return await response.json();
                } else {
                    return await response.text();
                }
                
            } catch (error) {
                Core.logger.error('HTTP ìš”ì²­ ì‹¤íŒ¨:', error);
                throw error;
            }
        },
        
        async get(url, params = {}) {
            const urlParams = new URLSearchParams(params);
            const fullUrl = urlParams.toString() ? `${url}?${urlParams}` : url;
            return this.request(fullUrl, { method: 'GET' });
        },
        
        async post(url, data) {
            const options = {
                method: 'POST',
                body: data instanceof FormData ? data : JSON.stringify(data)
            };
            
            if (!(data instanceof FormData)) {
                options.headers = { 'Content-Type': 'application/json' };
            }
            
            return this.request(url, options);
        },
        
        async put(url, data) {
            return this.request(url, {
                method: 'PUT',
                body: JSON.stringify(data),
                headers: { 'Content-Type': 'application/json' }
            });
        },
        
        async delete(url) {
            return this.request(url, { method: 'DELETE' });
        }
    };
    
    // ================================================
    // ì´ë¯¸ì§€ ë°ì´í„° ê´€ë¦¬
    // ================================================
    
    const imageDataManager = {
        async loadExistingImages(facilityId) {
            try {
                const images = await httpClient.get(`${DATA_CONSTANTS.API_ENDPOINTS.GET_IMAGES}/${facilityId}`);
                dataState.existingImages = Array.isArray(images) ? images : [];
                
                Core.logger.log('ê¸°ì¡´ ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ:', dataState.existingImages.length);
                return dataState.existingImages;
                
            } catch (error) {
                Core.logger.error('ê¸°ì¡´ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:', error);
                dataState.existingImages = [];
                return [];
            }
        },
        
        async uploadImages(facilityId, files) {
            if (!files || files.length === 0) {
                throw new Error('ì—…ë¡œë“œí•  íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.');
            }
            
            dataState.isUploading = true;
            dataState.uploadProgress = { current: 0, total: files.length };
            
            try {
                const formData = new FormData();
                formData.append('facilityId', facilityId);
                
                files.forEach((fileData, index) => {
                    const blob = fileData.compressedBlob || fileData.file;
                    const fileName = fileData.seoFileName || fileData.file.name;
                    formData.append('images', blob, fileName);
                    
                    if (fileData.altText) {
                        formData.append(`altText_${index}`, fileData.altText);
                    }
                });
                
                const result = await httpClient.post(DATA_CONSTANTS.API_ENDPOINTS.UPLOAD, formData);
                
                Core.emit('uploadComplete', { result, facilityId });
                Core.logger.success('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ');
                
                return result;
                
            } catch (error) {
                Core.logger.error('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨:', error);
                throw error;
            } finally {
                dataState.isUploading = false;
            }
        },
        
        async deleteImage(imageId) {
            try {
                const result = await httpClient.delete(`${DATA_CONSTANTS.API_ENDPOINTS.DELETE}/${imageId}`);
                
                // ë¡œì»¬ ìƒíƒœ ì—…ë°ì´íŠ¸
                dataState.existingImages = dataState.existingImages.filter(img => img.id !== imageId);
                
                Core.logger.log('ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ:', imageId);
                return result;
                
            } catch (error) {
                Core.logger.error('ì´ë¯¸ì§€ ì‚­ì œ ì‹¤íŒ¨:', error);
                throw error;
            }
        },
        
        async reorderImages(facilityId, imageOrder) {
            try {
                const result = await httpClient.put(DATA_CONSTANTS.API_ENDPOINTS.REORDER, {
                    facilityId,
                    imageOrder
                });
                
                Core.logger.log('ì´ë¯¸ì§€ ìˆœì„œ ë³€ê²½ ì™„ë£Œ');
                return result;
                
            } catch (error) {
                Core.logger.error('ì´ë¯¸ì§€ ìˆœì„œ ë³€ê²½ ì‹¤íŒ¨:', error);
                throw error;
            }
        },
        
        async setMainImage(facilityId, imageId) {
            try {
                const result = await httpClient.put(DATA_CONSTANTS.API_ENDPOINTS.SET_MAIN, {
                    facilityId,
                    imageId
                });
                
                Core.logger.log('ëŒ€í‘œ ì´ë¯¸ì§€ ì„¤ì • ì™„ë£Œ:', imageId);
                return result;
                
            } catch (error) {
                Core.logger.error('ëŒ€í‘œ ì´ë¯¸ì§€ ì„¤ì • ì‹¤íŒ¨:', error);
                throw error;
            }
        }
    };
    
    // ================================================
    // ìºì‹œ ê´€ë¦¬
    // ================================================
    
    const cacheManager = {
        set(key, data, ttl = 300000) { // 5ë¶„ ê¸°ë³¸ TTL
            const cacheData = {
                data,
                timestamp: Date.now(),
                ttl
            };
            dataState.cache.set(key, cacheData);
        },
        
        get(key) {
            const cacheData = dataState.cache.get(key);
            if (!cacheData) return null;
            
            const isExpired = Date.now() - cacheData.timestamp > cacheData.ttl;
            if (isExpired) {
                dataState.cache.delete(key);
                return null;
            }
            
            return cacheData.data;
        },
        
        clear() {
            dataState.cache.clear();
        },
        
        delete(key) {
            dataState.cache.delete(key);
        }
    };
    
    // ================================================
    // ë°ì´í„° ê²€ì¦
    // ================================================
    
    const dataValidator = {
        validateImageData(imageData) {
            const errors = [];
            
            if (!imageData.file && !imageData.blob) {
                errors.push('íŒŒì¼ ë˜ëŠ” Blobì´ í•„ìš”í•©ë‹ˆë‹¤.');
            }
            
            if (imageData.altText && imageData.altText.length > 200) {
                errors.push('Alt í…ìŠ¤íŠ¸ëŠ” 200ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            }
            
            return {
                isValid: errors.length === 0,
                errors
            };
        },
        
        validateUploadData(facilityId, files) {
            const errors = [];
            
            if (!facilityId || isNaN(facilityId)) {
                errors.push('ìœ íš¨í•œ ì‹œì„¤ IDê°€ í•„ìš”í•©ë‹ˆë‹¤.');
            }
            
            if (!files || files.length === 0) {
                errors.push('ì—…ë¡œë“œí•  íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.');
            }
            
            if (files && files.length > 5) {
                errors.push('ìµœëŒ€ 5ê°œì˜ íŒŒì¼ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
            }
            
            return {
                isValid: errors.length === 0,
                errors
            };
        }
    };
    
    // ================================================
    // ë©”ì¸ ë°ì´í„° ê°ì²´
    // ================================================
    
    const data = {
        async initialize(facilityId, options = {}) {
            if (dataState.isInitialized) {
                Core.logger.warn('ë°ì´í„° ëª¨ë“ˆì´ ì´ë¯¸ ì´ˆê¸°í™”ë¨');
                return true;
            }
            
            Core.logger.log('ë°ì´í„° ëª¨ë“ˆ ì´ˆê¸°í™” ì‹œì‘');
            
            try {
                dataState.facilityId = facilityId;
                
                // ê¸°ì¡´ ì´ë¯¸ì§€ ë¡œë“œ
                await imageDataManager.loadExistingImages(facilityId);
                
                dataState.isInitialized = true;
                Core.logger.success('ë°ì´í„° ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                
                return true;
            } catch (error) {
                Core.logger.error('ë°ì´í„° ëª¨ë“ˆ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                return false;
            }
        },
        
        async uploadImages(files) {
            const validation = dataValidator.validateUploadData(dataState.facilityId, files);
            if (!validation.isValid) {
                throw new Error(validation.errors.join(', '));
            }
            
            return imageDataManager.uploadImages(dataState.facilityId, files);
        },
        
        async getImages() {
            const cacheKey = `images_${dataState.facilityId}`;
            const cached = cacheManager.get(cacheKey);
            
            if (cached) {
                return cached;
            }
            
            const images = await imageDataManager.loadExistingImages(dataState.facilityId);
            cacheManager.set(cacheKey, images);
            
            return images;
        },
        
        async deleteImage(imageId) {
            const result = await imageDataManager.deleteImage(imageId);
            
            // ìºì‹œ ë¬´íš¨í™”
            const cacheKey = `images_${dataState.facilityId}`;
            cacheManager.delete(cacheKey);
            
            return result;
        },
        
        async reorderImages(imageOrder) {
            return imageDataManager.reorderImages(dataState.facilityId, imageOrder);
        },
        
        async setMainImage(imageId) {
            return imageDataManager.setMainImage(dataState.facilityId, imageId);
        },
        
        getExistingImages() {
            return dataState.existingImages;
        },
        
        getUploadProgress() {
            return dataState.uploadProgress;
        },
        
        isUploading() {
            return dataState.isUploading;
        },
        
        clearCache() {
            cacheManager.clear();
        },
        
        destroy() {
            dataState.isInitialized = false;
            dataState.facilityId = null;
            dataState.existingImages = [];
            dataState.uploadQueue = [];
            dataState.isUploading = false;
            cacheManager.clear();
            
            Core.logger.log('ë°ì´í„° ëª¨ë“ˆ ì œê±° ì™„ë£Œ');
        },
        
        getInfo() {
            return {
                name: DATA_CONSTANTS.MODULE_NAME,
                version: DATA_CONSTANTS.VERSION,
                isInitialized: dataState.isInitialized,
                facilityId: dataState.facilityId,
                existingImagesCount: dataState.existingImages.length,
                isUploading: dataState.isUploading,
                cacheSize: dataState.cache.size
            };
        }
    };
    
    // ================================================
    // ëª¨ë“ˆ ë…¸ì¶œ
    // ================================================
    
    window.FacilityImageSystem.Data = {
        CONSTANTS: DATA_CONSTANTS,
        data,
        httpClient,
        imageDataManager,
        cacheManager,
        dataValidator,
        getState: () => ({ ...dataState }),
        initialize: data.initialize.bind(data),
        uploadImages: data.uploadImages.bind(data),
        getImages: data.getImages.bind(data),
        deleteImage: data.deleteImage.bind(data),
        reorderImages: data.reorderImages.bind(data),
        setMainImage: data.setMainImage.bind(data),
        destroy: data.destroy.bind(data)
    };
    
    window.FacilityImageData = window.FacilityImageSystem.Data;
    
    Core.logger.log('ë°ì´í„° ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');
    
})();
````

## File: src/main/resources/static/js/facility-image-dom-validator.js
````javascript
/**
 * ì‹œì„¤ ì´ë¯¸ì§€ DOM ê²€ì¦ ë° ë³µêµ¬ ì‹œìŠ¤í…œ
 * DOM ìš”ì†Œ ëˆ„ë½ ë¬¸ì œ í•´ê²°ê³¼ íƒ€ì´ë° ì´ìŠˆ ë°©ì§€
 */

console.log('ğŸ” ì‹œì„¤ ì´ë¯¸ì§€ DOM ê²€ì¦ì ë¡œë“œë¨');

// DOM ê²€ì¦ì ë„¤ì„ìŠ¤í˜ì´ìŠ¤
window.FacilityImageDOMValidator = {
    // í•„ìˆ˜ DOM ìš”ì†Œ ì •ì˜
    requiredElements: {
        // 1ë‹¨ê³„ ìš”ì†Œë“¤
        step1: {
            uploadSection: { 
                selector: '#uploadSection', 
                fallback: 'div', 
                attributes: { id: 'uploadSection', class: 'section' }
            },
            imageInput: { 
                selector: '#imageInput', 
                fallback: 'input', 
                attributes: { id: 'imageInput', type: 'file', multiple: true, accept: 'image/*' }
            },
            selectedImagesPreview: { 
                selector: '#selectedImagesPreview', 
                fallback: 'div', 
                attributes: { id: 'selectedImagesPreview', class: 'preview-container' }
            }
        },
        
        // 2ë‹¨ê³„ ìš”ì†Œë“¤ (í¬ë¡­)
        step2: {
            cropSection: { 
                selector: '#cropSection', 
                fallback: 'div', 
                attributes: { id: 'cropSection', class: 'section', style: 'display: none;' }
            },
            cropImage: { 
                selector: '#cropImage', 
                fallback: 'img', 
                attributes: { id: 'cropImage', class: 'crop-target', style: 'max-width: 100%; display: block;' }
            },
            nextAndSaveBtn: { 
                selector: '#nextAndSaveBtn', 
                fallback: 'button', 
                attributes: { id: 'nextAndSaveBtn', class: 'btn btn-primary', type: 'button' }
            },
            saveAndCompleteBtn: { 
                selector: '#saveAndCompleteBtn', 
                fallback: 'button', 
                attributes: { id: 'saveAndCompleteBtn', class: 'btn btn-success', type: 'button' }
            }
        },
        
        // 3ë‹¨ê³„ ìš”ì†Œë“¤
        step3: {
            manageSection: { 
                selector: '#manageSection', 
                fallback: 'div', 
                attributes: { id: 'manageSection', class: 'section', style: 'display: none;' }
            },
            manageImagesGrid: { 
                selector: '#manageImagesGrid', 
                fallback: 'div', 
                attributes: { id: 'manageImagesGrid', class: 'row images-grid' }
            }
        }
    },
    
    // ê²€ì¦ ê²°ê³¼
    validationResults: {
        missing: [],
        created: [],
        existing: []
    },
    
    // DOM ê²€ì¦ ë° ë³µêµ¬ ì‹¤í–‰
    validateAndRepair() {
        console.log('ğŸ”§ DOM ê²€ì¦ ë° ë³µêµ¬ ì‹œì‘');
        
        this.validationResults = { missing: [], created: [], existing: [] };
        
        Object.keys(this.requiredElements).forEach(stepName => {
            const stepElements = this.requiredElements[stepName];
            console.log(`ğŸ“‹ ${stepName} ë‹¨ê³„ ìš”ì†Œ ê²€ì¦ ì¤‘...`);
            
            Object.keys(stepElements).forEach(elementName => {
                const elementConfig = stepElements[elementName];
                this.validateElement(elementName, elementConfig, stepName);
            });
        });
        
        this.reportResults();
        return this.validationResults;
    },
    
    // ê°œë³„ ìš”ì†Œ ê²€ì¦
    validateElement(elementName, config, stepName) {
        const element = document.querySelector(config.selector);
        
        if (element) {
            this.validationResults.existing.push(`${stepName}.${elementName}`);
            console.log(`âœ… ${elementName} ìš”ì†Œ ì¡´ì¬ í™•ì¸`);
        } else {
            console.warn(`âš ï¸ ${elementName} ìš”ì†Œ ëˆ„ë½ - ìƒì„± ì‹œë„`);
            this.validationResults.missing.push(`${stepName}.${elementName}`);
            
            try {
                const createdElement = this.createElement(config);
                this.insertElement(createdElement, elementName, stepName);
                this.validationResults.created.push(`${stepName}.${elementName}`);
                console.log(`ğŸ†• ${elementName} ìš”ì†Œ ìƒì„± ì™„ë£Œ`);
            } catch (error) {
                console.error(`âŒ ${elementName} ìš”ì†Œ ìƒì„± ì‹¤íŒ¨:`, error);
            }
        }
    },
    
    // ìš”ì†Œ ìƒì„±
    createElement(config) {
        const element = document.createElement(config.fallback);
        
        // ì†ì„± ì„¤ì •
        Object.keys(config.attributes).forEach(attr => {
            if (attr === 'class') {
                element.className = config.attributes[attr];
            } else {
                element.setAttribute(attr, config.attributes[attr]);
            }
        });
        
        return element;
    },
    
    // ìš”ì†Œ ì‚½ì…
    insertElement(element, elementName, stepName) {
        let container = null;
        
        // ì ì ˆí•œ ì»¨í…Œì´ë„ˆ ì°¾ê¸°
        if (stepName === 'step1') {
            container = document.querySelector('.card-body') || document.body;
        } else if (stepName === 'step2') {
            container = document.querySelector('#cropSection') || document.querySelector('.card-body') || document.body;
            
            // cropSectionì´ ì—†ëŠ” ê²½ìš° ìƒì„±
            if (elementName === 'cropImage' && !document.querySelector('#cropSection')) {
                const cropSection = this.createElement({
                    fallback: 'div',
                    attributes: { id: 'cropSection', class: 'section crop-section', style: 'display: none;' }
                });
                
                const cardBody = document.querySelector('.card-body');
                if (cardBody) {
                    cardBody.appendChild(cropSection);
                    container = cropSection;
                }
            }
        } else if (stepName === 'step3') {
            container = document.querySelector('#manageSection') || document.querySelector('.card-body') || document.body;
        }
        
        if (container) {
            container.appendChild(element);
            console.log(`ğŸ“ ${elementName} ìš”ì†Œê°€ ${container.id || container.className}ì— ì‚½ì…ë¨`);
        } else {
            document.body.appendChild(element);
            console.warn(`âš ï¸ ${elementName} ìš”ì†Œê°€ bodyì— ì‚½ì…ë¨ (ì ì ˆí•œ ì»¨í…Œì´ë„ˆ ì—†ìŒ)`);
        }
    },
    
    // ê²€ì¦ ê²°ê³¼ ë³´ê³ 
    reportResults() {
        const { existing, missing, created } = this.validationResults;
        
        console.log('ğŸ“Š DOM ê²€ì¦ ê²°ê³¼:');
        console.log(`âœ… ê¸°ì¡´ ìš”ì†Œ: ${existing.length}ê°œ`, existing);
        console.log(`âš ï¸ ëˆ„ë½ ìš”ì†Œ: ${missing.length}ê°œ`, missing);
        console.log(`ğŸ†• ìƒì„± ìš”ì†Œ: ${created.length}ê°œ`, created);
        
        if (missing.length > 0 && created.length > 0) {
            this.showRepairNotification();
        }
    },
    
    // ë³µêµ¬ ì•Œë¦¼ í‘œì‹œ
    showRepairNotification() {
        const notification = document.createElement('div');
        notification.className = 'alert alert-info alert-dismissible fade show position-fixed';
        notification.style.cssText = 'top: 20px; left: 20px; z-index: 9999; max-width: 400px;';
        notification.innerHTML = `
            <i class="fas fa-tools me-2"></i>
            <strong>DOM ë³µêµ¬ ì™„ë£Œ</strong><br>
            ëˆ„ë½ëœ ${this.validationResults.missing.length}ê°œ ìš”ì†Œê°€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;
        
        document.body.appendChild(notification);
        
        // ìë™ ì œê±°
        setTimeout(() => {
            if (notification.parentNode) {
                notification.remove();
            }
        }, 5000);
    },
    
    // íŠ¹ì • ìš”ì†Œ ê°•ì œ ìƒì„±
    forceCreateElement(elementId, config) {
        console.log(`ğŸ”¨ ${elementId} ìš”ì†Œ ê°•ì œ ìƒì„±`);
        
        // ê¸°ì¡´ ìš”ì†Œ ì œê±°
        const existing = document.getElementById(elementId);
        if (existing) {
            existing.remove();
        }
        
        // ìƒˆ ìš”ì†Œ ìƒì„±
        const element = this.createElement(config);
        
        // ì ì ˆí•œ ìœ„ì¹˜ì— ì‚½ì…
        const container = document.querySelector('.card-body') || document.body;
        container.appendChild(element);
        
        console.log(`âœ… ${elementId} ìš”ì†Œ ê°•ì œ ìƒì„± ì™„ë£Œ`);
        return element;
    },
    
    // í¬ë¡­ ìš”ì†Œ ì „ìš© ìƒì„±
    createCropSection() {
        console.log('ğŸ¨ í¬ë¡­ ì„¹ì…˜ ìƒì„±');
        
        const cropSection = document.createElement('div');
        cropSection.id = 'cropSection';
        cropSection.className = 'section crop-section';
        cropSection.style.display = 'none';
        
        cropSection.innerHTML = `
            <div class="row">
                <div class="col-lg-8">
                    <div class="crop-container">
                        <img id="cropImage" class="crop-target" style="max-width: 100%; display: block;">
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="crop-controls">
                        <div class="mb-3">
                            <label for="seoFileName" class="form-label">íŒŒì¼ëª…</label>
                            <input type="text" class="form-control" id="seoFileName" placeholder="íŒŒì¼ëª… ì…ë ¥">
                        </div>
                        <div class="mb-3">
                            <label for="altText" class="form-label">Alt í…ìŠ¤íŠ¸</label>
                            <input type="text" class="form-control" id="altText" placeholder="ì´ë¯¸ì§€ ì„¤ëª…">
                        </div>
                        <div class="d-flex gap-2">
                            <button type="button" id="nextAndSaveBtn" class="btn btn-primary">
                                <i class="fas fa-save me-1"></i>ì €ì¥ í›„ ë‹¤ìŒ
                            </button>
                            <button type="button" id="saveAndCompleteBtn" class="btn btn-success">
                                <i class="fas fa-check me-1"></i>ì €ì¥ í›„ ì™„ë£Œ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        const container = document.querySelector('.card-body');
        if (container) {
            container.appendChild(cropSection);
            console.log('âœ… í¬ë¡­ ì„¹ì…˜ ìƒì„± ì™„ë£Œ');
            return cropSection;
        } else {
            console.error('âŒ í¬ë¡­ ì„¹ì…˜ ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            return null;
        }
    },
    
    // ì •ê¸° ê²€ì¦ (ì˜µì…˜)
    startPeriodicValidation(interval = 5000) {
        console.log(`ğŸ”„ ì •ê¸° DOM ê²€ì¦ ì‹œì‘ (${interval}ms ê°„ê²©)`);
        
        setInterval(() => {
            const missingElements = this.getMissingElements();
            if (missingElements.length > 0) {
                console.warn('âš ï¸ ì •ê¸° ê²€ì¦ì—ì„œ ëˆ„ë½ ìš”ì†Œ ë°œê²¬:', missingElements);
                this.validateAndRepair();
            }
        }, interval);
    },
    
    // ëˆ„ë½ ìš”ì†Œ í™•ì¸
    getMissingElements() {
        const missing = [];
        
        Object.keys(this.requiredElements).forEach(stepName => {
            const stepElements = this.requiredElements[stepName];
            Object.keys(stepElements).forEach(elementName => {
                const config = stepElements[elementName];
                if (!document.querySelector(config.selector)) {
                    missing.push(`${stepName}.${elementName}`);
                }
            });
        });
        
        return missing;
    }
};

// ìë™ ì‹¤í–‰
document.addEventListener('DOMContentLoaded', function() {
    // ì´ˆê¸° ê²€ì¦
    setTimeout(() => {
        window.FacilityImageDOMValidator.validateAndRepair();
    }, 100);
    
    // ì¶”ê°€ ê²€ì¦ (ë‹¤ë¥¸ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ í›„)
    setTimeout(() => {
        window.FacilityImageDOMValidator.validateAndRepair();
    }, 1000);
});

console.log('âœ… ì‹œì„¤ ì´ë¯¸ì§€ DOM ê²€ì¦ì ë¡œë“œ ì™„ë£Œ');
````

## File: src/main/resources/static/js/facility-image-event-coordinator.js
````javascript
/**
 * ì‹œì„¤ ì´ë¯¸ì§€ ì´ë²¤íŠ¸ ì½”ë””ë„¤ì´í„°
 * íŒŒì¼ ì„ íƒ ì¤‘ë³µ ì‹¤í–‰ ì™„ì „ ë°©ì§€ ë° ì´ë²¤íŠ¸ ì¡°ì •
 */

console.log('ğŸ­ ì‹œì„¤ ì´ë¯¸ì§€ ì´ë²¤íŠ¸ ì½”ë””ë„¤ì´í„° ë¡œë“œë¨');

// ì´ë²¤íŠ¸ ì½”ë””ë„¤ì´í„° ë„¤ì„ìŠ¤í˜ì´ìŠ¤
window.FacilityImageEventCoordinator = {
    // ìƒíƒœ ê´€ë¦¬
    state: {
        fileSelectionActive: false,
        lastFileSelectionTime: 0,
        eventQueue: [],
        blockedEvents: [],
        debugMode: true
    },
    
    // ì„¤ì •
    config: {
        debounceTime: 1000, // 1ì´ˆ ë””ë°”ìš´ìŠ¤
        maxQueueSize: 10,
        cleanupInterval: 5000 // 5ì´ˆë§ˆë‹¤ ì •ë¦¬
    },
    
    // ì´ˆê¸°í™”
    initialize() {
        console.log('ğŸ­ ì´ë²¤íŠ¸ ì½”ë””ë„¤ì´í„° ì´ˆê¸°í™”');
        
        // ì „ì—­ ì´ë²¤íŠ¸ ê°€ë¡œì±„ê¸°
        this.interceptGlobalEvents();
        
        // ì •ê¸° ì •ë¦¬ ì‘ì—…
        this.startCleanupTimer();
        
        // ë””ë²„ê¹… ì¸í„°í˜ì´ìŠ¤
        if (this.state.debugMode) {
            this.setupDebugInterface();
        }
        
        console.log('âœ… ì´ë²¤íŠ¸ ì½”ë””ë„¤ì´í„° ì´ˆê¸°í™” ì™„ë£Œ');
    },
    
    // íŒŒì¼ ì„ íƒ ì´ë²¤íŠ¸ ì¡°ì •
    coordinateFileSelection(source, callback) {
        const now = Date.now();
        const timeSinceLastSelection = now - this.state.lastFileSelectionTime;
        
        this.log(`ğŸ“ íŒŒì¼ ì„ íƒ ìš”ì²­: ${source}`, {
            active: this.state.fileSelectionActive,
            timeSince: timeSinceLastSelection,
            debounceTime: this.config.debounceTime
        });
        
        // ì´ë¯¸ í™œì„±í™”ë˜ì–´ ìˆëŠ” ê²½ìš°
        if (this.state.fileSelectionActive) {
            this.log('â›” íŒŒì¼ ì„ íƒì´ ì´ë¯¸ í™œì„±í™”ë¨ - ìš”ì²­ ì°¨ë‹¨', { source });
            this.state.blockedEvents.push({
                source,
                timestamp: now,
                reason: 'already_active'
            });
            return false;
        }
        
        // ë„ˆë¬´ ë¹ ë¥¸ ì—°ì† ìš”ì²­ ì°¨ë‹¨
        if (timeSinceLastSelection < this.config.debounceTime) {
            this.log('â›” ë„ˆë¬´ ë¹ ë¥¸ ì—°ì† ìš”ì²­ - ë””ë°”ìš´ìŠ¤ ì°¨ë‹¨', { 
                source, 
                timeSince: timeSinceLastSelection,
                required: this.config.debounceTime
            });
            this.state.blockedEvents.push({
                source,
                timestamp: now,
                reason: 'debounce'
            });
            return false;
        }
        
        // íŒŒì¼ ì„ íƒ í™œì„±í™”
        this.state.fileSelectionActive = true;
        this.state.lastFileSelectionTime = now;
        
        this.log('âœ… íŒŒì¼ ì„ íƒ í—ˆìš©', { source });
        
        // ì½œë°± ì‹¤í–‰
        try {
            const result = callback();
            
            // ë¹„ë™ê¸° ì²˜ë¦¬ ì§€ì›
            if (result && typeof result.then === 'function') {
                result.finally(() => {
                    this.releaseFileSelection(source);
                });
            } else {
                // ë™ê¸° ì²˜ë¦¬ì¸ ê²½ìš° ì§€ì—° í›„ í•´ì œ
                setTimeout(() => {
                    this.releaseFileSelection(source);
                }, 100);
            }
            
            return true;
        } catch (error) {
            this.log('âŒ íŒŒì¼ ì„ íƒ ì½œë°± ì˜¤ë¥˜', { source, error });
            this.releaseFileSelection(source);
            return false;
        }
    },
    
    // íŒŒì¼ ì„ íƒ í•´ì œ
    releaseFileSelection(source) {
        this.log('ğŸ”“ íŒŒì¼ ì„ íƒ í•´ì œ', { source });
        this.state.fileSelectionActive = false;
        
        // ëŒ€ê¸° ì¤‘ì¸ ì´ë²¤íŠ¸ ì²˜ë¦¬
        this.processQueuedEvents();
    },
    
    // ì „ì—­ ì´ë²¤íŠ¸ ê°€ë¡œì±„ê¸°
    interceptGlobalEvents() {
        console.log('ğŸ•¸ï¸ ì „ì—­ ì´ë²¤íŠ¸ ê°€ë¡œì±„ê¸° ì„¤ì •');
        
        // input[type="file"] ì´ë²¤íŠ¸ ê°€ë¡œì±„ê¸°
        document.addEventListener('click', (event) => {
            const target = event.target;
            
            // íŒŒì¼ ì…ë ¥ í´ë¦­ ê°ì§€
            if (target.type === 'file' && target.id === 'imageInput') {
                this.handleFileInputClick(event, target);
            }
            
            // íŒŒì¼ ì„ íƒ íŠ¸ë¦¬ê±° ë²„íŠ¼ ê°ì§€
            if (target.id === 'imageLoadBtn' || 
                target.id === 'fileSelectOption' ||
                target.getAttribute('data-file-trigger')) {
                this.handleFileTriggerClick(event, target);
            }
        }, true); // ìº¡ì²˜ ë‹¨ê³„ì—ì„œ ì²˜ë¦¬
        
        // change ì´ë²¤íŠ¸ ê°€ë¡œì±„ê¸°
        document.addEventListener('change', (event) => {
            const target = event.target;
            
            if (target.type === 'file' && target.id === 'imageInput') {
                this.handleFileInputChange(event, target);
            }
        }, true);
    },
    
    // íŒŒì¼ ì…ë ¥ í´ë¦­ ì²˜ë¦¬
    handleFileInputClick(event, target) {
        this.log('ğŸ“ íŒŒì¼ ì…ë ¥ í´ë¦­ ê°ì§€', { targetId: target.id });
        
        // ì‚¬ìš©ì ì§ì ‘ í´ë¦­ì´ë‚˜ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì´ë²¤íŠ¸ëŠ” í•­ìƒ í—ˆìš©
        if (event.isTrusted || event.target === target) {
            this.log('âœ… ì‚¬ìš©ì ì§ì ‘ í´ë¦­ ë˜ëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì´ë²¤íŠ¸ - í—ˆìš©');
            return true;
        }
        
        // íŒŒì¼ ì„ íƒì´ í™œì„±í™”ë˜ì–´ ìˆì§€ ì•Šì€ ê²½ìš°ì—ë„ í—ˆìš©
        if (!this.state.fileSelectionActive) {
            this.log('âœ… íŒŒì¼ ì„ íƒì´ í™œì„±í™”ë˜ì§€ ì•ŠìŒ - í—ˆìš©');
            return true;
        }
        
        // í”„ë¡œê·¸ë˜ë° ë°©ì‹ í´ë¦­ì˜ ê²½ìš°ì—ë§Œ ì œí•œì ìœ¼ë¡œ ì°¨ë‹¨
        this.log('âš ï¸ í”„ë¡œê·¸ë˜ë° ì¤‘ë³µ í´ë¦­ ê°ì§€ - ì§§ì€ ì§€ì—° í›„ ì¬ì‹œë„');
        // ì™„ì „ ì°¨ë‹¨í•˜ì§€ ì•Šê³  ì§§ì€ ì§€ì—° í›„ í—ˆìš©
        setTimeout(() => {
            if (!this.state.fileSelectionActive) {
                target.click();
            }
        }, 50);
        return false;
    },
    
    // íŒŒì¼ íŠ¸ë¦¬ê±° ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬
    handleFileTriggerClick(event, target) {
        this.log('ğŸ”˜ íŒŒì¼ íŠ¸ë¦¬ê±° ë²„íŠ¼ í´ë¦­', { targetId: target.id });
        
        // ì‚¬ìš©ì ì§ì ‘ í´ë¦­ì€ í•­ìƒ í—ˆìš©í•˜ë˜ ì¤‘ë³µ ë°©ì§€ë§Œ ìˆ˜í–‰
        if (event.isTrusted) {
            this.log('âœ… ì‚¬ìš©ì ì§ì ‘ íŠ¸ë¦¬ê±° í´ë¦­ - ê¸°ë³¸ í—ˆìš©');
            
            // ì¤‘ë³µ í´ë¦­ ë°©ì§€ë¥¼ ìœ„í•œ ìµœì†Œí•œì˜ ì½”ë””ë„¤ì´ì…˜
            if (!this.state.fileSelectionActive) {
                this.state.fileSelectionActive = true;
                this.state.lastFileSelectionTime = Date.now();
                
                setTimeout(() => {
                    const fileInput = document.getElementById('imageInput');
                    if (fileInput) {
                        fileInput.click();
                    }
                }, 10);
                
                // ì§§ì€ ì‹œê°„ í›„ ìƒíƒœ í•´ì œ
                setTimeout(() => {
                    this.releaseFileSelection(`button:${target.id}`);
                }, 100);
                
                return true;
            } else {
                this.log('âš ï¸ íŒŒì¼ ì„ íƒì´ ì´ë¯¸ ì§„í–‰ ì¤‘ - ì ì‹œ ëŒ€ê¸°');
                return false;
            }
        }
        
        // í”„ë¡œê·¸ë˜ë° ë°©ì‹ í´ë¦­ì˜ ê²½ìš° ê¸°ì¡´ ë¡œì§ ì‚¬ìš©
        const allowed = this.coordinateFileSelection(`button:${target.id}`, () => {
            return true;
        });
        
        if (allowed) {
            setTimeout(() => {
                const fileInput = document.getElementById('imageInput');
                if (fileInput) {
                    fileInput.click();
                }
            }, 10);
        }
        
        return allowed;
    },
    
    // íŒŒì¼ ì…ë ¥ ë³€ê²½ ì²˜ë¦¬
    handleFileInputChange(event, target) {
        this.log('ğŸ“‚ íŒŒì¼ ì…ë ¥ ë³€ê²½ ê°ì§€', { 
            targetId: target.id,
            fileCount: target.files.length
        });
        
        // íŒŒì¼ì´ ì„ íƒë˜ì—ˆì„ ë•Œ ë‹¤ë¥¸ ëª¨ë“ˆë“¤ì—ê²Œ ì•Œë¦¼
        if (target.files.length > 0) {
            this.log('ğŸ“¢ íŒŒì¼ ì„ íƒ ì™„ë£Œ - ë‹¤ë¥¸ ëª¨ë“ˆë“¤ì—ê²Œ ì•Œë¦¼ ë°œì†¡', {
                fileCount: target.files.length,
                targetId: target.id
            });
            
            // ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ ë°œìƒ - ë‹¤ë¥¸ ëª¨ë“ˆë“¤ì´ êµ¬ë…í•  ìˆ˜ ìˆë„ë¡
            const filesSelectedEvent = new CustomEvent('facilityImageFilesSelected', {
                detail: {
                    files: target.files,
                    source: target.id === 'folderInput' ? 'folder' : 'file',
                    targetElement: target,
                    timestamp: Date.now()
                }
            });
            
            document.dispatchEvent(filesSelectedEvent);
            this.log('âœ… íŒŒì¼ ì„ íƒ ì´ë²¤íŠ¸ ë°œì†¡ ì™„ë£Œ');
        }
        
        // íŒŒì¼ ì„ íƒ ì™„ë£Œ ì‹œ ìƒíƒœ í•´ì œ
        setTimeout(() => {
            this.releaseFileSelection('file-input-change');
        }, 200);
    },
    
    // ëŒ€ê¸°ì—´ ì´ë²¤íŠ¸ ì²˜ë¦¬
    processQueuedEvents() {
        if (this.state.eventQueue.length > 0) {
            this.log('ğŸ“‹ ëŒ€ê¸°ì—´ ì´ë²¤íŠ¸ ì²˜ë¦¬', { queueSize: this.state.eventQueue.length });
            
            const nextEvent = this.state.eventQueue.shift();
            if (nextEvent) {
                setTimeout(() => {
                    nextEvent.callback();
                }, 100);
            }
        }
    },
    
    // ì´ë²¤íŠ¸ ëŒ€ê¸°ì—´ì— ì¶”ê°€
    queueEvent(source, callback) {
        if (this.state.eventQueue.length >= this.config.maxQueueSize) {
            this.log('âš ï¸ ëŒ€ê¸°ì—´ ìš©ëŸ‰ ì´ˆê³¼ - ì´ë²¤íŠ¸ ë¬´ì‹œ', { source });
            return false;
        }
        
        this.state.eventQueue.push({
            source,
            callback,
            timestamp: Date.now()
        });
        
        this.log('ğŸ“ ì´ë²¤íŠ¸ ëŒ€ê¸°ì—´ ì¶”ê°€', { source, queueSize: this.state.eventQueue.length });
        return true;
    },
    
    // ì •ë¦¬ íƒ€ì´ë¨¸ ì‹œì‘
    startCleanupTimer() {
        setInterval(() => {
            this.cleanup();
        }, this.config.cleanupInterval);
    },
    
    // ì •ë¦¬ ì‘ì—…
    cleanup() {
        const now = Date.now();
        const oldEventsThreshold = now - (this.config.cleanupInterval * 2);
        
        // ì˜¤ë˜ëœ ì°¨ë‹¨ ì´ë²¤íŠ¸ ì œê±°
        const oldBlockedCount = this.state.blockedEvents.length;
        this.state.blockedEvents = this.state.blockedEvents.filter(
            event => event.timestamp > oldEventsThreshold
        );
        
        // ì˜¤ë˜ëœ ëŒ€ê¸°ì—´ ì´ë²¤íŠ¸ ì œê±°
        const oldQueueCount = this.state.eventQueue.length;
        this.state.eventQueue = this.state.eventQueue.filter(
            event => event.timestamp > oldEventsThreshold
        );
        
        if (oldBlockedCount !== this.state.blockedEvents.length || 
            oldQueueCount !== this.state.eventQueue.length) {
            this.log('ğŸ§¹ ì •ë¦¬ ì™„ë£Œ', {
                blockedRemoved: oldBlockedCount - this.state.blockedEvents.length,
                queueRemoved: oldQueueCount - this.state.eventQueue.length
            });
        }
    },
    
    // ë””ë²„ê¹… ì¸í„°í˜ì´ìŠ¤ ì„¤ì •
    setupDebugInterface() {
        window.facilityImageEventDebug = {
            getState: () => this.state,
            getStats: () => ({
                blockedEventsCount: this.state.blockedEvents.length,
                queuedEventsCount: this.state.eventQueue.length,
                isFileSelectionActive: this.state.fileSelectionActive,
                lastSelectionTime: new Date(this.state.lastFileSelectionTime).toLocaleTimeString()
            }),
            clearBlocked: () => {
                this.state.blockedEvents = [];
                console.log('ğŸ§¹ ì°¨ë‹¨ëœ ì´ë²¤íŠ¸ ê¸°ë¡ ì´ˆê¸°í™”ë¨');
            },
            clearQueue: () => {
                this.state.eventQueue = [];
                console.log('ğŸ§¹ ì´ë²¤íŠ¸ ëŒ€ê¸°ì—´ ì´ˆê¸°í™”ë¨');
            },
            forceRelease: () => {
                this.state.fileSelectionActive = false;
                console.log('ğŸ”“ íŒŒì¼ ì„ íƒ ê°•ì œ í•´ì œë¨');
            },
            testFileSelection: () => {
                return this.coordinateFileSelection('debug-test', () => {
                    console.log('ğŸ§ª í…ŒìŠ¤íŠ¸ íŒŒì¼ ì„ íƒ ì‹¤í–‰ë¨');
                });
            }
        };
        
        console.log('ğŸ§ª ë””ë²„ê¹… ì¸í„°í˜ì´ìŠ¤ ì„¤ì • ì™„ë£Œ: window.facilityImageEventDebug');
    },
    
    // ë¡œê¹…
    log(message, data = null) {
        if (!this.state.debugMode) return;
        
        const timestamp = new Date().toLocaleTimeString();
        console.log(`ğŸ­ [EventCoordinator] [${timestamp}] ${message}`, data || '');
    }
};

// ìë™ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(() => {
        window.FacilityImageEventCoordinator.initialize();
    }, 50);
});

console.log('âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì´ë²¤íŠ¸ ì½”ë””ë„¤ì´í„° ë¡œë“œ ì™„ë£Œ');
````

## File: src/main/resources/static/js/facility-image-utils-module.js
````javascript
/**
 * ì‹œì„¤ ì´ë¯¸ì§€ ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆ (Utils Module)
 * ê³µí†µ ìœ í‹¸ë¦¬í‹°, í—¬í¼ í•¨ìˆ˜ë“¤ ì „ìš© ëª¨ë“ˆ
 * 
 * @version 1.0.0
 * @author LightCare Team
 * @requires FacilityImageCore
 */

(function() {
    'use strict';
    
    if (!window.FacilityImageCore) {
        throw new Error('FacilityImageCore ëª¨ë“ˆì´ í•„ìš”í•©ë‹ˆë‹¤.');
    }
    
    const Core = window.FacilityImageCore;
    
    if (!window.FacilityImageSystem.Utils) {
        window.FacilityImageSystem.Utils = {};
    }
    
    // ================================================
    // ìƒìˆ˜ ì •ì˜
    // ================================================
    
    const UTILS_CONSTANTS = {
        MODULE_NAME: 'FacilityImageUtils',
        VERSION: '1.0.0'
    };
    
    // ================================================
    // ì´ë¯¸ì§€ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°
    // ================================================
    
    const imageUtils = {
        /**
         * ì´ë¯¸ì§€ í¬ê¸° ê³„ì‚°
         */
        calculateAspectRatio(width, height) {
            const gcd = this.getGCD(width, height);
            return {
                ratio: width / height,
                aspectRatio: `${width / gcd}:${height / gcd}`,
                width,
                height
            };
        },
        
        /**
         * ìµœëŒ€ê³µì•½ìˆ˜ êµ¬í•˜ê¸°
         */
        getGCD(a, b) {
            return b === 0 ? a : this.getGCD(b, a % b);
        },
        
        /**
         * ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° ì¶”ì¶œ
         */
        async extractMetadata(file) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => {
                    const metadata = {
                        filename: file.name,
                        size: file.size,
                        type: file.type,
                        width: img.width,
                        height: img.height,
                        aspectRatio: this.calculateAspectRatio(img.width, img.height),
                        lastModified: new Date(file.lastModified)
                    };
                    resolve(metadata);
                };
                img.onerror = () => resolve(null);
                img.src = URL.createObjectURL(file);
            });
        },
        
        /**
         * ì´ë¯¸ì§€ ì••ì¶• ë¹„ìœ¨ ê³„ì‚°
         */
        calculateCompressionRatio(originalSize, compressedSize) {
            return Math.round((1 - compressedSize / originalSize) * 100);
        }
    };
    
    // ================================================
    // íŒŒì¼ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°
    // ================================================
    
    const fileUtils = {
        /**
         * íŒŒì¼ í¬ê¸° í¬ë§·íŒ…
         */
        formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        },
        
        /**
         * íŒŒì¼ íƒ€ì… ì²´í¬
         */
        isImageFile(file) {
            return file.type.startsWith('image/');
        },
        
        /**
         * íŒŒì¼ í™•ì¥ì ì¶”ì¶œ
         */
        getFileExtension(filename) {
            return filename.slice((filename.lastIndexOf('.') - 1 >>> 0) + 2);
        },
        
        /**
         * MIME íƒ€ì…ì—ì„œ í™•ì¥ì ì¶”ì¶œ
         */
        getExtensionFromMimeType(mimeType) {
            const extensions = {
                'image/jpeg': 'jpg',
                'image/png': 'png',
                'image/webp': 'webp',
                'image/avif': 'avif'
            };
            return extensions[mimeType] || 'jpg';
        },
        
        /**
         * Blobì„ Fileë¡œ ë³€í™˜
         */
        blobToFile(blob, filename) {
            return new File([blob], filename, { type: blob.type });
        }
    };
    
    // ================================================
    // ë¬¸ìì—´ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°
    // ================================================
    
    const stringUtils = {
        /**
         * ë¬¸ìì—´ ìŠ¬ëŸ¬ê·¸í™”
         */
        slugify(text) {
            return text
                .toString()
                .toLowerCase()
                .trim()
                .replace(/\s+/g, '-')
                .replace(/[^\w\-]+/g, '')
                .replace(/\-\-+/g, '-')
                .replace(/^-+/, '')
                .replace(/-+$/, '');
        },
        
        /**
         * í•œê¸€ì„ ì˜ë¬¸ìœ¼ë¡œ ë³€í™˜
         */
        koreanToEnglish(text) {
            const map = {
                'ã„±': 'g', 'ã„´': 'n', 'ã„·': 'd', 'ã„¹': 'r', 'ã…': 'm',
                'ã…‚': 'b', 'ã……': 's', 'ã…‡': '', 'ã…ˆ': 'j', 'ã…Š': 'ch',
                'ã…‹': 'k', 'ã…Œ': 't', 'ã…': 'p', 'ã…': 'h',
                'ã…': 'a', 'ã…“': 'eo', 'ã…—': 'o', 'ã…œ': 'u', 'ã…¡': 'eu', 'ã…£': 'i'
            };
            
            return text.replace(/[ã„±-ã…ã…-ã…£ê°€-í£]/g, (char) => {
                return map[char] || '';
            });
        },
        
        /**
         * í…ìŠ¤íŠ¸ ì˜ë¼ë‚´ê¸°
         */
        truncate(text, maxLength, suffix = '...') {
            if (text.length <= maxLength) return text;
            return text.slice(0, maxLength - suffix.length) + suffix;
        },
        
        /**
         * ì¹´ë©œì¼€ì´ìŠ¤ ë³€í™˜
         */
        toCamelCase(text) {
            return text.replace(/[-_\s]+(.)?/g, (_, char) => 
                char ? char.toUpperCase() : ''
            );
        }
    };
    
    // ================================================
    // ë°°ì—´ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°
    // ================================================
    
    const arrayUtils = {
        /**
         * ë°°ì—´ ì„ê¸°
         */
        shuffle(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        },
        
        /**
         * ë°°ì—´ ì²­í¬ ë¶„í• 
         */
        chunk(array, size) {
            const chunks = [];
            for (let i = 0; i < array.length; i += size) {
                chunks.push(array.slice(i, i + size));
            }
            return chunks;
        },
        
        /**
         * ì¤‘ë³µ ì œê±°
         */
        unique(array, key = null) {
            if (key) {
                const seen = new Set();
                return array.filter(item => {
                    const keyValue = item[key];
                    if (seen.has(keyValue)) {
                        return false;
                    }
                    seen.add(keyValue);
                    return true;
                });
            }
            return [...new Set(array)];
        },
        
        /**
         * ë°°ì—´ì—ì„œ ëœë¤ ì„ íƒ
         */
        randomSelect(array, count = 1) {
            const shuffled = this.shuffle(array);
            return count === 1 ? shuffled[0] : shuffled.slice(0, count);
        }
    };
    
    // ================================================
    // ì‹œê°„ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°
    // ================================================
    
    const timeUtils = {
        /**
         * ìƒëŒ€ ì‹œê°„ í‘œì‹œ
         */
        timeAgo(date) {
            const now = new Date();
            const diff = now - new Date(date);
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(diff / 3600000);
            const days = Math.floor(diff / 86400000);
            
            if (minutes < 1) return 'ë°©ê¸ˆ ì „';
            if (minutes < 60) return `${minutes}ë¶„ ì „`;
            if (hours < 24) return `${hours}ì‹œê°„ ì „`;
            if (days < 30) return `${days}ì¼ ì „`;
            return new Date(date).toLocaleDateString();
        },
        
        /**
         * ì‹œê°„ í¬ë§·íŒ…
         */
        formatTime(date, format = 'YYYY-MM-DD HH:mm:ss') {
            const d = new Date(date);
            const year = d.getFullYear();
            const month = String(d.getMonth() + 1).padStart(2, '0');
            const day = String(d.getDate()).padStart(2, '0');
            const hours = String(d.getHours()).padStart(2, '0');
            const minutes = String(d.getMinutes()).padStart(2, '0');
            const seconds = String(d.getSeconds()).padStart(2, '0');
            
            return format
                .replace('YYYY', year)
                .replace('MM', month)
                .replace('DD', day)
                .replace('HH', hours)
                .replace('mm', minutes)
                .replace('ss', seconds);
        }
    };
    
    // ================================================
    // URL ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°
    // ================================================
    
    const urlUtils = {
        /**
         * URL íŒŒë¼ë¯¸í„° ì¶”ì¶œ
         */
        getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            const result = {};
            for (const [key, value] of params) {
                result[key] = value;
            }
            return result;
        },
        
        /**
         * URL íŒŒë¼ë¯¸í„° ì„¤ì •
         */
        setUrlParam(key, value) {
            const url = new URL(window.location);
            url.searchParams.set(key, value);
            window.history.pushState({}, '', url);
        },
        
        /**
         * í˜„ì¬ URLì—ì„œ ì‹œì„¤ ID ì¶”ì¶œ
         */
        extractFacilityId() {
            const pathParts = window.location.pathname.split('/');
            const lastPart = pathParts[pathParts.length - 1];
            return !isNaN(lastPart) && lastPart !== '' ? parseInt(lastPart) : null;
        }
    };
    
    // ================================================
    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìœ í‹¸ë¦¬í‹°
    // ================================================
    
    const storageUtils = {
        /**
         * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
         */
        set(key, value) {
            try {
                localStorage.setItem(key, JSON.stringify(value));
                return true;
            } catch (error) {
                Core.logger.error('ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì €ì¥ ì‹¤íŒ¨:', error);
                return false;
            }
        },
        
        /**
         * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ê°€ì ¸ì˜¤ê¸°
         */
        get(key, defaultValue = null) {
            try {
                const item = localStorage.getItem(key);
                return item ? JSON.parse(item) : defaultValue;
            } catch (error) {
                Core.logger.error('ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì½ê¸° ì‹¤íŒ¨:', error);
                return defaultValue;
            }
        },
        
        /**
         * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì œê±°
         */
        remove(key) {
            try {
                localStorage.removeItem(key);
                return true;
            } catch (error) {
                Core.logger.error('ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì œê±° ì‹¤íŒ¨:', error);
                return false;
            }
        },
        
        /**
         * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì „ì²´ í´ë¦¬ì–´
         */
        clear() {
            try {
                localStorage.clear();
                return true;
            } catch (error) {
                Core.logger.error('ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í´ë¦¬ì–´ ì‹¤íŒ¨:', error);
                return false;
            }
        }
    };
    
    // ================================================
    // ì„±ëŠ¥ ì¸¡ì • ìœ í‹¸ë¦¬í‹°
    // ================================================
    
    const performanceUtils = {
        timers: new Map(),
        
        /**
         * íƒ€ì´ë¨¸ ì‹œì‘
         */
        startTimer(name) {
            this.timers.set(name, performance.now());
        },
        
        /**
         * íƒ€ì´ë¨¸ ì¢…ë£Œ ë° ê²°ê³¼ ë°˜í™˜
         */
        endTimer(name) {
            const startTime = this.timers.get(name);
            if (!startTime) return null;
            
            const duration = performance.now() - startTime;
            this.timers.delete(name);
            
            Core.logger.log(`â±ï¸ ${name}: ${duration.toFixed(2)}ms`);
            return duration;
        },
        
        /**
         * í•¨ìˆ˜ ì‹¤í–‰ ì‹œê°„ ì¸¡ì •
         */
        async measureFunction(fn, name = 'function') {
            this.startTimer(name);
            const result = await fn();
            this.endTimer(name);
            return result;
        }
    };
    
    // ================================================
    // ë©”ì¸ ìœ í‹¸ë¦¬í‹° ê°ì²´
    // ================================================
    
    const utils = {
        initialize() {
            Core.logger.log('ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
            return true;
        },
        
        // ê° ìœ í‹¸ë¦¬í‹° ê·¸ë£¹ ì ‘ê·¼ì
        image: imageUtils,
        file: fileUtils,
        string: stringUtils,
        array: arrayUtils,
        time: timeUtils,
        url: urlUtils,
        storage: storageUtils,
        performance: performanceUtils,
        
        getInfo() {
            return {
                name: UTILS_CONSTANTS.MODULE_NAME,
                version: UTILS_CONSTANTS.VERSION,
                availableUtils: [
                    'image', 'file', 'string', 'array', 
                    'time', 'url', 'storage', 'performance'
                ]
            };
        }
    };
    
    // ================================================
    // ëª¨ë“ˆ ë…¸ì¶œ
    // ================================================
    
    window.FacilityImageSystem.Utils = {
        CONSTANTS: UTILS_CONSTANTS,
        utils,
        imageUtils,
        fileUtils,
        stringUtils,
        arrayUtils,
        timeUtils,
        urlUtils,
        storageUtils,
        performanceUtils,
        initialize: utils.initialize.bind(utils)
    };
    
    window.FacilityImageUtils = window.FacilityImageSystem.Utils;
    
    Core.logger.log('ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');
    
})();
````

## File: src/main/resources/static/js/image-compressor.js
````javascript
/**
 * ì´ë¯¸ì§€ ì••ì¶• ê³µí†µ ë¼ì´ë¸ŒëŸ¬ë¦¬
 * SEO ìµœì í™”ë¥¼ ìœ„í•œ ì´ë¯¸ì§€ ìš©ëŸ‰ ì¤„ì´ê¸° ê¸°ëŠ¥
 */
class ImageCompressor {
    constructor(options = {}) {
        this.options = {
            quality: options.quality || 0.8,
            maxWidth: options.maxWidth || 1920,
            maxHeight: options.maxHeight || 1080,
            outputFormat: options.outputFormat || 'image/jpeg',
            enableResize: options.enableResize !== false,
            showProgress: options.showProgress !== false,
            ...options
        };
    }

    /**
     * íŒŒì¼ì„ ì••ì¶•í•©ë‹ˆë‹¤
     * @param {File} file - ì••ì¶•í•  íŒŒì¼
     * @param {Object} customOptions - ì‚¬ìš©ì ì •ì˜ ì˜µì…˜
     * @returns {Promise<{file: File, originalSize: number, compressedSize: number, compressionRatio: number}>}
     */
    async compressFile(file, customOptions = {}) {
        const options = { ...this.options, ...customOptions };
        
        if (!this.isValidImageFile(file)) {
            throw new Error('ì§€ì›ë˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ íŒŒì¼ì…ë‹ˆë‹¤.');
        }

        const originalSize = file.size;
        
        try {
            const compressedFile = await this.compress(file, options);
            const compressedSize = compressedFile.size;
            const compressionRatio = Math.round((1 - compressedSize / originalSize) * 100);
            
            return {
                file: compressedFile,
                originalSize,
                compressedSize,
                compressionRatio
            };
        } catch (error) {
            console.error('ì´ë¯¸ì§€ ì••ì¶• ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
            throw error;
        }
    }

    /**
     * ì—¬ëŸ¬ íŒŒì¼ì„ ì••ì¶•í•©ë‹ˆë‹¤
     * @param {FileList|Array} files - ì••ì¶•í•  íŒŒì¼ ëª©ë¡
     * @param {Object} customOptions - ì‚¬ìš©ì ì •ì˜ ì˜µì…˜
     * @returns {Promise<Array>}
     */
    async compressFiles(files, customOptions = {}) {
        const fileArray = Array.from(files);
        const results = [];
        
        for (let i = 0; i < fileArray.length; i++) {
            const file = fileArray[i];
            try {
                const result = await this.compressFile(file, customOptions);
                results.push(result);
                
                if (this.options.showProgress && this.onProgress) {
                    this.onProgress(i + 1, fileArray.length, result);
                }
            } catch (error) {
                console.error(`íŒŒì¼ ${file.name} ì••ì¶• ì‹¤íŒ¨:`, error);
                results.push({ error: error.message, file });
            }
        }
        
        return results;
    }

    /**
     * ì‹¤ì œ ì••ì¶• ë¡œì§
     * @private
     */
    async compress(file, options) {
        return new Promise((resolve, reject) => {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const img = new Image();
            
            img.onload = () => {
                try {
                    // ë¦¬ì‚¬ì´ì¦ˆ ê³„ì‚°
                    const { width, height } = this.calculateDimensions(
                        img.width, 
                        img.height, 
                        options.maxWidth, 
                        options.maxHeight,
                        options.enableResize
                    );
                    
                    canvas.width = width;
                    canvas.height = height;
                    
                    // ì´ë¯¸ì§€ ê·¸ë¦¬ê¸°
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    // Blobìœ¼ë¡œ ë³€í™˜
                    canvas.toBlob((blob) => {
                        if (blob) {
                            const compressedFile = new File([blob], file.name, {
                                type: options.outputFormat,
                                lastModified: Date.now()
                            });
                            resolve(compressedFile);
                        } else {
                            reject(new Error('ì••ì¶• ì‹¤íŒ¨'));
                        }
                    }, options.outputFormat, options.quality);
                } catch (error) {
                    reject(error);
                }
            };
            
            img.onerror = () => reject(new Error('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨'));
            img.src = URL.createObjectURL(file);
        });
    }

    /**
     * ë¦¬ì‚¬ì´ì¦ˆ ì¹˜ìˆ˜ ê³„ì‚°
     * @private
     */
    calculateDimensions(originalWidth, originalHeight, maxWidth, maxHeight, enableResize) {
        if (!enableResize) {
            return { width: originalWidth, height: originalHeight };
        }

        let { width, height } = { width: originalWidth, height: originalHeight };
        
        // ìµœëŒ€ ë„ˆë¹„ ì œí•œ
        if (width > maxWidth) {
            height = (height * maxWidth) / width;
            width = maxWidth;
        }
        
        // ìµœëŒ€ ë†’ì´ ì œí•œ
        if (height > maxHeight) {
            width = (width * maxHeight) / height;
            height = maxHeight;
        }
        
        return { width: Math.round(width), height: Math.round(height) };
    }

    /**
     * ìœ íš¨í•œ ì´ë¯¸ì§€ íŒŒì¼ì¸ì§€ í™•ì¸
     * @private
     */
    isValidImageFile(file) {
        const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];
        return validTypes.includes(file.type);
    }

    /**
     * íŒŒì¼ í¬ê¸°ë¥¼ ì½ê¸° ì‰¬ìš´ í˜•íƒœë¡œ ë³€í™˜
     * @param {number} bytes - ë°”ì´íŠ¸ ìˆ˜
     * @returns {string}
     */
    static formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    /**
     * ì§„í–‰ ìƒí™© ì½œë°± ì„¤ì •
     * @param {Function} callback - ì§„í–‰ ìƒí™© ì½œë°± í•¨ìˆ˜
     */
    setProgressCallback(callback) {
        this.onProgress = callback;
    }
}

/**
 * ì´ë¯¸ì§€ ì••ì¶• UI í—¬í¼
 */
class ImageCompressorUI {
    constructor(inputSelector, options = {}) {
        this.input = document.querySelector(inputSelector);
        this.compressor = new ImageCompressor(options);
        this.originalFiles = [];
        this.compressedFiles = [];
        
        this.init();
    }

    init() {
        if (!this.input) {
            console.error('ì´ë¯¸ì§€ ì…ë ¥ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }

        this.createUI();
        this.bindEvents();
    }

    createUI() {
        // ê¸°ì¡´ inputì„ ìˆ¨ê¸°ê³  ìƒˆë¡œìš´ UI ìƒì„±
        this.input.style.display = 'none';
        
        const wrapper = document.createElement('div');
        wrapper.className = 'image-compressor-wrapper';
        wrapper.innerHTML = `
            <div class="image-upload-area border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                <div class="upload-icon mb-3">
                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                </div>
                <p class="text-sm text-gray-600 mb-2">ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œí•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”</p>
                <p class="text-xs text-gray-500">JPG, PNG, WEBP íŒŒì¼ë§Œ ì§€ì›ë©ë‹ˆë‹¤</p>
                <input type="file" class="hidden" accept="image/*" multiple>
            </div>
            
            <div class="compression-settings mt-4 hidden">
                <h4 class="text-sm font-semibold mb-3">ì••ì¶• ì„¤ì •</h4>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs text-gray-700 mb-1">í’ˆì§ˆ (${Math.round(this.compressor.options.quality * 100)}%)</label>
                        <input type="range" class="quality-slider w-full" min="0.1" max="1" step="0.1" value="${this.compressor.options.quality}">
                    </div>
                    <div>
                        <label class="block text-xs text-gray-700 mb-1">ìµœëŒ€ ë„ˆë¹„ (px)</label>
                        <input type="number" class="max-width-input w-full px-2 py-1 border rounded text-sm" value="${this.compressor.options.maxWidth}">
                    </div>
                </div>
                <div class="mt-3">
                    <button type="button" class="compress-btn bg-blue-500 text-white px-4 py-2 rounded text-sm hover:bg-blue-600">
                        ì´ë¯¸ì§€ ì••ì¶•í•˜ê¸°
                    </button>
                </div>
            </div>
            
            <div class="file-preview mt-4 hidden">
                <h4 class="text-sm font-semibold mb-3">íŒŒì¼ ë¯¸ë¦¬ë³´ê¸°</h4>
                <div class="preview-list"></div>
            </div>
            
            <div class="alt-tags-section mt-4 hidden">
                <h4 class="text-sm font-semibold mb-3">
                    <i class="fas fa-tag me-1"></i>SEO ìµœì í™” - ì´ë¯¸ì§€ ì„¤ëª… (Alt íƒœê·¸)
                </h4>
                <div class="alt-tags-list"></div>
                <div class="mt-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="autoGenerateAlt" checked>
                        <label class="form-check-label text-xs text-gray-600" for="autoGenerateAlt">
                            <i class="fas fa-magic me-1"></i>ì„¤ëª…ì´ ë¹„ì–´ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ ìƒì„±
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="compression-progress mt-4 hidden">
                <div class="progress-bar bg-gray-200 rounded-full h-2">
                    <div class="progress-fill bg-blue-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
                <p class="text-sm text-gray-600 mt-2">ì••ì¶• ì§„í–‰ ì¤‘...</p>
            </div>
        `;
        
        this.input.parentNode.insertBefore(wrapper, this.input);
        this.wrapper = wrapper;
        this.fileInput = wrapper.querySelector('input[type="file"]');
        this.uploadArea = wrapper.querySelector('.image-upload-area');
        this.settingsArea = wrapper.querySelector('.compression-settings');
        this.previewArea = wrapper.querySelector('.file-preview');
        this.altTagsSection = wrapper.querySelector('.alt-tags-section');
        this.progressArea = wrapper.querySelector('.compression-progress');
    }

    bindEvents() {
        // íŒŒì¼ ì„ íƒ ì´ë²¤íŠ¸
        this.fileInput.addEventListener('change', (e) => {
            this.handleFiles(e.target.files);
        });

        // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì´ë²¤íŠ¸
        this.uploadArea.addEventListener('click', () => {
            this.fileInput.click();
        });

        this.uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            this.uploadArea.classList.add('border-blue-400', 'bg-blue-50');
        });

        this.uploadArea.addEventListener('dragleave', (e) => {
            e.preventDefault();
            this.uploadArea.classList.remove('border-blue-400', 'bg-blue-50');
        });

        this.uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            this.uploadArea.classList.remove('border-blue-400', 'bg-blue-50');
            this.handleFiles(e.dataTransfer.files);
        });

        // ì••ì¶• ì„¤ì • ì´ë²¤íŠ¸
        this.wrapper.querySelector('.quality-slider').addEventListener('input', (e) => {
            const quality = parseFloat(e.target.value);
            this.compressor.options.quality = quality;
            e.target.previousElementSibling.textContent = `í’ˆì§ˆ (${Math.round(quality * 100)}%)`;
        });

        this.wrapper.querySelector('.max-width-input').addEventListener('input', (e) => {
            this.compressor.options.maxWidth = parseInt(e.target.value);
        });

        // ì••ì¶• ì‹¤í–‰ ì´ë²¤íŠ¸
        this.wrapper.querySelector('.compress-btn').addEventListener('click', () => {
            this.compressImages();
        });
    }

    handleFiles(files) {
        if (files.length === 0) return;

        this.originalFiles = Array.from(files);
        this.showPreview(files);
        this.showAltTagInputs(files);
        this.settingsArea.classList.remove('hidden');
        this.previewArea.classList.remove('hidden');
        this.altTagsSection.classList.remove('hidden');
    }

    showPreview(files) {
        const previewList = this.wrapper.querySelector('.preview-list');
        previewList.innerHTML = '';

        Array.from(files).forEach((file, index) => {
            const previewItem = document.createElement('div');
            previewItem.className = 'preview-item flex items-center justify-between p-3 border rounded mb-2';
            
            const reader = new FileReader();
            reader.onload = (e) => {
                previewItem.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <img src="${e.target.result}" class="w-12 h-12 object-cover rounded" alt="ë¯¸ë¦¬ë³´ê¸°">
                        <div>
                            <p class="text-sm font-medium">${file.name}</p>
                            <p class="text-xs text-gray-500">ì›ë³¸: ${ImageCompressor.formatFileSize(file.size)}</p>
                        </div>
                    </div>
                    <div class="compression-result hidden">
                        <p class="text-xs text-green-600">ì••ì¶• ì™„ë£Œ!</p>
                        <p class="text-xs text-gray-500">ì••ì¶• í›„: <span class="compressed-size"></span></p>
                        <p class="text-xs text-gray-500">ì••ì¶•ë¥ : <span class="compression-ratio"></span>%</p>
                    </div>
                `;
            };
            reader.readAsDataURL(file);
            
            previewList.appendChild(previewItem);
        });
    }

    async compressImages() {
        if (this.originalFiles.length === 0) return;

        this.progressArea.classList.remove('hidden');
        const progressFill = this.wrapper.querySelector('.progress-fill');
        const progressText = this.wrapper.querySelector('.compression-progress p');

        this.compressor.setProgressCallback((current, total, result) => {
            const percentage = Math.round((current / total) * 100);
            progressFill.style.width = `${percentage}%`;
            progressText.textContent = `ì••ì¶• ì§„í–‰ ì¤‘... (${current}/${total})`;

            // ê°œë³„ íŒŒì¼ ê²°ê³¼ ì—…ë°ì´íŠ¸
            this.updatePreviewResult(current - 1, result);
        });

        try {
            const results = await this.compressor.compressFiles(this.originalFiles);
            this.compressedFiles = results.map(result => result.file).filter(file => file);
            
            // ì›ë³¸ inputì— ì••ì¶•ëœ íŒŒì¼ ì„¤ì •
            this.updateOriginalInput();
            
            progressText.textContent = 'ì••ì¶• ì™„ë£Œ!';
            
            // ì´ ì••ì¶• ê²°ê³¼ í‘œì‹œ
            this.showCompressionSummary(results);
            
        } catch (error) {
            console.error('ì••ì¶• ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
            progressText.textContent = 'ì••ì¶• ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
        }
    }

    updatePreviewResult(index, result) {
        const previewItems = this.wrapper.querySelectorAll('.preview-item');
        if (previewItems[index]) {
            const resultDiv = previewItems[index].querySelector('.compression-result');
            if (resultDiv && !result.error) {
                resultDiv.querySelector('.compressed-size').textContent = ImageCompressor.formatFileSize(result.compressedSize);
                resultDiv.querySelector('.compression-ratio').textContent = result.compressionRatio;
                resultDiv.classList.remove('hidden');
            }
        }
    }

    updateOriginalInput() {
        // DataTransfer ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì••ì¶•ëœ íŒŒì¼ì„ ì›ë³¸ inputì— ì„¤ì •
        const dt = new DataTransfer();
        this.compressedFiles.forEach(file => {
            dt.items.add(file);
        });
        this.input.files = dt.files;
        
        // change ì´ë²¤íŠ¸ ë°œìƒ
        this.input.dispatchEvent(new Event('change', { bubbles: true }));
    }

    showCompressionSummary(results) {
        const totalOriginal = results.reduce((sum, result) => sum + (result.originalSize || 0), 0);
        const totalCompressed = results.reduce((sum, result) => sum + (result.compressedSize || 0), 0);
        const totalRatio = Math.round((1 - totalCompressed / totalOriginal) * 100);

        const summary = document.createElement('div');
        summary.className = 'compression-summary mt-4 p-4 bg-green-50 border border-green-200 rounded-lg';
        summary.innerHTML = `
            <h4 class="text-sm font-semibold text-green-800 mb-2">ì••ì¶• ì™„ë£Œ!</h4>
            <div class="text-xs text-green-700">
                <p>ì›ë³¸ ìš©ëŸ‰: ${ImageCompressor.formatFileSize(totalOriginal)}</p>
                <p>ì••ì¶• í›„ ìš©ëŸ‰: ${ImageCompressor.formatFileSize(totalCompressed)}</p>
                <p>ì´ ì••ì¶•ë¥ : ${totalRatio}%</p>
                <p class="mt-1 font-medium">SEO ìµœì í™”ë¥¼ ìœ„í•´ ìš©ëŸ‰ì´ ${ImageCompressor.formatFileSize(totalOriginal - totalCompressed)} ì¤„ì–´ë“¤ì—ˆìŠµë‹ˆë‹¤!</p>
            </div>
        `;
        
        this.wrapper.appendChild(summary);
    }

    showAltTagInputs(files) {
        const altTagsList = this.wrapper.querySelector('.alt-tags-list');
        altTagsList.innerHTML = '';

        Array.from(files).forEach((file, index) => {
            const altTagItem = document.createElement('div');
            altTagItem.className = 'alt-tag-item mb-3 p-3 border rounded bg-light';
            
            const fileName = file.name;
            const autoGeneratedAlt = this.generateAutoAltText(fileName);
            
            altTagItem.innerHTML = `
                <div class="d-flex align-items-start gap-3">
                    <div class="flex-shrink-0">
                        <div class="file-icon bg-primary text-white rounded p-2">
                            <i class="fas fa-image"></i>
                        </div>
                    </div>
                    <div class="flex-grow-1">
                        <h6 class="mb-2 text-sm font-medium">${fileName}</h6>
                        <div class="mb-2">
                            <label class="form-label text-xs">ì´ë¯¸ì§€ ì„¤ëª… (Alt íƒœê·¸)</label>
                            <textarea 
                                class="form-control form-control-sm alt-text-input" 
                                data-file-index="${index}"
                                rows="2" 
                                placeholder="SEO ìµœì í™”ë¥¼ ìœ„í•œ ì´ë¯¸ì§€ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”..."
                                maxlength="125"
                            ></textarea>
                            <div class="form-text text-xs">
                                <span class="text-muted">ê²€ìƒ‰ì—”ì§„ ìµœì í™”ë¥¼ ìœ„í•´ ì´ë¯¸ì§€ ë‚´ìš©ì„ ì„¤ëª…í•´ì£¼ì„¸ìš” (ìµœëŒ€ 125ì)</span>
                                <span class="char-count float-end">0/125</span>
                            </div>
                        </div>
                        <div class="auto-suggestion ${autoGeneratedAlt ? '' : 'hidden'}">
                            <small class="text-muted">
                                <i class="fas fa-lightbulb text-warning me-1"></i>
                                ìë™ ì œì•ˆ: <span class="auto-alt-text">${autoGeneratedAlt}</span>
                                <button type="button" class="btn btn-link btn-sm p-0 ms-2 use-suggestion" data-file-index="${index}">
                                    <i class="fas fa-check text-success"></i> ì‚¬ìš©
                                </button>
                            </small>
                        </div>
                    </div>
                </div>
            `;
            
            altTagsList.appendChild(altTagItem);
        });

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        this.bindAltTagEvents();
    }

    bindAltTagEvents() {
        // ê¸€ì ìˆ˜ ì¹´ìš´í„°
        this.wrapper.querySelectorAll('.alt-text-input').forEach(input => {
            const charCount = input.closest('.alt-tag-item').querySelector('.char-count');
            
            input.addEventListener('input', () => {
                const length = input.value.length;
                charCount.textContent = `${length}/125`;
                charCount.className = length > 100 ? 'char-count float-end text-warning' : 'char-count float-end text-muted';
            });
        });

        // ìë™ ì œì•ˆ ì‚¬ìš© ë²„íŠ¼
        this.wrapper.querySelectorAll('.use-suggestion').forEach(button => {
            button.addEventListener('click', () => {
                const fileIndex = button.dataset.fileIndex;
                const altInput = this.wrapper.querySelector(`.alt-text-input[data-file-index="${fileIndex}"]`);
                const suggestedText = button.closest('.auto-suggestion').querySelector('.auto-alt-text').textContent;
                
                altInput.value = suggestedText;
                altInput.dispatchEvent(new Event('input'));
                
                // ì‚¬ìš©ëœ ì œì•ˆ í‘œì‹œ
                button.innerHTML = '<i class="fas fa-check text-success"></i> ì ìš©ë¨';
                button.disabled = true;
            });
        });
    }

    generateAutoAltText(fileName) {
        // íŒŒì¼ëª… ê¸°ë°˜ ìë™ alt í…ìŠ¤íŠ¸ ìƒì„±
        const cleanName = fileName
            .replace(/\.[^/.]+$/, '') // í™•ì¥ì ì œê±°
            .replace(/[_-]/g, ' ')    // ì–¸ë”ìŠ¤ì½”ì–´, í•˜ì´í”ˆì„ ê³µë°±ìœ¼ë¡œ
            .replace(/\d+/g, '')      // ìˆ«ì ì œê±°
            .trim();

        if (!cleanName) return '';

        // í•œê¸€ì¸ì§€ í™•ì¸
        const isKorean = /[ã„±-ã…|ã…-ã…£|ê°€-í£]/.test(cleanName);
        
        if (isKorean) {
            // í•œê¸€ íŒŒì¼ëª… ì²˜ë¦¬
            if (cleanName.includes('ì‹œì„¤') || cleanName.includes('ìš”ì–‘ì›')) {
                return `${cleanName} ì‹œì„¤ ì‚¬ì§„`;
            } else if (cleanName.includes('í”„ë¡œí•„') || cleanName.includes('ì¦ëª…')) {
                return `${cleanName} ì´ë¯¸ì§€`;
            } else {
                return `${cleanName} ì‚¬ì§„`;
            }
        } else {
            // ì˜ë¬¸ íŒŒì¼ëª… ì²˜ë¦¬
            const words = cleanName.toLowerCase().split(/\s+/).filter(word => word.length > 0);
            
            if (words.length === 0) return '';
            
            // ì‹œì„¤ ê´€ë ¨ í‚¤ì›Œë“œ
            if (words.some(word => ['facility', 'nursing', 'care', 'hospital'].includes(word))) {
                return `${this.capitalizeWords(cleanName)} facility image`;
            }
            // í”„ë¡œí•„ ê´€ë ¨ í‚¤ì›Œë“œ  
            else if (words.some(word => ['profile', 'avatar', 'user', 'member'].includes(word))) {
                return `${this.capitalizeWords(cleanName)} profile picture`;
            }
            // ì¼ë°˜ì ì¸ ê²½ìš°
            else {
                return `${this.capitalizeWords(cleanName)} image`;
            }
        }
    }

    capitalizeWords(str) {
        return str.replace(/\b\w/g, l => l.toUpperCase());
    }

    getAltTexts() {
        const altTexts = [];
        const inputs = this.wrapper.querySelectorAll('.alt-text-input');
        const autoGenerate = this.wrapper.querySelector('#autoGenerateAlt').checked;
        
        inputs.forEach((input, index) => {
            let altText = input.value.trim();
            
            // ìë™ ìƒì„±ì´ í™œì„±í™”ë˜ê³  ì…ë ¥ê°’ì´ ì—†ìœ¼ë©´ ìë™ ìƒì„±
            if (!altText && autoGenerate && this.originalFiles[index]) {
                altText = this.generateAutoAltText(this.originalFiles[index].name);
            }
            
            altTexts.push(altText);
        });
        
        return altTexts;
    }

    // ì••ì¶•ëœ íŒŒì¼ê³¼ í•¨ê»˜ alt í…ìŠ¤íŠ¸ë„ ë°˜í™˜í•˜ë„ë¡ ìˆ˜ì •
    async compressImages() {
        if (this.originalFiles.length === 0) return;

        this.progressArea.classList.remove('hidden');
        const progressFill = this.wrapper.querySelector('.progress-fill');
        const progressText = this.wrapper.querySelector('.compression-progress p');

        const altTexts = this.getAltTexts();

        this.compressor.setProgressCallback((current, total, result) => {
            const percentage = Math.round((current / total) * 100);
            progressFill.style.width = `${percentage}%`;
            progressText.textContent = `ì••ì¶• ì§„í–‰ ì¤‘... (${current}/${total})`;

            // ê°œë³„ íŒŒì¼ ê²°ê³¼ ì—…ë°ì´íŠ¸
            this.updatePreviewResult(current - 1, result);
        });

        try {
            const results = await this.compressor.compressFiles(this.originalFiles);
            this.compressedFiles = results.map(result => result.file).filter(file => file);
            
            // ì••ì¶•ëœ íŒŒì¼ì— alt í…ìŠ¤íŠ¸ ë©”íƒ€ë°ì´í„° ì¶”ê°€
            this.compressedFiles.forEach((file, index) => {
                if (altTexts[index]) {
                    file.altText = altTexts[index];
                }
            });
            
            // ì›ë³¸ inputì— ì••ì¶•ëœ íŒŒì¼ ì„¤ì •
            this.updateOriginalInput();
            
            // alt í…ìŠ¤íŠ¸ë¥¼ íˆë“  í•„ë“œì— ì €ì¥
            this.updateAltTextHiddenFields(altTexts);
            
            progressText.textContent = 'ì••ì¶• ì™„ë£Œ!';
            
            // ì´ ì••ì¶• ê²°ê³¼ í‘œì‹œ
            this.showCompressionSummary(results);
            
        } catch (error) {
            console.error('ì••ì¶• ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
            progressText.textContent = 'ì••ì¶• ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
        }
    }

    updateAltTextHiddenFields(altTexts) {
        // ê¸°ì¡´ íˆë“  í•„ë“œë“¤ ì œê±°
        this.wrapper.querySelectorAll('input[name*="altText"]').forEach(input => input.remove());
        
        // ìƒˆë¡œìš´ íˆë“  í•„ë“œë“¤ ìƒì„±
        altTexts.forEach((altText, index) => {
            if (altText) {
                const hiddenInput = document.createElement('input');
                hiddenInput.type = 'hidden';
                hiddenInput.name = `${this.input.name}_altText_${index}`;
                hiddenInput.value = altText;
                this.wrapper.appendChild(hiddenInput);
            }
        });

        // ë‹¨ì¼ íŒŒì¼ì¸ ê²½ìš° ê¸°ë³¸ ì´ë¦„ìœ¼ë¡œë„ ìƒì„±
        if (altTexts.length === 1 && altTexts[0]) {
            const hiddenInput = document.createElement('input');
            hiddenInput.type = 'hidden';
            hiddenInput.name = `${this.input.name.replace('File', 'AltText')}`;
            hiddenInput.value = altTexts[0];
            this.wrapper.appendChild(hiddenInput);
        }
    }
}

// ì „ì—­ ì‚¬ìš©ì„ ìœ„í•œ í•¨ìˆ˜
window.ImageCompressor = ImageCompressor;
window.ImageCompressorUI = ImageCompressorUI;

// ìë™ ì´ˆê¸°í™” (data-image-compressor ì†ì„±ì´ ìˆëŠ” inputë“¤ì— ëŒ€í•´)
document.addEventListener('DOMContentLoaded', () => {
    const inputs = document.querySelectorAll('input[type="file"][data-image-compressor]');
    inputs.forEach(input => {
        const options = input.dataset.imageCompressor ? JSON.parse(input.dataset.imageCompressor) : {};
        new ImageCompressorUI(`#${input.id}`, options);
    });
});
````

## File: src/main/resources/static/js/job-detail.js
````javascript
/**
 * êµ¬ì¸êµ¬ì§ ìƒì„¸ë³´ê¸° í˜ì´ì§€ JavaScript
 * Thymeleaf ì¶©ëŒ ë°©ì§€ë¥¼ ìœ„í•´ ë‹¨ìˆœí™”ëœ ë²„ì „
 */

// ì „ì—­ ë³€ìˆ˜
let currentJobId = null;

// DOM ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    console.log('êµ¬ì¸êµ¬ì§ ìƒì„¸ë³´ê¸° í˜ì´ì§€ JavaScript ë¡œë“œë¨');
    
    // URLì—ì„œ êµ¬ì¸êµ¬ì§ ID ì¶”ì¶œ
    currentJobId = extractJobIdFromUrl();
    if (!currentJobId) {
        currentJobId = document.getElementById('jobId')?.value;
    }
    console.log('í˜„ì¬ êµ¬ì¸êµ¬ì§ ID:', currentJobId);
    
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
    initializeEventListeners();
});

/**
 * URLì—ì„œ êµ¬ì¸êµ¬ì§ ID ì¶”ì¶œ
 */
function extractJobIdFromUrl() {
    const path = window.location.pathname;
    const segments = path.split('/');
    const detailIndex = segments.findIndex(segment => segment === 'detail');
    
    if (detailIndex !== -1 && detailIndex < segments.length - 1) {
        return segments[detailIndex + 1];
    }
    
    console.warn('URLì—ì„œ êµ¬ì¸êµ¬ì§ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', path);
    return null;
}

/**
 * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
 */
function initializeEventListeners() {
    // ì§€ì›í•˜ê¸° ë²„íŠ¼
    const applyBtn = document.querySelector('[onclick="applyJob()"]');
    if (applyBtn) {
        applyBtn.removeAttribute('onclick');
        applyBtn.addEventListener('click', applyJob);
    }
    
    // ì—°ë½í•˜ê¸° ë²„íŠ¼
    const contactBtn = document.querySelector('[onclick="contactJob()"]');
    if (contactBtn) {
        contactBtn.removeAttribute('onclick');
        contactBtn.addEventListener('click', contactJob);
    }
    
    // ê´€ì‹¬ë“±ë¡ ë²„íŠ¼
    const bookmarkBtn = document.querySelector('[onclick="bookmarkJob()"]');
    if (bookmarkBtn) {
        bookmarkBtn.removeAttribute('onclick');
        bookmarkBtn.addEventListener('click', bookmarkJob);
    }
    
    // ê³µìœ  ë²„íŠ¼
    const shareBtn = document.querySelector('[onclick="shareJob()"]');
    if (shareBtn) {
        shareBtn.removeAttribute('onclick');
        shareBtn.addEventListener('click', shareJob);
    }
    
    // ì‚­ì œ ë²„íŠ¼
    const deleteBtn = document.querySelector('[onclick="deleteJob()"]');
    if (deleteBtn) {
        deleteBtn.removeAttribute('onclick');
        deleteBtn.addEventListener('click', deleteJob);
    }
    
    // ìª½ì§€ ë³´ë‚´ê¸° ë²„íŠ¼
    const messageBtn = document.querySelector('[onclick="sendMessage()"]');
    if (messageBtn) {
        messageBtn.removeAttribute('onclick');
        messageBtn.addEventListener('click', sendMessage);
    }
    
    // ì‹ ê³  ë²„íŠ¼
    const reportBtn = document.querySelector('[onclick="reportJob()"]');
    if (reportBtn) {
        reportBtn.removeAttribute('onclick');
        reportBtn.addEventListener('click', reportJob);
    }
}

/**
 * ì§€ì›í•˜ê¸° ê¸°ëŠ¥
 */
function applyJob() {
    if (!currentJobId) {
        alert('ì˜¤ë¥˜: êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    if (confirm('ì´ êµ¬ì¸ì— ì§€ì›í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        // TODO: ì‹¤ì œ ì§€ì› ë¡œì§ êµ¬í˜„
        fetch(`/job/${currentJobId}/apply`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                jobId: currentJobId
            })
        })
        .then(response => {
            if (response.ok) {
                alert('ì§€ì›ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹´ë‹¹ìê°€ ì—°ë½ë“œë¦´ ì˜ˆì •ì…ë‹ˆë‹¤.');
                location.reload();
            } else {
                throw new Error('ì§€ì› ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        })
        .catch(error => {
            console.error('ì§€ì› ì˜¤ë¥˜:', error);
            alert('ì§€ì› ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
        });
    }
}

/**
 * ì—°ë½í•˜ê¸° ê¸°ëŠ¥
 */
function contactJob() {
    const contactPhone = document.querySelector('#contactPhone')?.value;
    const contactEmail = document.querySelector('#contactEmail')?.value;
    
    if (contactPhone) {
        if (confirm('ë‹´ë‹¹ìì—ê²Œ ì—°ë½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì—°ë½ì²˜: ' + contactPhone)) {
            window.location.href = 'tel:' + contactPhone;
        }
    } else if (contactEmail) {
        if (confirm('ë‹´ë‹¹ìì—ê²Œ ì´ë©”ì¼ì„ ë³´ë‚´ì‹œê² ìŠµë‹ˆê¹Œ?\nì´ë©”ì¼: ' + contactEmail)) {
            window.location.href = 'mailto:' + contactEmail;
        }
    } else {
        alert('ì—°ë½ì²˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
    }
}

/**
 * ê´€ì‹¬ë“±ë¡ ê¸°ëŠ¥
 */
function bookmarkJob() {
    if (!currentJobId) {
        alert('ì˜¤ë¥˜: êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    alert('ê´€ì‹¬ë“±ë¡ ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.');
}

/**
 * ê³µìœ  ê¸°ëŠ¥
 */
function shareJob() {
    const url = window.location.href;
    const title = document.querySelector('h3')?.textContent || 'êµ¬ì¸êµ¬ì§';
    
    if (navigator.share) {
        navigator.share({
            title: title,
            url: url
        }).catch(error => {
            console.log('ê³µìœ  ì‹¤íŒ¨:', error);
            fallbackShare(url);
        });
    } else {
        fallbackShare(url);
    }
}

/**
 * ê³µìœ  ê¸°ëŠ¥ ëŒ€ì²´ ë°©ë²• (í´ë¦½ë³´ë“œ ë³µì‚¬)
 */
function fallbackShare(url) {
    if (navigator.clipboard) {
        navigator.clipboard.writeText(url).then(() => {
            alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }).catch(() => {
            promptShare(url);
        });
    } else {
        promptShare(url);
    }
}

/**
 * URL ìˆ˜ë™ ë³µì‚¬ ì•ˆë‚´
 */
function promptShare(url) {
    const textArea = document.createElement('textarea');
    textArea.value = url;
    document.body.appendChild(textArea);
    textArea.select();
    
    try {
        document.execCommand('copy');
        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
    } catch (err) {
        alert('ë§í¬ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”:\n' + url);
    }
    
    document.body.removeChild(textArea);
}

/**
 * êµ¬ì¸êµ¬ì§ ì‚­ì œ ê¸°ëŠ¥
 */
function deleteJob() {
    if (!currentJobId) {
        alert('ì˜¤ë¥˜: êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    if (confirm('ì •ë§ë¡œ ì´ êµ¬ì¸êµ¬ì§ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ë°ì´í„°ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = `/job/delete/${currentJobId}`;
        
        // CSRF í† í°ì´ í•„ìš”í•œ ê²½ìš° ì¶”ê°€
        const csrfToken = document.querySelector('meta[name="_csrf"]');
        if (csrfToken) {
            const csrfInput = document.createElement('input');
            csrfInput.type = 'hidden';
            csrfInput.name = '_csrf';
            csrfInput.value = csrfToken.getAttribute('content');
            form.appendChild(csrfInput);
        }
        
        document.body.appendChild(form);
        form.submit();
    }
}

/**
 * ìª½ì§€ ë³´ë‚´ê¸° ê¸°ëŠ¥
 */
function sendMessage() {
    alert('ìª½ì§€ ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.');
}

/**
 * ì‹ ê³  ê¸°ëŠ¥
 */
function reportJob() {
    if (!currentJobId) {
        alert('ì˜¤ë¥˜: êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    const reason = prompt('ì‹ ê³  ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”:');
    if (reason && reason.trim()) {
        if (confirm('ì´ êµ¬ì¸êµ¬ì§ì„ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚¬ìœ : ' + reason)) {
            // TODO: ì‹¤ì œ ì‹ ê³  ë¡œì§ êµ¬í˜„
            fetch(`/job/${currentJobId}/report`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    jobId: currentJobId,
                    reason: reason.trim()
                })
            })
            .then(response => {
                if (response.ok) {
                    alert('ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ê²€í†  í›„ ì¡°ì¹˜í•˜ê² ìŠµë‹ˆë‹¤.');
                } else {
                    throw new Error('ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            })
            .catch(error => {
                console.error('ì‹ ê³  ì˜¤ë¥˜:', error);
                alert('ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            });
        }
    }
}
````

## File: src/main/resources/static/js/my-posts.js
````javascript
// ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ JavaScript
// Thymeleaf ì¸ë¼ì¸ JavaScriptë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì™„ì „íˆ ë¶„ë¦¬ëœ JavaScript íŒŒì¼

document.addEventListener('DOMContentLoaded', function() {
    // DOM ìš”ì†Œ ì„ íƒ
    const elements = {
        filterButtons: document.querySelectorAll('.filter-btn'),
        sortSelect: document.getElementById('sortSelect'),
        postsContainer: document.getElementById('postsContainer'),
        postItems: document.querySelectorAll('.post-item'),
        tableBody: document.querySelector('#postsContainer tbody')
    };

    // ë””ë²„ê¹…: DOM ìš”ì†Œ í™•ì¸
    console.log('ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ DOM ìš”ì†Œ:', {
        filterButtons: elements.filterButtons.length,
        sortSelect: elements.sortSelect ? 'found' : 'not found',
        postsContainer: elements.postsContainer ? 'found' : 'not found',
        postItems: elements.postItems.length,
        tableBody: elements.tableBody ? 'found' : 'not found'
    });

    // í˜„ì¬ URLì—ì„œ íŒŒë¼ë¯¸í„° ì¶”ì¶œ
    const urlParams = new URLSearchParams(window.location.search);
    const currentType = urlParams.get('type') || 'all';
    const currentPage = parseInt(urlParams.get('page')) || 1;
    const currentPageSize = parseInt(urlParams.get('pageSize')) || 10;

    // í•„í„° ë²„íŠ¼ ì´ë²¤íŠ¸ ì„¤ì •
    function setupFilterButtons() {
        elements.filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                const selectedType = this.getAttribute('data-type');
                
                if (selectedType !== currentType) {
                    // URL íŒŒë¼ë¯¸í„°ë¥¼ ë³€ê²½í•˜ì—¬ í˜ì´ì§€ ì´ë™
                    const newUrl = new URL(window.location.href);
                    newUrl.searchParams.set('type', selectedType);
                    newUrl.searchParams.set('page', '1'); // ì²« í˜ì´ì§€ë¡œ ë¦¬ì…‹
                    
                    console.log('í•„í„° ë³€ê²½:', selectedType);
                    window.location.href = newUrl.toString();
                }
            });
        });
    }

    // ì •ë ¬ ê¸°ëŠ¥
    function setupSorting() {
        if (!elements.sortSelect || !elements.tableBody) return;

        elements.sortSelect.addEventListener('change', function() {
            const sortType = this.value;
            console.log('ì •ë ¬ ë³€ê²½:', sortType);
            
            // í˜„ì¬ ë³´ì´ëŠ” ê²Œì‹œê¸€ë“¤ì„ ë°°ì—´ë¡œ ë³€í™˜
            const rows = Array.from(elements.tableBody.querySelectorAll('.post-item'));
            
            // ì •ë ¬ ê¸°ì¤€ì— ë”°ë¼ ì •ë ¬
            rows.sort((a, b) => {
                switch (sortType) {
                    case 'latest':
                        // ìµœì‹ ìˆœ (ê¸°ë³¸ê°’)
                        const dateA = new Date(a.getAttribute('data-created'));
                        const dateB = new Date(b.getAttribute('data-created'));
                        return dateB - dateA;
                        
                    case 'oldest':
                        // ì˜¤ë˜ëœìˆœ
                        const oldDateA = new Date(a.getAttribute('data-created'));
                        const oldDateB = new Date(b.getAttribute('data-created'));
                        return oldDateA - oldDateB;
                        
                    case 'views':
                        // ì¡°íšŒìˆœ
                        const viewsA = parseInt(a.getAttribute('data-views')) || 0;
                        const viewsB = parseInt(b.getAttribute('data-views')) || 0;
                        return viewsB - viewsA;
                        
                    case 'likes':
                        // ì¶”ì²œìˆœ
                        const likesA = parseInt(a.getAttribute('data-likes')) || 0;
                        const likesB = parseInt(b.getAttribute('data-likes')) || 0;
                        return likesB - likesA;
                        
                    default:
                        return 0;
                }
            });
            
            // ì •ë ¬ëœ ìˆœì„œë¡œ DOM ì¬ë°°ì¹˜
            rows.forEach(row => {
                elements.tableBody.appendChild(row);
            });
            
            // ì •ë ¬ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
            rows.forEach((row, index) => {
                row.style.opacity = '0.5';
                setTimeout(() => {
                    row.style.opacity = '1';
                    row.style.transition = 'opacity 0.2s ease';
                }, index * 30);
            });
        });
    }

    // í…Œì´ë¸” í–‰ í˜¸ë²„ íš¨ê³¼ (ê°„ë‹¨í•œ)
    function setupRowEffects() {
        const postRows = document.querySelectorAll('.post-item');
        
        postRows.forEach(row => {
            row.addEventListener('mouseenter', function() {
                this.style.backgroundColor = '#f8f9fa';
            });
            
            row.addEventListener('mouseleave', function() {
                this.style.backgroundColor = '';
            });
        });
    }

    // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ë©”ì‹œì§€
    function showLoadedMessage() {
        const totalPosts = elements.postItems.length;
        if (totalPosts > 0) {
            console.log(`ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ: ${totalPosts}ê°œ ê²Œì‹œê¸€`);
        }
    }

    // ì´ˆê¸°í™” í•¨ìˆ˜
    function init() {
        setupFilterButtons();
        setupSorting();
        setupRowEffects();
        showLoadedMessage();
        
        console.log('ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ JavaScript ì´ˆê¸°í™” ì™„ë£Œ');
    }

    // ì´ˆê¸°í™” ì‹¤í–‰
    init();
});
````

## File: src/main/resources/static/js/phone-formatter.js
````javascript
/**
 * í•œêµ­ ì „í™”ë²ˆí˜¸ í¬ë§·íŒ… ìœ í‹¸ë¦¬í‹°
 * ì§€ì—­ë²ˆí˜¸ë³„ ì •í™•í•œ í˜•ì‹ ì ìš©
 */
class PhoneFormatter {
    constructor() {
        // ì§€ì—­ë²ˆí˜¸ë³„ íŒ¨í„´ ì •ì˜
        this.patterns = {
            // ì„œìš¸ (02): 2-3-4 ë˜ëŠ” 2-4-4
            '^02': [
                { pattern: /^(02)(\d{3})(\d{4})$/, format: '$1-$2-$3' },
                { pattern: /^(02)(\d{4})(\d{4})$/, format: '$1-$2-$3' }
            ],
            // ë¶€ì‚°(051), ëŒ€êµ¬(053), ì¸ì²œ(032), ê´‘ì£¼(062), ëŒ€ì „(042), ìš¸ì‚°(052): 3-3-4
            '^(051|053|032|062|042|052)': [
                { pattern: /^(051|053|032|062|042|052)(\d{3})(\d{4})$/, format: '$1-$2-$3' }
            ],
            // ê²½ê¸° ì§€ì—­ (031): 3-3-4 ë˜ëŠ” 3-4-4
            '^031': [
                { pattern: /^(031)(\d{3})(\d{4})$/, format: '$1-$2-$3' },
                { pattern: /^(031)(\d{4})(\d{4})$/, format: '$1-$2-$3' }
            ],
            // ê°•ì›ë„ (033): 3-3-4
            '^033': [
                { pattern: /^(033)(\d{3})(\d{4})$/, format: '$1-$2-$3' }
            ],
            // ì¶©ë¶ (043): 3-3-4
            '^043': [
                { pattern: /^(043)(\d{3})(\d{4})$/, format: '$1-$2-$3' }
            ],
            // ì¶©ë‚¨ (041): 3-3-4
            '^041': [
                { pattern: /^(041)(\d{3})(\d{4})$/, format: '$1-$2-$3' }
            ],
            // ì „ë¶ (063): 3-3-4
            '^063': [
                { pattern: /^(063)(\d{3})(\d{4})$/, format: '$1-$2-$3' }
            ],
            // ì „ë‚¨ (061): 3-3-4
            '^061': [
                { pattern: /^(061)(\d{3})(\d{4})$/, format: '$1-$2-$3' }
            ],
            // ê²½ë¶ (054): 3-3-4
            '^054': [
                { pattern: /^(054)(\d{3})(\d{4})$/, format: '$1-$2-$3' }
            ],
            // ê²½ë‚¨ (055): 3-3-4
            '^055': [
                { pattern: /^(055)(\d{3})(\d{4})$/, format: '$1-$2-$3' }
            ],
            // ì œì£¼ (064): 3-3-4
            '^064': [
                { pattern: /^(064)(\d{3})(\d{4})$/, format: '$1-$2-$3' }
            ],
            // íœ´ëŒ€í° (010, 011, 016, 017, 018, 019): 3-4-4
            '^(010|011|016|017|018|019)': [
                { pattern: /^(010|011|016|017|018|019)(\d{4})(\d{4})$/, format: '$1-$2-$3' }
            ],
            // ì¸í„°ë„· ì „í™” (070): 3-4-4
            '^070': [
                { pattern: /^(070)(\d{4})(\d{4})$/, format: '$1-$2-$3' }
            ],
            // ê¸°íƒ€ 4ìë¦¬ ì§€ì—­ë²ˆí˜¸: 4-3-4
            '^(0\d{3})': [
                { pattern: /^(0\d{3})(\d{3})(\d{4})$/, format: '$1-$2-$3' }
            ]
        };
    }

    /**
     * ì „í™”ë²ˆí˜¸ë¥¼ ì§€ì—­ë²ˆí˜¸ì— ë§ê²Œ í¬ë§·íŒ…
     * @param {string} phone - í¬ë§·íŒ…í•  ì „í™”ë²ˆí˜¸
     * @returns {string} í¬ë§·íŒ…ëœ ì „í™”ë²ˆí˜¸
     */
    format(phone) {
        if (!phone) return '';
        
        // ìˆ«ìë§Œ ì¶”ì¶œ
        const cleaned = phone.replace(/\D/g, '');
        
        // ë¹ˆ ë¬¸ìì—´ì´ê±°ë‚˜ ë„ˆë¬´ ì§§ìœ¼ë©´ ê·¸ëŒ€ë¡œ ë°˜í™˜
        if (!cleaned || cleaned.length < 8) {
            return cleaned;
        }

        // ê° íŒ¨í„´ì— ëŒ€í•´ ë§¤ì¹­ ì‹œë„
        for (const [areaCodePattern, formatRules] of Object.entries(this.patterns)) {
            const areaRegex = new RegExp(areaCodePattern);
            
            if (areaRegex.test(cleaned)) {
                // í•´ë‹¹ ì§€ì—­ë²ˆí˜¸ì˜ í¬ë§· ê·œì¹™ë“¤ì„ ì‹œë„
                for (const rule of formatRules) {
                    if (rule.pattern.test(cleaned)) {
                        return cleaned.replace(rule.pattern, rule.format);
                    }
                }
            }
        }

        // ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš° ê¸°ë³¸ í¬ë§· ì ìš©
        return this.applyDefaultFormat(cleaned);
    }

    /**
     * ê¸°ë³¸ í¬ë§· ì ìš© (ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ë²ˆí˜¸ìš©)
     * @param {string} cleaned - ìˆ«ìë§Œ ìˆëŠ” ì „í™”ë²ˆí˜¸
     * @returns {string} ê¸°ë³¸ í¬ë§·íŒ…ëœ ì „í™”ë²ˆí˜¸
     */
    applyDefaultFormat(cleaned) {
        if (cleaned.length === 10) {
            // 10ìë¦¬: 3-3-4
            return cleaned.replace(/^(\d{3})(\d{3})(\d{4})$/, '$1-$2-$3');
        } else if (cleaned.length === 11) {
            // 11ìë¦¬: 3-4-4 (íœ´ëŒ€í°) ë˜ëŠ” 4-3-4 (ì¼ë¶€ ì§€ì—­ë²ˆí˜¸)
            if (cleaned.startsWith('010') || cleaned.startsWith('070')) {
                return cleaned.replace(/^(\d{3})(\d{4})(\d{4})$/, '$1-$2-$3');
            } else {
                return cleaned.replace(/^(\d{4})(\d{3})(\d{4})$/, '$1-$2-$3');
            }
        } else if (cleaned.length === 9) {
            // 9ìë¦¬: 2-3-4 (ì„œìš¸ ì¼ë¶€)
            return cleaned.replace(/^(\d{2})(\d{3})(\d{4})$/, '$1-$2-$3');
        }
        
        return cleaned;
    }

    /**
     * ì „í™”ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
     * @param {string} phone - ê²€ì‚¬í•  ì „í™”ë²ˆí˜¸
     * @returns {object} ê²€ì‚¬ ê²°ê³¼
     */
    validate(phone) {
        const cleaned = phone.replace(/\D/g, '');
        const result = {
            isValid: false,
            type: '',
            message: '',
            formatted: ''
        };

        if (!cleaned) {
            result.message = 'ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
            return result;
        }

        if (cleaned.length < 8) {
            result.message = 'ì „í™”ë²ˆí˜¸ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤.';
            return result;
        }

        if (cleaned.length > 11) {
            result.message = 'ì „í™”ë²ˆí˜¸ê°€ ë„ˆë¬´ ê¹ë‹ˆë‹¤.';
            return result;
        }

        // íœ´ëŒ€í° ë²ˆí˜¸ ê²€ì‚¬
        if (/^(010|011|016|017|018|019)\d{8}$/.test(cleaned)) {
            result.isValid = true;
            result.type = 'íœ´ëŒ€í°';
            result.formatted = this.format(cleaned);
            result.message = 'ì˜¬ë°”ë¥¸ íœ´ëŒ€í° ë²ˆí˜¸ì…ë‹ˆë‹¤.';
            return result;
        }

        // ì¸í„°ë„· ì „í™” ê²€ì‚¬
        if (/^070\d{8}$/.test(cleaned)) {
            result.isValid = true;
            result.type = 'ì¸í„°ë„·ì „í™”';
            result.formatted = this.format(cleaned);
            result.message = 'ì˜¬ë°”ë¥¸ ì¸í„°ë„·ì „í™” ë²ˆí˜¸ì…ë‹ˆë‹¤.';
            return result;
        }

        // ì¼ë°˜ ì „í™” ê²€ì‚¬
        for (const [areaCodePattern, formatRules] of Object.entries(this.patterns)) {
            const areaRegex = new RegExp(areaCodePattern);
            
            if (areaRegex.test(cleaned)) {
                for (const rule of formatRules) {
                    if (rule.pattern.test(cleaned)) {
                        result.isValid = true;
                        result.type = 'ì¼ë°˜ì „í™”';
                        result.formatted = this.format(cleaned);
                        result.message = 'ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ì…ë‹ˆë‹¤.';
                        return result;
                    }
                }
            }
        }

        result.message = 'ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì „í™”ë²ˆí˜¸ í˜•ì‹ì…ë‹ˆë‹¤.';
        return result;
    }

    /**
     * ì‹¤ì‹œê°„ í¬ë§·íŒ…ì„ ìœ„í•œ ì…ë ¥ í•¸ë“¤ëŸ¬
     * @param {HTMLElement} input - ì…ë ¥ í•„ë“œ
     */
    attachToInput(input) {
        if (!input) return;

        const self = this;
        let lastValue = '';

        // ì…ë ¥ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
        input.addEventListener('input', function(e) {
            const currentValue = e.target.value;
            const cursorPosition = e.target.selectionStart;
            const formatted = self.format(currentValue);
            
            // í¬ë§·íŒ…ëœ ê°’ì´ ë‹¤ë¥´ë©´ ì—…ë°ì´íŠ¸
            if (formatted !== currentValue) {
                e.target.value = formatted;
                
                // ì»¤ì„œ ìœ„ì¹˜ ì¡°ì •
                const diff = formatted.length - currentValue.length;
                e.target.setSelectionRange(cursorPosition + diff, cursorPosition + diff);
            }
            
            lastValue = formatted;
        });

        // í¬ì»¤ìŠ¤ ì•„ì›ƒ ì‹œ ìœ íš¨ì„± ê²€ì‚¬
        input.addEventListener('blur', function(e) {
            const validation = self.validate(e.target.value);
            
            // ìœ íš¨ì„± ê²€ì‚¬ ê²°ê³¼ì— ë”°ë¥¸ UI ì—…ë°ì´íŠ¸
            const feedbackElement = input.parentNode.querySelector('.phone-feedback');
            if (feedbackElement) {
                feedbackElement.remove();
            }

            if (e.target.value.trim() !== '') {
                const feedback = document.createElement('div');
                feedback.className = `phone-feedback small mt-1 ${validation.isValid ? 'text-success' : 'text-danger'}`;
                feedback.innerHTML = `<i class="fas ${validation.isValid ? 'fa-check-circle' : 'fa-exclamation-circle'} me-1"></i>${validation.message}`;
                
                input.parentNode.appendChild(feedback);
                
                if (validation.isValid) {
                    input.classList.remove('is-invalid');
                    input.classList.add('is-valid');
                } else {
                    input.classList.remove('is-valid');
                    input.classList.add('is-invalid');
                }
            } else {
                input.classList.remove('is-valid', 'is-invalid');
            }
        });

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ (ìˆ«ìì™€ í•˜ì´í”ˆë§Œ í—ˆìš©)
        input.addEventListener('keypress', function(e) {
            const allowedKeys = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '-', 'Backspace', 'Delete', 'Tab', 'Enter'];
            
            if (!allowedKeys.includes(e.key) && !e.ctrlKey && !e.metaKey) {
                e.preventDefault();
            }
        });
    }
}

// ì „ì—­ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
window.phoneFormatter = new PhoneFormatter();

// DOMì´ ë¡œë“œë˜ë©´ ìë™ìœ¼ë¡œ ì „í™”ë²ˆí˜¸ í•„ë“œì— ì ìš©
document.addEventListener('DOMContentLoaded', function() {
    // ì „í™”ë²ˆí˜¸ ì…ë ¥ í•„ë“œ ìë™ ê°ì§€ ë° ì ìš©
    const phoneInputs = document.querySelectorAll('input[type="tel"], input[name*="phone"], input[id*="phone"]');
    
    phoneInputs.forEach(input => {
        window.phoneFormatter.attachToInput(input);
    });
});
````

## File: src/main/resources/static/js/rich-text-editor.js
````javascript
/**
 * ë¼ì´íŠ¸ì¼€ì–´ ì „ìš© ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„°
 * í…Œì´ë¸”, ì´ë¯¸ì§€, ë§í¬ ë“± ê³ ê¸‰ ì„œì‹ ê¸°ëŠ¥ ì§€ì›
 */
class RichTextEditor {
    constructor(selector, options = {}) {
        this.element = document.querySelector(selector);
        if (!this.element) {
            console.error('RichTextEditor: Element not found:', selector);
            return;
        }

        this.options = {
            height: options.height || '300px',
            placeholder: options.placeholder || 'ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...',
            enableImage: options.enableImage !== false,
            enableTable: options.enableTable !== false,
            enableLink: options.enableLink !== false,
            imageUploadUrl: options.imageUploadUrl || '/api/upload/image',
            maxImageSize: options.maxImageSize || 5 * 1024 * 1024, // 5MB
            allowedImageTypes: options.allowedImageTypes || ['image/jpeg', 'image/png', 'image/gif', 'image/webp'],
            toolbar: options.toolbar || [
                'bold', 'italic', 'underline', 'strikethrough',
                '|',
                'fontSize', 'color', 'backgroundColor',
                '|',
                'alignLeft', 'alignCenter', 'alignRight', 'alignJustify',
                '|',
                'orderedList', 'unorderedList', 'indent', 'outdent',
                '|',
                'link', 'image', 'table',
                '|',
                'blockquote', 'codeBlock',
                '|',
                'undo', 'redo',
                '|',
                'fullscreen', 'sourceCode'
            ],
            ...options
        };

        this.init();
    }

    init() {
        this.createEditor();
        this.bindEvents();
        this.initializeContent();
    }

    createEditor() {
        // ê¸°ì¡´ textarea ìˆ¨ê¸°ê¸°
        this.element.style.display = 'none';

        // ì—ë””í„° ì»¨í…Œì´ë„ˆ ìƒì„±
        this.container = document.createElement('div');
        this.container.className = 'rich-text-editor';
        this.container.innerHTML = `
            <div class="rte-toolbar">
                ${this.generateToolbar()}
            </div>
            <div class="rte-content" contenteditable="true" style="height: ${this.options.height}">
                ${this.options.placeholder ? `<p class="rte-placeholder">${this.options.placeholder}</p>` : ''}
            </div>
            <div class="rte-statusbar">
                <span class="rte-word-count">ë‹¨ì–´ ìˆ˜: 0</span>
                <span class="rte-char-count">ê¸€ì ìˆ˜: 0</span>
            </div>
        `;

        // textarea ë‹¤ìŒì— ì—ë””í„° ì‚½ì…
        this.element.parentNode.insertBefore(this.container, this.element.nextSibling);

        // ì—ë””í„° ìš”ì†Œë“¤ ì°¸ì¡° ì €ì¥
        this.toolbar = this.container.querySelector('.rte-toolbar');
        this.content = this.container.querySelector('.rte-content');
        this.statusbar = this.container.querySelector('.rte-statusbar');

        // íˆë“  íŒŒì¼ ì…ë ¥ ìƒì„± (ì´ë¯¸ì§€ ì—…ë¡œë“œìš©)
        this.fileInput = document.createElement('input');
        this.fileInput.type = 'file';
        this.fileInput.accept = this.options.allowedImageTypes.join(',');
        this.fileInput.style.display = 'none';
        this.container.appendChild(this.fileInput);
    }

    generateToolbar() {
        const toolbarGroups = [];
        let currentGroup = [];

        this.options.toolbar.forEach(tool => {
            if (tool === '|') {
                if (currentGroup.length > 0) {
                    toolbarGroups.push(currentGroup);
                    currentGroup = [];
                }
            } else {
                currentGroup.push(tool);
            }
        });

        if (currentGroup.length > 0) {
            toolbarGroups.push(currentGroup);
        }

        return toolbarGroups.map(group => 
            `<div class="rte-toolbar-group">
                ${group.map(tool => this.generateToolButton(tool)).join('')}
            </div>`
        ).join('');
    }

    generateToolButton(tool) {
        const buttons = {
            'bold': '<button type="button" class="rte-btn" data-command="bold" title="êµµê²Œ (Ctrl+B)"><i class="fas fa-bold"></i></button>',
            'italic': '<button type="button" class="rte-btn" data-command="italic" title="ê¸°ìš¸ì„ (Ctrl+I)"><i class="fas fa-italic"></i></button>',
            'underline': '<button type="button" class="rte-btn" data-command="underline" title="ë°‘ì¤„ (Ctrl+U)"><i class="fas fa-underline"></i></button>',
            'strikethrough': '<button type="button" class="rte-btn" data-command="strikeThrough" title="ì·¨ì†Œì„ "><i class="fas fa-strikethrough"></i></button>',
            
            'fontSize': `<select class="rte-select" data-command="fontSize" title="ê¸€ì í¬ê¸°">
                <option value="">í¬ê¸°</option>
                <option value="1">ë§¤ìš° ì‘ê²Œ</option>
                <option value="2">ì‘ê²Œ</option>
                <option value="3">ë³´í†µ</option>
                <option value="4">í¬ê²Œ</option>
                <option value="5">ë§¤ìš° í¬ê²Œ</option>
                <option value="6">ë” í¬ê²Œ</option>
                <option value="7">ê°€ì¥ í¬ê²Œ</option>
            </select>`,
            
            'color': '<input type="color" class="rte-color" data-command="foreColor" title="ê¸€ì ìƒ‰ìƒ" value="#000000">',
            'backgroundColor': '<input type="color" class="rte-color" data-command="backColor" title="ë°°ê²½ ìƒ‰ìƒ" value="#ffffff">',
            
            'alignLeft': '<button type="button" class="rte-btn" data-command="justifyLeft" title="ì™¼ìª½ ì •ë ¬"><i class="fas fa-align-left"></i></button>',
            'alignCenter': '<button type="button" class="rte-btn" data-command="justifyCenter" title="ê°€ìš´ë° ì •ë ¬"><i class="fas fa-align-center"></i></button>',
            'alignRight': '<button type="button" class="rte-btn" data-command="justifyRight" title="ì˜¤ë¥¸ìª½ ì •ë ¬"><i class="fas fa-align-right"></i></button>',
            'alignJustify': '<button type="button" class="rte-btn" data-command="justifyFull" title="ì–‘ìª½ ì •ë ¬"><i class="fas fa-align-justify"></i></button>',
            
            'orderedList': '<button type="button" class="rte-btn" data-command="insertOrderedList" title="ë²ˆí˜¸ ëª©ë¡"><i class="fas fa-list-ol"></i></button>',
            'unorderedList': '<button type="button" class="rte-btn" data-command="insertUnorderedList" title="ê¸€ë¨¸ë¦¬ ëª©ë¡"><i class="fas fa-list-ul"></i></button>',
            'indent': '<button type="button" class="rte-btn" data-command="indent" title="ë“¤ì—¬ì“°ê¸°"><i class="fas fa-indent"></i></button>',
            'outdent': '<button type="button" class="rte-btn" data-command="outdent" title="ë‚´ì–´ì“°ê¸°"><i class="fas fa-outdent"></i></button>',
            
            'link': '<button type="button" class="rte-btn" data-command="createLink" title="ë§í¬ ì‚½ì…"><i class="fas fa-link"></i></button>',
            'image': '<button type="button" class="rte-btn" data-command="insertImage" title="ì´ë¯¸ì§€ ì‚½ì…"><i class="fas fa-image"></i></button>',
            'table': '<button type="button" class="rte-btn" data-command="insertTable" title="í…Œì´ë¸” ì‚½ì…"><i class="fas fa-table"></i></button>',
            
            'blockquote': '<button type="button" class="rte-btn" data-command="blockquote" title="ì¸ìš©ë¬¸"><i class="fas fa-quote-left"></i></button>',
            'codeBlock': '<button type="button" class="rte-btn" data-command="code" title="ì½”ë“œ ë¸”ë¡"><i class="fas fa-code"></i></button>',
            
            'undo': '<button type="button" class="rte-btn" data-command="undo" title="ì‹¤í–‰ ì·¨ì†Œ (Ctrl+Z)"><i class="fas fa-undo"></i></button>',
            'redo': '<button type="button" class="rte-btn" data-command="redo" title="ë‹¤ì‹œ ì‹¤í–‰ (Ctrl+Y)"><i class="fas fa-redo"></i></button>',
            
            'fullscreen': '<button type="button" class="rte-btn" data-command="fullscreen" title="ì „ì²´í™”ë©´"><i class="fas fa-expand"></i></button>',
            'sourceCode': '<button type="button" class="rte-btn" data-command="sourceCode" title="ì†ŒìŠ¤ ì½”ë“œ ë³´ê¸°"><i class="fas fa-code"></i></button>'
        };

        return buttons[tool] || '';
    }

    bindEvents() {
        // íˆ´ë°” ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        this.toolbar.addEventListener('click', (e) => {
            const button = e.target.closest('.rte-btn');
            if (button) {
                e.preventDefault();
                this.executeCommand(button.dataset.command);
            }
        });

        // ì…€ë ‰íŠ¸ ë°•ìŠ¤ ë³€ê²½ ì´ë²¤íŠ¸
        this.toolbar.addEventListener('change', (e) => {
            if (e.target.classList.contains('rte-select')) {
                this.executeCommand(e.target.dataset.command, e.target.value);
            }
        });

        // ìƒ‰ìƒ ì„ íƒ ì´ë²¤íŠ¸
        this.toolbar.addEventListener('input', (e) => {
            if (e.target.classList.contains('rte-color')) {
                this.executeCommand(e.target.dataset.command, e.target.value);
            }
        });

        // ì—ë””í„° ë‚´ìš© ë³€ê²½ ì´ë²¤íŠ¸
        this.content.addEventListener('input', () => {
            this.updateOriginalTextarea();
            this.updateStatusBar();
            this.handlePlaceholder();
        });

        // ì—ë””í„° í¬ì»¤ìŠ¤ ì´ë²¤íŠ¸
        this.content.addEventListener('focus', () => {
            this.handlePlaceholder();
        });

        // ì—ë””í„° ë¸”ëŸ¬ ì´ë²¤íŠ¸
        this.content.addEventListener('blur', () => {
            this.handlePlaceholder();
        });

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        this.content.addEventListener('keydown', (e) => {
            this.handleKeyboardShortcuts(e);
        });

        // íŒŒì¼ ì…ë ¥ ë³€ê²½ ì´ë²¤íŠ¸
        this.fileInput.addEventListener('change', (e) => {
            this.handleImageUpload(e.target.files[0]);
        });

        // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì´ë²¤íŠ¸
        this.content.addEventListener('dragover', (e) => {
            e.preventDefault();
            this.content.classList.add('rte-dragover');
        });

        this.content.addEventListener('dragleave', (e) => {
            e.preventDefault();
            this.content.classList.remove('rte-dragover');
        });

        this.content.addEventListener('drop', (e) => {
            e.preventDefault();
            this.content.classList.remove('rte-dragover');
            
            const files = Array.from(e.dataTransfer.files);
            const imageFile = files.find(file => this.options.allowedImageTypes.includes(file.type));
            
            if (imageFile) {
                this.handleImageUpload(imageFile);
            }
        });
    }

    executeCommand(command, value = null) {
        this.content.focus();

        switch (command) {
            case 'createLink':
                this.insertLink();
                break;
            case 'insertImage':
                this.insertImage();
                break;
            case 'insertTable':
                this.insertTable();
                break;
            case 'blockquote':
                this.insertBlockquote();
                break;
            case 'code':
                this.insertCodeBlock();
                break;
            case 'fullscreen':
                this.toggleFullscreen();
                break;
            case 'sourceCode':
                this.toggleSourceCode();
                break;
            case 'fontSize':
                if (value) {
                    document.execCommand('fontSize', false, value);
                }
                break;
            case 'foreColor':
            case 'backColor':
                document.execCommand(command, false, value);
                break;
            default:
                document.execCommand(command, false, value);
        }

        this.updateOriginalTextarea();
    }

    insertLink() {
        const selection = window.getSelection();
        const selectedText = selection.toString();
        
        const url = prompt('ë§í¬ URLì„ ì…ë ¥í•˜ì„¸ìš”:', 'https://');
        if (url && url !== 'https://') {
            const linkText = selectedText || prompt('ë§í¬ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:', url);
            if (linkText) {
                const link = `<a href="${url}" target="_blank" rel="noopener noreferrer">${linkText}</a>`;
                this.insertHTML(link);
            }
        }
    }

    insertImage() {
        this.fileInput.click();
    }

    async handleImageUpload(file) {
        if (!file) return;

        // íŒŒì¼ íƒ€ì… ê²€ì¦
        if (!this.options.allowedImageTypes.includes(file.type)) {
            alert('ì§€ì›ë˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ í˜•ì‹ì…ë‹ˆë‹¤.');
            return;
        }

        // íŒŒì¼ í¬ê¸° ê²€ì¦
        if (file.size > this.options.maxImageSize) {
            alert(`ì´ë¯¸ì§€ í¬ê¸°ëŠ” ${this.formatFileSize(this.options.maxImageSize)} ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.`);
            return;
        }

        // ë¡œë”© í‘œì‹œ
        const loadingImg = '<span class="rte-loading">ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘... <i class="fas fa-spinner fa-spin"></i></span>';
        this.insertHTML(loadingImg);

        try {
            // ì´ë¯¸ì§€ ì••ì¶• (ì´ì „ì— ë§Œë“  ImageCompressor ì‚¬ìš©)
            if (window.ImageCompressor) {
                const compressor = new ImageCompressor({
                    quality: 0.8,
                    maxWidth: 1200,
                    maxHeight: 800
                });
                
                const result = await compressor.compressFile(file);
                file = result.file;
            }

            // ì„ì‹œë¡œ base64ë¡œ ë³€í™˜í•˜ì—¬ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
            const reader = new FileReader();
            reader.onload = (e) => {
                const img = `<img src="${e.target.result}" alt="ì—…ë¡œë“œëœ ì´ë¯¸ì§€" style="max-width: 100%; height: auto;" class="rte-uploaded-image">`;
                
                // ë¡œë”© ìŠ¤í”¼ë„ˆ ì œê±° í›„ ì´ë¯¸ì§€ ì‚½ì…
                const loadingSpan = this.content.querySelector('.rte-loading');
                if (loadingSpan) {
                    loadingSpan.outerHTML = img;
                } else {
                    this.insertHTML(img);
                }
                
                this.updateOriginalTextarea();
            };
            reader.readAsDataURL(file);

            // ì‹¤ì œ ì„œë²„ ì—…ë¡œë“œëŠ” í¼ ì œì¶œ ì‹œ ì²˜ë¦¬í•˜ê±°ë‚˜ ë³„ë„ API í˜¸ì¶œ
            
        } catch (error) {
            console.error('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨:', error);
            alert('ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            
            // ë¡œë”© ìŠ¤í”¼ë„ˆ ì œê±°
            const loadingSpan = this.content.querySelector('.rte-loading');
            if (loadingSpan) {
                loadingSpan.remove();
            }
        }
    }

    insertTable() {
        const rows = prompt('í–‰ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”:', '3');
        const cols = prompt('ì—´ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”:', '3');
        
        if (rows && cols && !isNaN(rows) && !isNaN(cols)) {
            let table = '<table class="rte-table table table-bordered"><tbody>';
            
            for (let i = 0; i < parseInt(rows); i++) {
                table += '<tr>';
                for (let j = 0; j < parseInt(cols); j++) {
                    table += '<td>&nbsp;</td>';
                }
                table += '</tr>';
            }
            
            table += '</tbody></table><p>&nbsp;</p>';
            this.insertHTML(table);
        }
    }

    insertBlockquote() {
        const selection = window.getSelection();
        const selectedText = selection.toString();
        
        if (selectedText) {
            const blockquote = `<blockquote class="blockquote">${selectedText}</blockquote>`;
            this.insertHTML(blockquote);
        } else {
            const blockquote = '<blockquote class="blockquote">ì¸ìš©ë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”...</blockquote>';
            this.insertHTML(blockquote);
        }
    }

    insertCodeBlock() {
        const selection = window.getSelection();
        const selectedText = selection.toString();
        
        if (selectedText) {
            const code = `<pre><code>${selectedText}</code></pre>`;
            this.insertHTML(code);
        } else {
            const code = '<pre><code>ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”...</code></pre>';
            this.insertHTML(code);
        }
    }

    insertHTML(html) {
        if (document.queryCommandSupported('insertHTML')) {
            document.execCommand('insertHTML', false, html);
        } else {
            // fallback for browsers that don't support insertHTML
            const selection = window.getSelection();
            if (selection.rangeCount > 0) {
                const range = selection.getRangeAt(0);
                range.deleteContents();
                
                const div = document.createElement('div');
                div.innerHTML = html;
                
                const fragment = document.createDocumentFragment();
                while (div.firstChild) {
                    fragment.appendChild(div.firstChild);
                }
                
                range.insertNode(fragment);
            }
        }
    }

    toggleFullscreen() {
        this.container.classList.toggle('rte-fullscreen');
        const btn = this.toolbar.querySelector('[data-command="fullscreen"] i');
        btn.className = this.container.classList.contains('rte-fullscreen') 
            ? 'fas fa-compress' 
            : 'fas fa-expand';
    }

    toggleSourceCode() {
        const isSourceMode = this.container.classList.contains('rte-source-mode');
        
        if (isSourceMode) {
            // ì†ŒìŠ¤ ëª¨ë“œì—ì„œ ì—ë””í„° ëª¨ë“œë¡œ
            const sourceTextarea = this.container.querySelector('.rte-source-textarea');
            this.content.innerHTML = sourceTextarea.value;
            sourceTextarea.remove();
            this.container.classList.remove('rte-source-mode');
        } else {
            // ì—ë””í„° ëª¨ë“œì—ì„œ ì†ŒìŠ¤ ëª¨ë“œë¡œ
            const sourceTextarea = document.createElement('textarea');
            sourceTextarea.className = 'rte-source-textarea';
            sourceTextarea.style.cssText = `
                width: 100%;
                height: ${this.options.height};
                border: none;
                outline: none;
                font-family: 'Courier New', monospace;
                font-size: 14px;
                padding: 10px;
                resize: none;
            `;
            sourceTextarea.value = this.content.innerHTML;
            
            this.content.style.display = 'none';
            this.content.parentNode.appendChild(sourceTextarea);
            this.container.classList.add('rte-source-mode');
        }
    }

    handleKeyboardShortcuts(e) {
        if (e.ctrlKey || e.metaKey) {
            switch (e.key.toLowerCase()) {
                case 'b':
                    e.preventDefault();
                    this.executeCommand('bold');
                    break;
                case 'i':
                    e.preventDefault();
                    this.executeCommand('italic');
                    break;
                case 'u':
                    e.preventDefault();
                    this.executeCommand('underline');
                    break;
                case 'z':
                    e.preventDefault();
                    this.executeCommand('undo');
                    break;
                case 'y':
                    e.preventDefault();
                    this.executeCommand('redo');
                    break;
            }
        }
    }

    handlePlaceholder() {
        const placeholder = this.content.querySelector('.rte-placeholder');
        const isEmpty = this.content.textContent.trim() === '' || 
                       (this.content.innerHTML.trim() === '<p class="rte-placeholder">' + this.options.placeholder + '</p>');

        if (isEmpty && !placeholder) {
            this.content.innerHTML = `<p class="rte-placeholder">${this.options.placeholder}</p>`;
        } else if (!isEmpty && placeholder) {
            placeholder.remove();
        }
    }

    updateOriginalTextarea() {
        let content = this.content.innerHTML;
        
        // placeholder ì œê±°
        if (content.includes('rte-placeholder')) {
            content = '';
        }
        
        this.element.value = content;
        
        // ë³€ê²½ ì´ë²¤íŠ¸ ë°œìƒ
        this.element.dispatchEvent(new Event('input', { bubbles: true }));
        this.element.dispatchEvent(new Event('change', { bubbles: true }));
    }

    updateStatusBar() {
        const text = this.content.textContent || '';
        const words = text.trim() ? text.trim().split(/\s+/).length : 0;
        const chars = text.length;
        
        this.statusbar.querySelector('.rte-word-count').textContent = `ë‹¨ì–´ ìˆ˜: ${words}`;
        this.statusbar.querySelector('.rte-char-count').textContent = `ê¸€ì ìˆ˜: ${chars}`;
    }

    initializeContent() {
        if (this.element.value) {
            this.content.innerHTML = this.element.value;
        }
        this.updateStatusBar();
        this.handlePlaceholder();
    }

    formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    // ê³µê°œ API
    getContent() {
        return this.content.innerHTML;
    }

    setContent(html) {
        this.content.innerHTML = html;
        this.updateOriginalTextarea();
        this.updateStatusBar();
        this.handlePlaceholder();
    }

    focus() {
        this.content.focus();
    }

    destroy() {
        if (this.container) {
            this.container.remove();
        }
        this.element.style.display = '';
    }
}

// ì „ì—­ ì‚¬ìš©ì„ ìœ„í•œ í•¨ìˆ˜
window.RichTextEditor = RichTextEditor;

// ìë™ ì´ˆê¸°í™” (data-rich-editor ì†ì„±ì´ ìˆëŠ” textareaë“¤ì— ëŒ€í•´)
document.addEventListener('DOMContentLoaded', () => {
    const textareas = document.querySelectorAll('textarea[data-rich-editor]');
    textareas.forEach(textarea => {
        const options = textarea.dataset.richEditor ? JSON.parse(textarea.dataset.richEditor) : {};
        new RichTextEditor(`#${textarea.id}`, options);
    });
});
````

## File: src/main/resources/templates/admin/facilities.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ì‹œì„¤ ìŠ¹ì¸ ê´€ë¦¬ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item"><a href="/admin">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</a></li>
                <li class="breadcrumb-item active" aria-current="page">ì‹œì„¤ ìŠ¹ì¸ ê´€ë¦¬</li>
            </ol>
        </nav>

        <!-- í˜ì´ì§€ í—¤ë” -->
        <div class="row mb-4">
            <div class="col-12">
                <h1 class="h2 mb-3">
                    <i class="fas fa-check-circle text-warning me-2"></i>
                    ì‹œì„¤ ìŠ¹ì¸ ê´€ë¦¬
                </h1>
            </div>
        </div>

        <!-- ìƒíƒœ í•„í„° íƒ­ -->
        <div class="row mb-4">
            <div class="col-12">
                <ul class="nav nav-tabs" id="statusTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" th:classappend="${currentStatus == 'PENDING' ? 'active' : ''}" 
                                type="button" onclick="loadFacilities('PENDING')">
                            <i class="fas fa-clock text-warning me-1"></i>
                            ìŠ¹ì¸ ëŒ€ê¸° <span class="badge bg-warning ms-1">ëŒ€ê¸°ì¤‘</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" th:classappend="${currentStatus == 'APPROVED' ? 'active' : ''}" 
                                type="button" onclick="loadFacilities('APPROVED')">
                            <i class="fas fa-check text-success me-1"></i>
                            ìŠ¹ì¸ ì™„ë£Œ <span class="badge bg-success ms-1">ìŠ¹ì¸</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" th:classappend="${currentStatus == 'REJECTED' ? 'active' : ''}" 
                                type="button" onclick="loadFacilities('REJECTED')">
                            <i class="fas fa-times text-danger me-1"></i>
                            ìŠ¹ì¸ ê±°ë¶€ <span class="badge bg-danger ms-1">ê±°ë¶€</span>
                        </button>
                    </li>
                </ul>
            </div>
        </div>

        <!-- ì‹œì„¤ ëª©ë¡ -->
        <div class="row">
            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-body" id="facilityListContainer">
                        <div th:if="${facilities.empty}" class="text-center py-5">
                            <i class="fas fa-search fa-3x text-muted mb-3"></i>
                            <h5 class="text-muted">í•´ë‹¹ ìƒíƒœì˜ ì‹œì„¤ì´ ì—†ìŠµë‹ˆë‹¤.</h5>
                            <p class="text-muted mb-0">ë‹¤ë¥¸ ìƒíƒœ íƒ­ì„ í™•ì¸í•´ë³´ì„¸ìš”.</p>
                        </div>

                        <div th:unless="${facilities.empty}">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">ì‹œì„¤ëª…</th>
                                            <th scope="col">ìœ í˜•</th>
                                            <th scope="col">ì£¼ì†Œ</th>
                                            <th scope="col">ë“±ë¡ì</th>
                                            <th scope="col">ë“±ë¡ì¼</th>
                                            <th scope="col">ìƒíƒœ</th>
                                            <th scope="col">ì‘ì—…</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="facility, iterStat : ${facilities}">
                                            <th scope="row" th:text="${iterStat.count}">1</th>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div>
                                                        <h6 class="mb-0" th:text="${facility.facilityName}">ì‹œì„¤ëª…</h6>
                                                        <small class="text-muted" th:if="${facility.phone}" th:text="${facility.phone}">ì „í™”ë²ˆí˜¸</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <span class="badge bg-info" th:text="${facility.facilityType}">ìœ í˜•</span>
                                            </td>
                                            <td>
                                                <small th:text="${facility.address}">ì£¼ì†Œ</small>
                                            </td>
                                            <td>
                                                <div>
                                                    <div th:text="${facility.registeredMemberName}">ë“±ë¡ìëª…</div>
                                                    <small class="text-muted" th:text="'(' + ${facility.registeredUserName} + ')'">ID</small>
                                                </div>
                                            </td>
                                            <td>
                                                <small th:text="${#temporals.format(facility.createdAt, 'yyyy-MM-dd')}">ë“±ë¡ì¼</small>
                                            </td>
                                            <td>
                                                <span th:if="${facility.approvalStatus == 'PENDING'}" class="badge bg-warning">ìŠ¹ì¸ëŒ€ê¸°</span>
                                                <span th:if="${facility.approvalStatus == 'APPROVED'}" class="badge bg-success">ìŠ¹ì¸ì™„ë£Œ</span>
                                                <span th:if="${facility.approvalStatus == 'REJECTED'}" class="badge bg-danger">ìŠ¹ì¸ê±°ë¶€</span>
                                            </td>
                                            <td>
                                                <div class="btn-group btn-group-sm" role="group">
                                                    <button type="button" class="btn btn-outline-info" 
                                                            th:onclick="'viewFacilityDetail(' + ${facility.facilityId} + ')'">
                                                        <i class="fas fa-eye"></i> ìƒì„¸
                                                    </button>
                                                    <div th:if="${facility.approvalStatus == 'PENDING'}">
                                                        <button type="button" class="btn btn-success btn-sm" 
                                                                th:onclick="'approveFacility(' + ${facility.facilityId} + ')'">
                                                            <i class="fas fa-check"></i> ìŠ¹ì¸
                                                        </button>
                                                        <button type="button" class="btn btn-danger btn-sm" 
                                                                th:onclick="'rejectFacility(' + ${facility.facilityId} + ')'">
                                                            <i class="fas fa-times"></i> ê±°ë¶€
                                                        </button>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- ì‹œì„¤ ìƒì„¸ ì •ë³´ ëª¨ë‹¬ -->
<div class="modal fade" id="facilityDetailModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">ì‹œì„¤ ìƒì„¸ ì •ë³´</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="facilityDetailContent">
                <!-- AJAXë¡œ ë¡œë“œë  ë‚´ìš© -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
            </div>
        </div>
    </div>
</div>

<!-- ìŠ¹ì¸ ê±°ë¶€ ì‚¬ìœ  ì…ë ¥ ëª¨ë‹¬ -->
<div class="modal fade" id="rejectModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">ìŠ¹ì¸ ê±°ë¶€ ì‚¬ìœ </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="rejectForm">
                    <input type="hidden" id="rejectFacilityId">
                    <div class="mb-3">
                        <label for="rejectionReason" class="form-label">ê±°ë¶€ ì‚¬ìœ  <span class="text-danger">*</span></label>
                        <textarea class="form-control" id="rejectionReason" rows="4" 
                                  placeholder="ìŠ¹ì¸ ê±°ë¶€ ì‚¬ìœ ë¥¼ ìƒì„¸íˆ ì…ë ¥í•´ì£¼ì„¸ìš”." required></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ì·¨ì†Œ</button>
                <button type="button" class="btn btn-danger" onclick="confirmReject()">ìŠ¹ì¸ ê±°ë¶€</button>
            </div>
        </div>
    </div>
</div>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<script>
// í˜„ì¬ ìƒíƒœ ì €ì¥
let currentStatus = '[[${currentStatus}]]';

// ì‹œì„¤ ëª©ë¡ AJAX ë¡œë“œ
function loadFacilities(status) {
    // íƒ­ í™œì„±í™” ìƒíƒœ ë³€ê²½
    $('.nav-tabs .nav-link').removeClass('active');
    event.target.classList.add('active');
    
    // ë¡œë”© í‘œì‹œ
    $('#facilityListContainer').html('<div class="text-center py-5"><i class="fas fa-spinner fa-spin fa-2x"></i><p class="mt-2">ë¡œë”© ì¤‘...</p></div>');
    
    // AJAX ìš”ì²­
    $.get('/admin/facilities', { status: status })
        .done(function(html) {
            // ì‘ë‹µì—ì„œ ì‹œì„¤ ëª©ë¡ ë¶€ë¶„ë§Œ ì¶”ì¶œ
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const facilityContent = doc.getElementById('facilityListContainer').innerHTML;
            $('#facilityListContainer').html(facilityContent);
            currentStatus = status;
        })
        .fail(function() {
            $('#facilityListContainer').html('<div class="text-center py-5 text-danger"><i class="fas fa-exclamation-triangle fa-2x"></i><p class="mt-2">ì‹œì„¤ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p></div>');
        });
}

// ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ
function viewFacilityDetail(facilityId) {
    $.get('/admin/facilities/' + facilityId + '/detail')
        .done(function(facility) {
            if (facility) {
                let content = `
                    <div class="row">
                        <div class="col-md-6">
                            <h6>ê¸°ë³¸ ì •ë³´</h6>
                            <table class="table table-sm">
                                <tr><td><strong>ì‹œì„¤ëª…:</strong></td><td>${facility.facilityName || '-'}</td></tr>
                                <tr><td><strong>ìœ í˜•:</strong></td><td>${facility.facilityType || '-'}</td></tr>
                                <tr><td><strong>ì „í™”ë²ˆí˜¸:</strong></td><td>${facility.phone || '-'}</td></tr>
                                <tr><td><strong>ìˆ˜ìš©ì¸ì›:</strong></td><td>${facility.capacity || '-'}ëª…</td></tr>
                                <tr><td><strong>ìš´ì˜ì‹œê°„:</strong></td><td>${facility.operatingHours || '-'}</td></tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <h6>ë“±ë¡ ì •ë³´</h6>
                            <table class="table table-sm">
                                <tr><td><strong>ë“±ë¡ì:</strong></td><td>${facility.registeredMemberName || '-'}</td></tr>
                                <tr><td><strong>ë“±ë¡ ID:</strong></td><td>${facility.registeredUserName || '-'}</td></tr>
                                <tr><td><strong>ë“±ë¡ì¼:</strong></td><td>${facility.createdAt || '-'}</td></tr>
                                <tr><td><strong>ìŠ¹ì¸ìƒíƒœ:</strong></td><td>
                                    ${facility.approvalStatus === 'PENDING' ? '<span class="badge bg-warning">ìŠ¹ì¸ëŒ€ê¸°</span>' : 
                                      facility.approvalStatus === 'APPROVED' ? '<span class="badge bg-success">ìŠ¹ì¸ì™„ë£Œ</span>' : 
                                      '<span class="badge bg-danger">ìŠ¹ì¸ê±°ë¶€</span>'}
                                </td></tr>
                            </table>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-12">
                            <h6>ì£¼ì†Œ ì •ë³´</h6>
                            <p>${facility.address || '-'}</p>
                            ${facility.detailAddress ? '<p><small class="text-muted">ìƒì„¸: ' + facility.detailAddress + '</small></p>' : ''}
                        </div>
                    </div>
                    ${facility.description ? 
                        '<div class="row mt-3"><div class="col-12"><h6>ì‹œì„¤ ì„¤ëª…</h6><p>' + facility.description + '</p></div></div>' : ''}
                    ${facility.features ? 
                        '<div class="row mt-3"><div class="col-12"><h6>ì‹œì„¤ íŠ¹ì§•</h6><p>' + facility.features + '</p></div></div>' : ''}
                    ${facility.rejectionReason ? 
                        '<div class="row mt-3"><div class="col-12"><h6 class="text-danger">ê±°ë¶€ ì‚¬ìœ </h6><p class="text-danger">' + facility.rejectionReason + '</p></div></div>' : ''}
                `;
                
                $('#facilityDetailContent').html(content);
                $('#facilityDetailModal').modal('show');
            }
        })
        .fail(function() {
            alert('ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        });
}

// ì‹œì„¤ ìŠ¹ì¸
function approveFacility(facilityId) {
    if (confirm('ì´ ì‹œì„¤ì„ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        $.post('/admin/facilities/' + facilityId + '/approve', {
            action: 'approve'
        })
        .done(function(result) {
            if (result === 'SUCCESS') {
                alert('ì‹œì„¤ì´ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
                location.reload();
            } else {
                alert('ìŠ¹ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        })
        .fail(function() {
            alert('ìŠ¹ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        });
    }
}

// ì‹œì„¤ ìŠ¹ì¸ ê±°ë¶€ (ëª¨ë‹¬ ì—´ê¸°)
function rejectFacility(facilityId) {
    $('#rejectFacilityId').val(facilityId);
    $('#rejectionReason').val('');
    $('#rejectModal').modal('show');
}

// ìŠ¹ì¸ ê±°ë¶€ í™•ì¸
function confirmReject() {
    const facilityId = $('#rejectFacilityId').val();
    const reason = $('#rejectionReason').val().trim();
    
    if (!reason) {
        alert('ê±°ë¶€ ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
    }
    
    $.post('/admin/facilities/' + facilityId + '/approve', {
        action: 'reject',
        reason: reason
    })
    .done(function(result) {
        if (result === 'SUCCESS') {
            alert('ì‹œì„¤ ìŠ¹ì¸ì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.');
            $('#rejectModal').modal('hide');
            location.reload();
        } else {
            alert('ê±°ë¶€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
    })
    .fail(function() {
        alert('ê±°ë¶€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    });
}
</script>

</body>
</html>
````

## File: src/main/resources/templates/admin/members.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>íšŒì› ê´€ë¦¬ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item"><a href="/admin">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</a></li>
                <li class="breadcrumb-item active" aria-current="page">íšŒì› ê´€ë¦¬</li>
            </ol>
        </nav>

        <!-- í˜ì´ì§€ í—¤ë” -->
        <div class="row mb-4">
            <div class="col-12">
                <h1 class="h2 mb-3">
                    <i class="fas fa-users text-primary me-2"></i>
                    íšŒì› ê´€ë¦¬
                </h1>
            </div>
        </div>

        <!-- ì—­í• ë³„ í•„í„° íƒ­ -->
        <div class="row mb-4">
            <div class="col-12">
                <ul class="nav nav-tabs" id="roleTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" th:classappend="${currentRole == 'ALL' ? 'active' : ''}" 
                                type="button" onclick="loadMembers('ALL')">
                            <i class="fas fa-users text-secondary me-1"></i>
                            ì „ì²´ íšŒì› <span class="badge bg-secondary ms-1" th:text="${totalCount}">0</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" th:classappend="${currentRole == 'USER' ? 'active' : ''}" 
                                type="button" onclick="loadMembers('USER')">
                            <i class="fas fa-user text-info me-1"></i>
                            ì¼ë°˜ íšŒì› <span class="badge bg-info ms-1">ì¼ë°˜</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" th:classappend="${currentRole == 'FACILITY' ? 'active' : ''}" 
                                type="button" onclick="loadMembers('FACILITY')">
                            <i class="fas fa-building text-success me-1"></i>
                            ì‹œì„¤ íšŒì› <span class="badge bg-success ms-1">ì‹œì„¤</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" th:classappend="${currentRole == 'ADMIN' ? 'active' : ''}" 
                                type="button" onclick="loadMembers('ADMIN')">
                            <i class="fas fa-crown text-warning me-1"></i>
                            ê´€ë¦¬ì <span class="badge bg-warning ms-1">ê´€ë¦¬ì</span>
                        </button>
                    </li>
                </ul>
            </div>
        </div>

        <!-- íšŒì› ëª©ë¡ -->
        <div class="row">
            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-body" id="memberListContainer">
                        <div th:if="${members == null or members.empty}" class="text-center py-5">
                            <i class="fas fa-user-slash fa-3x text-muted mb-3"></i>
                            <h5 class="text-muted">í•´ë‹¹ ì—­í• ì˜ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.</h5>
                            <p class="text-muted mb-0">ë‹¤ë¥¸ ì—­í•  íƒ­ì„ í™•ì¸í•´ë³´ì„¸ìš”.</p>
                        </div>

                        <div th:unless="${members == null or members.empty}">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">ì•„ì´ë””</th>
                                            <th scope="col">ì´ë¦„</th>
                                            <th scope="col">ì´ë©”ì¼</th>
                                            <th scope="col">ì „í™”ë²ˆí˜¸</th>
                                            <th scope="col">ì—­í• </th>
                                            <th scope="col">ê°€ì…ì¼</th>
                                            <th scope="col">ìƒíƒœ</th>
                                            <th scope="col">ì‘ì—…</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="member, iterStat : ${members}">
                                            <th scope="row" th:text="${iterStat.count}">1</th>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div>
                                                        <h6 class="mb-0" th:text="${member.userId}">ì•„ì´ë””</h6>
                                                        <small class="text-muted" th:if="${member.lastLoginAt}" 
                                                               th:text="'ìµœê·¼ë¡œê·¸ì¸: ' + ${#temporals.format(member.lastLoginAt, 'MM-dd HH:mm')}">ìµœê·¼ë¡œê·¸ì¸</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div th:text="${member.name}">ì´ë¦„</div>
                                            </td>
                                            <td>
                                                <small th:text="${member.email}">ì´ë©”ì¼</small>
                                            </td>
                                            <td>
                                                <small th:text="${member.phone}">ì „í™”ë²ˆí˜¸</small>
                                            </td>
                                            <td>
                                                <span th:if="${member.role == 'USER'}" class="badge bg-info">ì¼ë°˜</span>
                                                <span th:if="${member.role == 'FACILITY'}" class="badge bg-success">ì‹œì„¤</span>
                                                <span th:if="${member.role == 'ADMIN'}" class="badge bg-warning">ê´€ë¦¬ì</span>
                                            </td>
                                            <td>
                                                <small th:text="${#temporals.format(member.createdAt, 'yyyy-MM-dd')}">ê°€ì…ì¼</small>
                                            </td>
                                            <td>
                                                <span th:if="${member.isActive}" class="badge bg-success">í™œì„±</span>
                                                <span th:unless="${member.isActive}" class="badge bg-danger">ë¹„í™œì„±</span>
                                            </td>
                                            <td>
                                                <div class="btn-group btn-group-sm" role="group">
                                                    <button type="button" class="btn btn-outline-warning" 
                                                            th:onclick="'toggleMemberActive(' + ${member.memberId} + ')'">
                                                        <i class="fas fa-toggle-on" th:if="${member.isActive}"></i>
                                                        <i class="fas fa-toggle-off" th:unless="${member.isActive}"></i>
                                                        <span th:text="${member.isActive ? 'ë¹„í™œì„±í™”' : 'í™œì„±í™”'}">ìƒíƒœë³€ê²½</span>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- í˜ì´ì§• -->
                            <div th:if="${totalPages > 1}" class="d-flex justify-content-center mt-4">
                                <nav aria-label="íšŒì› ëª©ë¡ í˜ì´ì§€ë„¤ì´ì…˜">
                                    <ul class="pagination">
                                        <li class="page-item" th:classappend="${currentPage == 1 ? 'disabled' : ''}">
                                            <a class="page-link" th:href="@{/admin/members(role=${currentRole}, page=${currentPage - 1})}">ì´ì „</a>
                                        </li>
                                        <li th:each="page : ${#numbers.sequence(1, totalPages)}" 
                                            class="page-item" th:classappend="${page == currentPage ? 'active' : ''}">
                                            <a class="page-link" th:href="@{/admin/members(role=${currentRole}, page=${page})}" th:text="${page}">1</a>
                                        </li>
                                        <li class="page-item" th:classappend="${currentPage == totalPages ? 'disabled' : ''}">
                                            <a class="page-link" th:href="@{/admin/members(role=${currentRole}, page=${currentPage + 1})}">ë‹¤ìŒ</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<script>
// í˜„ì¬ ì—­í•  ì €ì¥
let currentRole = '[[${currentRole}]]';

// íšŒì› ëª©ë¡ AJAX ë¡œë“œ
function loadMembers(role) {
    // íƒ­ í™œì„±í™” ìƒíƒœ ë³€ê²½
    $('.nav-tabs .nav-link').removeClass('active');
    event.target.classList.add('active');
    
    // ë¡œë”© í‘œì‹œ
    $('#memberListContainer').html('<div class="text-center py-5"><i class="fas fa-spinner fa-spin fa-2x"></i><p class="mt-2">ë¡œë”© ì¤‘...</p></div>');
    
    // AJAX ìš”ì²­
    $.get('/admin/members', { role: role })
        .done(function(html) {
            // ì‘ë‹µì—ì„œ íšŒì› ëª©ë¡ ë¶€ë¶„ë§Œ ì¶”ì¶œ
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const memberContent = doc.getElementById('memberListContainer').innerHTML;
            $('#memberListContainer').html(memberContent);
            currentRole = role;
        })
        .fail(function() {
            $('#memberListContainer').html('<div class="text-center py-5 text-danger"><i class="fas fa-exclamation-triangle fa-2x"></i><p class="mt-2">íšŒì› ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p></div>');
        });
}

// íšŒì› í™œì„±í™” ìƒíƒœ í† ê¸€
function toggleMemberActive(memberId) {
    if (confirm('ì´ íšŒì›ì˜ í™œì„±í™” ìƒíƒœë¥¼ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        $.post('/admin/members/' + memberId + '/toggle-active')
            .done(function(result) {
                if (result === 'SUCCESS') {
                    alert('íšŒì› ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    location.reload();
                } else {
                    alert('ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            })
            .fail(function() {
                alert('ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            });
    }
}
</script>

</body>
</html>
````

## File: src/main/resources/templates/admin/statistics.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>í†µê³„ ê´€ë¦¬ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item"><a href="/admin">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</a></li>
                <li class="breadcrumb-item active" aria-current="page">í†µê³„ ê´€ë¦¬</li>
            </ol>
        </nav>

        <!-- í˜ì´ì§€ í—¤ë” -->
        <div class="row mb-4">
            <div class="col-12">
                <h1 class="h2 mb-3">
                    <i class="fas fa-chart-bar text-info me-2"></i>
                    í†µê³„ ê´€ë¦¬
                </h1>
                <p class="text-muted">ë¼ì´íŠ¸ì¼€ì–´ í”Œë«í¼ì˜ ì „ë°˜ì ì¸ í†µê³„ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>
        </div>

        <!-- íšŒì› í†µê³„ -->
        <div class="row mb-4">
            <div class="col-12">
                <h3 class="mb-3">
                    <i class="fas fa-users text-primary me-2"></i>
                    íšŒì› í†µê³„
                </h3>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card bg-primary text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h4 class="card-title">ì „ì²´ íšŒì›</h4>
                                <h2 class="mb-0" th:text="${totalMembers ?: 0}">0</h2>
                                <small>ëª…</small>
                            </div>
                            <div class="align-self-center">
                                <i class="fas fa-users fa-2x"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card bg-success text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h4 class="card-title">ì‹œì„¤ íšŒì›</h4>
                                <h2 class="mb-0" th:text="${facilityMembers ?: 0}">0</h2>
                                <small>ëª…</small>
                            </div>
                            <div class="align-self-center">
                                <i class="fas fa-building fa-2x"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card bg-info text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h4 class="card-title">ì¼ë°˜ íšŒì›</h4>
                                <h2 class="mb-0" th:text="${totalMembers - facilityMembers ?: 0}">0</h2>
                                <small>ëª…</small>
                            </div>
                            <div class="align-self-center">
                                <i class="fas fa-user fa-2x"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì‹œì„¤ í†µê³„ -->
        <div class="row mb-4">
            <div class="col-12">
                <h3 class="mb-3">
                    <i class="fas fa-hospital text-success me-2"></i>
                    ì‹œì„¤ í†µê³„
                </h3>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card bg-success text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h4 class="card-title">ìŠ¹ì¸ëœ ì‹œì„¤</h4>
                                <h2 class="mb-0" th:text="${approvedFacilities ?: 0}">0</h2>
                                <small>ê°œ</small>
                            </div>
                            <div class="align-self-center">
                                <i class="fas fa-check-circle fa-2x"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card bg-warning text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h4 class="card-title">ìŠ¹ì¸ ëŒ€ê¸°</h4>
                                <h2 class="mb-0" th:text="${pendingFacilities ?: 0}">0</h2>
                                <small>ê°œ</small>
                            </div>
                            <div class="align-self-center">
                                <i class="fas fa-clock fa-2x"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card bg-danger text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h4 class="card-title">ìŠ¹ì¸ ê±°ë¶€</h4>
                                <h2 class="mb-0" th:text="${rejectedFacilities ?: 0}">0</h2>
                                <small>ê°œ</small>
                            </div>
                            <div class="align-self-center">
                                <i class="fas fa-times-circle fa-2x"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card bg-secondary text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h4 class="card-title">ì „ì²´ ì‹œì„¤</h4>
                                <h2 class="mb-0" th:text="${(approvedFacilities ?: 0) + (pendingFacilities ?: 0) + (rejectedFacilities ?: 0)}">0</h2>
                                <small>ê°œ</small>
                            </div>
                            <div class="align-self-center">
                                <i class="fas fa-building fa-2x"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì°¨íŠ¸ ì˜ì—­ (ì¶”í›„ í™•ì¥ ê°€ëŠ¥) -->
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-chart-pie me-2"></i>
                            íšŒì› êµ¬ì„±ë¹„
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="text-center">
                            <canvas id="memberChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-chart-bar me-2"></i>
                            ì‹œì„¤ ìŠ¹ì¸ í˜„í™©
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="text-center">
                            <canvas id="facilityChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë¹ ë¥¸ ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-tools me-2"></i>
                            ë¹ ë¥¸ ê´€ë¦¬ ì•¡ì…˜
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3 mb-2">
                                <a href="/admin/facilities?status=PENDING" class="btn btn-warning w-100">
                                    <i class="fas fa-clock me-2"></i>
                                    ìŠ¹ì¸ ëŒ€ê¸° ì‹œì„¤ ê´€ë¦¬
                                </a>
                            </div>
                            <div class="col-md-3 mb-2">
                                <a href="/admin/members?role=ALL" class="btn btn-primary w-100">
                                    <i class="fas fa-users me-2"></i>
                                    ì „ì²´ íšŒì› ê´€ë¦¬
                                </a>
                            </div>
                            <div class="col-md-3 mb-2">
                                <a href="/admin/facilities?status=APPROVED" class="btn btn-success w-100">
                                    <i class="fas fa-check me-2"></i>
                                    ìŠ¹ì¸ëœ ì‹œì„¤ ê´€ë¦¬
                                </a>
                            </div>
                            <div class="col-md-3 mb-2">
                                <a href="/admin" class="btn btn-secondary w-100">
                                    <i class="fas fa-home me-2"></i>
                                    ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<!-- Chart.js ë¼ì´ë¸ŒëŸ¬ë¦¬ (ì„ íƒì‚¬í•­) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script th:inline="javascript">
// íšŒì› êµ¬ì„±ë¹„ ì°¨íŠ¸
const memberCtx = document.getElementById('memberChart').getContext('2d');
const facilityMembers = /*[[${facilityMembers ?: 0}]]*/ 0;
const userMembers = /*[[${totalMembers ?: 0}]]*/ 0 - facilityMembers;

new Chart(memberCtx, {
    type: 'doughnut',
    data: {
        labels: ['ì¼ë°˜ íšŒì›', 'ì‹œì„¤ íšŒì›'],
        datasets: [{
            data: [userMembers, facilityMembers],
            backgroundColor: ['#17a2b8', '#28a745'],
            borderWidth: 2,
            borderColor: '#fff'
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                position: 'bottom'
            }
        }
    }
});

// ì‹œì„¤ ìŠ¹ì¸ í˜„í™© ì°¨íŠ¸
const facilityCtx = document.getElementById('facilityChart').getContext('2d');
const approvedFacilities = /*[[${approvedFacilities ?: 0}]]*/ 0;
const pendingFacilities = /*[[${pendingFacilities ?: 0}]]*/ 0;
const rejectedFacilities = /*[[${rejectedFacilities ?: 0}]]*/ 0;

new Chart(facilityCtx, {
    type: 'bar',
    data: {
        labels: ['ìŠ¹ì¸ì™„ë£Œ', 'ìŠ¹ì¸ëŒ€ê¸°', 'ìŠ¹ì¸ê±°ë¶€'],
        datasets: [{
            label: 'ì‹œì„¤ ìˆ˜',
            data: [approvedFacilities, pendingFacilities, rejectedFacilities],
            backgroundColor: ['#28a745', '#ffc107', '#dc3545'],
            borderColor: ['#1e7e34', '#e0a800', '#c82333'],
            borderWidth: 1
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
            y: {
                beginAtZero: true,
                ticks: {
                    stepSize: 1
                }
            }
        },
        plugins: {
            legend: {
                display: false
            }
        }
    }
});
</script>

</body>
</html>
````

## File: src/main/resources/templates/board/faq-write.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>FAQ ì‘ì„± - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container mt-4">
            <!-- í˜ì´ì§€ ì œëª© -->
            <div class="row mb-4">
                <div class="col-12">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                            <li class="breadcrumb-item"><a href="/board">ì •ë³´ë§ˆë‹¹</a></li>
                            <li class="breadcrumb-item"><a th:href="@{/board(type='faq')}">FAQ</a></li>
                            <li class="breadcrumb-item active" aria-current="page">FAQ ì‘ì„±</li>
                        </ol>
                    </nav>
                    <h2>
                        <i class="fas fa-question-circle text-warning me-2"></i> 
                        FAQ ì‘ì„±
                    </h2>
                    <p class="text-muted">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ê³¼ ë‹µë³€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.</p>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-8">
                    <!-- FAQ ì‘ì„± í¼ -->
                    <div class="card">
                        <div class="card-header bg-warning text-white">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-edit me-2"></i>FAQ ì‘ì„±
                            </h5>
                        </div>
                        <div class="card-body">
                            <form th:action="@{/board/write}" method="post" th:object="${boardDTO}">
                                <input type="hidden" name="type" value="faq">
                                <input type="hidden" th:field="*{category}" value="FAQ">
                                
                                <!-- FAQ ì¹´í…Œê³ ë¦¬ -->
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label">FAQ ì¹´í…Œê³ ë¦¬ <span class="text-danger">*</span></label>
                                        <select class="form-select" th:field="*{subCategory}" required>
                                            <option value="">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                                            <option value="facility">ì‹œì„¤ ì´ìš©</option>
                                            <option value="cost">ë¹„ìš© ë¬¸ì˜</option>
                                            <option value="insurance">ë³´í—˜ ê´€ë ¨</option>
                                            <option value="admission">ì…ì†Œ ì ˆì°¨</option>
                                            <option value="service">ì„œë¹„ìŠ¤</option>
                                            <option value="etc">ê¸°íƒ€</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">ìš°ì„ ìˆœìœ„</label>
                                        <select class="form-select" th:field="*{priority}">
                                            <option value="0">ì¼ë°˜</option>
                                            <option value="1">ì¤‘ìš”</option>
                                            <option value="2">ë§¤ìš° ì¤‘ìš”</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- ì§ˆë¬¸ (ì œëª©) -->
                                <div class="mb-3">
                                    <label class="form-label">ì§ˆë¬¸ (Q) <span class="text-danger">*</span></label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-warning text-white">
                                            <i class="fas fa-question-circle"></i>
                                        </span>
                                        <input type="text" class="form-control" th:field="*{title}" 
                                               placeholder="ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”" 
                                               maxlength="200" required>
                                    </div>
                                </div>

                                <!-- ë‹µë³€ (ë‚´ìš©) -->
                                <div class="mb-3">
                                    <label class="form-label">ë‹µë³€ (A) <span class="text-danger">*</span></label>
                                    <textarea class="form-control" th:field="*{content}" 
                                              rows="10" 
                                              placeholder="ì§ˆë¬¸ì— ëŒ€í•œ ìƒì„¸í•œ ë‹µë³€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”."
                                              maxlength="2000" required></textarea>
                                </div>

                                <!-- íƒœê·¸ -->
                                <div class="mb-3">
                                    <label class="form-label">íƒœê·¸</label>
                                    <input type="text" class="form-control" th:field="*{tags}" 
                                           placeholder="ê´€ë ¨ íƒœê·¸ë¥¼ ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•˜ì„¸ìš”">
                                </div>

                                <!-- ì‘ì„± ì˜µì…˜ -->
                                <div class="row mb-4">
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" th:field="*{isPinned}" id="isPinned">
                                            <label class="form-check-label" for="isPinned">
                                                <i class="fas fa-thumbtack me-1"></i>ìƒë‹¨ ê³ ì •
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" th:field="*{isNotice}" id="isNotice">
                                            <label class="form-check-label" for="isNotice">
                                                <i class="fas fa-exclamation-triangle me-1"></i>ì¤‘ìš” FAQ
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <!-- ë²„íŠ¼ ê·¸ë£¹ -->
                                <div class="d-flex gap-2 justify-content-end">
                                    <a th:href="@{/board(type='faq')}" class="btn btn-secondary">
                                        <i class="fas fa-times me-1"></i>ì·¨ì†Œ
                                    </a>
                                    <button type="submit" class="btn btn-warning">
                                        <i class="fas fa-check me-1"></i>FAQ ë“±ë¡
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <!-- FAQ ì‘ì„± ë„ì›€ë§ -->
                    <div class="card">
                        <div class="card-header bg-info text-white">
                            <h6 class="mb-0"><i class="fas fa-lightbulb me-2"></i>FAQ ì‘ì„± ê°€ì´ë“œ</h6>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <h6 class="text-success"><i class="fas fa-check-circle me-1"></i>ì¢‹ì€ FAQ ì‘ì„±ë²•</h6>
                                <ul class="list-unstyled small">
                                    <li class="mb-1"><i class="fas fa-arrow-right text-primary me-2"></i>ì‹¤ì œë¡œ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ì„ ì„ íƒ</li>
                                    <li class="mb-1"><i class="fas fa-arrow-right text-primary me-2"></i>ëª…í™•í•˜ê³  êµ¬ì²´ì ì¸ ì§ˆë¬¸</li>
                                    <li class="mb-1"><i class="fas fa-arrow-right text-primary me-2"></i>ë‹¨ê³„ë³„ ìƒì„¸í•œ ë‹µë³€</li>
                                    <li class="mb-1"><i class="fas fa-arrow-right text-primary me-2"></i>ê´€ë ¨ ë§í¬ë‚˜ ì—°ë½ì²˜ í¬í•¨</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>
</body>
</html>
````

## File: src/main/resources/templates/layout/footer.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- í‘¸í„° -->
    <footer th:fragment="footer" class="bg-dark text-light mt-auto py-4">
        <div class="container">
            <div class="row">
                <!-- ì‚¬ì´íŠ¸ ì •ë³´ -->
                <div class="col-md-4 mb-3">
                    <h5 class="fw-bold">
                        <i class="fas fa-heart text-danger me-2"></i>
                        CareLink
                    </h5>
                    <p class="mb-2">ë¯¿ì„ ìˆ˜ ìˆëŠ” ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ í”Œë«í¼</p>
                    <p class="text-muted small">
                        ì¢‹ì€ ì‚¬ëŒê³¼ ì¢‹ì€ ì‹œì„¤ì„ ì—°ê²°í•˜ì—¬<br>
                        ë” ë‚˜ì€ ìš”ì–‘ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤.
                    </p>
                </div>
                
                <!-- ë¹ ë¥¸ ë§í¬ -->
                <div class="col-md-4 mb-3">
                    <h6 class="fw-bold mb-3">ë¹ ë¥¸ ë§í¬</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <a href="/facility/search" class="text-light text-decoration-none">
                                <i class="fas fa-chevron-right me-2"></i>ì‹œì„¤ ì°¾ê¸°
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="/job?type=recruit" class="text-light text-decoration-none">
                                <i class="fas fa-chevron-right me-2"></i>êµ¬ì¸ ì •ë³´
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="/job?type=search" class="text-light text-decoration-none">
                                <i class="fas fa-chevron-right me-2"></i>êµ¬ì§ ì •ë³´
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="/review" class="text-light text-decoration-none">
                                <i class="fas fa-chevron-right me-2"></i>ì‹œì„¤ ë¦¬ë·°
                            </a>
                        </li>
                    </ul>
                </div>
                
                <!-- ê³ ê° ì§€ì› -->
                <div class="col-md-4 mb-3">
                    <h6 class="fw-bold mb-3">ê³ ê° ì§€ì›</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <a href="/board?type=notice" class="text-light text-decoration-none">
                                <i class="fas fa-chevron-right me-2"></i>ê³µì§€ì‚¬í•­
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="/board?type=qna" class="text-light text-decoration-none">
                                <i class="fas fa-chevron-right me-2"></i>Q&A
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="/board?type=faq" class="text-light text-decoration-none">
                                <i class="fas fa-chevron-right me-2"></i>ìì£¼ ë¬»ëŠ” ì§ˆë¬¸
                            </a>
                        </li>
                        <li class="mb-2">
                            <span class="text-muted">
                                <i class="fas fa-phone me-2"></i>1588-0000
                            </span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <hr class="my-4">
            
            <!-- ì €ì‘ê¶Œ ë° íŒ€ ì •ë³´ -->
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0 text-muted small">
                        Â© 2024 CareLink. 4ì¸ íŒ€ í”„ë¡œì íŠ¸ - ëª¨ë“  ê¶Œë¦¬ ë³´ìœ .
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <small class="text-muted">
                        <span class="me-3">íŒ€ì› A: íšŒì›ê´€ë¦¬</span>
                        <span class="me-3">íŒ€ì› B: ì‹œì„¤ê²€ìƒ‰</span>
                        <span class="me-3">íŒ€ì› C: êµ¬ì¸êµ¬ì§</span>
                        <span>íŒ€ì› D: ë¦¬ë·°&ê²Œì‹œíŒ</span>
                    </small>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- JavaScript í¬í•¨ ì˜ì—­ -->
    <div th:fragment="scripts">
        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
        <!-- Cropper.js -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
        <!-- ê³µí†µ JavaScript -->
        <script src="/js/common.js"></script>
    </div>
</body>
</html>
````

## File: src/main/resources/templates/member/changePassword.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item"><a href="/member/myinfo">ë‚´ ì •ë³´</a></li>
                <li class="breadcrumb-item active" aria-current="page">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</li>
            </ol>
        </nav>
        
        <div class="row justify-content-center">
            <div class="col-md-6 col-lg-5">
                <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì¹´ë“œ -->
                <div class="card shadow">
                    <div class="card-body p-4">
                        <!-- ì œëª© -->
                        <div class="text-center mb-4">
                            <h3 class="card-title fw-bold text-primary">
                                <i class="fas fa-key me-2"></i>
                                ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
                            </h3>
                            <p class="text-muted">ìƒˆë¡œìš´ ë¹„ë°€ë²ˆí˜¸ë¡œ ë³€ê²½í•˜ì„¸ìš”</p>
                        </div>
                        
                        <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í¼ -->
                        <form id="changePasswordForm" th:action="@{/member/mypage/change-password}" method="post" novalidate>
                            <!-- í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ -->
                            <div class="mb-3">
                                <label for="currentPassword" class="form-label">
                                    <i class="fas fa-lock me-1"></i>í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ <span class="text-danger">*</span>
                                </label>
                                <div class="input-group">
                                    <input type="password" 
                                           class="form-control" 
                                           id="currentPassword" 
                                           name="currentPassword"
                                           placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                                           required>
                                    <button class="btn btn-outline-secondary" type="button" id="toggleCurrentPassword">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div id="currentPasswordFeedback" class="invalid-feedback"></div>
                            </div>
                            
                            <!-- ìƒˆ ë¹„ë°€ë²ˆí˜¸ -->
                            <div class="mb-3">
                                <label for="newPassword" class="form-label">
                                    <i class="fas fa-key me-1"></i>ìƒˆ ë¹„ë°€ë²ˆí˜¸ <span class="text-danger">*</span>
                                </label>
                                <div class="input-group">
                                    <input type="password" 
                                           class="form-control" 
                                           id="newPassword" 
                                           name="newPassword"
                                           placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                                           required>
                                    <button class="btn btn-outline-secondary" type="button" id="toggleNewPassword">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <small class="form-text text-muted">8-20ìì˜ ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ 1ê°œ ì´ìƒ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.</small>
                                <div id="newPasswordFeedback" class="invalid-feedback"></div>
                            </div>
                            
                            <!-- ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ -->
                            <div class="mb-4">
                                <label for="confirmPassword" class="form-label">
                                    <i class="fas fa-key me-1"></i>ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ <span class="text-danger">*</span>
                                </label>
                                <div class="input-group">
                                    <input type="password" 
                                           class="form-control" 
                                           id="confirmPassword" 
                                           name="confirmPassword"
                                           placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”"
                                           required>
                                    <button class="btn btn-outline-secondary" type="button" id="toggleConfirmPassword">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div id="confirmPasswordFeedback" class="invalid-feedback"></div>
                            </div>
                            
                            <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ë²„íŠ¼ -->
                            <div class="d-grid mb-3">
                                <button type="submit" class="btn btn-primary btn-lg" id="submitButton" disabled>
                                    <i class="fas fa-check me-2"></i>
                                    ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
                                </button>
                            </div>
                        </form>
                        
                        <!-- ì·¨ì†Œ ë²„íŠ¼ -->
                        <div class="text-center">
                            <a href="/member/myinfo" class="btn btn-outline-secondary">
                                <i class="fas fa-arrow-left me-1"></i>
                                ë‚´ ì •ë³´ë¡œ ëŒì•„ê°€ê¸°
                            </a>
                        </div>
                        
                        <!-- ë¹„ë°€ë²ˆí˜¸ ì•ˆì „ì„± ê°€ì´ë“œ -->
                        <hr class="my-4">
                        <div class="alert alert-info" role="alert">
                            <h6 class="alert-heading">
                                <i class="fas fa-shield-alt me-2"></i>
                                ì•ˆì „í•œ ë¹„ë°€ë²ˆí˜¸ ë§Œë“¤ê¸°
                            </h6>
                            <ul class="mb-0 small">
                                <li>8ì ì´ìƒ 20ì ì´í•˜ë¡œ ì„¤ì •í•˜ì„¸ìš”</li>
                                <li>ì˜ë¬¸ ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ ì¡°í•©í•˜ì„¸ìš”</li>
                                <li>ê°œì¸ì •ë³´(ì´ë¦„, ìƒë…„ì›”ì¼)ëŠ” ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”</li>
                                <li>ë‹¤ë¥¸ ì‚¬ì´íŠ¸ì™€ ë‹¤ë¥¸ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì „ìš© JavaScript -->
<script src="/js/change-password.js"></script>

</body>
</html>
````

## File: src/main/resources/templates/member/crop-image.backup.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item"><a href="/member/myinfo">ë§ˆì´í˜ì´ì§€</a></li>
                <li class="breadcrumb-item active" aria-current="page">í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­</li>
            </ol>
        </nav>
        
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
                <div class="card shadow">
                    <div class="card-body p-4">
                        <div class="text-center mb-4">
                            <h3 class="card-title fw-bold text-primary">
                                <i class="fas fa-crop me-2"></i>
                                í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­
                            </h3>
                            <p class="text-muted">ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨(3:4)ì— ë§ì¶° í”„ë¡œí•„ ì‚¬ì§„ì„ ì¡°ì ˆí•˜ì„¸ìš”</p>
                        </div>

                        <!-- ê³ ê¸‰ ì´ë¯¸ì§€ í¬ë¡­í¼ ì»¨í…Œì´ë„ˆ -->
                        <div id="profileImageCropper"></div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ê³ ê¸‰ ì´ë¯¸ì§€ í¬ë¡­í¼ -->
<link rel="stylesheet" href="/css/advanced-image-cropper.css">
<script src="/js/advanced-image-cropper.js"></script>

<script>
$(document).ready(function() {
    // í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­í¼ ì´ˆê¸°í™”
    initializeProfileImageCropper();
});

// í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­í¼ ì´ˆê¸°í™”
function initializeProfileImageCropper() {
    const profileImageCropper = new AdvancedImageCropper('profileImageCropper', {
        // í”„ë¡œí•„ ì´ë¯¸ì§€ ìµœì í™” ì„¤ì •
        aspectRatio: 3/4, // í”„ë¡œí•„ ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨
        cropWidth: 300,
        cropHeight: 400,
        previewStyle: 'profile',
        title: 'í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ',
        quality: 0.9,
        enableAltText: true,
        showSteps: true,
        
        // í¬ë¡­ ì™„ë£Œ ì½œë°±
        onCropComplete: function(result) {
            console.log('í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ ì™„ë£Œ:', result);
            
            // ì„œë²„ì— í¬ë¡­ëœ ì´ë¯¸ì§€ ì €ì¥
            saveProfileImage(result);
        },
        
        // ì—ëŸ¬ ì½œë°±
        onError: function(message) {
            console.error('í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ ì˜¤ë¥˜:', message);
            showErrorMessage('ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + message);
        }
    });
    
    // ì „ì—­ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì €ì¥
    window.profileImageCropper = profileImageCropper;
}

// í”„ë¡œí•„ ì´ë¯¸ì§€ ì„œë²„ ì €ì¥
function saveProfileImage(result) {
    // ë¡œë”© í‘œì‹œ
    showLoadingMessage('í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì¤‘...');
    
    const formData = new FormData();
    formData.append('croppedImage', result.imageData);
    formData.append('altText', result.altText);
    
    fetch('/member/myinfo/crop-image/save', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        hideLoadingMessage();
        
        if (data.success) {
            showSuccessMessage('í”„ë¡œí•„ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
            
            // 2ì´ˆ í›„ ë§ˆì´í˜ì´ì§€ë¡œ ì´ë™
            setTimeout(() => {
                window.location.href = '/member/myinfo/edit';
            }, 2000);
        } else {
            showErrorMessage(data.message || 'í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    })
    .catch(error => {
        hideLoadingMessage();
        console.error('í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì˜¤ë¥˜:', error);
        showErrorMessage('í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    });
}

// ë¡œë”© ë©”ì‹œì§€ í‘œì‹œ
function showLoadingMessage(message) {
    const existingLoading = document.querySelector('.loading-overlay');
    if (existingLoading) existingLoading.remove();
    
    const loadingDiv = document.createElement('div');
    loadingDiv.className = 'loading-overlay position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center';
    loadingDiv.style.cssText = 'background: rgba(0,0,0,0.5); z-index: 9999;';
    loadingDiv.innerHTML = `
        <div class="text-center text-white">
            <div class="spinner-border mb-3" role="status"></div>
            <div>${message}</div>
        </div>
    `;
    
    document.body.appendChild(loadingDiv);
}

// ë¡œë”© ë©”ì‹œì§€ ìˆ¨ê¹€
function hideLoadingMessage() {
    const loadingOverlay = document.querySelector('.loading-overlay');
    if (loadingOverlay) {
        loadingOverlay.remove();
    }
}

// ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
function showSuccessMessage(message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-success alert-dismissible fade show position-fixed top-0 start-50 translate-middle-x mt-3';
    alertDiv.style.cssText = 'z-index: 10000; min-width: 300px;';
    alertDiv.innerHTML = `
        <i class="fas fa-check-circle me-2"></i>${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    document.body.appendChild(alertDiv);
    
    // 5ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 5000);
}

// ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
function showErrorMessage(message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-danger alert-dismissible fade show position-fixed top-0 start-50 translate-middle-x mt-3';
    alertDiv.style.cssText = 'z-index: 10000; min-width: 300px;';
    alertDiv.innerHTML = `
        <i class="fas fa-exclamation-triangle me-2"></i>${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    document.body.appendChild(alertDiv);
    
    // 10ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 10000);
}
</script>

</body>
</html>
````

## File: src/main/resources/templates/member/myPosts.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ë‚´ê°€ ì“´ ê¸€ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item"><a href="/member/myinfo/edit">ë‚´ ì •ë³´</a></li>
                <li class="breadcrumb-item active" aria-current="page">ë‚´ê°€ ì“´ ê¸€</li>
            </ol>
        </nav>
        
        <div class="row">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-body">
                        <!-- í—¤ë” -->
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h3 class="card-title fw-bold text-primary mb-0">
                                <i class="fas fa-edit me-2"></i>
                                ë‚´ê°€ ì“´ ê¸€
                            </h3>
                            <div class="text-muted">
                                <span th:text="${member.name}">ì‚¬ìš©ìëª…</span>ë‹˜ì˜ ì‘ì„± ê¸€
                            </div>
                        </div>
                        
                        
                        <!-- í•„í„° ë° ì •ë ¬ -->
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div class="btn-group btn-group-sm" role="group" aria-label="ê²Œì‹œê¸€ íƒ€ì… í•„í„°">
                                <button type="button" class="btn filter-btn" data-type="all" 
                                        th:classappend="${currentType == 'all'} ? 'btn-primary' : 'btn-outline-primary'">
                                    ì „ì²´ (<span th:text="${contentCounts.total}">0</span>)
                                </button>
                                <button type="button" class="btn filter-btn" data-type="board"
                                        th:classappend="${currentType == 'board'} ? 'btn-info' : 'btn-outline-info'">
                                    ê²Œì‹œê¸€ (<span th:text="${contentCounts.board}">0</span>)
                                </button>
                                <button type="button" class="btn filter-btn" data-type="review"
                                        th:classappend="${currentType == 'review'} ? 'btn-success' : 'btn-outline-success'">
                                    ë¦¬ë·° (<span th:text="${contentCounts.review}">0</span>)
                                </button>
                                <button type="button" class="btn filter-btn" data-type="job"
                                        th:classappend="${currentType == 'job'} ? 'btn-warning' : 'btn-outline-warning'">
                                    êµ¬ì¸êµ¬ì§ (<span th:text="${contentCounts.job}">0</span>)
                                </button>
                            </div>
                            
                            <div class="d-flex align-items-center gap-2">
                                <small class="text-muted">
                                    ì´ <strong th:text="${totalCount}">0</strong>ê°œ
                                </small>
                                <select class="form-select form-select-sm" id="sortSelect" style="width: auto;">
                                    <option value="latest">ìµœì‹ ìˆœ</option>
                                    <option value="oldest">ì˜¤ë˜ëœìˆœ</option>
                                    <option value="views">ì¡°íšŒìˆœ</option>
                                    <option value="likes">ì¶”ì²œìˆœ</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- ê²Œì‹œê¸€ ëª©ë¡ -->
                        <div class="posts-container">
                            <div th:if="${#lists.isEmpty(posts)}" class="text-center py-5">
                                <div class="text-muted">
                                    <i class="fas fa-inbox fa-2x mb-3"></i>
                                    <p>ì‘ì„±í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                                </div>
                            </div>
                            
                            <!-- ê²Œì‹œê¸€ í…Œì´ë¸” -->
                            <div th:unless="${#lists.isEmpty(posts)}" id="postsContainer">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-light">
                                            <tr>
                                                <th style="width: 80px;">ìœ í˜•</th>
                                                <th>ì œëª©</th>
                                                <th style="width: 100px;">ì¹´í…Œê³ ë¦¬</th>
                                                <th style="width: 80px;">ì¡°íšŒ</th>
                                                <th style="width: 80px;">ì¶”ì²œ</th>
                                                <th style="width: 120px;">ì‘ì„±ì¼</th>
                                                <th style="width: 80px;">ê´€ë¦¬</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr th:each="post : ${posts}" class="post-item" 
                                                th:attr="data-type=${post.type}, data-created=${post.createdAt}, data-views=${post.viewCount ?: 0}, data-likes=${post.likeCount ?: 0}">
                                                <td>
                                                    <span class="badge badge-sm" 
                                                          th:classappend="'bg-' + ${post.type == 'board' ? 'info' : (post.type == 'review' ? 'success' : 'warning')}">
                                                        <span th:text="${post.type == 'board' ? 'ê²Œì‹œê¸€' : (post.type == 'review' ? 'ë¦¬ë·°' : 'êµ¬ì¸')}">íƒ€ì…</span>
                                                    </span>
                                                </td>
                                                <td>
                                                    <div class="d-flex flex-column">
                                                        <a th:href="${post.url}" class="text-decoration-none fw-medium text-dark" th:text="${post.title}">ê¸€ ì œëª©</a>
                                                        <small class="text-muted" th:text="${#strings.abbreviate(post.content, 60)}" style="font-size: 0.8rem;">ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°...</small>
                                                        <div class="mt-1" th:if="${post.rating != null or post.salary != null}">
                                                            <small class="text-warning" th:if="${post.rating != null}">
                                                                <i class="fas fa-star"></i> <span th:text="${post.rating}">0</span>ì 
                                                            </small>
                                                            <small class="text-success" th:if="${post.salary != null}">
                                                                <i class="fas fa-won-sign"></i> <span th:text="${post.salary}">ê¸‰ì—¬</span>
                                                            </small>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <small class="text-muted" th:text="${post.category}">ì¹´í…Œê³ ë¦¬</small>
                                                </td>
                                                <td class="text-center">
                                                    <small class="text-muted" th:if="${post.viewCount != null}" th:text="${post.viewCount}">0</small>
                                                    <small class="text-muted" th:unless="${post.viewCount != null}">-</small>
                                                </td>
                                                <td class="text-center">
                                                    <small class="text-muted" th:if="${post.likeCount != null}" th:text="${post.likeCount}">0</small>
                                                    <small class="text-muted" th:unless="${post.likeCount != null}">-</small>
                                                </td>
                                                <td>
                                                    <small class="text-muted" th:text="${#temporals.format(post.createdAt, 'MM-dd HH:mm')}">ë‚ ì§œ</small>
                                                </td>
                                                <td class="text-center">
                                                    <a th:href="${post.url}" class="btn btn-outline-primary btn-sm">
                                                        <i class="fas fa-eye"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <!-- í˜ì´ì§• -->
                        <div th:if="${totalPages > 1}" class="d-flex justify-content-center mt-4">
                            <nav aria-label="ê²Œì‹œê¸€ í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜">
                                <ul class="pagination">
                                    <!-- ì´ì „ í˜ì´ì§€ -->
                                    <li class="page-item" th:classappend="${currentPage <= 1} ? 'disabled'">
                                        <a class="page-link" th:href="@{/member/mypost(type=${currentType}, page=${currentPage - 1}, pageSize=${pageSize})}" 
                                           aria-label="ì´ì „ í˜ì´ì§€">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    
                                    <!-- í˜ì´ì§€ ë²ˆí˜¸ -->
                                    <li th:each="i : ${#numbers.sequence(1, totalPages)}" 
                                        class="page-item" th:classappend="${i == currentPage} ? 'active'">
                                        <a class="page-link" th:href="@{/member/mypost(type=${currentType}, page=${i}, pageSize=${pageSize})}" 
                                           th:text="${i}">1</a>
                                    </li>
                                    
                                    <!-- ë‹¤ìŒ í˜ì´ì§€ -->
                                    <li class="page-item" th:classappend="${currentPage >= totalPages} ? 'disabled'">
                                        <a class="page-link" th:href="@{/member/mypost(type=${currentType}, page=${currentPage + 1}, pageSize=${pageSize})}" 
                                           aria-label="ë‹¤ìŒ í˜ì´ì§€">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ë‚´ê°€ ì“´ ê¸€ ì „ìš© JavaScript -->
<script src="/js/my-posts.js"></script>
</body>
</html>
````

## File: src/main/resources/templates/member/verifyPassword.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ë¹„ë°€ë²ˆí˜¸ í™•ì¸ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item active" aria-current="page">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</li>
            </ol>
        </nav>
        
        <div class="row justify-content-center">
            <div class="col-md-6 col-lg-4">
                <div class="card shadow">
                    <div class="card-body p-4">
                        <div class="text-center mb-4">
                            <h3 class="card-title fw-bold text-warning">
                                <i class="fas fa-shield-alt me-2"></i>
                                ë³´ì•ˆ í™•ì¸
                            </h3>
                            <p class="text-muted">íšŒì›ì •ë³´ ìˆ˜ì •ì„ ìœ„í•´<br>í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                        </div>

                        <form th:action="@{/member/myinfo/verify}" method="post" id="verifyForm">
                            <div class="mb-4">
                                <label for="password" class="form-label">
                                    <i class="fas fa-key me-1"></i>í˜„ì¬ ë¹„ë°€ë²ˆí˜¸
                                </label>
                                <div class="input-group">
                                    <input type="password"
                                           class="form-control"
                                           id="password"
                                           name="password"
                                           placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                                           required
                                           autocomplete="current-password">
                                    <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                        <i class="fas fa-eye" id="toggleIcon"></i>
                                    </button>
                                </div>
                                <div class="form-text text-muted">
                                    <i class="fas fa-info-circle me-1"></i>
                                    ê°œì¸ì •ë³´ ë³´í˜¸ë¥¼ ìœ„í•œ ì¶”ê°€ ì¸ì¦ì…ë‹ˆë‹¤
                                </div>
                            </div>

                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-check me-2"></i>
                                    í™•ì¸
                                </button>
                                <a th:href="@{/}" class="btn btn-outline-secondary">
                                    <i class="fas fa-arrow-left me-2"></i>
                                    ì·¨ì†Œ
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const passwordInput = document.getElementById('password');
    const toggleButton = document.getElementById('togglePassword');
    const toggleIcon = document.getElementById('toggleIcon');
    const verifyForm = document.getElementById('verifyForm');
    
    // ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ/ìˆ¨ê¹€ í† ê¸€
    toggleButton.addEventListener('click', function() {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        
        if (type === 'text') {
            toggleIcon.classList.remove('fa-eye');
            toggleIcon.classList.add('fa-eye-slash');
        } else {
            toggleIcon.classList.remove('fa-eye-slash');
            toggleIcon.classList.add('fa-eye');
        }
    });
    
    // í¼ ì œì¶œ ì‹œ ê²€ì¦
    verifyForm.addEventListener('submit', function(e) {
        const password = passwordInput.value.trim();
        
        if (password.length < 1) {
            e.preventDefault();
            alert('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            passwordInput.focus();
            return false;
        }
    });
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ í¬ì»¤ìŠ¤
    passwordInput.focus();
});
</script>
</body>
</html>
````

## File: src/main/resources/db_performance_indexes.sql
````sql
-- ğŸš€ LightCare í”„ë¡œì íŠ¸ ì„±ëŠ¥ ìµœì í™” ì¸ë±ìŠ¤
-- ê¸°ì¡´ ë°ì´í„°ì— ì˜í–¥ ì—†ì´ ê²€ìƒ‰ ì„±ëŠ¥ë§Œ í–¥ìƒì‹œí‚´

-- ë¦¬ë·° ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX IF NOT EXISTS idx_reviews_title ON reviews(title);
CREATE INDEX IF NOT EXISTS idx_reviews_created_at ON reviews(created_at DESC);
CREATE INDEX IF NOT EXISTS idx_reviews_rating ON reviews(rating);
CREATE INDEX IF NOT EXISTS idx_reviews_facility_id ON reviews(facility_id);

-- ê²Œì‹œíŒ ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX IF NOT EXISTS idx_boards_category ON boards(category);
CREATE INDEX IF NOT EXISTS idx_boards_created_at ON boards(created_at DESC);
CREATE INDEX IF NOT EXISTS idx_boards_title ON boards(title);
CREATE INDEX IF NOT EXISTS idx_boards_status ON boards(is_active, is_deleted);

-- êµ¬ì¸êµ¬ì§ ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX IF NOT EXISTS idx_jobs_type ON job_postings(job_type);
CREATE INDEX IF NOT EXISTS idx_jobs_status ON job_postings(status);
CREATE INDEX IF NOT EXISTS idx_jobs_created_at ON job_postings(created_at DESC);
CREATE INDEX IF NOT EXISTS idx_jobs_salary ON job_postings(salary);

-- ì‹œì„¤ ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX IF NOT EXISTS idx_facilities_name ON facilities(facility_name);
CREATE INDEX IF NOT EXISTS idx_facilities_location ON facilities(latitude, longitude);
CREATE INDEX IF NOT EXISTS idx_facilities_type ON facilities(facility_type);

-- íšŒì› ê´€ë ¨ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX IF NOT EXISTS idx_members_email ON members(email);
CREATE INDEX IF NOT EXISTS idx_members_role ON members(role);

-- ë³µí•© ì¸ë±ìŠ¤ (ìì£¼ í•¨ê»˜ ì‚¬ìš©ë˜ëŠ” ì¡°ê±´ë“¤)
CREATE INDEX IF NOT EXISTS idx_reviews_facility_rating ON reviews(facility_id, rating);
CREATE INDEX IF NOT EXISTS idx_boards_category_active ON boards(category, is_active, is_deleted);
CREATE INDEX IF NOT EXISTS idx_jobs_type_status ON job_postings(job_type, status);

-- ì¸ë±ìŠ¤ ìƒì„± ì™„ë£Œ í™•ì¸ìš© ì¿¼ë¦¬ (ì‹¤í–‰ í›„ í™•ì¸)
-- SHOW INDEX FROM reviews;
-- SHOW INDEX FROM boards;
-- SHOW INDEX FROM job_postings;
-- SHOW INDEX FROM facilities;
````

## File: .dockerignore
````
# ë¹Œë“œ ê²°ê³¼ë¬¼
/build/
/target/
*.class
bin/
out/

# Gradle ê´€ë ¨
.gradle/
!gradle-wrapper.jar
!gradle-wrapper.properties

# IDE ê´€ë ¨
.idea/
*.iml
*.ipr
*.iws
.vscode/
.settings/
.classpath
.project

# ë¡œê·¸ ë° ì„ì‹œ íŒŒì¼
*.log
logs/
*.lock
*.out
*.bak
*.swp
*.tmp

# OS ê´€ë ¨
.DS_Store
Thumbs.db

# ê°œë°œ í™˜ê²½ ì„¤ì •
.env
node_modules/

# í…ŒìŠ¤íŠ¸ íŒŒì¼
src/test/

# ë¬¸ì„œ íŒŒì¼ (ì„ íƒì ìœ¼ë¡œ ì œì™¸)
*.md
!README.md

# ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ (ë¡œì»¬ ê°œë°œìš©)
/carelink-uploads/
````

## File: cleanup_files.sh
````bash
#!/bin/bash

# ================================================
# ì—…ë¡œë“œëœ íŒŒì¼ë“¤ ì •ë¦¬ ìŠ¤í¬ë¦½íŠ¸
# ================================================

echo "ğŸ§¹ íŒŒì¼ ì‹œìŠ¤í…œ ì •ë¦¬ ì‹œì‘..."

# ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ë“¤ ì‚­ì œ
if [ -d "C:/carelink-uploads/facility" ]; then
    echo "ğŸ“ ì‹œì„¤ ì´ë¯¸ì§€ í´ë” ì •ë¦¬ ì¤‘..."
    rm -rf C:/carelink-uploads/facility/*
    echo "âœ… ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ë“¤ ì‚­ì œ ì™„ë£Œ"
else
    echo "âš ï¸ ì‹œì„¤ ì´ë¯¸ì§€ í´ë”ê°€ ì—†ìŠµë‹ˆë‹¤: C:/carelink-uploads/facility"
fi

# í”„ë¡œí•„ ì´ë¯¸ì§€ íŒŒì¼ë“¤ ì‚­ì œ (ì„ íƒì‚¬í•­)
if [ -d "C:/carelink-uploads/member" ]; then
    echo "ğŸ“ í”„ë¡œí•„ ì´ë¯¸ì§€ í´ë” ì •ë¦¬ ì¤‘..."
    rm -rf C:/carelink-uploads/member/*
    echo "âœ… í”„ë¡œí•„ ì´ë¯¸ì§€ íŒŒì¼ë“¤ ì‚­ì œ ì™„ë£Œ"
else
    echo "âš ï¸ í”„ë¡œí•„ ì´ë¯¸ì§€ í´ë”ê°€ ì—†ìŠµë‹ˆë‹¤: C:/carelink-uploads/member"
fi

# Gradle ë¹Œë“œ ìºì‹œ ì •ë¦¬
echo "ğŸ”„ Gradle ìºì‹œ ì •ë¦¬ ì¤‘..."
./gradlew clean

echo "âœ¨ íŒŒì¼ ì‹œìŠ¤í…œ ì •ë¦¬ ì™„ë£Œ!"
echo ""
echo "ğŸ”„ ë‹¤ìŒ ë‹¨ê³„:"
echo "1. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ì‹¤í–‰"
echo "2. ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘"
echo "3. ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¡œ í…ŒìŠ¤íŠ¸"
````

## File: backup/deprecated_files/edit.backup.html
````html
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/header :: header}">
    <title>ì‹œì„¤ ì •ë³´ ìˆ˜ì • - ë¼ì´íŠ¸ì¼€ì–´</title>
</head>

<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="container my-4">
    <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
            <li class="breadcrumb-item"><a href="/facility/search">ì‹œì„¤ ì°¾ê¸°</a></li>
            <li class="breadcrumb-item"><a href="/facility/manage">ë‚´ ì‹œì„¤ ê´€ë¦¬</a></li>
            <li class="breadcrumb-item active" aria-current="page">ì‹œì„¤ ì •ë³´ ìˆ˜ì •</li>
        </ol>
    </nav>
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-edit me-2"></i>ì‹œì„¤ ì •ë³´ ìˆ˜ì •
                    </h3>
                </div>
                <div class="card-body">
                    <form id="facilityEditForm" th:action="@{/facility/edit/{id}(id=${facility.facilityId})}" 
                          method="post" enctype="multipart/form-data" th:object="${facility}">
                        
                        <!-- ì‹œì„¤ëª… -->
                        <div class="mb-3">
                            <label for="facilityName" class="form-label">
                                <i class="fas fa-building me-1"></i>ì‹œì„¤ëª… <span class="text-danger">*</span>
                            </label>
                            <input type="text" class="form-control" id="facilityName" th:field="*{facilityName}"
                                   placeholder="ì‹œì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                        </div>

                        <!-- ì‹œì„¤ ìœ í˜• -->
                        <div class="mb-3">
                            <label for="facilityType" class="form-label">
                                <i class="fas fa-tag me-1"></i>ì‹œì„¤ ìœ í˜• <span class="text-danger">*</span>
                            </label>
                            <select class="form-select" id="facilityType" th:field="*{facilityType}" required>
                                <option value="">ì‹œì„¤ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="NURSING_HOME">ìš”ì–‘ì›</option>
                                <option value="HOSPITAL">ìš”ì–‘ë³‘ì›</option>
                                <option value="DAY_CARE">ë°ì´ì¼€ì–´ì„¼í„°</option>
                            </select>
                        </div>

                        <!-- ì£¼ì†Œ -->
                        <div class="mb-3">
                            <label for="facilityAddress" class="form-label">
                                <i class="fas fa-map-marker-alt me-1"></i>ì£¼ì†Œ <span class="text-danger">*</span>
                            </label>
                            <div class="input-group mb-2">
                                <input type="text" class="form-control" id="facilityAddress" th:field="*{address}"
                                       placeholder="ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”" readonly required>
                                <button type="button" class="btn btn-outline-primary" onclick="searchFacilityAddress()">
                                    <i class="fas fa-search me-1"></i>ì£¼ì†Œ ê²€ìƒ‰
                                </button>
                            </div>
                            <input type="text" class="form-control" id="detailAddress" th:field="*{detailAddress}"
                                   placeholder="ìƒì„¸ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 101í˜¸, 2ì¸µ)">
                            <!-- ìœ„ë„/ê²½ë„ íˆë“  í•„ë“œ -->
                            <input type="hidden" id="latitude" th:field="*{latitude}">
                            <input type="hidden" id="longitude" th:field="*{longitude}">
                        </div>
                        
                        <!-- ìœ„ì¹˜ ë¯¸ë¦¬ë³´ê¸° ì§€ë„ -->
                        <div class="mb-3" id="mapPreviewContainer" style="display: none;">
                            <label class="form-label">
                                <i class="fas fa-map me-1"></i>ìœ„ì¹˜ ë¯¸ë¦¬ë³´ê¸°
                            </label>
                            <div id="previewMap" style="width:100%; height:200px; border-radius: 8px; border: 1px solid #dee2e6;"></div>
                            <small class="form-text text-muted">ì„ íƒëœ ì£¼ì†Œì˜ ìœ„ì¹˜ê°€ ì§€ë„ì— í‘œì‹œë©ë‹ˆë‹¤.</small>
                        </div>

                        <!-- ì‹œì„¤ ì „í™”ë²ˆí˜¸ -->
                        <div class="mb-3">
                            <label for="phone" class="form-label">
                                <i class="fas fa-phone me-1"></i>ì‹œì„¤ ì „í™”ë²ˆí˜¸ <span class="text-danger">*</span>
                            </label>
                            <input type="tel" class="form-control" id="phone" th:field="*{phone}"
                                   placeholder="ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì§€ì—­ë²ˆí˜¸ì— ë§ê²Œ ìë™ í¬ë§·íŒ…)" required>
                            <small class="form-text text-muted">
                                <strong>ì§€ì—­ë²ˆí˜¸ ì˜ˆì‹œ:</strong> 
                                ì„œìš¸(02), ë¶€ì‚°(051), ëŒ€êµ¬(053), ì¸ì²œ(032), ê´‘ì£¼(062), ëŒ€ì „(042), ìš¸ì‚°(052) ë“±<br>
                                <strong>í˜•ì‹:</strong> 042ëŠ” 3-3-4, 02ëŠ” 2-3-4 ë˜ëŠ” 2-4-4 í˜•ì‹ìœ¼ë¡œ ìë™ ì ìš©ë©ë‹ˆë‹¤
                            </small>
                        </div>

                        <!-- í˜„ì¬ ì‹œì„¤ ì´ë¯¸ì§€ (ìˆëŠ” ê²½ìš°) -->
                        <div class="mb-3" th:if="${facility.facilityImage}">
                            <label class="form-label">
                                <i class="fas fa-image me-1"></i>í˜„ì¬ ì‹œì„¤ ì‚¬ì§„
                            </label>
                            <div class="current-image-container mb-3" style="position: relative; display: inline-block;">
                                <img th:src="@{${facility.facilityImage}}" alt="í˜„ì¬ ì‹œì„¤ ì‚¬ì§„" 
                                     style="max-width: 300px; max-height: 200px; border-radius: 12px; border: 2px solid #dee2e6; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                <div class="current-image-overlay" style="position: absolute; top: 8px; right: 8px;">
                                    <span class="badge bg-primary">í˜„ì¬ ì´ë¯¸ì§€</span>
                                </div>
                            </div>
                        </div>

                        <!-- ìƒˆ ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
                        <div class="mb-4">
                            <label class="form-label">
                                <i class="fas fa-cloud-upload-alt me-1"></i>ì‹œì„¤ ì‚¬ì§„ 
                                <span th:if="${facility.facilityImage == null}" class="text-danger">*</span>
                                <span th:if="${facility.facilityImage != null}" class="text-muted">(ìƒˆ ì´ë¯¸ì§€ë¡œ ë³€ê²½)</span>
                            </label>
                            
                            <!-- ìƒˆë¡œìš´ ì´ë¯¸ì§€ ì—…ë¡œë” ì»´í¬ë„ŒíŠ¸ -->
                            <div id="facilityImageUploader"></div>
                            
                            <!-- ìˆ¨ê²¨ì§„ íŒŒì¼ ì…ë ¥ (ê¸°ì¡´ í¼ê³¼ í˜¸í™˜ì„±ì„ ìœ„í•´) -->
                            <input type="file" id="facilityImageFile" name="facilityImageFile" 
                                   accept="image/*" style="display: none;"
                                   th:required="${facility.facilityImage == null}">
                            
                            <!-- Alt í…ìŠ¤íŠ¸ ì…ë ¥ (SEOìš©) -->
                            <input type="hidden" id="facilityImageAltText" name="facilityImageAltText" 
                                   th:value="${facility.facilityImageAltText}">
                        </div>

                        <!-- ìˆ˜ìš© ì¸ì› -->
                        <div class="mb-3">
                            <label for="capacity" class="form-label">
                                <i class="fas fa-users me-1"></i>ìˆ˜ìš© ì¸ì›
                            </label>
                            <input type="number" class="form-control" id="capacity" th:field="*{capacity}"
                                   placeholder="ìˆ˜ìš© ê°€ëŠ¥ ì¸ì›ì„ ì…ë ¥í•˜ì„¸ìš”" min="1">
                        </div>

                        <!-- ìš´ì˜ ì‹œê°„ -->
                        <div class="mb-3">
                            <label for="operatingHours" class="form-label">
                                <i class="fas fa-clock me-1"></i>ìš´ì˜ ì‹œê°„
                            </label>
                            <div class="row g-2">
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="operatingType" id="operating24" 
                                               value="24ì‹œê°„" th:checked="${facility.operatingHours == '24ì‹œê°„'}">
                                        <label class="form-check-label fw-bold text-success" for="operating24">
                                            <i class="fas fa-clock me-1"></i>24ì‹œê°„ ìš´ì˜
                                        </label>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="operatingType" id="operatingCustom" 
                                               value="custom" th:checked="${facility.operatingHours != '24ì‹œê°„' && facility.operatingHours != null}">
                                        <label class="form-check-label" for="operatingCustom">
                                            <i class="fas fa-clock me-1"></i>ì‹œê°„ ì§ì ‘ ì„¤ì •
                                        </label>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="operatingType" id="operatingWeekly" value="weekly">
                                        <label class="form-check-label" for="operatingWeekly">
                                            <i class="fas fa-calendar-week me-1"></i>ìš”ì¼ë³„ ì‹œê°„ ì„¤ì •
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì • -->
                            <div id="simpleTimeContainer" class="mt-3" style="display: none;">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h6 class="card-title mb-3">ìš´ì˜ ì‹œê°„ ì„¤ì •</h6>
                                        <div class="row g-2">
                                            <div class="col-md-6">
                                                <label class="form-label small">ì‹œì‘ ì‹œê°„</label>
                                                <select class="form-select" id="startHour">
                                                    <option value="">ì‹œ</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label small">ì¢…ë£Œ ì‹œê°„</label>
                                                <select class="form-select" id="endHour">
                                                    <option value="">ì‹œ</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="mt-2">
                                            <small class="text-muted">
                                                <i class="fas fa-info-circle me-1"></i>
                                                ë§¤ì¼ ë™ì¼í•œ ì‹œê°„ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ìš”ì¼ë³„ ì‹œê°„ ì„¤ì • -->
                            <div id="weeklyTimeContainer" class="mt-3" style="display: none;">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h6 class="card-title mb-3">ìš”ì¼ë³„ ìš´ì˜ ì‹œê°„</h6>
                                        <div id="weeklySchedule">
                                            <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                                        </div>
                                        
                                        <div class="mt-3">
                                            <small class="text-muted">
                                                <i class="fas fa-info-circle me-1"></i>
                                                ìš´ì˜í•˜ì§€ ì•ŠëŠ” ìš”ì¼ì€ ì²´í¬ë¥¼ í•´ì œí•˜ì„¸ìš”
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ì§ì ‘ ì…ë ¥ -->
                            <div id="customTimeContainer" class="mt-3" style="display: none;">
                                <input type="text" class="form-control" id="customOperatingHours" 
                                       placeholder="ì˜ˆ: 09:00-18:00, í‰ì¼ 09:00-18:00 ì£¼ë§ 10:00-16:00"
                                       th:value="${facility.operatingHours != '24ì‹œê°„' ? facility.operatingHours : ''}">
                                <small class="form-text text-muted">
                                    ììœ  í˜•ì‹ìœ¼ë¡œ ìš´ì˜ ì‹œê°„ì„ ì…ë ¥í•˜ì„¸ìš”
                                </small>
                            </div>
                            
                            <input type="hidden" id="operatingHours" th:field="*{operatingHours}">
                        </div>

                        <!-- í™ˆí˜ì´ì§€ -->
                        <div class="mb-3">
                            <label for="homepage" class="form-label">
                                <i class="fas fa-globe me-1"></i>í™ˆí˜ì´ì§€ URL
                            </label>
                            <input type="url" class="form-control" id="homepage" th:field="*{homepage}"
                                   placeholder="https://www.example.com">
                        </div>

                        <!-- ì‹œì„¤ ì„¤ëª… -->
                        <div class="mb-3">
                            <label for="description" class="form-label">
                                <i class="fas fa-info-circle me-1"></i>ì‹œì„¤ ì„¤ëª…
                            </label>
                            <textarea class="form-control" id="description" th:field="*{description}" rows="4"
                                      placeholder="ì‹œì„¤ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"
                                      data-rich-editor='{"height": "250px", "enableImage": true, "enableTable": false, "enableLink": true}'></textarea>
                        </div>

                        <!-- ì‹œì„¤ íŠ¹ì§• -->
                        <div class="mb-3">
                            <label for="features" class="form-label">
                                <i class="fas fa-star me-1"></i>ì‹œì„¤ íŠ¹ì§•
                            </label>
                            <input type="text" class="form-control" id="features" th:field="*{features}"
                                   placeholder="ì‹œì„¤ì˜ ì£¼ìš” íŠ¹ì§•ì„ ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 24ì‹œê°„ ê°„ë³‘ì„œë¹„ìŠ¤, ë¬¼ë¦¬ì¹˜ë£Œì‹¤, ì¹´í˜)">
                            <small class="form-text text-muted">ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ì—¬ëŸ¬ íŠ¹ì§•ì„ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</small>
                        </div>

                        <!-- ë²„íŠ¼ -->
                        <div class="d-flex gap-2 justify-content-end">
                            <a th:href="@{/facility/manage}" class="btn btn-secondary">
                                <i class="fas fa-times me-2"></i>ì·¨ì†Œ
                            </a>
                            <button type="submit" class="btn btn-primary" id="submitButton">
                                <i class="fas fa-save me-2"></i>ìˆ˜ì • ì™„ë£Œ
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ API -->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<!-- ì¹´ì¹´ì˜¤ë§µ API (ì¢Œí‘œ ë³€í™˜ìš©) -->
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=YOUR_KAKAO_APP_KEY&libraries=services"></script>
<!-- ì¹´ì¹´ì˜¤ë§µ ìœ í‹¸ë¦¬í‹° -->
<script src="/js/kakaomap.js"></script>
<script src="/js/facility-edit.js"></script>

<!-- ì „í™”ë²ˆí˜¸ í¬ë§·í„° -->
<script src="/js/phone-formatter.js"></script>

<!-- ê³ ê¸‰ ì´ë¯¸ì§€ í¬ë¡­í¼ -->
<link rel="stylesheet" href="/css/advanced-image-cropper.css">
<script src="/js/advanced-image-cropper.js"></script>

<!-- ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° -->
<link rel="stylesheet" href="/css/rich-text-editor.css">
<script src="/js/rich-text-editor.js"></script>

<script>
$(document).ready(function() {
    console.log('Initializing operating hours...');
    
    // ì‹œê°„ ì˜µì…˜ ë™ì  ìƒì„±
    initializeTimeOptions();
    
    // ìš”ì¼ë³„ ìŠ¤ì¼€ì¤„ ë¯¸ë¦¬ ìƒì„±
    generateWeeklySchedule();
    
    // ì§ì ‘ ì…ë ¥ ë³€ê²½ ì´ë²¤íŠ¸
    $('#customOperatingHours').on('input', function() {
        updateOperatingHours();
    });
    
    // ì´ˆê¸° ìƒíƒœ ì„¤ì •
    initializeOperatingHours();
});

function initializeTimeOptions() {
    // ì‹œì‘ ì‹œê°„ ì˜µì…˜ ìƒì„±
    for (let i = 0; i <= 23; i++) {
        const hour = String(i).padStart(2, '0');
        $('#startHour').append(`<option value="${hour}">${hour}ì‹œ</option>`);
        $('#endHour').append(`<option value="${hour}">${hour}ì‹œ</option>`);
    }
}

function generateWeeklySchedule() {
    console.log('Generating weekly schedule...');
    const days = ['ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼', 'ì¼ìš”ì¼'];
    let html = '';
    
    days.forEach((day, index) => {
        html += `
            <div class="row g-2 mb-2">
                <div class="col-3">
                    <div class="form-check">
                        <input class="form-check-input day-check" type="checkbox" id="day${index}" checked>
                        <label class="form-check-label" for="day${index}">${day}</label>
                    </div>
                </div>
                <div class="col-9 time-controls">
                    <div class="d-flex align-items-center gap-2">
                        <select class="form-select form-select-sm day-start" id="start${index}" style="width: 80px;">
                            <option value="">ì‹œì‘</option>
                        </select>
                        <span>ì‹œ ~</span>
                        <select class="form-select form-select-sm day-end" id="end${index}" style="width: 80px;">
                            <option value="">ì¢…ë£Œ</option>
                        </select>
                        <span>ì‹œ</span>
                    </div>
                    <div class="rest-day-notice text-muted small mt-1" style="display: none;">
                        <i class="fas fa-moon me-1"></i>íœ´ë¬´ì¼
                    </div>
                </div>
            </div>
        `;
    });
    
    $('#weeklySchedule').html(html);
    
    // ì‹œê°„ ì˜µì…˜ ì¶”ê°€
    for (let i = 0; i <= 23; i++) {
        const hour = String(i).padStart(2, '0');
        days.forEach((day, index) => {
            $(`#start${index}`).append(`<option value="${hour}">${hour}</option>`);
            $(`#end${index}`).append(`<option value="${hour}">${hour}</option>`);
        });
    }
    
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    setTimeout(function() {
        $('.day-check').off('change').on('change', function() {
            const index = $(this).attr('id').replace('day', '');
            const timeControls = $(this).closest('.row').find('.time-controls');
            const restNotice = timeControls.find('.rest-day-notice');
            const selects = timeControls.find('select');
            
            if ($(this).is(':checked')) {
                selects.show();
                timeControls.find('span').show();
                restNotice.hide();
            } else {
                selects.hide();
                timeControls.find('span').hide();
                restNotice.show();
            }
            
            updateOperatingHours();
        });
        
        $('.day-start, .day-end').off('change').on('change', function() {
            updateOperatingHours();
        });
        
        // ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì • ì´ë²¤íŠ¸ë„ ì—¬ê¸°ì„œ ë“±ë¡
        $('#startHour, #endHour').off('change').on('change', function() {
            updateOperatingHours();
        });
    }, 100);
}

function initializeOperatingHours() {
    const currentHours = $('#operatingHours').val();
    
    if (currentHours === '24ì‹œê°„') {
        $('#operating24').prop('checked', true);
    } else if (currentHours && currentHours !== '') {
        $('#operatingCustom').prop('checked', true);
        $('#customTimeContainer').show();
        $('#customOperatingHours').val(currentHours);
    }
}

function updateOperatingHours() {
    const operatingType = $('input[name="operatingType"]:checked').val();
    let operatingHours = '';
    
    if (operatingType === '24ì‹œê°„') {
        operatingHours = '24ì‹œê°„';
    } else if (operatingType === 'simple') {
        const startHour = $('#startHour').val();
        const endHour = $('#endHour').val();
        
        if (startHour && endHour) {
            operatingHours = `${startHour}:00-${endHour}:00`;
        }
    } else if (operatingType === 'weekly') {
        const weeklyHours = [];
        const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
        
        $('.day-check').each(function(index) {
            if ($(this).is(':checked')) {
                const startHour = $(`#start${index}`).val();
                const endHour = $(`#end${index}`).val();
                
                if (startHour && endHour) {
                    weeklyHours.push(`${days[index]} ${startHour}:00-${endHour}:00`);
                }
            } else {
                weeklyHours.push(`${days[index]} íœ´ë¬´`);
            }
        });
        
        operatingHours = weeklyHours.join(', ');
    } else if (operatingType === 'custom') {
        operatingHours = $('#customOperatingHours').val();
    }
    
    $('#operatingHours').val(operatingHours);
}


// ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì • ë¼ë””ì˜¤ ë²„íŠ¼ ë™ì  ì¶”ê°€
$(document).ready(function() {
    const simpleOption = `
        <div class="col-12">
            <div class="form-check">
                <input class="form-check-input" type="radio" name="operatingType" id="operatingSimple" value="simple">
                <label class="form-check-label" for="operatingSimple">
                    <i class="fas fa-clock me-1"></i>ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì •
                </label>
            </div>
        </div>
    `;
    
    $('#operatingCustom').closest('.col-12').after(simpleOption);
    
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë‹¤ì‹œ ë“±ë¡
    setTimeout(function() {
        $('input[name="operatingType"]').off('change').on('change', function() {
            const value = $(this).val();
            console.log('Operating type changed:', value);
            
            // ëª¨ë“  ì»¨í…Œì´ë„ˆ ìˆ¨ê¸°ê¸°
            $('#simpleTimeContainer, #weeklyTimeContainer, #customTimeContainer').hide();
            
            if (value === 'custom') {
                $('#customTimeContainer').show();
            } else if (value === 'weekly') {
                $('#weeklyTimeContainer').show();
                generateWeeklySchedule();
            } else if (value === 'simple') {
                $('#simpleTimeContainer').show();
            }
            
            updateOperatingHours();
        });
    }, 100);
    
    // ê³ ê¸‰ ì´ë¯¸ì§€ í¬ë¡­í¼ ì´ˆê¸°í™”
    initializeFacilityImageCropper();
});

// ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­í¼ ì´ˆê¸°í™”
function initializeFacilityImageCropper() {
    const facilityImageCropper = new AdvancedImageCropper('facilityImageUploader', {
        // ì‹œì„¤ ì´ë¯¸ì§€ ìµœì í™” ì„¤ì •
        aspectRatio: 16/10, // ì‹œì„¤ ì¹´ë“œ ë¹„ìœ¨
        cropWidth: 800,
        cropHeight: 500,
        previewStyle: 'facility',
        title: 'ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ',
        quality: 0.8,
        enableAltText: true,
        
        // í¬ë¡­ ì™„ë£Œ ì½œë°±
        onCropComplete: function(result) {
            console.log('ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ ì™„ë£Œ:', result);
            
            // ê¸°ì¡´ íŒŒì¼ ì…ë ¥ì— ì••ì¶•ëœ íŒŒì¼ ì„¤ì •
            const facilityImageFile = document.getElementById('facilityImageFile');
            const facilityImageAltText = document.getElementById('facilityImageAltText');
            
            // DataTransferë¥¼ ì‚¬ìš©í•˜ì—¬ File ê°ì²´ë¥¼ inputì— ì„¤ì •
            const dataTransfer = new DataTransfer();
            const compressedFile = new File([result.compressedBlob], 
                result.originalFile.name, {
                    type: 'image/jpeg',
                    lastModified: Date.now()
                });
            
            dataTransfer.items.add(compressedFile);
            facilityImageFile.files = dataTransfer.files;
            
            // Alt í…ìŠ¤íŠ¸ ì„¤ì •
            if (facilityImageAltText) {
                facilityImageAltText.value = result.altText;
            }
            
            // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
            showSuccessMessage('ì‹œì„¤ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ìµœì í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
        },
        
        // ì—ëŸ¬ ì½œë°±
        onError: function(message) {
            console.error('ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ ì˜¤ë¥˜:', message);
            showErrorMessage('ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + message);
        }
    });
    
    // ì „ì—­ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì €ì¥
    window.facilityImageCropper = facilityImageCropper;
}

// ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
function showSuccessMessage(message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-success alert-dismissible fade show';
    alertDiv.innerHTML = `
        <i class="fas fa-check-circle me-2"></i>${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    // í¼ ìƒë‹¨ì— ë©”ì‹œì§€ ì‚½ì…
    const form = document.getElementById('facilityEditForm');
    form.insertBefore(alertDiv, form.firstChild);
    
    // 5ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 5000);
}

// ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
function showErrorMessage(message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-danger alert-dismissible fade show';
    alertDiv.innerHTML = `
        <i class="fas fa-exclamation-triangle me-2"></i>${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    // í¼ ìƒë‹¨ì— ë©”ì‹œì§€ ì‚½ì…
    const form = document.getElementById('facilityEditForm');
    form.insertBefore(alertDiv, form.firstChild);
    
    // 10ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 10000);
}
</script>

</body>
</html>
````

## File: backup/facility-image-implementation/facility-image-implementation/detail-backup.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ì‹œì„¤ ìƒì„¸ë³´ê¸°</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<div class="container mt-4">
    <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
            <li class="breadcrumb-item"><a href="/facility/search">ì‹œì„¤ ì°¾ê¸°</a></li>
            <li class="breadcrumb-item active" aria-current="page">ì‹œì„¤ ìƒì„¸</li>
        </ol>
    </nav>
    <!-- 4:6 ë¹„ìœ¨ë¡œ ë°°ì¹˜ -->
    <div class="row">
        <!-- ì™¼ìª½ 40%: ì‹œì„¤ ê¸°ë³¸ì •ë³´ + ì‹œì„¤ì •ë³´, ì‹œì„¤í˜„í™©, ì—°ë½ì²˜ì •ë³´, ê´€ë ¨ì„œë¹„ìŠ¤ -->
        <div class="col-md-5">
            <!-- ì‹œì„¤ ê¸°ë³¸ì •ë³´ -->
            <div class="card mb-3 shadow-sm" style="min-height: 500px;">
                <div class="card-header bg-light">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-building text-primary me-2"></i>
                        <h5 class="mb-0">ì‹œì„¤ ê¸°ë³¸ì •ë³´</h5>
                    </div>
                </div>
                <div class="card-body d-flex flex-column">
                    <!-- ì„¸ë¡œ ë°°ì¹˜: ì´ë¯¸ì§€ â†’ ë‚´ìš© â†’ ë²„íŠ¼ -->
                    
                    <!-- 1. ì‹œì„¤ ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë” -->
                    <div class="position-relative mb-4 flex-grow-1">
                        <div id="facilityImageCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
                            <div class="carousel-inner rounded shadow-sm" style="height: 250px;">
                                <!-- ë‹¤ì¤‘ ì´ë¯¸ì§€ê°€ ìˆëŠ” ê²½ìš° -->
                                <div th:if="${facilityImages != null and #lists.size(facilityImages) > 0}">
                                    <div th:each="image, iterStat : ${facilityImages}" 
                                         th:class="${'carousel-item' + (iterStat.index == 0 ? ' active' : '')}">
                                        <img th:src="${image.imagePath}"
                                             class="d-block w-100 facility-carousel-img"
                                             style="height: 250px; object-fit: cover; cursor: pointer;"
                                             th:alt="${image.imageAltText}"
                                             th:onclick="'openImageModal(' + ${iterStat.index} + ')'"
                                             th:data-index="${iterStat.index}"
                                             loading="lazy">
                                        <!-- ì´ë¯¸ì§€ ìˆœì„œ í‘œì‹œ -->
                                        <div class="carousel-caption d-none d-md-block" 
                                             style="background: rgba(0,0,0,0.5); border-radius: 5px; right: 10px; left: auto; bottom: 10px; width: auto; padding: 5px 10px;">
                                            <small th:text="${iterStat.index + 1} + '/' + ${#lists.size(facilityImages)}">1/5</small>
                                        </div>
                                    </div>
                                </div>
                                <!-- ì´ë¯¸ì§€ê°€ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì´ë¯¸ì§€ -->
                                <div th:unless="${facilityImages != null and #lists.size(facilityImages) > 0}" 
                                     class="carousel-item active">
                                    <div class="d-flex align-items-center justify-content-center bg-light" style="height: 250px;">
                                        <div class="text-center text-muted">
                                            <i class="fas fa-image fa-3x mb-2" style="opacity: 0.3;"></i>
                                            <p class="mb-0 small">ë“±ë¡ëœ ì‹œì„¤ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ì´ë¯¸ì§€ê°€ 2ê°œ ì´ìƒì¼ ë•Œë§Œ í™”ì‚´í‘œ í‘œì‹œ -->
                            <div th:if="${facilityImages != null and #lists.size(facilityImages) > 1}">
                                <button class="carousel-control-prev" type="button" 
                                        data-bs-target="#facilityImageCarousel" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" 
                                          style="background-color: rgba(0,0,0,0.5); border-radius: 50%; width: 30px; height: 30px;"></span>
                                    <span class="visually-hidden">ì´ì „</span>
                                </button>
                                <button class="carousel-control-next" type="button" 
                                        data-bs-target="#facilityImageCarousel" data-bs-slide="next">
                                    <span class="carousel-control-next-icon"
                                          style="background-color: rgba(0,0,0,0.5); border-radius: 50%; width: 30px; height: 30px;"></span>
                                    <span class="visually-hidden">ë‹¤ìŒ</span>
                                </button>
                            </div>
                            
                            <!-- ì´ë¯¸ì§€ ì¸ë””ì¼€ì´í„° (ì ) -->
                            <div th:if="${facilityImages != null and #lists.size(facilityImages) > 1}" 
                                 class="carousel-indicators" style="bottom: -30px;">
                                <button th:each="image, iterStat : ${facilityImages}" 
                                        type="button" 
                                        data-bs-target="#facilityImageCarousel" 
                                        th:data-bs-slide-to="${iterStat.index}"
                                        th:class="${iterStat.index == 0 ? 'active' : ''}"
                                        style="width: 8px; height: 8px; border-radius: 50%; background-color: #007bff;"></button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 2. ì‹œì„¤ëª…, ë“±ê¸‰, ë³„ì  -->
                    <div class="text-center mb-4">
                        <h4 class="mb-3" th:text="${facility.facilityName}">ì‹œì„¤ëª…</h4>
                        <div class="d-flex flex-wrap gap-2 justify-content-center mb-3">
                            <span class="badge bg-primary fs-6" th:text="${facility.facilityType}">ì‹œì„¤ìœ í˜•</span>
                            <span th:if="${facility.gradeRating != null and facility.gradeRating > 0}" 
                                  class="badge fs-6 grade-badge"
                                  th:data-grade="${facility.gradeRating}"
                                  th:text="${facility.gradeRating} + 'ë“±ê¸‰'">1ë“±ê¸‰</span>
                            <span th:unless="${facility.gradeRating != null and facility.gradeRating > 0}" 
                                  class="badge bg-secondary fs-6">ë“±ê¸‰ ì •ë³´ ì—†ìŒ</span>
                        </div>
                        <div th:if="${facility.averageRating != null and facility.averageRating > 0}">
                            <span class="badge bg-warning text-dark fs-6">
                                <i class="fas fa-star"></i> <span th:text="${#numbers.formatDecimal(facility.averageRating, 1, 1)}">0.0</span>
                            </span>
                        </div>
                    </div>
                    
                    <!-- 3. ë²„íŠ¼ -->
                    <div class="mt-auto">
                        <!-- ê´€ë¦¬ì ë˜ëŠ” ì‹œì„¤ ì†Œìœ ìì¸ ê²½ìš° ê´€ë¦¬ ë²„íŠ¼ í‘œì‹œ -->
                        <div th:if="${isAdmin or isOwner}" class="mb-3">
                            <div class="row g-2">
                                <div class="col-6">
                                    <a th:href="@{/facility/edit/{id}(id=${facility.facilityId})}" 
                                       class="btn btn-warning w-100 btn-sm">
                                        <i class="fas fa-edit"></i><br><small>ì‹œì„¤ìˆ˜ì •</small>
                                    </a>
                                </div>
                                <div class="col-6">
                                    <button class="btn btn-danger w-100 btn-sm" 
                                            th:onclick="'deleteFacility(' + ${facility.facilityId} + ')'">
                                        <i class="fas fa-trash"></i><br><small>ì‹œì„¤ì‚­ì œ</small>
                                    </button>
                                </div>
                            </div>
                            <hr class="my-3">
                        </div>
                        
                        <!-- ì¼ë°˜ ì‚¬ìš©ì ë²„íŠ¼ -->
                        <div class="row g-2">
                            <div class="col-6">
                                <button class="btn btn-primary w-100 btn-sm" th:data-phone="${facility.phone}" onclick="callFacilityPhone(this)">
                                    <i class="fas fa-phone"></i><br><small>ì „í™”ìƒë‹´</small>
                                </button>
                            </div>
                            <div class="col-6">
                                <button class="btn btn-success w-100 btn-sm" onclick="writeReview()">
                                    <i class="fas fa-star"></i><br><small>ë¦¬ë·°ì‘ì„±</small>
                                </button>
                            </div>
                            <div class="col-6">
                                <button class="btn btn-outline-secondary w-100 btn-sm" onclick="shareToKakao()">
                                    <i class="fas fa-share"></i><br><small>ê³µìœ </small>
                                </button>
                            </div>
                            <div class="col-6">
                                <button class="btn btn-outline-primary w-100 btn-sm" onclick="searchNearbyJobs()">
                                    <i class="fas fa-briefcase"></i><br><small>ì£¼ë³€ì±„ìš©</small>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ì‹œì„¤ì •ë³´ -->
            <div class="card mb-3 shadow-sm">
                <div class="card-header bg-light">
                    <h6 class="mb-0"><i class="fas fa-info-circle text-primary me-2"></i>ì‹œì„¤ì •ë³´</h6>
                </div>
                <div class="card-body">
                    <div class="row small">
                        <div class="col-12">
                            <div class="info-item mb-2">
                                <i class="fas fa-map-marker-alt text-danger me-2"></i>
                                <span th:text="${facility.address}">ì£¼ì†Œ</span>
                            </div>
                            <div class="info-item mb-2">
                                <i class="fas fa-phone text-success me-2"></i>
                                <span th:text="${facility.phone}">ì „í™”ë²ˆí˜¸</span>
                            </div>
                            <div class="info-item mb-2">
                                <i class="fas fa-user-tie text-primary me-2"></i>
                                ì›ì¥: <span th:text="${facility.registeredMemberName}">ì›ì¥ëª…</span>
                            </div>
                            <div class="info-item mb-2">
                                <i class="fas fa-bed text-warning me-2"></i>
                                ì •ì›: <span th:text="${facility.capacity}">ì •ì›</span>ëª…
                                <span th:if="${facility.currentOccupancy != null}" class="text-muted">
                                    (í˜„ì¬: <span th:text="${facility.currentOccupancy}">0</span>ëª…)
                                </span>
                            </div>
                            <div class="info-item mb-2" th:if="${facility.homepage}">
                                <i class="fas fa-globe text-info me-2"></i>
                                <a th:href="${facility.homepage}" target="_blank" class="text-decoration-none">í™ˆí˜ì´ì§€</a>
                            </div>
                        </div>
                    </div>
                    <div th:if="${facility.description}" class="mt-3 pt-2 border-top">
                        <p class="small mb-0" style="line-height: 1.4;" th:text="${facility.description}">ì‹œì„¤ ì†Œê°œ</p>
                    </div>
                    <div th:if="${facility.features}" class="mt-2">
                        <div class="features-list">
                            <span th:each="feature : ${#strings.arraySplit(facility.features, ',')}" 
                                  class="badge bg-light text-dark me-1 mb-1" th:text="${feature}">íŠ¹ì§•</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì‹œì„¤í˜„í™© -->
            <div class="card mb-3 shadow-sm">
                <div class="card-header bg-light">
                    <h6 class="mb-0"><i class="fas fa-chart-bar text-primary me-2"></i>ì‹œì„¤í˜„í™©</h6>
                </div>
                <div class="card-body">
                    <div class="row text-center g-2">
                        <div class="col-6">
                            <div class="p-2 bg-light rounded">
                                <h5 th:if="${facility.gradeRating != null and facility.gradeRating > 0}"
                                    th:text="${facility.gradeRating} + 'ë“±ê¸‰'"
                                    class="grade-rating mb-1"
                                    th:data-grade="${facility.gradeRating}">1ë“±ê¸‰</h5>
                                <h5 th:unless="${facility.gradeRating != null and facility.gradeRating > 0}" class="text-muted mb-1">-</h5>
                                <small class="text-muted">ì‹œì„¤ë“±ê¸‰</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-2 bg-light rounded">
                                <h5 class="mb-1" th:text="${facility.capacity ?: '-'}">-</h5>
                                <small class="text-muted">ì •ì›</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-2 bg-light rounded">
                                <h5 class="mb-1" th:text="${facility.currentOccupancy ?: '0'}">0</h5>
                                <small class="text-muted">í˜„ì¬ì…ì†Œ</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-2 bg-light rounded">
                                <h5 th:if="${facility.averageRating != null and facility.averageRating > 0}"
                                    th:text="${#numbers.formatDecimal(facility.averageRating, 1, 1)}"
                                    class="text-warning mb-1">4.5</h5>
                                <h5 th:unless="${facility.averageRating != null and facility.averageRating > 0}" class="text-muted mb-1">0.0</h5>
                                <small class="text-muted">í‰ê· í‰ì </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>

        <!-- ì˜¤ë¥¸ìª½ 60%: ì§€ë„ì™€ ë¦¬ë·° -->
        <div class="col-md-7">
            <!-- ìœ„ì¹˜ ë° êµí†µì •ë³´ -->
            <div class="card mb-3 shadow-sm">
                <div class="card-header bg-light">
                    <h5 class="mb-0"><i class="fas fa-map-marker-alt text-danger me-2"></i>ìœ„ì¹˜ ë° êµí†µì •ë³´</h5>
                </div>
                <div class="card-body p-0">
                    <div id="facilityMap" style="width:100%; height:400px;">
                        <div class="d-flex align-items-center justify-content-center h-100 text-muted">
                            <div class="text-center">
                                <i class="fas fa-map fa-3x mb-3 text-primary"></i>
                                <p class="fs-6">ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                            </div>
                        </div>
                    </div>
                    <div class="p-3 bg-light border-top">
                        <div class="d-flex align-items-center mb-1">
                            <i class="fas fa-map-marker-alt text-danger me-2"></i>
                            <strong th:text="${facility.address}">ì£¼ì†Œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</strong>
                        </div>
                        <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            ì§€ë„ë¥¼ í´ë¦­í•˜ê±°ë‚˜ í™•ëŒ€/ì¶•ì†Œí•˜ì—¬ ë” ìì„¸í•œ ìœ„ì¹˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
                        </small>
                    </div>
                </div>
            </div>

            <!-- ì‹œì„¤ë¦¬ë·° -->
            <div class="card shadow-sm">
                <div class="card-header bg-light d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">
                        <i class="fas fa-comments text-primary me-2"></i>ì‹œì„¤ë¦¬ë·° 
                        <span class="badge bg-primary ms-2" th:text="${reviewCount}">0</span>
                    </h5>
                    <button class="btn btn-sm btn-primary" onclick="writeReview()">
                        <i class="fas fa-plus me-1"></i>ë¦¬ë·° ì‘ì„±
                    </button>
                </div>
                <div class="card-body">
                    <div id="reviewList">
                        <!-- ë¦¬ë·°ê°€ ìˆëŠ” ê²½ìš° -->
                        <div th:if="${not #lists.isEmpty(recentReviews)}">
                            <div th:each="review : ${recentReviews}" class="review-item border-bottom pb-3 mb-3">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1" th:text="${review.title}">ë¦¬ë·° ì œëª©</h6>
                                        <div class="mb-2">
                                            <span class="text-warning">
                                                <i th:each="i : ${#numbers.sequence(1, 5)}" 
                                                   th:class="${i <= review.rating} ? 'fas fa-star' : 'far fa-star'"></i>
                                            </span>
                                            <span class="ms-2 fw-bold" th:text="${review.rating} + '.0'">5.0</span>
                                        </div>
                                        <p class="text-muted small mb-2" th:text="${#strings.abbreviate(review.content, 100)}">ë¦¬ë·° ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°</p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <small class="text-muted">
                                                <i class="fas fa-user me-1"></i>
                                                <span th:text="${review.memberName}">ì‘ì„±ì</span>
                                                <span class="mx-2">|</span>
                                                <i class="fas fa-calendar me-1"></i>
                                                <span th:text="${#temporals.format(review.createdAt, 'yyyy-MM-dd')}">ì‘ì„±ì¼</span>
                                            </small>
                                            <a th:href="@{/review/detail/{id}(id=${review.reviewId})}" class="btn btn-sm btn-outline-secondary">
                                                <i class="fas fa-eye me-1"></i>ìƒì„¸ë³´ê¸°
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <a th:href="@{/review(facilityId=${facility.facilityId})}" class="btn btn-outline-primary me-2">
                                    <i class="fas fa-list me-1"></i>ì „ì²´ ë¦¬ë·° ë³´ê¸°
                                </a>
                                <!-- ì‹œì„¤ ì†Œìœ ìë§Œ ê´€ë¦¬ ë²„íŠ¼ í‘œì‹œ -->
                                <a th:if="${session.loginMember != null and session.loginMember.memberId == facility.registeredMemberId}" 
                                   th:href="@{/facility/manage}" class="btn btn-success">
                                    <i class="fas fa-cogs me-1"></i>ì‹œì„¤ ê´€ë¦¬
                                </a>
                            </div>
                        </div>
                        
                        <!-- ë¦¬ë·°ê°€ ì—†ëŠ” ê²½ìš° -->
                        <div th:if="${#lists.isEmpty(recentReviews)}" class="text-center text-muted py-4">
                            <i class="fas fa-comments fa-2x mb-2"></i>
                            <p>ì•„ì§ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                            <p class="small">ì²« ë²ˆì§¸ ë¦¬ë·°ë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”!</p>
                            <!-- ì‹œì„¤ ì†Œìœ ìë§Œ ê´€ë¦¬ ë²„íŠ¼ í‘œì‹œ -->
                            <div th:if="${session.loginMember != null and session.loginMember.memberId == facility.registeredMemberId}" class="mt-3">
                                <a th:href="@{/facility/manage}" class="btn btn-success">
                                    <i class="fas fa-cogs me-1"></i>ì‹œì„¤ ê´€ë¦¬
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{layout/footer :: footer}"></div>
<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ì¹´ì¹´ì˜¤ë§µ API -->
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=YOUR_KAKAO_APP_KEY&libraries=services,clusterer,drawing"></script>

<!-- ì‹œì„¤ ìƒì„¸ë³´ê¸° ì „ìš© JavaScript -->
<script src="/js/facility-detail.js"></script>
<script src="/js/facility-detail-map.js"></script>

<!-- Thymeleaf ë°ì´í„° ì „ë‹¬ ìŠ¤í¬ë¦½íŠ¸ -->
<script th:inline="javascript">
    /*<![CDATA[*/
    
    // ì‹œì„¤ ë°ì´í„° ì´ˆê¸°í™”
    const facilityDataFromServer = {
        facilityId: /*[[${facility.facilityId}]]*/ 0,
        name: /*[[${facility.facilityName}]]*/ '',
        latitude: /*[[${facility.latitude}]]*/ 0,
        longitude: /*[[${facility.longitude}]]*/ 0,
        address: /*[[${facility.address}]]*/ '',
        phone: /*[[${facility.phone}]]*/ '',
        facilityImage: /*[[${facility.facilityImage}]]*/ ''
    };
    
    // ì‹œì„¤ ì´ë¯¸ì§€ ë°ì´í„° ì´ˆê¸°í™”
    const facilityImagesFromServer = [
        /*[# th:each="image, imageStat : ${facilityImages}"]*/
        {
            path: '[[${image.imagePath}]]',
            alt: '[[${image.imageAltText != null ? image.imageAltText : "ì‹œì„¤ ì´ë¯¸ì§€"}]]'
        }/*[# th:unless="${imageStat.last}"],*//*[/]*/
        /*[/]*/
    ];

    // DOM ë¡œë“œ í›„ ë°ì´í„° ì´ˆê¸°í™”
    $(document).ready(function() {
        console.log('ğŸ¢ ì‹œì„¤ ìƒì„¸ë³´ê¸° í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘');
        
        // ë°ì´í„° ì´ˆê¸°í™”
        initializeFacilityData(facilityDataFromServer);
        initializeFacilityImages(facilityImagesFromServer);
        initializeFacilityMapData(facilityDataFromServer);
        
        // ì§€ë„ ì´ˆê¸°í™”
        setTimeout(function() {
            initializeFacilityDetailMap();
        }, 500);
        
        console.log('âœ… ì‹œì„¤ ìƒì„¸ë³´ê¸° í˜ì´ì§€ ì´ˆê¸°í™” ì™„ë£Œ');
    });

    // ì „í™”í•˜ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    function callFacilityPhone(button) {
        const phone = button.getAttribute('data-phone');
        if (phone) {
            window.location.href = `tel:${phone}`;
        }
    }

    // ë¦¬ë·° ì‘ì„± í˜ì´ì§€ë¡œ ì´ë™
    function writeReview() {
        window.location.href = `/review/write?facilityId=[[${facility.facilityId}]]`;
    }


    // ì£¼ë³€ êµ¬ì¸ì •ë³´ ê²€ìƒ‰
    function searchNearbyJobs() {
        const latitude = /*[[${facility.latitude}]]*/ 0;
        const longitude = /*[[${facility.longitude}]]*/ 0;
        window.location.href = `/job/list?lat=${latitude}&lng=${longitude}&radius=5`;
    }

    // ì¹´ì¹´ì˜¤í†¡ ê³µìœ í•˜ê¸°
    function shareToKakao() {
        const facilityId = /*[[${facility.facilityId}]]*/ 0;
        const facilityName = /*[[${facility.facilityName}]]*/ 'ì‹œì„¤ëª…';
        const address = /*[[${facility.address}]]*/ 'ì£¼ì†Œ';
        const logoImageUrl = /*[[${facility.facilityImage}]]*/ '/images/default_facility.jpg';

        if (window.Kakao) {
            Kakao.Link.sendDefault({
                objectType: 'location',
                address: address,
                addressTitle: facilityName,
                content: {
                    title: facilityName,
                    description: `${address}\nìƒì„¸ ì •ë³´ ë³´ê¸°`,
                    imageUrl: logoImageUrl,
                    link: {
                        mobileWebUrl: window.location.href,
                        webUrl: window.location.href
                    }
                },
                buttons: [
                    {
                        title: 'ìƒì„¸ ì •ë³´ ë³´ê¸°',
                        link: {
                            mobileWebUrl: window.location.href,
                            webUrl: window.location.href
                        }
                    }
                ]
            });
        } else {
            alert('ì¹´ì¹´ì˜¤í†¡ ê³µìœ í•˜ê¸°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }
    }

    /*]]>*/
</script>

<!-- ì´ë¯¸ì§€ í™•ëŒ€ ëª¨ë‹¬ -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content bg-dark">
            <div class="modal-header border-0">
                <h5 class="modal-title text-white" id="imageModalLabel">ì‹œì„¤ ì´ë¯¸ì§€</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
            </div>
            <div class="modal-body p-0 position-relative">
                <div id="modalCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
                    <div class="carousel-inner" id="modalCarouselInner">
                        <!-- ì´ë¯¸ì§€ë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë¨ -->
                    </div>
                    
                    <!-- ëª¨ë‹¬ ë‚´ ì»¨íŠ¸ë¡¤ -->
                    <button class="carousel-control-prev" type="button" data-bs-target="#modalCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" style="width: 40px; height: 40px;"></span>
                        <span class="visually-hidden">ì´ì „</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#modalCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" style="width: 40px; height: 40px;"></span>
                        <span class="visually-hidden">ë‹¤ìŒ</span>
                    </button>
                    
                    <!-- ëª¨ë‹¬ ë‚´ ì¸ë””ì¼€ì´í„° -->
                    <div class="carousel-indicators" id="modalCarouselIndicators">
                        <!-- JavaScriptë¡œ ë™ì  ìƒì„±ë¨ -->
                    </div>
                </div>
                
                <!-- ì´ë¯¸ì§€ ì •ë³´ í‘œì‹œ -->
                <div class="position-absolute bottom-0 start-0 end-0 bg-dark bg-opacity-75 text-white p-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <span id="modalImageCounter">1 / 5</span>
                            <span class="ms-3" id="modalImageAlt">ì‹œì„¤ ì´ë¯¸ì§€</span>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-outline-light me-2" onclick="toggleAutoSlide()">
                                <i class="fas fa-play" id="autoSlideIcon"></i>
                                <span id="autoSlideText">ìë™ì¬ìƒ</span>
                            </button>
                            <button class="btn btn-sm btn-outline-light" onclick="downloadImage()">
                                <i class="fas fa-download"></i> ë‹¤ìš´ë¡œë“œ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// ì‹œì„¤ ì´ë¯¸ì§€ ë°ì´í„° (Thymeleafì—ì„œ JavaScriptë¡œ ì „ë‹¬)
const facilityImages = [
    /*[# th:each="image, imageStat : ${facilityImages}"]*/
    {
        path: '[[${image.imagePath}]]',
        alt: '[[${image.imageAltText != null ? image.imageAltText : "ì‹œì„¤ ì´ë¯¸ì§€"}]]'
    }/*[# th:unless="${imageStat.last}"],*//*[/]*/
    /*[/]*/
];

console.log('ğŸ“¸ ì‹œì„¤ ì´ë¯¸ì§€ ë°ì´í„° ë¡œë“œ:', facilityImages);

let currentModalIndex = 0;
let modalCarousel;
let autoSlideInterval;
let isAutoSliding = false;

// DOM ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸ–¼ï¸ DOM ë¡œë“œ ì™„ë£Œ - ì‹œì„¤ ì´ë¯¸ì§€ ìˆ˜:', facilityImages.length);
    console.log('ğŸ“¸ ì´ë¯¸ì§€ ë°ì´í„°:', facilityImages);
    
    // ëª¨ë‹¬ ìš”ì†Œ í™•ì¸
    const modal = document.getElementById('imageModal');
    if (!modal) {
        console.error('âŒ ì´ë¯¸ì§€ ëª¨ë‹¬ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    } else {
        console.log('âœ… ì´ë¯¸ì§€ ëª¨ë‹¬ ìš”ì†Œ í™•ì¸ë¨');
    }
});

// ì´ë¯¸ì§€ ëª¨ë‹¬ ì—´ê¸°
function openImageModal(imageIndex = 0) {
    console.log('ğŸ–¼ï¸ ì´ë¯¸ì§€ ëª¨ë‹¬ ì—´ê¸° ì‹œë„ - imageIndex:', imageIndex);
    console.log('ğŸ“¸ ì‚¬ìš© ê°€ëŠ¥í•œ ì´ë¯¸ì§€ ìˆ˜:', facilityImages.length);
    
    if (facilityImages.length === 0) {
        console.warn('âš ï¸ í‘œì‹œí•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤');
        alert('í‘œì‹œí•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    currentModalIndex = Math.max(0, Math.min(imageIndex, facilityImages.length - 1));
    console.log('ğŸ“ ì‹¤ì œ ëª¨ë‹¬ ì¸ë±ìŠ¤:', currentModalIndex);
    
    setupModalCarousel();
    
    const modalElement = document.getElementById('imageModal');
    const modal = new bootstrap.Modal(modalElement);
    
    // ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±° (ì¤‘ë³µ ë°©ì§€)
    modalElement.removeEventListener('shown.bs.modal', handleModalShown);
    modalElement.removeEventListener('hidden.bs.modal', handleModalHidden);
    
    // ìƒˆ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    modalElement.addEventListener('shown.bs.modal', handleModalShown);
    modalElement.addEventListener('hidden.bs.modal', handleModalHidden);
    
    modal.show();
    console.log('âœ… ëª¨ë‹¬ í‘œì‹œ ì™„ë£Œ');
}

// ëª¨ë‹¬ í‘œì‹œ ì™„ë£Œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
function handleModalShown() {
    console.log('ğŸ¯ ëª¨ë‹¬ì´ ì™„ì „íˆ ì—´ë¦¼ - ìºëŸ¬ì…€ ì´ˆê¸°í™”');
    if (modalCarousel) {
        modalCarousel.to(currentModalIndex);
        updateModalImageInfo();
    }
    startAutoSlide();
}

// ëª¨ë‹¬ ìˆ¨ê¹€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
function handleModalHidden() {
    console.log('ğŸšª ëª¨ë‹¬ì´ ë‹«í˜ - ì •ë¦¬ ì‘ì—…');
    stopAutoSlide();
}

// ëª¨ë‹¬ ìºëŸ¬ì…€ ì„¤ì •
function setupModalCarousel() {
    console.log('ğŸ”§ ëª¨ë‹¬ ìºëŸ¬ì…€ ì„¤ì • ì‹œì‘');
    
    const carouselInner = document.getElementById('modalCarouselInner');
    const indicators = document.getElementById('modalCarouselIndicators');
    
    if (!carouselInner || !indicators) {
        console.error('âŒ ëª¨ë‹¬ ìºëŸ¬ì…€ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
        return;
    }
    
    // ê¸°ì¡´ ìºëŸ¬ì…€ ì¸ìŠ¤í„´ìŠ¤ í•´ì œ
    if (modalCarousel) {
        modalCarousel.dispose();
        modalCarousel = null;
    }
    
    // ê¸°ì¡´ ë‚´ìš© ì •ë¦¬
    carouselInner.innerHTML = '';
    indicators.innerHTML = '';
    
    console.log('ğŸ“¸ ëª¨ë‹¬ì— í‘œì‹œí•  ì´ë¯¸ì§€ ìˆ˜:', facilityImages.length);
    
    // ì´ë¯¸ì§€ ì•„ì´í…œ ìƒì„±
    facilityImages.forEach((image, index) => {
        console.log(`ğŸ–¼ï¸ ì´ë¯¸ì§€ ${index + 1} ìƒì„±:`, image.path);
        
        // ìºëŸ¬ì…€ ì•„ì´í…œ
        const carouselItem = document.createElement('div');
        carouselItem.className = `carousel-item ${index === currentModalIndex ? 'active' : ''}`;
        carouselItem.innerHTML = `
            <div class="d-flex justify-content-center align-items-center" style="height: 80vh;">
                <img src="${image.path}" 
                     class="img-fluid" 
                     style="max-height: 100%; max-width: 100%; object-fit: contain;" 
                     alt="${image.alt || 'ì‹œì„¤ ì´ë¯¸ì§€'}"
                     onerror="this.src='/images/default_facility.jpg'">
            </div>
        `;
        carouselInner.appendChild(carouselItem);
        
        // ì¸ë””ì¼€ì´í„° ë²„íŠ¼ (ì´ë¯¸ì§€ê°€ 2ê°œ ì´ìƒì¼ ë•Œë§Œ)
        if (facilityImages.length > 1) {
            const indicator = document.createElement('button');
            indicator.type = 'button';
            indicator.setAttribute('data-bs-target', '#modalCarousel');
            indicator.setAttribute('data-bs-slide-to', index);
            indicator.className = index === currentModalIndex ? 'active' : '';
            indicator.setAttribute('aria-label', `ì´ë¯¸ì§€ ${index + 1}`);
            indicators.appendChild(indicator);
        }
    });
    
    // ìºëŸ¬ì…€ ìš”ì†Œ í‘œì‹œ/ìˆ¨ê¹€ ì²˜ë¦¬
    const prevBtn = document.querySelector('#modalCarousel .carousel-control-prev');
    const nextBtn = document.querySelector('#modalCarousel .carousel-control-next');
    
    if (facilityImages.length <= 1) {
        if (prevBtn) prevBtn.style.display = 'none';
        if (nextBtn) nextBtn.style.display = 'none';
        indicators.style.display = 'none';
    } else {
        if (prevBtn) prevBtn.style.display = 'block';
        if (nextBtn) nextBtn.style.display = 'block';
        indicators.style.display = 'block';
    }
    
    // ìºëŸ¬ì…€ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
    const carouselElement = document.getElementById('modalCarousel');
    modalCarousel = new bootstrap.Carousel(carouselElement, {
        interval: false, // ìë™ ìŠ¬ë¼ì´ë“œëŠ” ë³„ë„ë¡œ ê´€ë¦¬
        ride: false,
        wrap: true
    });
    
    // ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
    carouselElement.removeEventListener('slide.bs.carousel', handleCarouselSlide);
    carouselElement.removeEventListener('slid.bs.carousel', handleCarouselSlid);
    
    // ìŠ¬ë¼ì´ë“œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    carouselElement.addEventListener('slide.bs.carousel', handleCarouselSlide);
    carouselElement.addEventListener('slid.bs.carousel', handleCarouselSlid);
    
    updateModalImageInfo();
    console.log('âœ… ëª¨ë‹¬ ìºëŸ¬ì…€ ì„¤ì • ì™„ë£Œ');
}

// ìºëŸ¬ì…€ ìŠ¬ë¼ì´ë“œ ì‹œì‘ ì´ë²¤íŠ¸
function handleCarouselSlide(event) {
    console.log('ğŸ”„ ìºëŸ¬ì…€ ìŠ¬ë¼ì´ë“œ ì‹œì‘:', event.from, 'â†’', event.to);
    currentModalIndex = event.to;
}

// ìºëŸ¬ì…€ ìŠ¬ë¼ì´ë“œ ì™„ë£Œ ì´ë²¤íŠ¸
function handleCarouselSlid(event) {
    console.log('âœ… ìºëŸ¬ì…€ ìŠ¬ë¼ì´ë“œ ì™„ë£Œ:', event.to);
    currentModalIndex = event.to;
    updateModalImageInfo();
}

// ëª¨ë‹¬ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸
function updateModalImageInfo() {
    const counter = document.getElementById('modalImageCounter');
    const altText = document.getElementById('modalImageAlt');
    
    if (facilityImages.length > 0) {
        counter.textContent = `${currentModalIndex + 1} / ${facilityImages.length}`;
        altText.textContent = facilityImages[currentModalIndex].alt || 'ì‹œì„¤ ì´ë¯¸ì§€';
    }
}

// ìë™ ìŠ¬ë¼ì´ë“œ ì‹œì‘
function startAutoSlide() {
    if (facilityImages.length <= 1) return;
    
    isAutoSliding = true;
    updateAutoSlideButton();
    
    autoSlideInterval = setInterval(() => {
        if (modalCarousel) {
            modalCarousel.next();
        }
    }, 5000);
}

// ìë™ ìŠ¬ë¼ì´ë“œ ì •ì§€
function stopAutoSlide() {
    isAutoSliding = false;
    updateAutoSlideButton();
    
    if (autoSlideInterval) {
        clearInterval(autoSlideInterval);
        autoSlideInterval = null;
    }
}

// ìë™ ìŠ¬ë¼ì´ë“œ í† ê¸€
function toggleAutoSlide() {
    if (isAutoSliding) {
        stopAutoSlide();
    } else {
        startAutoSlide();
    }
}

// ìë™ ìŠ¬ë¼ì´ë“œ ë²„íŠ¼ ì—…ë°ì´íŠ¸
function updateAutoSlideButton() {
    const icon = document.getElementById('autoSlideIcon');
    const text = document.getElementById('autoSlideText');
    
    if (isAutoSliding) {
        icon.className = 'fas fa-pause';
        text.textContent = 'ì¼ì‹œì •ì§€';
    } else {
        icon.className = 'fas fa-play';
        text.textContent = 'ìë™ì¬ìƒ';
    }
}

// ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
function downloadImage() {
    if (facilityImages.length === 0) return;
    
    const currentImage = facilityImages[currentModalIndex];
    const link = document.createElement('a');
    link.href = currentImage.path;
    link.download = `ì‹œì„¤ì´ë¯¸ì§€_${currentModalIndex + 1}.jpg`;
    link.click();
}

// í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (ëª¨ë‹¬ì´ ì—´ë ¤ìˆì„ ë•Œ)
document.addEventListener('keydown', function(e) {
    const modal = document.getElementById('imageModal');
    if (!modal.classList.contains('show')) return;
    
    switch(e.key) {
        case 'ArrowLeft':
            e.preventDefault();
            if (modalCarousel) modalCarousel.prev();
            break;
        case 'ArrowRight':
            e.preventDefault();
            if (modalCarousel) modalCarousel.next();
            break;
        case ' ': // ìŠ¤í˜ì´ìŠ¤ë°”
            e.preventDefault();
            toggleAutoSlide();
            break;
        case 'Escape':
            e.preventDefault();
            bootstrap.Modal.getInstance(modal)?.hide();
            break;
    }
});
</script>

<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
<script>
    // ìƒˆë¡œìš´ App Keyë¡œ ì¹´ì¹´ì˜¤í†¡ SDK ì´ˆê¸°í™”
    Kakao.init('YOUR_KAKAO_APP_KEY');
</script>
</body>
</html>
````

## File: backup/facility-image-implementation/facility-image-implementation/detail.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ì‹œì„¤ ìƒì„¸ë³´ê¸°</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<div class="container mt-4">
    <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
            <li class="breadcrumb-item"><a href="/facility/search">ì‹œì„¤ ì°¾ê¸°</a></li>
            <li class="breadcrumb-item active" aria-current="page">ì‹œì„¤ ìƒì„¸</li>
        </ol>
    </nav>
    <!-- 4:6 ë¹„ìœ¨ë¡œ ë°°ì¹˜ -->
    <div class="row">
        <!-- ì™¼ìª½ 40%: ì‹œì„¤ ê¸°ë³¸ì •ë³´ + ì‹œì„¤ì •ë³´, ì‹œì„¤í˜„í™©, ì—°ë½ì²˜ì •ë³´, ê´€ë ¨ì„œë¹„ìŠ¤ -->
        <div class="col-md-5">
            <!-- ì‹œì„¤ ê¸°ë³¸ì •ë³´ -->
            <div class="card mb-3 shadow-sm" style="min-height: 500px;">
                <div class="card-header bg-light">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-building text-primary me-2"></i>
                        <h5 class="mb-0">ì‹œì„¤ ê¸°ë³¸ì •ë³´</h5>
                    </div>
                </div>
                <div class="card-body d-flex flex-column">
                    <!-- ì„¸ë¡œ ë°°ì¹˜: ì´ë¯¸ì§€ â†’ ë‚´ìš© â†’ ë²„íŠ¼ -->
                    
                    <!-- 1. ì‹œì„¤ ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë” -->
                    <div class="position-relative mb-4 flex-grow-1">
                        <div id="facilityImageCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
                            <div class="carousel-inner rounded shadow-sm" style="height: 250px;">
                                <!-- ë‹¤ì¤‘ ì´ë¯¸ì§€ê°€ ìˆëŠ” ê²½ìš° -->
                                <div th:if="${facilityImages != null and #lists.size(facilityImages) > 0}">
                                    <div th:each="image, iterStat : ${facilityImages}" 
                                         th:class="${'carousel-item' + (iterStat.index == 0 ? ' active' : '')}">
                                        <img th:src="${image.imagePath}"
                                             class="d-block w-100 facility-carousel-img"
                                             style="height: 250px; object-fit: cover; cursor: pointer;"
                                             th:alt="${image.imageAltText}"
                                             th:onclick="'openImageModal(' + ${iterStat.index} + ')'"
                                             th:data-index="${iterStat.index}"
                                             loading="lazy">
                                        <!-- ì´ë¯¸ì§€ ìˆœì„œ í‘œì‹œ -->
                                        <div class="carousel-caption d-none d-md-block" 
                                             style="background: rgba(0,0,0,0.5); border-radius: 5px; right: 10px; left: auto; bottom: 10px; width: auto; padding: 5px 10px;">
                                            <small th:text="${iterStat.index + 1} + '/' + ${#lists.size(facilityImages)}">1/5</small>
                                        </div>
                                    </div>
                                </div>
                                <!-- ì´ë¯¸ì§€ê°€ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì´ë¯¸ì§€ -->
                                <div th:unless="${facilityImages != null and #lists.size(facilityImages) > 0}" 
                                     class="carousel-item active">
                                    <div class="d-flex align-items-center justify-content-center bg-light" style="height: 250px;">
                                        <div class="text-center text-muted">
                                            <i class="fas fa-image fa-3x mb-2" style="opacity: 0.3;"></i>
                                            <p class="mb-0 small">ë“±ë¡ëœ ì‹œì„¤ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ì´ë¯¸ì§€ê°€ 2ê°œ ì´ìƒì¼ ë•Œë§Œ í™”ì‚´í‘œ í‘œì‹œ -->
                            <div th:if="${facilityImages != null and #lists.size(facilityImages) > 1}">
                                <button class="carousel-control-prev" type="button" 
                                        data-bs-target="#facilityImageCarousel" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" 
                                          style="background-color: rgba(0,0,0,0.5); border-radius: 50%; width: 30px; height: 30px;"></span>
                                    <span class="visually-hidden">ì´ì „</span>
                                </button>
                                <button class="carousel-control-next" type="button" 
                                        data-bs-target="#facilityImageCarousel" data-bs-slide="next">
                                    <span class="carousel-control-next-icon"
                                          style="background-color: rgba(0,0,0,0.5); border-radius: 50%; width: 30px; height: 30px;"></span>
                                    <span class="visually-hidden">ë‹¤ìŒ</span>
                                </button>
                            </div>
                            
                            <!-- ì´ë¯¸ì§€ ì¸ë””ì¼€ì´í„° (ì ) -->
                            <div th:if="${facilityImages != null and #lists.size(facilityImages) > 1}" 
                                 class="carousel-indicators" style="bottom: -30px;">
                                <button th:each="image, iterStat : ${facilityImages}" 
                                        type="button" 
                                        data-bs-target="#facilityImageCarousel" 
                                        th:data-bs-slide-to="${iterStat.index}"
                                        th:class="${iterStat.index == 0 ? 'active' : ''}"
                                        style="width: 8px; height: 8px; border-radius: 50%; background-color: #007bff;"></button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 2. ì‹œì„¤ëª…, ë“±ê¸‰, ë³„ì  -->
                    <div class="text-center mb-4">
                        <h4 class="mb-3" th:text="${facility.facilityName}">ì‹œì„¤ëª…</h4>
                        <div class="d-flex flex-wrap gap-2 justify-content-center mb-3">
                            <span th:if="${facility.gradeRating != null and facility.gradeRating > 0}" 
                                  class="badge grade-badge" 
                                  th:data-grade="${facility.gradeRating}"
                                  th:text="${facility.gradeRating} + 'ë“±ê¸‰'">1ë“±ê¸‰</span>
                            
                            <!-- í‰ì  í‘œì‹œ -->
                            <div class="d-flex align-items-center">
                                <div class="rating me-2">
                                    <span th:each="i : ${#numbers.sequence(1, 5)}" 
                                          class="fas fa-star" 
                                          th:classappend="${i <= (facility.averageRating ?: 0)} ? 'text-warning' : 'text-muted'"></span>
                                </div>
                                <span class="badge bg-warning text-dark" 
                                      th:text="${facility.averageRating != null ? #numbers.formatDecimal(facility.averageRating, 1, 1) : '0.0'} + '/5.0'">4.5/5.0</span>
                                <span class="text-muted small ms-2" 
                                      th:text="'(' + ${facility.reviewCount ?: 0} + 'ê°œ ë¦¬ë·°)'">( 0ê°œ ë¦¬ë·°)</span>
                            </div>
                        </div>
                        
                        <!-- 3. ì—°ë½ ë° ê³µìœ  ë²„íŠ¼ ê·¸ë£¹ -->
                        <div class="row g-2">
                            <div class="col-6">
                                <button class="btn btn-success w-100 btn-sm" 
                                        th:onclick="'callFacilityPhone(this)'" 
                                        th:data-phone="${facility.phone}">
                                    <i class="fas fa-phone"></i><br><small>ì „í™”í•˜ê¸°</small>
                                </button>
                            </div>
                            <div class="col-6">
                                <button class="btn btn-primary w-100 btn-sm" onclick="writeReview()">
                                    <i class="fas fa-edit"></i><br><small>ë¦¬ë·°ì‘ì„±</small>
                                </button>
                            </div>
                            <div class="col-6">
                                <button class="btn btn-outline-secondary w-100 btn-sm" onclick="shareToKakao()">
                                    <i class="fas fa-share"></i><br><small>ê³µìœ </small>
                                </button>
                            </div>
                            <div class="col-6">
                                <button class="btn btn-outline-primary w-100 btn-sm" onclick="searchNearbyJobs()">
                                    <i class="fas fa-briefcase"></i><br><small>ì£¼ë³€ì±„ìš©</small>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ì‹œì„¤ì •ë³´ -->
            <div class="card mb-3 shadow-sm">
                <div class="card-header bg-light">
                    <h6 class="mb-0"><i class="fas fa-info-circle text-primary me-2"></i>ì‹œì„¤ì •ë³´</h6>
                </div>
                <div class="card-body">
                    <div class="row small">
                        <div class="col-12">
                            <div class="info-item mb-2">
                                <i class="fas fa-map-marker-alt text-danger me-2"></i>
                                <span th:text="${facility.address}">ì£¼ì†Œ</span>
                            </div>
                            <div class="info-item mb-2">
                                <i class="fas fa-phone text-success me-2"></i>
                                <span th:text="${facility.phone}">ì „í™”ë²ˆí˜¸</span>
                            </div>
                            <div class="info-item mb-2">
                                <i class="fas fa-user-tie text-primary me-2"></i>
                                ì›ì¥: <span th:text="${facility.registeredMemberName}">ì›ì¥ëª…</span>
                            </div>
                            <div class="info-item mb-2">
                                <i class="fas fa-bed text-warning me-2"></i>
                                ì •ì›: <span th:text="${facility.capacity}">ì •ì›</span>ëª…
                                <span th:if="${facility.currentOccupancy != null}" class="text-muted">
                                    (í˜„ì¬: <span th:text="${facility.currentOccupancy}">0</span>ëª…)
                                </span>
                            </div>
                            <div class="info-item mb-2" th:if="${facility.homepage}">
                                <i class="fas fa-globe text-info me-2"></i>
                                <a th:href="${facility.homepage}" target="_blank" class="text-decoration-none">í™ˆí˜ì´ì§€</a>
                            </div>
                        </div>
                    </div>
                    <div th:if="${facility.description}" class="mt-3 pt-2 border-top">
                        <p class="small mb-0" style="line-height: 1.4;" th:text="${facility.description}">ì‹œì„¤ ì†Œê°œ</p>
                    </div>
                    <div th:if="${facility.features}" class="mt-2">
                        <div class="d-flex flex-wrap gap-1">
                            <span th:each="feature : ${#strings.listSplit(facility.features, ',')}" 
                                  class="badge bg-light text-dark border" 
                                  th:text="${#strings.trim(feature)}">íŠ¹ì§•</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì‹œì„¤í˜„í™© -->
            <div class="card mb-3 shadow-sm">
                <div class="card-header bg-light">
                    <h6 class="mb-0"><i class="fas fa-chart-bar text-primary me-2"></i>ì‹œì„¤í˜„í™©</h6>
                </div>
                <div class="card-body">
                    <div class="row text-center g-2">
                        <div class="col-6">
                            <div class="p-2 bg-light rounded">
                                <h5 th:if="${facility.gradeRating != null and facility.gradeRating > 0}"
                                    th:text="${facility.gradeRating} + 'ë“±ê¸‰'"
                                    class="grade-rating mb-1"
                                    th:data-grade="${facility.gradeRating}">1ë“±ê¸‰</h5>
                                <h5 th:unless="${facility.gradeRating != null and facility.gradeRating > 0}" class="text-muted mb-1">-</h5>
                                <small class="text-muted">ì‹œì„¤ë“±ê¸‰</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-2 bg-light rounded">
                                <h5 class="mb-1" th:text="${facility.capacity ?: '-'}">-</h5>
                                <small class="text-muted">ì •ì›</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-2 bg-light rounded">
                                <h5 class="mb-1" th:text="${facility.currentOccupancy ?: '0'}">0</h5>
                                <small class="text-muted">í˜„ì¬ì…ì†Œ</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-2 bg-light rounded">
                                <h5 th:if="${facility.averageRating != null and facility.averageRating > 0}"
                                    th:text="${#numbers.formatDecimal(facility.averageRating, 1, 1)}"
                                    class="text-warning mb-1">4.5</h5>
                                <h5 th:unless="${facility.averageRating != null and facility.averageRating > 0}" class="text-muted mb-1">0.0</h5>
                                <small class="text-muted">í‰ê· í‰ì </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>

        <!-- ì˜¤ë¥¸ìª½ 60%: ì§€ë„ì™€ ë¦¬ë·° -->
        <div class="col-md-7">
            <!-- ìœ„ì¹˜ ë° êµí†µì •ë³´ -->
            <div class="card mb-3 shadow-sm">
                <div class="card-header bg-light">
                    <h5 class="mb-0"><i class="fas fa-map-marker-alt text-danger me-2"></i>ìœ„ì¹˜ ë° êµí†µì •ë³´</h5>
                </div>
                <div class="card-body p-0">
                    <div id="facilityMap" style="width:100%; height:400px;">
                        <div class="d-flex align-items-center justify-content-center h-100 text-muted">
                            <div class="text-center">
                                <i class="fas fa-map fa-3x mb-3 text-primary"></i>
                                <p class="fs-6">ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                            </div>
                        </div>
                    </div>
                    <div class="p-3 bg-light border-top">
                        <div class="d-flex align-items-center mb-1">
                            <i class="fas fa-map-marker-alt text-danger me-2"></i>
                            <strong th:text="${facility.address}">ì£¼ì†Œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</strong>
                        </div>
                        <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            ì§€ë„ë¥¼ í´ë¦­í•˜ê±°ë‚˜ í™•ëŒ€/ì¶•ì†Œí•˜ì—¬ ë” ìì„¸í•œ ìœ„ì¹˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
                        </small>
                    </div>
                </div>
            </div>

            <!-- ì‹œì„¤ë¦¬ë·° -->
            <div class="card shadow-sm">
                <div class="card-header bg-light d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">
                        <i class="fas fa-comments text-primary me-2"></i>ì‹œì„¤ë¦¬ë·° 
                        <span class="badge bg-primary ms-2" th:text="${reviewCount}">0</span>
                    </h5>
                    <button class="btn btn-sm btn-primary" onclick="writeReview()">
                        <i class="fas fa-plus me-1"></i>ë¦¬ë·° ì‘ì„±
                    </button>
                </div>
                <div class="card-body">
                    <div id="reviewList">
                        <!-- ë¦¬ë·°ê°€ ìˆëŠ” ê²½ìš° -->
                        <div th:if="${not #lists.isEmpty(recentReviews)}">
                            <div th:each="review : ${recentReviews}" class="review-item border-bottom pb-3 mb-3">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1" th:text="${review.title}">ë¦¬ë·° ì œëª©</h6>
                                        <div class="mb-2">
                                            <span class="text-warning">
                                                <i th:each="i : ${#numbers.sequence(1, 5)}" 
                                                   th:class="${i <= review.rating} ? 'fas fa-star' : 'far fa-star'"></i>
                                            </span>
                                            <span class="ms-2 fw-bold" th:text="${review.rating} + '.0'">5.0</span>
                                        </div>
                                        <p class="text-muted small mb-2" th:text="${#strings.abbreviate(review.content, 100)}">ë¦¬ë·° ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°</p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <small class="text-muted">
                                                <i class="fas fa-user me-1"></i>
                                                <span th:text="${review.memberName}">ì‘ì„±ì</span>
                                                <span class="mx-2">|</span>
                                                <i class="fas fa-calendar me-1"></i>
                                                <span th:text="${#temporals.format(review.createdAt, 'yyyy-MM-dd')}">ì‘ì„±ì¼</span>
                                            </small>
                                            <a th:href="@{/review/detail/{id}(id=${review.reviewId})}" class="btn btn-sm btn-outline-secondary">
                                                <i class="fas fa-eye me-1"></i>ìƒì„¸ë³´ê¸°
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <a th:href="@{/review(facilityId=${facility.facilityId})}" class="btn btn-outline-primary me-2">
                                    <i class="fas fa-list me-1"></i>ì „ì²´ ë¦¬ë·° ë³´ê¸°
                                </a>
                                <!-- ì‹œì„¤ ì†Œìœ ìë§Œ ê´€ë¦¬ ë²„íŠ¼ í‘œì‹œ -->
                                <a th:if="${session.loginMember != null and session.loginMember.memberId == facility.registeredMemberId}" 
                                   th:href="@{/facility/manage}" class="btn btn-success">
                                    <i class="fas fa-cogs me-1"></i>ì‹œì„¤ ê´€ë¦¬
                                </a>
                            </div>
                        </div>
                        
                        <!-- ë¦¬ë·°ê°€ ì—†ëŠ” ê²½ìš° -->
                        <div th:if="${#lists.isEmpty(recentReviews)}" class="text-center text-muted py-4">
                            <i class="fas fa-comments fa-2x mb-2"></i>
                            <p>ì•„ì§ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                            <p class="small">ì²« ë²ˆì§¸ ë¦¬ë·°ë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”!</p>
                            <!-- ì‹œì„¤ ì†Œìœ ìë§Œ ê´€ë¦¬ ë²„íŠ¼ í‘œì‹œ -->
                            <div th:if="${session.loginMember != null and session.loginMember.memberId == facility.registeredMemberId}" class="mt-3">
                                <a th:href="@{/facility/manage}" class="btn btn-success">
                                    <i class="fas fa-cogs me-1"></i>ì‹œì„¤ ê´€ë¦¬
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{layout/footer :: footer}"></div>
<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ì¹´ì¹´ì˜¤ë§µ API -->
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=YOUR_KAKAO_APP_KEY&libraries=services,clusterer,drawing"></script>

<!-- ì‹œì„¤ ìƒì„¸ë³´ê¸° ì „ìš© JavaScript -->
<script src="/js/facility-detail.js"></script>
<script src="/js/facility-detail-map.js"></script>

<!-- Thymeleaf ë°ì´í„° ì „ë‹¬ ìŠ¤í¬ë¦½íŠ¸ -->
<script th:inline="javascript">
    /*<![CDATA[*/
    
    // ì‹œì„¤ ë°ì´í„° ì´ˆê¸°í™”
    const facilityDataFromServer = {
        facilityId: /*[[${facility.facilityId}]]*/ 0,
        name: /*[[${facility.facilityName}]]*/ '',
        latitude: /*[[${facility.latitude}]]*/ 0,
        longitude: /*[[${facility.longitude}]]*/ 0,
        address: /*[[${facility.address}]]*/ '',
        phone: /*[[${facility.phone}]]*/ '',
        facilityImage: /*[[${facility.facilityImage}]]*/ ''
    };
    
    // ì‹œì„¤ ì´ë¯¸ì§€ ë°ì´í„° ì´ˆê¸°í™”
    const facilityImagesFromServer = [
        /*[# th:each="image, imageStat : ${facilityImages}"]*/
        {
            path: '[[${image.imagePath}]]',
            alt: '[[${image.imageAltText != null ? image.imageAltText : "ì‹œì„¤ ì´ë¯¸ì§€"}]]'
        }/*[# th:unless="${imageStat.last}"],*//*[/]*/
        /*[/]*/
    ];

    // DOM ë¡œë“œ í›„ ë°ì´í„° ì´ˆê¸°í™”
    $(document).ready(function() {
        console.log('ğŸ¢ ì‹œì„¤ ìƒì„¸ë³´ê¸° í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘');
        
        // ë°ì´í„° ì´ˆê¸°í™”
        initializeFacilityData(facilityDataFromServer);
        initializeFacilityImages(facilityImagesFromServer);
        initializeFacilityMapData(facilityDataFromServer);
        
        // ì§€ë„ ì´ˆê¸°í™”
        setTimeout(function() {
            initializeFacilityDetailMap();
        }, 500);
        
        console.log('âœ… ì‹œì„¤ ìƒì„¸ë³´ê¸° í˜ì´ì§€ ì´ˆê¸°í™” ì™„ë£Œ');
    });
    
    /*]]>*/
</script>

<!-- ì´ë¯¸ì§€ í™•ëŒ€ ëª¨ë‹¬ -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content bg-dark">
            <div class="modal-header border-0">
                <h5 class="modal-title text-white" id="imageModalLabel">ì‹œì„¤ ì´ë¯¸ì§€</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
            </div>
            <div class="modal-body p-0 position-relative">
                <div id="modalCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
                    <div class="carousel-inner" id="modalCarouselInner">
                        <!-- ì´ë¯¸ì§€ë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë¨ -->
                    </div>
                    
                    <!-- ëª¨ë‹¬ ë‚´ ì»¨íŠ¸ë¡¤ -->
                    <button class="carousel-control-prev" type="button" data-bs-target="#modalCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" style="width: 40px; height: 40px;"></span>
                        <span class="visually-hidden">ì´ì „</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#modalCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" style="width: 40px; height: 40px;"></span>
                        <span class="visually-hidden">ë‹¤ìŒ</span>
                    </button>
                    
                    <!-- ëª¨ë‹¬ ë‚´ ì¸ë””ì¼€ì´í„° -->
                    <div class="carousel-indicators" id="modalCarouselIndicators">
                        <!-- JavaScriptë¡œ ë™ì  ìƒì„±ë¨ -->
                    </div>
                </div>
                
                <!-- ì´ë¯¸ì§€ ì •ë³´ í‘œì‹œ -->
                <div class="position-absolute bottom-0 start-0 end-0 bg-dark bg-opacity-75 text-white p-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <span id="modalImageCounter">1 / 5</span>
                            <span class="ms-3" id="modalImageAlt">ì‹œì„¤ ì´ë¯¸ì§€</span>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-outline-light me-2" onclick="toggleAutoSlide()">
                                <i class="fas fa-play" id="autoSlideIcon"></i>
                                <span id="autoSlideText">ìë™ì¬ìƒ</span>
                            </button>
                            <button class="btn btn-sm btn-outline-light" onclick="downloadImage()">
                                <i class="fas fa-download"></i> ë‹¤ìš´ë¡œë“œ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
<script>
    // ìƒˆë¡œìš´ App Keyë¡œ ì¹´ì¹´ì˜¤í†¡ SDK ì´ˆê¸°í™”
    Kakao.init('YOUR_KAKAO_APP_KEY');
</script>
</body>
</html>
````

## File: backup/facility-image-implementation/facility-image-implementation/edit.html
````html
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/header :: header}">
    <title>ì‹œì„¤ ì •ë³´ ìˆ˜ì • - ë¼ì´íŠ¸ì¼€ì–´</title>
</head>

<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="container my-4">
    <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
            <li class="breadcrumb-item"><a href="/facility/search">ì‹œì„¤ ì°¾ê¸°</a></li>
            <li class="breadcrumb-item"><a href="/facility/manage">ë‚´ ì‹œì„¤ ê´€ë¦¬</a></li>
            <li class="breadcrumb-item active" aria-current="page">ì‹œì„¤ ì •ë³´ ìˆ˜ì •</li>
        </ol>
    </nav>
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-edit me-2"></i>ì‹œì„¤ ì •ë³´ ìˆ˜ì •
                    </h3>
                </div>
                <div class="card-body">
                    <form id="facilityEditForm" th:action="@{/facility/edit/{id}(id=${facility.facilityId})}" 
                          method="post" enctype="multipart/form-data" th:object="${facility}">
                        
                        <!-- ì‹œì„¤ëª… -->
                        <div class="mb-3">
                            <label for="facilityName" class="form-label">
                                <i class="fas fa-building me-1"></i>ì‹œì„¤ëª… <span class="text-danger">*</span>
                            </label>
                            <input type="text" class="form-control" id="facilityName" th:field="*{facilityName}"
                                   placeholder="ì‹œì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                        </div>

                        <!-- ì‹œì„¤ ìœ í˜• -->
                        <div class="mb-3">
                            <label for="facilityType" class="form-label">
                                <i class="fas fa-tag me-1"></i>ì‹œì„¤ ìœ í˜• <span class="text-danger">*</span>
                            </label>
                            <select class="form-select" id="facilityType" th:field="*{facilityType}" required>
                                <option value="">ì‹œì„¤ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="NURSING_HOME">ìš”ì–‘ì›</option>
                                <option value="HOSPITAL">ìš”ì–‘ë³‘ì›</option>
                                <option value="DAY_CARE">ë°ì´ì¼€ì–´ì„¼í„°</option>
                            </select>
                        </div>

                        <!-- ì£¼ì†Œ -->
                        <div class="mb-3">
                            <label for="facilityAddress" class="form-label">
                                <i class="fas fa-map-marker-alt me-1"></i>ì£¼ì†Œ <span class="text-danger">*</span>
                            </label>
                            <div class="input-group mb-2">
                                <input type="text" class="form-control" id="facilityAddress" th:field="*{address}"
                                       placeholder="ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”" readonly required>
                                <button type="button" class="btn btn-outline-primary" onclick="searchFacilityAddress()">
                                    <i class="fas fa-search me-1"></i>ì£¼ì†Œ ê²€ìƒ‰
                                </button>
                            </div>
                            <input type="text" class="form-control" id="detailAddress" th:field="*{detailAddress}"
                                   placeholder="ìƒì„¸ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 101í˜¸, 2ì¸µ)">
                            <!-- ìœ„ë„/ê²½ë„ íˆë“  í•„ë“œ -->
                            <input type="hidden" id="latitude" th:field="*{latitude}">
                            <input type="hidden" id="longitude" th:field="*{longitude}">
                        </div>
                        
                        <!-- ìœ„ì¹˜ ë¯¸ë¦¬ë³´ê¸° ì§€ë„ -->
                        <div class="mb-3" id="mapPreviewContainer" style="display: none;">
                            <label class="form-label">
                                <i class="fas fa-map me-1"></i>ìœ„ì¹˜ ë¯¸ë¦¬ë³´ê¸°
                            </label>
                            <div id="previewMap" style="width:100%; height:200px; border-radius: 8px; border: 1px solid #dee2e6;"></div>
                            <small class="form-text text-muted">ì„ íƒëœ ì£¼ì†Œì˜ ìœ„ì¹˜ê°€ ì§€ë„ì— í‘œì‹œë©ë‹ˆë‹¤.</small>
                        </div>

                        <!-- ì‹œì„¤ ì „í™”ë²ˆí˜¸ -->
                        <div class="mb-3">
                            <label for="phone" class="form-label">
                                <i class="fas fa-phone me-1"></i>ì‹œì„¤ ì „í™”ë²ˆí˜¸ <span class="text-danger">*</span>
                            </label>
                            <input type="tel" class="form-control" id="phone" th:field="*{phone}"
                                   placeholder="ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì§€ì—­ë²ˆí˜¸ì— ë§ê²Œ ìë™ í¬ë§·íŒ…)" required>
                            <small class="form-text text-muted">
                                <strong>ì§€ì—­ë²ˆí˜¸ ì˜ˆì‹œ:</strong> 
                                ì„œìš¸(02), ë¶€ì‚°(051), ëŒ€êµ¬(053), ì¸ì²œ(032), ê´‘ì£¼(062), ëŒ€ì „(042), ìš¸ì‚°(052) ë“±<br>
                                <strong>í˜•ì‹:</strong> 042ëŠ” 3-3-4, 02ëŠ” 2-3-4 ë˜ëŠ” 2-4-4 í˜•ì‹ìœ¼ë¡œ ìë™ ì ìš©ë©ë‹ˆë‹¤
                            </small>
                        </div>

                        <!-- í˜„ì¬ ì‹œì„¤ ì´ë¯¸ì§€ (ìˆëŠ” ê²½ìš°) -->
                        <div class="mb-3" th:if="${facility.facilityImage}">
                            <label class="form-label">
                                <i class="fas fa-image me-1"></i>í˜„ì¬ ì‹œì„¤ ì‚¬ì§„
                            </label>
                            <div class="current-image-container mb-3" style="position: relative; display: inline-block;">
                                <img th:src="@{${facility.facilityImage}}" alt="í˜„ì¬ ì‹œì„¤ ì‚¬ì§„" 
                                     style="max-width: 300px; max-height: 200px; border-radius: 12px; border: 2px solid #dee2e6; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                <div class="current-image-overlay" style="position: absolute; top: 8px; right: 8px;">
                                    <span class="badge bg-primary">í˜„ì¬ ì´ë¯¸ì§€</span>
                                </div>
                            </div>
                        </div>

                        <!-- ì‹œì„¤ ì´ë¯¸ì§€ ê´€ë¦¬ -->
                        <div class="mb-4">
                            <label class="form-label">
                                <i class="fas fa-images me-1"></i>ì‹œì„¤ ì‚¬ì§„ ê´€ë¦¬
                                <span th:if="${facility.facilityImage == null}" class="text-danger">*</span>
                            </label>
                            
                            <div class="image-management-section">
                                <!-- ê³ ê¸‰ ì´ë¯¸ì§€ í¬ë¡­ ì‹œìŠ¤í…œ ë§í¬ -->
                                <div class="card border-primary mb-3">
                                    <div class="card-body text-center">
                                        <i class="fas fa-crop-alt fa-2x text-primary mb-2"></i>
                                        <h6 class="card-title">ê³ ê¸‰ ì´ë¯¸ì§€ ê´€ë¦¬ ì‹œìŠ¤í…œ</h6>
                                        <p class="card-text text-muted small mb-3">
                                            16:9 ë¹„ìœ¨ë¡œ ìµœì í™”ëœ ì‹œì„¤ ì‚¬ì§„ì„ ìµœëŒ€ 5ì¥ê¹Œì§€ ë“±ë¡í•˜ê³  <br>
                                            AVIF/WebP ì••ì¶•ìœ¼ë¡œ ë¹ ë¥¸ ë¡œë”© ì†ë„ë¥¼ êµ¬í˜„í•˜ì„¸ìš”
                                        </p>
                                        <a th:href="@{/facility/crop-images/{id}(id=${facility.facilityId})}" 
                                           class="btn btn-primary">
                                            <i class="fas fa-images me-2"></i>ì‹œì„¤ ì´ë¯¸ì§€ ê´€ë¦¬
                                        </a>
                                    </div>
                                </div>
                                
                                <!-- ê¸°ì¡´ ê°„ë‹¨ ì—…ë¡œë“œ (í˜¸í™˜ì„± ìœ ì§€) -->
                                <div class="simple-upload-section">
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="useSimpleUpload">
                                        <label class="form-check-label text-muted" for="useSimpleUpload">
                                            <small>ê°„ë‹¨ ì—…ë¡œë“œ ì‚¬ìš© (í¬ë¡­ ì—†ì´ ì—…ë¡œë“œ)</small>
                                        </label>
                                    </div>
                                    
                                    <div id="simpleUploadContainer" style="display: none;">
                                        <input type="file" class="form-control" id="facilityImageFile" 
                                               name="facilityImageFile" accept="image/*"
                                               th:required="${facility.facilityImage == null}">
                                        <small class="text-muted">
                                            <i class="fas fa-info-circle me-1"></i>
                                            JPG, PNG íŒŒì¼ë§Œ ì§€ì›. ê³ ê¸‰ ê¸°ëŠ¥ì„ ì›í•˜ì‹œë©´ ìœ„ì˜ ì´ë¯¸ì§€ ê´€ë¦¬ ì‹œìŠ¤í…œì„ ì´ìš©í•˜ì„¸ìš”.
                                        </small>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Alt í…ìŠ¤íŠ¸ ì…ë ¥ (SEOìš©) -->
                            <input type="hidden" id="facilityImageAltText" name="facilityImageAltText" 
                                   th:value="${facility.facilityImageAltText}">
                        </div>

                        <!-- ìˆ˜ìš© ì¸ì› -->
                        <div class="mb-3">
                            <label for="capacity" class="form-label">
                                <i class="fas fa-users me-1"></i>ìˆ˜ìš© ì¸ì›
                            </label>
                            <input type="number" class="form-control" id="capacity" th:field="*{capacity}"
                                   placeholder="ìˆ˜ìš© ê°€ëŠ¥ ì¸ì›ì„ ì…ë ¥í•˜ì„¸ìš”" min="1">
                        </div>

                        <!-- ìš´ì˜ ì‹œê°„ -->
                        <div class="mb-3">
                            <label for="operatingHours" class="form-label">
                                <i class="fas fa-clock me-1"></i>ìš´ì˜ ì‹œê°„
                            </label>
                            <div class="row g-2">
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="operatingType" id="operating24" 
                                               value="24ì‹œê°„" th:checked="${facility.operatingHours == '24ì‹œê°„'}">
                                        <label class="form-check-label fw-bold text-success" for="operating24">
                                            <i class="fas fa-clock me-1"></i>24ì‹œê°„ ìš´ì˜
                                        </label>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="operatingType" id="operatingCustom" 
                                               value="custom" th:checked="${facility.operatingHours != '24ì‹œê°„' && facility.operatingHours != null}">
                                        <label class="form-check-label" for="operatingCustom">
                                            <i class="fas fa-clock me-1"></i>ì‹œê°„ ì§ì ‘ ì„¤ì •
                                        </label>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="operatingType" id="operatingWeekly" value="weekly">
                                        <label class="form-check-label" for="operatingWeekly">
                                            <i class="fas fa-calendar-week me-1"></i>ìš”ì¼ë³„ ì‹œê°„ ì„¤ì •
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì • -->
                            <div id="simpleTimeContainer" class="mt-3" style="display: none;">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h6 class="card-title mb-3">ìš´ì˜ ì‹œê°„ ì„¤ì •</h6>
                                        <div class="row g-2">
                                            <div class="col-md-6">
                                                <label class="form-label small">ì‹œì‘ ì‹œê°„</label>
                                                <select class="form-select" id="startHour">
                                                    <option value="">ì‹œ</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label small">ì¢…ë£Œ ì‹œê°„</label>
                                                <select class="form-select" id="endHour">
                                                    <option value="">ì‹œ</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="mt-2">
                                            <small class="text-muted">
                                                <i class="fas fa-info-circle me-1"></i>
                                                ë§¤ì¼ ë™ì¼í•œ ì‹œê°„ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ìš”ì¼ë³„ ì‹œê°„ ì„¤ì • -->
                            <div id="weeklyTimeContainer" class="mt-3" style="display: none;">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h6 class="card-title mb-3">ìš”ì¼ë³„ ìš´ì˜ ì‹œê°„</h6>
                                        <div id="weeklySchedule">
                                            <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                                        </div>
                                        
                                        <div class="mt-3">
                                            <small class="text-muted">
                                                <i class="fas fa-info-circle me-1"></i>
                                                ìš´ì˜í•˜ì§€ ì•ŠëŠ” ìš”ì¼ì€ ì²´í¬ë¥¼ í•´ì œí•˜ì„¸ìš”
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ì§ì ‘ ì…ë ¥ -->
                            <div id="customTimeContainer" class="mt-3" style="display: none;">
                                <input type="text" class="form-control" id="customOperatingHours" 
                                       placeholder="ì˜ˆ: 09:00-18:00, í‰ì¼ 09:00-18:00 ì£¼ë§ 10:00-16:00"
                                       th:value="${facility.operatingHours != '24ì‹œê°„' ? facility.operatingHours : ''}">
                                <small class="form-text text-muted">
                                    ììœ  í˜•ì‹ìœ¼ë¡œ ìš´ì˜ ì‹œê°„ì„ ì…ë ¥í•˜ì„¸ìš”
                                </small>
                            </div>
                            
                            <input type="hidden" id="operatingHours" th:field="*{operatingHours}">
                        </div>

                        <!-- í™ˆí˜ì´ì§€ -->
                        <div class="mb-3">
                            <label for="homepage" class="form-label">
                                <i class="fas fa-globe me-1"></i>í™ˆí˜ì´ì§€ URL
                            </label>
                            <input type="url" class="form-control" id="homepage" th:field="*{homepage}"
                                   placeholder="https://www.example.com">
                        </div>

                        <!-- ì‹œì„¤ ì„¤ëª… -->
                        <div class="mb-3">
                            <label for="description" class="form-label">
                                <i class="fas fa-info-circle me-1"></i>ì‹œì„¤ ì„¤ëª…
                            </label>
                            <textarea class="form-control" id="description" th:field="*{description}" rows="4"
                                      placeholder="ì‹œì„¤ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"
                                      data-rich-editor='{"height": "250px", "enableImage": true, "enableTable": false, "enableLink": true}'></textarea>
                        </div>

                        <!-- ì‹œì„¤ íŠ¹ì§• -->
                        <div class="mb-3">
                            <label for="features" class="form-label">
                                <i class="fas fa-star me-1"></i>ì‹œì„¤ íŠ¹ì§•
                            </label>
                            <input type="text" class="form-control" id="features" th:field="*{features}"
                                   placeholder="ì‹œì„¤ì˜ ì£¼ìš” íŠ¹ì§•ì„ ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 24ì‹œê°„ ê°„ë³‘ì„œë¹„ìŠ¤, ë¬¼ë¦¬ì¹˜ë£Œì‹¤, ì¹´í˜)">
                            <small class="form-text text-muted">ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ì—¬ëŸ¬ íŠ¹ì§•ì„ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</small>
                        </div>

                        <!-- ë²„íŠ¼ -->
                        <div class="d-flex gap-2 justify-content-end">
                            <a th:href="@{/facility/manage}" class="btn btn-secondary">
                                <i class="fas fa-times me-2"></i>ì·¨ì†Œ
                            </a>
                            <button type="submit" class="btn btn-primary" id="submitButton">
                                <i class="fas fa-save me-2"></i>ìˆ˜ì • ì™„ë£Œ
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ API -->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<!-- ì¹´ì¹´ì˜¤ë§µ API (ì¢Œí‘œ ë³€í™˜ìš©) -->
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=YOUR_KAKAO_APP_KEY&libraries=services"></script>
<!-- ì¹´ì¹´ì˜¤ë§µ ìœ í‹¸ë¦¬í‹° -->
<script src="/js/kakaomap.js"></script>
<script src="/js/facility-edit.js"></script>

<!-- ì „í™”ë²ˆí˜¸ í¬ë§·í„° -->
<script src="/js/phone-formatter.js"></script>

<!-- ê³ ê¸‰ ì´ë¯¸ì§€ í¬ë¡­í¼ -->
<link rel="stylesheet" href="/css/advanced-image-cropper.css">
<script src="/js/advanced-image-cropper.js"></script>

<!-- ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° -->
<link rel="stylesheet" href="/css/rich-text-editor.css">
<script src="/js/rich-text-editor.js"></script>

<script>
$(document).ready(function() {
    console.log('Initializing operating hours...');
    
    // ì‹œê°„ ì˜µì…˜ ë™ì  ìƒì„±
    initializeTimeOptions();
    
    // ìš”ì¼ë³„ ìŠ¤ì¼€ì¤„ ë¯¸ë¦¬ ìƒì„±
    generateWeeklySchedule();
    
    // ì§ì ‘ ì…ë ¥ ë³€ê²½ ì´ë²¤íŠ¸
    $('#customOperatingHours').on('input', function() {
        updateOperatingHours();
    });
    
    // ì´ˆê¸° ìƒíƒœ ì„¤ì •
    initializeOperatingHours();
});

function initializeTimeOptions() {
    // ì‹œì‘ ì‹œê°„ ì˜µì…˜ ìƒì„±
    for (let i = 0; i <= 23; i++) {
        const hour = String(i).padStart(2, '0');
        $('#startHour').append(`<option value="${hour}">${hour}ì‹œ</option>`);
        $('#endHour').append(`<option value="${hour}">${hour}ì‹œ</option>`);
    }
}

function generateWeeklySchedule() {
    console.log('Generating weekly schedule...');
    const days = ['ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼', 'ì¼ìš”ì¼'];
    let html = '';
    
    days.forEach((day, index) => {
        html += `
            <div class="row g-2 mb-2">
                <div class="col-3">
                    <div class="form-check">
                        <input class="form-check-input day-check" type="checkbox" id="day${index}" checked>
                        <label class="form-check-label" for="day${index}">${day}</label>
                    </div>
                </div>
                <div class="col-9 time-controls">
                    <div class="d-flex align-items-center gap-2">
                        <select class="form-select form-select-sm day-start" id="start${index}" style="width: 80px;">
                            <option value="">ì‹œì‘</option>
                        </select>
                        <span>ì‹œ ~</span>
                        <select class="form-select form-select-sm day-end" id="end${index}" style="width: 80px;">
                            <option value="">ì¢…ë£Œ</option>
                        </select>
                        <span>ì‹œ</span>
                    </div>
                    <div class="rest-day-notice text-muted small mt-1" style="display: none;">
                        <i class="fas fa-moon me-1"></i>íœ´ë¬´ì¼
                    </div>
                </div>
            </div>
        `;
    });
    
    $('#weeklySchedule').html(html);
    
    // ì‹œê°„ ì˜µì…˜ ì¶”ê°€
    for (let i = 0; i <= 23; i++) {
        const hour = String(i).padStart(2, '0');
        days.forEach((day, index) => {
            $(`#start${index}`).append(`<option value="${hour}">${hour}</option>`);
            $(`#end${index}`).append(`<option value="${hour}">${hour}</option>`);
        });
    }
    
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    setTimeout(function() {
        $('.day-check').off('change').on('change', function() {
            const index = $(this).attr('id').replace('day', '');
            const timeControls = $(this).closest('.row').find('.time-controls');
            const restNotice = timeControls.find('.rest-day-notice');
            const selects = timeControls.find('select');
            
            if ($(this).is(':checked')) {
                selects.show();
                timeControls.find('span').show();
                restNotice.hide();
            } else {
                selects.hide();
                timeControls.find('span').hide();
                restNotice.show();
            }
            
            updateOperatingHours();
        });
        
        $('.day-start, .day-end').off('change').on('change', function() {
            updateOperatingHours();
        });
        
        // ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì • ì´ë²¤íŠ¸ë„ ì—¬ê¸°ì„œ ë“±ë¡
        $('#startHour, #endHour').off('change').on('change', function() {
            updateOperatingHours();
        });
    }, 100);
}

function initializeOperatingHours() {
    const currentHours = $('#operatingHours').val();
    
    if (currentHours === '24ì‹œê°„') {
        $('#operating24').prop('checked', true);
    } else if (currentHours && currentHours !== '') {
        $('#operatingCustom').prop('checked', true);
        $('#customTimeContainer').show();
        $('#customOperatingHours').val(currentHours);
    }
}

function updateOperatingHours() {
    const operatingType = $('input[name="operatingType"]:checked').val();
    let operatingHours = '';
    
    if (operatingType === '24ì‹œê°„') {
        operatingHours = '24ì‹œê°„';
    } else if (operatingType === 'simple') {
        const startHour = $('#startHour').val();
        const endHour = $('#endHour').val();
        
        if (startHour && endHour) {
            operatingHours = `${startHour}:00-${endHour}:00`;
        }
    } else if (operatingType === 'weekly') {
        const weeklyHours = [];
        const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
        
        $('.day-check').each(function(index) {
            if ($(this).is(':checked')) {
                const startHour = $(`#start${index}`).val();
                const endHour = $(`#end${index}`).val();
                
                if (startHour && endHour) {
                    weeklyHours.push(`${days[index]} ${startHour}:00-${endHour}:00`);
                }
            } else {
                weeklyHours.push(`${days[index]} íœ´ë¬´`);
            }
        });
        
        operatingHours = weeklyHours.join(', ');
    } else if (operatingType === 'custom') {
        operatingHours = $('#customOperatingHours').val();
    }
    
    $('#operatingHours').val(operatingHours);
}


// ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì • ë¼ë””ì˜¤ ë²„íŠ¼ ë™ì  ì¶”ê°€
$(document).ready(function() {
    const simpleOption = `
        <div class="col-12">
            <div class="form-check">
                <input class="form-check-input" type="radio" name="operatingType" id="operatingSimple" value="simple">
                <label class="form-check-label" for="operatingSimple">
                    <i class="fas fa-clock me-1"></i>ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì •
                </label>
            </div>
        </div>
    `;
    
    $('#operatingCustom').closest('.col-12').after(simpleOption);
    
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë‹¤ì‹œ ë“±ë¡
    setTimeout(function() {
        $('input[name="operatingType"]').off('change').on('change', function() {
            const value = $(this).val();
            console.log('Operating type changed:', value);
            
            // ëª¨ë“  ì»¨í…Œì´ë„ˆ ìˆ¨ê¸°ê¸°
            $('#simpleTimeContainer, #weeklyTimeContainer, #customTimeContainer').hide();
            
            if (value === 'custom') {
                $('#customTimeContainer').show();
            } else if (value === 'weekly') {
                $('#weeklyTimeContainer').show();
                generateWeeklySchedule();
            } else if (value === 'simple') {
                $('#simpleTimeContainer').show();
            }
            
            updateOperatingHours();
        });
    }, 100);
    
    // ê³ ê¸‰ ì´ë¯¸ì§€ í¬ë¡­í¼ ì´ˆê¸°í™”
    initializeFacilityImageCropper();
});

// ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­í¼ ì´ˆê¸°í™”
function initializeFacilityImageCropper() {
    try {
        // Cropper.js ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
        if (typeof Cropper === 'undefined') {
            console.warn('Cropper.jsë¥¼ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê¸°ì¡´ íŒŒì¼ ì…ë ¥ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.');
            return; // ê¸°ì¡´ íŒŒì¼ ì…ë ¥ í¼ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©
        }
        
        const facilityImageCropper = new AdvancedImageCropper('facilityImageUploader', {
        // ì‹œì„¤ ì´ë¯¸ì§€ ìµœì í™” ì„¤ì •
        aspectRatio: 16/10, // ì‹œì„¤ ì¹´ë“œ ë¹„ìœ¨
        cropWidth: 800,
        cropHeight: 500,
        previewStyle: 'facility',
        title: 'ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ',
        quality: 0.8,
        enableAltText: true,
        
        // í¬ë¡­ ì™„ë£Œ ì½œë°±
        onCropComplete: function(result) {
            console.log('ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ ì™„ë£Œ:', result);
            
            // ê¸°ì¡´ íŒŒì¼ ì…ë ¥ì— ì••ì¶•ëœ íŒŒì¼ ì„¤ì •
            const facilityImageFile = document.getElementById('facilityImageFile');
            const facilityImageAltText = document.getElementById('facilityImageAltText');
            
            // DataTransferë¥¼ ì‚¬ìš©í•˜ì—¬ File ê°ì²´ë¥¼ inputì— ì„¤ì •
            const dataTransfer = new DataTransfer();
            const compressedFile = new File([result.compressedBlob], 
                result.originalFile.name, {
                    type: 'image/jpeg',
                    lastModified: Date.now()
                });
            
            dataTransfer.items.add(compressedFile);
            facilityImageFile.files = dataTransfer.files;
            
            // Alt í…ìŠ¤íŠ¸ ì„¤ì •
            if (facilityImageAltText) {
                facilityImageAltText.value = result.altText;
            }
            
            // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
            showSuccessMessage('ì‹œì„¤ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ìµœì í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
        },
        
        // ì—ëŸ¬ ì½œë°±
        onError: function(message) {
            console.error('ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ ì˜¤ë¥˜:', message);
            showErrorMessage('ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + message);
        }
    });
    
    // ì „ì—­ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì €ì¥
    window.facilityImageCropper = facilityImageCropper;
    } catch (error) {
        console.error('ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­í¼ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
        console.warn('ê¸°ì¡´ íŒŒì¼ ì…ë ¥ ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.');
        // ê¸°ì¡´ íŒŒì¼ ì…ë ¥ì´ ì´ë¯¸ ìˆìœ¼ë¯€ë¡œ ë³„ë„ ì²˜ë¦¬ ë¶ˆí•„ìš”
    }
}

// ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
function showSuccessMessage(message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-success alert-dismissible fade show';
    alertDiv.innerHTML = `
        <i class="fas fa-check-circle me-2"></i>${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    // í¼ ìƒë‹¨ì— ë©”ì‹œì§€ ì‚½ì…
    const form = document.getElementById('facilityEditForm');
    form.insertBefore(alertDiv, form.firstChild);
    
    // 5ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 5000);
}

// ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
function showErrorMessage(message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-danger alert-dismissible fade show';
    alertDiv.innerHTML = `
        <i class="fas fa-exclamation-triangle me-2"></i>${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    // í¼ ìƒë‹¨ì— ë©”ì‹œì§€ ì‚½ì…
    const form = document.getElementById('facilityEditForm');
    form.insertBefore(alertDiv, form.firstChild);
    
    // 10ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 10000);
}

// ê°„ë‹¨ ì—…ë¡œë“œ í† ê¸€ ê¸°ëŠ¥
document.addEventListener('DOMContentLoaded', function() {
    const useSimpleUpload = document.getElementById('useSimpleUpload');
    const simpleUploadContainer = document.getElementById('simpleUploadContainer');
    
    if (useSimpleUpload && simpleUploadContainer) {
        useSimpleUpload.addEventListener('change', function() {
            if (this.checked) {
                simpleUploadContainer.style.display = 'block';
            } else {
                simpleUploadContainer.style.display = 'none';
                // íŒŒì¼ ì…ë ¥ ì´ˆê¸°í™”
                const fileInput = document.getElementById('facilityImageFile');
                if (fileInput) fileInput.value = '';
            }
        });
    }
});
</script>

</body>
</html>
````

## File: src/main/java/com/example/carelink/common/Constants.java
````java
package com.example.carelink.common;

/**
 * í”„ë¡œì íŠ¸ ì „ì²´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê³µí†µ ìƒìˆ˜ ì •ì˜
 * íŒ€ì› ê°„ ì¼ê´€ì„± ìœ ì§€ë¥¼ ìœ„í•œ ìƒìˆ˜ í´ë˜ìŠ¤
 */
public class Constants {
    
    // íšŒì› ê´€ë ¨ ìƒìˆ˜
    public static final String SESSION_MEMBER = "loginMember";
    public static final int MAX_LOGIN_ATTEMPTS = 5;
    public static final String MEMBER_ROLE_USER = "USER";
    public static final String MEMBER_ROLE_FACILITY = "FACILITY";
    public static final String MEMBER_ROLE_ADMIN = "ADMIN";
    
    // í˜ì´ì§• ê´€ë ¨ ìƒìˆ˜
    public static final int DEFAULT_PAGE_SIZE = 10;
    public static final int DEFAULT_PAGE_BLOCK = 5;
    
    // íŒŒì¼ ì—…ë¡œë“œ ê´€ë ¨ ìƒìˆ˜
    public static final String UPLOAD_BASE_PATH = "C:/carelink-uploads/";
    public static final String FACILITY_UPLOAD_PATH = UPLOAD_BASE_PATH + "facility/";
    public static final String PROFILE_UPLOAD_PATH = UPLOAD_BASE_PATH + "profile/";
    public static final String TEMP_UPLOAD_PATH = UPLOAD_BASE_PATH + "temp/";
    public static final String TEST_IMAGES_PATH = "/test-images/";
    public static final long MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB
    
    // ì´ë¯¸ì§€ ê´€ë ¨ ìƒìˆ˜
    public static final int MAX_FACILITY_IMAGES = 5; // ì‹œì„¤ ì´ë¯¸ì§€ ìµœëŒ€ 5ì¥
    public static final int MAX_PROFILE_IMAGES = 1;  // í”„ë¡œí•„ ì´ë¯¸ì§€ ìµœëŒ€ 1ì¥
    public static final String[] ALLOWED_IMAGE_EXTENSIONS = {"jpg", "jpeg", "png", "webp"};
    
    // êµ¬ì¸êµ¬ì§ ê´€ë ¨ ìƒìˆ˜
    public static final String JOB_TYPE_RECRUIT = "RECRUIT"; // êµ¬ì¸
    public static final String JOB_TYPE_SEARCH = "SEARCH";   // êµ¬ì§
    public static final String JOB_STATUS_ACTIVE = "ACTIVE";
    public static final String JOB_STATUS_CLOSED = "CLOSED";
    
    // ì‹œì„¤ ê´€ë ¨ ìƒìˆ˜
    public static final String FACILITY_TYPE_NURSING_HOME = "NURSING_HOME";     // ìš”ì–‘ì›
    public static final String FACILITY_TYPE_HOSPITAL = "HOSPITAL";             // ë³‘ì›
    public static final String FACILITY_TYPE_DAY_CARE = "DAY_CARE";            // ì£¼ê°„ë³´í˜¸ì„¼í„°
    
    // ì‘ë‹µ ë©”ì‹œì§€ ìƒìˆ˜
    public static final String SUCCESS = "success";
    public static final String ERROR = "error";
    public static final String DUPLICATE_ID = "duplicate_id";
    public static final String LOGIN_REQUIRED = "login_required";
}
````

## File: src/main/java/com/example/carelink/controller/AdminController.java
````java
package com.example.carelink.controller;

import com.example.carelink.common.Constants;
import com.example.carelink.dto.FacilityDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.service.FacilityService;
import com.example.carelink.service.MemberService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

import javax.servlet.http.HttpSession;
import java.util.ArrayList;
import java.util.List;

/**
 * ê´€ë¦¬ì ì „ìš© ì»¨íŠ¸ë¡¤ëŸ¬
 * ì‹œì„¤ ìŠ¹ì¸, íšŒì› ê´€ë¦¬, ì „ì²´ ì‹œìŠ¤í…œ ê´€ë¦¬ ê¸°ëŠ¥
 */
@Controller
@RequestMapping("/admin")
@RequiredArgsConstructor
@Slf4j
public class AdminController {

    private final FacilityService facilityService;
    private final MemberService memberService;

    /**
     * ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ ë©”ì„œë“œ
     */
    private boolean isAdmin(HttpSession session) {
        MemberDTO sessionMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        return sessionMember != null && "ADMIN".equals(sessionMember.getRole());
    }

    /**
     * ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë©”ì¸ í˜ì´ì§€
     */
    @GetMapping("")
    public String adminDashboard(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        if (!isAdmin(session)) {
            redirectAttributes.addFlashAttribute("errorMessage", "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/";
        }

        try {
            // ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ì‹œì„¤ ìˆ˜
            int pendingFacilities = facilityService.countPendingFacilities();
            
            // ì „ì²´ íšŒì› ìˆ˜
            int totalMembers = memberService.getTotalMemberCount();
            
            // ì‹œì„¤ íšŒì› ìˆ˜
            int facilityMembers = memberService.getFacilityMemberCount();
            
            // ì¼ë°˜ íšŒì› ìˆ˜
            int userMembers = totalMembers - facilityMembers;

            model.addAttribute("pendingFacilities", pendingFacilities);
            model.addAttribute("totalMembers", totalMembers);
            model.addAttribute("facilityMembers", facilityMembers);
            model.addAttribute("userMembers", userMembers);

            log.info("ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ - ìŠ¹ì¸ëŒ€ê¸°: {}, ì „ì²´íšŒì›: {}", pendingFacilities, totalMembers);

        } catch (Exception e) {
            log.error("ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            redirectAttributes.addFlashAttribute("errorMessage", "ëŒ€ì‹œë³´ë“œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }

        return "admin/dashboard";
    }

    /**
     * ì‹œì„¤ ìŠ¹ì¸ ê´€ë¦¬ í˜ì´ì§€
     */
    @GetMapping("/facilities")
    public String facilityManagement(@RequestParam(defaultValue = "PENDING") String status,
                                   HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        if (!isAdmin(session)) {
            redirectAttributes.addFlashAttribute("errorMessage", "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/";
        }

        try {
            log.info("ì‹œì„¤ ìŠ¹ì¸ ê´€ë¦¬ í˜ì´ì§€ ì ‘ê·¼ ì‹œë„ - ìƒíƒœ: {}", status);
            
            List<FacilityDTO> facilities = facilityService.getFacilitiesByApprovalStatus(status);
            log.info("ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ìƒíƒœ: {}, ê°œìˆ˜: {}", status, facilities != null ? facilities.size() : "null");
            
            // null ì²´í¬ ë° ë¹ˆ ë¦¬ìŠ¤íŠ¸ ê¸°ë³¸ê°’ ì„¤ì •
            if (facilities == null) {
                facilities = new ArrayList<>();
                log.warn("ì‹œì„¤ ëª©ë¡ì´ nullì´ì–´ì„œ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì´ˆê¸°í™”í–ˆìŠµë‹ˆë‹¤.");
            }
            
            model.addAttribute("facilities", facilities);
            model.addAttribute("currentStatus", status);

        } catch (Exception e) {
            log.error("ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - ìƒíƒœ: {}", status, e);
            model.addAttribute("facilities", new ArrayList<>());
            model.addAttribute("currentStatus", status);
            redirectAttributes.addFlashAttribute("errorMessage", "ì‹œì„¤ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
        }

        return "admin/facilities";
    }

    /**
     * ì‹œì„¤ ìŠ¹ì¸ ì²˜ë¦¬
     */
    @PostMapping("/facilities/{facilityId}/approve")
    @ResponseBody
    public String approveFacility(@PathVariable Long facilityId, 
                                @RequestParam String action,
                                @RequestParam(required = false) String reason,
                                HttpSession session) {
        if (!isAdmin(session)) {
            return "UNAUTHORIZED";
        }

        try {
            String newStatus;
            if ("approve".equals(action)) {
                newStatus = "APPROVED";
                facilityService.updateFacilityApprovalStatus(facilityId, newStatus, null);
                log.info("ì‹œì„¤ ìŠ¹ì¸ ì™„ë£Œ - ID: {}", facilityId);
            } else if ("reject".equals(action)) {
                newStatus = "REJECTED";
                facilityService.updateFacilityApprovalStatus(facilityId, newStatus, reason);
                log.info("ì‹œì„¤ ìŠ¹ì¸ ê±°ë¶€ - ID: {}, ì‚¬ìœ : {}", facilityId, reason);
            } else {
                return "INVALID_ACTION";
            }

            return "SUCCESS";

        } catch (Exception e) {
            log.error("ì‹œì„¤ ìŠ¹ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - ID: {}", facilityId, e);
            return "ERROR";
        }
    }

    /**
     * íšŒì› ê´€ë¦¬ í˜ì´ì§€
     */
    @GetMapping("/members")
    public String memberManagement(@RequestParam(defaultValue = "ALL") String role,
                                 @RequestParam(defaultValue = "1") int page,
                                 HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        if (!isAdmin(session)) {
            redirectAttributes.addFlashAttribute("errorMessage", "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/";
        }

        try {
            List<MemberDTO> members = memberService.getMembersByRole(role, page, 20);
            int totalCount = memberService.getMemberCountByRole(role);
            int totalPages = (int) Math.ceil((double) totalCount / 20);

            model.addAttribute("members", members);
            model.addAttribute("currentRole", role);
            model.addAttribute("currentPage", page);
            model.addAttribute("totalPages", totalPages);
            model.addAttribute("totalCount", totalCount);

            log.info("íšŒì› ê´€ë¦¬ í˜ì´ì§€ ì ‘ê·¼ - ì—­í• : {}, í˜ì´ì§€: {}, ì´ ê°œìˆ˜: {}", role, page, totalCount);

        } catch (Exception e) {
            log.error("íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            redirectAttributes.addFlashAttribute("errorMessage", "íšŒì› ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }

        return "admin/members";
    }

    /**
     * íšŒì› í™œì„±í™”/ë¹„í™œì„±í™” í† ê¸€
     */
    @PostMapping("/members/{memberId}/toggle-active")
    @ResponseBody
    public String toggleMemberActive(@PathVariable Long memberId, HttpSession session) {
        if (!isAdmin(session)) {
            return "UNAUTHORIZED";
        }

        try {
            boolean result = memberService.toggleMemberActive(memberId);
            log.info("íšŒì› í™œì„±í™” ìƒíƒœ ë³€ê²½ - ID: {}, ê²°ê³¼: {}", memberId, result);
            return result ? "SUCCESS" : "FAILED";

        } catch (Exception e) {
            log.error("íšŒì› í™œì„±í™” ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - ID: {}", memberId, e);
            return "ERROR";
        }
    }

    /**
     * ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ (ëª¨ë‹¬ìš©)
     */
    @GetMapping("/facilities/{facilityId}/detail")
    @ResponseBody
    public FacilityDTO getFacilityDetail(@PathVariable Long facilityId, HttpSession session) {
        if (!isAdmin(session)) {
            return null;
        }

        try {
            return facilityService.getFacilityById(facilityId);
        } catch (Exception e) {
            log.error("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - ID: {}", facilityId, e);
            return null;
        }
    }

    /**
     * ì „ì²´ í†µê³„ í˜ì´ì§€
     */
    @GetMapping("/statistics")
    public String statistics(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        if (!isAdmin(session)) {
            redirectAttributes.addFlashAttribute("errorMessage", "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/";
        }

        try {
            // ê°ì¢… í†µê³„ ë°ì´í„° ìˆ˜ì§‘
            model.addAttribute("totalMembers", memberService.getTotalMemberCount());
            model.addAttribute("facilityMembers", memberService.getFacilityMemberCount());
            model.addAttribute("approvedFacilities", facilityService.countApprovedFacilities());
            model.addAttribute("pendingFacilities", facilityService.countPendingFacilities());
            model.addAttribute("rejectedFacilities", facilityService.countRejectedFacilities());

            log.info("ê´€ë¦¬ì í†µê³„ í˜ì´ì§€ ì ‘ê·¼");

        } catch (Exception e) {
            log.error("í†µê³„ ë°ì´í„° ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            redirectAttributes.addFlashAttribute("errorMessage", "í†µê³„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }

        return "admin/statistics";
    }
}
````

## File: src/main/java/com/example/carelink/dto/JobDTO.java
````java
package com.example.carelink.dto;

import com.example.carelink.common.BaseDTO;
import lombok.Data;
import lombok.EqualsAndHashCode;

import javax.validation.constraints.NotBlank;
import javax.validation.constraints.NotNull;
import java.math.BigDecimal;
import java.time.LocalDate;

/**
 * êµ¬ì¸êµ¬ì§ ê²Œì‹œê¸€ DTO
 * íŒ€ì› C ë‹´ë‹¹: êµ¬ì¸êµ¬ì§ ê²Œì‹œíŒ ê¸°ëŠ¥
 */
@Data
@EqualsAndHashCode(callSuper = true)
public class JobDTO extends BaseDTO {
    
    private Long jobId;             // êµ¬ì¸êµ¬ì§ ID (ìë™ì¦ê°€)
    
    @NotBlank(message = "ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String title;           // ì œëª©
    
    @NotBlank(message = "ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String content;         // ë‚´ìš©
    
    @NotBlank(message = "êµ¬ì¸êµ¬ì§ ìœ í˜•ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String jobType;         // êµ¬ì¸êµ¬ì§ ìœ í˜• (RECRUIT: êµ¬ì¸, SEARCH: êµ¬ì§)
    
    @NotBlank(message = "ê·¼ë¬´ í˜•íƒœëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String workType;        // ê·¼ë¬´ í˜•íƒœ (FULL_TIME, PART_TIME, TEMPORARY)
    
    private String position;        // ëª¨ì§‘ ì§ì¢…
    private Integer recruitCount;   // ëª¨ì§‘ ì¸ì›
    
    // ê¸‰ì—¬ ì •ë³´
    private String salaryType;      // ê¸‰ì—¬ ìœ í˜• (HOURLY, MONTHLY, ANNUAL)
    private BigDecimal salaryMin;   // ìµœì†Œ ê¸‰ì—¬
    private BigDecimal salaryMax;   // ìµœëŒ€ ê¸‰ì—¬
    private String salaryDescription; // ê¸‰ì—¬ ì„¤ëª…
    
    // ê·¼ë¬´ ì¡°ê±´
    private String workLocation;    // ê·¼ë¬´ ì§€ì—­
    private String workHours;       // ê·¼ë¬´ ì‹œê°„
    private String experience;      // ê²½ë ¥ ì¡°ê±´
    private String education;       // í•™ë ¥ ì¡°ê±´
    private String qualifications;  // ìê²© ìš”ê±´
    private String benefits;        // ë³µë¦¬í›„ìƒ
    
    // ëª¨ì§‘ ê¸°ê°„
    private LocalDate startDate;    // ëª¨ì§‘ ì‹œì‘ì¼
    private LocalDate endDate;      // ëª¨ì§‘ ë§ˆê°ì¼
    
    // ì—°ë½ì²˜ ì •ë³´
    private String contactName;     // ë‹´ë‹¹ì ì´ë¦„
    private String contactPhone;    // ë‹´ë‹¹ì ì—°ë½ì²˜
    private String contactEmail;    // ë‹´ë‹¹ì ì´ë©”ì¼
    
    // ìƒíƒœ ê´€ë¦¬
    @NotBlank(message = "ê²Œì‹œê¸€ ìƒíƒœëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String status;          // ê²Œì‹œê¸€ ìƒíƒœ (ACTIVE, CLOSED, DRAFT)

    private Integer viewCount;      // ì¡°íšŒìˆ˜
    private Integer applyCount;     // ì§€ì›ì ìˆ˜
    
    // ì‘ì„±ì ì •ë³´
    @NotNull(message = "ì‘ì„±ì ì •ë³´ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private Long memberId;          // ì‘ì„±ì ID
    private String memberName;      // ì‘ì„±ì ì´ë¦„
    
    // ì‹œì„¤ ì •ë³´ (êµ¬ì¸ê¸€ì¸ ê²½ìš°)
    private Long facilityId;        // ê´€ë ¨ ì‹œì„¤ ID
    private String facilityName;    // ì‹œì„¤ ì´ë¦„
    
    // ê²€ìƒ‰ìš© í•„ë“œ
    private String searchKeyword;   // ê²€ìƒ‰ í‚¤ì›Œë“œ
    private String searchJobType;   // ê²€ìƒ‰ êµ¬ì¸êµ¬ì§ ìœ í˜•
    private String searchWorkType;  // ê²€ìƒ‰ ê·¼ë¬´ í˜•íƒœ
    private String searchLocation;  // ê²€ìƒ‰ ì§€ì—­
    private String searchPosition;  // ê²€ìƒ‰ ì§ì¢…
    
    // ì²¨ë¶€íŒŒì¼
    private String attachmentPath;  // ì²¨ë¶€íŒŒì¼ ê²½ë¡œ
    private String attachmentName;  // ì²¨ë¶€íŒŒì¼ ì›ë³¸ëª…
    
    // ìš°ì„ ìˆœìœ„ (ìƒë‹¨ ê³ ì •ìš©)
    private Integer priority;       // ìš°ì„ ìˆœìœ„ (ìˆ«ìê°€ ë†’ì„ìˆ˜ë¡ ìš°ì„ )

    private boolean isHighlight;    // ê°•ì¡° í‘œì‹œ ì—¬ë¶€

}
````

## File: src/main/java/com/example/carelink/dto/ReviewDTO.java
````java
package com.example.carelink.dto;

import com.example.carelink.common.BaseDTO;
import lombok.Data;
import lombok.EqualsAndHashCode;

import javax.validation.constraints.Max;
import javax.validation.constraints.Min;
import javax.validation.constraints.NotBlank;
import javax.validation.constraints.NotNull;

/**
 * ì‹œì„¤ ë¦¬ë·° DTO
 * íŒ€ì› D ë‹´ë‹¹: ì‹œì„¤ ë¦¬ë·° ê¸°ëŠ¥
 */
@Data
@EqualsAndHashCode(callSuper = true)
public class ReviewDTO extends BaseDTO {
    
    private Long reviewId;          // ë¦¬ë·° ID (ìë™ì¦ê°€)
    
    @NotNull(message = "ì‹œì„¤ ì •ë³´ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private Long facilityId;        // ì‹œì„¤ ID
    private String facilityName;    // ì‹œì„¤ ì´ë¦„
    
    @NotNull(message = "ì‘ì„±ì ì •ë³´ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private Long memberId;          // ì‘ì„±ì ID
    private String memberName;      // ì‘ì„±ì ì´ë¦„
    
    @NotBlank(message = "ë¦¬ë·° ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String title;           // ë¦¬ë·° ì œëª©
    
    @NotBlank(message = "ë¦¬ë·° ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String content;         // ë¦¬ë·° ë‚´ìš©
    
    @NotNull(message = "í‰ì ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    @Min(value = 1, message = "í‰ì ì€ 1ì  ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤")
    @Max(value = 5, message = "í‰ì ì€ 5ì  ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤")
    private Integer rating;         // í‰ì  (1-5ì )
    
    // ì„¸ë¶€ í‰ì  (ì„ íƒì‚¬í•­)
    private Integer serviceRating;  // ì„œë¹„ìŠ¤ í‰ì 
    private Integer facilityRating; // ì‹œì„¤ í‰ì 
    private Integer staffRating;    // ì§ì› í‰ì 
    private Integer priceRating;    // ê°€ê²© í‰ì 
    
    // ë¦¬ë·° ì´ë¯¸ì§€
    private String reviewImage1;    // ë¦¬ë·° ì´ë¯¸ì§€ 1
    private String reviewImage2;    // ë¦¬ë·° ì´ë¯¸ì§€ 2
    private String reviewImage3;    // ë¦¬ë·° ì´ë¯¸ì§€ 3
    
    // ë¦¬ë·° ì´ë¯¸ì§€ alt í…ìŠ¤íŠ¸ (SEO ìµœì í™”ìš©)
    private String reviewImage1AltText;    // ë¦¬ë·° ì´ë¯¸ì§€ 1 alt í…ìŠ¤íŠ¸
    private String reviewImage2AltText;    // ë¦¬ë·° ì´ë¯¸ì§€ 2 alt í…ìŠ¤íŠ¸
    private String reviewImage3AltText;    // ë¦¬ë·° ì´ë¯¸ì§€ 3 alt í…ìŠ¤íŠ¸
    
    // ì¶”ì²œ/ë¹„ì¶”ì²œ
    private Integer likeCount;      // ì¶”ì²œ ìˆ˜
    private Integer dislikeCount;   // ë¹„ì¶”ì²œ ìˆ˜
    
    // ì¡°íšŒìˆ˜
    private Integer viewCount;      // ì¡°íšŒìˆ˜
    
    // ìƒíƒœ
    private boolean isVisible;      // í‘œì‹œ ì—¬ë¶€
    private String status;          // ìƒíƒœ (ACTIVE, HIDDEN, REPORTED)
    
    // ë‹µê¸€ ê´€ë ¨
    private Long parentReviewId;    // ë¶€ëª¨ ë¦¬ë·° ID (ë‹µê¸€ì¸ ê²½ìš°)
    private Integer replyCount;     // ë‹µê¸€ ìˆ˜
    private Integer replyDepth;     // ë‹µê¸€ ê¹Šì´
    
    // ê²€ìƒ‰ìš©
    private String searchKeyword;   // ê²€ìƒ‰ í‚¤ì›Œë“œ
    private Integer minRating;      // ìµœì†Œ í‰ì 
    private Integer maxRating;      // ìµœëŒ€ í‰ì 
    
    // ì •ë ¬ìš©
    private String sortBy;          // ì •ë ¬ ê¸°ì¤€ (LATEST, RATING_HIGH, RATING_LOW, LIKE_COUNT)
    
    // ì‹œì„¤ í‰ê·  í‰ì  (ì¡°íšŒìš©)
    private Double facilityAverageRating;    // ì‹œì„¤ì˜ í‰ê·  í‰ì 
    private Integer facilityReviewCount;     // ì‹œì„¤ì˜ ì „ì²´ ë¦¬ë·° ìˆ˜
}
````

## File: src/main/java/com/example/carelink/CarelinkApplication.java
````java
package com.example.carelink;

import org.mybatis.spring.annotation.MapperScan;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

/**
 * ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ ì‚¬ì´íŠ¸ ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
 * íŒ€ í”„ë¡œì íŠ¸ - 4ì¸ í˜‘ì—… ê°œë°œ
 */
@SpringBootApplication
@MapperScan(basePackages = {"com.example.carelink.dao"})
public class CarelinkApplication {

    public static void main(String[] args) {
        SpringApplication.run(CarelinkApplication.class, args);
        System.out.println("========================================");
        System.out.println("    ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ ì‚¬ì´íŠ¸ ì‹œì‘ë¨!        ");
        System.out.println("    í¬íŠ¸: http://localhost:8080         ");
        System.out.println("========================================");
    }
}
````

## File: src/main/resources/mapper/jobMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.carelink.dao.JobMapper">

    <!-- ResultMap ì •ì˜ -->
    <resultMap id="jobResultMap" type="com.example.carelink.dto.JobDTO">
        <id property="jobId" column="job_id"/>
        <result property="title" column="title"/>
        <result property="content" column="content"/>
        <result property="jobType" column="job_type"/>
        <result property="workType" column="work_type"/>
        <result property="position" column="position"/>
        <result property="recruitCount" column="recruit_count"/>
        <result property="salaryType" column="salary_type"/>
        <result property="salaryMin" column="salary_min"/>
        <result property="salaryMax" column="salary_max"/>
        <result property="salaryDescription" column="salary_description"/>
        <result property="workLocation" column="work_location"/>
        <result property="workHours" column="work_hours"/>
        <result property="experience" column="experience"/>
        <result property="education" column="education"/>
        <result property="qualifications" column="qualifications"/>
        <result property="benefits" column="benefits"/>
        <result property="startDate" column="start_date"/>
        <result property="endDate" column="end_date"/>
        <result property="contactName" column="contact_name"/>
        <result property="contactPhone" column="contact_phone"/>
        <result property="contactEmail" column="contact_email"/>
        <result property="status" column="status"/>
        <result property="viewCount" column="view_count"/>
        <result property="applyCount" column="apply_count"/>
        <result property="memberId" column="member_id"/>
        <result property="memberName" column="member_name"/>
        <result property="facilityId" column="facility_id"/>
        <result property="facilityName" column="facility_name"/>
        <result property="attachmentPath" column="attachment_path"/>
        <result property="attachmentName" column="attachment_name"/>
        <result property="priority" column="priority"/>
        <result property="isHighlight" column="is_highlight"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
        <result property="isDeleted" column="is_deleted"/>
    </resultMap>

    <!-- êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ (ê²€ìƒ‰ í¬í•¨) -->
    <select id="findJobsWithSearch" parameterType="com.example.carelink.dto.JobDTO" resultMap="jobResultMap">
        SELECT 
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.is_deleted = false
        <if test="searchKeyword != null and searchKeyword != ''">
            AND (j.title LIKE CONCAT('%', #{searchKeyword}, '%') 
                 OR j.content LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR j.position LIKE CONCAT('%', #{searchKeyword}, '%'))
        </if>
        <if test="searchJobType != null and searchJobType != ''">
            AND j.job_type = #{searchJobType}
        </if>
        <if test="searchWorkType != null and searchWorkType != ''">
            AND j.work_type = #{searchWorkType}
        </if>
        <if test="searchLocation != null and searchLocation != ''">
            AND j.work_location LIKE CONCAT('%', #{searchLocation}, '%')
        </if>
        <if test="searchPosition != null and searchPosition != ''">
            AND j.position LIKE CONCAT('%', #{searchPosition}, '%')
        </if>
        ORDER BY j.priority DESC, j.created_at DESC
        <if test="size != null and size > 0">
            LIMIT #{size}
        </if>
        <if test="offset != null and offset >= 0">
            OFFSET #{offset}
        </if>
    </select>

    <!-- êµ¬ì¸êµ¬ì§ ì´ ê°œìˆ˜ ì¡°íšŒ -->
    <select id="countJobsWithSearch" parameterType="com.example.carelink.dto.JobDTO" resultType="int">
        SELECT COUNT(*)
        FROM job_posting j
        WHERE j.is_deleted = false
        <if test="searchKeyword != null and searchKeyword != ''">
            AND (j.title LIKE CONCAT('%', #{searchKeyword}, '%') 
                 OR j.content LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR j.position LIKE CONCAT('%', #{searchKeyword}, '%'))
        </if>
        <if test="searchJobType != null and searchJobType != ''">
            AND j.job_type = #{searchJobType}
        </if>
        <if test="searchWorkType != null and searchWorkType != ''">
            AND j.work_type = #{searchWorkType}
        </if>
        <if test="searchLocation != null and searchLocation != ''">
            AND j.work_location LIKE CONCAT('%', #{searchLocation}, '%')
        </if>
        <if test="searchPosition != null and searchPosition != ''">
            AND j.position LIKE CONCAT('%', #{searchPosition}, '%')
        </if>
    </select>

    <!-- êµ¬ì¸êµ¬ì§ ìƒì„¸ ì¡°íšŒ -->
    <select id="findJobById" parameterType="long" resultMap="jobResultMap">
        SELECT 
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.job_id = #{jobId} AND j.is_deleted = false
    </select>

    <!-- êµ¬ì¸êµ¬ì§ ë“±ë¡ -->
    <insert id="insertJob" parameterType="com.example.carelink.dto.JobDTO" useGeneratedKeys="true" keyProperty="jobId">
        INSERT INTO job_posting (
            title, content, job_type, work_type, position, recruit_count,
            salary_type, salary_min, salary_max, salary_description,
            work_location, work_hours, experience, education, qualifications, benefits,
            start_date, end_date, contact_name, contact_phone, contact_email,
            status, member_id, facility_id, attachment_path, attachment_name,
            priority, is_highlight, created_at
        ) VALUES (
            #{title}, #{content}, #{jobType}, #{workType}, #{position}, #{recruitCount},
            #{salaryType}, #{salaryMin}, #{salaryMax}, #{salaryDescription},
            #{workLocation}, #{workHours}, #{experience}, #{education}, #{qualifications}, #{benefits},
            #{startDate}, #{endDate}, #{contactName}, #{contactPhone}, #{contactEmail},
            #{status}, #{memberId}, #{facilityId}, #{attachmentPath}, #{attachmentName},
            #{priority}, #{isHighlight}, NOW()
        )
    </insert>

    <!-- êµ¬ì¸êµ¬ì§ ìˆ˜ì • -->
    <update id="updateJob" parameterType="com.example.carelink.dto.JobDTO">
        UPDATE job_posting SET
            title = #{title},
            content = #{content},
            job_type = #{jobType},
            work_type = #{workType},
            position = #{position},
            recruit_count = #{recruitCount},
            salary_type = #{salaryType},
            salary_min = #{salaryMin},
            salary_max = #{salaryMax},
            salary_description = #{salaryDescription},
            work_location = #{workLocation},
            work_hours = #{workHours},
            experience = #{experience},
            education = #{education},
            qualifications = #{qualifications},
            benefits = #{benefits},
            start_date = #{startDate},
            end_date = #{endDate},
            contact_name = #{contactName},
            contact_phone = #{contactPhone},
            contact_email = #{contactEmail},
            status = #{status},
            facility_id = #{facilityId},
            attachment_path = #{attachmentPath},
            attachment_name = #{attachmentName},
            priority = #{priority},
            is_highlight = #{isHighlight},
            updated_at = NOW()
        WHERE job_id = #{jobId}
    </update>

    <!-- êµ¬ì¸êµ¬ì§ ì‚­ì œ (ë…¼ë¦¬ ì‚­ì œ) -->
    <update id="deleteJob" parameterType="long">
        UPDATE job_posting SET
            is_deleted = true,
            updated_at = NOW()
        WHERE job_id = #{jobId}
    </update>

    <!-- ì¡°íšŒìˆ˜ ì¦ê°€ -->
    <update id="incrementViewCount" parameterType="long">
        UPDATE job_posting SET
            view_count = view_count + 1,
            updated_at = NOW()
        WHERE job_id = #{jobId}
    </update>

    <!-- ì§€ì›ì ìˆ˜ ì¦ê°€ -->
    <update id="incrementApplyCount" parameterType="long">
        UPDATE job_posting SET
            apply_count = apply_count + 1,
            updated_at = NOW()
        WHERE job_id = #{jobId}
    </update>

    <!-- íšŒì›ë³„ êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ -->
    <select id="findJobsByMemberId" parameterType="long" resultMap="jobResultMap">
        SELECT 
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.member_id = #{memberId} AND j.is_deleted = false
        ORDER BY j.created_at DESC
    </select>

    <!-- ì‹œì„¤ë³„ êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ -->
    <select id="findJobsByFacilityId" parameterType="long" resultMap="jobResultMap">
        SELECT 
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.facility_id = #{facilityId} AND j.is_deleted = false
        ORDER BY j.created_at DESC
    </select>

    <!-- ê¸°ë³¸ êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ (ê¸°ì¡´ í˜¸í™˜ì„± ìœ ì§€) -->
    <select id="getJobList" parameterType="com.example.carelink.dto.JobDTO" resultMap="jobResultMap">
        SELECT 
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.is_deleted = false
        ORDER BY j.priority DESC, j.created_at DESC
        <if test="size != null and size > 0">
            LIMIT #{size}
        </if>
        <if test="page != null and page >= 0">
            OFFSET #{page}
        </if>
    </select>

    <!-- êµ¬ì¸êµ¬ì§ ìƒì„¸ ì¡°íšŒ (ê¸°ì¡´ í˜¸í™˜ì„± ìœ ì§€) -->
    <select id="getJobById" parameterType="long" resultMap="jobResultMap">
        SELECT 
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.job_id = #{jobId} AND j.is_deleted = false
    </select>

    <!-- ì¸ê¸° êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ -->
    <select id="getPopularJobs" resultMap="jobResultMap">
        SELECT 
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.is_deleted = false AND j.status = 'ACTIVE'
        ORDER BY j.view_count DESC, j.apply_count DESC
        LIMIT 10
    </select>

    <!-- ì „ì²´ êµ¬ì¸êµ¬ì§ ìˆ˜ ì¡°íšŒ (í†µê³„ìš©) -->
    <select id="getJobCount" resultType="int">
        SELECT COUNT(*) 
        FROM job_posting 
        WHERE is_deleted = false AND status = 'ACTIVE'
    </select>

    <!-- íšŒì› IDë¡œ êµ¬ì¸êµ¬ì§ ê²Œì‹œê¸€ ì‚­ì œ (íšŒì› íƒˆí‡´ ì‹œ ì‚¬ìš©) -->
    <delete id="deleteByMemberId" parameterType="long">
        DELETE FROM job_posting WHERE member_id = #{memberId}
    </delete>

    <!-- ì‹œì„¤ íšŒì› IDë¡œ êµ¬ì¸êµ¬ì§ ê²Œì‹œê¸€ ì‚­ì œ (ì‹œì„¤ ì‚­ì œ ì‹œ ì‚¬ìš©) -->
    <delete id="deleteByFacilityMemberId" parameterType="long">
        DELETE FROM job_posting 
        WHERE facility_id IN (
            SELECT facility_id FROM facility WHERE registered_member_id = #{memberId}
        )
    </delete>

</mapper>
````

## File: src/main/resources/static/css/advanced-image-cropper.css
````css
/**
 * ê³ ê¸‰ ì´ë¯¸ì§€ í¬ë¡­í¼ ìŠ¤íƒ€ì¼
 * í”„ë¡œí•„ & ì‹œì„¤ ì´ë¯¸ì§€ í†µí•© ì»´í¬ë„ŒíŠ¸
 */

.advanced-image-cropper {
    max-width: 100%;
    margin: 0 auto;
}

/* ë‹¨ê³„ í‘œì‹œê¸° */
.steps-indicator {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 30px;
}

.step-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    z-index: 2;
}

.step-circle {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: #e9ecef;
    border: 3px solid #dee2e6;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #6c757d;
    font-size: 18px;
    transition: all 0.3s ease;
    margin-bottom: 8px;
}

.step-item.active .step-circle {
    background: #007bff;
    border-color: #007bff;
    color: white;
    transform: scale(1.1);
    box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
}

.step-item.completed .step-circle {
    background: #28a745;
    border-color: #28a745;
    color: white;
}

.step-label {
    font-size: 12px;
    color: #6c757d;
    font-weight: 500;
    text-align: center;
    margin-top: 5px;
}

.step-item.active .step-label {
    color: #007bff;
    font-weight: 600;
}

.step-item.completed .step-label {
    color: #28a745;
    font-weight: 600;
}

.step-connector {
    width: 80px;
    height: 3px;
    background: #dee2e6;
    margin: 0 10px;
    margin-top: -25px;
    z-index: 1;
    transition: background 0.3s ease;
}

.step-item.completed + .step-connector {
    background: #28a745;
}

/* Cropper.js ì¤‘ì•™ ì‹­ìê°€ ê°€ì‹œì„± ê°œì„  */
.cropper-center {
    opacity: 1 !important;
}

.cropper-center:before,
.cropper-center:after {
    background-color: #007bff !important;
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.8) !important;
    opacity: 1 !important;
}

/* Cropper.js ê°€ì´ë“œë¼ì¸ ê°œì„  */
.cropper-line {
    background-color: rgba(0, 123, 255, 0.4) !important;
    opacity: 1 !important;
}

.cropper-dashed {
    border-color: rgba(0, 123, 255, 0.6) !important;
    opacity: 1 !important;
}

/* Cropper.js í•¸ë“¤ ê°œì„  */
.cropper-point {
    background-color: #007bff !important;
    border: 2px solid #fff !important;
    box-shadow: 0 0 0 1px #007bff !important;
    opacity: 1 !important;
    width: 8px !important;
    height: 8px !important;
}

.cropper-point.point-se {
    cursor: nw-resize !important;
}

/* ì—…ë¡œë“œ ì˜ì—­ */
.upload-area {
    border: 2px dashed #dee2e6;
    border-radius: 12px;
    padding: 40px 20px;
    text-align: center;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.upload-area::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    transition: left 0.5s ease;
}

.upload-area:hover {
    border-color: #007bff;
    background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,123,255,0.15);
}

.upload-area:hover::before {
    left: 100%;
}

.upload-area.drag-over {
    border-color: #28a745;
    background: linear-gradient(135deg, #e8f5e8 0%, #c3e6cb 100%);
    transform: scale(1.02);
}

.upload-content {
    position: relative;
    z-index: 1;
}

.upload-icon {
    margin-bottom: 20px;
}

.upload-icon i {
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

.upload-title {
    color: #495057;
    font-weight: 600;
    margin-bottom: 10px;
}

.upload-description {
    font-size: 16px;
    margin-bottom: 15px;
}

.upload-format-info {
    margin-bottom: 20px;
}

/* í¬ë¡­ ì˜ì—­ */
.crop-container {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.crop-image-container {
    border-radius: 8px;
    overflow: hidden;
    background: #f8f9fa;
    min-height: 300px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.crop-controls {
    text-align: center;
}

.crop-preview-panel {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    height: fit-content;
}

/* í”„ë¡œí•„ ë¯¸ë¦¬ë³´ê¸° */
.profile-preview {
    text-align: center;
}

.profile-card {
    border-radius: 12px;
    transition: transform 0.3s ease;
}

.profile-card:hover {
    transform: translateY(-2px);
}

/* ì‹œì„¤ ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸° */
.facility-card-preview .card {
    transition: transform 0.3s ease;
    border: none;
}

.facility-card-preview .card:hover {
    transform: translateY(-2px);
}

.card-img-container {
    position: relative;
    overflow: hidden;
}

/* ì¤Œ í‘œì‹œê¸° */
.zoom-indicator {
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 8px 12px;
    border-radius: 20px;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 9999;
    animation: fadeInOut 0.3s ease;
}

@keyframes fadeInOut {
    from { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
    to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

/* ì´ë¯¸ì§€ ì •ë³´ íŒ¨ë„ */
.image-info-panel {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    border: 1px solid #e9ecef;
}

/* ìµœì¢… ë¯¸ë¦¬ë³´ê¸° */
.final-preview {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    text-align: center;
}

.final-image-container {
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    display: inline-block;
}

.final-image {
    max-width: 100%;
    height: auto;
    display: block;
}

/* ì••ì¶• ì„¤ì • */
.compression-settings {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.compression-info {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    border: 1px solid #e9ecef;
    text-align: center;
}

.compression-savings {
    font-size: 18px;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}

/* Alt í…ìŠ¤íŠ¸ ì„¹ì…˜ */
.alt-text-section {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 8px;
    padding: 15px;
}

.alt-text-section .form-label {
    color: #856404;
    font-weight: 600;
}

/* ìŠ¬ë¼ì´ë” ìŠ¤íƒ€ì¼ */
.form-range {
    appearance: none;
    background: transparent;
    cursor: pointer;
    height: 6px;
}

.form-range::-webkit-slider-track {
    background: #dee2e6;
    height: 6px;
    border-radius: 3px;
}

.form-range::-webkit-slider-thumb {
    appearance: none;
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #007bff;
    cursor: pointer;
    border: 2px solid #fff;
    box-shadow: 0 2px 6px rgba(0,123,255,0.3);
    transition: all 0.2s ease;
}

.form-range::-webkit-slider-thumb:hover {
    background: #0056b3;
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0,123,255,0.5);
}

.form-range::-moz-range-track {
    background: #dee2e6;
    height: 6px;
    border-radius: 3px;
    border: none;
}

.form-range::-moz-range-thumb {
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #007bff;
    cursor: pointer;
    border: 2px solid #fff;
    box-shadow: 0 2px 6px rgba(0,123,255,0.3);
}

/* ì§„í–‰ë¥  ì˜ì—­ */
.progress-area {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 20px;
    border: 1px solid #e9ecef;
    margin: 20px 0;
}

.progress {
    height: 8px;
    border-radius: 4px;
    background: #e9ecef;
    overflow: hidden;
}

.progress-bar {
    background: linear-gradient(45deg, #007bff, #0056b3);
    transition: width 0.3s ease;
}

.progress-text {
    margin-top: 10px;
    color: #6c757d;
    font-weight: 500;
}

/* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.btn {
    border-radius: 8px;
    font-weight: 500;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255,255,255,0.3);
    transition: all 0.3s ease;
    transform: translate(-50%, -50%);
}

.btn:hover::before {
    width: 300px;
    height: 300px;
}

.btn-lg {
    padding: 12px 30px;
    font-size: 16px;
    font-weight: 600;
}

.btn-primary {
    background: linear-gradient(45deg, #007bff, #0056b3);
    border: none;
    box-shadow: 0 4px 15px rgba(0,123,255,0.3);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,123,255,0.4);
}

.btn-success {
    background: linear-gradient(45deg, #28a745, #1e7e34);
    border: none;
    box-shadow: 0 4px 15px rgba(40,167,69,0.3);
}

.btn-success:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(40,167,69,0.4);
}

.btn-outline-secondary:hover {
    transform: translateY(-1px);
}

.btn-outline-danger:hover {
    transform: translateY(-1px);
}

/* ì•¡ì…˜ ë²„íŠ¼ ê·¸ë£¹ */
.crop-actions, .final-actions {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 20px;
    border: 1px solid #e9ecef;
}

/* ì—ëŸ¬ ë©”ì‹œì§€ */
.error-message {
    border-radius: 8px;
    border: none;
    background: linear-gradient(45deg, #dc3545, #c82333);
    color: white;
    font-weight: 500;
    animation: slideInDown 0.3s ease;
}

@keyframes slideInDown {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ë°˜ì‘í˜• ë””ìì¸ */
@media (max-width: 768px) {
    .steps-indicator {
        flex-direction: column;
        gap: 15px;
    }
    
    .step-connector {
        width: 3px;
        height: 30px;
        margin: 10px 0;
    }
    
    .upload-area {
        padding: 30px 15px;
    }
    
    .crop-container, .crop-preview-panel, .compression-settings {
        padding: 15px;
        margin-bottom: 15px;
    }
    
    .crop-actions .d-flex, .final-actions .d-flex {
        flex-direction: column;
        gap: 10px;
    }
    
    .btn-lg {
        padding: 10px 25px;
        font-size: 15px;
    }
}

@media (max-width: 576px) {
    .step-circle {
        width: 40px;
        height: 40px;
        font-size: 16px;
    }
    
    .step-label {
        font-size: 11px;
    }
    
    .crop-controls .btn-group {
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .crop-controls .btn {
        flex: 1;
        min-width: 0;
        margin: 2px;
    }
}

/* ë‹¤í¬ ëª¨ë“œ ì§€ì› */
@media (prefers-color-scheme: dark) {
    .advanced-image-cropper {
        color: #f8f9fa;
    }
    
    .upload-area {
        background: linear-gradient(135deg, #343a40 0%, #495057 100%);
        border-color: #495057;
    }
    
    .crop-container, .crop-preview-panel, .compression-settings, .final-preview {
        background: #343a40;
        border-color: #495057;
    }
    
    .image-info-panel, .compression-info {
        background: #495057;
        border-color: #6c757d;
    }
}

/* í¬ì»¤ìŠ¤ ìƒíƒœ */
.btn:focus,
.form-control:focus,
.form-range:focus {
    box-shadow: 0 0 0 0.2rem rgba(0,123,255,0.25);
    outline: none;
}

/* ë¡œë”© ìƒíƒœ */
.loading {
    pointer-events: none;
    opacity: 0.6;
}

.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin: -10px 0 0 -10px;
    border: 2px solid #fff;
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Cropper.js ì˜¤ë²„ë¼ì´ë“œ */
.cropper-container {
    direction: ltr;
    font-size: 0;
    line-height: 0;
    position: relative;
    -ms-touch-action: none;
    touch-action: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.cropper-container img {
    border-radius: 8px;
}

.cropper-wrap-box,
.cropper-canvas,
.cropper-drag-box,
.cropper-crop-box,
.cropper-modal {
    border-radius: 8px;
}

.cropper-view-box {
    border-radius: 8px;
    outline: 1px solid #007bff;
    outline-color: rgba(0, 123, 255, 0.8);
}

.cropper-dashed {
    border-color: rgba(0, 123, 255, 0.5);
}

.cropper-center {
    opacity: 0.8;
}

.cropper-point {
    background-color: #007bff;
    border-radius: 50%;
    opacity: 0.8;
}

.cropper-line {
    background-color: #007bff;
    opacity: 0.6;
}
````

## File: src/main/resources/static/js/common.js
````javascript
/**
 * CareLink ê³µí†µ JavaScript í•¨ìˆ˜
 * 4ì¸ íŒ€ í”„ë¡œì íŠ¸ ì „ìš©
 */

// í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ì‹œ ì‹¤í–‰
$(document).ready(function() {
    // ê³µí†µ ê¸°ëŠ¥ ì´ˆê¸°í™”
    initCommonFeatures();
    
    // ìë™ ì•Œë¦¼ ìˆ¨ê¹€
    autoHideAlerts();
    
    // í¼ ìœ íš¨ì„± ê²€ì‚¬ ì´ˆê¸°í™”
    initFormValidation();
    
    // íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ ì´ˆê¸°í™”
    initFileUpload();
    
    // ë¡œë”© ìƒíƒœ ê´€ë¦¬
    initLoadingState();
    
    // ê²Œì‹œê¸€ ì‚­ì œ í›„ ëª©ë¡ ìƒˆë¡œê³ ì¹¨ ì²´í¬
    refreshBoardList();
});

/**
 * ê³µí†µ ê¸°ëŠ¥ ì´ˆê¸°í™”
 */
function initCommonFeatures() {
    // íˆ´íŒ ì´ˆê¸°í™”
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
    
    // íŒì˜¤ë²„ ì´ˆê¸°í™”
    var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));
    var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
        return new bootstrap.Popover(popoverTriggerEl);
    });
}

/**
 * ìë™ ì•Œë¦¼ ë©”ì‹œì§€ ìˆ¨ê¹€
 */
function autoHideAlerts() {
    $('.alert').each(function() {
        var alert = $(this);
        if (!alert.hasClass('alert-permanent')) {
            setTimeout(function() {
                alert.fadeOut('slow');
            }, 3000); // 3ì´ˆ í›„ ìë™ ìˆ¨ê¹€
        }
    });
}

/**
 * í¼ ìœ íš¨ì„± ê²€ì‚¬ ì´ˆê¸°í™”
 */
function initFormValidation() {
    // Bootstrap ìœ íš¨ì„± ê²€ì‚¬ í´ë˜ìŠ¤ ì¶”ê°€
    $('form').each(function() {
        $(this).addClass('needs-validation');
    });
    
    // ì‹¤ì‹œê°„ ìœ íš¨ì„± ê²€ì‚¬
    $('.form-control').on('blur', function() {
        validateField($(this));
    });
    
    // í¼ ì œì¶œ ì‹œ ìœ íš¨ì„± ê²€ì‚¬
    $('form').on('submit', function(e) {
        var form = $(this);
        var isValid = true;
        
        form.find('.form-control[required]').each(function() {
            if (!validateField($(this))) {
                isValid = false;
            }
        });
        
        if (!isValid) {
            e.preventDefault();
            e.stopPropagation();
        }
        
        form.addClass('was-validated');
    });
}

/**
 * ê°œë³„ í•„ë“œ ìœ íš¨ì„± ê²€ì‚¬
 */
function validateField(field) {
    var value = field.val().trim();
    var isValid = true;
    var errorMessage = '';
    
    // í•„ìˆ˜ ì…ë ¥ ê²€ì‚¬
    if (field.prop('required') && value === '') {
        isValid = false;
        errorMessage = 'í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.';
    }
    
    // ì´ë©”ì¼ í˜•ì‹ ê²€ì‚¬
    if (field.attr('type') === 'email' && value !== '') {
        var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(value)) {
            isValid = false;
            errorMessage = 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.';
        }
    }
    
    // ì „í™”ë²ˆí˜¸ í˜•ì‹ ê²€ì‚¬
    if (field.hasClass('phone-field') && value !== '') {
        var phoneRegex = /^01[016789]-?\d{3,4}-?\d{4}$/;
        if (!phoneRegex.test(value)) {
            isValid = false;
            errorMessage = 'ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.';
        }
    }
    
    // ê²°ê³¼ í‘œì‹œ
    if (isValid) {
        field.removeClass('is-invalid').addClass('is-valid');
        field.siblings('.invalid-feedback').hide();
    } else {
        field.removeClass('is-valid').addClass('is-invalid');
        field.siblings('.invalid-feedback').text(errorMessage).show();
    }
    
    return isValid;
}

/**
 * íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ ì´ˆê¸°í™”
 */
function initFileUpload() {
    $('.file-upload-area').on('dragover', function(e) {
        e.preventDefault();
        $(this).addClass('dragover');
    });
    
    $('.file-upload-area').on('dragleave', function(e) {
        e.preventDefault();
        $(this).removeClass('dragover');
    });
    
    $('.file-upload-area').on('drop', function(e) {
        e.preventDefault();
        $(this).removeClass('dragover');
        
        var files = e.originalEvent.dataTransfer.files;
        handleFileSelect(files, $(this));
    });
    
    $('.file-upload-area input[type="file"]').on('change', function() {
        var files = this.files;
        handleFileSelect(files, $(this).closest('.file-upload-area'));
    });
}

/**
 * íŒŒì¼ ì„ íƒ ì²˜ë¦¬
 */
function handleFileSelect(files, uploadArea) {
    for (var i = 0; i < files.length; i++) {
        var file = files[i];
        
        // íŒŒì¼ í¬ê¸° ê²€ì‚¬ (10MB ì œí•œ)
        if (file.size > 10 * 1024 * 1024) {
            showAlert('íŒŒì¼ í¬ê¸°ëŠ” 10MBë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'warning');
            continue;
        }
        
        // íŒŒì¼ ë¯¸ë¦¬ë³´ê¸° (ì´ë¯¸ì§€ì¸ ê²½ìš°)
        if (file.type.startsWith('image/')) {
            var reader = new FileReader();
            reader.onload = function(e) {
                var preview = $('<img>').attr('src', e.target.result)
                    .css({'max-width': '200px', 'max-height': '200px', 'margin': '10px'});
                uploadArea.find('.file-preview').html(preview);
            };
            reader.readAsDataURL(file);
        }
        
        // íŒŒì¼ ì •ë³´ í‘œì‹œ
        var fileInfo = $('<div class="file-info mt-2"></div>')
            .html('<i class="fas fa-file me-2"></i>' + file.name + ' (' + formatFileSize(file.size) + ')');
        uploadArea.find('.file-list').append(fileInfo);
    }
}

/**
 * ë¡œë”© ìƒíƒœ ê´€ë¦¬ ì´ˆê¸°í™”
 */
function initLoadingState() {
    // í¼ ì œì¶œ ì‹œ ë¡œë”© ìƒíƒœ í‘œì‹œ
    $('form').on('submit', function() {
        var submitBtn = $(this).find('button[type="submit"]');
        var originalText = submitBtn.html();
        
        submitBtn.prop('disabled', true)
            .html('<span class="loading-spinner me-2"></span>ì²˜ë¦¬ì¤‘...');
        
        // 5ì´ˆ í›„ ì›ë˜ ìƒíƒœë¡œ ë³µì› (íƒ€ì„ì•„ì›ƒ ë°©ì§€)
        setTimeout(function() {
            submitBtn.prop('disabled', false).html(originalText);
        }, 5000);
    });
    
    // AJAX ìš”ì²­ ì‹œ ë¡œë”© ìƒíƒœ í‘œì‹œ
    $(document).ajaxStart(function() {
        showLoading();
    }).ajaxStop(function() {
        hideLoading();
    });
}

/**
 * í˜ì´ì§€ ë¡œë”© í‘œì‹œ
 */
function showLoading() {
    if ($('#loadingOverlay').length === 0) {
        var overlay = $('<div id="loadingOverlay" class="position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center" style="background-color: rgba(0,0,0,0.5); z-index: 9999;"></div>');
        var spinner = $('<div class="text-center text-white"></div>')
            .html('<div class="spinner-border mb-3" role="status"></div><br>ë¡œë”©ì¤‘...');
        overlay.append(spinner);
        $('body').append(overlay);
    }
}

/**
 * í˜ì´ì§€ ë¡œë”© ìˆ¨ê¹€
 */
function hideLoading() {
    $('#loadingOverlay').remove();
}

/**
 * ì»¤ìŠ¤í…€ ì•Œë¦¼ í‘œì‹œ
 */
function showAlert(message, type = 'info', autoHide = true) {
    var alertClass = 'alert-' + type;
    var iconClass = {
        'success': 'fa-check-circle',
        'danger': 'fa-exclamation-triangle',
        'warning': 'fa-exclamation-circle',
        'info': 'fa-info-circle'
    }[type] || 'fa-info-circle';
    
    var alert = $('<div class="alert alert-dismissible fade show" role="alert"></div>')
        .addClass(alertClass)
        .html('<i class="fas ' + iconClass + ' me-2"></i>' + message + 
              '<button type="button" class="btn-close" data-bs-dismiss="alert"></button>');
    
    $('.container').first().prepend(alert);
    
    if (autoHide) {
        setTimeout(function() {
            alert.fadeOut('slow', function() {
                $(this).remove();
            });
        }, 5000);
    }
}

/**
 * í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
 */
function showConfirm(message, callback) {
    if (confirm(message)) {
        if (typeof callback === 'function') {
            callback();
        }
        return true;
    }
    return false;
}

/**
 * AJAX ìš”ì²­ ê³µí†µ í•¨ìˆ˜
 */
function ajaxRequest(url, method, data, successCallback, errorCallback) {
    $.ajax({
        url: url,
        method: method || 'GET',
        data: data,
        dataType: 'json',
        success: function(response) {
            if (typeof successCallback === 'function') {
                successCallback(response);
            }
        },
        error: function(xhr, status, error) {
            console.error('AJAX ìš”ì²­ ì‹¤íŒ¨:', error);
            showAlert('ìš”ì²­ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'danger');
            
            if (typeof errorCallback === 'function') {
                errorCallback(xhr, status, error);
            }
        }
    });
}

/**
 * í˜ì´ì§€ë„¤ì´ì…˜ ì²˜ë¦¬
 */
function handlePagination(currentPage, totalPages, baseUrl) {
    var pagination = $('.pagination');
    pagination.empty();
    
    // ì´ì „ ë²„íŠ¼
    if (currentPage > 1) {
        pagination.append('<li class="page-item"><a class="page-link" href="' + baseUrl + '?page=' + (currentPage - 1) + '">&laquo;</a></li>');
    }
    
    // í˜ì´ì§€ ë²ˆí˜¸
    var startPage = Math.max(1, currentPage - 2);
    var endPage = Math.min(totalPages, currentPage + 2);
    
    for (var i = startPage; i <= endPage; i++) {
        var activeClass = i === currentPage ? ' active' : '';
        pagination.append('<li class="page-item' + activeClass + '"><a class="page-link" href="' + baseUrl + '?page=' + i + '">' + i + '</a></li>');
    }
    
    // ë‹¤ìŒ ë²„íŠ¼
    if (currentPage < totalPages) {
        pagination.append('<li class="page-item"><a class="page-link" href="' + baseUrl + '?page=' + (currentPage + 1) + '">&raquo;</a></li>');
    }
}

/**
 * íŒŒì¼ í¬ê¸° í¬ë§·íŒ…
 */
function formatFileSize(bytes) {
    if (bytes === 0) return '0 Bytes';
    var k = 1024;
    var sizes = ['Bytes', 'KB', 'MB', 'GB'];
    var i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
}

/**
 * ë‚ ì§œ í¬ë§·íŒ…
 */
function formatDate(date, format = 'YYYY-MM-DD') {
    if (!date) return '';
    
    var d = new Date(date);
    var year = d.getFullYear();
    var month = String(d.getMonth() + 1).padStart(2, '0');
    var day = String(d.getDate()).padStart(2, '0');
    var hour = String(d.getHours()).padStart(2, '0');
    var minute = String(d.getMinutes()).padStart(2, '0');
    
    return format
        .replace('YYYY', year)
        .replace('MM', month)
        .replace('DD', day)
        .replace('HH', hour)
        .replace('mm', minute);
}

/**
 * ë¬¸ìì—´ ê¸¸ì´ ì œí•œ
 */
function truncateString(str, length) {
    if (!str) return '';
    return str.length > length ? str.substring(0, length) + '...' : str;
}

/**
 * ìˆ«ì í¬ë§·íŒ… (ì½¤ë§ˆ ì¶”ê°€)
 */
function formatNumber(num) {
    return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

/**
 * URL íŒŒë¼ë¯¸í„° ê°€ì ¸ì˜¤ê¸°
 */
function getUrlParameter(name) {
    var url = new URL(window.location.href);
    return url.searchParams.get(name);
}

/**
 * í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ê°•ì œ (ìºì‹œ ë¬´íš¨í™”)
 */
function forceRefresh() {
    // ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ë¬´ì‹œí•˜ê³  ê°•ì œ ìƒˆë¡œê³ ì¹¨
    window.location.reload(true);
}

/**
 * ê²Œì‹œê¸€ ì‚­ì œ í›„ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
 */
function refreshBoardList() {
    // refresh íŒŒë¼ë¯¸í„°ê°€ ìˆìœ¼ë©´ ìºì‹œ ë¬´íš¨í™” í›„ URLì—ì„œ ì œê±°
    var refreshParam = getUrlParameter('refresh');
    if (refreshParam) {
        // URLì—ì„œ refresh íŒŒë¼ë¯¸í„° ì œê±°
        var url = new URL(window.location.href);
        url.searchParams.delete('refresh');
        window.history.replaceState({}, document.title, url.pathname + url.search);
        
        // í˜ì´ì§€ ê°•ì œ ìƒˆë¡œê³ ì¹¨
        setTimeout(function() {
            forceRefresh();
        }, 100);
    }
}

/**
 * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ê´€ë¦¬
 */
var Storage = {
    set: function(key, value) {
        localStorage.setItem(key, JSON.stringify(value));
    },
    get: function(key) {
        var item = localStorage.getItem(key);
        return item ? JSON.parse(item) : null;
    },
    remove: function(key) {
        localStorage.removeItem(key);
    },
    clear: function() {
        localStorage.clear();
    }
};
````

## File: src/main/resources/static/js/facility-image-seo-module.js
````javascript
/**
 * ì‹œì„¤ ì´ë¯¸ì§€ SEO ëª¨ë“ˆ (SEO Module)
 * SEO ìµœì í™”, í‚¤ì›Œë“œ ê´€ë¦¬, Alt í…ìŠ¤íŠ¸ ìƒì„± ì „ìš© ëª¨ë“ˆ
 * 
 * @version 1.0.0
 * @author LightCare Team
 * @requires FacilityImageCore
 */

(function() {
    'use strict';
    
    if (!window.FacilityImageCore) {
        throw new Error('FacilityImageCore ëª¨ë“ˆì´ í•„ìš”í•©ë‹ˆë‹¤.');
    }
    
    const Core = window.FacilityImageCore;
    
    if (!window.FacilityImageSystem.SEO) {
        window.FacilityImageSystem.SEO = {};
    }
    
    // ================================================
    // ìƒìˆ˜ ì •ì˜
    // ================================================
    
    const SEO_CONSTANTS = {
        MODULE_NAME: 'FacilityImageSEO',
        VERSION: '1.0.0',
        
        KEYWORDS: {
            FACILITY: ['ì‹œì„¤', 'facility', 'care facility'],
            NURSING_HOME: ['ìš”ì–‘ì›', 'nursing home', 'senior care'],
            HOSPITAL: ['ë³‘ì›', 'hospital', 'medical center'],
            INTERIOR: ['ë‚´ë¶€', 'interior', 'inside'],
            EXTERIOR: ['ì™¸ê´€', 'exterior', 'building'],
            ROOM: ['ë°©', 'room', 'resident room'],
            DINING: ['ì‹ë‹¹', 'dining room', 'meal area'],
            GARDEN: ['ì •ì›', 'garden', 'outdoor'],
            CLEAN: ['ê¹¨ë—í•œ', 'clean', 'hygienic'],
            BRIGHT: ['ë°ì€', 'bright', 'well-lit'],
            MODERN: ['í˜„ëŒ€ì ', 'modern', 'contemporary']
        },
        
        MAX_FILENAME_LENGTH: 100,
        MAX_ALT_TEXT_LENGTH: 200,
        KEYWORD_SEPARATOR: '-'
    };
    
    // ================================================
    // SEO ìƒíƒœ ê´€ë¦¬
    // ================================================
    
    const seoState = {
        isInitialized: false,
        facilityName: '',
        selectedKeywords: [],
        autoGeneratedNames: new Map(),
        autoGeneratedAlts: new Map()
    };
    
    // ================================================
    // í‚¤ì›Œë“œ ê´€ë¦¬
    // ================================================
    
    const keywordManager = {
        getKeywordsByCategory() {
            return {
                'ì‹œì„¤ ì¢…ë¥˜': SEO_CONSTANTS.KEYWORDS.FACILITY.concat(SEO_CONSTANTS.KEYWORDS.NURSING_HOME),
                'ê³µê°„': SEO_CONSTANTS.KEYWORDS.INTERIOR.concat(SEO_CONSTANTS.KEYWORDS.ROOM, SEO_CONSTANTS.KEYWORDS.DINING),
                'íŠ¹ì§•': SEO_CONSTANTS.KEYWORDS.CLEAN.concat(SEO_CONSTANTS.KEYWORDS.BRIGHT, SEO_CONSTANTS.KEYWORDS.MODERN),
                'ê¸°íƒ€': SEO_CONSTANTS.KEYWORDS.GARDEN.concat(SEO_CONSTANTS.KEYWORDS.EXTERIOR)
            };
        },
        
        getAllKeywords() {
            return Object.values(SEO_CONSTANTS.KEYWORDS).flat();
        },
        
        searchKeywords(query) {
            const allKeywords = this.getAllKeywords();
            return allKeywords.filter(keyword => 
                keyword.toLowerCase().includes(query.toLowerCase())
            );
        },
        
        selectKeyword(keyword) {
            if (!keyword || typeof keyword !== 'string') return;
            
            // ì„ íƒëœ í‚¤ì›Œë“œ ëª©ë¡ì— ì¶”ê°€
            if (!seoState.selectedKeywords.includes(keyword)) {
                seoState.selectedKeywords.push(keyword);
                Core.logger.log('í‚¤ì›Œë“œ ì„ íƒë¨:', keyword);
            }
        },
        
        deselectKeyword(keyword) {
            const index = seoState.selectedKeywords.indexOf(keyword);
            if (index > -1) {
                seoState.selectedKeywords.splice(index, 1);
                Core.logger.log('í‚¤ì›Œë“œ ì„ íƒ í•´ì œë¨:', keyword);
            }
        },
        
        addCustomKeyword(keyword) {
            if (!seoState.selectedKeywords.includes(keyword)) {
                seoState.selectedKeywords.push(keyword);
                Core.logger.log('ì»¤ìŠ¤í…€ í‚¤ì›Œë“œ ì¶”ê°€:', keyword);
            }
        },
        
        removeKeyword(keyword) {
            seoState.selectedKeywords = seoState.selectedKeywords.filter(k => k !== keyword);
            Core.logger.log('í‚¤ì›Œë“œ ì œê±°:', keyword);
        },
        
        getSelectedKeywords() {
            return [...seoState.selectedKeywords];
        }
    };
    
    // ================================================
    // íŒŒì¼ëª… ìƒì„±
    // ================================================
    
    const fileNameGenerator = {
        generateSEOFileName(originalName, keywords = [], index = 0) {
            // ì…ë ¥ê°’ ê²€ì¦
            if (!originalName || typeof originalName !== 'string') {
                originalName = 'image.jpg';
            }
            
            const baseName = this.cleanFileName(originalName);
            const keywordString = keywords.slice(0, 3).join(SEO_CONSTANTS.KEYWORD_SEPARATOR);
            const facilityPart = this.convertKoreanToEnglish(seoState.facilityName);
            
            let seoName = '';
            
            if (facilityPart) {
                seoName += facilityPart + SEO_CONSTANTS.KEYWORD_SEPARATOR;
            }
            
            if (keywordString) {
                seoName += keywordString + SEO_CONSTANTS.KEYWORD_SEPARATOR;
            }
            
            if (index > 0) {
                seoName += `${index + 1}${SEO_CONSTANTS.KEYWORD_SEPARATOR}`;
            }
            
            seoName += baseName;
            
            // ê¸¸ì´ ì œí•œ
            if (seoName.length > SEO_CONSTANTS.MAX_FILENAME_LENGTH) {
                const extension = this.getFileExtension(originalName);
                const maxNameLength = SEO_CONSTANTS.MAX_FILENAME_LENGTH - extension.length;
                seoName = seoName.substring(0, maxNameLength) + extension;
            }
            
            return seoName.toLowerCase();
        },
        
        cleanFileName(fileName) {
            // ì…ë ¥ê°’ ê²€ì¦
            if (!fileName || typeof fileName !== 'string') {
                return 'image';
            }
            
            // í™•ì¥ì ë¶„ë¦¬
            const lastDotIndex = fileName.lastIndexOf('.');
            const nameWithoutExt = lastDotIndex > 0 ? fileName.substring(0, lastDotIndex) : fileName;
            const extension = lastDotIndex > 0 ? fileName.substring(lastDotIndex) : '';
            
            // í•œê¸€ ë° íŠ¹ìˆ˜ë¬¸ì ì œê±°
            const cleanName = nameWithoutExt
                .replace(/[ê°€-í£]/g, '') // í•œê¸€ ì œê±°
                .replace(/[^a-zA-Z0-9-_]/g, '') // ì˜ë¬¸, ìˆ«ì, í•˜ì´í”ˆ, ì–¸ë”ìŠ¤ì½”ì–´ë§Œ ìœ ì§€
                .replace(/[-_]+/g, '-') // ì—°ì†ëœ êµ¬ë¶„ìë¥¼ í•˜ë‚˜ë¡œ í†µí•©
                .replace(/^[-_]+|[-_]+$/g, ''); // ì‹œì‘ê³¼ ëì˜ êµ¬ë¶„ì ì œê±°
            
            return cleanName || 'image';
        },
        
        getFileExtension(fileName) {
            const lastDotIndex = fileName.lastIndexOf('.');
            return lastDotIndex > 0 ? fileName.substring(lastDotIndex) : '.jpg';
        },
        
        convertKoreanToEnglish(korean) {
            const koreanToEnglish = {
                'ìš”ì–‘ì›': 'nursing-home',
                'ë³‘ì›': 'hospital',
                'ì‹œì„¤': 'facility',
                'ì¼€ì–´': 'care',
                'ì„¼í„°': 'center',
                'ì˜ë£Œ': 'medical',
                'ë³µì§€': 'welfare',
                'ì‹¤ë²„': 'silver',
                'íƒ€ìš´': 'town'
            };
            
            let result = korean.toLowerCase();
            
            Object.entries(koreanToEnglish).forEach(([ko, en]) => {
                result = result.replace(new RegExp(ko, 'g'), en);
            });
            
            // ë‚¨ì€ í•œê¸€ ì œê±°
            result = result.replace(/[ê°€-í£]/g, '');
            
            return result.replace(/[^a-zA-Z0-9-]/g, '').replace(/-+/g, '-').replace(/^-+|-+$/g, '');
        }
    };
    
    // ================================================
    // Alt í…ìŠ¤íŠ¸ ìƒì„±
    // ================================================
    
    const altTextGenerator = {
        generateAltText(fileName, keywords = [], index = 0) {
            let altText = '';
            
            // ì‹œì„¤ëª… ì¶”ê°€
            if (seoState.facilityName) {
                altText += seoState.facilityName;
            }
            
            // í‚¤ì›Œë“œ ì¶”ê°€
            if (keywords.length > 0) {
                const koreanKeywords = keywords.filter(k => /[ê°€-í£]/.test(k));
                if (koreanKeywords.length > 0) {
                    altText += ' ' + koreanKeywords.slice(0, 2).join(' ');
                }
            }
            
            // íŒŒì¼ëª…ì—ì„œ ì¶”ì¶œí•œ ì •ë³´ ì¶”ê°€
            const fileInfo = this.extractInfoFromFileName(fileName);
            if (fileInfo) {
                altText += ' ' + fileInfo;
            }
            
            // ê¸°ë³¸ ì„¤ëª… ì¶”ê°€
            altText += ' ì‚¬ì§„';
            
            // ì¸ë±ìŠ¤ ì¶”ê°€
            if (index > 0) {
                altText += ` ${index + 1}`;
            }
            
            // ê¸¸ì´ ì œí•œ
            if (altText.length > SEO_CONSTANTS.MAX_ALT_TEXT_LENGTH) {
                altText = altText.substring(0, SEO_CONSTANTS.MAX_ALT_TEXT_LENGTH - 3) + '...';
            }
            
            return altText.trim();
        },
        
        extractInfoFromFileName(fileName) {
            const nameWithoutExt = fileName.replace(/\.[^/.]+$/, '');
            const parts = nameWithoutExt.split(/[-_]/);
            
            const meaningfulParts = parts.filter(part => 
                part.length > 2 && 
                !part.match(/^\d+$/) && // ìˆ«ìë§Œ ìˆëŠ” ë¶€ë¶„ ì œì™¸
                !part.match(/^(img|image|photo|pic)$/i) // ì¼ë°˜ì ì¸ ì´ë¯¸ì§€ ìš©ì–´ ì œì™¸
            );
            
            return meaningfulParts.slice(0, 2).join(' ');
        },
        
        optimizeAltText(altText) {
            // ì¤‘ë³µ ë‹¨ì–´ ì œê±°
            const words = altText.split(' ');
            const uniqueWords = [...new Set(words)];
            
            // ë¶ˆí•„ìš”í•œ ë‹¨ì–´ ì œê±°
            const stopWords = ['ì˜', 'ì„', 'ë¥¼', 'ì´', 'ê°€', 'ì—ì„œ', 'ì—ê²Œ', 'ë¡œ', 'ìœ¼ë¡œ'];
            const filteredWords = uniqueWords.filter(word => !stopWords.includes(word));
            
            return filteredWords.join(' ').trim();
        }
    };
    
    // ================================================
    // SEO ë¶„ì„
    // ================================================
    
    const seoAnalyzer = {
        analyzeFileName(fileName) {
            const score = {
                total: 0,
                details: [],
                recommendations: []
            };
            
            // íŒŒì¼ëª… ê¸¸ì´ ì²´í¬
            if (fileName.length <= SEO_CONSTANTS.MAX_FILENAME_LENGTH) {
                score.total += 20;
                score.details.push('ì ì ˆí•œ íŒŒì¼ëª… ê¸¸ì´');
            } else {
                score.recommendations.push('íŒŒì¼ëª…ì´ ë„ˆë¬´ ê¹ë‹ˆë‹¤.');
            }
            
            // í•œê¸€ ì‚¬ìš© ì²´í¬
            if (!/[ê°€-í£]/.test(fileName)) {
                score.total += 30;
                score.details.push('ì˜ë¬¸ íŒŒì¼ëª… ì‚¬ìš©');
            } else {
                score.recommendations.push('í•œê¸€ ëŒ€ì‹  ì˜ë¬¸ íŒŒì¼ëª…ì„ ì‚¬ìš©í•˜ì„¸ìš”.');
            }
            
            // í‚¤ì›Œë“œ í¬í•¨ ì²´í¬
            const hasKeywords = keywordManager.getAllKeywords().some(keyword => 
                fileName.toLowerCase().includes(keyword.toLowerCase())
            );
            
            if (hasKeywords) {
                score.total += 30;
                score.details.push('ê´€ë ¨ í‚¤ì›Œë“œ í¬í•¨');
            } else {
                score.recommendations.push('ê´€ë ¨ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ì„¸ìš”.');
            }
            
            // êµ¬ë¶„ì ì‚¬ìš© ì²´í¬
            if (fileName.includes('-') || fileName.includes('_')) {
                score.total += 20;
                score.details.push('ì ì ˆí•œ êµ¬ë¶„ì ì‚¬ìš©');
            } else {
                score.recommendations.push('ë‹¨ì–´ êµ¬ë¶„ì„ ìœ„í•´ í•˜ì´í”ˆ(-)ì„ ì‚¬ìš©í•˜ì„¸ìš”.');
            }
            
            return score;
        },
        
        analyzeAltText(altText) {
            const score = {
                total: 0,
                details: [],
                recommendations: []
            };
            
            // Alt í…ìŠ¤íŠ¸ ê¸¸ì´ ì²´í¬
            if (altText.length >= 10 && altText.length <= SEO_CONSTANTS.MAX_ALT_TEXT_LENGTH) {
                score.total += 30;
                score.details.push('ì ì ˆí•œ Alt í…ìŠ¤íŠ¸ ê¸¸ì´');
            } else if (altText.length < 10) {
                score.recommendations.push('Alt í…ìŠ¤íŠ¸ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤.');
            } else {
                score.recommendations.push('Alt í…ìŠ¤íŠ¸ê°€ ë„ˆë¬´ ê¹ë‹ˆë‹¤.');
            }
            
            // ì‹œì„¤ëª… í¬í•¨ ì²´í¬
            if (seoState.facilityName && altText.includes(seoState.facilityName)) {
                score.total += 25;
                score.details.push('ì‹œì„¤ëª… í¬í•¨');
            } else {
                score.recommendations.push('ì‹œì„¤ëª…ì„ í¬í•¨í•˜ì„¸ìš”.');
            }
            
            // í‚¤ì›Œë“œ í¬í•¨ ì²´í¬
            const hasKeywords = keywordManager.getAllKeywords().some(keyword => 
                altText.toLowerCase().includes(keyword.toLowerCase())
            );
            
            if (hasKeywords) {
                score.total += 25;
                score.details.push('ê´€ë ¨ í‚¤ì›Œë“œ í¬í•¨');
            } else {
                score.recommendations.push('ê´€ë ¨ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ì„¸ìš”.');
            }
            
            // ìì—°ìŠ¤ëŸ¬ìš´ ë¬¸ì¥ ì²´í¬
            if (altText.includes(' ') && !altText.includes('___') && !altText.includes('---')) {
                score.total += 20;
                score.details.push('ìì—°ìŠ¤ëŸ¬ìš´ ë¬¸ì¥ êµ¬ì„±');
            } else {
                score.recommendations.push('ìì—°ìŠ¤ëŸ¬ìš´ ë¬¸ì¥ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”.');
            }
            
            return score;
        }
    };
    
    // ================================================
    // ë©”ì¸ SEO ê°ì²´
    // ================================================
    
    const seo = {
        initialize(facilityName = '', options = {}) {
            if (seoState.isInitialized) {
                Core.logger.warn('SEO ëª¨ë“ˆì´ ì´ë¯¸ ì´ˆê¸°í™”ë¨');
                return true;
            }
            
            Core.logger.log('SEO ëª¨ë“ˆ ì´ˆê¸°í™” ì‹œì‘');
            
            try {
                seoState.facilityName = facilityName;
                seoState.selectedKeywords = [];
                
                seoState.isInitialized = true;
                Core.logger.success('SEO ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                
                return true;
            } catch (error) {
                Core.logger.error('SEO ëª¨ë“ˆ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                return false;
            }
        },
        
        generateFileName(originalName, keywords = [], index = 0) {
            const fileName = fileNameGenerator.generateSEOFileName(originalName, keywords, index);
            seoState.autoGeneratedNames.set(originalName, fileName);
            return fileName;
        },
        
        generateAltText(fileName, keywords = [], index = 0) {
            const altText = altTextGenerator.generateAltText(fileName, keywords, index);
            const optimizedAltText = altTextGenerator.optimizeAltText(altText);
            seoState.autoGeneratedAlts.set(fileName, optimizedAltText);
            return optimizedAltText;
        },
        
        addKeyword(keyword) {
            keywordManager.addCustomKeyword(keyword);
        },
        
        removeKeyword(keyword) {
            keywordManager.removeKeyword(keyword);
        },
        
        getKeywords() {
            return keywordManager.getSelectedKeywords();
        },
        
        searchKeywords(query) {
            return keywordManager.searchKeywords(query);
        },
        
        analyzeFileName(fileName) {
            return seoAnalyzer.analyzeFileName(fileName);
        },
        
        analyzeAltText(altText) {
            return seoAnalyzer.analyzeAltText(altText);
        },
        
        getOptimizationSuggestions(fileName, altText) {
            const fileAnalysis = this.analyzeFileName(fileName);
            const altAnalysis = this.analyzeAltText(altText);
            
            return {
                fileName: fileAnalysis,
                altText: altAnalysis,
                overallScore: Math.round((fileAnalysis.total + altAnalysis.total) / 2)
            };
        },
        
        bulkOptimize(files) {
            return files.map((file, index) => {
                const optimizedFileName = this.generateFileName(file.name, seoState.selectedKeywords, index);
                const optimizedAltText = this.generateAltText(optimizedFileName, seoState.selectedKeywords, index);
                
                return {
                    ...file,
                    seoFileName: optimizedFileName,
                    altText: optimizedAltText,
                    seoScore: this.getOptimizationSuggestions(optimizedFileName, optimizedAltText)
                };
            });
        },
        
        destroy() {
            seoState.isInitialized = false;
            seoState.facilityName = '';
            seoState.selectedKeywords = [];
            seoState.autoGeneratedNames.clear();
            seoState.autoGeneratedAlts.clear();
            
            Core.logger.log('SEO ëª¨ë“ˆ ì œê±° ì™„ë£Œ');
        },
        
        getInfo() {
            return {
                name: SEO_CONSTANTS.MODULE_NAME,
                version: SEO_CONSTANTS.VERSION,
                isInitialized: seoState.isInitialized,
                facilityName: seoState.facilityName,
                selectedKeywordsCount: seoState.selectedKeywords.length,
                generatedNamesCount: seoState.autoGeneratedNames.size
            };
        }
    };
    
    // ================================================
    // ëª¨ë“ˆ ë…¸ì¶œ
    // ================================================
    
    window.FacilityImageSystem.SEO = {
        CONSTANTS: SEO_CONSTANTS,
        seo,
        keywordManager,
        fileNameGenerator,
        altTextGenerator,
        seoAnalyzer,
        getState: () => ({ ...seoState }),
        initialize: seo.initialize.bind(seo),
        generateFileName: seo.generateFileName.bind(seo),
        generateAltText: seo.generateAltText.bind(seo),
        addKeyword: seo.addKeyword.bind(seo),
        removeKeyword: seo.removeKeyword.bind(seo),
        getKeywords: seo.getKeywords.bind(seo),
        analyzeFileName: seo.analyzeFileName.bind(seo),
        analyzeAltText: seo.analyzeAltText.bind(seo),
        bulkOptimize: seo.bulkOptimize.bind(seo),
        destroy: seo.destroy.bind(seo),
        cleanFileName: fileNameGenerator.cleanFileName.bind(fileNameGenerator),
        selectKeyword: keywordManager.selectKeyword.bind(keywordManager),
        deselectKeyword: keywordManager.deselectKeyword.bind(keywordManager)
    };
    
    window.FacilityImageSEO = window.FacilityImageSystem.SEO;
    
    Core.logger.log('SEO ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');
    
})();
````

## File: src/main/resources/static/js/facility-image-ui-module.js
````javascript
/**
 * ì‹œì„¤ ì´ë¯¸ì§€ UI ëª¨ë“ˆ (UI Module)
 * DOM ì¡°ì‘, ì´ë²¤íŠ¸ ì²˜ë¦¬, í”„ë¡œê·¸ë ˆìŠ¤ í‘œì‹œ ì „ìš© ëª¨ë“ˆ
 * 
 * @version 1.0.0
 * @author LightCare Team
 * @requires FacilityImageCore
 */

(function() {
    'use strict';
    
    if (!window.FacilityImageCore) {
        throw new Error('FacilityImageCore ëª¨ë“ˆì´ í•„ìš”í•©ë‹ˆë‹¤.');
    }
    
    const Core = window.FacilityImageCore;
    
    if (!window.FacilityImageSystem.UI) {
        window.FacilityImageSystem.UI = {};
    }
    
    // ================================================
    // ìƒìˆ˜ ì •ì˜
    // ================================================
    
    const UI_CONSTANTS = {
        MODULE_NAME: 'FacilityImageUI',
        VERSION: '1.0.0',
        
        NOTIFICATION_TYPES: {
            INFO: 'info',
            SUCCESS: 'success',
            WARNING: 'warning',
            ERROR: 'error'
        },
        
        ANIMATION_DURATION: 300,
        NOTIFICATION_TIMEOUT: 5000
    };
    
    // ================================================
    // UI ìƒíƒœ ê´€ë¦¬
    // ================================================
    
    const uiState = {
        isInitialized: false,
        activeNotifications: [],
        stepIndicators: [],
        progressBars: [],
        elements: {
            stepContainer: null,
            mainContainer: null,
            notificationContainer: null
        }
    };
    
    // ================================================
    // ë‹¨ê³„ í‘œì‹œê¸° ê´€ë¦¬
    // ================================================
    
    const stepIndicator = {
        initialize() {
            const container = document.querySelector('.steps-indicator, #stepsIndicator');
            if (!container) {
                this.createStepIndicator();
            } else {
                uiState.elements.stepContainer = container;
            }
            this.setupStepEvents();
        },
        
        createStepIndicator() {
            const html = `
                <div class="steps-indicator mb-4" id="stepsIndicator">
                    <div class="step-item active" data-step="1">
                        <div class="step-circle"><i class="fas fa-upload"></i></div>
                        <div class="step-label">ì´ë¯¸ì§€ ì„ íƒ</div>
                    </div>
                    <div class="step-connector"></div>
                    <div class="step-item" data-step="2">
                        <div class="step-circle"><i class="fas fa-crop-alt"></i></div>
                        <div class="step-label">í¬ë¡­ & ì¡°ì •</div>
                    </div>
                    <div class="step-connector"></div>
                    <div class="step-item" data-step="3">
                        <div class="step-circle"><i class="fas fa-check"></i></div>
                        <div class="step-label">ì™„ë£Œ</div>
                    </div>
                </div>
            `;
            
            // ë” ì•ˆì „í•œ ì»¨í…Œì´ë„ˆ ì„ íƒ ë¡œì§
            let container = document.querySelector('#uploadSection, .upload-section, .content-wrapper, main, .container, body');
            if (!container) {
                container = document.body;
                Core.logger.warn('ê¸°ë³¸ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');
            }
            
            try {
                container.insertAdjacentHTML('afterbegin', html);
                uiState.elements.stepContainer = document.getElementById('stepsIndicator');
                Core.logger.success('ë‹¨ê³„ í‘œì‹œê¸° ìƒì„± ì™„ë£Œ');
            } catch (error) {
                Core.logger.error('ë‹¨ê³„ í‘œì‹œê¸° ìƒì„± ì‹¤íŒ¨:', error);
                // ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ bodyì— ì§ì ‘ ì¶”ê°€
                try {
                    document.body.insertAdjacentHTML('afterbegin', html);
                    uiState.elements.stepContainer = document.getElementById('stepsIndicator');
                    Core.logger.success('ë‹¨ê³„ í‘œì‹œê¸° ëŒ€ì²´ ìƒì„± ì™„ë£Œ');
                } catch (fallbackError) {
                    Core.logger.error('ë‹¨ê³„ í‘œì‹œê¸° ëŒ€ì²´ ìƒì„±ë„ ì‹¤íŒ¨:', fallbackError);
                }
            }
        },
        
        setupStepEvents() {
            Core.on(Core.CONSTANTS.EVENTS.STEP_CHANGED, (data) => {
                this.updateStep(data.newStep);
            });
        },
        
        updateStep(step) {
            const steps = document.querySelectorAll('.step-item');
            steps.forEach((stepEl, index) => {
                const stepNumber = index + 1;
                if (stepNumber <= step) {
                    stepEl.classList.add('active');
                    if (stepNumber < step) {
                        stepEl.classList.add('completed');
                    }
                } else {
                    stepEl.classList.remove('active', 'completed');
                }
            });
        }
    };
    
    // ================================================
    // í”„ë¡œê·¸ë ˆìŠ¤ ê´€ë¦¬
    // ================================================
    
    const progressManager = {
        show(id, message = 'ì²˜ë¦¬ ì¤‘...') {
            const progressHtml = `
                <div class="progress-container" id="progress-${id}">
                    <div class="progress-message mb-2">${message}</div>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                    </div>
                    <div class="progress-percentage text-center mt-1">0%</div>
                </div>
            `;
            
            const container = this.getProgressContainer();
            container.insertAdjacentHTML('beforeend', progressHtml);
            
            return document.getElementById(`progress-${id}`);
        },
        
        update(id, percentage, message = null) {
            const progressElement = document.getElementById(`progress-${id}`);
            if (!progressElement) return;
            
            const bar = progressElement.querySelector('.progress-bar');
            const text = progressElement.querySelector('.progress-percentage');
            const messageEl = progressElement.querySelector('.progress-message');
            
            if (bar) {
                bar.style.width = percentage + '%';
                bar.setAttribute('aria-valuenow', percentage);
            }
            
            if (text) {
                text.textContent = percentage + '%';
            }
            
            if (message && messageEl) {
                messageEl.textContent = message;
            }
        },
        
        hide(id) {
            const element = document.getElementById(`progress-${id}`);
            if (element) {
                element.style.opacity = '0';
                setTimeout(() => {
                    if (element.parentElement) {
                        element.parentElement.removeChild(element);
                    }
                }, UI_CONSTANTS.ANIMATION_DURATION);
            }
        },
        
        getProgressContainer() {
            let container = document.querySelector('#progressContainer');
            if (!container) {
                container = document.createElement('div');
                container.id = 'progressContainer';
                container.className = 'progress-container-wrapper';
                document.body.appendChild(container);
            }
            return container;
        }
    };
    
    // ================================================
    // ì•Œë¦¼ ì‹œìŠ¤í…œ
    // ================================================
    
    const notificationManager = {
        show(message, type = UI_CONSTANTS.NOTIFICATION_TYPES.INFO, timeout = UI_CONSTANTS.NOTIFICATION_TIMEOUT) {
            try {
                const id = Core.utils.generateUniqueId();
                const typeClass = this.getTypeClass(type);
                const icon = this.getTypeIcon(type);
                
                const notificationHtml = `
                    <div class="alert alert-${typeClass} alert-dismissible fade show" id="notification-${id}" 
                         style="position: fixed; top: 20px; right: 20px; z-index: 1060; max-width: 400px;">
                        <i class="${icon} me-2"></i>
                        ${message}
                        <button type="button" class="btn-close" onclick="FacilityImageUI.dismissNotification('${id}')"></button>
                    </div>
                `;
                
                const container = this.getNotificationContainer();
                if (container) {
                    container.insertAdjacentHTML('beforeend', notificationHtml);
                    uiState.activeNotifications.push(id);
                    
                    if (timeout > 0) {
                        setTimeout(() => {
                            this.dismiss(id);
                        }, timeout);
                    }
                    
                    return id;
                } else {
                    // ì»¨í…Œì´ë„ˆê°€ ì—†ìœ¼ë©´ ì½˜ì†”ì— ë©”ì‹œì§€ ì¶œë ¥
                    Core.logger.log(`ì•Œë¦¼: ${message}`);
                    return null;
                }
            } catch (error) {
                Core.logger.error('ì•Œë¦¼ í‘œì‹œ ì‹¤íŒ¨:', error);
                // ë¸Œë¼ìš°ì € ê¸°ë³¸ ì•Œë¦¼ ì‚¬ìš©
                try {
                    alert(message);
                } catch (alertError) {
                    Core.logger.error('ê¸°ë³¸ ì•Œë¦¼ë„ ì‹¤íŒ¨:', alertError);
                }
                return null;
            }
        },
        
        dismiss(id) {
            const notification = document.getElementById(`notification-${id}`);
            if (notification) {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.parentElement.removeChild(notification);
                    }
                }, UI_CONSTANTS.ANIMATION_DURATION);
            }
            
            uiState.activeNotifications = uiState.activeNotifications.filter(nId => nId !== id);
        },
        
        getTypeClass(type) {
            switch (type) {
                case UI_CONSTANTS.NOTIFICATION_TYPES.SUCCESS: return 'success';
                case UI_CONSTANTS.NOTIFICATION_TYPES.WARNING: return 'warning';
                case UI_CONSTANTS.NOTIFICATION_TYPES.ERROR: return 'danger';
                default: return 'info';
            }
        },
        
        getTypeIcon(type) {
            switch (type) {
                case UI_CONSTANTS.NOTIFICATION_TYPES.SUCCESS: return 'fas fa-check-circle';
                case UI_CONSTANTS.NOTIFICATION_TYPES.WARNING: return 'fas fa-exclamation-triangle';
                case UI_CONSTANTS.NOTIFICATION_TYPES.ERROR: return 'fas fa-times-circle';
                default: return 'fas fa-info-circle';
            }
        },
        
        getNotificationContainer() {
            let container = uiState.elements.notificationContainer;
            if (!container) {
                container = document.createElement('div');
                container.id = 'notificationContainer';
                container.className = 'notification-container';
                document.body.appendChild(container);
                uiState.elements.notificationContainer = container;
            }
            return container;
        }
    };
    
    // ================================================
    // DOM ìœ í‹¸ë¦¬í‹°
    // ================================================
    
    const domUtils = {
        show(element, animation = true) {
            if (typeof element === 'string') {
                element = document.querySelector(element);
            }
            
            if (element) {
                if (animation) {
                    element.style.opacity = '0';
                    element.style.display = 'block';
                    setTimeout(() => {
                        element.style.opacity = '1';
                    }, 10);
                } else {
                    element.style.display = 'block';
                }
            }
        },
        
        hide(element, animation = true) {
            if (typeof element === 'string') {
                element = document.querySelector(element);
            }
            
            if (element) {
                if (animation) {
                    element.style.opacity = '0';
                    setTimeout(() => {
                        element.style.display = 'none';
                    }, UI_CONSTANTS.ANIMATION_DURATION);
                } else {
                    element.style.display = 'none';
                }
            }
        },
        
        toggle(element, animation = true) {
            if (typeof element === 'string') {
                element = document.querySelector(element);
            }
            
            if (element) {
                const isVisible = element.style.display !== 'none' && 
                                element.offsetParent !== null;
                
                if (isVisible) {
                    this.hide(element, animation);
                } else {
                    this.show(element, animation);
                }
            }
        },
        
        addClass(element, className) {
            if (typeof element === 'string') {
                element = document.querySelector(element);
            }
            if (element) {
                element.classList.add(className);
            }
        },
        
        removeClass(element, className) {
            if (typeof element === 'string') {
                element = document.querySelector(element);
            }
            if (element) {
                element.classList.remove(className);
            }
        },
        
        toggleClass(element, className) {
            if (typeof element === 'string') {
                element = document.querySelector(element);
            }
            if (element) {
                element.classList.toggle(className);
            }
        }
    };
    
    // ================================================
    // ì´ë²¤íŠ¸ ê´€ë¦¬
    // ================================================
    
    const eventManager = {
        setupGlobalEvents() {
            // Core ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            Core.on(Core.CONSTANTS.EVENTS.ERROR, (data) => {
                notificationManager.show(data.message, UI_CONSTANTS.NOTIFICATION_TYPES.ERROR);
            });
            
            Core.on(Core.CONSTANTS.EVENTS.SUCCESS, (data) => {
                notificationManager.show(data.message, UI_CONSTANTS.NOTIFICATION_TYPES.SUCCESS);
            });
            
            // ì§„í–‰ë¥  ì´ë²¤íŠ¸
            Core.on('uploadProgress', (data) => {
                progressManager.update('upload', data.percentage, data.message);
            });
            
            Core.on('uploadStart', () => {
                progressManager.show('upload', 'ì—…ë¡œë“œ ì¤‘...');
            });
            
            Core.on('uploadComplete', () => {
                progressManager.hide('upload');
                notificationManager.show('ì—…ë¡œë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', UI_CONSTANTS.NOTIFICATION_TYPES.SUCCESS);
            });
        }
    };
    
    // ================================================
    // ë©”ì¸ UI ê°ì²´
    // ================================================
    
    const ui = {
        async initialize(options = {}) {
            if (uiState.isInitialized) {
                Core.logger.warn('UI ëª¨ë“ˆì´ ì´ë¯¸ ì´ˆê¸°í™”ë¨');
                return true;
            }
            
            Core.logger.log('UI ëª¨ë“ˆ ì´ˆê¸°í™” ì‹œì‘');
            
            try {
                // DOMì´ ì¤€ë¹„ë  ë•Œê¹Œì§€ ëŒ€ê¸°
                await this.waitForDOM();
                
                stepIndicator.initialize();
                eventManager.setupGlobalEvents();
                this.setupStyles();
                
                uiState.isInitialized = true;
                Core.logger.success('UI ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                
                return true;
            } catch (error) {
                Core.logger.error('UI ëª¨ë“ˆ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                return false;
            }
        },
        
        // DOM ì¤€ë¹„ ëŒ€ê¸°
        async waitForDOM() {
            return new Promise((resolve) => {
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', resolve);
                } else {
                    resolve();
                }
            });
        },
        
        setupStyles() {
            const styles = `
                <style id="facility-ui-styles">
                .steps-indicator {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    margin-bottom: 2rem;
                }
                .step-item {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    position: relative;
                }
                .step-circle {
                    width: 50px;
                    height: 50px;
                    border-radius: 50%;
                    background: #dee2e6;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    margin-bottom: 8px;
                    transition: all 0.3s ease;
                }
                .step-item.active .step-circle {
                    background: #007bff;
                    color: white;
                }
                .step-item.completed .step-circle {
                    background: #28a745;
                    color: white;
                }
                .step-connector {
                    width: 80px;
                    height: 2px;
                    background: #dee2e6;
                    margin: 0 20px;
                    margin-bottom: 25px;
                }
                .step-label {
                    font-size: 0.875rem;
                    color: #6c757d;
                    text-align: center;
                }
                .step-item.active .step-label {
                    color: #007bff;
                    font-weight: 500;
                }
                </style>
            `;
            
            if (!document.getElementById('facility-ui-styles')) {
                document.head.insertAdjacentHTML('beforeend', styles);
            }
        },
        
        showNotification(message, type, timeout) {
            return notificationManager.show(message, type, timeout);
        },
        
        dismissNotification(id) {
            notificationManager.dismiss(id);
        },
        
        showProgress(id, message) {
            return progressManager.show(id, message);
        },
        
        updateProgress(id, percentage, message) {
            progressManager.update(id, percentage, message);
        },
        
        hideProgress(id) {
            progressManager.hide(id);
        },
        
        updateStep(step) {
            stepIndicator.updateStep(step);
        },
        
        show: domUtils.show,
        hide: domUtils.hide,
        toggle: domUtils.toggle,
        addClass: domUtils.addClass,
        removeClass: domUtils.removeClass,
        toggleClass: domUtils.toggleClass,
        
        destroy() {
            uiState.activeNotifications.forEach(id => {
                notificationManager.dismiss(id);
            });
            
            const containers = [
                '#stepsIndicator',
                '#progressContainer',
                '#notificationContainer',
                '#facility-ui-styles'
            ];
            
            containers.forEach(selector => {
                const element = document.querySelector(selector);
                if (element && element.parentElement) {
                    element.parentElement.removeChild(element);
                }
            });
            
            uiState.isInitialized = false;
            Core.logger.log('UI ëª¨ë“ˆ ì œê±° ì™„ë£Œ');
        },
        
        getInfo() {
            return {
                name: UI_CONSTANTS.MODULE_NAME,
                version: UI_CONSTANTS.VERSION,
                isInitialized: uiState.isInitialized,
                activeNotifications: uiState.activeNotifications.length
            };
        }
    };
    
    // ================================================
    // ëª¨ë“ˆ ë…¸ì¶œ
    // ================================================
    
    window.FacilityImageSystem.UI = {
        CONSTANTS: UI_CONSTANTS,
        ui,
        stepIndicator,
        progressManager,
        notificationManager,
        domUtils,
        getState: () => ({ ...uiState }),
        initialize: ui.initialize.bind(ui),
        showNotification: ui.showNotification.bind(ui),
        dismissNotification: ui.dismissNotification.bind(ui),
        showProgress: ui.showProgress.bind(ui),
        updateProgress: ui.updateProgress.bind(ui),
        hideProgress: ui.hideProgress.bind(ui),
        updateStep: ui.updateStep.bind(ui),
        show: ui.show.bind(ui),
        hide: ui.hide.bind(ui),
        toggle: ui.toggle.bind(ui),
        addClass: ui.addClass.bind(ui),
        removeClass: ui.removeClass.bind(ui),
        toggleClass: ui.toggleClass.bind(ui),
        destroy: ui.destroy.bind(ui)
    };
    
    window.FacilityImageUI = window.FacilityImageSystem.UI;
    
    Core.logger.log('UI ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');
    
})();
````

## File: src/main/resources/static/js/facility-image-upload-module.js
````javascript
/**
 * ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ ëª¨ë“ˆ (Upload Module)
 * íŒŒì¼ ì—…ë¡œë“œ, ë“œë˜ê·¸ì•¤ë“œë¡­, íŒŒì¼ ê²€ì¦ ì „ìš© ëª¨ë“ˆ
 * 
 * ì£¼ìš” ê¸°ëŠ¥:
 * - ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ
 * - ë“œë˜ê·¸ì•¤ë“œë¡­ ì¸í„°í˜ì´ìŠ¤
 * - íŒŒì¼ í˜•ì‹ ë° í¬ê¸° ê²€ì¦
 * - ì´ë¯¸ì§€ ì••ì¶• ë° ìµœì í™”
 * - íŒŒì¼ ë¯¸ë¦¬ë³´ê¸°
 * - í”„ë¡œê·¸ë ˆìŠ¤ í‘œì‹œ
 * - ì—ëŸ¬ í•¸ë“¤ë§
 * 
 * @version 1.0.0
 * @author LightCare Team
 * @requires FacilityImageCore
 */

(function() {
    'use strict';
    
    // Core ëª¨ë“ˆ ì˜ì¡´ì„± ì²´í¬
    if (!window.FacilityImageCore) {
        throw new Error('FacilityImageCore ëª¨ë“ˆì´ í•„ìš”í•©ë‹ˆë‹¤.');
    }
    
    const Core = window.FacilityImageCore;
    
    // ================================================
    // ëª¨ë“ˆ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
    // ================================================
    
    if (!window.FacilityImageSystem.Upload) {
        window.FacilityImageSystem.Upload = {};
    }
    
    // ================================================
    // ìƒìˆ˜ ì •ì˜
    // ================================================
    
    const UPLOAD_CONSTANTS = {
        MODULE_NAME: 'FacilityImageUpload',
        VERSION: '1.0.0',
        
        // íŒŒì¼ ì œí•œ
        MAX_FILE_SIZE: 10 * 1024 * 1024, // 10MB
        MAX_FILES: 5,
        ALLOWED_TYPES: ['image/jpeg', 'image/png', 'image/webp', 'image/avif'],
        ALLOWED_EXTENSIONS: ['.jpg', '.jpeg', '.png', '.webp', '.avif'],
        
        // ë“œë˜ê·¸ì•¤ë“œë¡­ ìƒíƒœ
        DRAG_STATES: {
            NONE: 'none',
            ENTER: 'enter',
            OVER: 'over',
            LEAVE: 'leave'
        },
        
        // íŒŒì¼ ìƒíƒœ
        FILE_STATUS: {
            PENDING: 'pending',
            VALIDATING: 'validating',
            VALID: 'valid',
            INVALID: 'invalid',
            UPLOADING: 'uploading',
            UPLOADED: 'uploaded',
            ERROR: 'error'
        },
        
        // ì••ì¶• ì„¤ì •
        COMPRESSION_OPTIONS: {
            quality: 0.8,
            maxWidth: 1920,
            maxHeight: 1200,
            format: 'image/jpeg',
            enableCompression: true
        },
        
        // ì—ëŸ¬ ë©”ì‹œì§€
        ERROR_MESSAGES: {
            INVALID_TYPE: 'ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤.',
            FILE_TOO_LARGE: 'íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤.',
            TOO_MANY_FILES: 'ìµœëŒ€ ì—…ë¡œë“œ ê°€ëŠ¥í•œ íŒŒì¼ ìˆ˜ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.',
            UPLOAD_FAILED: 'ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
            READ_ERROR: 'íŒŒì¼ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
            COMPRESSION_ERROR: 'ì´ë¯¸ì§€ ì••ì¶•ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.'
        }
    };
    
    // ================================================
    // ì—…ë¡œë“œ ìƒíƒœ ê´€ë¦¬
    // ================================================
    
    const uploadState = {
        // íŒŒì¼ ëª©ë¡
        files: [],
        validatedFiles: [],
        compressedFiles: [],
        
        // í˜„ì¬ ìƒíƒœ
        isInitialized: false,
        isDragging: false,
        isUploading: false,
        isProcessing: false,
        
        // ì§„í–‰ë¥ 
        progress: {
            current: 0,
            total: 0,
            percentage: 0
        },
        
        // UI ìš”ì†Œ
        elements: {
            dropZone: null,
            fileInput: null,
            selectButton: null,
            previewContainer: null,
            progressBar: null,
            statusMessage: null
        },
        
        // ì„¤ì •
        settings: {
            maxFileSize: UPLOAD_CONSTANTS.MAX_FILE_SIZE,
            maxFiles: UPLOAD_CONSTANTS.MAX_FILES,
            allowedTypes: UPLOAD_CONSTANTS.ALLOWED_TYPES,
            enableCompression: UPLOAD_CONSTANTS.COMPRESSION_OPTIONS.enableCompression,
            compressionQuality: UPLOAD_CONSTANTS.COMPRESSION_OPTIONS.quality
        },
        
        // ì½œë°± í•¨ìˆ˜
        callbacks: {
            onFileSelect: null,
            onFileValidate: null,
            onFileCompress: null,
            onUploadProgress: null,
            onUploadComplete: null,
            onError: null
        }
    };
    
    // ================================================
    // DOM ìš”ì†Œ ê´€ë¦¬
    // ================================================
    
    const domManager = {
        /**
         * DOM ìš”ì†Œ ì´ˆê¸°í™”
         * @returns {boolean} ì´ˆê¸°í™” ì„±ê³µ ì—¬ë¶€
         */
        initializeElements() {
            const elements = {
                dropZone: document.querySelector('.upload-area, .drop-zone, #uploadArea'),
                fileInput: document.querySelector('#imageInput, #facilityImageFile, input[type="file"]'),
                selectButton: document.querySelector('#selectFileBtn, .select-file-btn'),
                previewContainer: document.querySelector('.selected-images-preview, #selectedImagesPreview'),
                progressBar: document.querySelector('.progress-bar, #uploadProgress'),
                statusMessage: document.querySelector('.upload-status, #uploadStatus')
            };
            
            uploadState.elements = elements;
            
            // ë™ì  ìš”ì†Œ ìƒì„±
            this.createMissingElements();
            
            Core.logger.log('ì—…ë¡œë“œ DOM ìš”ì†Œ ì´ˆê¸°í™” ì™„ë£Œ', {
                hasDropZone: !!elements.dropZone,
                hasFileInput: !!elements.fileInput,
                hasSelectButton: !!elements.selectButton
            });
            
            return true;
        },
        
        /**
         * ëˆ„ë½ëœ ìš”ì†Œ ë™ì  ìƒì„±
         */
        createMissingElements() {
            const elements = uploadState.elements;
            
            // ë“œë¡­ì¡´ ìƒì„±
            if (!elements.dropZone) {
                elements.dropZone = this.createDropZone();
            }
            
            // íŒŒì¼ ì…ë ¥ ìƒì„±
            if (!elements.fileInput) {
                elements.fileInput = this.createFileInput();
            }
            
            // ì„ íƒ ë²„íŠ¼ ìƒì„±
            if (!elements.selectButton) {
                elements.selectButton = this.createSelectButton();
            }
            
            // ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ìƒì„±
            if (!elements.previewContainer) {
                elements.previewContainer = this.createPreviewContainer();
            }
            
            // ì§„í–‰ë¥  í‘œì‹œê¸° ìƒì„±
            if (!elements.progressBar) {
                elements.progressBar = this.createProgressBar();
            }
        },
        
        /**
         * ë“œë¡­ì¡´ ìƒì„±
         * @returns {HTMLElement} ë“œë¡­ì¡´ ìš”ì†Œ
         */
        createDropZone() {
            const dropZone = document.createElement('div');
            dropZone.className = 'upload-area drop-zone';
            dropZone.innerHTML = `
                <div class="upload-content">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt fa-3x text-primary"></i>
                    </div>
                    <h5 class="upload-title">ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ</h5>
                    <p class="upload-description text-muted">
                        ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œí•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”
                    </p>
                    <div class="upload-format-info">
                        <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            JPG, PNG, WEBP íŒŒì¼ë§Œ ì§€ì› (ìµœëŒ€ 10MB)
                        </small>
                    </div>
                </div>
            `;
            
            dropZone.style.cssText = `
                border: 2px dashed #dee2e6;
                border-radius: 8px;
                padding: 3rem;
                text-align: center;
                background: #f8f9fa;
                transition: all 0.3s ease;
                cursor: pointer;
                min-height: 300px;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            
            // ì ì ˆí•œ ìœ„ì¹˜ì— ì¶”ê°€
            const container = document.querySelector('.upload-section, #uploadSection, main');
            if (container) {
                container.appendChild(dropZone);
            } else {
                document.body.appendChild(dropZone);
            }
            
            return dropZone;
        },
        
        /**
         * íŒŒì¼ ì…ë ¥ ìƒì„±
         * @returns {HTMLInputElement} íŒŒì¼ ì…ë ¥ ìš”ì†Œ
         */
        createFileInput() {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = UPLOAD_CONSTANTS.ALLOWED_TYPES.join(',');
            fileInput.multiple = true;
            fileInput.style.display = 'none';
            fileInput.id = 'facilityImageFile';
            
            document.body.appendChild(fileInput);
            return fileInput;
        },
        
        /**
         * ì„ íƒ ë²„íŠ¼ ìƒì„±
         * @returns {HTMLButtonElement} ì„ íƒ ë²„íŠ¼ ìš”ì†Œ
         */
        createSelectButton() {
            const button = document.createElement('button');
            button.type = 'button';
            button.className = 'btn btn-primary btn-lg';
            button.innerHTML = '<i class="fas fa-folder-open me-2"></i>íŒŒì¼ ì„ íƒ';
            
            const dropZone = uploadState.elements.dropZone;
            if (dropZone) {
                dropZone.appendChild(button);
            }
            
            return button;
        },
        
        /**
         * ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ìƒì„±
         * @returns {HTMLElement} ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ìš”ì†Œ
         */
        createPreviewContainer() {
            const container = document.createElement('div');
            container.className = 'selected-images-preview mt-4';
            container.innerHTML = `
                <h6 class="mb-3">
                    <i class="fas fa-images me-2"></i>ì„ íƒëœ ì´ë¯¸ì§€
                    <span class="badge bg-secondary ms-2" id="imageCount">0</span>
                </h6>
                <div class="row" id="previewGrid"></div>
            `;
            
            const dropZone = uploadState.elements.dropZone;
            if (dropZone && dropZone.parentElement) {
                dropZone.parentElement.appendChild(container);
            }
            
            return container;
        },
        
        /**
         * ì§„í–‰ë¥  í‘œì‹œê¸° ìƒì„±
         * @returns {HTMLElement} ì§„í–‰ë¥  í‘œì‹œê¸° ìš”ì†Œ
         */
        createProgressBar() {
            const progressContainer = document.createElement('div');
            progressContainer.className = 'upload-progress mt-3';
            progressContainer.style.display = 'none';
            progressContainer.innerHTML = `
                <div class="progress">
                    <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                </div>
                <div class="progress-text text-center mt-2">
                    <small class="text-muted">ì¤€ë¹„ ì¤‘...</small>
                </div>
            `;
            
            const dropZone = uploadState.elements.dropZone;
            if (dropZone && dropZone.parentElement) {
                dropZone.parentElement.appendChild(progressContainer);
            }
            
            return progressContainer;
        }
    };
    
    // ================================================
    // íŒŒì¼ ê²€ì¦ ì‹œìŠ¤í…œ
    // ================================================
    
    const fileValidator = {
        /**
         * íŒŒì¼ ê²€ì¦
         * @param {File} file - ê²€ì¦í•  íŒŒì¼
         * @returns {Object} ê²€ì¦ ê²°ê³¼
         */
        validateFile(file) {
            const result = {
                isValid: true,
                errors: [],
                warnings: []
            };
            
            // íŒŒì¼ íƒ€ì… ê²€ì¦
            if (!this.validateFileType(file)) {
                result.isValid = false;
                result.errors.push(UPLOAD_CONSTANTS.ERROR_MESSAGES.INVALID_TYPE);
            }
            
            // íŒŒì¼ í¬ê¸° ê²€ì¦
            if (!this.validateFileSize(file)) {
                result.isValid = false;
                result.errors.push(UPLOAD_CONSTANTS.ERROR_MESSAGES.FILE_TOO_LARGE);
            }
            
            // íŒŒì¼ ì´ë¦„ ê²€ì¦
            const nameValidation = this.validateFileName(file.name);
            if (!nameValidation.isValid) {
                result.warnings.push(...nameValidation.warnings);
            }
            
            return result;
        },
        
        /**
         * íŒŒì¼ íƒ€ì… ê²€ì¦
         * @param {File} file - ê²€ì¦í•  íŒŒì¼
         * @returns {boolean} ìœ íš¨í•œ íƒ€ì…ì¸ì§€ ì—¬ë¶€
         */
        validateFileType(file) {
            const allowedTypes = uploadState.settings.allowedTypes;
            return allowedTypes.includes(file.type);
        },
        
        /**
         * íŒŒì¼ í¬ê¸° ê²€ì¦
         * @param {File} file - ê²€ì¦í•  íŒŒì¼
         * @returns {boolean} ìœ íš¨í•œ í¬ê¸°ì¸ì§€ ì—¬ë¶€
         */
        validateFileSize(file) {
            return file.size <= uploadState.settings.maxFileSize;
        },
        
        /**
         * íŒŒì¼ ì´ë¦„ ê²€ì¦
         * @param {string} fileName - íŒŒì¼ ì´ë¦„
         * @returns {Object} ê²€ì¦ ê²°ê³¼
         */
        validateFileName(fileName) {
            const result = {
                isValid: true,
                warnings: []
            };
            
            // í•œê¸€ íŒŒì¼ëª… ì²´í¬
            if (/[ê°€-í£]/.test(fileName)) {
                result.warnings.push('í•œê¸€ íŒŒì¼ëª…ì€ SEOì— ë¶ˆë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
            }
            
            // íŠ¹ìˆ˜ë¬¸ì ì²´í¬
            if (/[^a-zA-Z0-9.\-_]/.test(fileName)) {
                result.warnings.push('íŠ¹ìˆ˜ë¬¸ìê°€ í¬í•¨ëœ íŒŒì¼ëª…ì…ë‹ˆë‹¤.');
            }
            
            return result;
        },
        
        /**
         * ë‹¤ì¤‘ íŒŒì¼ ê²€ì¦
         * @param {FileList} fileList - íŒŒì¼ ëª©ë¡
         * @returns {Object} ê²€ì¦ ê²°ê³¼
         */
        validateFiles(fileList) {
            const files = Array.from(fileList);
            const result = {
                validFiles: [],
                invalidFiles: [],
                errors: [],
                warnings: []
            };
            
            // íŒŒì¼ ê°œìˆ˜ ì²´í¬
            if (files.length > uploadState.settings.maxFiles) {
                result.errors.push(UPLOAD_CONSTANTS.ERROR_MESSAGES.TOO_MANY_FILES);
                return result;
            }
            
            // ê° íŒŒì¼ ê²€ì¦
            files.forEach((file, index) => {
                const validation = this.validateFile(file);
                
                if (validation.isValid) {
                    result.validFiles.push({
                        file: file,
                        index: index,
                        id: Core.utils.generateUniqueId(),
                        status: UPLOAD_CONSTANTS.FILE_STATUS.VALID
                    });
                } else {
                    result.invalidFiles.push({
                        file: file,
                        index: index,
                        errors: validation.errors
                    });
                }
                
                result.errors.push(...validation.errors);
                result.warnings.push(...validation.warnings);
            });
            
            return result;
        }
    };
    
    // ================================================
    // íŒŒì¼ ì••ì¶• ì‹œìŠ¤í…œ
    // ================================================
    
    const fileCompressor = {
        /**
         * ì´ë¯¸ì§€ ì••ì¶•
         * @param {File} file - ì••ì¶•í•  íŒŒì¼
         * @param {Object} options - ì••ì¶• ì˜µì…˜
         * @returns {Promise<Blob>} ì••ì¶•ëœ ì´ë¯¸ì§€ Blob
         */
        async compressImage(file, options = {}) {
            const defaultOptions = {
                ...UPLOAD_CONSTANTS.COMPRESSION_OPTIONS,
                ...options
            };
            
            if (!defaultOptions.enableCompression) {
                return file;
            }
            
            try {
                const canvas = await this.createCanvas(file, defaultOptions);
                const compressedBlob = await this.canvasToBlob(canvas, defaultOptions);
                
                Core.logger.log('ì´ë¯¸ì§€ ì••ì¶• ì™„ë£Œ', {
                    originalSize: Core.utils.formatFileSize(file.size),
                    compressedSize: Core.utils.formatFileSize(compressedBlob.size),
                    compressionRatio: Math.round((1 - compressedBlob.size / file.size) * 100) + '%'
                });
                
                // ì••ì¶•ëœ íŒŒì¼ì— ì›ë³¸ ì •ë³´ ë³´ì¡´
                const compressedFile = new File([compressedBlob], file.name, {
                    type: compressedBlob.type || file.type,
                    lastModified: file.lastModified
                });
                
                // ì›ë³¸ íŒŒì¼ ì •ë³´ ì¶”ê°€
                compressedFile.originalFile = file;
                compressedFile.originalName = file.name;
                compressedFile.originalSize = file.size;
                compressedFile.originalType = file.type;
                compressedFile.isCompressed = true;
                
                return compressedFile;
                
            } catch (error) {
                Core.logger.error('ì´ë¯¸ì§€ ì••ì¶• ì‹¤íŒ¨:', error);
                throw error;
            }
        },
        
        /**
         * ìº”ë²„ìŠ¤ ìƒì„±
         * @param {File} file - ì´ë¯¸ì§€ íŒŒì¼
         * @param {Object} options - ì˜µì…˜
         * @returns {Promise<HTMLCanvasElement>} ìº”ë²„ìŠ¤
         */
        async createCanvas(file, options) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    // í¬ê¸° ê³„ì‚°
                    const { width, height } = this.calculateNewDimensions(
                        img.width, 
                        img.height, 
                        options.maxWidth, 
                        options.maxHeight
                    );
                    
                    canvas.width = width;
                    canvas.height = height;
                    
                    // ì´ë¯¸ì§€ ê·¸ë¦¬ê¸°
                    ctx.fillStyle = options.fillColor || '#ffffff';
                    ctx.fillRect(0, 0, width, height);
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    resolve(canvas);
                };
                
                img.onerror = () => {
                    reject(new Error('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨'));
                };
                
                img.src = URL.createObjectURL(file);
            });
        },
        
        /**
         * ìº”ë²„ìŠ¤ë¥¼ Blobìœ¼ë¡œ ë³€í™˜
         * @param {HTMLCanvasElement} canvas - ìº”ë²„ìŠ¤
         * @param {Object} options - ì˜µì…˜
         * @returns {Promise<Blob>} Blob
         */
        async canvasToBlob(canvas, options) {
            return new Promise((resolve, reject) => {
                canvas.toBlob((blob) => {
                    if (blob) {
                        resolve(blob);
                    } else {
                        reject(new Error('Blob ìƒì„± ì‹¤íŒ¨'));
                    }
                }, options.format, options.quality);
            });
        },
        
        /**
         * ìƒˆë¡œìš´ í¬ê¸° ê³„ì‚°
         * @param {number} width - ì›ë³¸ ë„ˆë¹„
         * @param {number} height - ì›ë³¸ ë†’ì´
         * @param {number} maxWidth - ìµœëŒ€ ë„ˆë¹„
         * @param {number} maxHeight - ìµœëŒ€ ë†’ì´
         * @returns {Object} ìƒˆë¡œìš´ í¬ê¸°
         */
        calculateNewDimensions(width, height, maxWidth, maxHeight) {
            if (width <= maxWidth && height <= maxHeight) {
                return { width, height };
            }
            
            const ratio = Math.min(maxWidth / width, maxHeight / height);
            return {
                width: Math.round(width * ratio),
                height: Math.round(height * ratio)
            };
        }
    };
    
    // ================================================
    // ë“œë˜ê·¸ì•¤ë“œë¡­ ì‹œìŠ¤í…œ
    // ================================================
    
    const dragDropHandler = {
        /**
         * ë“œë˜ê·¸ì•¤ë“œë¡­ ì´ë²¤íŠ¸ ì„¤ì •
         */
        setupDragAndDrop() {
            const dropZone = uploadState.elements.dropZone;
            if (!dropZone) return;
            
            // ë“œë˜ê·¸ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            dropZone.addEventListener('dragenter', this.handleDragEnter.bind(this));
            dropZone.addEventListener('dragover', this.handleDragOver.bind(this));
            dropZone.addEventListener('dragleave', this.handleDragLeave.bind(this));
            dropZone.addEventListener('drop', this.handleDrop.bind(this));
            
            // í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            dropZone.addEventListener('click', this.handleClick.bind(this));
            
            // ì „ì—­ ë“œë˜ê·¸ ì´ë²¤íŠ¸ ë°©ì§€
            document.addEventListener('dragover', (e) => e.preventDefault());
            document.addEventListener('drop', (e) => e.preventDefault());
            
            Core.logger.log('ë“œë˜ê·¸ì•¤ë“œë¡­ ì´ë²¤íŠ¸ ì„¤ì • ì™„ë£Œ');
        },
        
        /**
         * ë“œë˜ê·¸ ì§„ì… ì´ë²¤íŠ¸
         * @param {DragEvent} event - ë“œë˜ê·¸ ì´ë²¤íŠ¸
         */
        handleDragEnter(event) {
            event.preventDefault();
            event.stopPropagation();
            
            uploadState.isDragging = true;
            this.updateDropZoneStyle(UPLOAD_CONSTANTS.DRAG_STATES.ENTER);
        },
        
        /**
         * ë“œë˜ê·¸ ì˜¤ë²„ ì´ë²¤íŠ¸
         * @param {DragEvent} event - ë“œë˜ê·¸ ì´ë²¤íŠ¸
         */
        handleDragOver(event) {
            event.preventDefault();
            event.stopPropagation();
            
            this.updateDropZoneStyle(UPLOAD_CONSTANTS.DRAG_STATES.OVER);
        },
        
        /**
         * ë“œë˜ê·¸ ë– ë‚¨ ì´ë²¤íŠ¸
         * @param {DragEvent} event - ë“œë˜ê·¸ ì´ë²¤íŠ¸
         */
        handleDragLeave(event) {
            event.preventDefault();
            event.stopPropagation();
            
            if (!event.currentTarget.contains(event.relatedTarget)) {
                uploadState.isDragging = false;
                this.updateDropZoneStyle(UPLOAD_CONSTANTS.DRAG_STATES.LEAVE);
            }
        },
        
        /**
         * ë“œë¡­ ì´ë²¤íŠ¸
         * @param {DragEvent} event - ë“œë˜ê·¸ ì´ë²¤íŠ¸
         */
        handleDrop(event) {
            event.preventDefault();
            event.stopPropagation();
            
            uploadState.isDragging = false;
            this.updateDropZoneStyle(UPLOAD_CONSTANTS.DRAG_STATES.NONE);
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                this.handleFiles(files);
            }
        },
        
        /**
         * í´ë¦­ ì´ë²¤íŠ¸
         * @param {Event} event - í´ë¦­ ì´ë²¤íŠ¸
         */
        handleClick(event) {
            event.preventDefault();
            const fileInput = uploadState.elements.fileInput;
            if (fileInput) {
                fileInput.click();
            }
        },
        
        /**
         * ë“œë¡­ì¡´ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
         * @param {string} state - ë“œë˜ê·¸ ìƒíƒœ
         */
        updateDropZoneStyle(state) {
            const dropZone = uploadState.elements.dropZone;
            if (!dropZone) return;
            
            // ê¸°ì¡´ í´ë˜ìŠ¤ ì œê±°
            dropZone.classList.remove('drag-enter', 'drag-over', 'drag-leave');
            
            switch (state) {
                case UPLOAD_CONSTANTS.DRAG_STATES.ENTER:
                    dropZone.classList.add('drag-enter');
                    dropZone.style.borderColor = '#007bff';
                    dropZone.style.backgroundColor = '#e3f2fd';
                    break;
                case UPLOAD_CONSTANTS.DRAG_STATES.OVER:
                    dropZone.classList.add('drag-over');
                    dropZone.style.borderColor = '#0056b3';
                    dropZone.style.backgroundColor = '#bbdefb';
                    break;
                case UPLOAD_CONSTANTS.DRAG_STATES.LEAVE:
                case UPLOAD_CONSTANTS.DRAG_STATES.NONE:
                    dropZone.classList.add('drag-leave');
                    dropZone.style.borderColor = '#dee2e6';
                    dropZone.style.backgroundColor = '#f8f9fa';
                    break;
            }
        },
        
        /**
         * íŒŒì¼ ì²˜ë¦¬
         * @param {FileList} files - íŒŒì¼ ëª©ë¡
         */
        async handleFiles(files) {
            Core.logger.log('íŒŒì¼ ì²˜ë¦¬ ì‹œì‘', { count: files.length });
            
            try {
                // íŒŒì¼ ê²€ì¦
                const validation = fileValidator.validateFiles(files);
                
                if (validation.errors.length > 0) {
                    this.showErrors(validation.errors);
                    return;
                }
                
                if (validation.warnings.length > 0) {
                    this.showWarnings(validation.warnings);
                }
                
                // ìœ íš¨í•œ íŒŒì¼ë“¤ ì²˜ë¦¬
                if (validation.validFiles.length > 0) {
                    uploadState.files = validation.validFiles;
                    await this.processFiles(validation.validFiles);
                }
                
            } catch (error) {
                Core.logger.error('íŒŒì¼ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);
                this.showError('íŒŒì¼ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        },
        
        /**
         * íŒŒì¼ ì²˜ë¦¬ (ì••ì¶• ë° ë¯¸ë¦¬ë³´ê¸°)
         * @param {Array} files - íŒŒì¼ ë°°ì—´
         */
        async processFiles(files) {
            uploadState.isProcessing = true;
            this.showProgress(0, files.length);
            
            try {
                for (let i = 0; i < files.length; i++) {
                    const fileData = files[i];
                    
                    // 1ë‹¨ê³„ì—ì„œëŠ” ì••ì¶• ê±´ë„ˆë›°ê¸° (2ë‹¨ê³„ì—ì„œ í¬ë¡­ ì‹œ ì••ì¶•)
                    // ë¯¸ë¦¬ë³´ê¸° ìƒì„±ì€ ì›ë³¸ íŒŒì¼ë¡œ
                    await this.createPreview(fileData);
                    
                    // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
                    this.updateProgress(i + 1, files.length);
                }
                
                // ì™„ë£Œ ì²˜ë¦¬
                uploadState.validatedFiles = files;
                this.hideProgress();
                
                // ì½œë°± í˜¸ì¶œ
                if (uploadState.callbacks.onFileSelect) {
                    uploadState.callbacks.onFileSelect(files);
                }
                
                Core.emit(Core.CONSTANTS.EVENTS.IMAGE_ADDED, {
                    files: files,
                    count: files.length
                });
                
            } catch (error) {
                Core.logger.error('íŒŒì¼ ì²˜ë¦¬ ì‹¤íŒ¨:', error);
                this.showError('íŒŒì¼ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            } finally {
                uploadState.isProcessing = false;
            }
        },
        
        /**
         * ë¯¸ë¦¬ë³´ê¸° ìƒì„±
         * @param {Object} fileData - íŒŒì¼ ë°ì´í„°
         */
        async createPreview(fileData) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                
                reader.onload = (e) => {
                    const previewHtml = this.createPreviewHtml(fileData, e.target.result);
                    this.addPreviewToContainer(previewHtml);
                    resolve();
                };
                
                reader.onerror = () => {
                    Core.logger.error('ë¯¸ë¦¬ë³´ê¸° ìƒì„± ì‹¤íŒ¨:', fileData.file.name);
                    resolve();
                };
                
                reader.readAsDataURL(fileData.file);
            });
        },
        
        /**
         * ë¯¸ë¦¬ë³´ê¸° HTML ìƒì„±
         * @param {Object} fileData - íŒŒì¼ ë°ì´í„°
         * @param {string} dataUrl - ë°ì´í„° URL
         * @returns {string} ë¯¸ë¦¬ë³´ê¸° HTML
         */
        createPreviewHtml(fileData, dataUrl) {
            return `
                <div class="col-md-3 mb-3" data-file-id="${fileData.id}">
                    <div class="card">
                        <div class="card-img-top" style="height: 150px; overflow: hidden;">
                            <img src="${dataUrl}" alt="${fileData.file.name}" 
                                 style="width: 100%; height: 100%; object-fit: cover;">
                        </div>
                        <div class="card-body p-2">
                            <h6 class="card-title small mb-1">${fileData.file.name}</h6>
                            <p class="card-text small text-muted mb-1">
                                ${Core.utils.formatFileSize(fileData.file.size)}
                            </p>
                            <button type="button" class="btn btn-sm btn-outline-danger" 
                                    onclick="FacilityImageUpload.removeFile('${fileData.id}')">
                                <i class="fas fa-times"></i> ì œê±°
                            </button>
                        </div>
                    </div>
                </div>
            `;
        },
        
        /**
         * ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆì— ì¶”ê°€
         * @param {string} html - ë¯¸ë¦¬ë³´ê¸° HTML
         */
        addPreviewToContainer(html) {
            const container = uploadState.elements.previewContainer;
            if (!container) return;
            
            const grid = container.querySelector('#previewGrid, .row');
            if (grid) {
                grid.insertAdjacentHTML('beforeend', html);
            }
            
            // ì¹´ìš´í„° ì—…ë°ì´íŠ¸
            const counter = container.querySelector('#imageCount');
            if (counter) {
                counter.textContent = uploadState.files.length;
            }
            
            // ì»¨í…Œì´ë„ˆ í‘œì‹œ
            container.style.display = 'block';
        },
        
        /**
         * ì§„í–‰ë¥  í‘œì‹œ
         * @param {number} current - í˜„ì¬ ì§„í–‰
         * @param {number} total - ì „ì²´ ê°œìˆ˜
         */
        showProgress(current, total) {
            const progressBar = uploadState.elements.progressBar;
            if (!progressBar) return;
            
            const percentage = total > 0 ? Math.round((current / total) * 100) : 0;
            const progressElement = progressBar.querySelector('.progress-bar');
            const textElement = progressBar.querySelector('.progress-text small');
            
            if (progressElement) {
                progressElement.style.width = percentage + '%';
                progressElement.setAttribute('aria-valuenow', percentage);
            }
            
            if (textElement) {
                textElement.textContent = `ì²˜ë¦¬ ì¤‘... ${current}/${total} (${percentage}%)`;
            }
            
            progressBar.style.display = 'block';
        },
        
        /**
         * ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
         * @param {number} current - í˜„ì¬ ì§„í–‰
         * @param {number} total - ì „ì²´ ê°œìˆ˜
         */
        updateProgress(current, total) {
            uploadState.progress = {
                current,
                total,
                percentage: Math.round((current / total) * 100)
            };
            
            this.showProgress(current, total);
        },
        
        /**
         * ì§„í–‰ë¥  ìˆ¨ê¹€
         */
        hideProgress() {
            const progressBar = uploadState.elements.progressBar;
            if (progressBar) {
                progressBar.style.display = 'none';
            }
        },
        
        /**
         * ì—ëŸ¬ í‘œì‹œ
         * @param {Array} errors - ì—ëŸ¬ ë°°ì—´
         */
        showErrors(errors) {
            errors.forEach(error => {
                this.showError(error);
            });
        },
        
        /**
         * ê²½ê³  í‘œì‹œ
         * @param {Array} warnings - ê²½ê³  ë°°ì—´
         */
        showWarnings(warnings) {
            warnings.forEach(warning => {
                this.showWarning(warning);
            });
        },
        
        /**
         * ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
         * @param {string} message - ì—ëŸ¬ ë©”ì‹œì§€
         */
        showError(message) {
            Core.logger.error(message);
            // í† ìŠ¤íŠ¸ ë˜ëŠ” ì•Œë¦¼ í‘œì‹œ
            this.showNotification(message, 'error');
        },
        
        /**
         * ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
         * @param {string} message - ê²½ê³  ë©”ì‹œì§€
         */
        showWarning(message) {
            Core.logger.warn(message);
            this.showNotification(message, 'warning');
        },
        
        /**
         * ì•Œë¦¼ í‘œì‹œ
         * @param {string} message - ë©”ì‹œì§€
         * @param {string} type - íƒ€ì… (error, warning, info)
         */
        showNotification(message, type = 'info') {
            // ê°„ë‹¨í•œ ì•Œë¦¼ êµ¬í˜„
            const notification = document.createElement('div');
            notification.className = `alert alert-${type === 'error' ? 'danger' : type === 'warning' ? 'warning' : 'info'} alert-dismissible fade show`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1050;
                max-width: 400px;
            `;
            
            notification.innerHTML = `
                <strong>${type === 'error' ? 'ì˜¤ë¥˜' : type === 'warning' ? 'ê²½ê³ ' : 'ì •ë³´'}:</strong> ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            document.body.appendChild(notification);
            
            // 5ì´ˆ í›„ ìë™ ì œê±°
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.parentElement.removeChild(notification);
                }
            }, 5000);
        }
    };
    
    // ================================================
    // ë©”ì¸ ì—…ë¡œë“œ ê°ì²´
    // ================================================
    
    const uploader = {
        /**
         * ì—…ë¡œë“œ ëª¨ë“ˆ ì´ˆê¸°í™”
         * @param {Object} options - ì´ˆê¸°í™” ì˜µì…˜
         * @returns {Promise<boolean>} ì´ˆê¸°í™” ì„±ê³µ ì—¬ë¶€
         */
        async initialize(options = {}) {
            if (uploadState.isInitialized) {
                Core.logger.warn('ì—…ë¡œë“œ ëª¨ë“ˆì´ ì´ë¯¸ ì´ˆê¸°í™”ë¨');
                return true;
            }
            
            Core.logger.log('ì—…ë¡œë“œ ëª¨ë“ˆ ì´ˆê¸°í™” ì‹œì‘');
            
            try {
                // ì„¤ì • ë³‘í•©
                if (options.settings) {
                    Object.assign(uploadState.settings, options.settings);
                }
                
                // ì½œë°± ì„¤ì •
                if (options.callbacks) {
                    Object.assign(uploadState.callbacks, options.callbacks);
                }
                
                // DOM ìš”ì†Œ ì´ˆê¸°í™”
                domManager.initializeElements();
                
                // ë“œë˜ê·¸ì•¤ë“œë¡­ ì„¤ì •
                dragDropHandler.setupDragAndDrop();
                
                // íŒŒì¼ ì…ë ¥ ì´ë²¤íŠ¸ ì„¤ì •
                this.setupFileInputEvents();
                
                uploadState.isInitialized = true;
                Core.logger.success('ì—…ë¡œë“œ ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                
                return true;
                
            } catch (error) {
                Core.logger.error('ì—…ë¡œë“œ ëª¨ë“ˆ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                return false;
            }
        },
        
        /**
         * íŒŒì¼ ì…ë ¥ ì´ë²¤íŠ¸ ì„¤ì •
         */
        setupFileInputEvents() {
            const fileInput = uploadState.elements.fileInput;
            if (!fileInput) return;
            
            fileInput.addEventListener('change', async (event) => {
                const files = event.target.files;
                if (files.length > 0) {
                    await dragDropHandler.handleFiles(files);
                }
            });
        },
        
        /**
         * íŒŒì¼ ì œê±°
         * @param {string} fileId - íŒŒì¼ ID
         */
        removeFile(fileId) {
            // íŒŒì¼ ëª©ë¡ì—ì„œ ì œê±°
            uploadState.files = uploadState.files.filter(file => file.id !== fileId);
            uploadState.validatedFiles = uploadState.validatedFiles.filter(file => file.id !== fileId);
            
            // DOMì—ì„œ ì œê±°
            const previewElement = document.querySelector(`[data-file-id="${fileId}"]`);
            if (previewElement) {
                previewElement.remove();
            }
            
            // ì¹´ìš´í„° ì—…ë°ì´íŠ¸
            const counter = document.querySelector('#imageCount');
            if (counter) {
                counter.textContent = uploadState.files.length;
            }
            
            // ì´ë²¤íŠ¸ ë°œìƒ
            Core.emit(Core.CONSTANTS.EVENTS.IMAGE_REMOVED, {
                fileId: fileId,
                remainingCount: uploadState.files.length
            });
            
            Core.logger.log('íŒŒì¼ ì œê±° ì™„ë£Œ:', fileId);
        },
        
        /**
         * ëª¨ë“  íŒŒì¼ ì œê±°
         */
        clearAllFiles() {
            uploadState.files = [];
            uploadState.validatedFiles = [];
            uploadState.compressedFiles = [];
            
            // DOM ì •ë¦¬
            const previewContainer = uploadState.elements.previewContainer;
            if (previewContainer) {
                const grid = previewContainer.querySelector('#previewGrid, .row');
                if (grid) {
                    grid.innerHTML = '';
                }
                
                const counter = previewContainer.querySelector('#imageCount');
                if (counter) {
                    counter.textContent = '0';
                }
                
                previewContainer.style.display = 'none';
            }
            
            Core.logger.log('ëª¨ë“  íŒŒì¼ ì œê±° ì™„ë£Œ');
        },
        
        /**
         * í˜„ì¬ ì„ íƒëœ íŒŒì¼ ë°˜í™˜
         * @returns {Array} íŒŒì¼ ë°°ì—´
         */
        getFiles() {
            return uploadState.validatedFiles;
        },
        
        /**
         * ì••ì¶•ëœ íŒŒì¼ ë°˜í™˜
         * @returns {Array} ì••ì¶•ëœ íŒŒì¼ ë°°ì—´
         */
        getCompressedFiles() {
            return uploadState.validatedFiles.filter(file => file.compressedBlob);
        },
        
        /**
         * ì—…ë¡œë“œ ìƒíƒœ ë°˜í™˜
         * @returns {Object} ì—…ë¡œë“œ ìƒíƒœ
         */
        getUploadState() {
            return {
                isInitialized: uploadState.isInitialized,
                isUploading: uploadState.isUploading,
                isProcessing: uploadState.isProcessing,
                fileCount: uploadState.files.length,
                validFileCount: uploadState.validatedFiles.length,
                progress: uploadState.progress
            };
        },
        
        /**
         * ì—…ë¡œë“œ ëª¨ë“ˆ ì œê±°
         */
        destroy() {
            this.clearAllFiles();
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
            const dropZone = uploadState.elements.dropZone;
            if (dropZone) {
                dropZone.removeEventListener('dragenter', dragDropHandler.handleDragEnter);
                dropZone.removeEventListener('dragover', dragDropHandler.handleDragOver);
                dropZone.removeEventListener('dragleave', dragDropHandler.handleDragLeave);
                dropZone.removeEventListener('drop', dragDropHandler.handleDrop);
                dropZone.removeEventListener('click', dragDropHandler.handleClick);
            }
            
            // ìƒíƒœ ì´ˆê¸°í™”
            uploadState.isInitialized = false;
            uploadState.isDragging = false;
            uploadState.isUploading = false;
            uploadState.isProcessing = false;
            
            Core.logger.log('ì—…ë¡œë“œ ëª¨ë“ˆ ì œê±° ì™„ë£Œ');
        },
        
        /**
         * ëª¨ë“ˆ ì •ë³´ ë°˜í™˜
         * @returns {Object} ëª¨ë“ˆ ì •ë³´
         */
        getInfo() {
            return {
                name: UPLOAD_CONSTANTS.MODULE_NAME,
                version: UPLOAD_CONSTANTS.VERSION,
                isInitialized: uploadState.isInitialized,
                fileCount: uploadState.files.length,
                settings: uploadState.settings
            };
        }
    };
    
    // ================================================
    // ëª¨ë“ˆ ë…¸ì¶œ
    // ================================================
    
    // Upload ëª¨ë“ˆ API ë…¸ì¶œ
    window.FacilityImageSystem.Upload = {
        // ìƒìˆ˜
        CONSTANTS: UPLOAD_CONSTANTS,
        
        // ë©”ì¸ ê°ì²´
        uploader,
        
        // ë‚´ë¶€ ê°ì²´ (ê³ ê¸‰ ì‚¬ìš©ììš©)
        fileValidator,
        fileCompressor,
        dragDropHandler,
        domManager,
        
        // ìƒíƒœ (ì½ê¸° ì „ìš©)
        getState: () => ({ ...uploadState }),
        
        // í¸ì˜ í•¨ìˆ˜
        initialize: uploader.initialize.bind(uploader),
        removeFile: uploader.removeFile.bind(uploader),
        clearAllFiles: uploader.clearAllFiles.bind(uploader),
        getFiles: uploader.getFiles.bind(uploader),
        getCompressedFiles: uploader.getCompressedFiles.bind(uploader),
        getUploadState: uploader.getUploadState.bind(uploader),
        destroy: uploader.destroy.bind(uploader),
        compressImage: fileCompressor.compressImage.bind(fileCompressor)
    };
    
    // ì „ì—­ ì ‘ê·¼ì„ ìœ„í•œ ë‹¨ì¶• ì°¸ì¡°
    window.FacilityImageUpload = window.FacilityImageSystem.Upload;
    
    Core.logger.log('ì—…ë¡œë“œ ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');
    
})();
````

## File: src/main/resources/static/js/facility-manage.js
````javascript
// facility-manage.js

// ì‹œì„¤ ì‚­ì œ í•¨ìˆ˜
function deleteFacility() {
    if (!facilityId) {
        alert('ì‹œì„¤ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    if (confirm('ì •ë§ë¡œ ì‹œì„¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ì‹œì„¤ ì •ë³´ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = `/facility/delete/${facilityId}`;
        
        // CSRF í† í° ì¶”ê°€ (Spring Security ì‚¬ìš© ì‹œ)
        const csrfToken = document.querySelector('meta[name="_csrf"]');
        const csrfHeader = document.querySelector('meta[name="_csrf_header"]');
        
        if (csrfToken && csrfHeader) {
            const hiddenField = document.createElement('input');
            hiddenField.type = 'hidden';
            hiddenField.name = csrfToken.getAttribute('content');
            hiddenField.value = csrfHeader.getAttribute('content');
            form.appendChild(hiddenField);
        }
        
        document.body.appendChild(form);
        form.submit();
    }
}

// í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì‹¤í–‰
document.addEventListener('DOMContentLoaded', function() {
    // ì´ë¯¸ì§€ ë¡œë“œ ì—ëŸ¬ ì²˜ë¦¬ (default_facility.jpg ë¬´í•œ ìš”ì²­ ë°©ì§€)
    const facilityImages = document.querySelectorAll('img[alt="ì‹œì„¤ ì‚¬ì§„"], .facility-detail-image');
    facilityImages.forEach(function(facilityImage) {
        if (facilityImage && !facilityImage.classList.contains('error-handler-attached')) {
            facilityImage.classList.add('error-handler-attached');
            facilityImage.onerror = function() {
                // ì´ë¯¸ ì—ëŸ¬ ì²˜ë¦¬ë˜ì—ˆëŠ”ì§€ í™•ì¸
                if (this.classList.contains('error-handled')) {
                    return;
                }
                this.classList.add('error-handled');
                this.style.display = 'none';
                
                const placeholder = document.createElement('div');
                placeholder.className = 'bg-light rounded p-5 text-center';
                placeholder.innerHTML = '<i class="fas fa-image fa-3x text-muted"></i><p class="text-muted mt-2">ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</p>';
                this.parentNode.replaceChild(placeholder, this);
                console.log('âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì—ëŸ¬ ì²˜ë¦¬ ì™„ë£Œ (ë¬´í•œ ìš”ì²­ ë°©ì§€)');
            };
        }
    });
    
    // ì™¸ë¶€ ë§í¬ ì•ˆì „í•˜ê²Œ ì—´ê¸°
    const externalLinks = document.querySelectorAll('a[target="_blank"]');
    externalLinks.forEach(link => {
        link.rel = 'noopener noreferrer';
    });
});
````

## File: src/main/resources/static/js/job-edit.js
````javascript
/**
 * êµ¬ì¸êµ¬ì§ ìˆ˜ì • í˜ì´ì§€ JavaScript
 * job-detail.jsì™€ì˜ ì¶©ëŒ ë°©ì§€ë¥¼ ìœ„í•œ ë³„ë„ íŒŒì¼
 */

// ì „ì—­ ë³€ìˆ˜ë¡œ ì œì¶œ ìƒíƒœ ê´€ë¦¬
let isSubmitting = false;
let formInitialized = false;

// DOM ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    console.log('êµ¬ì¸êµ¬ì§ ìˆ˜ì • í˜ì´ì§€ JavaScript ë¡œë“œë¨');
    
    // ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€
    if (formInitialized) {
        console.log('ì´ë¯¸ ì´ˆê¸°í™”ë¨ - ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€');
        return;
    }
    
    // í¼ ìœ íš¨ì„± ê²€ì‚¬ ì´ˆê¸°í™”
    initFormValidation();
    
    // ì·¨ì†Œ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    initCancelButton();
    
    // ì…ë ¥ í•„ë“œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
    initInputFieldHandlers();
    
    // ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° ì•ˆì „ ì´ˆê¸°í™”
    initSafeRichTextEditor();
    
    formInitialized = true;
    console.log('í¼ ì´ˆê¸°í™” ì™„ë£Œ');
});

/**
 * í¼ ìœ íš¨ì„± ê²€ì‚¬ ì´ˆê¸°í™” (ì¤‘ë³µ ë°©ì§€)
 */
function initFormValidation() {
    const form = document.querySelector('form');
    if (!form) return;
    
    // ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±° (ì¤‘ë³µ ë°©ì§€)
    const newForm = form.cloneNode(true);
    form.parentNode.replaceChild(newForm, form);
    
    // ìƒˆë¡œìš´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    newForm.addEventListener('submit', function(e) {
        console.log('í¼ ì œì¶œ ì‹œì‘ - ê²€ì¦ ì¤‘...');
        
        // ì¤‘ë³µ ì œì¶œ ë°©ì§€
        if (isSubmitting) {
            console.log('ì´ë¯¸ ì œì¶œ ì¤‘ - ì¤‘ë³µ ì œì¶œ ë°©ì§€');
            e.preventDefault();
            return false;
        }
        
        // ì œì¶œ ì „ ê°’ ì •ë¦¬
        cleanFormValues();
        
        if (!validateForm()) {
            console.log('í¼ ê²€ì¦ ì‹¤íŒ¨ - ì œì¶œ ì¤‘ë‹¨');
            e.preventDefault();
            return false;
        }
        
        // ì œì¶œ ìƒíƒœ í”Œë˜ê·¸ ì„¤ì •
        isSubmitting = true;
        
        // ì œì¶œ ë²„íŠ¼ ë¹„í™œì„±í™”
        const submitBtn = newForm.querySelector('button[type="submit"]');
        if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i>ìˆ˜ì • ì¤‘...';
        }
        
        console.log('í¼ ê²€ì¦ ì„±ê³µ - ì œì¶œ ê³„ì†');
        return true;
    });
}

/**
 * ì œì¶œ ì „ í¼ ê°’ ì •ë¦¬ (ì¤‘ë³µ ë° ëˆ„ì  ë°©ì§€)
 */
function cleanFormValues() {
    console.log('í¼ ê°’ ì •ë¦¬ ì‹œì‘');
    
    // ê¸‰ì—¬ ì„¤ëª… ì •ë¦¬
    const salaryDescription = document.querySelector('[name="salaryDescription"]');
    if (salaryDescription && salaryDescription.value) {
        const cleanValue = salaryDescription.value.trim();
        // ì¤‘ë³µëœ ê°’ ì œê±° (ì½¤ë§ˆë¡œ ë¶„ë¦¬ëœ ê²½ìš°)
        const uniqueValues = [...new Set(cleanValue.split(',').map(v => v.trim()).filter(v => v))];
        salaryDescription.value = uniqueValues.join(', ');
        console.log('ê¸‰ì—¬ ì„¤ëª… ì •ë¦¬ë¨:', salaryDescription.value);
    }
    
    // ê·¼ë¬´ì‹œê°„ ì •ë¦¬
    const workHours = document.querySelector('[name="workHours"]');
    if (workHours && workHours.value) {
        const cleanValue = workHours.value.trim();
        // ì¤‘ë³µëœ ê°’ ì œê±°
        const uniqueValues = [...new Set(cleanValue.split(',').map(v => v.trim()).filter(v => v))];
        workHours.value = uniqueValues.join(', ');
        console.log('ê·¼ë¬´ì‹œê°„ ì •ë¦¬ë¨:', workHours.value);
    }
    
    // ê¸°íƒ€ í…ìŠ¤íŠ¸ í•„ë“œ ì •ë¦¬
    const textFields = ['title', 'facilityName', 'workLocation', 'contactPhone'];
    textFields.forEach(fieldName => {
        const field = document.querySelector(`[name="${fieldName}"]`);
        if (field && field.value) {
            field.value = field.value.trim();
        }
    });
    
    console.log('í¼ ê°’ ì •ë¦¬ ì™„ë£Œ');
}

/**
 * í¼ ìœ íš¨ì„± ê²€ì‚¬ (êµ¬ì¸ê¸€/êµ¬ì§ê¸€ êµ¬ë¶„)
 */
function validateForm() {
    const jobTypeInput = document.querySelector('[name="jobType"]');
    const jobType = jobTypeInput?.value || '';
    
    console.log('ê²€ì¦ ì‹œì‘ - jobType:', jobType);
    
    // ê³µí†µ í•„ìˆ˜ í•„ë“œ ê²€ì‚¬
    const title = document.querySelector('[name="title"]')?.value?.trim() || '';
    const content = document.querySelector('[name="content"]')?.value?.trim() || '';
    const workType = document.querySelector('[name="workType"]')?.value || '';
    const status = document.querySelector('[name="status"]')?.value || '';
    
    if (!title) {
        alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        document.querySelector('[name="title"]')?.focus();
        return false;
    }
    
    if (!content) {
        alert('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        document.querySelector('[name="content"]')?.focus();
        return false;
    }
    
    if (!workType) {
        alert('ê³ ìš©í˜•íƒœë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
        document.querySelector('[name="workType"]')?.focus();
        return false;
    }
    
    if (!status) {
        alert('ê²Œì‹œê¸€ ìƒíƒœë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
        document.querySelector('[name="status"]')?.focus();
        return false;
    }
    
    // êµ¬ì¸ê¸€ ì „ìš© í•„ìˆ˜ í•„ë“œ ê²€ì‚¬
    if (jobType === 'RECRUIT') {
        console.log('êµ¬ì¸ê¸€ ê²€ì¦ ì¤‘...');
        const facilityName = document.querySelector('[name="facilityName"]')?.value?.trim() || '';
        const position = document.querySelector('[name="position"]')?.value || '';
        
        if (!facilityName) {
            alert('íšŒì‚¬ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            document.querySelector('[name="facilityName"]')?.focus();
            return false;
        }
        
        if (!position) {
            alert('ì§ì¢…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
            document.querySelector('[name="position"]')?.focus();
            return false;
        }
    }
    
    // êµ¬ì§ê¸€ ì „ìš© í•„ìˆ˜ í•„ë“œ ê²€ì‚¬
    if (jobType === 'SEARCH') {
        console.log('êµ¬ì§ê¸€ ê²€ì¦ ì¤‘...');
        const workLocation = document.querySelector('[name="workLocation"]')?.value?.trim() || '';
        const contactPhone = document.querySelector('[name="contactPhone"]')?.value?.trim() || '';
        const position = document.querySelector('[name="position"]')?.value || '';
        
        if (!workLocation) {
            alert('í¬ë§ ê·¼ë¬´ì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            document.querySelector('[name="workLocation"]')?.focus();
            return false;
        }
        
        if (!contactPhone) {
            alert('ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            document.querySelector('[name="contactPhone"]')?.focus();
            return false;
        }
        
        if (!position) {
            alert('ì§ì¢…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
            document.querySelector('[name="position"]')?.focus();
            return false;
        }
    }
    
    // ì œëª© ê¸¸ì´ ê²€ì‚¬
    if (title.length > 100) {
        alert('ì œëª©ì€ 100ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        document.querySelector('[name="title"]')?.focus();
        return false;
    }
    
    // ë‚´ìš© ê¸¸ì´ ê²€ì‚¬
    if (content.length > 2000) {
        alert('ë‚´ìš©ì€ 2000ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        document.querySelector('[name="content"]')?.focus();
        return false;
    }
    
    console.log('ëª¨ë“  ê²€ì¦ í†µê³¼');
    return true;
}

/**
 * ì…ë ¥ í•„ë“œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì´ˆê¸°í™”
 */
function initInputFieldHandlers() {
    // ê¸‰ì—¬ ì…ë ¥ í•„ë“œ í•¸ë“¤ëŸ¬
    const salaryInputs = document.querySelectorAll('[name="salaryMin"], [name="salaryMax"]');
    salaryInputs.forEach(input => {
        if (input && input.type === 'number') {
            // ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
            input.removeEventListener('blur', handleSalaryFormat);
            // ìƒˆ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            input.addEventListener('blur', handleSalaryFormat);
        }
    });
    
    // í…ìŠ¤íŠ¸ í•„ë“œ ì¤‘ë³µ ì…ë ¥ ë°©ì§€
    const textInputs = document.querySelectorAll('[name="salaryDescription"], [name="workHours"]');
    textInputs.forEach(input => {
        if (input) {
            input.removeEventListener('blur', handleTextFieldClean);
            input.addEventListener('blur', handleTextFieldClean);
        }
    });
}

/**
 * ê¸‰ì—¬ ì…ë ¥ í•„ë“œ í¬ë§·íŒ… í•¸ë“¤ëŸ¬
 */
function handleSalaryFormat(event) {
    const input = event.target;
    let value = input.value.replace(/,/g, '');
    if (value && !isNaN(value)) {
        input.value = Number(value).toLocaleString();
    }
}

/**
 * í…ìŠ¤íŠ¸ í•„ë“œ ì •ë¦¬ í•¸ë“¤ëŸ¬ (ì¤‘ë³µ ì œê±°)
 */
function handleTextFieldClean(event) {
    const input = event.target;
    if (input.value) {
        const cleanValue = input.value.trim();
        // ì¤‘ë³µëœ ê°’ ì œê±° (ì½¤ë§ˆë¡œ ë¶„ë¦¬ëœ ê²½ìš°)
        const uniqueValues = [...new Set(cleanValue.split(',').map(v => v.trim()).filter(v => v))];
        input.value = uniqueValues.join(', ');
    }
}

/**
 * ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° ì•ˆì „ ì´ˆê¸°í™”
 */
function initSafeRichTextEditor() {
    const contentTextarea = document.getElementById('contentTextarea');
    if (contentTextarea && contentTextarea.hasAttribute('data-rich-editor')) {
        // ê¸°ì¡´ ì—ë””í„° ì¸ìŠ¤í„´ìŠ¤ê°€ ìˆë‹¤ë©´ ì œê±°
        if (window.richTextEditorInstance) {
            try {
                window.richTextEditorInstance.destroy();
                console.log('ê¸°ì¡´ ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° ì œê±°ë¨');
            } catch (e) {
                console.log('ì—ë””í„° ì œê±° ì¤‘ ì˜¤ë¥˜ (ë¬´ì‹œ):', e.message);
            }
        }
        
        // ìƒˆ ì—ë””í„° ì´ˆê¸°í™”ëŠ” RichTextEditorV2ê°€ ë¡œë“œëœ í›„ì— ìˆ˜í–‰
        setTimeout(() => {
            if (typeof window.RichTextEditorV2 !== 'undefined') {
                try {
                    window.richTextEditorInstance = new window.RichTextEditorV2(contentTextarea);
                    console.log('ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° ì•ˆì „ ì´ˆê¸°í™” ì™„ë£Œ');
                } catch (e) {
                    console.log('ì—ë””í„° ì´ˆê¸°í™” ì˜¤ë¥˜:', e.message);
                }
            }
        }, 500);
    }
}

/**
 * ì·¨ì†Œ ë²„íŠ¼ ì´ë²¤íŠ¸ ì´ˆê¸°í™”
 */
function initCancelButton() {
    const cancelBtn = document.querySelector('.btn-secondary');
    if (!cancelBtn) return;
    
    cancelBtn.addEventListener('click', function(e) {
        if (confirm('ìˆ˜ì •ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\në³€ê²½ì‚¬í•­ì´ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')) {
            // ì·¨ì†Œ ë²„íŠ¼ì˜ hrefë¡œ ì´ë™ (ì´ë¯¸ ì„¤ì •ë¨)
            return true;
        } else {
            e.preventDefault();
            return false;
        }
    });
}
````

## File: src/main/resources/static/js/myinfo.js
````javascript
// ë‚´ì •ë³´ìˆ˜ì • í˜ì´ì§€ JavaScript (ë‹¨ìˆœí™” ë²„ì „)
// í¬ë¡­ ê¸°ëŠ¥ì€ ë³„ë„ í˜ì´ì§€ì—ì„œ ì²˜ë¦¬

document.addEventListener('DOMContentLoaded', function() {
    // DOM ìš”ì†Œ ì„ íƒ
    const elements = {
        form: document.getElementById('mypageForm'),
        phone: document.getElementById('phone'),
        name: document.getElementById('name'),
        email: document.getElementById('email')
    };

    // ê¸°ë³¸ ê¸°ëŠ¥ ì´ˆê¸°í™”
    setupPhoneFormatting();
    setupFormValidation();
    
    console.log('ë‚´ì •ë³´ìˆ˜ì • í˜ì´ì§€ JavaScript ì´ˆê¸°í™” ì™„ë£Œ (ë‹¨ìˆœí™”)');

    // íœ´ëŒ€í° ë²ˆí˜¸ ìë™ í¬ë§·íŒ… (ë§¤ìš° ê°„ë‹¨í•œ ë²„ì „)
    function setupPhoneFormatting() {
        if (!elements.phone) return;

        elements.phone.addEventListener('input', function(event) {
            autoFormatPhone(event.target);
        });
        
        // ë¶™ì—¬ë„£ê¸° ì‹œì—ë„ í¬ë§·íŒ… ì ìš©
        elements.phone.addEventListener('paste', function(event) {
            setTimeout(() => autoFormatPhone(event.target), 10);
        });
    }

    // ìŠ¤ë§ˆíŠ¸í•œ ì „í™”ë²ˆí˜¸ í¬ë§·íŒ… í•¨ìˆ˜ (ì •í™•í•œ ì»¤ì„œ ìœ„ì¹˜ ì¶”ì )
    function autoFormatPhone(input) {
        const cursorPos = input.selectionStart;
        const oldValue = input.value;
        
        // ì»¤ì„œ ì•ì— ìˆëŠ” ìˆ«ìì˜ ê°œìˆ˜ ê³„ì‚° (í•˜ì´í”ˆ ì œì™¸)
        const numbersBeforeCursor = oldValue.substring(0, cursorPos).replace(/[^\d]/g, '').length;
        
        // ìˆ«ìë§Œ ì¶”ì¶œ
        const numbers = input.value.replace(/[^\d]/g, '');
        
        // ìµœëŒ€ 11ìë¦¬ ì œí•œ
        const limitedNumbers = numbers.substring(0, 11);
        
        // í¬ë§·íŒ… ì ìš©
        let formatted = formatPhoneNumber(limitedNumbers);
        
        // ê°’ ì—…ë°ì´íŠ¸
        input.value = formatted;
        
        // ìƒˆë¡œìš´ ì»¤ì„œ ìœ„ì¹˜ ê³„ì‚°
        let newCursorPos = 0;
        let numberCount = 0;
        
        for (let i = 0; i < formatted.length; i++) {
            if (/\d/.test(formatted[i])) {
                numberCount++;
                if (numberCount === numbersBeforeCursor) {
                    newCursorPos = i + 1;
                    break;
                }
            }
        }
        
        // ìˆ«ìê°€ ì¶”ê°€ëœ ê²½ìš° ë§ˆì§€ë§‰ ìˆ«ì ë’¤ë¡œ ì»¤ì„œ ì´ë™
        if (numberCount < numbersBeforeCursor) {
            newCursorPos = formatted.length;
        }
        
        // ì»¤ì„œê°€ í•˜ì´í”ˆ ìœ„ì— ìˆìœ¼ë©´ ë‹¤ìŒ ìœ„ì¹˜ë¡œ ì´ë™
        if (formatted[newCursorPos] === '-') {
            newCursorPos++;
        }
        
        // ì»¤ì„œ ìœ„ì¹˜ ì„¤ì • (ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬)
        setTimeout(() => {
            input.setSelectionRange(newCursorPos, newCursorPos);
        }, 0);
    }

    // íœ´ëŒ€í° ë²ˆí˜¸ í¬ë§·íŒ… (010ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ë²ˆí˜¸ë§Œ)
    function formatPhoneNumber(numbers) {
        if (numbers.length === 0) return '';
        
        // íœ´ëŒ€í° ë²ˆí˜¸ë§Œ í—ˆìš© (010, 011, 016, 017, 018, 019)
        if (numbers.startsWith('01')) {
            if (numbers.length <= 3) {
                return numbers;
            } else if (numbers.length <= 7) {
                return numbers.substring(0, 3) + '-' + numbers.substring(3);
            } else {
                return numbers.substring(0, 3) + '-' + numbers.substring(3, 7) + '-' + numbers.substring(7);
            }
        }
        
        // 010ìœ¼ë¡œ ì‹œì‘í•˜ì§€ ì•Šìœ¼ë©´ ì…ë ¥ ì œí•œ (íœ´ëŒ€í° ë²ˆí˜¸ë§Œ í—ˆìš©)
        return numbers.startsWith('0') ? numbers.substring(0, 1) : numbers;
    }


    // í¼ ì œì¶œ ì „ ìœ íš¨ì„± ê²€ì‚¬
    function setupFormValidation() {
        if (!elements.form) return;

        elements.form.addEventListener('submit', function(event) {
            let isValid = true;
            const errors = [];

            // ì´ë¦„ ê²€ì‚¬
            if (elements.name && elements.name.value.trim().length < 2) {
                isValid = false;
                errors.push('ì´ë¦„ì€ 2ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                elements.name.classList.add('is-invalid');
            }

            // ì´ë©”ì¼ ê²€ì‚¬
            if (elements.email && elements.email.value.trim()) {
                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailPattern.test(elements.email.value.trim())) {
                    isValid = false;
                    errors.push('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.');
                    elements.email.classList.add('is-invalid');
                }
            }

            // íœ´ëŒ€í° ë²ˆí˜¸ ê²€ì‚¬
            if (elements.phone && elements.phone.value.trim()) {
                const phonePattern = /^01[0-9]-\d{3,4}-\d{4}$/;
                if (!phonePattern.test(elements.phone.value.trim())) {
                    isValid = false;
                    errors.push('ì˜¬ë°”ë¥¸ íœ´ëŒ€í° ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.');
                    elements.phone.classList.add('is-invalid');
                }
            }

            if (!isValid) {
                event.preventDefault();
                alert('ì…ë ¥ ì˜¤ë¥˜:\n' + errors.join('\n'));
                return false;
            }

            // ì œì¶œ ë²„íŠ¼ ë¹„í™œì„±í™”
            const submitButton = elements.form.querySelector('button[type="submit"]');
            if (submitButton) {
                submitButton.disabled = true;
                submitButton.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>ì €ì¥ ì¤‘...';
            }

            return true;
        });
    }

    // ì…ë ¥ í•„ë“œ í¬ì»¤ìŠ¤ ì‹œ ì—ëŸ¬ ìƒíƒœ ì œê±°
    [elements.name, elements.email, elements.phone].forEach(field => {
        if (field) {
            field.addEventListener('focus', function() {
                this.classList.remove('is-invalid');
            });
        }
    });
});
````

## File: src/main/resources/static/js/review-detail.js
````javascript
/**
 * ë¦¬ë·° ìƒì„¸ë³´ê¸° í˜ì´ì§€ JavaScript
 * Thymeleaf ì¶©ëŒ ë°©ì§€ë¥¼ ìœ„í•´ ì™„ì „ ë¶„ë¦¬ëœ ë²„ì „
 */

// ì „ì—­ ë³€ìˆ˜
let currentReviewId = null;

// DOM ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    console.log('ë¦¬ë·° ìƒì„¸ë³´ê¸° í˜ì´ì§€ JavaScript ë¡œë“œë¨');
    
    // URLì—ì„œ ë¦¬ë·° ID ì¶”ì¶œ
    currentReviewId = extractReviewIdFromUrl();
    console.log('í˜„ì¬ ë¦¬ë·° ID:', currentReviewId);
    
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
    initializeEventListeners();
    
    // ì´ë¯¸ì§€ ëª¨ë‹¬ ì´ˆê¸°í™”
    initializeImageModal();
});

/**
 * URLì—ì„œ ë¦¬ë·° ID ì¶”ì¶œ
 */
function extractReviewIdFromUrl() {
    const path = window.location.pathname;
    const segments = path.split('/');
    const detailIndex = segments.findIndex(segment => segment === 'detail');
    
    if (detailIndex !== -1 && detailIndex < segments.length - 1) {
        return segments[detailIndex + 1];
    }
    
    console.warn('URLì—ì„œ ë¦¬ë·° IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', path);
    return null;
}

/**
 * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
 */
function initializeEventListeners() {
    // data-action ì†ì„±ì„ ê°€ì§„ ëª¨ë“  ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    const actionButtons = document.querySelectorAll('[data-action]');
    
    actionButtons.forEach(button => {
        const action = button.getAttribute('data-action');
        console.log('ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡:', action);
        
        switch(action) {
            case 'likeReview':
                button.addEventListener('click', handleLikeReview);
                break;
            case 'deleteReview':
                button.addEventListener('click', handleDeleteReview);
                break;
            case 'shareReview':
                button.addEventListener('click', handleShareReview);
                break;
            case 'reportReview':
                button.addEventListener('click', handleReportReview);
                break;
            default:
                console.warn('ì•Œ ìˆ˜ ì—†ëŠ” ì•¡ì…˜:', action);
        }
    });
    
    console.log('ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™” ì™„ë£Œ, ë“±ë¡ëœ ë²„íŠ¼ ìˆ˜:', actionButtons.length);
}

/**
 * ì´ë¯¸ì§€ ëª¨ë‹¬ ì´ˆê¸°í™”
 */
function initializeImageModal() {
    const modal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const reviewImages = document.querySelectorAll('.review-image');
    const closeBtn = document.querySelector('.close-modal');
    
    if (!modal || !modalImage) {
        console.log('ì´ë¯¸ì§€ ëª¨ë‹¬ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
        return;
    }
    
    // ë¦¬ë·° ì´ë¯¸ì§€ í´ë¦­ ì´ë²¤íŠ¸
    reviewImages.forEach(img => {
        img.style.cursor = 'pointer';
        img.addEventListener('click', function() {
            modal.style.display = 'block';
            modalImage.src = this.src;
            modalImage.alt = this.alt || 'ë¦¬ë·° ì´ë¯¸ì§€';
        });
    });
    
    // ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼
    if (closeBtn) {
        closeBtn.addEventListener('click', function() {
            modal.style.display = 'none';
        });
    }
    
    // ëª¨ë‹¬ ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
    modal.addEventListener('click', function(e) {
        if (e.target === modal) {
            modal.style.display = 'none';
        }
    });
    
    // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && modal.style.display === 'block') {
            modal.style.display = 'none';
        }
    });
    
    console.log('ì´ë¯¸ì§€ ëª¨ë‹¬ ì´ˆê¸°í™” ì™„ë£Œ, ì´ë¯¸ì§€ ìˆ˜:', reviewImages.length);
}

/**
 * ë¦¬ë·° ì¶”ì²œ ì²˜ë¦¬
 */
function handleLikeReview(event) {
    event.preventDefault();
    event.stopPropagation();
    
    if (!currentReviewId) {
        showAlert('error', 'ë¦¬ë·° ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    console.log('ì¶”ì²œ ìš”ì²­ ì‹œì‘:', currentReviewId);
    
    // ë²„íŠ¼ ë¹„í™œì„±í™”
    const button = event.target.closest('button');
    const originalHtml = button.innerHTML;
    button.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i>ì²˜ë¦¬ ì¤‘...';
    button.disabled = true;
    
    fetch(`/review/like/${currentReviewId}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => {
        console.log('ì¶”ì²œ ì‘ë‹µ:', response.status);
        return response.json();
    })
    .then(data => {
        console.log('ì¶”ì²œ ì‘ë‹µ ë°ì´í„°:', data);
        if (data.success) {
            // ì¶”ì²œ ìˆ˜ ì—…ë°ì´íŠ¸
            const likeCountElement = document.getElementById('likeCount');
            if (likeCountElement) {
                likeCountElement.textContent = data.likeCount || 0;
            }
            
            showAlert('success', data.message || 'ì¶”ì²œí•˜ì˜€ìŠµë‹ˆë‹¤.');
        } else {
            showAlert('error', data.message || 'ì¶”ì²œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
    })
    .catch(error => {
        console.error('ì¶”ì²œ ì²˜ë¦¬ ì˜¤ë¥˜:', error);
        showAlert('error', 'ì¶”ì²œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    })
    .finally(() => {
        // ë²„íŠ¼ ìƒíƒœ ë³µì›
        button.innerHTML = originalHtml;
        button.disabled = false;
    });
}

/**
 * ë¦¬ë·° ì‚­ì œ ì²˜ë¦¬
 */
function handleDeleteReview(event) {
    event.preventDefault();
    event.stopPropagation();
    
    if (!currentReviewId) {
        showAlert('error', 'ë¦¬ë·° ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    if (!confirm('ì •ë§ ì´ ë¦¬ë·°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ë¦¬ë·°ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
        return;
    }
    
    console.log('ì‚­ì œ ìš”ì²­ ì‹œì‘:', currentReviewId);
    
    // ì‚­ì œ ë²„íŠ¼ ë¹„í™œì„±í™” ë° ë¡œë”© ìƒíƒœ í‘œì‹œ
    const button = event.target.closest('button');
    const originalHtml = button.innerHTML;
    button.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i>ì‚­ì œ ì¤‘...';
    button.disabled = true;
    
    fetch(`/review/delete/${currentReviewId}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => {
        console.log('ì‚­ì œ ì‘ë‹µ:', response.status);
        if (response.ok) {
            showAlert('success', 'ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            // 2ì´ˆ í›„ ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™
            setTimeout(() => {
                window.location.href = '/review';
            }, 2000);
        } else if (response.redirected) {
            // ë¦¬ë‹¤ì´ë ‰íŠ¸ëœ ê²½ìš°
            window.location.href = response.url;
        } else {
            throw new Error('ì‚­ì œ ìš”ì²­ì´ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    })
    .catch(error => {
        console.error('ì‚­ì œ ì²˜ë¦¬ ì˜¤ë¥˜:', error);
        showAlert('error', 'ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        
        // ë²„íŠ¼ ìƒíƒœ ë³µì›
        button.innerHTML = originalHtml;
        button.disabled = false;
    });
}

/**
 * ë¦¬ë·° ê³µìœ  ì²˜ë¦¬
 */
function handleShareReview(event) {
    event.preventDefault();
    event.stopPropagation();
    
    const currentUrl = window.location.href;
    const reviewTitle = document.querySelector('h1, .card-title')?.textContent || 'ë¦¬ë·°';
    
    console.log('ê³µìœ  ìš”ì²­:', { url: currentUrl, title: reviewTitle });
    
    // Web Share API ì§€ì› í™•ì¸
    if (navigator.share) {
        navigator.share({
            title: reviewTitle,
            text: 'ì´ ë¦¬ë·°ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!',
            url: currentUrl
        }).then(() => {
            console.log('ê³µìœ  ì„±ê³µ');
            showAlert('success', 'ê³µìœ ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
        }).catch(error => {
            console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì‹¤íŒ¨:', error);
            // ê³µìœ  ì·¨ì†ŒëŠ” ì—ëŸ¬ê°€ ì•„ë‹ˆë¯€ë¡œ ë©”ì‹œì§€ í‘œì‹œí•˜ì§€ ì•ŠìŒ
        });
    } else {
        // í´ë¦½ë³´ë“œì— URL ë³µì‚¬
        if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(currentUrl).then(() => {
                showAlert('success', 'ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }).catch(error => {
                console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', error);
                fallbackCopyToClipboard(currentUrl);
            });
        } else {
            fallbackCopyToClipboard(currentUrl);
        }
    }
}

/**
 * í´ë¦½ë³´ë“œ ë³µì‚¬ ëŒ€ì²´ ë°©ë²•
 */
function fallbackCopyToClipboard(text) {
    const textArea = document.createElement('textarea');
    textArea.value = text;
    textArea.style.position = 'fixed';
    textArea.style.left = '-999999px';
    textArea.style.top = '-999999px';
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();
    
    try {
        const successful = document.execCommand('copy');
        if (successful) {
            showAlert('success', 'ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
        } else {
            showAlert('error', 'ë§í¬ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    } catch (err) {
        console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
        showAlert('error', 'ë§í¬ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    }
    
    document.body.removeChild(textArea);
}

/**
 * ë¦¬ë·° ì‹ ê³  ì²˜ë¦¬
 */
function handleReportReview(event) {
    event.preventDefault();
    event.stopPropagation();
    
    if (!currentReviewId) {
        showAlert('error', 'ë¦¬ë·° ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    const reportReason = prompt(
        'ì‹ ê³  ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”:\n\n' +
        'â€¢ ë¶€ì ì ˆí•œ ë‚´ìš©\n' +
        'â€¢ í—ˆìœ„ì •ë³´\n' +
        'â€¢ ìŠ¤íŒ¸/ê´‘ê³ \n' +
        'â€¢ ê¸°íƒ€'
    );
    
    if (!reportReason || reportReason.trim() === '') {
        return; // ì‚¬ìš©ìê°€ ì·¨ì†Œí•˜ê±°ë‚˜ ë¹ˆ ë‚´ìš©
    }
    
    if (!confirm('ì´ ë¦¬ë·°ë¥¼ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        return;
    }
    
    console.log('ì‹ ê³  ìš”ì²­:', { reviewId: currentReviewId, reason: reportReason });
    
    // ë²„íŠ¼ ë¹„í™œì„±í™”
    const button = event.target.closest('button');
    const originalHtml = button.innerHTML;
    button.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i>ì‹ ê³  ì¤‘...';
    button.disabled = true;
    
    fetch(`/review/report/${currentReviewId}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            reason: reportReason.trim()
        })
    })
    .then(response => response.json())
    .then(data => {
        console.log('ì‹ ê³  ì‘ë‹µ:', data);
        if (data.success) {
            showAlert('success', data.message || 'ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ê²€í†  í›„ ì ì ˆí•œ ì¡°ì¹˜ë¥¼ ì·¨í•˜ê² ìŠµë‹ˆë‹¤.');
        } else {
            showAlert('error', data.message || 'ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
    })
    .catch(error => {
        console.error('ì‹ ê³  ì²˜ë¦¬ ì˜¤ë¥˜:', error);
        showAlert('error', 'ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    })
    .finally(() => {
        // ë²„íŠ¼ ìƒíƒœ ë³µì›
        button.innerHTML = originalHtml;
        button.disabled = false;
    });
}

/**
 * ì•Œë¦¼ ë©”ì‹œì§€ í‘œì‹œ
 */
function showAlert(type, message) {
    // ê¸°ì¡´ ì•Œë¦¼ ì œê±°
    const existingAlert = document.querySelector('.dynamic-alert');
    if (existingAlert) {
        existingAlert.remove();
    }
    
    // ìƒˆ ì•Œë¦¼ ìƒì„±
    const alertDiv = document.createElement('div');
    alertDiv.className = `alert alert-${type === 'success' ? 'success' : 'danger'} alert-dismissible fade show dynamic-alert`;
    alertDiv.style.position = 'fixed';
    alertDiv.style.top = '80px';
    alertDiv.style.left = '50%';
    alertDiv.style.transform = 'translateX(-50%)';
    alertDiv.style.zIndex = '9999';
    alertDiv.style.minWidth = '300px';
    alertDiv.style.maxWidth = '500px';
    
    alertDiv.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-triangle'} me-2"></i>
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    `;
    
    document.body.appendChild(alertDiv);
    
    // 5ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 5000);
    
    console.log('ì•Œë¦¼ í‘œì‹œ:', type, message);
}

// ì „ì—­ í•¨ìˆ˜ë¡œ ë…¸ì¶œ (í˜¹ì‹œ ë‹¤ë¥¸ ê³³ì—ì„œ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ë¥¼ ìœ„í•´)
window.likeReview = handleLikeReview;
window.deleteReview = handleDeleteReview;
window.shareReview = handleShareReview;
window.reportReview = handleReportReview;
````

## File: src/main/resources/static/js/review-write.js
````javascript
// ë¦¬ë·° ì‘ì„± í˜ì´ì§€ JavaScript
// íŒ€ì› D ë‹´ë‹¹ - ì™„ì „íˆ ë¶„ë¦¬ëœ JavaScript íŒŒì¼

document.addEventListener('DOMContentLoaded', function() {
    // ìƒìˆ˜ ì •ì˜
    const RATING_TEXTS = ['', 'ë§¤ìš° ë¶ˆë§Œì¡±', 'ë¶ˆë§Œì¡±', 'ë³´í†µ', 'ë§Œì¡±', 'ë§¤ìš° ë§Œì¡±'];
    const MIN_CONTENT_LENGTH = 10;
    const MAX_CONTENT_LENGTH = 2000;

    // DOM ìš”ì†Œ ì„ íƒ
    const elements = {
        form: document.getElementById('reviewForm'),
        facilitySelect: document.getElementById('facilitySelect'),
        facilityId: document.getElementById('facilityId'),
        title: document.getElementById('title'),
        content: document.getElementById('content'),
        contentLength: document.getElementById('contentLength'),
        overallRating: document.getElementById('overallRating'),
        ratingValue: document.getElementById('ratingValue'),
        ratingText: document.getElementById('ratingText'),
        submitButton: document.getElementById('submitButton'),
        detailedRatings: document.querySelectorAll('.detailed-rating')
    };

    // ë””ë²„ê¹…: DOM ìš”ì†Œ í™•ì¸
    console.log('ë³„ì  ê´€ë ¨ DOM ìš”ì†Œ:', {
        overallRating: elements.overallRating,
        ratingValue: elements.ratingValue,
        ratingText: elements.ratingText,
        detailedRatings: elements.detailedRatings,
        detailedRatingsCount: elements.detailedRatings.length
    });

    // ì„¸ë¶€ í‰ì  ì»¨í…Œì´ë„ˆ í™•ì¸
    elements.detailedRatings.forEach((container, index) => {
        console.log(`ì„¸ë¶€ í‰ì  ì»¨í…Œì´ë„ˆ ${index + 1}:`, {
            container: container,
            field: container.dataset.field,
            stars: container.querySelectorAll('.star').length,
            ratingGroup: container.closest('.rating-group'),
            inputElement: container.closest('.rating-group')?.querySelector('.detailed-rating-input')
        });
    });

    // ë³„ì  UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateStars(container, rating) {
        if (!container) {
            console.warn('ë³„ì  ì»¨í…Œì´ë„ˆê°€ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }

        console.log('ë³„ì  ì—…ë°ì´íŠ¸:', { container, rating });
        const stars = container.querySelectorAll('.star');
        stars.forEach((star, index) => {
            if (index < rating) {
                star.classList.add('active');
            } else {
                star.classList.remove('active');
            }
        });
    }

    // ì‹œì„¤ ì„ íƒ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    if (elements.facilitySelect) {
        elements.facilitySelect.addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
            const facilityId = this.value;
            const status = selectedOption.dataset.status;

            console.log('ì‹œì„¤ ì„ íƒ:', { facilityId, status });

            // ì‹œì„¤ ID ì„¤ì •
            if (elements.facilityId) {
                elements.facilityId.value = facilityId;
            }

            // ì‹œì„¤ ìƒíƒœì— ë”°ë¥¸ ì²˜ë¦¬
            if (facilityId && status !== 'ì •ìƒ') {
                alert('ì„ íƒí•  ìˆ˜ ì—†ëŠ” ì‹œì„¤ì…ë‹ˆë‹¤: ' + status);
                this.value = '';
                if (elements.facilityId) {
                    elements.facilityId.value = '';
                }
            }
        });
    }

    // ë‚´ìš© ê¸¸ì´ ì²´í¬ ë° í‘œì‹œ
    if (elements.content && elements.contentLength) {
        elements.content.addEventListener('input', function() {
            const length = this.value.trim().length;
            elements.contentLength.textContent = length;

            // ê¸¸ì´ ìœ íš¨ì„± í‘œì‹œ
            if (length < MIN_CONTENT_LENGTH) {
                elements.contentLength.classList.remove('text-success');
                elements.contentLength.classList.add('text-danger');
            } else if (length > MAX_CONTENT_LENGTH) {
                elements.contentLength.classList.remove('text-success');
                elements.contentLength.classList.add('text-danger');
            } else {
                elements.contentLength.classList.remove('text-danger');
                elements.contentLength.classList.add('text-success');
            }
        });

        // ì´ˆê¸° ë‚´ìš© ê¸¸ì´ í‘œì‹œ
        elements.content.dispatchEvent(new Event('input'));
    }

    // ì „ì²´ í‰ì  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    if (elements.overallRating) {
        const stars = elements.overallRating.querySelectorAll('.star');
        
        // ë³„ì  í´ë¦­ ì´ë²¤íŠ¸
        stars.forEach(star => {
            star.addEventListener('click', function() {
                const rating = parseInt(this.dataset.rating);
                console.log('ì „ì²´ í‰ì  í´ë¦­:', { rating, target: this });

                // hidden input ì—…ë°ì´íŠ¸
                elements.ratingValue.value = rating;
                
                // UI ì—…ë°ì´íŠ¸
                updateStars(elements.overallRating, rating);
                elements.ratingText.textContent = RATING_TEXTS[rating];

                console.log('ì „ì²´ í‰ì  ì—…ë°ì´íŠ¸ ì™„ë£Œ:', {
                    rating,
                    text: RATING_TEXTS[rating],
                    inputValue: elements.ratingValue.value
                });
            });

            // ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì´ë²¤íŠ¸
            star.addEventListener('mouseover', function() {
                const rating = parseInt(this.dataset.rating);
                updateStars(elements.overallRating, rating);
                elements.ratingText.textContent = RATING_TEXTS[rating];
            });

            // ë§ˆìš°ìŠ¤ ì•„ì›ƒ ì´ë²¤íŠ¸
            star.addEventListener('mouseout', function() {
                const rating = parseInt(elements.ratingValue.value) || 0;
                updateStars(elements.overallRating, rating);
                elements.ratingText.textContent = rating ? RATING_TEXTS[rating] : 'í‰ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”';
            });
        });

        // ì´ˆê¸° í‰ì ì´ ìˆëŠ” ê²½ìš° UI ì—…ë°ì´íŠ¸
        const initialRating = parseInt(elements.ratingValue.value);
        if (!isNaN(initialRating) && initialRating >= 1 && initialRating <= 5) {
            console.log('ì´ˆê¸° í‰ì  ì„¤ì •:', initialRating);
            updateStars(elements.overallRating, initialRating);
            elements.ratingText.textContent = RATING_TEXTS[initialRating];
        }
    }

    // ì„¸ë¶€ í‰ì  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    elements.detailedRatings.forEach(container => {
        const stars = container.querySelectorAll('.star');
        // rating-groupì—ì„œ input ì°¾ê¸° (HTML êµ¬ì¡°: rating-group > d-flex > detailed-rating)
        const ratingGroup = container.closest('.rating-group');
        const input = ratingGroup ? ratingGroup.querySelector('.detailed-rating-input') : null;
        
        console.log('ì„¸ë¶€ í‰ì  ì´ˆê¸°í™”:', {
            container: container,
            field: container.dataset.field,
            ratingGroup: ratingGroup,
            input: input,
            stars: stars.length
        });
        
        stars.forEach(star => {
            // í´ë¦­ ì´ë²¤íŠ¸
            star.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const rating = parseInt(this.dataset.rating);
                console.log('ì„¸ë¶€ í‰ì  í´ë¦­:', {
                    rating,
                    field: container.dataset.field,
                    target: this,
                    input: input
                });

                // hidden input ì—…ë°ì´íŠ¸
                if (input) {
                    input.value = rating;
                    console.log('ì„¸ë¶€ í‰ì  ì…ë ¥ê°’ ì—…ë°ì´íŠ¸:', {
                        field: container.dataset.field,
                        rating,
                        inputValue: input.value,
                        inputName: input.name
                    });
                } else {
                    console.error('ì„¸ë¶€ í‰ì  inputì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', container.dataset.field);
                }
                
                // UI ì—…ë°ì´íŠ¸
                updateStars(container, rating);
            });

            // ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì´ë²¤íŠ¸
            star.addEventListener('mouseover', function() {
                const rating = parseInt(this.dataset.rating);
                updateStars(container, rating);
            });

            // ë§ˆìš°ìŠ¤ ì•„ì›ƒ ì´ë²¤íŠ¸
            star.addEventListener('mouseout', function() {
                const rating = parseInt(input?.value) || 0;
                updateStars(container, rating);
            });
        });

        // ì´ˆê¸° ì„¸ë¶€ í‰ì ì´ ìˆëŠ” ê²½ìš° UI ì—…ë°ì´íŠ¸
        if (input && input.value) {
            const initialRating = parseInt(input.value);
            if (!isNaN(initialRating) && initialRating >= 1 && initialRating <= 5) {
                console.log('ì´ˆê¸° ì„¸ë¶€ í‰ì  ì„¤ì •:', {
                    field: container.dataset.field,
                    rating: initialRating
                });
                updateStars(container, initialRating);
            }
        }
    });

    // í¼ ì œì¶œ ì „ ê²€ì¦
    if (elements.form) {
        elements.form.addEventListener('submit', function(e) {
            e.preventDefault();

            // ì‹œì„¤ ì„ íƒ ê²€ì¦
            if (!elements.facilityId.value) {
                alert('ì‹œì„¤ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                if (elements.facilitySelect) {
                    elements.facilitySelect.focus();
                }
                return;
            }

            // ì œëª© ê²€ì¦
            if (!elements.title.value.trim()) {
                alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                elements.title.focus();
                return;
            }

            // ì „ì²´ í‰ì  ê²€ì¦
            if (!elements.ratingValue.value) {
                alert('ì „ì²´ í‰ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                elements.overallRating.scrollIntoView({ behavior: 'smooth' });
                return;
            }

            // ë‚´ìš© ê¸¸ì´ ê²€ì¦
            const contentLength = elements.content.value.trim().length;
            if (contentLength < MIN_CONTENT_LENGTH) {
                alert(`ë‚´ìš©ì„ ${MIN_CONTENT_LENGTH}ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.`);
                elements.content.focus();
                return;
            }

            if (contentLength > MAX_CONTENT_LENGTH) {
                alert(`ë‚´ìš©ì€ ${MAX_CONTENT_LENGTH}ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
                elements.content.focus();
                return;
            }

            // ëª¨ë“  ê²€ì¦ í†µê³¼ ì‹œ í¼ ì œì¶œ
            this.submit();
        });
    }
});
````

## File: src/main/resources/static/js/rich-text-editor-v2.js
````javascript
/**
 * ë¼ì´íŠ¸ì¼€ì–´ ì „ìš© ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° v2.0
 * ë³´ì•ˆ ê°•í™” ë° ì„±ëŠ¥ ìµœì í™” ë²„ì „
 * - ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ ì œê±°ë¡œ ë³´ì•ˆ ê°•í™”
 * - ê°„ì†Œí™”ëœ íˆ´ë°”ë¡œ ì‚¬ìš©ì„± ê°œì„ 
 * - ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”
 */
class RichTextEditorV2 {
    constructor(selector, options = {}) {
        this.element = document.querySelector(selector);
        if (!this.element) {
            console.error('RichTextEditorV2: Element not found:', selector);
            return;
        }

        // ê¸°ë³¸ ì˜µì…˜ ì„¤ì •
        this.options = {
            height: options.height || '300px',
            placeholder: options.placeholder || 'ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...',
            enableTable: options.enableTable !== false,
            enableLink: options.enableLink !== false,
            maxLength: options.maxLength || 10000,
            // ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ ì™„ì „ ì œê±°
            enableImage: false,
            // ë³´ì•ˆìƒ ìœ„í—˜í•œ ê¸°ëŠ¥ë“¤ ì œê±°
            enableSourceCode: false,
            enableFullscreen: false,
            // ë‹¨ìˆœí™”ëœ íˆ´ë°”
            toolbar: options.toolbar || [
                'bold', 'italic', 'underline',
                '|',
                'fontSize', 'color',
                '|',
                'alignLeft', 'alignCenter', 'alignRight',
                '|',
                'orderedList', 'unorderedList',
                '|',
                'link', 'table',
                '|',
                'blockquote',
                '|',
                'undo', 'redo'
            ],
            ...options
        };

        this.init();
    }

    init() {
        this.createEditor();
        this.bindEvents();
        this.initializeContent();
        this.setupAccessibility();
    }

    createEditor() {
        // ê¸°ì¡´ textarea ìˆ¨ê¸°ê¸°
        this.element.style.display = 'none';

        // ì—ë””í„° ì»¨í…Œì´ë„ˆ ìƒì„±
        this.container = document.createElement('div');
        this.container.className = 'rich-text-editor-v2';
        this.container.setAttribute('role', 'textbox');
        this.container.setAttribute('aria-label', 'ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„°');
        
        this.container.innerHTML = `
            <div class="rte-toolbar" role="toolbar" aria-label="í¸ì§‘ ë„êµ¬">
                ${this.generateToolbar()}
            </div>
            <div class="rte-content" 
                 contenteditable="true" 
                 style="height: ${this.options.height}"
                 role="textbox"
                 aria-multiline="true"
                 aria-label="í…ìŠ¤íŠ¸ ì…ë ¥ ì˜ì—­">
                ${this.options.placeholder ? `<p class="rte-placeholder">${this.options.placeholder}</p>` : ''}
            </div>
            <div class="rte-statusbar">
                <span class="rte-char-count">ê¸€ì ìˆ˜: 0 / ${this.options.maxLength}</span>
                <span class="rte-word-count">ë‹¨ì–´ ìˆ˜: 0</span>
            </div>
        `;

        // textarea ë‹¤ìŒì— ì—ë””í„° ì‚½ì…
        this.element.parentNode.insertBefore(this.container, this.element.nextSibling);

        // ì—ë””í„° ìš”ì†Œë“¤ ì°¸ì¡° ì €ì¥
        this.toolbar = this.container.querySelector('.rte-toolbar');
        this.content = this.container.querySelector('.rte-content');
        this.statusbar = this.container.querySelector('.rte-statusbar');
    }

    generateToolbar() {
        const toolbarGroups = [];
        let currentGroup = [];

        this.options.toolbar.forEach(tool => {
            if (tool === '|') {
                if (currentGroup.length > 0) {
                    toolbarGroups.push(currentGroup);
                    currentGroup = [];
                }
            } else {
                currentGroup.push(tool);
            }
        });

        if (currentGroup.length > 0) {
            toolbarGroups.push(currentGroup);
        }

        return toolbarGroups.map(group => 
            `<div class="rte-toolbar-group">
                ${group.map(tool => this.generateToolButton(tool)).join('')}
            </div>`
        ).join('');
    }

    generateToolButton(tool) {
        const buttons = {
            'bold': '<button type="button" class="rte-btn" data-command="bold" title="êµµê²Œ (Ctrl+B)" aria-label="êµµê²Œ"><i class="fas fa-bold"></i></button>',
            'italic': '<button type="button" class="rte-btn" data-command="italic" title="ê¸°ìš¸ì„ (Ctrl+I)" aria-label="ê¸°ìš¸ì„"><i class="fas fa-italic"></i></button>',
            'underline': '<button type="button" class="rte-btn" data-command="underline" title="ë°‘ì¤„ (Ctrl+U)" aria-label="ë°‘ì¤„"><i class="fas fa-underline"></i></button>',
            
            'fontSize': `<select class="rte-select" data-command="fontSize" title="ê¸€ì í¬ê¸°" aria-label="ê¸€ì í¬ê¸°">
                <option value="">í¬ê¸°</option>
                <option value="1">ë§¤ìš° ì‘ê²Œ</option>
                <option value="2">ì‘ê²Œ</option>
                <option value="3">ë³´í†µ</option>
                <option value="4">í¬ê²Œ</option>
                <option value="5">ë§¤ìš° í¬ê²Œ</option>
            </select>`,
            
            'color': '<input type="color" class="rte-color" data-command="foreColor" title="ê¸€ì ìƒ‰ìƒ" aria-label="ê¸€ì ìƒ‰ìƒ" value="#000000">',
            
            'alignLeft': '<button type="button" class="rte-btn" data-command="justifyLeft" title="ì™¼ìª½ ì •ë ¬" aria-label="ì™¼ìª½ ì •ë ¬"><i class="fas fa-align-left"></i></button>',
            'alignCenter': '<button type="button" class="rte-btn" data-command="justifyCenter" title="ê°€ìš´ë° ì •ë ¬" aria-label="ê°€ìš´ë° ì •ë ¬"><i class="fas fa-align-center"></i></button>',
            'alignRight': '<button type="button" class="rte-btn" data-command="justifyRight" title="ì˜¤ë¥¸ìª½ ì •ë ¬" aria-label="ì˜¤ë¥¸ìª½ ì •ë ¬"><i class="fas fa-align-right"></i></button>',
            
            'orderedList': '<button type="button" class="rte-btn" data-command="insertOrderedList" title="ë²ˆí˜¸ ëª©ë¡" aria-label="ë²ˆí˜¸ ëª©ë¡"><i class="fas fa-list-ol"></i></button>',
            'unorderedList': '<button type="button" class="rte-btn" data-command="insertUnorderedList" title="ê¸€ë¨¸ë¦¬ ëª©ë¡" aria-label="ê¸€ë¨¸ë¦¬ ëª©ë¡"><i class="fas fa-list-ul"></i></button>',
            
            'link': '<button type="button" class="rte-btn" data-command="createLink" title="ë§í¬ ì‚½ì…" aria-label="ë§í¬ ì‚½ì…"><i class="fas fa-link"></i></button>',
            'table': '<button type="button" class="rte-btn" data-command="insertTable" title="í…Œì´ë¸” ì‚½ì…" aria-label="í…Œì´ë¸” ì‚½ì…"><i class="fas fa-table"></i></button>',
            
            'blockquote': '<button type="button" class="rte-btn" data-command="blockquote" title="ì¸ìš©ë¬¸" aria-label="ì¸ìš©ë¬¸"><i class="fas fa-quote-left"></i></button>',
            
            'undo': '<button type="button" class="rte-btn" data-command="undo" title="ì‹¤í–‰ ì·¨ì†Œ (Ctrl+Z)" aria-label="ì‹¤í–‰ ì·¨ì†Œ"><i class="fas fa-undo"></i></button>',
            'redo': '<button type="button" class="rte-btn" data-command="redo" title="ë‹¤ì‹œ ì‹¤í–‰ (Ctrl+Y)" aria-label="ë‹¤ì‹œ ì‹¤í–‰"><i class="fas fa-redo"></i></button>'
        };

        return buttons[tool] || '';
    }

    bindEvents() {
        // íˆ´ë°” ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        this.toolbar.addEventListener('click', (e) => {
            const button = e.target.closest('.rte-btn');
            if (button) {
                e.preventDefault();
                this.executeCommand(button.dataset.command);
            }
        });

        // ì…€ë ‰íŠ¸ ë°•ìŠ¤ ë³€ê²½ ì´ë²¤íŠ¸
        this.toolbar.addEventListener('change', (e) => {
            if (e.target.classList.contains('rte-select')) {
                this.executeCommand(e.target.dataset.command, e.target.value);
            }
        });

        // ìƒ‰ìƒ ì„ íƒ ì´ë²¤íŠ¸
        this.toolbar.addEventListener('input', (e) => {
            if (e.target.classList.contains('rte-color')) {
                this.executeCommand(e.target.dataset.command, e.target.value);
            }
        });

        // ì—ë””í„° ë‚´ìš© ë³€ê²½ ì´ë²¤íŠ¸
        this.content.addEventListener('input', () => {
            this.updateOriginalTextarea();
            this.updateStatusBar();
            this.handlePlaceholder();
            this.validateLength();
        });

        // ì—ë””í„° í¬ì»¤ìŠ¤ ì´ë²¤íŠ¸
        this.content.addEventListener('focus', () => {
            this.handlePlaceholder();
        });

        // ì—ë””í„° ë¸”ëŸ¬ ì´ë²¤íŠ¸
        this.content.addEventListener('blur', () => {
            this.handlePlaceholder();
        });

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        this.content.addEventListener('keydown', (e) => {
            this.handleKeyboardShortcuts(e);
        });

        // ë¶™ì—¬ë„£ê¸° ì´ë²¤íŠ¸ - ë³´ì•ˆ ê°•í™”
        this.content.addEventListener('paste', (e) => {
            this.handlePaste(e);
        });
    }

    executeCommand(command, value = null) {
        this.content.focus();

        switch (command) {
            case 'createLink':
                this.insertLink();
                break;
            case 'insertTable':
                this.insertTable();
                break;
            case 'blockquote':
                this.insertBlockquote();
                break;
            case 'fontSize':
                if (value) {
                    document.execCommand('fontSize', false, value);
                }
                break;
            case 'foreColor':
                document.execCommand(command, false, value);
                break;
            default:
                document.execCommand(command, false, value);
        }

        this.updateOriginalTextarea();
    }

    insertLink() {
        const selection = window.getSelection();
        const selectedText = selection.toString().trim();
        
        // URL ì…ë ¥ ë‹¤ì´ì–¼ë¡œê·¸
        const url = prompt('ë§í¬ URLì„ ì…ë ¥í•˜ì„¸ìš”:', 'https://');
        if (!url || url === 'https://') return;

        // URL ê²€ì¦ (ë³´ì•ˆ ê°•í™”)
        if (!this.isValidUrl(url)) {
            alert('ì˜¬ë°”ë¥¸ URL í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.');
            return;
        }
        
        const linkText = selectedText || prompt('ë§í¬ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:', url);
        if (linkText) {
            // XSS ë°©ì§€ë¥¼ ìœ„í•œ ì†ì„±ê°’ ì •ë¦¬ (HTML ì¸ì½”ë”©í•˜ì§€ ì•Šê³  ì§ì ‘ ìƒì„±)
            const cleanUrl = url.replace(/"/g, '&quot;').replace(/'/g, '&#39;');
            const cleanText = linkText.replace(/</g, '&lt;').replace(/>/g, '&gt;');
            const link = `<a href="${cleanUrl}" target="_blank" rel="noopener noreferrer" style="color: #0066cc; text-decoration: underline;">${cleanText}</a>`;
            this.insertHTML(link);
        }
    }

    insertTable() {
        const rows = prompt('í–‰ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”:', '3');
        const cols = prompt('ì—´ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”:', '3');
        
        if (rows && cols && !isNaN(rows) && !isNaN(cols)) {
            const numRows = Math.min(parseInt(rows), 20); // ìµœëŒ€ 20í–‰ìœ¼ë¡œ ì œí•œ
            const numCols = Math.min(parseInt(cols), 10); // ìµœëŒ€ 10ì—´ë¡œ ì œí•œ
            
            let table = '<table class="rte-table table table-bordered"><tbody>';
            
            for (let i = 0; i < numRows; i++) {
                table += '<tr>';
                for (let j = 0; j < numCols; j++) {
                    table += '<td>&nbsp;</td>';
                }
                table += '</tr>';
            }
            
            table += '</tbody></table><p>&nbsp;</p>';
            this.insertHTML(table);
        }
    }

    insertBlockquote() {
        const selection = window.getSelection();
        const selectedText = selection.toString().trim();
        
        if (selectedText) {
            const safeText = this.escapeHtml(selectedText);
            const blockquote = `<blockquote class="blockquote">${safeText}</blockquote>`;
            this.insertHTML(blockquote);
        } else {
            const blockquote = '<blockquote class="blockquote">ì¸ìš©ë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”...</blockquote>';
            this.insertHTML(blockquote);
        }
    }

    insertHTML(html) {
        if (document.queryCommandSupported('insertHTML')) {
            document.execCommand('insertHTML', false, html);
        } else {
            // IE í˜¸í™˜ì„±ì„ ìœ„í•œ ëŒ€ì•ˆ
            const selection = window.getSelection();
            if (selection.rangeCount > 0) {
                const range = selection.getRangeAt(0);
                range.deleteContents();
                const div = document.createElement('div');
                div.innerHTML = html;
                const frag = document.createDocumentFragment();
                while (div.firstChild) {
                    frag.appendChild(div.firstChild);
                }
                range.insertNode(frag);
            }
        }
    }

    handleKeyboardShortcuts(e) {
        if (e.ctrlKey || e.metaKey) {
            switch (e.key.toLowerCase()) {
                case 'b':
                    e.preventDefault();
                    this.executeCommand('bold');
                    break;
                case 'i':
                    e.preventDefault();
                    this.executeCommand('italic');
                    break;
                case 'u':
                    e.preventDefault();
                    this.executeCommand('underline');
                    break;
                case 'z':
                    if (e.shiftKey) {
                        e.preventDefault();
                        this.executeCommand('redo');
                    } else {
                        e.preventDefault();
                        this.executeCommand('undo');
                    }
                    break;
                case 'y':
                    e.preventDefault();
                    this.executeCommand('redo');
                    break;
            }
        }
    }

    handlePaste(e) {
        e.preventDefault();
        
        const clipboardData = e.clipboardData || window.clipboardData;
        const pastedData = clipboardData.getData('text/plain');
        
        // í…ìŠ¤íŠ¸ë§Œ í—ˆìš©í•˜ê³  HTML íƒœê·¸ ì œê±° (ë³´ì•ˆ ê°•í™”)
        const cleanText = this.stripHtml(pastedData);
        const safeText = this.escapeHtml(cleanText);
        
        this.insertHTML(safeText);
    }

    updateOriginalTextarea() {
        // HTML ë‚´ìš©ì„ ì›ë³¸ textareaì— ì—…ë°ì´íŠ¸
        let content = this.content.innerHTML;
        
        // í”Œë ˆì´ìŠ¤í™€ë” ì œê±°
        if (content === `<p class="rte-placeholder">${this.options.placeholder}</p>`) {
            content = '';
        }
        
        this.element.value = content;
        
        // change ì´ë²¤íŠ¸ ë°œìƒ
        const event = new Event('change', { bubbles: true });
        this.element.dispatchEvent(event);
    }

    updateStatusBar() {
        const text = this.content.textContent || this.content.innerText || '';
        const charCount = text.length;
        const wordCount = text.trim() ? text.trim().split(/\s+/).length : 0;
        
        const charCountElement = this.statusbar.querySelector('.rte-char-count');
        const wordCountElement = this.statusbar.querySelector('.rte-word-count');
        
        if (charCountElement) {
            charCountElement.textContent = `ê¸€ì ìˆ˜: ${charCount} / ${this.options.maxLength}`;
            
            // ê¸€ì ìˆ˜ ì´ˆê³¼ ì‹œ ê²½ê³  í‘œì‹œ
            if (charCount > this.options.maxLength) {
                charCountElement.classList.add('text-danger');
            } else {
                charCountElement.classList.remove('text-danger');
            }
        }
        
        if (wordCountElement) {
            wordCountElement.textContent = `ë‹¨ì–´ ìˆ˜: ${wordCount}`;
        }
    }

    handlePlaceholder() {
        const text = this.content.textContent || this.content.innerText || '';
        const hasPlaceholder = this.content.querySelector('.rte-placeholder');
        
        if (text.trim() === '' && !hasPlaceholder) {
            this.content.innerHTML = `<p class="rte-placeholder">${this.options.placeholder}</p>`;
        } else if (text.trim() !== '' && hasPlaceholder) {
            hasPlaceholder.remove();
        }
    }

    validateLength() {
        const text = this.content.textContent || this.content.innerText || '';
        
        if (text.length > this.options.maxLength) {
            // ê¸€ì ìˆ˜ ì´ˆê³¼ ì‹œ ë‚´ìš© ìë¥´ê¸°
            const truncatedText = text.substring(0, this.options.maxLength);
            this.content.textContent = truncatedText;
            
            // ì»¤ì„œë¥¼ ë§ˆì§€ë§‰ìœ¼ë¡œ ì´ë™
            const range = document.createRange();
            const selection = window.getSelection();
            range.selectNodeContents(this.content);
            range.collapse(false);
            selection.removeAllRanges();
            selection.addRange(range);
            
            // ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
            this.showWarning(`ìµœëŒ€ ${this.options.maxLength}ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.`);
        }
    }

    setupAccessibility() {
        // ì—ë””í„°ì— ARIA ì†ì„± ì¶”ê°€
        this.content.setAttribute('aria-label', 'ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° ë‚´ìš© ì˜ì—­');
        this.content.setAttribute('aria-describedby', 'rte-help-text');
        
        // ë„ì›€ë§ í…ìŠ¤íŠ¸ ì¶”ê°€
        const helpText = document.createElement('div');
        helpText.id = 'rte-help-text';
        helpText.className = 'sr-only';
        helpText.textContent = 'ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„°ì…ë‹ˆë‹¤. í…ìŠ¤íŠ¸ ì„œì‹ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
        this.container.appendChild(helpText);
    }

    initializeContent() {
        if (this.element.value) {
            // ê¸°ì¡´ ê°’ì´ ìˆìœ¼ë©´ ì—ë””í„°ì— ì„¤ì •
            const safeContent = this.sanitizeContent(this.element.value);
            this.content.innerHTML = safeContent;
        }
        
        this.handlePlaceholder();
        this.updateStatusBar();
    }

    // ë³´ì•ˆ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œë“¤
    isValidUrl(url) {
        try {
            const urlObject = new URL(url);
            return ['http:', 'https:', 'mailto:'].includes(urlObject.protocol);
        } catch {
            return false;
        }
    }

    escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    stripHtml(html) {
        const div = document.createElement('div');
        div.innerHTML = html;
        return div.textContent || div.innerText || '';
    }

    sanitizeContent(content) {
        // í—ˆìš©ëœ íƒœê·¸ë§Œ ë‚¨ê¸°ê³  ë‚˜ë¨¸ì§€ ì œê±°
        const allowedTags = ['p', 'br', 'strong', 'b', 'em', 'i', 'u', 'ol', 'ul', 'li', 'blockquote', 'table', 'tr', 'td', 'th', 'thead', 'tbody', 'a'];
        const div = document.createElement('div');
        div.innerHTML = content;
        
        // í—ˆìš©ë˜ì§€ ì•Šì€ íƒœê·¸ ì œê±°
        const allElements = div.querySelectorAll('*');
        allElements.forEach(el => {
            if (!allowedTags.includes(el.tagName.toLowerCase())) {
                el.remove();
            } else if (el.tagName.toLowerCase() === 'a') {
                // ë§í¬ íƒœê·¸ì˜ ë³´ì•ˆ ì†ì„± í™•ì¸
                const href = el.getAttribute('href');
                if (href && !this.isValidUrl(href)) {
                    el.remove();
                    return;
                }
                // ì•ˆì „í•œ ë§í¬ ì†ì„± ì„¤ì •
                el.setAttribute('target', '_blank');
                el.setAttribute('rel', 'noopener noreferrer');
            }
        });
        
        return div.innerHTML;
    }

    showWarning(message) {
        // ê°„ë‹¨í•œ ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
        const warning = document.createElement('div');
        warning.className = 'rte-warning alert alert-warning alert-dismissible fade show';
        warning.style.position = 'fixed';
        warning.style.top = '20px';
        warning.style.right = '20px';
        warning.style.zIndex = '9999';
        warning.style.maxWidth = '300px';
        warning.innerHTML = `
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;
        
        document.body.appendChild(warning);
        
        // 3ì´ˆ í›„ ìë™ ì œê±°
        setTimeout(() => {
            if (warning.parentNode) {
                warning.remove();
            }
        }, 3000);
    }

    // ê³µê°œ API ë©”ì„œë“œë“¤
    getContent() {
        return this.content.innerHTML;
    }

    setContent(html) {
        const safeContent = this.sanitizeContent(html);
        this.content.innerHTML = safeContent;
        this.updateOriginalTextarea();
        this.updateStatusBar();
        this.handlePlaceholder();
    }

    getTextContent() {
        return this.content.textContent || this.content.innerText || '';
    }

    focus() {
        this.content.focus();
    }

    destroy() {
        if (this.container) {
            this.container.remove();
        }
        this.element.style.display = '';
    }
}

// ì „ì—­ ì‚¬ìš©ì„ ìœ„í•œ í•¨ìˆ˜
window.RichTextEditorV2 = RichTextEditorV2;

// ìë™ ì´ˆê¸°í™” (data-rich-editor ì†ì„±ì´ ìˆëŠ” textareaë“¤ì— ëŒ€í•´)
document.addEventListener('DOMContentLoaded', () => {
    const textareas = document.querySelectorAll('textarea[data-rich-editor]');
    textareas.forEach(textarea => {
        try {
            const options = textarea.dataset.richEditor ? JSON.parse(textarea.dataset.richEditor) : {};
            
            // ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ ê°•ì œ ë¹„í™œì„±í™”
            options.enableImage = false;
            
            // ìµœëŒ€ ê¸¸ì´ ì„¤ì •
            if (textarea.maxLength > 0) {
                options.maxLength = textarea.maxLength;
            }
            
            new RichTextEditorV2(`#${textarea.id}`, options);
        } catch (error) {
            console.error('RichTextEditorV2 ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
            // ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ textarea ì‚¬ìš©
        }
    });
});

console.log('âœ… RichTextEditorV2 ë¡œë“œ ì™„ë£Œ - ë³´ì•ˆ ê°•í™” ë²„ì „');
````

## File: src/main/resources/static/js/smart-scroll-utility.js
````javascript
/**
 * ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ìœ í‹¸ë¦¬í‹°
 * í”„ë¡œí•„ ì´ë¯¸ì§€, ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­í¼ì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©
 * ì´ë¯¸ì§€ í™•ëŒ€/ì¶•ì†Œ í•œê³„ì ì—ì„œ ìë™ìœ¼ë¡œ í˜ì´ì§€ ìŠ¤í¬ë¡¤ë¡œ ì „í™˜
 */

if (typeof SmartScrollUtility === 'undefined') {
    class SmartScrollUtility {
    constructor(cropper, options = {}) {
        this.cropper = cropper;
        this.options = {
            minZoom: 0.1,      // ìµœì†Œ ì¤Œ (10%)
            maxZoom: 3.0,      // ìµœëŒ€ ì¤Œ (300%)
            maxThreshold: 2.8, // ìµœëŒ€ í™•ëŒ€ ì„ê³„ê°’
            minThreshold: 0.2, // ìµœì†Œ ì¶•ì†Œ ì„ê³„ê°’
            scrollMultiplier: 0.5, // í˜ì´ì§€ ìŠ¤í¬ë¡¤ ê°•ë„
            zoomStep: 0.1,     // ì¤Œ ë‹¨ê³„
            indicatorTimeout: 3000, // ì¤Œ í‘œì‹œê¸° ìë™ ìˆ¨ê¹€ ì‹œê°„
            ...options
        };
        
        this.zoomIndicatorTimeout = null;
        this.container = null;
        this.elements = {
            zoomIndicator: null,
            zoomLevel: null,
            zoomStatus: null
        };
        
        this.init();
    }
    
    /**
     * ì´ˆê¸°í™”
     */
    init() {
        if (!this.cropper) {
            console.error('âŒ SmartScrollUtility: cropper ê°ì²´ê°€ í•„ìš”í•©ë‹ˆë‹¤.');
            return;
        }
        
        this.findContainer();
        this.findZoomElements();
        this.setupEventListener();
        
        console.log('ğŸ–±ï¸ SmartScrollUtility ì´ˆê¸°í™” ì™„ë£Œ');
        console.log('ğŸ“Š ì„¤ì •:', this.options);
    }
    
    /**
     * í¬ë¡­ ì»¨í…Œì´ë„ˆ ì°¾ê¸°
     */
    findContainer() {
        // ë‹¤ì–‘í•œ ì»¨í…Œì´ë„ˆ ì„ íƒì ì‹œë„
        const selectors = [
            '.crop-image-container',  // ì‹œì„¤ ì´ë¯¸ì§€
            '.crop-container img',    // í”„ë¡œí•„ ì´ë¯¸ì§€
            '.cropper-container',     // Cropper.js ê¸°ë³¸
            '#cropImage'              // ID ì§ì ‘ ì„ íƒ
        ];
        
        for (const selector of selectors) {
            const element = document.querySelector(selector);
            if (element) {
                this.container = element.closest('.crop-image-container') || 
                               element.parentElement || 
                               element;
                break;
            }
        }
        
        if (!this.container) {
            console.warn('âš ï¸ SmartScrollUtility: í¬ë¡­ ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }
    }
    
    /**
     * ì¤Œ í‘œì‹œê¸° ìš”ì†Œ ì°¾ê¸°
     */
    findZoomElements() {
        this.elements.zoomIndicator = document.getElementById('zoomIndicator');
        this.elements.zoomLevel = document.getElementById('zoomLevel');
        this.elements.zoomStatus = document.getElementById('zoomStatus');
        
        if (!this.elements.zoomIndicator) {
            console.log('ğŸ’¡ SmartScrollUtility: ì¤Œ í‘œì‹œê¸°ê°€ ì—†ì–´ ë™ì ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.');
            this.createZoomIndicator();
        }
    }
    
    /**
     * ë™ì ìœ¼ë¡œ ì¤Œ í‘œì‹œê¸° ìƒì„±
     */
    createZoomIndicator() {
        const indicator = document.createElement('div');
        indicator.id = 'zoomIndicator';
        indicator.className = 'zoom-indicator position-fixed';
        indicator.style.cssText = `
            top: 20px; 
            right: 20px; 
            z-index: 1000; 
            background: rgba(0,0,0,0.8); 
            color: white; 
            padding: 8px 12px; 
            border-radius: 6px; 
            font-size: 12px;
            display: none;
        `;
        
        indicator.innerHTML = `
            <i class="fas fa-search me-1"></i>
            <span id="zoomLevel">100%</span>
            <span id="zoomStatus" class="ms-2"></span>
        `;
        
        document.body.appendChild(indicator);
        
        // ìš”ì†Œ ì¬í• ë‹¹
        this.elements.zoomIndicator = indicator;
        this.elements.zoomLevel = document.getElementById('zoomLevel');
        this.elements.zoomStatus = document.getElementById('zoomStatus');
        
        console.log('âœ… ì¤Œ í‘œì‹œê¸° ë™ì  ìƒì„± ì™„ë£Œ');
    }
    
    /**
     * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
     */
    setupEventListener() {
        if (!this.container) {
            console.error('âŒ SmartScrollUtility: ì»¨í…Œì´ë„ˆê°€ ì—†ì–´ ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }
        
        // ê¸°ì¡´ ì´ë²¤íŠ¸ ì œê±° (ì¤‘ë³µ ë°©ì§€)
        this.container.removeEventListener('wheel', this.handleWheel.bind(this));
        
        // ìƒˆ ì´ë²¤íŠ¸ ë“±ë¡
        this.container.addEventListener('wheel', this.handleWheel.bind(this), { 
            passive: false 
        });
        
        console.log('ğŸ”§ íœ  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ:', this.container);
    }
    
    /**
     * íœ  ì´ë²¤íŠ¸ ì²˜ë¦¬ (ë©”ì¸ ë¡œì§)
     */
    handleWheel(event) {
        if (!this.cropper) return;
        
        // í˜„ì¬ ì¤Œ ë ˆë²¨ í™•ì¸
        const canvasData = this.cropper.getCanvasData();
        const currentZoom = canvasData.naturalWidth > 0 ? 
                           canvasData.width / canvasData.naturalWidth : 1;
        
        const isZoomingIn = event.deltaY < 0;  // íœ  ìœ„ë¡œ = í™•ëŒ€
        const isZoomingOut = event.deltaY > 0; // íœ  ì•„ë˜ë¡œ = ì¶•ì†Œ
        
        console.log(`ğŸ” ì¤Œ ìƒíƒœ: ${currentZoom.toFixed(2)} (${isZoomingIn ? 'í™•ëŒ€' : 'ì¶•ì†Œ'})`);
        
        // í™•ëŒ€ ì‹œ: ìµœëŒ€ ì¤Œ ê·¼ì²˜ì—ì„œ í˜ì´ì§€ ìŠ¤í¬ë¡¤
        if (isZoomingIn && currentZoom >= this.options.maxThreshold) {
            this.updateZoomIndicator(currentZoom, 'ìµœëŒ€ í™•ëŒ€');
            this.scrollPage(event.deltaY * this.options.scrollMultiplier);
            console.log('ğŸ“ˆ ìµœëŒ€ í™•ëŒ€ -> í˜ì´ì§€ ìŠ¤í¬ë¡¤');
            return;
        }
        
        // ì¶•ì†Œ ì‹œ: ìµœì†Œ ì¤Œ ê·¼ì²˜ì—ì„œ í˜ì´ì§€ ìŠ¤í¬ë¡¤
        if (isZoomingOut && currentZoom <= this.options.minThreshold) {
            this.updateZoomIndicator(currentZoom, 'ìµœì†Œ ì¶•ì†Œ');
            this.scrollPage(event.deltaY * this.options.scrollMultiplier);
            console.log('ğŸ“‰ ìµœì†Œ ì¶•ì†Œ -> í˜ì´ì§€ ìŠ¤í¬ë¡¤');
            return;
        }
        
        // ì •ìƒ ë²”ìœ„: ì´ë¯¸ì§€ ì¤Œ ì ìš©
        event.preventDefault();
        event.stopPropagation();
        
        const zoomDelta = isZoomingIn ? this.options.zoomStep : -this.options.zoomStep;
        this.cropper.zoom(zoomDelta);
        
        // ì¤Œ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
        const newZoom = Math.max(
            this.options.minZoom, 
            Math.min(this.options.maxZoom, currentZoom + zoomDelta)
        );
        this.updateZoomIndicator(newZoom, isZoomingIn ? 'í™•ëŒ€' : 'ì¶•ì†Œ');
    }
    
    /**
     * í˜ì´ì§€ ìŠ¤í¬ë¡¤ ì‹¤í–‰
     */
    scrollPage(scrollAmount) {
        window.scrollBy({
            top: scrollAmount,
            behavior: 'smooth'
        });
    }
    
    /**
     * ì¤Œ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
     */
    updateZoomIndicator(zoomLevel, status) {
        if (!this.elements.zoomIndicator || !this.elements.zoomLevel) return;
        
        // ì¤Œ ë ˆë²¨ í‘œì‹œ
        const zoomPercent = Math.round(zoomLevel * 100);
        this.elements.zoomLevel.textContent = zoomPercent + '%';
        
        // ìƒíƒœ ë©”ì‹œì§€ ì„¤ì •
        if (this.elements.zoomStatus) {
            let statusMessage = '';
            let statusClass = '';
            
            switch (status) {
                case 'ìµœëŒ€ í™•ëŒ€':
                    statusMessage = '(ìµœëŒ€ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ê°€ëŠ¥)';
                    statusClass = 'text-warning';
                    break;
                case 'ìµœì†Œ ì¶•ì†Œ':
                    statusMessage = '(ìµœì†Œ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ê°€ëŠ¥)';
                    statusClass = 'text-info';
                    break;
                default:
                    statusMessage = `(${status} ì¤‘)`;
                    statusClass = 'text-success';
            }
            
            this.elements.zoomStatus.textContent = statusMessage;
            this.elements.zoomStatus.className = `ms-2 ${statusClass}`;
        }
        
        // í‘œì‹œê¸° ë³´ì´ê¸°
        this.elements.zoomIndicator.style.display = 'block';
        
        // ìë™ ìˆ¨ê¹€ íƒ€ì´ë¨¸
        clearTimeout(this.zoomIndicatorTimeout);
        this.zoomIndicatorTimeout = setTimeout(() => {
            if (this.elements.zoomIndicator) {
                this.elements.zoomIndicator.style.display = 'none';
            }
        }, this.options.indicatorTimeout);
    }
    
    /**
     * ì„¤ì • ì—…ë°ì´íŠ¸
     */
    updateOptions(newOptions) {
        this.options = { ...this.options, ...newOptions };
        console.log('ğŸ”§ SmartScrollUtility ì„¤ì • ì—…ë°ì´íŠ¸:', this.options);
    }
    
    /**
     * í¬ë¡­í¼ ì—…ë°ì´íŠ¸ (ë™ì  ë³€ê²½ ì‹œ)
     */
    updateCropper(newCropper) {
        this.cropper = newCropper;
        console.log('ğŸ”„ SmartScrollUtility í¬ë¡­í¼ ì—…ë°ì´íŠ¸');
    }
    
    /**
     * ì •ë¦¬ (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€)
     */
    destroy() {
        if (this.container) {
            this.container.removeEventListener('wheel', this.handleWheel.bind(this));
        }
        
        clearTimeout(this.zoomIndicatorTimeout);
        
        // ë™ì  ìƒì„±ëœ í‘œì‹œê¸° ì œê±°
        const dynamicIndicator = document.getElementById('zoomIndicator');
        if (dynamicIndicator && dynamicIndicator.style.position === 'fixed') {
            dynamicIndicator.remove();
        }
        
        this.cropper = null;
        this.container = null;
        this.elements = {};
        
        console.log('ğŸ§¹ SmartScrollUtility ì •ë¦¬ ì™„ë£Œ');
    }
}

// ì „ì—­ ì ‘ê·¼ì„ ìœ„í•œ ìœˆë„ìš° ê°ì²´ ë“±ë¡
window.SmartScrollUtility = SmartScrollUtility;

}

// ê°„í¸ ì‚¬ìš© í•¨ìˆ˜
window.createSmartScroll = function(cropper, options = {}) {
    return new SmartScrollUtility(cropper, options);
};

console.log('ğŸ“¦ SmartScrollUtility ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');
````

## File: src/main/resources/templates/admin/dashboard.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item active" aria-current="page">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</li>
            </ol>
        </nav>

        <!-- í˜ì´ì§€ í—¤ë” -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex align-items-center justify-content-between">
                    <div>
                        <h1 class="h2 mb-1">
                            <i class="fas fa-tachometer-alt text-primary me-2"></i>
                            ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
                        </h1>
                        <p class="text-muted mb-0">CareLink ì „ì²´ ì‹œìŠ¤í…œì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    </div>
                    <div>
                        <span class="badge bg-success fs-6">
                            <i class="fas fa-crown me-1"></i>Administrator
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë¹ ë¥¸ ì„œë¹„ìŠ¤ ì¹´ë“œ (ë§¨ ìœ„ í° ì¹´ë“œ 4ê°œ) -->
        <div class="row g-4 mb-5">
            <div class="col-12">
                <h3 class="mb-4">
                    <i class="fas fa-bolt text-warning me-2"></i>
                    ë¹ ë¥¸ ì„œë¹„ìŠ¤
                </h3>
            </div>

            <!-- ì‹œì„¤ ìŠ¹ì¸ ê´€ë¦¬ -->
            <div class="col-md-6 col-xl-3">
                <div class="card h-100 shadow-lg border-0" style="background: linear-gradient(135deg, #ff9a56 0%, #ff6b35 100%);">
                    <div class="card-body text-white text-center p-4">
                        <div class="display-4 mb-3">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h4 class="card-title mb-3">ì‹œì„¤ ìŠ¹ì¸</h4>
                        <h2 class="mb-3" th:text="${pendingFacilities}">0</h2>
                        <p class="mb-3">ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ì‹œì„¤</p>
                        <a href="/admin/facilities?status=PENDING" class="btn btn-light btn-lg w-100">
                            <i class="fas fa-eye me-2"></i>ìŠ¹ì¸ ê´€ë¦¬
                        </a>
                    </div>
                </div>
            </div>

            <!-- íšŒì› ê´€ë¦¬ -->
            <div class="col-md-6 col-xl-3">
                <div class="card h-100 shadow-lg border-0" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <div class="card-body text-white text-center p-4">
                        <div class="display-4 mb-3">
                            <i class="fas fa-users"></i>
                        </div>
                        <h4 class="card-title mb-3">íšŒì› ê´€ë¦¬</h4>
                        <h2 class="mb-3" th:text="${totalMembers}">0</h2>
                        <p class="mb-3">ì „ì²´ ë“±ë¡ íšŒì›</p>
                        <a href="/admin/members" class="btn btn-light btn-lg w-100">
                            <i class="fas fa-list me-2"></i>íšŒì› ê´€ë¦¬
                        </a>
                    </div>
                </div>
            </div>

            <!-- ê²Œì‹œíŒ ê´€ë¦¬ -->
            <div class="col-md-6 col-xl-3">
                <div class="card h-100 shadow-lg border-0" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                    <div class="card-body text-white text-center p-4">
                        <div class="display-4 mb-3">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <h4 class="card-title mb-3">ê²Œì‹œíŒ ê´€ë¦¬</h4>
                        <h2 class="mb-3">ALL</h2>
                        <p class="mb-3">ê³µì§€ì‚¬í•­ ë° ê²Œì‹œê¸€</p>
                        <a href="/board" class="btn btn-light btn-lg w-100">
                            <i class="fas fa-edit me-2"></i>ê²Œì‹œíŒ ê´€ë¦¬
                        </a>
                    </div>
                </div>
            </div>

            <!-- ë¦¬ë·° ê´€ë¦¬ -->
            <div class="col-md-6 col-xl-3">
                <div class="card h-100 shadow-lg border-0" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    <div class="card-body text-white text-center p-4">
                        <div class="display-4 mb-3">
                            <i class="fas fa-star"></i>
                        </div>
                        <h4 class="card-title mb-3">ë¦¬ë·° ê´€ë¦¬</h4>
                        <h2 class="mb-3">ALL</h2>
                        <p class="mb-3">ì‹œì„¤ ë¦¬ë·° ë° í‰ê°€</p>
                        <a href="/review" class="btn btn-light btn-lg w-100">
                            <i class="fas fa-star me-2"></i>ë¦¬ë·° ê´€ë¦¬
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- í†µê³„ ëŒ€ì‹œë³´ë“œ (í˜ì´ì§€ ì´ë™ ì—†ì´ í•œ í™”ë©´ì— í‘œì‹œ) -->
        <div class="row g-4 mb-5">
            <div class="col-12">
                <h3 class="mb-4">
                    <i class="fas fa-chart-bar text-info me-2"></i>
                    ì‹œìŠ¤í…œ í†µê³„
                </h3>
            </div>

            <!-- íšŒì› í†µê³„ -->
            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <div class="text-primary mb-2">
                            <i class="fas fa-users fa-2x"></i>
                        </div>
                        <h6 class="card-title text-muted">ì „ì²´ íšŒì›</h6>
                        <h3 class="text-primary mb-2" th:text="${totalMembers}">0</h3>
                        <small class="text-muted">ë“±ë¡ëœ íšŒì› ìˆ˜</small>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <div class="text-success mb-2">
                            <i class="fas fa-building fa-2x"></i>
                        </div>
                        <h6 class="card-title text-muted">ì‹œì„¤ íšŒì›</h6>
                        <h3 class="text-success mb-2" th:text="${facilityMembers}">0</h3>
                        <small class="text-muted">ì‹œì„¤ ìš´ì˜ì</small>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <div class="text-info mb-2">
                            <i class="fas fa-user fa-2x"></i>
                        </div>
                        <h6 class="card-title text-muted">ì¼ë°˜ íšŒì›</h6>
                        <h3 class="text-info mb-2" th:text="${userMembers}">0</h3>
                        <small class="text-muted">êµ¬ì§ì ë° ê°€ì¡±</small>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <div class="text-warning mb-2">
                            <i class="fas fa-clock fa-2x"></i>
                        </div>
                        <h6 class="card-title text-muted">ìŠ¹ì¸ ëŒ€ê¸°</h6>
                        <h3 class="text-warning mb-2" th:text="${pendingFacilities}">0</h3>
                        <small class="text-muted">ì‹œì„¤ ìŠ¹ì¸ ëŒ€ê¸°</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì‹¤ì‹œê°„ í™œë™ í˜„í™© -->
        <div class="row g-4 mb-4">
            <div class="col-12">
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-transparent">
                        <h5 class="mb-0">
                            <i class="fas fa-activity text-success me-2"></i>
                            ì‹¤ì‹œê°„ í™œë™ í˜„í™©
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-md-3">
                                <div class="border-end">
                                    <h4 class="text-primary">
                                        <i class="fas fa-eye me-1"></i>
                                        <span id="todayVisits">-</span>
                                    </h4>
                                    <small class="text-muted">ì˜¤ëŠ˜ ë°©ë¬¸ì</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="border-end">
                                    <h4 class="text-success">
                                        <i class="fas fa-user-plus me-1"></i>
                                        <span id="todaySignups">-</span>
                                    </h4>
                                    <small class="text-muted">ì˜¤ëŠ˜ ê°€ì…ì</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="border-end">
                                    <h4 class="text-info">
                                        <i class="fas fa-edit me-1"></i>
                                        <span id="todayPosts">-</span>
                                    </h4>
                                    <small class="text-muted">ì˜¤ëŠ˜ ê²Œì‹œê¸€</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <h4 class="text-warning">
                                    <i class="fas fa-star me-1"></i>
                                    <span id="todayReviews">-</span>
                                </h4>
                                <small class="text-muted">ì˜¤ëŠ˜ ë¦¬ë·°</small>
                            </div>
                        </div>
                        <div class="mt-3 text-center">
                            <button class="btn btn-outline-primary btn-sm" onclick="refreshStats()">
                                <i class="fas fa-sync me-1"></i>ë°ì´í„° ìƒˆë¡œê³ ì¹¨
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<script>
// ë°ì´í„° ìƒˆë¡œê³ ì¹¨ í•¨ìˆ˜
function refreshStats() {
    location.reload();
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ í†µê³„ ì—…ë°ì´íŠ¸
$(document).ready(function() {
    console.log('ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë¡œë“œ ì™„ë£Œ');
    
    // ìŠ¹ì¸ ëŒ€ê¸° ì‹œì„¤ì´ ìˆìœ¼ë©´ ê°•ì¡°
    const pendingCount = parseInt($('[th\\:text="${pendingFacilities}"]').text());
    if (pendingCount > 0) {
        console.log('ìŠ¹ì¸ ëŒ€ê¸° ì‹œì„¤:', pendingCount);
    }
});
</script>

</body>
</html>
````

## File: src/main/resources/templates/board/edit.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title th:text="${pageTitle + ' - CareLink'}">ê²Œì‹œê¸€ ìˆ˜ì • - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container mt-4">
            <!-- í˜ì´ì§€ ì œëª© -->
            <div class="row mb-4">
                <div class="col-12">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                            <li class="breadcrumb-item"><a href="/board">ì •ë³´ë§ˆë‹¹</a></li>
                            <li class="breadcrumb-item">
                                <a th:href="@{/board/detail/{id}(id=${boardDTO.boardId}, type=${type})}" th:text="${boardDTO.title}">ê²Œì‹œê¸€ ì œëª©</a>
                            </li>
                            <li class="breadcrumb-item active" aria-current="page">ìˆ˜ì •</li>
                        </ol>
                    </nav>
                    <h2>
                        <i class="fas fa-edit text-primary me-2"></i> 
                        ê²Œì‹œê¸€ ìˆ˜ì •
                    </h2>
                    <p class="text-muted">ê²Œì‹œê¸€ ì •ë³´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
            </div>
            
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <form th:action="@{/board/edit/{id}(id=${boardDTO.boardId})}" method="post" th:object="${boardDTO}">
                        <!-- ê²Œì‹œíŒ íƒ€ì… ìœ ì§€ë¥¼ ìœ„í•œ hidden í•„ë“œ -->
                        <input type="hidden" name="type" th:value="${type}">
                        
                        <!-- ìˆ˜ì • ì‹œ í•„ìˆ˜ í•„ë“œë“¤ì„ ìœ ì§€í•˜ê¸° ìœ„í•œ hidden í•„ë“œ -->
                        <input type="hidden" th:field="*{memberId}">
                        <input type="hidden" th:field="*{boardType}">
                        <input type="hidden" th:field="*{viewCount}">
                        <input type="hidden" th:field="*{likeCount}">
                        <input type="hidden" th:field="*{commentCount}">
                        <input type="hidden" th:field="*{createdAt}">
                        <input type="hidden" th:field="*{replyDepth}">
                        <input type="hidden" th:field="*{replyOrder}">
                        <input type="hidden" th:field="*{parentBoardId}">
                        <input type="hidden" th:field="*{status}">
                        <input type="hidden" th:field="*{isActive}">
                        <input type="hidden" th:field="*{isDeleted}">
                        
                        <div class="card">
                            <div class="card-header bg-warning text-dark">
                                <h5 class="mb-0">
                                    <i class="fas fa-edit me-2"></i>
                                    ê²Œì‹œê¸€ ìˆ˜ì •
                                </h5>
                            </div>
                            <div class="card-body">
                                <!-- ì‘ì„±ì ì •ë³´ í‘œì‹œ -->
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label">ì‘ì„±ì</label>
                                        <input type="text" class="form-control" th:value="${boardDTO.memberName}" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">ì‘ì„±ì¼</label>
                                        <input type="text" class="form-control" th:value="${#temporals.format(boardDTO.createdAt, 'yyyy-MM-dd HH:mm')}" readonly>
                                    </div>
                                </div>

                                <!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label">ì¹´í…Œê³ ë¦¬ <span class="text-danger">*</span></label>
                                        <select class="form-select" th:field="*{category}" required>
                                            <option value="">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                            <option value="NOTICE">ê³µì§€ì‚¬í•­</option>
                                            <option value="INFO">ì •ë³´ê³µìœ </option>
                                            <option value="QNA">Q&A</option>
                                            <option value="FAQ">ìì£¼ë¬»ëŠ”ì§ˆë¬¸</option>
                                            <option value="TIP">íŒ&ë…¸í•˜ìš°</option>
                                            <option value="NEWS">ë‰´ìŠ¤</option>
                                            <option value="FREE">ììœ ê²Œì‹œíŒ</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">ê²Œì‹œê¸€ ì„¤ì •</label>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" th:field="*{isNotice}" id="isNotice">
                                            <label class="form-check-label" for="isNotice">
                                                ê³µì§€ì‚¬í•­ìœ¼ë¡œ ë“±ë¡
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" th:field="*{isPinned}" id="isPinned">
                                            <label class="form-check-label" for="isPinned">
                                                ìƒë‹¨ ê³ ì •
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì œëª© -->
                                <div class="mb-3">
                                    <label class="form-label">ì œëª© <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" th:field="*{title}" 
                                           placeholder="ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" required maxlength="100">
                                    <div class="form-text">
                                        ìµœëŒ€ 100ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                                        <small class="float-end">
                                            <span id="titleLength">0</span>/100ì
                                        </small>
                                    </div>
                                </div>

                                <!-- ë‚´ìš© -->
                                <div class="mb-4">
                                    <label class="form-label">ë‚´ìš© <span class="text-danger">*</span></label>
                                    <textarea class="form-control" rows="15" th:field="*{content}" 
                                              placeholder="ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" required minlength="20"
                                              data-rich-editor='{"height": "400px"}'></textarea>
                                    <div class="form-text">
                                        ìµœì†Œ 20ì ì´ìƒ ì‘ì„±í•´ì£¼ì„¸ìš”.
                                        <small class="float-end">
                                            <span id="contentLength">0</span>ì
                                        </small>
                                    </div>
                                </div>

                                <!-- íƒœê·¸ -->
                                <div class="mb-4">
                                    <label class="form-label">íƒœê·¸</label>
                                    <input type="text" class="form-control" th:field="*{tags}" 
                                           placeholder="íƒœê·¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ: ìš”ì–‘ì›, ê°„ë³‘, ë³´í—˜)">
                                    <div class="form-text">ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•´ì£¼ì„¸ìš”. ìµœëŒ€ 5ê°œê¹Œì§€ ì¶”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
                                </div>

                                <!-- í˜„ì¬ ê²Œì‹œê¸€ ì •ë³´ -->
                                <div class="mb-4 p-3 bg-light rounded">
                                    <h6 class="text-muted mb-2"><i class="fas fa-info-circle me-1"></i> í˜„ì¬ ê²Œì‹œê¸€ ì •ë³´</h6>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <small class="text-muted">ì¡°íšŒìˆ˜</small>
                                            <div th:text="${boardDTO.viewCount}">0</div>
                                        </div>
                                        <div class="col-md-4">
                                            <small class="text-muted">ì¶”ì²œìˆ˜</small>
                                            <div th:text="${boardDTO.likeCount}">0</div>
                                        </div>
                                        <div class="col-md-4">
                                            <small class="text-muted">ëŒ“ê¸€ìˆ˜</small>
                                            <div th:text="${boardDTO.commentCount}">0</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- ë²„íŠ¼ -->
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <a th:href="@{/board/detail/{id}(id=${boardDTO.boardId}, type=${type})}" class="btn btn-secondary">
                                            <i class="fas fa-arrow-left me-1"></i> ì·¨ì†Œ
                                        </a>
                                    </div>
                                    <div>
                                        <button type="button" class="btn btn-outline-secondary me-2" onclick="previewBoard()">
                                            <i class="fas fa-eye me-1"></i> ë¯¸ë¦¬ë³´ê¸°
                                        </button>
                                        <button type="submit" class="btn btn-warning">
                                            <i class="fas fa-save me-1"></i> ìˆ˜ì • ì™„ë£Œ
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>

                    <!-- ìˆ˜ì • ê°€ì´ë“œ -->
                    <div class="card mt-4">
                        <div class="card-header bg-info text-white">
                            <h6 class="mb-0"><i class="fas fa-info-circle me-2"></i> ê²Œì‹œê¸€ ìˆ˜ì • ì•ˆë‚´</h6>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="text-primary"><i class="fas fa-check-circle me-1"></i> ìˆ˜ì • ê°€ëŠ¥ í•­ëª©</h6>
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-check text-primary me-2"></i> ì œëª© ë° ë‚´ìš©</li>
                                        <li><i class="fas fa-check text-primary me-2"></i> ì¹´í…Œê³ ë¦¬</li>
                                        <li><i class="fas fa-check text-primary me-2"></i> íƒœê·¸</li>
                                        <li><i class="fas fa-check text-primary me-2"></i> ê³µì§€ì‚¬í•­ ì„¤ì •</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="text-muted"><i class="fas fa-lock me-1"></i> ë³€ê²½ ë¶ˆê°€ í•­ëª©</h6>
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-times text-muted me-2"></i> ì‘ì„±ì ì •ë³´</li>
                                        <li><i class="fas fa-times text-muted me-2"></i> ì‘ì„±ì¼ì‹œ</li>
                                        <li><i class="fas fa-times text-muted me-2"></i> ì¡°íšŒìˆ˜, ì¶”ì²œìˆ˜</li>
                                        <li><i class="fas fa-times text-muted me-2"></i> ëŒ“ê¸€ ì •ë³´</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>

    <script>
        // ë¬¸ì ìˆ˜ ì¹´ìš´íŒ…
        document.addEventListener('DOMContentLoaded', function() {
            const titleInput = document.querySelector('input[name="title"]');
            const contentTextarea = document.querySelector('textarea[name="content"]');
            const titleLength = document.getElementById('titleLength');
            const contentLength = document.getElementById('contentLength');
            
            // ì´ˆê¸° ë¬¸ì ìˆ˜ ì„¤ì •
            titleLength.textContent = titleInput.value.length;
            contentLength.textContent = contentTextarea.value.length;
            
            // ì œëª© ê¸€ì ìˆ˜ ì¹´ìš´íŒ…
            titleInput.addEventListener('input', function() {
                titleLength.textContent = this.value.length;
                if (this.value.length > 100) {
                    titleLength.style.color = 'red';
                } else {
                    titleLength.style.color = '';
                }
            });
            
            // ë‚´ìš© ê¸€ì ìˆ˜ ì¹´ìš´íŒ…
            contentTextarea.addEventListener('input', function() {
                contentLength.textContent = this.value.length;
                if (this.value.length < 20) {
                    contentLength.style.color = 'red';
                } else {
                    contentLength.style.color = 'green';
                }
            });
            
            // í¼ ìœ íš¨ì„± ê²€ì‚¬
            const form = document.querySelector('form');
            form.addEventListener('submit', function(e) {
                const title = titleInput.value.trim();
                const content = contentTextarea.value.trim();
                const category = document.querySelector('select[name="category"]').value;
                
                if (!category) {
                    e.preventDefault();
                    alert('ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return false;
                }
                
                if (title.length === 0) {
                    e.preventDefault();
                    alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    titleInput.focus();
                    return false;
                }
                
                if (title.length > 100) {
                    e.preventDefault();
                    alert('ì œëª©ì€ 100ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    titleInput.focus();
                    return false;
                }
                
                if (content.length < 20) {
                    e.preventDefault();
                    alert('ë‚´ìš©ì„ ìµœì†Œ 20ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    contentTextarea.focus();
                    return false;
                }
                
                // ìˆ˜ì • í™•ì¸
                if (!confirm('ê²Œì‹œê¸€ì„ ìˆ˜ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    e.preventDefault();
                    return false;
                }
            });
        });
        
        // ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥
        function previewBoard() {
            const title = document.querySelector('input[name="title"]').value;
            const content = document.querySelector('textarea[name="content"]').value;
            
            if (title.trim() === '' || content.trim() === '') {
                alert('ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•œ í›„ ë¯¸ë¦¬ë³´ê¸°ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ìƒˆ ì°½ì—ì„œ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
            const previewWindow = window.open('', 'preview', 'width=800,height=600,scrollbars=yes');
            previewWindow.document.write(`
                <html>
                <head>
                    <title>ë¯¸ë¦¬ë³´ê¸°</title>
                    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
                    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
                </head>
                <body class="p-4">
                    <div class="container">
                        <div class="alert alert-warning">
                            <i class="fas fa-eye me-2"></i>
                            ì´ê²ƒì€ ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œ ê²Œì‹œê¸€ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                        </div>
                        <h2>${title}</h2>
                        <hr>
                        <div style="white-space: pre-wrap; line-height: 1.8;">${content}</div>
                    </div>
                </body>
                </html>
            `);
        }
        
        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.addEventListener('keydown', function(e) {
            // Ctrl + S: ì €ì¥
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                document.querySelector('form').submit();
            }
            
            // ESC: ì·¨ì†Œ
            if (e.key === 'Escape') {
                if (confirm('ìˆ˜ì •ì„ ì·¨ì†Œí•˜ê³  ê²Œì‹œê¸€ë¡œ ëŒì•„ê°€ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    window.location.href = document.querySelector('a[href*="/board/detail"]').href;
                }
            }
        });
    </script>
</body>
</html>
````

## File: src/main/resources/templates/board/faq-list.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ìì£¼ë¬»ëŠ”ì§ˆë¬¸ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container py-4">
            <!-- í˜ì´ì§€ ì œëª© -->
            <div class="row mb-4">
                <div class="col-12">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                            <li class="breadcrumb-item"><a href="/board">ì •ë³´ë§ˆë‹¹</a></li>
                            <li class="breadcrumb-item active" aria-current="page">ìì£¼ë¬»ëŠ”ì§ˆë¬¸</li>
                        </ol>
                    </nav>
                    <h2>
                        <i class="fas fa-question-circle text-warning me-2"></i> 
                        ìì£¼ë¬»ëŠ”ì§ˆë¬¸ (FAQ)
                    </h2>
                    <p class="text-muted mb-3">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ê³¼ ë‹µë³€ì„ í™•ì¸í•˜ì„¸ìš”. ê¶ê¸ˆí•œ ì ì´ í•´ê²°ë˜ì§€ ì•Šìœ¼ë©´ Q&A ê²Œì‹œíŒì„ ì´ìš©í•´ì£¼ì„¸ìš”.</p>
                    
                    <!-- ê²Œì‹œíŒ íƒ€ì… ë©”ë‰´ -->
                    <div class="btn-group mb-3" role="group" aria-label="ê²Œì‹œíŒ íƒ€ì…">
                        <a th:href="@{/board(type='all')}" class="btn btn-sm btn-outline-primary board-type-link">ì „ì²´</a>
                        <a th:href="@{/board(type='notice')}" class="btn btn-sm btn-outline-primary board-type-link">ê³µì§€ì‚¬í•­</a>
                        <a th:href="@{/board(type='info')}" class="btn btn-sm btn-outline-primary board-type-link">ì •ë³´ê³µìœ </a>
                        <a th:href="@{/board(type='qna')}" class="btn btn-sm btn-outline-primary board-type-link">Q&A</a>
                        <a th:href="@{/board(type='faq')}" class="btn btn-sm btn-primary board-type-link">FAQ</a>
                    </div>
                </div>
            </div>
            
            <!-- ê²€ìƒ‰ ë° ê¸€ì“°ê¸° -->
            <div class="row mb-4">
                <div class="col-md-8">
                    <form th:action="@{/board}" method="get" class="d-flex gap-2">
                        <input type="hidden" name="type" value="faq">
                        <input type="text" name="keyword" class="form-control" th:value="${keyword}"
                               placeholder="FAQ ë‚´ìš©ì„ ê²€ìƒ‰í•˜ì„¸ìš”">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-search me-1"></i>ê²€ìƒ‰
                        </button>
                    </form>
                </div>
                <div class="col-md-4 text-end">
                    <a th:href="@{/board/write(type='faq')}" class="btn btn-warning">
                        <i class="fas fa-plus me-1"></i>FAQ ì‘ì„±
                    </a>
                </div>
            </div>

            <!-- FAQ í†µê³„ -->
            <div class="row mb-4">
                <div class="col-md-12">
                    <div class="card bg-warning bg-opacity-10">
                        <div class="card-body py-3">
                            <div class="row text-center">
                                <div class="col-md-4">
                                    <i class="fas fa-question-circle text-warning fa-2x mb-2"></i>
                                    <div>
                                        <strong class="d-block" th:text="${pageInfo.totalCount}">0</strong>
                                        <small class="text-muted">ì´ FAQ</small>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <i class="fas fa-eye text-info fa-2x mb-2"></i>
                                    <div>
                                        <strong class="d-block">1,234</strong>
                                        <small class="text-muted">ì´ ì¡°íšŒìˆ˜</small>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <i class="fas fa-thumbs-up text-success fa-2x mb-2"></i>
                                    <div>
                                        <strong class="d-block">98%</strong>
                                        <small class="text-muted">ë„ì›€ë¨</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FAQ ì¹´í…Œê³ ë¦¬ í•„í„° -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <h6 class="card-title">ì¹´í…Œê³ ë¦¬ë³„ FAQ</h6>
                            <div class="btn-group flex-wrap" role="group">
                                <button type="button" class="btn btn-outline-secondary btn-sm active" onclick="filterFAQ('all')">
                                    ì „ì²´ (<span id="count-all" th:text="${pageInfo.totalCount}">0</span>)
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="filterFAQ('facility')">
                                    ì‹œì„¤ ì´ìš© (12)
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="filterFAQ('cost')">
                                    ë¹„ìš© ë¬¸ì˜ (8)
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="filterFAQ('insurance')">
                                    ë³´í—˜ ê´€ë ¨ (15)
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="filterFAQ('admission')">
                                    ì…ì†Œ ì ˆì°¨ (6)
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="filterFAQ('etc')">
                                    ê¸°íƒ€ (3)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FAQ ì•„ì½”ë””ì–¸ ëª©ë¡ -->
            <div class="row">
                <div class="col-12">
                    <div th:if="${#lists.isEmpty(boardList)}" class="card">
                        <div class="card-body text-center py-5">
                            <i class="fas fa-question-circle fa-3x text-muted mb-3"></i>
                            <h5 class="text-muted">ë“±ë¡ëœ FAQê°€ ì—†ìŠµë‹ˆë‹¤</h5>
                            <p class="text-muted">ì²« ë²ˆì§¸ FAQë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”!</p>
                            <a th:href="@{/board/write(type='faq')}" class="btn btn-warning">
                                <i class="fas fa-plus me-1"></i>FAQ ì‘ì„±í•˜ê¸°
                            </a>
                        </div>
                    </div>
                    
                    <div th:unless="${#lists.isEmpty(boardList)}" class="accordion" id="faqAccordion">
                        <div th:each="board, iterStat : ${boardList}" class="accordion-item mb-2 faq-item" 
                             th:data-category="${board.subCategory ?: 'etc'}">
                            <h2 class="accordion-header" th:id="'heading' + ${board.boardId}">
                                <button class="accordion-button collapsed" type="button" 
                                        data-bs-toggle="collapse" 
                                        th:data-bs-target="'#collapse' + ${board.boardId}"
                                        th:aria-controls="'collapse' + ${board.boardId}">
                                    <div class="w-100 d-flex justify-content-between align-items-center">
                                        <div class="flex-grow-1">
                                            <span class="badge bg-warning me-2">Q</span>
                                            <span th:text="${board.title}" class="fw-semibold">FAQ ì§ˆë¬¸</span>
                                        </div>
                                        <div class="text-end me-3">
                                            <small class="text-muted">
                                                <i class="fas fa-eye me-1"></i><span th:text="${board.viewCount}">0</span>
                                                <i class="fas fa-thumbs-up ms-2 me-1"></i><span th:text="${board.likeCount}">0</span>
                                            </small>
                                        </div>
                                    </div>
                                </button>
                            </h2>
                            <div th:id="'collapse' + ${board.boardId}" 
                                 class="accordion-collapse collapse" 
                                 th:aria-labelledby="'heading' + ${board.boardId}"
                                 data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    <div class="mb-3">
                                        <span class="badge bg-success me-2">A</span>
                                        <strong>ë‹µë³€</strong>
                                    </div>
                                    <div class="faq-content" th:utext="${#strings.replace(#strings.replace(board.content, '\\n', '&lt;br&gt;'), '\\r\\n', '&lt;br&gt;')}">
                                        FAQ ë‹µë³€ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                                    </div>
                                    
                                    <!-- FAQ ë©”íƒ€ ì •ë³´ -->
                                    <div class="mt-4 pt-3 border-top">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <small class="text-muted">
                                                    <i class="fas fa-user me-1"></i>ì‘ì„±ì: <span th:text="${board.memberName}">ê´€ë¦¬ì</span>
                                                    <span class="mx-2">|</span>
                                                    <i class="fas fa-calendar me-1"></i>ì‘ì„±ì¼: <span th:text="${#temporals.format(board.createdAt, 'yyyy-MM-dd')}">2024-01-01</span>
                                                    <span class="mx-2">|</span>
                                                    <i class="fas fa-sync me-1"></i>ìˆ˜ì •ì¼: <span th:text="${#temporals.format(board.updatedAt, 'yyyy-MM-dd')}">2024-01-01</span>
                                                </small>
                                            </div>
                                            <div class="col-md-6 text-end">
                                                <!-- FAQ ì•¡ì…˜ ë²„íŠ¼ -->
                                                <div class="btn-group btn-group-sm" role="group">
                                                    <button type="button" class="btn btn-outline-success btn-sm" 
                                                            th:onclick="'likeFAQ(' + ${board.boardId} + ')'">
                                                        <i class="fas fa-thumbs-up me-1"></i>ë„ì›€ë¨ (<span th:text="${board.likeCount}">0</span>)
                                                    </button>
                                                    <button type="button" class="btn btn-outline-secondary btn-sm" 
                                                            th:onclick="'shareFAQ(' + ${board.boardId} + ')'">
                                                        <i class="fas fa-share me-1"></i>ê³µìœ 
                                                    </button>
                                                    <a th:href="@{/board/detail/{id}(id=${board.boardId}, type='faq')}" 
                                                       class="btn btn-outline-primary btn-sm">
                                                        <i class="fas fa-external-link-alt me-1"></i>ìƒì„¸ë³´ê¸°
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- í˜ì´ì§• -->
            <nav th:if="${pageInfo.totalPages > 1}" aria-label="FAQ í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜" class="mt-4">
                <ul class="pagination justify-content-center">
                    <!-- ì²˜ìŒ í˜ì´ì§€ -->
                    <li class="page-item" th:classappend="${pageInfo.firstPage} ? 'disabled'">
                        <a class="page-link" th:href="@{/board(type='faq', page=1, keyword=${keyword})}">
                            <span>&laquo;&laquo;</span>
                        </a>
                    </li>
                    <!-- ì´ì „ í˜ì´ì§€ -->
                    <li class="page-item" th:classappend="${not pageInfo.hasPrevious} ? 'disabled'">
                        <a class="page-link" th:href="@{/board(type='faq', page=${pageInfo.currentPage - 1}, keyword=${keyword})}">
                            <span>&laquo;</span>
                        </a>
                    </li>
                    <!-- í˜ì´ì§€ ë²ˆí˜¸ -->
                    <li th:each="pageNum : ${#numbers.sequence(pageInfo.startPage, pageInfo.endPage)}"
                        class="page-item" th:classappend="${pageNum == pageInfo.currentPage} ? 'active'">
                        <a class="page-link" th:href="@{/board(type='faq', page=${pageNum}, keyword=${keyword})}" th:text="${pageNum}">1</a>
                    </li>
                    <!-- ë‹¤ìŒ í˜ì´ì§€ -->
                    <li class="page-item" th:classappend="${not pageInfo.hasNext} ? 'disabled'">
                        <a class="page-link" th:href="@{/board(type='faq', page=${pageInfo.currentPage + 1}, keyword=${keyword})}">
                            <span>&raquo;</span>
                        </a>
                    </li>
                    <!-- ë§ˆì§€ë§‰ í˜ì´ì§€ -->
                    <li class="page-item" th:classappend="${pageInfo.lastPage} ? 'disabled'">
                        <a class="page-link" th:href="@{/board(type='faq', page=${pageInfo.totalPages}, keyword=${keyword})}">
                            <span>&raquo;&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- ë„ì›€ë§ ì„¹ì…˜ -->
            <div class="row mt-5">
                <div class="col-12">
                    <div class="card bg-light">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="text-primary">
                                        <i class="fas fa-lightbulb me-1"></i>FAQë¥¼ ì°¾ì„ ìˆ˜ ì—†ë‚˜ìš”?
                                    </h6>
                                    <p class="mb-2">ì›í•˜ëŠ” ë‹µë³€ì„ ì°¾ì§€ ëª»í•˜ì…¨ë‹¤ë©´ Q&A ê²Œì‹œíŒì— ì§ì ‘ ì§ˆë¬¸í•´ë³´ì„¸ìš”.</p>
                                    <a href="/board?type=qna" class="btn btn-success btn-sm">
                                        <i class="fas fa-question-circle me-1"></i>Q&A ê²Œì‹œíŒ ê°€ê¸°
                                    </a>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="text-info">
                                        <i class="fas fa-phone me-1"></i>ì „í™” ìƒë‹´
                                    </h6>
                                    <p class="mb-2">ê¸‰í•˜ì‹  ë¬¸ì˜ì‚¬í•­ì€ ì „í™”ë¡œ ìƒë‹´ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                                    <p class="mb-0">
                                        <strong class="text-primary">1588-0000</strong>
                                        <small class="text-muted">(í‰ì¼ 09:00~18:00)</small>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>

    <script>
        // FAQ ì¹´í…Œê³ ë¦¬ í•„í„°ë§
        function filterFAQ(category) {
            const items = document.querySelectorAll('.faq-item');
            const buttons = document.querySelectorAll('.btn-group button');
            
            // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // FAQ ì•„ì´í…œ í•„í„°ë§
            items.forEach(item => {
                if (category === 'all' || item.dataset.category === category) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }
        
        // FAQ ì¶”ì²œ ê¸°ëŠ¥
        function likeFAQ(boardId) {
            fetch(`/board/like/${boardId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: 'action=like'
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // ì¶”ì²œìˆ˜ ì—…ë°ì´íŠ¸
                    const likeButtons = document.querySelectorAll(`[onclick="likeFAQ(${boardId})"] span`);
                    likeButtons.forEach(span => {
                        span.textContent = parseInt(span.textContent) + 1;
                    });
                    
                    // ì„±ê³µ ë©”ì‹œì§€
                    showToast('ë„ì›€ì´ ë˜ì—ˆë‹¤ê³  í‘œì‹œí–ˆìŠµë‹ˆë‹¤.', 'success');
                    
                    // ë²„íŠ¼ ë¹„í™œì„±í™”
                    event.target.disabled = true;
                    event.target.innerHTML = '<i class="fas fa-check me-1"></i>ë„ì›€ë¨';
                } else {
                    showToast('ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showToast('ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            });
        }
        
        // FAQ ê³µìœ  ê¸°ëŠ¥
        function shareFAQ(boardId) {
            const url = `${window.location.origin}/board/detail/${boardId}?type=faq`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'CareLink FAQ',
                    url: url
                }).then(() => {
                    showToast('ê³µìœ ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                });
            } else {
                navigator.clipboard.writeText(url).then(() => {
                    showToast('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                });
            }
        }
        
        // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
        function showToast(message, type) {
            const toastClass = type === 'success' ? 'bg-success' : 'bg-danger';
            const toast = document.createElement('div');
            toast.className = `toast align-items-center text-white ${toastClass} border-0`;
            toast.innerHTML = `
                <div class="d-flex">
                    <div class="toast-body">${message}</div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                </div>
            `;
            
            // í† ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ ìƒì„± (ì—†ëŠ” ê²½ìš°)
            let toastContainer = document.querySelector('.toast-container');
            if (!toastContainer) {
                toastContainer = document.createElement('div');
                toastContainer.className = 'toast-container position-fixed bottom-0 end-0 p-3';
                document.body.appendChild(toastContainer);
            }
            
            toastContainer.appendChild(toast);
            const bsToast = new bootstrap.Toast(toast);
            bsToast.show();
            
            // í† ìŠ¤íŠ¸ê°€ ìˆ¨ê²¨ì§„ í›„ DOMì—ì„œ ì œê±°
            toast.addEventListener('hidden.bs.toast', () => {
                toast.remove();
            });
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì•„ì½”ë””ì–¸ ì´ë²¤íŠ¸ ì¶”ê°€
        document.addEventListener('DOMContentLoaded', function() {
            // ì•„ì½”ë””ì–¸ ì—´ë¦¼/ë‹«í˜ ì‹œ ì¡°íšŒìˆ˜ ì¦ê°€ (í•œ ë²ˆë§Œ)
            const accordions = document.querySelectorAll('.accordion-collapse');
            accordions.forEach(accordion => {
                accordion.addEventListener('shown.bs.collapse', function() {
                    if (!this.dataset.viewed) {
                        const boardId = this.id.replace('collapse', '');
                        // ì¡°íšŒìˆ˜ ì¦ê°€ API í˜¸ì¶œ (ì„ íƒì‚¬í•­)
                        this.dataset.viewed = 'true';
                    }
                });
            });
        });
    </script>
    
    <!-- ê²Œì‹œíŒ ë„¤ë¹„ê²Œì´ì…˜ ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="/js/board-navigation.js"></script>
</body>
</html>
````

## File: src/main/resources/templates/board/notice-list.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ê³µì§€ì‚¬í•­ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container py-4">
            <!-- í˜ì´ì§€ ì œëª© -->
            <div class="row mb-4">
                <div class="col-12">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                            <li class="breadcrumb-item"><a href="/board">ì •ë³´ë§ˆë‹¹</a></li>
                            <li class="breadcrumb-item active" aria-current="page">ê³µì§€ì‚¬í•­</li>
                        </ol>
                    </nav>
                    <h2>
                        <i class="fas fa-bullhorn text-danger me-2"></i> 
                        ê³µì§€ì‚¬í•­
                    </h2>
                    <p class="text-muted mb-3">CareLinkì˜ ì¤‘ìš”í•œ ê³µì§€ì‚¬í•­ê³¼ ìƒˆë¡œìš´ ì†Œì‹ì„ í™•ì¸í•˜ì„¸ìš”.</p>
                    
                    <!-- ê²Œì‹œíŒ íƒ€ì… ë©”ë‰´ -->
                    <div class="btn-group mb-3" role="group" aria-label="ê²Œì‹œíŒ íƒ€ì…">
                        <a th:href="@{/board(type='all')}" class="btn btn-sm btn-outline-primary">ì „ì²´</a>
                        <a th:href="@{/board(type='notice')}" class="btn btn-sm btn-danger">ê³µì§€ì‚¬í•­</a>
                        <a th:href="@{/board(type='info')}" class="btn btn-sm btn-outline-primary">ì •ë³´ê³µìœ </a>
                        <a th:href="@{/board(type='qna')}" class="btn btn-sm btn-outline-primary">Q&A</a>
                        <a th:href="@{/board(type='faq')}" class="btn btn-sm btn-outline-primary">FAQ</a>
                    </div>
                </div>
            </div>
            
            <!-- ê²€ìƒ‰ ë° ê¸€ì“°ê¸° -->
            <div class="row mb-4">
                <div class="col-md-8">
                    <form th:action="@{/board}" method="get" class="d-flex gap-2">
                        <input type="hidden" name="type" value="notice">
                        <input type="text" name="keyword" class="form-control" th:value="${keyword}"
                               placeholder="ê³µì§€ì‚¬í•­ ê²€ìƒ‰">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-search me-1"></i>ê²€ìƒ‰
                        </button>
                    </form>
                </div>
                <div class="col-md-4 text-end">
                    <a th:href="@{/board/write(type='notice')}" class="btn btn-danger">
                        <i class="fas fa-plus me-1"></i>ê³µì§€ì‚¬í•­ ì‘ì„±
                    </a>
                </div>
            </div>

            <!-- ê³µì§€ì‚¬í•­ í†µê³„ -->
            <div class="row mb-4">
                <div class="col-md-12">
                    <div class="card bg-danger bg-opacity-10">
                        <div class="card-body py-3">
                            <div class="row text-center">
                                <div class="col-md-4">
                                    <i class="fas fa-bullhorn text-danger fa-2x mb-2"></i>
                                    <div>
                                        <strong class="d-block" th:text="${pageInfo.totalCount}">0</strong>
                                        <small class="text-muted">ì´ ê³µì§€ì‚¬í•­</small>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <i class="fas fa-eye text-info fa-2x mb-2"></i>
                                    <div>
                                        <strong class="d-block">5,678</strong>
                                        <small class="text-muted">ì´ ì¡°íšŒìˆ˜</small>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <i class="fas fa-calendar-day text-success fa-2x mb-2"></i>
                                    <div>
                                        <strong class="d-block">2</strong>
                                        <small class="text-muted">ì´ë²ˆì£¼ ë“±ë¡</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ê³µì§€ì‚¬í•­ ëª©ë¡ -->
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header bg-danger text-white">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-list me-2"></i>ê³µì§€ì‚¬í•­ ëª©ë¡
                                <small class="ms-2">
                                    (ì´ <span th:text="${pageInfo.totalCount}">0</span>ê°œ)
                                </small>
                            </h5>
                        </div>
                        <div class="card-body p-0">
                            <div th:if="${#lists.isEmpty(boardList)}" class="text-center py-5">
                                <i class="fas fa-bullhorn fa-3x text-muted mb-3"></i>
                                <h5 class="text-muted">ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤</h5>
                                <p class="text-muted">ì²« ë²ˆì§¸ ê³µì§€ì‚¬í•­ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</p>
                                <a th:href="@{/board/write(type='notice')}" class="btn btn-danger">
                                    <i class="fas fa-plus me-1"></i>ê³µì§€ì‚¬í•­ ì‘ì„±í•˜ê¸°
                                </a>
                            </div>
                            
                            <div th:unless="${#lists.isEmpty(boardList)}" class="list-group list-group-flush">
                                <div th:each="board : ${boardList}" class="list-group-item list-group-item-action notice-item">
                                    <div class="row align-items-center">
                                        <div class="col-md-8">
                                            <div class="d-flex align-items-center mb-2">
                                                <span class="badge bg-danger me-2">ê³µì§€</span>
                                                <span th:if="${board.isPinned}" class="badge bg-warning me-2">ê³ ì •</span>
                                                <span th:if="${board.isNotice}" class="badge bg-info me-2">ì¤‘ìš”</span>
                                                <h6 class="mb-0">
                                                    <a th:href="@{/board/detail/{id}(id=${board.boardId}, type='notice')}" 
                                                       class="text-decoration-none text-danger fw-bold" 
                                                       th:text="${board.title}">ê³µì§€ì‚¬í•­ ì œëª©</a>
                                                </h6>
                                            </div>
                                            <div class="notice-preview text-muted small">
                                                <span th:text="${#strings.abbreviate(board.content, 100)}">ê³µì§€ì‚¬í•­ ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°...</span>
                                            </div>
                                            <div class="notice-meta mt-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-user me-1"></i><span th:text="${board.memberName}">ê´€ë¦¬ì</span>
                                                    <span class="mx-2">|</span>
                                                    <i class="fas fa-calendar me-1"></i><span th:text="${#temporals.format(board.createdAt, 'yyyy-MM-dd HH:mm')}">2024-01-01 09:00</span>
                                                </small>
                                            </div>
                                        </div>
                                        <div class="col-md-4 text-end">
                                            <div class="notice-stats">
                                                <div class="row text-center">
                                                    <div class="col-6">
                                                        <i class="fas fa-eye text-info"></i>
                                                        <small class="d-block text-muted" th:text="${board.viewCount}">0</small>
                                                    </div>
                                                    <div class="col-6">
                                                        <i class="fas fa-thumbs-up text-success"></i>
                                                        <small class="d-block text-muted" th:text="${board.likeCount}">0</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- í˜ì´ì§• -->
            <nav th:if="${pageInfo.totalPages > 1}" aria-label="ê³µì§€ì‚¬í•­ í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜" class="mt-4">
                <ul class="pagination justify-content-center">
                    <li class="page-item" th:classappend="${pageInfo.firstPage} ? 'disabled'">
                        <a class="page-link" th:href="@{/board(type='notice', page=1, keyword=${keyword})}">
                            <span>&laquo;&laquo;</span>
                        </a>
                    </li>
                    <li class="page-item" th:classappend="${not pageInfo.hasPrevious} ? 'disabled'">
                        <a class="page-link" th:href="@{/board(type='notice', page=${pageInfo.currentPage - 1}, keyword=${keyword})}">
                            <span>&laquo;</span>
                        </a>
                    </li>
                    <li th:each="pageNum : ${#numbers.sequence(pageInfo.startPage, pageInfo.endPage)}"
                        class="page-item" th:classappend="${pageNum == pageInfo.currentPage} ? 'active'">
                        <a class="page-link" th:href="@{/board(type='notice', page=${pageNum}, keyword=${keyword})}" th:text="${pageNum}">1</a>
                    </li>
                    <li class="page-item" th:classappend="${not pageInfo.hasNext} ? 'disabled'">
                        <a class="page-link" th:href="@{/board(type='notice', page=${pageInfo.currentPage + 1}, keyword=${keyword})}">
                            <span>&raquo;</span>
                        </a>
                    </li>
                    <li class="page-item" th:classappend="${pageInfo.lastPage} ? 'disabled'">
                        <a class="page-link" th:href="@{/board(type='notice', page=${pageInfo.totalPages}, keyword=${keyword})}">
                            <span>&raquo;&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </main>

    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const noticeItems = document.querySelectorAll('.notice-item');
            
            noticeItems.forEach(item => {
                item.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = '#f8f9fa';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = '';
                });
            });
        });
    </script>
    
    <!-- ê²Œì‹œíŒ ë„¤ë¹„ê²Œì´ì…˜ ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="/js/board-navigation.js"></script>
</body>
</html>
````

## File: src/main/resources/templates/board/qna-list.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>Q&A - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container py-4">
            <!-- í˜ì´ì§€ ì œëª© -->
            <div class="row mb-4">
                <div class="col-12">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                            <li class="breadcrumb-item"><a href="/board">ì •ë³´ë§ˆë‹¹</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Q&A</li>
                        </ol>
                    </nav>
                    <h2>
                        <i class="fas fa-question-circle text-success me-2"></i> 
                        Q&A (ì§ˆë¬¸ê³¼ ë‹µë³€)
                    </h2>
                    <p class="text-muted mb-3">ê¶ê¸ˆí•œ ì ì„ ì§ˆë¬¸í•˜ê³  ë‹µë³€ì„ ë°›ì•„ë³´ì„¸ìš”. ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ì§ˆë¬¸ê³¼ ë‹µë³€ë„ í•¨ê»˜ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    
                    <!-- ê²Œì‹œíŒ íƒ€ì… ë©”ë‰´ -->
                    <div class="btn-group mb-3" role="group" aria-label="ê²Œì‹œíŒ íƒ€ì…">
                        <a th:href="@{/board(type='all')}" class="btn btn-sm btn-outline-primary">ì „ì²´</a>
                        <a th:href="@{/board(type='notice')}" class="btn btn-sm btn-outline-primary">ê³µì§€ì‚¬í•­</a>
                        <a th:href="@{/board(type='info')}" class="btn btn-sm btn-outline-primary">ì •ë³´ê³µìœ </a>
                        <a th:href="@{/board(type='qna')}" class="btn btn-sm btn-success">Q&A</a>
                        <a th:href="@{/board(type='faq')}" class="btn btn-sm btn-outline-primary">FAQ</a>
                    </div>
                </div>
            </div>
            
            <!-- ê²€ìƒ‰ ë° ê¸€ì“°ê¸° -->
            <div class="row mb-4">
                <div class="col-md-8">
                    <form th:action="@{/board}" method="get" class="d-flex gap-2">
                        <input type="hidden" name="type" value="qna">
                        <select name="status" class="form-select" style="width: auto;">
                            <option value="">ì „ì²´ ìƒíƒœ</option>
                            <option value="waiting">ë‹µë³€ ëŒ€ê¸°</option>
                            <option value="answered">ë‹µë³€ ì™„ë£Œ</option>
                            <option value="solved">í•´ê²°ë¨</option>
                        </select>
                        <input type="text" name="keyword" class="form-control" th:value="${keyword}"
                               placeholder="ì§ˆë¬¸ ë‚´ìš©ì„ ê²€ìƒ‰í•˜ì„¸ìš”">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-search me-1"></i>ê²€ìƒ‰
                        </button>
                    </form>
                </div>
                <div class="col-md-4 text-end">
                    <a th:href="@{/board/write(type='qna')}" class="btn btn-success">
                        <i class="fas fa-plus me-1"></i>ì§ˆë¬¸í•˜ê¸°
                    </a>
                </div>
            </div>

            <!-- Q&A í†µê³„ -->
            <div class="row mb-4">
                <div class="col-md-12">
                    <div class="card bg-success bg-opacity-10">
                        <div class="card-body py-3">
                            <div class="row text-center">
                                <div class="col-md-3">
                                    <i class="fas fa-question-circle text-success fa-2x mb-2"></i>
                                    <div>
                                        <strong class="d-block" th:text="${pageInfo.totalCount}">0</strong>
                                        <small class="text-muted">ì´ ì§ˆë¬¸</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <i class="fas fa-clock text-warning fa-2x mb-2"></i>
                                    <div>
                                        <strong class="d-block">12</strong>
                                        <small class="text-muted">ë‹µë³€ ëŒ€ê¸°</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <i class="fas fa-check-circle text-primary fa-2x mb-2"></i>
                                    <div>
                                        <strong class="d-block">45</strong>
                                        <small class="text-muted">ë‹µë³€ ì™„ë£Œ</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <i class="fas fa-trophy text-danger fa-2x mb-2"></i>
                                    <div>
                                        <strong class="d-block">98%</strong>
                                        <small class="text-muted">í•´ê²°ë¥ </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q&A ì¹´í…Œê³ ë¦¬ í•„í„° -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <h6 class="card-title">ì§ˆë¬¸ ì¹´í…Œê³ ë¦¬</h6>
                            <div class="btn-group flex-wrap" role="group">
                                <button type="button" class="btn btn-outline-secondary btn-sm active" onclick="filterQNA('all')">
                                    ì „ì²´ (<span th:text="${pageInfo.totalCount}">0</span>)
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="filterQNA('facility')">
                                    ì‹œì„¤ ê´€ë ¨ (15)
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="filterQNA('cost')">
                                    ë¹„ìš© ë¬¸ì˜ (23)
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="filterQNA('insurance')">
                                    ë³´í—˜ ê´€ë ¨ (18)
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="filterQNA('service')">
                                    ì„œë¹„ìŠ¤ (12)
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="filterQNA('etc')">
                                    ê¸°íƒ€ (8)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q&A ëª©ë¡ -->
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header bg-success text-white">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-list me-2"></i>Q&A ëª©ë¡
                                <small class="ms-2">
                                    (ì´ <span th:text="${pageInfo.totalCount}">0</span>ê°œ)
                                </small>
                            </h5>
                        </div>
                        <div class="card-body p-0">
                            <div th:if="${#lists.isEmpty(boardList)}" class="text-center py-5">
                                <i class="fas fa-question-circle fa-3x text-muted mb-3"></i>
                                <h5 class="text-muted">ë“±ë¡ëœ ì§ˆë¬¸ì´ ì—†ìŠµë‹ˆë‹¤</h5>
                                <p class="text-muted">ì²« ë²ˆì§¸ ì§ˆë¬¸ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</p>
                                <a th:href="@{/board/write(type='qna')}" class="btn btn-success">
                                    <i class="fas fa-plus me-1"></i>ì§ˆë¬¸í•˜ê¸°
                                </a>
                            </div>
                            
                            <div th:unless="${#lists.isEmpty(boardList)}" class="list-group list-group-flush">
                                <div th:each="board : ${boardList}" class="list-group-item list-group-item-action qna-item"
                                     th:data-category="${board.subCategory ?: 'etc'}">
                                    <div class="row align-items-center">
                                        <div class="col-md-8">
                                            <div class="d-flex align-items-center mb-2">
                                                <span class="badge bg-success me-2">Q</span>
                                                <!-- ë‹µë³€ ìƒíƒœ ë°°ì§€ -->
                                                <span th:if="${board.commentCount == 0}" class="badge bg-warning me-2">ë‹µë³€ëŒ€ê¸°</span>
                                                <span th:if="${board.commentCount > 0}" class="badge bg-primary me-2">ë‹µë³€ì™„ë£Œ</span>
                                                <span th:if="${board.status == 'SOLVED'}" class="badge bg-info me-2">í•´ê²°ë¨</span>
                                                <h6 class="mb-0">
                                                    <a th:href="@{/board/detail/{id}(id=${board.boardId}, type='qna')}" 
                                                       class="text-decoration-none" 
                                                       th:text="${board.title}">ì§ˆë¬¸ ì œëª©</a>
                                                </h6>
                                            </div>
                                            <div class="qna-preview text-muted small">
                                                <span th:text="${#strings.abbreviate(board.content, 120)}">ì§ˆë¬¸ ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°...</span>
                                            </div>
                                            <div class="qna-meta mt-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-user me-1"></i><span th:text="${board.memberName}">ì§ˆë¬¸ì</span>
                                                    <span class="mx-2">|</span>
                                                    <i class="fas fa-calendar me-1"></i><span th:text="${#temporals.format(board.createdAt, 'yyyy-MM-dd HH:mm')}">2024-01-01 09:00</span>
                                                    <span th:if="${board.tags}" class="mx-2">|</span>
                                                    <span th:if="${board.tags}" th:each="tag : ${#strings.arraySplit(board.tags, ',')}" 
                                                          class="badge bg-light text-dark me-1" th:text="${tag}">íƒœê·¸</span>
                                                </small>
                                            </div>
                                        </div>
                                        <div class="col-md-4 text-end">
                                            <div class="qna-stats">
                                                <div class="row text-center">
                                                    <div class="col-4">
                                                        <i class="fas fa-eye text-info"></i>
                                                        <small class="d-block text-muted" th:text="${board.viewCount}">0</small>
                                                    </div>
                                                    <div class="col-4">
                                                        <i class="fas fa-comments text-success"></i>
                                                        <small class="d-block text-muted" th:text="${board.commentCount}">0</small>
                                                    </div>
                                                    <div class="col-4">
                                                        <i class="fas fa-thumbs-up text-primary"></i>
                                                        <small class="d-block text-muted" th:text="${board.likeCount}">0</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-2">
                                                <span th:if="${board.isNew != null and board.isNew}" class="badge bg-danger">NEW</span>
                                                <span th:if="${board.priority > 0}" class="badge bg-warning">ê¸´ê¸‰</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- í˜ì´ì§• -->
            <nav th:if="${pageInfo.totalPages > 1}" aria-label="Q&A í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜" class="mt-4">
                <ul class="pagination justify-content-center">
                    <li class="page-item" th:classappend="${pageInfo.firstPage} ? 'disabled'">
                        <a class="page-link" th:href="@{/board(type='qna', page=1, keyword=${keyword})}">
                            <span>&laquo;&laquo;</span>
                        </a>
                    </li>
                    <li class="page-item" th:classappend="${not pageInfo.hasPrevious} ? 'disabled'">
                        <a class="page-link" th:href="@{/board(type='qna', page=${pageInfo.currentPage - 1}, keyword=${keyword})}">
                            <span>&laquo;</span>
                        </a>
                    </li>
                    <li th:each="pageNum : ${#numbers.sequence(pageInfo.startPage, pageInfo.endPage)}"
                        class="page-item" th:classappend="${pageNum == pageInfo.currentPage} ? 'active'">
                        <a class="page-link" th:href="@{/board(type='qna', page=${pageNum}, keyword=${keyword})}" th:text="${pageNum}">1</a>
                    </li>
                    <li class="page-item" th:classappend="${not pageInfo.hasNext} ? 'disabled'">
                        <a class="page-link" th:href="@{/board(type='qna', page=${pageInfo.currentPage + 1}, keyword=${keyword})}">
                            <span>&raquo;</span>
                        </a>
                    </li>
                    <li class="page-item" th:classappend="${pageInfo.lastPage} ? 'disabled'">
                        <a class="page-link" th:href="@{/board(type='qna', page=${pageInfo.totalPages}, keyword=${keyword})}">
                            <span>&raquo;&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- ë„ì›€ë§ ì„¹ì…˜ -->
            <div class="row mt-5">
                <div class="col-12">
                    <div class="card bg-light">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="text-success">
                                        <i class="fas fa-lightbulb me-1"></i>ì§ˆë¬¸í•˜ê¸° ì „ì— í™•ì¸í•˜ì„¸ìš”
                                    </h6>
                                    <p class="mb-2">FAQì—ì„œ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ê³¼ ë‹µë³€ì„ ë¨¼ì € í™•ì¸í•´ë³´ì„¸ìš”.</p>
                                    <a href="/board?type=faq" class="btn btn-warning btn-sm">
                                        <i class="fas fa-question-circle me-1"></i>FAQ ë³´ê¸°
                                    </a>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="text-info">
                                        <i class="fas fa-phone me-1"></i>ê¸´ê¸‰ ë¬¸ì˜
                                    </h6>
                                    <p class="mb-2">ê¸´ê¸‰í•œ ë¬¸ì˜ì‚¬í•­ì€ ì „í™”ë¡œ ìƒë‹´ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                                    <p class="mb-0">
                                        <strong class="text-primary">1588-0000</strong>
                                        <small class="text-muted">(í‰ì¼ 09:00~18:00)</small>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>

    <script>
        // Q&A ì¹´í…Œê³ ë¦¬ í•„í„°ë§
        function filterQNA(category) {
            const items = document.querySelectorAll('.qna-item');
            const buttons = document.querySelectorAll('.btn-group button');
            
            // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Q&A ì•„ì´í…œ í•„í„°ë§
            items.forEach(item => {
                if (category === 'all' || item.dataset.category === category) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const qnaItems = document.querySelectorAll('.qna-item');
            
            qnaItems.forEach(item => {
                item.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = '#f8f9fa';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = '';
                });
            });
        });
    </script>
    
    <!-- ê²Œì‹œíŒ ë„¤ë¹„ê²Œì´ì…˜ ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="/js/board-navigation.js"></script>
</body>
</html>
````

## File: src/main/resources/templates/facility/edit.backup.html
````html
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/header :: header}">
    <title>ì‹œì„¤ ì •ë³´ ìˆ˜ì • - ë¼ì´íŠ¸ì¼€ì–´</title>
</head>

<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="container my-4">
    <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
            <li class="breadcrumb-item"><a href="/facility/search">ì‹œì„¤ ì°¾ê¸°</a></li>
            <li class="breadcrumb-item"><a href="/facility/manage">ë‚´ ì‹œì„¤ ê´€ë¦¬</a></li>
            <li class="breadcrumb-item active" aria-current="page">ì‹œì„¤ ì •ë³´ ìˆ˜ì •</li>
        </ol>
    </nav>
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-edit me-2"></i>ì‹œì„¤ ì •ë³´ ìˆ˜ì •
                    </h3>
                </div>
                <div class="card-body">
                    <form id="facilityEditForm" th:action="@{/facility/edit/{id}(id=${facility.facilityId})}" 
                          method="post" enctype="multipart/form-data" th:object="${facility}">
                        
                        <!-- ì‹œì„¤ëª… -->
                        <div class="mb-3">
                            <label for="facilityName" class="form-label">
                                <i class="fas fa-building me-1"></i>ì‹œì„¤ëª… <span class="text-danger">*</span>
                            </label>
                            <input type="text" class="form-control" id="facilityName" th:field="*{facilityName}"
                                   placeholder="ì‹œì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                        </div>

                        <!-- ì‹œì„¤ ìœ í˜• -->
                        <div class="mb-3">
                            <label for="facilityType" class="form-label">
                                <i class="fas fa-tag me-1"></i>ì‹œì„¤ ìœ í˜• <span class="text-danger">*</span>
                            </label>
                            <select class="form-select" id="facilityType" th:field="*{facilityType}" required>
                                <option value="">ì‹œì„¤ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="NURSING_HOME">ìš”ì–‘ì›</option>
                                <option value="HOSPITAL">ìš”ì–‘ë³‘ì›</option>
                                <option value="DAY_CARE">ë°ì´ì¼€ì–´ì„¼í„°</option>
                            </select>
                        </div>

                        <!-- ì£¼ì†Œ -->
                        <div class="mb-3">
                            <label for="facilityAddress" class="form-label">
                                <i class="fas fa-map-marker-alt me-1"></i>ì£¼ì†Œ <span class="text-danger">*</span>
                            </label>
                            <div class="input-group mb-2">
                                <input type="text" class="form-control" id="facilityAddress" th:field="*{address}"
                                       placeholder="ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”" readonly required>
                                <button type="button" class="btn btn-outline-primary" onclick="searchFacilityAddress()">
                                    <i class="fas fa-search me-1"></i>ì£¼ì†Œ ê²€ìƒ‰
                                </button>
                            </div>
                            <input type="text" class="form-control" id="detailAddress" th:field="*{detailAddress}"
                                   placeholder="ìƒì„¸ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 101í˜¸, 2ì¸µ)">
                            <!-- ìœ„ë„/ê²½ë„ íˆë“  í•„ë“œ -->
                            <input type="hidden" id="latitude" th:field="*{latitude}">
                            <input type="hidden" id="longitude" th:field="*{longitude}">
                        </div>
                        
                        <!-- ìœ„ì¹˜ ë¯¸ë¦¬ë³´ê¸° ì§€ë„ -->
                        <div class="mb-3" id="mapPreviewContainer" style="display: none;">
                            <label class="form-label">
                                <i class="fas fa-map me-1"></i>ìœ„ì¹˜ ë¯¸ë¦¬ë³´ê¸°
                            </label>
                            <div id="previewMap" style="width:100%; height:200px; border-radius: 8px; border: 1px solid #dee2e6;"></div>
                            <small class="form-text text-muted">ì„ íƒëœ ì£¼ì†Œì˜ ìœ„ì¹˜ê°€ ì§€ë„ì— í‘œì‹œë©ë‹ˆë‹¤.</small>
                        </div>

                        <!-- ì‹œì„¤ ì „í™”ë²ˆí˜¸ -->
                        <div class="mb-3">
                            <label for="phone" class="form-label">
                                <i class="fas fa-phone me-1"></i>ì‹œì„¤ ì „í™”ë²ˆí˜¸ <span class="text-danger">*</span>
                            </label>
                            <input type="tel" class="form-control" id="phone" th:field="*{phone}"
                                   placeholder="ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì§€ì—­ë²ˆí˜¸ì— ë§ê²Œ ìë™ í¬ë§·íŒ…)" required>
                            <small class="form-text text-muted">
                                <strong>ì§€ì—­ë²ˆí˜¸ ì˜ˆì‹œ:</strong> 
                                ì„œìš¸(02), ë¶€ì‚°(051), ëŒ€êµ¬(053), ì¸ì²œ(032), ê´‘ì£¼(062), ëŒ€ì „(042), ìš¸ì‚°(052) ë“±<br>
                                <strong>í˜•ì‹:</strong> 042ëŠ” 3-3-4, 02ëŠ” 2-3-4 ë˜ëŠ” 2-4-4 í˜•ì‹ìœ¼ë¡œ ìë™ ì ìš©ë©ë‹ˆë‹¤
                            </small>
                        </div>

                        <!-- í˜„ì¬ ì‹œì„¤ ì´ë¯¸ì§€ (ìˆëŠ” ê²½ìš°) -->
                        <div class="mb-3" th:if="${facility.facilityImage}">
                            <label class="form-label">
                                <i class="fas fa-image me-1"></i>í˜„ì¬ ì‹œì„¤ ì‚¬ì§„
                            </label>
                            <div class="current-image-container mb-3" style="position: relative; display: inline-block;">
                                <img th:src="@{${facility.facilityImage}}" alt="í˜„ì¬ ì‹œì„¤ ì‚¬ì§„" 
                                     style="max-width: 300px; max-height: 200px; border-radius: 12px; border: 2px solid #dee2e6; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                <div class="current-image-overlay" style="position: absolute; top: 8px; right: 8px;">
                                    <span class="badge bg-primary">í˜„ì¬ ì´ë¯¸ì§€</span>
                                </div>
                            </div>
                        </div>

                        <!-- ìƒˆ ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
                        <div class="mb-4">
                            <label class="form-label">
                                <i class="fas fa-cloud-upload-alt me-1"></i>ì‹œì„¤ ì‚¬ì§„ 
                                <span th:if="${facility.facilityImage == null}" class="text-danger">*</span>
                                <span th:if="${facility.facilityImage != null}" class="text-muted">(ìƒˆ ì´ë¯¸ì§€ë¡œ ë³€ê²½)</span>
                            </label>
                            
                            <!-- ìƒˆë¡œìš´ ì´ë¯¸ì§€ ì—…ë¡œë” ì»´í¬ë„ŒíŠ¸ -->
                            <div id="facilityImageUploader"></div>
                            
                            <!-- ìˆ¨ê²¨ì§„ íŒŒì¼ ì…ë ¥ (ê¸°ì¡´ í¼ê³¼ í˜¸í™˜ì„±ì„ ìœ„í•´) -->
                            <input type="file" id="facilityImageFile" name="facilityImageFile" 
                                   accept="image/*" style="display: none;"
                                   th:required="${facility.facilityImage == null}">
                            
                            <!-- Alt í…ìŠ¤íŠ¸ ì…ë ¥ (SEOìš©) -->
                            <input type="hidden" id="facilityImageAltText" name="facilityImageAltText" 
                                   th:value="${facility.facilityImageAltText}">
                        </div>

                        <!-- ìˆ˜ìš© ì¸ì› -->
                        <div class="mb-3">
                            <label for="capacity" class="form-label">
                                <i class="fas fa-users me-1"></i>ìˆ˜ìš© ì¸ì›
                            </label>
                            <input type="number" class="form-control" id="capacity" th:field="*{capacity}"
                                   placeholder="ìˆ˜ìš© ê°€ëŠ¥ ì¸ì›ì„ ì…ë ¥í•˜ì„¸ìš”" min="1">
                        </div>

                        <!-- ìš´ì˜ ì‹œê°„ -->
                        <div class="mb-3">
                            <label for="operatingHours" class="form-label">
                                <i class="fas fa-clock me-1"></i>ìš´ì˜ ì‹œê°„
                            </label>
                            <div class="row g-2">
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="operatingType" id="operating24" 
                                               value="24ì‹œê°„" th:checked="${facility.operatingHours == '24ì‹œê°„'}">
                                        <label class="form-check-label fw-bold text-success" for="operating24">
                                            <i class="fas fa-clock me-1"></i>24ì‹œê°„ ìš´ì˜
                                        </label>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="operatingType" id="operatingCustom" 
                                               value="custom" th:checked="${facility.operatingHours != '24ì‹œê°„' && facility.operatingHours != null}">
                                        <label class="form-check-label" for="operatingCustom">
                                            <i class="fas fa-clock me-1"></i>ì‹œê°„ ì§ì ‘ ì„¤ì •
                                        </label>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="operatingType" id="operatingWeekly" value="weekly">
                                        <label class="form-check-label" for="operatingWeekly">
                                            <i class="fas fa-calendar-week me-1"></i>ìš”ì¼ë³„ ì‹œê°„ ì„¤ì •
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì • -->
                            <div id="simpleTimeContainer" class="mt-3" style="display: none;">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h6 class="card-title mb-3">ìš´ì˜ ì‹œê°„ ì„¤ì •</h6>
                                        <div class="row g-2">
                                            <div class="col-md-6">
                                                <label class="form-label small">ì‹œì‘ ì‹œê°„</label>
                                                <select class="form-select" id="startHour">
                                                    <option value="">ì‹œ</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label small">ì¢…ë£Œ ì‹œê°„</label>
                                                <select class="form-select" id="endHour">
                                                    <option value="">ì‹œ</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="mt-2">
                                            <small class="text-muted">
                                                <i class="fas fa-info-circle me-1"></i>
                                                ë§¤ì¼ ë™ì¼í•œ ì‹œê°„ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ìš”ì¼ë³„ ì‹œê°„ ì„¤ì • -->
                            <div id="weeklyTimeContainer" class="mt-3" style="display: none;">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h6 class="card-title mb-3">ìš”ì¼ë³„ ìš´ì˜ ì‹œê°„</h6>
                                        <div id="weeklySchedule">
                                            <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                                        </div>
                                        
                                        <div class="mt-3">
                                            <small class="text-muted">
                                                <i class="fas fa-info-circle me-1"></i>
                                                ìš´ì˜í•˜ì§€ ì•ŠëŠ” ìš”ì¼ì€ ì²´í¬ë¥¼ í•´ì œí•˜ì„¸ìš”
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ì§ì ‘ ì…ë ¥ -->
                            <div id="customTimeContainer" class="mt-3" style="display: none;">
                                <input type="text" class="form-control" id="customOperatingHours" 
                                       placeholder="ì˜ˆ: 09:00-18:00, í‰ì¼ 09:00-18:00 ì£¼ë§ 10:00-16:00"
                                       th:value="${facility.operatingHours != '24ì‹œê°„' ? facility.operatingHours : ''}">
                                <small class="form-text text-muted">
                                    ììœ  í˜•ì‹ìœ¼ë¡œ ìš´ì˜ ì‹œê°„ì„ ì…ë ¥í•˜ì„¸ìš”
                                </small>
                            </div>
                            
                            <input type="hidden" id="operatingHours" th:field="*{operatingHours}">
                        </div>

                        <!-- í™ˆí˜ì´ì§€ -->
                        <div class="mb-3">
                            <label for="homepage" class="form-label">
                                <i class="fas fa-globe me-1"></i>í™ˆí˜ì´ì§€ URL
                            </label>
                            <input type="url" class="form-control" id="homepage" th:field="*{homepage}"
                                   placeholder="https://www.example.com">
                        </div>

                        <!-- ì‹œì„¤ ì„¤ëª… -->
                        <div class="mb-3">
                            <label for="description" class="form-label">
                                <i class="fas fa-info-circle me-1"></i>ì‹œì„¤ ì„¤ëª…
                            </label>
                            <textarea class="form-control" id="description" th:field="*{description}" rows="4"
                                      placeholder="ì‹œì„¤ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"
                                      data-rich-editor='{"height": "250px", "enableImage": true, "enableTable": false, "enableLink": true}'></textarea>
                        </div>

                        <!-- ì‹œì„¤ íŠ¹ì§• -->
                        <div class="mb-3">
                            <label for="features" class="form-label">
                                <i class="fas fa-star me-1"></i>ì‹œì„¤ íŠ¹ì§•
                            </label>
                            <input type="text" class="form-control" id="features" th:field="*{features}"
                                   placeholder="ì‹œì„¤ì˜ ì£¼ìš” íŠ¹ì§•ì„ ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 24ì‹œê°„ ê°„ë³‘ì„œë¹„ìŠ¤, ë¬¼ë¦¬ì¹˜ë£Œì‹¤, ì¹´í˜)">
                            <small class="form-text text-muted">ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ì—¬ëŸ¬ íŠ¹ì§•ì„ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</small>
                        </div>

                        <!-- ë²„íŠ¼ -->
                        <div class="d-flex gap-2 justify-content-end">
                            <a th:href="@{/facility/manage}" class="btn btn-secondary">
                                <i class="fas fa-times me-2"></i>ì·¨ì†Œ
                            </a>
                            <button type="submit" class="btn btn-primary" id="submitButton">
                                <i class="fas fa-save me-2"></i>ìˆ˜ì • ì™„ë£Œ
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ API -->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<!-- ì¹´ì¹´ì˜¤ë§µ API (ì¢Œí‘œ ë³€í™˜ìš©) -->
<script type="text/javascript" th:src="@{//dapi.kakao.com/v2/maps/sdk.js(appkey=${@environment.getProperty('api.kakao.app-key')}, libraries='services')}"></script>
<!-- ì¹´ì¹´ì˜¤ë§µ ìœ í‹¸ë¦¬í‹° -->
<script src="/js/kakaomap.js"></script>
<script src="/js/facility-edit.js"></script>

<!-- ì „í™”ë²ˆí˜¸ í¬ë§·í„° -->
<script src="/js/phone-formatter.js"></script>

<!-- ê³ ê¸‰ ì´ë¯¸ì§€ í¬ë¡­í¼ -->
<link rel="stylesheet" href="/css/advanced-image-cropper.css">
<script src="/js/advanced-image-cropper.js"></script>

<!-- ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° -->
<link rel="stylesheet" href="/css/rich-text-editor.css">
<script src="/js/rich-text-editor.js"></script>

<script>
$(document).ready(function() {
    console.log('Initializing operating hours...');
    
    // ì‹œê°„ ì˜µì…˜ ë™ì  ìƒì„±
    initializeTimeOptions();
    
    // ìš”ì¼ë³„ ìŠ¤ì¼€ì¤„ ë¯¸ë¦¬ ìƒì„±
    generateWeeklySchedule();
    
    // ì§ì ‘ ì…ë ¥ ë³€ê²½ ì´ë²¤íŠ¸
    $('#customOperatingHours').on('input', function() {
        updateOperatingHours();
    });
    
    // ì´ˆê¸° ìƒíƒœ ì„¤ì •
    initializeOperatingHours();
});

function initializeTimeOptions() {
    // ì‹œì‘ ì‹œê°„ ì˜µì…˜ ìƒì„±
    for (let i = 0; i <= 23; i++) {
        const hour = String(i).padStart(2, '0');
        $('#startHour').append(`<option value="${hour}">${hour}ì‹œ</option>`);
        $('#endHour').append(`<option value="${hour}">${hour}ì‹œ</option>`);
    }
}

function generateWeeklySchedule() {
    console.log('Generating weekly schedule...');
    const days = ['ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼', 'ì¼ìš”ì¼'];
    let html = '';
    
    days.forEach((day, index) => {
        html += `
            <div class="row g-2 mb-2">
                <div class="col-3">
                    <div class="form-check">
                        <input class="form-check-input day-check" type="checkbox" id="day${index}" checked>
                        <label class="form-check-label" for="day${index}">${day}</label>
                    </div>
                </div>
                <div class="col-9 time-controls">
                    <div class="d-flex align-items-center gap-2">
                        <select class="form-select form-select-sm day-start" id="start${index}" style="width: 80px;">
                            <option value="">ì‹œì‘</option>
                        </select>
                        <span>ì‹œ ~</span>
                        <select class="form-select form-select-sm day-end" id="end${index}" style="width: 80px;">
                            <option value="">ì¢…ë£Œ</option>
                        </select>
                        <span>ì‹œ</span>
                    </div>
                    <div class="rest-day-notice text-muted small mt-1" style="display: none;">
                        <i class="fas fa-moon me-1"></i>íœ´ë¬´ì¼
                    </div>
                </div>
            </div>
        `;
    });
    
    $('#weeklySchedule').html(html);
    
    // ì‹œê°„ ì˜µì…˜ ì¶”ê°€
    for (let i = 0; i <= 23; i++) {
        const hour = String(i).padStart(2, '0');
        days.forEach((day, index) => {
            $(`#start${index}`).append(`<option value="${hour}">${hour}</option>`);
            $(`#end${index}`).append(`<option value="${hour}">${hour}</option>`);
        });
    }
    
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    setTimeout(function() {
        $('.day-check').off('change').on('change', function() {
            const index = $(this).attr('id').replace('day', '');
            const timeControls = $(this).closest('.row').find('.time-controls');
            const restNotice = timeControls.find('.rest-day-notice');
            const selects = timeControls.find('select');
            
            if ($(this).is(':checked')) {
                selects.show();
                timeControls.find('span').show();
                restNotice.hide();
            } else {
                selects.hide();
                timeControls.find('span').hide();
                restNotice.show();
            }
            
            updateOperatingHours();
        });
        
        $('.day-start, .day-end').off('change').on('change', function() {
            updateOperatingHours();
        });
        
        // ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì • ì´ë²¤íŠ¸ë„ ì—¬ê¸°ì„œ ë“±ë¡
        $('#startHour, #endHour').off('change').on('change', function() {
            updateOperatingHours();
        });
    }, 100);
}

function initializeOperatingHours() {
    const currentHours = $('#operatingHours').val();
    
    if (currentHours === '24ì‹œê°„') {
        $('#operating24').prop('checked', true);
    } else if (currentHours && currentHours !== '') {
        $('#operatingCustom').prop('checked', true);
        $('#customTimeContainer').show();
        $('#customOperatingHours').val(currentHours);
    }
}

function updateOperatingHours() {
    const operatingType = $('input[name="operatingType"]:checked').val();
    let operatingHours = '';
    
    if (operatingType === '24ì‹œê°„') {
        operatingHours = '24ì‹œê°„';
    } else if (operatingType === 'simple') {
        const startHour = $('#startHour').val();
        const endHour = $('#endHour').val();
        
        if (startHour && endHour) {
            operatingHours = `${startHour}:00-${endHour}:00`;
        }
    } else if (operatingType === 'weekly') {
        const weeklyHours = [];
        const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
        
        $('.day-check').each(function(index) {
            if ($(this).is(':checked')) {
                const startHour = $(`#start${index}`).val();
                const endHour = $(`#end${index}`).val();
                
                if (startHour && endHour) {
                    weeklyHours.push(`${days[index]} ${startHour}:00-${endHour}:00`);
                }
            } else {
                weeklyHours.push(`${days[index]} íœ´ë¬´`);
            }
        });
        
        operatingHours = weeklyHours.join(', ');
    } else if (operatingType === 'custom') {
        operatingHours = $('#customOperatingHours').val();
    }
    
    $('#operatingHours').val(operatingHours);
}


// ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì • ë¼ë””ì˜¤ ë²„íŠ¼ ë™ì  ì¶”ê°€
$(document).ready(function() {
    const simpleOption = `
        <div class="col-12">
            <div class="form-check">
                <input class="form-check-input" type="radio" name="operatingType" id="operatingSimple" value="simple">
                <label class="form-check-label" for="operatingSimple">
                    <i class="fas fa-clock me-1"></i>ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì •
                </label>
            </div>
        </div>
    `;
    
    $('#operatingCustom').closest('.col-12').after(simpleOption);
    
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë‹¤ì‹œ ë“±ë¡
    setTimeout(function() {
        $('input[name="operatingType"]').off('change').on('change', function() {
            const value = $(this).val();
            console.log('Operating type changed:', value);
            
            // ëª¨ë“  ì»¨í…Œì´ë„ˆ ìˆ¨ê¸°ê¸°
            $('#simpleTimeContainer, #weeklyTimeContainer, #customTimeContainer').hide();
            
            if (value === 'custom') {
                $('#customTimeContainer').show();
            } else if (value === 'weekly') {
                $('#weeklyTimeContainer').show();
                generateWeeklySchedule();
            } else if (value === 'simple') {
                $('#simpleTimeContainer').show();
            }
            
            updateOperatingHours();
        });
    }, 100);
    
    // ê³ ê¸‰ ì´ë¯¸ì§€ í¬ë¡­í¼ ì´ˆê¸°í™”
    initializeFacilityImageCropper();
});

// ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­í¼ ì´ˆê¸°í™”
function initializeFacilityImageCropper() {
    const facilityImageCropper = new AdvancedImageCropper('facilityImageUploader', {
        // ì‹œì„¤ ì´ë¯¸ì§€ ìµœì í™” ì„¤ì •
        aspectRatio: 16/10, // ì‹œì„¤ ì¹´ë“œ ë¹„ìœ¨
        cropWidth: 800,
        cropHeight: 500,
        previewStyle: 'facility',
        title: 'ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ',
        quality: 0.8,
        enableAltText: true,
        
        // í¬ë¡­ ì™„ë£Œ ì½œë°±
        onCropComplete: function(result) {
            console.log('ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ ì™„ë£Œ:', result);
            
            // ê¸°ì¡´ íŒŒì¼ ì…ë ¥ì— ì••ì¶•ëœ íŒŒì¼ ì„¤ì •
            const facilityImageFile = document.getElementById('facilityImageFile');
            const facilityImageAltText = document.getElementById('facilityImageAltText');
            
            // DataTransferë¥¼ ì‚¬ìš©í•˜ì—¬ File ê°ì²´ë¥¼ inputì— ì„¤ì •
            const dataTransfer = new DataTransfer();
            const compressedFile = new File([result.compressedBlob], 
                result.originalFile.name, {
                    type: 'image/jpeg',
                    lastModified: Date.now()
                });
            
            dataTransfer.items.add(compressedFile);
            facilityImageFile.files = dataTransfer.files;
            
            // Alt í…ìŠ¤íŠ¸ ì„¤ì •
            if (facilityImageAltText) {
                facilityImageAltText.value = result.altText;
            }
            
            // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
            showSuccessMessage('ì‹œì„¤ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ìµœì í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
        },
        
        // ì—ëŸ¬ ì½œë°±
        onError: function(message) {
            console.error('ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ ì˜¤ë¥˜:', message);
            showErrorMessage('ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + message);
        }
    });
    
    // ì „ì—­ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì €ì¥
    window.facilityImageCropper = facilityImageCropper;
}

// ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
function showSuccessMessage(message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-success alert-dismissible fade show';
    alertDiv.innerHTML = `
        <i class="fas fa-check-circle me-2"></i>${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    // í¼ ìƒë‹¨ì— ë©”ì‹œì§€ ì‚½ì…
    const form = document.getElementById('facilityEditForm');
    form.insertBefore(alertDiv, form.firstChild);
    
    // 5ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 5000);
}

// ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
function showErrorMessage(message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-danger alert-dismissible fade show';
    alertDiv.innerHTML = `
        <i class="fas fa-exclamation-triangle me-2"></i>${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    // í¼ ìƒë‹¨ì— ë©”ì‹œì§€ ì‚½ì…
    const form = document.getElementById('facilityEditForm');
    form.insertBefore(alertDiv, form.firstChild);
    
    // 10ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 10000);
}
</script>

</body>
</html>
````

## File: src/main/resources/templates/review/edit.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title th:text="${pageTitle + ' - CareLink'}">ë¦¬ë·° ìˆ˜ì • - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container mt-4">
            <!-- í˜ì´ì§€ ì œëª© -->
            <div class="row mb-4">
                <div class="col-12">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                            <li class="breadcrumb-item"><a href="/facility/search">ì‹œì„¤ ì°¾ê¸°</a></li>
                            <li class="breadcrumb-item"><a href="/review">ì‹œì„¤ ë¦¬ë·°</a></li>
                            <li class="breadcrumb-item">
                                <a th:href="@{/review/detail/{id}(id=${reviewDTO.reviewId})}" th:text="${reviewDTO.title}">ë¦¬ë·° ì œëª©</a>
                            </li>
                            <li class="breadcrumb-item active" aria-current="page">ìˆ˜ì •</li>
                        </ol>
                    </nav>
                    <h2>
                        <i class="fas fa-edit text-primary me-2"></i> 
                        ë¦¬ë·° ìˆ˜ì •
                    </h2>
                    <p class="text-muted">ë¦¬ë·° ì •ë³´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- ë¦¬ë·° ìˆ˜ì • í¼ -->
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <h4 class="mb-0">
                                <i class="fas fa-star me-2"></i>ë¦¬ë·° ìˆ˜ì •
                            </h4>
                        </div>
                        <div class="card-body">
                            <form th:action="@{/review/update}" method="post" th:object="${reviewDTO}" id="reviewEditForm">
                                <!-- ë¦¬ë·° ID (hidden) -->
                                <input type="hidden" th:field="*{reviewId}">
                                <input type="hidden" th:field="*{facilityId}">
                                <input type="hidden" th:field="*{memberId}">
                                
                                <!-- ì‹œì„¤ ì •ë³´ í‘œì‹œ (ì½ê¸° ì „ìš©) -->
                                <div class="mb-4">
                                    <label class="form-label fw-bold">ì‹œì„¤ ì •ë³´</label>
                                    <div class="p-3 bg-light rounded">
                                        <h6 class="mb-1" th:text="${reviewDTO.facilityName}">ì‹œì„¤ëª…</h6>
                                        <small class="text-muted">ì„ íƒëœ ì‹œì„¤ì€ ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</small>
                                    </div>
                                </div>

                                <!-- ì œëª© -->
                                <div class="mb-4">
                                    <label class="form-label fw-bold">ì œëª© *</label>
                                    <input type="text" class="form-control" th:field="*{title}" id="title"
                                           placeholder="ë¦¬ë·° ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" 
                                           maxlength="200" required>
                                    <div class="form-text">ìµœëŒ€ 200ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
                                </div>

                                <!-- ì „ì²´ í‰ì  -->
                                <div class="mb-4">
                                    <label class="form-label fw-bold">ì „ì²´ í‰ì  *</label>
                                    <div class="rating-section">
                                        <div class="rating-stars" id="overallRating">
                                            <span class="star" data-rating="1">â˜…</span>
                                            <span class="star" data-rating="2">â˜…</span>
                                            <span class="star" data-rating="3">â˜…</span>
                                            <span class="star" data-rating="4">â˜…</span>
                                            <span class="star" data-rating="5">â˜…</span>
                                        </div>
                                        <span class="rating-text ms-3" id="ratingText">í‰ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”</span>
                                        <input type="hidden" th:field="*{rating}" id="ratingValue" required>
                                    </div>
                                </div>

                                <!-- ì„¸ë¶€ í‰ì  -->
                                <div class="mb-4">
                                    <label class="form-label fw-bold">ì„¸ë¶€ í‰ì  (ì„ íƒì‚¬í•­)</label>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <div class="rating-group">
                                                <label class="form-label">ì„œë¹„ìŠ¤</label>
                                                <div class="detailed-rating" data-field="service">
                                                    <span class="star" data-rating="1">â˜…</span>
                                                    <span class="star" data-rating="2">â˜…</span>
                                                    <span class="star" data-rating="3">â˜…</span>
                                                    <span class="star" data-rating="4">â˜…</span>
                                                    <span class="star" data-rating="5">â˜…</span>
                                                </div>
                                                <input type="hidden" th:field="*{serviceRating}" class="detailed-rating-input">
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="rating-group">
                                                <label class="form-label">ì‹œì„¤</label>
                                                <div class="detailed-rating" data-field="facility">
                                                    <span class="star" data-rating="1">â˜…</span>
                                                    <span class="star" data-rating="2">â˜…</span>
                                                    <span class="star" data-rating="3">â˜…</span>
                                                    <span class="star" data-rating="4">â˜…</span>
                                                    <span class="star" data-rating="5">â˜…</span>
                                                </div>
                                                <input type="hidden" th:field="*{facilityRating}" class="detailed-rating-input">
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="rating-group">
                                                <label class="form-label">ì§ì›</label>
                                                <div class="detailed-rating" data-field="staff">
                                                    <span class="star" data-rating="1">â˜…</span>
                                                    <span class="star" data-rating="2">â˜…</span>
                                                    <span class="star" data-rating="3">â˜…</span>
                                                    <span class="star" data-rating="4">â˜…</span>
                                                    <span class="star" data-rating="5">â˜…</span>
                                                </div>
                                                <input type="hidden" th:field="*{staffRating}" class="detailed-rating-input">
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="rating-group">
                                                <label class="form-label">ê°€ê²©</label>
                                                <div class="detailed-rating" data-field="price">
                                                    <span class="star" data-rating="1">â˜…</span>
                                                    <span class="star" data-rating="2">â˜…</span>
                                                    <span class="star" data-rating="3">â˜…</span>
                                                    <span class="star" data-rating="4">â˜…</span>
                                                    <span class="star" data-rating="5">â˜…</span>
                                                </div>
                                                <input type="hidden" th:field="*{priceRating}" class="detailed-rating-input">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- ë¦¬ë·° ë‚´ìš© -->
                                <div class="mb-4">
                                    <label class="form-label fw-bold">ë¦¬ë·° ë‚´ìš© *</label>
                                    <textarea class="form-control" rows="8" th:field="*{content}" id="content"
                                              placeholder="ì‹œì„¤ ì´ìš© ê²½í—˜ì„ ìì„¸íˆ ì‘ì„±í•´ì£¼ì„¸ìš”." 
                                              maxlength="2000" required
                                              data-rich-editor='{"height": "350px", "maxLength": 2000}'></textarea>
                                    <div class="form-text">
                                        <span id="contentLength">0</span>/2000ì (ìµœì†Œ 10ì ì´ìƒ ì‘ì„±í•´ì£¼ì„¸ìš”)
                                    </div>
                                </div>

                                <!-- ë²„íŠ¼ -->
                                <div class="d-flex justify-content-between">
                                    <a th:href="@{/review/detail/{id}(id=${reviewDTO.reviewId})}" class="btn btn-secondary">
                                        <i class="fas fa-arrow-left me-1"></i>ì·¨ì†Œ
                                    </a>
                                    <button type="submit" class="btn btn-primary" id="submitBtn">
                                        <i class="fas fa-save me-1"></i>ë¦¬ë·° ìˆ˜ì •
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>

    <!-- ìŠ¤íƒ€ì¼ -->
    <style>
        /* ì „ì²´ í‰ì  ìŠ¤íƒ€ì¼ */
        #overallRating {
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        #overallRating .star {
            color: #ddd;
            transition: color 0.2s;
            cursor: pointer;
        }
        
        #overallRating .star:hover,
        #overallRating .star.active {
            color: #ffc107 !important;
        }
        
        /* ì„¸ë¶€ í‰ì  ìŠ¤íƒ€ì¼ */
        .detailed-rating {
            font-size: 1.2rem;
            cursor: pointer;
        }
        
        .detailed-rating .star {
            color: #ddd;
            transition: color 0.2s;
            cursor: pointer;
        }
        
        .detailed-rating .star:hover,
        .detailed-rating .star.active {
            color: #ffc107 !important;
        }
        
        .rating-group {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 0.375rem;
            border: 1px solid #dee2e6;
        }
        
        .rating-text {
            font-weight: 500;
            color: #495057;
        }
    </style>

    <!-- JavaScript -->
    <script th:src="@{/js/review-write.js}"></script>
</body>
</html>
````

## File: CLAUDE.md
````markdown
# CLAUDE.md

ì´ ë¬¸ì„œëŠ” ì´ ì €ì¥ì†Œì—ì„œ Claude Code (claude.ai/code)ê°€ ì½”ë“œë¥¼ ë‹¤ë£° ë•Œ ì°¸ê³ í•  ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” í•œêµ­ íŒ€ì› 4ëª…ì´ ê°œë°œí•˜ëŠ” \*\*ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ ì›¹ì‚¬ì´íŠ¸ "ë¼ì´íŠ¸ì¼€ì–´(LightCare)"\*\*ì…ë‹ˆë‹¤. ì´ í”Œë«í¼ì€ ìš”ì–‘ ì‹œì„¤ê³¼ ìš”ì–‘ì—…ê³„ êµ¬ì§ìë¥¼ ì—°ê²°í•´ì£¼ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

* **ë°±ì—”ë“œ**: Spring Boot 2.7.18, MyBatis, MySQL
* **í”„ë¡ íŠ¸ì—”ë“œ**: Thymeleaf í…œí”Œë¦¿, Bootstrap 5, JavaScript
* **ë¹Œë“œ ë„êµ¬**: Gradle (Java 11 ì‚¬ìš©)
* **ë°ì´í„°ë² ì´ìŠ¤**: MySQL (ë¬¸ì ì¸ì½”ë”© utf8mb4)

---

## âš™ï¸ ê³µí†µ ê°œë°œ ëª…ë ¹ì–´

### ë¹Œë“œ ë° ì‹¤í–‰

```bash
# í”„ë¡œì íŠ¸ ë¹Œë“œ
./gradlew build

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
./gradlew bootRun

# ë¹Œë“œ ê²°ê³¼ë¬¼ ì •ë¦¬
./gradlew clean

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test

# ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
./gradlew check
```

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

```bash
# MySQL ì ‘ì† ë° DB ìƒì„±
mysql -u root -p
CREATE DATABASE carelink CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™”
# src/main/resources/schema.sql íŒŒì¼ì„ MySQLì—ì„œ ì‹¤í–‰
```

### ê°œë°œ ì„œë²„ ì •ë³´

* ì‹¤í–‰ ì£¼ì†Œ: `http://localhost:8080`
* DB ì—°ê²° ì£¼ì†Œ: `jdbc:mysql://localhost:3306/carelink`
* DevToolsë¥¼ í†µí•œ í•« ë¦¬ë¡œë“œ(Hot Reload) ì ìš©ë¨

---

## ğŸ§± ì•„í‚¤í…ì²˜ ê°œìš”

### íŒ€ êµ¬ì¡° (4ì¸ í˜‘ì—…)

ê¸°ëŠ¥ ì¤‘ì‹¬ì˜ ë¶„ì—… êµ¬ì¡°ë¡œ ìš´ì˜ë©ë‹ˆë‹¤:

* **íŒ€ì› A**: íšŒì› ê´€ë¦¬ (ë¡œê·¸ì¸, íšŒì›ê°€ì…, ë‚´ ì •ë³´)
* **íŒ€ì› B**: ì‹œì„¤ ê²€ìƒ‰ ë° ì§€ë„ ì—°ë™ (ì¹´ì¹´ì˜¤ë§µ)
* **íŒ€ì› C**: êµ¬ì¸êµ¬ì§ ê²Œì‹œíŒ (ê³µê³  ì‘ì„±, ì§€ì›)
* **íŒ€ì› D**: ë¦¬ë·° ì‹œìŠ¤í…œ ë° ì •ë³´ ê²Œì‹œíŒ

### íŒ¨í‚¤ì§€ êµ¬ì¡°

```
com.example.carelink/
â”œâ”€â”€ controller/          # ì»¨íŠ¸ë¡¤ëŸ¬ ê³„ì¸µ
â”œâ”€â”€ service/            # ì„œë¹„ìŠ¤ ê³„ì¸µ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
â”œâ”€â”€ dao/               # DAO ê³„ì¸µ (MyBatis ë§¤í¼)
â”œâ”€â”€ dto/               # DTO ê°ì²´
â””â”€â”€ common/            # ê³µí†µ ìœ í‹¸ ë° ìƒìˆ˜
```

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

ê´€ê³„í˜• í…Œì´ë¸” ê¸°ë°˜ìœ¼ë¡œ ì™¸ë˜í‚¤(FK)ë¥¼ ì ì ˆíˆ ì‚¬ìš©:

* **member**: ì‚¬ìš©ì ê³„ì • ë° ì¸ì¦ ì •ë³´
* **facility**: ìš”ì–‘ì‹œì„¤ ì •ë³´ (ìœ„ì¹˜ ì¢Œí‘œ í¬í•¨)
* **job\_posting**: êµ¬ì¸ê³µê³  ì •ë³´
* **review**: ì‹œì„¤ ë¦¬ë·° ë° í‰ì 
* **board**: ì»¤ë®¤ë‹ˆí‹°/ì •ë³´ ê²Œì‹œíŒ

### MyBatis êµ¬ì„±

* ì„¤ì • íŒŒì¼: `src/main/resources/mybatis-config.xml`
* ë§¤í¼ XML: `src/main/resources/mapper/*.xml`
* camelCase â†’ underscore ìë™ ë§¤í•‘ ì„¤ì •
* DTOìš© typeAlias ì‚¬ìš©

---

## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

* **Thymeleaf**: Spring Boot ì—°ë™ ì„œë²„ì‚¬ì´ë“œ í…œí”Œë¦¿
* **ë ˆì´ì•„ì›ƒ ì‹œìŠ¤í…œ**: `templates/layout/` í´ë”ì— header/footer ë¶„ë¦¬
* **ì •ì  ë¦¬ì†ŒìŠ¤**: `src/main/resources/static/` í´ë”ì— CSS/JS ì €ì¥
* **Bootstrap 5**: ë°˜ì‘í˜• UI í”„ë ˆì„ì›Œí¬ ì ìš©

---

## ğŸ§¾ ì£¼ìš” ì„¤ì • íŒŒì¼

### application.yml

* ì„œë²„ í¬íŠ¸: 8080
* ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´
* ê°œë°œ ì‹œ Thymeleaf ìºì‹œ ë¹„í™œì„±í™”
* íŒŒì¼ ì—…ë¡œë“œ ìµœëŒ€ ìš©ëŸ‰ 10MB
* MyBatis ë§¤í¼ ìœ„ì¹˜ ì§€ì •

### ê¸°íƒ€ ì„¤ì • ì‚¬í•­

* UTF-8 í•œê¸€ ì§€ì› í™œì„±í™”
* MyBatis ë° Spring Web ë¡œê·¸ ì¶œë ¥ ì„¤ì •
* DB íƒ€ì„ì¡´: Asia/Seoul

---

## ğŸ”„ ê°œë°œ íŒ¨í„´

### ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´

Spring MVC êµ¬ì¡°ë¥¼ ë”°ë¦„:

* `@Controller` ì‚¬ìš©
* Modelë¡œ View ë°ì´í„° ì „ë‹¬
* HTTP Method (@GetMapping, @PostMapping ë“±) ëª…í™•íˆ êµ¬ë¶„
* `@Slf4j`ë¡œ ë¡œê¹…

### ì„œë¹„ìŠ¤ ê³„ì¸µ

ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë¡œì§ ë¶„ë¦¬:

* íŠ¸ëœì­ì…˜ ì²˜ë¦¬
* ì…ë ¥ ê²€ì¦
* íš¡ë‹¨ ê´€ì‹¬ì‚¬ ê´€ë¦¬

### MyBatis ë§¤í¼

XML ê¸°ë°˜ SQL ì •ì˜:

* `#{}` ì‚¬ìš©í•œ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
* DTO ë§¤í•‘ ì„¤ì •
* JOIN í™œìš©í•œ ë³µí•© ì¡°íšŒ ì²˜ë¦¬

---

## âœ… í…ŒìŠ¤íŠ¸

### í…ŒìŠ¤íŠ¸ êµ¬ì¡°

* ë‹¨ìœ„ í…ŒìŠ¤íŠ¸: JUnit 5
* í†µí•© í…ŒìŠ¤íŠ¸: Spring Boot Test
* í…ŒìŠ¤íŠ¸ ì„¤ì •ì€ ìš´ì˜ê³¼ ë³„ë„ êµ¬ì„±

### í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test

# íŠ¹ì • í´ë˜ìŠ¤ë§Œ ì‹¤í–‰
./gradlew test --tests "ClassName"
```

---

## ğŸ¤ íŒ€ í˜‘ì—… ê·œì¹™

### Git ì›Œí¬í”Œë¡œìš°

* ê¸°ëŠ¥ ë¸Œëœì¹˜ ëª…: `feature/member-ê¸°ëŠ¥ëª…`
* ì»¤ë°‹ ë©”ì‹œì§€: `[feat] ê¸°ëŠ¥ ì„¤ëª…`
* PRì„ í†µí•œ ì½”ë“œ ë¦¬ë·° ì§„í–‰

### ì½”ë“œ ì»¨ë²¤ì…˜

* í´ë˜ìŠ¤ëª…: PascalCase
* ë©”ì„œë“œëª…: camelCase
* ìƒìˆ˜ëª…: UPPER\_SNAKE\_CASE
* íŒ¨í‚¤ì§€ëª…: ëª¨ë‘ ì†Œë¬¸ì

---

## âš ï¸ íŠ¹ì´ ì‚¬í•­

### í•œê¸€ ì§€ì›

* ëª¨ë“  í…ìŠ¤íŠ¸ ì½˜í…ì¸ ëŠ” í•œê¸€ë¡œ ì‘ì„±
* UTF-8 ì¸ì½”ë”© ìœ ì§€
* ì£¼ì„/ë¬¸ì„œë„ í•œê¸€ ê¸°ë°˜

### ì§€ë„ ì—°ë™

* ì¹´ì¹´ì˜¤ë§µ API ì—°ë™ ì˜ˆì •
* ìœ„ë„/ê²½ë„ ê¸°ë°˜ ì‹œì„¤ ê²€ìƒ‰ ê¸°ëŠ¥ í¬í•¨

### ì‚¬ìš©ì ì—­í• 

* `USER`: ì¼ë°˜ êµ¬ì§ì
* `FACILITY`: ìš”ì–‘ì‹œì„¤ ê´€ë¦¬ì
* `ADMIN`: ì‹œìŠ¤í…œ ê´€ë¦¬ì

---

## ğŸŒ í™˜ê²½ ë³€ìˆ˜

í™˜ê²½ ì„¤ì • ì‹œ ì•„ë˜ í•­ëª© í•„ìš”:

* `spring.datasource.password`: MySQL ë¹„ë°€ë²ˆí˜¸
* DB ì£¼ì†Œê°€ ë‹¤ë¥¼ ê²½ìš° `spring.datasource.url` ìˆ˜ì •
* ì¶”í›„ ì§€ë„ API í‚¤ ë“±ë¡ í•„ìš” (ì˜ˆì •)

### ğŸŸ¢ íŒ€ì› D (ë¦¬ë·°/ê²Œì‹œíŒ) - ì§„í–‰ë¥ : 100%

#### âœ… **ì™„ë£Œëœ ì‘ì—…**
**ë°±ì—”ë“œ ì™„ì „ êµ¬í˜„**:
- âœ… `ReviewService.java` (238ì¤„) - **ì™„ì „ êµ¬í˜„**
  - ë¦¬ë·° CRUD ë¡œì§
  - íŠ¸ëœì­ì…˜ ì²˜ë¦¬
  - ë¡œê¹… ì¶”ê°€
  - ìœ íš¨ì„± ê²€ì¦
  - í‰ì  ì‹œìŠ¤í…œ
  - ì¶”ì²œ/ë¹„ì¶”ì²œ ê¸°ëŠ¥

- âœ… `BoardService.java` (253ì¤„) - **ì™„ì „ êµ¬í˜„**
  - ê²Œì‹œê¸€ CRUD ë¡œì§
  - í˜ì´ì§• ì²˜ë¦¬
  - ê²€ìƒ‰ ë° ì¹´í…Œê³ ë¦¬ í•„í„°ë§
  - ì¸ê¸° ê²Œì‹œê¸€ ê¸°ëŠ¥
  - ì¡°íšŒìˆ˜ ì¦ê°€ ë¡œì§

- âœ… `ReviewMapper.java` & `reviewMapper.xml` - **ì™„ì „ êµ¬í˜„**
  - ëª¨ë“  í•„ìš” ë©”ì„œë“œ ì •ì˜
  - XML ì¿¼ë¦¬ ë§¤í•‘ ì™„ë£Œ

- âœ… `BoardMapper.java` & `boardMapper.xml` - **ì™„ì „ êµ¬í˜„**
  - ëª¨ë“  í•„ìš” ë©”ì„œë“œ ì •ì˜
  - XML ì¿¼ë¦¬ ë§¤í•‘ ì™„ë£Œ

**í”„ë¡ íŠ¸ì—”ë“œ ì™„ì„±**:
- âœ… `templates/review/list.html` (108ì¤„) - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/review/write.html` (122ì¤„) - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/list.html` - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/write.html` - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/detail.html` - **ì™„ì „ êµ¬í˜„**

#### ğŸ“Š **ì‹¤ì œ Story Point ë‹¬ì„±ë¥ **
- **ì™„ë£Œ**: LC-010 (ë¦¬ë·° ì‘ì„±) - 13/13 SP âœ…
- **ì™„ë£Œ**: LC-011 (ë¦¬ë·° ëª©ë¡ ê´€ë¦¬) - 13/13 SP âœ…
- **ì™„ë£Œ**: LC-012 (ì •ë³´ ê²Œì‹œíŒ) - 13/13 SP âœ…

**ì´ ë‹¬ì„±**: 39/39 SP (100%)

#### ğŸš€ **ë‹¤ìŒ ë‹¨ê³„**
1. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±**
   - ReviewService í…ŒìŠ¤íŠ¸
   - BoardService í…ŒìŠ¤íŠ¸
   - í†µí•© í…ŒìŠ¤íŠ¸

2. **ì„±ëŠ¥ ìµœì í™”**
   - ì¿¼ë¦¬ ìµœì í™”
   - ìºì‹± ì ìš©
   - N+1 ë¬¸ì œ í•´ê²°

3. **ì¶”ê°€ ê¸°ëŠ¥ ê°œë°œ**
   - ëŒ“ê¸€ ì‹œìŠ¤í…œ ê³ ë„í™”
   - íŒŒì¼ ì²¨ë¶€ ê¸°ëŠ¥
   - ì—ë””í„° ê¸°ëŠ¥ ê°•í™”
````

## File: docker-compose.yml
````yaml
version: '3.8'

services:
  # Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜
  app:
    build: .
    container_name: carelink-app
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - DB_URL=${DB_URL:-jdbc:mysql://db:3306/carelink?useSSL=false&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=UTF-8}
      - DB_USERNAME=${DB_USERNAME:-root}
      - DB_PASSWORD=${DB_PASSWORD:-mysql}
      - KAKAO_APP_KEY=${KAKAO_APP_KEY:-0948e3e4faa457fb6083f68e1ce10458}
      - KAKAO_REST_API_KEY=${KAKAO_REST_API_KEY:-0948e3e4faa457fb6083f68e1ce10458}
      - UPLOAD_BASE_PATH=${UPLOAD_BASE_PATH:-/carelink-uploads/}
    volumes:
      - carelink-uploads:/carelink-uploads
    depends_on:
      - db
    restart: unless-stopped
    networks:
      - carelink-network

  # MySQL ë°ì´í„°ë² ì´ìŠ¤
  db:
    image: mysql:8.0
    container_name: carelink-db
    ports:
      - "3306:3306"
    environment:
      - MYSQL_DATABASE=${MYSQL_DATABASE:-carelink}
      - MYSQL_ROOT_PASSWORD=${DB_PASSWORD:-mysql}
      - TZ=Asia/Seoul
    volumes:
      - carelink-db-data:/var/lib/mysql
      - ./src/main/resources/schema.sql:/docker-entrypoint-initdb.d/1.schema.sql
    command: 
      - --character-set-server=utf8mb4
      - --collation-server=utf8mb4_unicode_ci
      - --skip-character-set-client-handshake
      - --default-authentication-plugin=mysql_native_password
    restart: unless-stopped
    networks:
      - carelink-network

volumes:
  carelink-uploads:
    name: carelink-uploads
  carelink-db-data:
    name: carelink-db-data

networks:
  carelink-network:
    name: carelink-network
````

## File: README.md
````markdown
# LightCare (ë¼ì´íŠ¸ì¼€ì–´) - ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ í”Œë«í¼

![Spring Boot](https://img.shields.io/badge/Spring%20Boot-2.7.18-brightgreen.svg)
![Java](https://img.shields.io/badge/Java-11-orange.svg)
![MySQL](https://img.shields.io/badge/MySQL-8.0-blue.svg)
![MyBatis](https://img.shields.io/badge/MyBatis-2.3.1-red.svg)
![Build Status](https://img.shields.io/badge/Build-Passing-success.svg)

## ğŸ“– í”„ë¡œì íŠ¸ ê°œìš”

LightCareëŠ” í•œêµ­ì˜ ìš”ì–‘ì› ë° ë…¸ì¸ìš”ì–‘ì‹œì„¤ê³¼ êµ¬ì§ìë¥¼ ì—°ê²°í•˜ëŠ” ì „ë¬¸ êµ¬ì¸êµ¬ì§ í”Œë«í¼ì…ë‹ˆë‹¤. ê³ ë ¹í™” ì‚¬íšŒì— í•„ìš”í•œ ìš”ì–‘ ì„œë¹„ìŠ¤ ì¸ë ¥ì„ íš¨ìœ¨ì ìœ¼ë¡œ ë§¤ì¹­í•˜ê³ , ì‹œì„¤ê³¼ ê·¼ë¡œì ëª¨ë‘ì—ê²Œ ìµœì í™”ëœ í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤.

### ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

- **ğŸ‘¥ íšŒì› ê´€ë¦¬**: êµ¬ì§ì ë° ì‹œì„¤ ê´€ë¦¬ì íšŒì›ê°€ì…/ë¡œê·¸ì¸
- **ğŸ¥ ì‹œì„¤ ê²€ìƒ‰**: ì¹´ì¹´ì˜¤ë§µ ì—°ë™ ì‹œì„¤ ìœ„ì¹˜ ê²€ìƒ‰ ë° ìƒì„¸ ì •ë³´
- **ğŸ’¼ êµ¬ì¸êµ¬ì§**: ì±„ìš©ê³µê³  ë“±ë¡/ê²€ìƒ‰, ì§€ì› ì‹œìŠ¤í…œ
- **â­ ë¦¬ë·° ì‹œìŠ¤í…œ**: ì‹œì„¤ í‰ê°€ ë° í›„ê¸° ê³µìœ 
- **ğŸ“‹ ì •ë³´ ê²Œì‹œíŒ**: ì—…ê³„ ì •ë³´ ë° ê³µì§€ì‚¬í•­

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Framework**: Spring Boot 2.7.18
- **Language**: Java 11
- **Database**: MySQL 8.0
- **ORM**: MyBatis 2.3.1
- **Build Tool**: Gradle
- **Template Engine**: Thymeleaf

### Frontend
- **Template**: Thymeleaf
- **Styling**: Bootstrap 5, CSS3
- **JavaScript**: Vanilla JS
- **Maps**: Kakao Maps API

### Development Tools
- **IDE**: IntelliJ IDEA
- **Version Control**: Git/GitHub
- **Database Tool**: MySQL Workbench

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Java 11 ì´ìƒ
- MySQL 8.0 ì´ìƒ
- Git

### ì„¤ì¹˜ ë° ì‹¤í–‰

1. **ë ˆí¬ì§€í† ë¦¬ í´ë¡ **
   ```bash
   git clone https://github.com/dooseob/lightcare.git
   cd lightcare
   ```

2. **ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •**
   ```sql
   CREATE DATABASE carelink CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```

3. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •** (`src/main/resources/application.yml`)
   ```yaml
   spring:
     datasource:
       url: jdbc:mysql://localhost:3306/carelink
       username: root
       password: mysql
   ```

4. **ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™”**
   ```bash
   # MySQLì—ì„œ schema.sql ì‹¤í–‰
   mysql -u root -p carelink < src/main/resources/schema.sql
   ```

5. **ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰**
   ```bash
   ./gradlew bootRun
   ```

6. **ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†**
   ```
   http://localhost:8080
   ```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/com/example/carelink/
â”‚   â”‚   â”œâ”€â”€ controller/          # ì›¹ ìš”ì²­ ì²˜ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ HomeController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ FacilityController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ JobController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewController.java
â”‚   â”‚   â”‚   â””â”€â”€ BoardController.java
â”‚   â”‚   â”œâ”€â”€ service/             # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ FacilityService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ JobService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewService.java
â”‚   â”‚   â”‚   â””â”€â”€ BoardService.java
â”‚   â”‚   â”œâ”€â”€ dao/                 # ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberMapper.java
â”‚   â”‚   â”‚   â”œâ”€â”€ FacilityMapper.java
â”‚   â”‚   â”‚   â”œâ”€â”€ JobMapper.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewMapper.java
â”‚   â”‚   â”‚   â””â”€â”€ BoardMapper.java
â”‚   â”‚   â”œâ”€â”€ dto/                 # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberDTO.java
â”‚   â”‚   â”‚   â”œâ”€â”€ FacilityDTO.java
â”‚   â”‚   â”‚   â”œâ”€â”€ JobDTO.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewDTO.java
â”‚   â”‚   â”‚   â””â”€â”€ BoardDTO.java
â”‚   â”‚   â””â”€â”€ common/              # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚       â”œâ”€â”€ BaseDTO.java
â”‚   â”‚       â”œâ”€â”€ PageInfo.java
â”‚   â”‚       â””â”€â”€ Constants.java
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ static/              # ì •ì  ë¦¬ì†ŒìŠ¤
â”‚       â”‚   â”œâ”€â”€ css/
â”‚       â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ templates/           # Thymeleaf í…œí”Œë¦¿
â”‚       â”‚   â”œâ”€â”€ layout/
â”‚       â”‚   â”œâ”€â”€ member/
â”‚       â”‚   â”œâ”€â”€ facility/
â”‚       â”‚   â”œâ”€â”€ job/
â”‚       â”‚   â”œâ”€â”€ review/
â”‚       â”‚   â””â”€â”€ board/
â”‚       â”œâ”€â”€ mapper/              # MyBatis SQL ë§¤í¼
â”‚       â”‚   â”œâ”€â”€ memberMapper.xml
â”‚       â”‚   â”œâ”€â”€ facilityMapper.xml
â”‚       â”‚   â”œâ”€â”€ jobMapper.xml
â”‚       â”‚   â”œâ”€â”€ reviewMapper.xml
â”‚       â”‚   â””â”€â”€ boardMapper.xml
â”‚       â”œâ”€â”€ application.yml      # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
â”‚       â”œâ”€â”€ mybatis-config.xml   # MyBatis ì„¤ì •
â”‚       â””â”€â”€ schema.sql          # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
```

## ğŸ‘¥ íŒ€ êµ¬ì„± ë° ì—­í• 

| íŒ€ì› | ë‹´ë‹¹ ê¸°ëŠ¥ | ì£¼ìš” êµ¬í˜„ ì‚¬í•­ |
|------|----------|---------------|
| **íŒ€ì› A** | íšŒì› ê´€ë¦¬ | ë¡œê·¸ì¸, íšŒì›ê°€ì…, í”„ë¡œí•„ ê´€ë¦¬, ì„¸ì…˜ ê´€ë¦¬ |
| **íŒ€ì› B** | ì‹œì„¤ ê²€ìƒ‰ | ì¹´ì¹´ì˜¤ë§µ ì—°ë™, ì‹œì„¤ ì •ë³´ ê´€ë¦¬, ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ |
| **íŒ€ì› C** | êµ¬ì¸êµ¬ì§ | ì±„ìš©ê³µê³  ê²Œì‹œíŒ, ì§€ì› ì‹œìŠ¤í…œ, ì±„ìš© ê´€ë¦¬ |
| **íŒ€ì› D** | ë¦¬ë·° & ê²Œì‹œíŒ | ì‹œì„¤ ë¦¬ë·°, í‰ì  ì‹œìŠ¤í…œ, ì •ë³´ ê²Œì‹œíŒ |

## ğŸ—„ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ì£¼ìš” í…Œì´ë¸”

- **member**: íšŒì› ì •ë³´ (êµ¬ì§ì, ì‹œì„¤ ê´€ë¦¬ì)
- **facility**: ìš”ì–‘ì‹œì„¤ ì •ë³´ ë° ìœ„ì¹˜ ë°ì´í„°
- **job_posting**: ì±„ìš©ê³µê³  ì •ë³´
- **review**: ì‹œì„¤ ë¦¬ë·° ë° í‰ì 
- **board**: ì •ë³´ ê²Œì‹œíŒ

### ERD
```sql
-- ì£¼ìš” í…Œì´ë¸” ê´€ê³„
-- member (1) â†â†’ (N) job_posting
-- member (1) â†â†’ (N) review
-- facility (1) â†â†’ (N) job_posting
-- facility (1) â†â†’ (N) review
```

## ğŸ”§ ê°œë°œ ê°€ì´ë“œ

### ì½”ë”© ì»¨ë²¤ì…˜

- **í´ë˜ìŠ¤ëª…**: PascalCase (`MemberController`)
- **ë©”ì„œë“œëª…**: camelCase (`getMemberInfo`)
- **ìƒìˆ˜**: UPPER_SNAKE_CASE (`DEFAULT_PAGE_SIZE`)
- **íŒ¨í‚¤ì§€ëª…**: ì†Œë¬¸ì (`com.example.carelink`)

### Git ë¸Œëœì¹˜ ì „ëµ

```
main                 # ë©”ì¸ ë¸Œëœì¹˜
â”œâ”€â”€ feature/member   # íŒ€ì› A - íšŒì› ê´€ë¦¬
â”œâ”€â”€ feature/facility # íŒ€ì› B - ì‹œì„¤ ê²€ìƒ‰
â”œâ”€â”€ feature/job      # íŒ€ì› C - êµ¬ì¸êµ¬ì§
â””â”€â”€ feature/review   # íŒ€ì› D - ë¦¬ë·° ì‹œìŠ¤í…œ
```

### ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹

```
[feat] ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
[fix] ë²„ê·¸ ìˆ˜ì •
[docs] ë¬¸ì„œ ìˆ˜ì •
[style] ì½”ë“œ ìŠ¤íƒ€ì¼ ìˆ˜ì •
[refactor] ì½”ë“œ ë¦¬íŒ©í† ë§
[test] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test

# ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸
./gradlew build

# ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
./gradlew check
```

## ğŸ“ API ë¬¸ì„œ

### ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸

| Method | URL | ì„¤ëª… |
|--------|-----|------|
| GET | `/` | ë©”ì¸ í˜ì´ì§€ |
| GET/POST | `/member/login` | ë¡œê·¸ì¸ |
| GET/POST | `/member/join` | íšŒì›ê°€ì… |
| GET | `/facility/search` | ì‹œì„¤ ê²€ìƒ‰ |
| GET | `/job/list` | ì±„ìš©ê³µê³  ëª©ë¡ |
| GET | `/review/list` | ë¦¬ë·° ëª©ë¡ |
| GET | `/board/list` | ê²Œì‹œíŒ ëª©ë¡ |

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ

1. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜**
   ```
   í•´ê²°: application.ymlì˜ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • í™•ì¸
   ```

2. **MyBatis ë§¤í¼ ì˜¤ë¥˜**
   ```
   í•´ê²°: mapper XMLì˜ namespaceì™€ ì¸í„°í˜ì´ìŠ¤ ê²½ë¡œ ì¼ì¹˜ í™•ì¸
   ```

3. **Thymeleaf í…œí”Œë¦¿ ì˜¤ë¥˜**
   ```
   í•´ê²°: templates í´ë” ê²½ë¡œì™€ ì»¨íŠ¸ë¡¤ëŸ¬ ë°˜í™˜ê°’ ì¼ì¹˜ í™•ì¸
   ```

## ğŸ”„ ìµœê·¼ ì—…ë°ì´íŠ¸

### v1.0.0 (2025-06-22)
- âœ… í”„ë¡œì íŠ¸ ê¸°ë³¸ êµ¬ì¡° ì™„ì„±
- âœ… ì „ì²´ íŒŒì¼ ì—ëŸ¬ ë””ë²„ê¹… ì™„ë£Œ
- âœ… í˜ì´ì§• ë¡œì§ ì˜¤ë¥˜ ìˆ˜ì •
- âœ… Gradle ë¹Œë“œ ì„¤ì • ê°œì„ 
- âœ… ì½”ë“œ í’ˆì§ˆ ê°œì„  (NPE ë°©ì§€, ì¤‘ë³µ ì½”ë“œ ì œê±°)

## ğŸš€ í–¥í›„ ê°œë°œ ê³„íš

- [ ] **v1.1**: ë³´ì•ˆ ê°•í™” (ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”, CSRF ë³´í˜¸)
- [ ] **v1.2**: ì¹´ì¹´ì˜¤ë§µ API ì—°ë™ ì™„ì„±
- [ ] **v1.3**: ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ
- [ ] **v1.4**: ëª¨ë°”ì¼ ë°˜ì‘í˜• UI ê°œì„ 
- [ ] **v2.0**: AI ê¸°ë°˜ ë§¤ì¹­ ì‹œìŠ¤í…œ

## ğŸ¤ ê¸°ì—¬ ë°©ë²•

1. Fork í”„ë¡œì íŠ¸
2. Feature ë¸Œëœì¹˜ ìƒì„± (`git checkout -b feature/ìƒˆê¸°ëŠ¥`)
3. ë³€ê²½ì‚¬í•­ ì»¤ë°‹ (`git commit -m '[feat] ìƒˆê¸°ëŠ¥ ì¶”ê°€'`)
4. ë¸Œëœì¹˜ì— Push (`git push origin feature/ìƒˆê¸°ëŠ¥`)
5. Pull Request ìƒì„±

## ğŸ“ ì§€ì›

- **íŒ€ ì´ë©”ì¼**: lightcare-team@gmail.com
- **ì´ìŠˆ íŠ¸ë˜í‚¹**: [GitHub Issues](https://github.com/dooseob/lightcare/issues)
- **ìœ„í‚¤**: [í”„ë¡œì íŠ¸ ìœ„í‚¤](https://github.com/dooseob/lightcare/wiki)

## ğŸ“„ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„¼ìŠ¤ í•˜ì— ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

---

**LightCare íŒ€** - ìš”ì–‘ ì„œë¹„ìŠ¤ì˜ ë¯¸ë˜ë¥¼ ë°íˆëŠ” í”Œë«í¼ ğŸ’¡

### ğŸŸ¢ íŒ€ì› D (ë¦¬ë·°/ê²Œì‹œíŒ) - ì§„í–‰ë¥ : 100%

#### âœ… **ì™„ë£Œëœ ì‘ì—…**
**ë°±ì—”ë“œ ì™„ì „ êµ¬í˜„**:
- âœ… `ReviewService.java` (238ì¤„) - **ì™„ì „ êµ¬í˜„**
  - ë¦¬ë·° CRUD ë¡œì§
  - íŠ¸ëœì­ì…˜ ì²˜ë¦¬
  - ë¡œê¹… ì¶”ê°€
  - ìœ íš¨ì„± ê²€ì¦
  - í‰ì  ì‹œìŠ¤í…œ
  - ì¶”ì²œ/ë¹„ì¶”ì²œ ê¸°ëŠ¥

- âœ… `BoardService.java` (253ì¤„) - **ì™„ì „ êµ¬í˜„**
  - ê²Œì‹œê¸€ CRUD ë¡œì§
  - í˜ì´ì§• ì²˜ë¦¬
  - ê²€ìƒ‰ ë° ì¹´í…Œê³ ë¦¬ í•„í„°ë§
  - ì¸ê¸° ê²Œì‹œê¸€ ê¸°ëŠ¥
  - ì¡°íšŒìˆ˜ ì¦ê°€ ë¡œì§

- âœ… `ReviewMapper.java` & `reviewMapper.xml` - **ì™„ì „ êµ¬í˜„**
  - ëª¨ë“  í•„ìš” ë©”ì„œë“œ ì •ì˜
  - XML ì¿¼ë¦¬ ë§¤í•‘ ì™„ë£Œ

- âœ… `BoardMapper.java` & `boardMapper.xml` - **ì™„ì „ êµ¬í˜„**
  - ëª¨ë“  í•„ìš” ë©”ì„œë“œ ì •ì˜
  - XML ì¿¼ë¦¬ ë§¤í•‘ ì™„ë£Œ

**í”„ë¡ íŠ¸ì—”ë“œ ì™„ì„±**:
- âœ… `templates/review/list.html` (108ì¤„) - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/review/write.html` (122ì¤„) - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/list.html` - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/write.html` - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/detail.html` - **ì™„ì „ êµ¬í˜„**

#### ğŸ“Š **ì‹¤ì œ Story Point ë‹¬ì„±ë¥ **
- **ì™„ë£Œ**: LC-010 (ë¦¬ë·° ì‘ì„±) - 13/13 SP âœ…
- **ì™„ë£Œ**: LC-011 (ë¦¬ë·° ëª©ë¡ ê´€ë¦¬) - 13/13 SP âœ…
- **ì™„ë£Œ**: LC-012 (ì •ë³´ ê²Œì‹œíŒ) - 13/13 SP âœ…

**ì´ ë‹¬ì„±**: 39/39 SP (100%)

#### ğŸš€ **ë‹¤ìŒ ë‹¨ê³„**
1. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±**
   - ReviewService í…ŒìŠ¤íŠ¸
   - BoardService í…ŒìŠ¤íŠ¸
   - í†µí•© í…ŒìŠ¤íŠ¸

2. **ì„±ëŠ¥ ìµœì í™”**
   - ì¿¼ë¦¬ ìµœì í™”
   - ìºì‹± ì ìš©
   - N+1 ë¬¸ì œ í•´ê²°

3. **ì¶”ê°€ ê¸°ëŠ¥ ê°œë°œ**
   - ëŒ“ê¸€ ì‹œìŠ¤í…œ ê³ ë„í™”
   - íŒŒì¼ ì²¨ë¶€ ê¸°ëŠ¥
   - ì—ë””í„° ê¸°ëŠ¥ ê°•í™”
````

## File: reset_all_data.sql
````sql
-- ================================================
-- ì „ì²´ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” (ì™„ì „ ì´ˆê¸°í™”ìš©)
-- ì£¼ì˜: ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤!
-- ì‹¤í–‰ ë°©ë²•: mysql -u root -p mysql < reset_all_data.sql
-- ================================================

USE carelink;

-- ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ ë¹„í™œì„±í™”
SET FOREIGN_KEY_CHECKS = 0;

-- ëª¨ë“  í…Œì´ë¸” ë°ì´í„° ì‚­ì œ (ìˆœì„œ ì¤‘ìš”)
DELETE FROM facility_images;
DELETE FROM review;
DELETE FROM board;
DELETE FROM job_posting;
DELETE FROM facility;
DELETE FROM member WHERE user_id != 'admin'; -- admin ê³„ì •ì€ ìœ ì§€

-- AUTO_INCREMENT ë¦¬ì…‹
ALTER TABLE facility_images AUTO_INCREMENT = 1;
ALTER TABLE review AUTO_INCREMENT = 1;
ALTER TABLE board AUTO_INCREMENT = 1;
ALTER TABLE job_posting AUTO_INCREMENT = 1;
ALTER TABLE facility AUTO_INCREMENT = 1;
-- ALTER TABLE member AUTO_INCREMENT = 1; -- admin ê³„ì • ìœ ì§€ë¥¼ ìœ„í•´ ì£¼ì„

-- ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ ì¬í™œì„±í™”
SET FOREIGN_KEY_CHECKS = 1;

-- í™•ì¸ìš© ì¿¼ë¦¬
SELECT 'Database reset completed' AS status;
SELECT TABLE_NAME, TABLE_ROWS 
FROM information_schema.TABLES 
WHERE TABLE_SCHEMA = 'carelink' 
  AND TABLE_TYPE = 'BASE TABLE';

COMMIT;
````

## File: reset_facility_images.sql
````sql
-- ================================================
-- ì‹œì„¤ ì´ë¯¸ì§€ ë°ì´í„°ë§Œ ì´ˆê¸°í™” (ë¬¸ì œ í•´ê²°ìš©)
-- ì‹¤í–‰ ë°©ë²•: mysql -u root -p mysql < reset_facility_images.sql
-- ================================================

USE carelink;

-- 1. ì‹œì„¤ ì´ë¯¸ì§€ í…Œì´ë¸” ë°ì´í„° ì‚­ì œ
DELETE FROM facility_images;

-- 2. AUTO_INCREMENT ë¦¬ì…‹
ALTER TABLE facility_images AUTO_INCREMENT = 1;

-- 3. ì‹œì„¤ í…Œì´ë¸”ì˜ ì´ë¯¸ì§€ ê´€ë ¨ í•„ë“œ ì´ˆê¸°í™”
UPDATE facility 
SET facility_image = NULL, 
    facility_image_alt_text = NULL, 
    image_count = 0;

-- 4. í™•ì¸ìš© ì¿¼ë¦¬
SELECT 'facility_images í…Œì´ë¸” ì´ˆê¸°í™” ì™„ë£Œ' AS status;
SELECT COUNT(*) AS remaining_images FROM facility_images;
SELECT facility_id, facility_name, facility_image, image_count FROM facility;

COMMIT;
````

## File: src/main/java/com/example/carelink/config/SecurityConfig.java
````java
package com.example.carelink.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.web.SecurityFilterChain;
import org.springframework.security.web.firewall.HttpFirewall;
import org.springframework.security.web.firewall.StrictHttpFirewall;
import org.springframework.security.web.util.matcher.AntPathRequestMatcher;

@Configuration
@EnableWebSecurity
public class SecurityConfig {

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }

    @Bean
    public HttpFirewall httpFirewall() {
        StrictHttpFirewall firewall = new StrictHttpFirewall();
        firewall.setAllowUrlEncodedDoubleSlash(true);
        return firewall;
    }

    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        http
                .csrf(csrf -> csrf.disable()) // CSRF ë³´í˜¸ ë¹„í™œì„±í™” (ê°œë°œ ì‹œ í¸ì˜, ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” í™œì„±í™” ê¶Œì¥)
                .authorizeHttpRequests(authorize -> authorize
                        // ì •ì  ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ í—ˆìš© ì„¤ì •
                        .requestMatchers(
                                new AntPathRequestMatcher("/css/**"),
                                new AntPathRequestMatcher("/js/**"),
                                new AntPathRequestMatcher("/images/**"),
                                new AntPathRequestMatcher("/favicon.ico")
                        ).permitAll()
                        // ì¸ì¦ ì—†ì´ ì ‘ê·¼ì„ í—ˆìš©í•  URL ì„¤ì •
                        .requestMatchers(
                                new AntPathRequestMatcher("/"),                    // ë©”ì¸ í˜ì´ì§€
                                new AntPathRequestMatcher("/member/login"),       // ë¡œê·¸ì¸ í¼ í˜ì´ì§€ ë° ì²˜ë¦¬
                                new AntPathRequestMatcher("/member/join"),        // íšŒì›ê°€ì… í¼ í˜ì´ì§€ ë° ì²˜ë¦¬
                                new AntPathRequestMatcher("/member/checkUserId"), // ì•„ì´ë”” ì¤‘ë³µ í™•ì¸ Ajax
                                new AntPathRequestMatcher("/facility/**"),        // ì‹œì„¤ ê²€ìƒ‰ í˜ì´ì§€ (ë¹„íšŒì›ë„ ì ‘ê·¼ ê°€ëŠ¥)
                                new AntPathRequestMatcher("/board/**"),           // ê²Œì‹œíŒ í˜ì´ì§€ (ë¹„íšŒì›ë„ ì ‘ê·¼ ê°€ëŠ¥)
                                new AntPathRequestMatcher("/review/**"),          // ë¦¬ë·° í˜ì´ì§€ (ë¹„íšŒì›ë„ ì ‘ê·¼ ê°€ëŠ¥)
                                new AntPathRequestMatcher("/job/**"),             // êµ¬ì¸êµ¬ì§ í˜ì´ì§€ (ë¹„íšŒì›ë„ ì ‘ê·¼ ê°€ëŠ¥)
                                new AntPathRequestMatcher("/api/**"),             // API ê²½ë¡œ (í•„ìš”ì‹œ)
                                new AntPathRequestMatcher("/error")               // ì—ëŸ¬ í˜ì´ì§€ (í•„ìš”ì‹œ)
                        ).permitAll()
                        .anyRequest().permitAll() // ê°œë°œ í¸ì˜ìƒ ëª¨ë“  ìš”ì²­ í—ˆìš© (ìš´ì˜ ì‹œì—ëŠ” authenticated()ë¡œ ë³€ê²½)
                )
                .formLogin(formLogin -> formLogin.disable()) // ê¸°ë³¸ í¼ ë¡œê·¸ì¸ ë¹„í™œì„±í™” (ì»¤ìŠ¤í…€ ë¡œê·¸ì¸ ì‚¬ìš©)
                .logout(logout -> logout
                        .logoutRequestMatcher(new AntPathRequestMatcher("/member/logout")) // ë¡œê·¸ì•„ì›ƒ URL
                        .logoutSuccessUrl("/") // ë¡œê·¸ì•„ì›ƒ ì„±ê³µ ì‹œ ì´ë™ í˜ì´ì§€
                        .invalidateHttpSession(true) // ì„¸ì…˜ ë¬´íš¨í™”
                        .deleteCookies("JSESSIONID") // ì¿ í‚¤ ì‚­ì œ
                        .permitAll()
                );

        return http.build();
    }

}
````

## File: src/main/java/com/example/carelink/config/WebConfig.java
````java
package com.example.carelink.config;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

/**
 * ì›¹ ì„¤ì • í´ë˜ìŠ¤
 * ì •ì  ë¦¬ì†ŒìŠ¤ ë§¤í•‘ ë“±ì„ ë‹´ë‹¹
 */
@Configuration
public class WebConfig implements WebMvcConfigurer {

    @Value("${file.upload-dir.facility}")
    private String facilityUploadDir;
    
    @Value("${file.upload-dir.profile}")
    private String profileUploadDir;

    /**
     * ì •ì  ë¦¬ì†ŒìŠ¤ í•¸ë“¤ëŸ¬ ì¶”ê°€
     * ë¡œì»¬ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ì™€ í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€ í´ë” ë§¤í•‘
     */
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        // ë¡œì»¬ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ë§¤í•‘ (ì‹¤ì œ ìš´ì˜ ì´ë¯¸ì§€)
        registry.addResourceHandler("/uploads/facility/**")
                .addResourceLocations("file:" + facilityUploadDir);
        
        registry.addResourceHandler("/uploads/profile/**")
                .addResourceLocations("file:" + profileUploadDir);
        
        // í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€ ë§¤í•‘ (Git ê³µìœ ìš©)
        String projectRoot = System.getProperty("user.dir");
        registry.addResourceHandler("/test-images/facilities/**")
                .addResourceLocations("file:" + projectRoot + "/images/facilities/");
        
        registry.addResourceHandler("/test-images/profiles/**")
                .addResourceLocations("file:" + projectRoot + "/images/profiles/");
    }
}
````

## File: src/main/java/com/example/carelink/controller/FacilityImageApiController.java
````java
package com.example.carelink.controller;

import com.example.carelink.dto.FacilityImageDTO;
import com.example.carelink.dto.FacilityDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.service.FacilityImageService;
import com.example.carelink.service.FacilityService;
import com.example.carelink.common.Constants;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile;

import javax.servlet.http.HttpSession;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
 * ì‹œì„¤ ì´ë¯¸ì§€ API ì „ìš© ì»¨íŠ¸ë¡¤ëŸ¬
 * Ajax ìš”ì²­ ì²˜ë¦¬ ë° JSON ì‘ë‹µ ì „ìš©
 */
@RestController
@RequestMapping("/facility/facility-images")
@RequiredArgsConstructor
@Slf4j
public class FacilityImageApiController {

    private final FacilityImageService facilityImageService;
    private final FacilityService facilityService;

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¼ê´„ ì—…ë°ì´íŠ¸ API
     */
    @PostMapping("/reorder/{facilityId}")
    public ResponseEntity<Map<String, Object>> reorderImages(
            @PathVariable Long facilityId,
            @RequestBody List<Long> imageIds) {
        
        Map<String, Object> response = new HashMap<>();
        
        try {
            log.info("ğŸ”„ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ API ìš”ì²­ - facilityId: {}, imageIds: {}", facilityId, imageIds);
            
            // ë°°ì¹˜ë¡œ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸
            boolean success = facilityImageService.updateImageOrdersBatch(facilityId, imageIds);
            
            if (success) {
                response.put("success", true);
                response.put("message", "ì´ë¯¸ì§€ ìˆœì„œê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
                
                // ì—…ë°ì´íŠ¸ëœ ì´ë¯¸ì§€ ëª©ë¡ ë°˜í™˜
                List<FacilityImageDTO> updatedImages = facilityImageService.getImagesByFacilityId(facilityId);
                response.put("images", updatedImages);
                
                log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ API ì„±ê³µ - facilityId: {}", facilityId);
                return ResponseEntity.ok(response);
            } else {
                response.put("success", false);
                response.put("message", "ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                
                log.warn("âš ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ API ì‹¤íŒ¨ - facilityId: {}", facilityId);
                return ResponseEntity.badRequest().body(response);
            }
            
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ API ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
            
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ ìë™ ìˆœì„œ ì¬ì •ë ¬ API (ì¤‘ë³µ ì œê±°)
     */
    @PostMapping("/auto-reorder/{facilityId}")
    public ResponseEntity<Map<String, Object>> autoReorderImages(@PathVariable Long facilityId) {
        
        Map<String, Object> response = new HashMap<>();
        
        try {
            log.info("ğŸ”„ ì‹œì„¤ ì´ë¯¸ì§€ ìë™ ìˆœì„œ ì¬ì •ë ¬ API ìš”ì²­ - facilityId: {}", facilityId);
            
            // ëª¨ë“  ì´ë¯¸ì§€ ìˆœì„œ ìë™ ì¬ì •ë ¬
            boolean success = facilityImageService.reorderAllFacilityImages(facilityId);
            
            if (success) {
                response.put("success", true);
                response.put("message", "ì´ë¯¸ì§€ ìˆœì„œê°€ ìë™ìœ¼ë¡œ ì¬ì •ë ¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
                
                // ì¬ì •ë ¬ëœ ì´ë¯¸ì§€ ëª©ë¡ ë°˜í™˜
                List<FacilityImageDTO> reorderedImages = facilityImageService.getImagesByFacilityId(facilityId);
                response.put("images", reorderedImages);
                response.put("imageCount", reorderedImages.size());
                
                log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ìë™ ìˆœì„œ ì¬ì •ë ¬ API ì„±ê³µ - facilityId: {}, ì´ {}ì¥", facilityId, reorderedImages.size());
                return ResponseEntity.ok(response);
            } else {
                response.put("success", false);
                response.put("message", "ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                
                log.warn("âš ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ìë™ ìˆœì„œ ì¬ì •ë ¬ API ì‹¤íŒ¨ - facilityId: {}", facilityId);
                return ResponseEntity.badRequest().body(response);
            }
            
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ìë™ ìˆœì„œ ì¬ì •ë ¬ API ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
            
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ API (ê¶Œí•œ í™•ì¸ í¬í•¨)
     */
    @GetMapping("/{facilityId}")
    public ResponseEntity<Map<String, Object>> getFacilityImages(@PathVariable Long facilityId, HttpSession session) {
        
        Map<String, Object> response = new HashMap<>();
        
        try {
            log.info("ğŸ“‹ ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ API ìš”ì²­ - facilityId: {}", facilityId);
            
            // ê¶Œí•œ í™•ì¸
            MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (member == null) {
                response.put("success", false);
                response.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return ResponseEntity.status(401).body(response);
            }
            
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                response.put("success", false);
                response.put("message", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
            
            // ì‹œì„¤ ì†Œìœ ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥
            if (!facility.getRegisteredMemberId().equals(member.getMemberId()) 
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                response.put("success", false);
                response.put("message", "í•´ë‹¹ ì‹œì„¤ ì´ë¯¸ì§€ë¥¼ ì¡°íšŒí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return ResponseEntity.status(403).body(response);
            }
            
            List<FacilityImageDTO> images = facilityImageService.getImagesByFacilityId(facilityId);
            FacilityImageDTO mainImage = facilityImageService.getMainImageByFacilityId(facilityId);
            
            response.put("success", true);
            response.put("images", images);
            response.put("mainImage", mainImage);
            response.put("imageCount", images.size());
            response.put("maxImages", 5); // ìµœëŒ€ ì´ë¯¸ì§€ ìˆ˜
            
            log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ API ì„±ê³µ - facilityId: {}, ì´ {}ì¥, memberId: {}", facilityId, images.size(), member.getMemberId());
            return ResponseEntity.ok(response);
            
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ API ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
            
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }

    /**
     * ê°œë³„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ API
     */
    @PutMapping("/{imageId}/order")
    public ResponseEntity<Map<String, Object>> updateImageOrder(
            @PathVariable Long imageId,
            @RequestParam Integer order) {
        
        Map<String, Object> response = new HashMap<>();
        
        try {
            log.info("ğŸ”¢ ê°œë³„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ API ìš”ì²­ - imageId: {}, order: {}", imageId, order);
            
            boolean success = facilityImageService.updateImageOrder(imageId, order);
            
            if (success) {
                response.put("success", true);
                response.put("message", "ì´ë¯¸ì§€ ìˆœì„œê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
                
                log.info("âœ… ê°œë³„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ API ì„±ê³µ - imageId: {}, order: {}", imageId, order);
                return ResponseEntity.ok(response);
            } else {
                response.put("success", false);
                response.put("message", "ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                
                log.warn("âš ï¸ ê°œë³„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ API ì‹¤íŒ¨ - imageId: {}, order: {}", imageId, order);
                return ResponseEntity.badRequest().body(response);
            }
            
        } catch (Exception e) {
            log.error("âŒ ê°œë³„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ API ì˜¤ë¥˜ - imageId: {}, order: {}", imageId, order, e);
            
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }

    /**
     * ì´ë¯¸ì§€ ì‚­ì œ API
     */
    @DeleteMapping("/{imageId}")
    public ResponseEntity<Map<String, Object>> deleteImage(@PathVariable Long imageId) {
        Map<String, Object> response = new HashMap<>();
        
        try {
            log.info("ğŸ—‘ï¸ ì´ë¯¸ì§€ ì‚­ì œ API ìš”ì²­ - imageId: {}", imageId);
            
            boolean success = facilityImageService.deleteFacilityImage(imageId);
            
            if (success) {
                response.put("success", true);
                response.put("message", "ì´ë¯¸ì§€ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
                log.info("âœ… ì´ë¯¸ì§€ ì‚­ì œ API ì„±ê³µ - imageId: {}", imageId);
                return ResponseEntity.ok(response);
            } else {
                response.put("success", false);
                response.put("message", "ì´ë¯¸ì§€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
            
        } catch (Exception e) {
            log.error("âŒ ì´ë¯¸ì§€ ì‚­ì œ API ì˜¤ë¥˜ - imageId: {}", imageId, e);
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }

    /**
     * ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • API
     */
    @PostMapping("/{imageId}/set-main")
    public ResponseEntity<Map<String, Object>> setMainImage(@PathVariable Long imageId) {
        Map<String, Object> response = new HashMap<>();
        
        try {
            log.info("â­ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • API ìš”ì²­ - imageId: {}", imageId);
            
            // ì´ë¯¸ì§€ ì •ë³´ë¥¼ ë¨¼ì € ì¡°íšŒí•˜ì—¬ facilityIdë¥¼ ì–»ìŒ
            FacilityImageDTO imageInfo = facilityImageService.getImageById(imageId);
            if (imageInfo == null) {
                response.put("success", false);
                response.put("message", "ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
            
            boolean success = facilityImageService.setMainImage(imageInfo.getFacilityId(), imageId);
            
            if (success) {
                response.put("success", true);
                response.put("message", "ë©”ì¸ ì´ë¯¸ì§€ê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
                log.info("âœ… ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • API ì„±ê³µ - imageId: {}", imageId);
                return ResponseEntity.ok(response);
            } else {
                response.put("success", false);
                response.put("message", "ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
            
        } catch (Exception e) {
            log.error("âŒ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • API ì˜¤ë¥˜ - imageId: {}", imageId, e);
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }

    /**
     * ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ API (Blob ë°©ì‹)
     */
    @PostMapping("/upload")
    public ResponseEntity<Map<String, Object>> uploadImages(
            @RequestParam("facilityId") Long facilityId,
            @RequestParam("images") List<MultipartFile> images,
            HttpSession session) {
        
        Map<String, Object> response = new HashMap<>();
        
        try {
            log.info("ğŸ“¤ ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ API ìš”ì²­ - facilityId: {}, ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, images.size());
            
            // ê¶Œí•œ í™•ì¸
            MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (member == null) {
                response.put("success", false);
                response.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return ResponseEntity.status(401).body(response);
            }
            
            // ì‹œì„¤ í™•ì¸
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                response.put("success", false);
                response.put("message", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
            
            // ì‹œì„¤ ì†Œìœ ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ì—…ë¡œë“œ ê°€ëŠ¥
            if (!facility.getRegisteredMemberId().equals(member.getMemberId()) 
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                response.put("success", false);
                response.put("message", "í•´ë‹¹ ì‹œì„¤ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return ResponseEntity.status(403).body(response);
            }
            
            // íŒŒì¼ ê²€ì¦
            if (images == null || images.isEmpty()) {
                response.put("success", false);
                response.put("message", "ì—…ë¡œë“œí•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
            
            // ìµœëŒ€ íŒŒì¼ ìˆ˜ ì²´í¬ (10MB ì œí•œ)
            final long MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB
            final int MAX_FILES = 5;
            
            if (images.size() > MAX_FILES) {
                response.put("success", false);
                response.put("message", "ìµœëŒ€ " + MAX_FILES + "ì¥ê¹Œì§€ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return ResponseEntity.badRequest().body(response);
            }
            
            // íŒŒì¼ í¬ê¸° ë° í˜•ì‹ ê²€ì¦
            for (MultipartFile image : images) {
                if (image.getSize() > MAX_FILE_SIZE) {
                    response.put("success", false);
                    response.put("message", "íŒŒì¼ í¬ê¸°ê°€ 10MBë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + image.getOriginalFilename());
                    return ResponseEntity.badRequest().body(response);
                }
                
                String contentType = image.getContentType();
                if (contentType == null || !contentType.startsWith("image/")) {
                    response.put("success", false);
                    response.put("message", "ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: " + image.getOriginalFilename());
                    return ResponseEntity.badRequest().body(response);
                }
            }
            
            // ì´ë¯¸ì§€ ì—…ë¡œë“œ ì²˜ë¦¬
            List<FacilityImageDTO> uploadedImages = facilityImageService.uploadMultipleImages(facilityId, images);
            
            response.put("success", true);
            response.put("message", images.size() + "ê°œì˜ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.");
            response.put("uploadedImages", uploadedImages);
            response.put("uploadCount", uploadedImages.size());
            
            log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ API ì„±ê³µ - facilityId: {}, ì—…ë¡œë“œ ìˆ˜: {}, memberId: {}", 
                    facilityId, uploadedImages.size(), member.getMemberId());
            return ResponseEntity.ok(response);
            
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ API ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
            
            response.put("success", false);
            response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return ResponseEntity.internalServerError().body(response);
        }
    }
}
````

## File: src/main/java/com/example/carelink/dao/FacilityImageMapper.java
````java
package com.example.carelink.dao;

import com.example.carelink.dto.FacilityImageDTO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;

import java.util.List;

/**
 * ì‹œì„¤ ì´ë¯¸ì§€ ê´€ë ¨ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë§¤í¼
 */
@Mapper
public interface FacilityImageMapper {

    /**
     * ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì¡°íšŒ (ìˆœì„œëŒ€ë¡œ)
     */
    List<FacilityImageDTO> getImagesByFacilityId(@Param("facilityId") Long facilityId);

    /**
     * ì‹œì„¤ì˜ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ
     */
    FacilityImageDTO getMainImageByFacilityId(@Param("facilityId") Long facilityId);

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ ì¶”ê°€
     */
    int insertFacilityImage(FacilityImageDTO facilityImageDTO);

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ ìˆ˜ì •
     */
    int updateFacilityImage(FacilityImageDTO facilityImageDTO);

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ ì‚­ì œ
     */
    int deleteFacilityImage(@Param("imageId") Long imageId);

    /**
     * ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì‚­ì œ
     */
    int deleteAllImagesByFacilityId(@Param("facilityId") Long facilityId);

    /**
     * ì‹œì„¤ì˜ ì´ë¯¸ì§€ ê°œìˆ˜ ì¡°íšŒ
     */
    int countImagesByFacilityId(@Param("facilityId") Long facilityId);

    /**
     * ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • (ê¸°ì¡´ ë©”ì¸ ì´ë¯¸ì§€ í•´ì œ í›„ ìƒˆë¡œ ì„¤ì •)
     */
    int updateMainImage(@Param("facilityId") Long facilityId, @Param("imageId") Long imageId);

    /**
     * ê¸°ì¡´ ë©”ì¸ ì´ë¯¸ì§€ í•´ì œ
     */
    int clearMainImages(@Param("facilityId") Long facilityId);
    
    /**
     * íŠ¹ì • ì´ë¯¸ì§€ IDë¡œ ì´ë¯¸ì§€ ì¡°íšŒ
     */
    FacilityImageDTO getImageById(@Param("imageId") Long imageId);
    
    /**
     * ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ (ë°ì´í„° ì •í•©ì„± ë³´ì¥)
     */
    int updateImageOrder(@Param("imageId") Long imageId, @Param("imageOrder") Integer imageOrder);
}
````

## File: src/main/java/com/example/carelink/dao/ReviewMapper.java
````java
package com.example.carelink.dao;

import com.example.carelink.dto.ReviewDTO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;

import java.util.List;

/**
 * ë¦¬ë·° ê´€ë ¨ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë§¤í¼
 * íŒ€ì› D ë‹´ë‹¹
 */
@Mapper
public interface ReviewMapper {
    
    /**
     * ë¦¬ë·° ëª©ë¡ ì¡°íšŒ (ê¸°ë³¸)
     */
    List<ReviewDTO> getReviewList(ReviewDTO searchDTO);
    
    /**
     * ë¦¬ë·° ëª©ë¡ ì¡°íšŒ (ê²€ìƒ‰ í¬í•¨) - XMLì—ì„œ ì •ì˜ë¨
     */
    List<ReviewDTO> findReviewsWithSearch(ReviewDTO searchDTO);
    
    /**
     * ë¦¬ë·° ì´ ê°œìˆ˜ ì¡°íšŒ (ê²€ìƒ‰ í¬í•¨)
     */
    int countReviewsWithSearch(ReviewDTO searchDTO);
    
    /**
     * ë¦¬ë·° ìƒì„¸ ì •ë³´ ì¡°íšŒ (ê¸°ë³¸)
     */
    ReviewDTO getReviewById(@Param("reviewId") Long reviewId);
    
    /**
     * ë¦¬ë·° ìƒì„¸ ì •ë³´ ì¡°íšŒ - XMLì—ì„œ ì •ì˜ë¨
     */
    ReviewDTO findReviewById(@Param("reviewId") Long reviewId);
    
    /**
     * ë¦¬ë·° ë“±ë¡
     */
    int insertReview(ReviewDTO reviewDTO);
    
    /**
     * ë¦¬ë·° ìˆ˜ì •
     */
    int updateReview(ReviewDTO reviewDTO);
    
    /**
     * ë¦¬ë·° ì‚­ì œ
     */
    int deleteReview(@Param("reviewId") Long reviewId);
    
    /**
     * ì¡°íšŒìˆ˜ ì¦ê°€
     */
    int incrementViewCount(@Param("reviewId") Long reviewId);
    
    /**
     * ì¶”ì²œìˆ˜ ì¦ê°€
     */
    int incrementLikeCount(@Param("reviewId") Long reviewId);
    
    /**
     * ë¹„ì¶”ì²œìˆ˜ ì¦ê°€
     */
    int incrementDislikeCount(@Param("reviewId") Long reviewId);
    
    /**
     * ì‹œì„¤ë³„ ë¦¬ë·° ëª©ë¡ ì¡°íšŒ (ê¸°ë³¸)
     */
    List<ReviewDTO> getReviewsByFacilityId(@Param("facilityId") Long facilityId);
    
    /**
     * ì‹œì„¤ë³„ ë¦¬ë·° ëª©ë¡ ì¡°íšŒ - XMLì—ì„œ ì •ì˜ë¨
     */
    List<ReviewDTO> findReviewsByFacilityId(@Param("facilityId") Long facilityId);
    
    /**
     * íšŒì›ë³„ ë¦¬ë·° ëª©ë¡ ì¡°íšŒ
     */
    List<ReviewDTO> findReviewsByMemberId(@Param("memberId") Long memberId);
    
    /**
     * ì‹œì„¤ì˜ í‰ê·  í‰ì  ì¡°íšŒ
     */
    Double getAverageRating(@Param("facilityId") Long facilityId);
    
    /**
     * ìµœê·¼ ë¦¬ë·° ëª©ë¡ ì¡°íšŒ
     */
    List<ReviewDTO> getRecentReviews();
    
    /**
     * ë¦¬ë·° ì´ ê°œìˆ˜ ì¡°íšŒ (ê²€ìƒ‰ í¬í•¨)
     */
    int getReviewCount(ReviewDTO searchDTO);

    /**
     * ì „ì²´ ë¦¬ë·° ìˆ˜ ì¡°íšŒ (í†µê³„ìš©)
     */
    int getReviewCount();

    /**
     * íšŒì› IDë¡œ ë¦¬ë·° ì‚­ì œ (íšŒì› íƒˆí‡´ ì‹œ ì‚¬ìš©)
     */
    int deleteByMemberId(@Param("memberId") Long memberId);

    /**
     * ì‹œì„¤ íšŒì› IDë¡œ ë¦¬ë·° ì‚­ì œ (ì‹œì„¤ ì‚­ì œ ì‹œ ì‚¬ìš©)
     */
    int deleteByFacilityMemberId(@Param("memberId") Long memberId);
}
````

## File: src/main/java/Crolling.java
````java
import java.io.*;
import java.util.*;

public class Crolling {
    public static void main(String[] args) {
        String rootDirectory = "D:\\cch\\project_2\\LightCare\\src\\main";

        String outputFilePath = "D:/LightCare.txt";

        try (BufferedWriter writer = new BufferedWriter(new FileWriter(outputFilePath))) {
            List<File> files = getAllFilesWithExtensions(rootDirectory, Arrays.asList(".java", ".jsp", ".xml", ".js", ".html", ".css"));
            
            for (File file : files) {
                System.out.println("íŒŒì¼ ì½ê¸°: " + file.getAbsolutePath());
                writeFileContentToFile(file, writer);
            }
            System.out.println("ëª¨ë“  íŒŒì¼ì„ í¬ë¡¤ë§í•˜ì—¬ " + outputFilePath + "ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    // ì—¬ëŸ¬ í™•ì¥ìë¥¼ í¬í•¨í•˜ëŠ” íŒŒì¼ë“¤ì„ ì¬ê·€ì ìœ¼ë¡œ ì°¾ëŠ” í•¨ìˆ˜
    public static List<File> getAllFilesWithExtensions(String directoryPath, List<String> extensions) {
        List<File> matchedFiles = new ArrayList<>();
        File rootDirectory = new File(directoryPath);

        File[] files = rootDirectory.listFiles();
        if (files != null) {
            for (File file : files) {
                if (file.isDirectory()) {
                    matchedFiles.addAll(getAllFilesWithExtensions(file.getAbsolutePath(), extensions));
                } else {
                    for (String ext : extensions) {
                        if (file.getName().toLowerCase().endsWith(ext)) {
                            matchedFiles.add(file);
                            break;  // í•œë²ˆ ë§¤ì¹­ë˜ë©´ ë‹¤ìŒ íŒŒì¼ë¡œ ë„˜ì–´ê°
                        }
                    }
                }
            }
        }
        return matchedFiles;
    }

    public static void writeFileContentToFile(File file, BufferedWriter writer) throws IOException {
        try (BufferedReader reader = new BufferedReader(new FileReader(file))) {
            writer.write("íŒŒì¼ëª…: " + file.getName() + "\n");
            writer.write("ê²½ë¡œ: " + file.getAbsolutePath() + "\n");
            writer.write("----------------------------------------------------\n");

            String line;
            while ((line = reader.readLine()) != null) {
                writer.write(line + "\n");
            }

            writer.write("\n\n");
        }
    }
}
````

## File: src/main/resources/mapper/facilityImageMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.carelink.dao.FacilityImageMapper">

    <!-- ResultMap ì •ì˜ -->
    <resultMap id="FacilityImageResultMap" type="com.example.carelink.dto.FacilityImageDTO">
        <id property="imageId" column="image_id"/>
        <result property="facilityId" column="facility_id"/>
        <result property="imagePath" column="image_path"/>
        <result property="imageAltText" column="image_alt_text"/>
        <result property="imageOrder" column="image_order"/>
        <result property="isMainImage" column="is_main_image"/>
        <result property="uploadDate" column="upload_date"/>
        <result property="updatedAt" column="updated_at"/>
    </resultMap>

    <!-- ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì¡°íšŒ (ìˆœì„œëŒ€ë¡œ) -->
    <select id="getImagesByFacilityId" resultMap="FacilityImageResultMap">
        SELECT 
            image_id,
            facility_id,
            image_path,
            image_alt_text,
            image_order,
            is_main_image,
            upload_date,
            updated_at
        FROM facility_images
        WHERE facility_id = #{facilityId}
        ORDER BY image_order ASC, upload_date ASC
    </select>

    <!-- ì‹œì„¤ì˜ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ -->
    <select id="getMainImageByFacilityId" resultMap="FacilityImageResultMap">
        SELECT 
            image_id,
            facility_id,
            image_path,
            image_alt_text,
            image_order,
            is_main_image,
            upload_date,
            updated_at
        FROM facility_images
        WHERE facility_id = #{facilityId} 
        AND is_main_image = TRUE
        LIMIT 1
    </select>

    <!-- ì‹œì„¤ ì´ë¯¸ì§€ ì¶”ê°€ -->
    <insert id="insertFacilityImage" useGeneratedKeys="true" keyProperty="imageId">
        INSERT INTO facility_images (
            facility_id,
            image_path,
            image_alt_text,
            image_order,
            is_main_image,
            upload_date
        ) VALUES (
            #{facilityId},
            #{imagePath},
            #{imageAltText},
            #{imageOrder},
            #{isMainImage},
            NOW()
        )
    </insert>

    <!-- ì‹œì„¤ ì´ë¯¸ì§€ ìˆ˜ì • -->
    <update id="updateFacilityImage">
        UPDATE facility_images 
        SET 
            image_path = #{imagePath},
            image_alt_text = #{imageAltText},
            image_order = #{imageOrder},
            is_main_image = #{isMainImage},
            updated_at = NOW()
        WHERE image_id = #{imageId}
    </update>

    <!-- ì‹œì„¤ ì´ë¯¸ì§€ ì‚­ì œ -->
    <delete id="deleteFacilityImage">
        DELETE FROM facility_images 
        WHERE image_id = #{imageId}
    </delete>

    <!-- ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì‚­ì œ -->
    <delete id="deleteAllImagesByFacilityId">
        DELETE FROM facility_images 
        WHERE facility_id = #{facilityId}
    </delete>

    <!-- ì‹œì„¤ì˜ ì´ë¯¸ì§€ ê°œìˆ˜ ì¡°íšŒ -->
    <select id="countImagesByFacilityId" resultType="int">
        SELECT COUNT(*) 
        FROM facility_images 
        WHERE facility_id = #{facilityId}
    </select>

    <!-- ê¸°ì¡´ ë©”ì¸ ì´ë¯¸ì§€ í•´ì œ -->
    <update id="clearMainImages">
        UPDATE facility_images 
        SET is_main_image = FALSE, updated_at = NOW()
        WHERE facility_id = #{facilityId}
    </update>

    <!-- ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • -->
    <update id="updateMainImage">
        UPDATE facility_images 
        SET is_main_image = TRUE, updated_at = NOW()
        WHERE facility_id = #{facilityId} AND image_id = #{imageId}
    </update>

    <!-- íŠ¹ì • ì´ë¯¸ì§€ IDë¡œ ì´ë¯¸ì§€ ì¡°íšŒ -->
    <select id="getImageById" resultMap="FacilityImageResultMap">
        SELECT 
            image_id,
            facility_id,
            image_path,
            image_alt_text,
            image_order,
            is_main_image,
            upload_date,
            updated_at
        FROM facility_images
        WHERE image_id = #{imageId}
    </select>

    <!-- ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ (ë°ì´í„° ì •í•©ì„± ë³´ì¥) -->
    <update id="updateImageOrder">
        UPDATE facility_images 
        SET image_order = #{imageOrder}, updated_at = NOW()
        WHERE image_id = #{imageId}
    </update>

</mapper>
````

## File: src/main/resources/mapper/reviewMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.carelink.dao.ReviewMapper">

    <!-- ResultMap ì •ì˜ -->
    <resultMap id="reviewResultMap" type="com.example.carelink.dto.ReviewDTO">
        <id property="reviewId" column="review_id"/>
        <result property="facilityId" column="facility_id"/>
        <result property="facilityName" column="facility_name"/>
        <result property="memberId" column="member_id"/>
        <result property="memberName" column="member_name"/>
        <result property="title" column="title"/>
        <result property="content" column="content"/>
        <result property="rating" column="rating"/>
        <result property="serviceRating" column="service_rating"/>
        <result property="facilityRating" column="facility_rating"/>
        <result property="staffRating" column="staff_rating"/>
        <result property="priceRating" column="price_rating"/>
        <result property="reviewImage1" column="review_image1"/>
        <result property="reviewImage2" column="review_image2"/>
        <result property="reviewImage3" column="review_image3"/>
        <result property="likeCount" column="like_count"/>
        <result property="dislikeCount" column="dislike_count"/>
        <result property="viewCount" column="view_count"/>
        <result property="isVisible" column="is_visible"/>
        <result property="status" column="status"/>
        <result property="parentReviewId" column="parent_review_id"/>
        <result property="replyCount" column="reply_count"/>
        <result property="replyDepth" column="reply_depth"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
        <result property="isDeleted" column="is_deleted"/>
    </resultMap>

    <!-- ë¦¬ë·° ëª©ë¡ ì¡°íšŒ (ê²€ìƒ‰ í¬í•¨) -->
    <select id="findReviewsWithSearch" parameterType="com.example.carelink.dto.ReviewDTO" resultMap="reviewResultMap">
        SELECT 
            r.*,
            m.name as member_name,
            f.facility_name
        FROM review r
        LEFT JOIN member m ON r.member_id = m.member_id
        LEFT JOIN facility f ON r.facility_id = f.facility_id
        WHERE r.is_deleted = false AND r.is_visible = true
        <if test="facilityId != null">
            AND r.facility_id = #{facilityId}
        </if>
        <if test="searchKeyword != null and searchKeyword != ''">
            AND (r.title LIKE CONCAT('%', #{searchKeyword}, '%') 
                 OR r.content LIKE CONCAT('%', #{searchKeyword}, '%'))
        </if>
        <if test="minRating != null">
            AND r.rating >= #{minRating}
        </if>
        <if test="maxRating != null">
            AND r.rating &lt;= #{maxRating}
        </if>
        <choose>
            <when test="sortBy != null and sortBy == 'RATING_HIGH'">
                ORDER BY r.rating DESC, r.created_at DESC
            </when>
            <when test="sortBy != null and sortBy == 'RATING_LOW'">
                ORDER BY r.rating ASC, r.created_at DESC
            </when>
            <when test="sortBy != null and sortBy == 'LIKE_COUNT'">
                ORDER BY r.like_count DESC, r.created_at DESC
            </when>
            <otherwise>
                ORDER BY r.created_at DESC
            </otherwise>
        </choose>
        <if test="size != null and size > 0 and offset != null and offset >= 0">
            LIMIT #{size} OFFSET #{offset}
        </if>
    </select>

    <!-- ë¦¬ë·° ì´ ê°œìˆ˜ ì¡°íšŒ -->
    <select id="countReviewsWithSearch" parameterType="com.example.carelink.dto.ReviewDTO" resultType="int">
        SELECT COUNT(*)
        FROM review r
        WHERE r.is_deleted = false AND r.is_visible = true
        <if test="facilityId != null">
            AND r.facility_id = #{facilityId}
        </if>
        <if test="searchKeyword != null and searchKeyword != ''">
            AND (r.title LIKE CONCAT('%', #{searchKeyword}, '%') 
                 OR r.content LIKE CONCAT('%', #{searchKeyword}, '%'))
        </if>
        <if test="minRating != null">
            AND r.rating >= #{minRating}
        </if>
        <if test="maxRating != null">
            AND r.rating &lt;= #{maxRating}
        </if>
    </select>

    <!-- ë¦¬ë·° ìƒì„¸ ì¡°íšŒ -->
    <select id="findReviewById" parameterType="long" resultMap="reviewResultMap">
        SELECT 
            r.*,
            m.name as member_name,
            f.facility_name
        FROM review r
        LEFT JOIN member m ON r.member_id = m.member_id
        LEFT JOIN facility f ON r.facility_id = f.facility_id
        WHERE r.review_id = #{reviewId} AND r.is_deleted = false
    </select>

    <!-- ë¦¬ë·° ë“±ë¡ -->
    <insert id="insertReview" parameterType="com.example.carelink.dto.ReviewDTO" useGeneratedKeys="true" keyProperty="reviewId">
        INSERT INTO review (
            facility_id, member_id, title, content, rating,
            service_rating, facility_rating, staff_rating, price_rating,
            review_image1, review_image2, review_image3,
            is_visible, status, parent_review_id, reply_depth,
            is_deleted, created_at
        ) VALUES (
            #{facilityId}, #{memberId}, #{title}, #{content}, #{rating},
            #{serviceRating}, #{facilityRating}, #{staffRating}, #{priceRating},
            #{reviewImage1}, #{reviewImage2}, #{reviewImage3},
            #{isVisible}, #{status}, #{parentReviewId}, #{replyDepth},
            #{isDeleted}, NOW()
        )
    </insert>

    <!-- ë¦¬ë·° ìˆ˜ì • -->
    <update id="updateReview" parameterType="com.example.carelink.dto.ReviewDTO">
        UPDATE review SET
            title = #{title},
            content = #{content},
            rating = #{rating},
            service_rating = #{serviceRating},
            facility_rating = #{facilityRating},
            staff_rating = #{staffRating},
            price_rating = #{priceRating},
            review_image1 = #{reviewImage1},
            review_image2 = #{reviewImage2},
            review_image3 = #{reviewImage3},
            is_visible = #{isVisible},
            status = #{status},
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>

    <!-- ë¦¬ë·° ì‚­ì œ (ë…¼ë¦¬ ì‚­ì œ) -->
    <update id="deleteReview" parameterType="long">
        UPDATE review SET
            is_deleted = true,
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>

    <!-- ì¡°íšŒìˆ˜ ì¦ê°€ -->
    <update id="incrementViewCount" parameterType="long">
        UPDATE review SET
            view_count = view_count + 1,
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>

    <!-- ì¶”ì²œìˆ˜ ì¦ê°€ -->
    <update id="incrementLikeCount" parameterType="long">
        UPDATE review SET
            like_count = like_count + 1,
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>

    <!-- ë¹„ì¶”ì²œìˆ˜ ì¦ê°€ -->
    <update id="incrementDislikeCount" parameterType="long">
        UPDATE review SET
            dislike_count = dislike_count + 1,
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>

    <!-- íšŒì›ë³„ ë¦¬ë·° ëª©ë¡ ì¡°íšŒ -->
    <select id="findReviewsByMemberId" parameterType="long" resultMap="reviewResultMap">
        SELECT 
            r.*,
            m.name as member_name,
            f.facility_name
        FROM review r
        LEFT JOIN member m ON r.member_id = m.member_id
        LEFT JOIN facility f ON r.facility_id = f.facility_id
        WHERE r.member_id = #{memberId} AND r.is_deleted = false
        ORDER BY r.created_at DESC
    </select>

    <!-- ì‹œì„¤ë³„ ë¦¬ë·° ëª©ë¡ ì¡°íšŒ -->
    <select id="findReviewsByFacilityId" parameterType="long" resultMap="reviewResultMap">
        SELECT 
            r.*,
            m.name as member_name,
            f.facility_name
        FROM review r
        LEFT JOIN member m ON r.member_id = m.member_id
        LEFT JOIN facility f ON r.facility_id = f.facility_id
        WHERE r.facility_id = #{facilityId} AND r.is_deleted = false AND r.is_visible = true
        ORDER BY r.created_at DESC
    </select>

    <!-- ì‹œì„¤ë³„ í‰ê·  í‰ì  ì¡°íšŒ -->
    <select id="getAverageRatingByFacilityId" parameterType="long" resultType="float">
        SELECT ROUND(AVG(rating), 1)
        FROM review
        WHERE facility_id = #{facilityId} AND is_deleted = false AND is_visible = true
    </select>

    <!-- ì‹œì„¤ë³„ ë¦¬ë·° ê°œìˆ˜ ì¡°íšŒ -->
    <select id="getReviewCountByFacilityId" parameterType="long" resultType="int">
        SELECT COUNT(*)
        FROM review
        WHERE facility_id = #{facilityId} AND is_deleted = false AND is_visible = true
    </select>

    <!-- ì „ì²´ ë¦¬ë·° ìˆ˜ ì¡°íšŒ (í†µê³„ìš©) -->
    <select id="getReviewCount" resultType="int">
        SELECT COUNT(*) 
        FROM review 
        WHERE is_deleted = false AND is_visible = true
    </select>

    <!-- ì‹œì„¤ í‰ê·  í‰ì  ì¡°íšŒ -->
    <select id="getAverageRating" parameterType="long" resultType="double">
        SELECT AVG(rating) 
        FROM review 
        WHERE facility_id = #{facilityId} 
          AND is_deleted = false 
          AND is_visible = true
    </select>

    <!-- íšŒì› IDë¡œ ë¦¬ë·° ì‚­ì œ (íšŒì› íƒˆí‡´ ì‹œ ì‚¬ìš©) -->
    <delete id="deleteByMemberId" parameterType="long">
        DELETE FROM review WHERE member_id = #{memberId}
    </delete>

    <!-- ì‹œì„¤ íšŒì› IDë¡œ ë¦¬ë·° ì‚­ì œ (ì‹œì„¤ ì‚­ì œ ì‹œ ì‚¬ìš©) -->
    <delete id="deleteByFacilityMemberId" parameterType="long">
        DELETE FROM review 
        WHERE facility_id IN (
            SELECT facility_id FROM facility WHERE registered_member_id = #{memberId}
        )
    </delete>

</mapper>
````

## File: src/main/resources/static/css/rich-text-editor.css
````css
/**
 * ë¼ì´íŠ¸ì¼€ì–´ ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° v2.0 ìŠ¤íƒ€ì¼
 * ë³´ì•ˆ ê°•í™” ë° ì„±ëŠ¥ ìµœì í™” ë²„ì „
 */

/* ì—ë””í„° ì»¨í…Œì´ë„ˆ */
.rich-text-editor-v2 {
    border: 1px solid #ced4da;
    border-radius: 0.375rem;
    background-color: #fff;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.rich-text-editor-v2:focus-within {
    border-color: #86b7fe;
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

/* íˆ´ë°” ìŠ¤íƒ€ì¼ */
.rte-toolbar {
    background-color: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
    padding: 0.5rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.25rem;
    border-radius: 0.375rem 0.375rem 0 0;
}

.rte-toolbar-group {
    display: flex;
    gap: 0.125rem;
    align-items: center;
}

.rte-toolbar-group:not(:last-child)::after {
    content: '';
    width: 1px;
    height: 1.5rem;
    background-color: #dee2e6;
    margin: 0 0.5rem;
}

/* íˆ´ë°” ë²„íŠ¼ */
.rte-btn {
    background: none;
    border: 1px solid transparent;
    border-radius: 0.25rem;
    padding: 0.375rem 0.5rem;
    font-size: 0.875rem;
    line-height: 1;
    color: #495057;
    cursor: pointer;
    transition: all 0.15s ease-in-out;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 2rem;
    height: 2rem;
}

.rte-btn:hover {
    background-color: #e9ecef;
    border-color: #adb5bd;
    color: #212529;
}

.rte-btn:active,
.rte-btn.active {
    background-color: #0d6efd;
    border-color: #0d6efd;
    color: #fff;
    box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}

.rte-btn:focus {
    outline: 0;
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

.rte-btn:disabled {
    opacity: 0.65;
    cursor: not-allowed;
}

/* íˆ´ë°” ì…€ë ‰íŠ¸ ë°•ìŠ¤ */
.rte-select {
    border: 1px solid #ced4da;
    border-radius: 0.25rem;
    padding: 0.25rem 0.5rem;
    font-size: 0.875rem;
    line-height: 1.25;
    color: #495057;
    background-color: #fff;
    cursor: pointer;
    min-width: 5rem;
    height: 2rem;
}

.rte-select:focus {
    border-color: #86b7fe;
    outline: 0;
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

/* íˆ´ë°” ìƒ‰ìƒ ì„ íƒê¸° */
.rte-color {
    border: 1px solid #ced4da;
    border-radius: 0.25rem;
    padding: 0.125rem;
    width: 2rem;
    height: 2rem;
    cursor: pointer;
    background: none;
}

.rte-color:focus {
    border-color: #86b7fe;
    outline: 0;
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

/* ì—ë””í„° ì½˜í…ì¸  ì˜ì—­ */
.rte-content {
    padding: 1rem;
    font-size: 1rem;
    line-height: 1.5;
    color: #212529;
    background-color: #fff;
    outline: none;
    overflow-y: auto;
    min-height: 200px;
    max-height: 600px;
}

.rte-content:focus {
    outline: none;
}

/* ë§í¬ ìŠ¤íƒ€ì¼ (ì—ë””í„° ë‚´ë¶€) */
.rte-content a {
    color: #0066cc !important;
    text-decoration: underline !important;
    cursor: pointer;
}

.rte-content a:hover {
    color: #004499 !important;
    text-decoration: underline !important;
}

.rte-content a:visited {
    color: #663399 !important;
}

/* ë§í¬ ìŠ¤íƒ€ì¼ (ìƒì„¸ë³´ê¸° í˜ì´ì§€) */
.rich-text-content a {
    color: #0066cc !important;
    text-decoration: underline !important;
    cursor: pointer;
}

.rich-text-content a:hover {
    color: #004499 !important;
    text-decoration: underline !important;
}

.rich-text-content a:visited {
    color: #663399 !important;
}

/* í”Œë ˆì´ìŠ¤í™€ë” */
.rte-placeholder {
    color: #6c757d;
    font-style: italic;
    margin: 0;
    user-select: none;
    pointer-events: none;
}

/* ìƒíƒœë°” */
.rte-statusbar {
    background-color: #f8f9fa;
    border-top: 1px solid #dee2e6;
    padding: 0.25rem 0.75rem;
    font-size: 0.75rem;
    color: #6c757d;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 0 0 0.375rem 0.375rem;
}

.rte-char-count.text-danger {
    color: #dc3545 !important;
    font-weight: 600;
}

/* ì—ë””í„° ë‚´ ì½˜í…ì¸  ìŠ¤íƒ€ì¼ */
.rte-content p {
    margin-bottom: 0.75rem;
}

.rte-content ul,
.rte-content ol {
    margin-bottom: 0.75rem;
    padding-left: 2rem;
}

.rte-content li {
    margin-bottom: 0.25rem;
}

.rte-content blockquote {
    margin: 1rem 0;
    padding: 0.75rem 1rem;
    border-left: 4px solid #0d6efd;
    background-color: #f8f9fa;
    font-style: italic;
}

.rte-content a {
    color: #0d6efd;
    text-decoration: underline;
}

.rte-content a:hover {
    color: #0a58ca;
}

/* í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
.rte-table {
    width: 100%;
    margin: 1rem 0;
    border-collapse: collapse;
}

.rte-table th,
.rte-table td {
    border: 1px solid #dee2e6;
    padding: 0.5rem;
    text-align: left;
    vertical-align: top;
}

.rte-table th {
    background-color: #f8f9fa;
    font-weight: 600;
}

.rte-table tr:nth-child(even) {
    background-color: rgba(0, 0, 0, 0.05);
}

/* ê²½ê³  ë©”ì‹œì§€ */
.rte-warning {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 9999;
    max-width: 300px;
    margin: 0;
    animation: slideInRight 0.3s ease-out;
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* ë°˜ì‘í˜• ë””ìì¸ */
@media (max-width: 768px) {
    .rte-toolbar {
        padding: 0.25rem;
        gap: 0.125rem;
    }
    
    .rte-toolbar-group:not(:last-child)::after {
        margin: 0 0.25rem;
    }
    
    .rte-btn {
        padding: 0.25rem;
        min-width: 1.75rem;
        height: 1.75rem;
        font-size: 0.75rem;
    }
    
    .rte-select {
        font-size: 0.75rem;
        min-width: 4rem;
        height: 1.75rem;
    }
    
    .rte-color {
        width: 1.75rem;
        height: 1.75rem;
    }
    
    .rte-content {
        padding: 0.75rem;
        font-size: 0.875rem;
    }
    
    .rte-statusbar {
        padding: 0.25rem 0.5rem;
        font-size: 0.6875rem;
        flex-direction: column;
        gap: 0.125rem;
    }
}

/* ì ‘ê·¼ì„± ê°œì„  */
.sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
}
````

## File: src/main/resources/static/js/delete-member.js
````javascript
// íšŒì›íƒˆí‡´ í˜ì´ì§€ JavaScript
// Thymeleaf ì¸ë¼ì¸ JavaScriptë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì™„ì „íˆ ë¶„ë¦¬ëœ JavaScript íŒŒì¼

document.addEventListener('DOMContentLoaded', function() {
    // DOM ìš”ì†Œ ì„ íƒ
    const elements = {
        form: document.getElementById('deleteMemberForm'),
        password: document.getElementById('password'),
        confirmName: document.getElementById('confirmName'),
        confirmDelete: document.getElementById('confirmDelete'),
        submitButton: document.getElementById('submitButton'),
        togglePassword: document.getElementById('togglePassword'),
        passwordFeedback: document.getElementById('passwordFeedback'),
        nameValidationFeedback: document.getElementById('nameValidationFeedback')
    };
    
    // ì„œë²„ì—ì„œ ì „ë‹¬ëœ ì‚¬ìš©ì ì´ë¦„ (ì „ì—­ ë³€ìˆ˜ë¡œ ì„¤ì •)
    const memberName = document.querySelector('.form-text strong').textContent.trim();

    // ë””ë²„ê¹…: DOM ìš”ì†Œ í™•ì¸
    console.log('íšŒì›íƒˆí‡´ í˜ì´ì§€ DOM ìš”ì†Œ:', elements);

    // ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ/ìˆ¨ê¹€ í† ê¸€
    function setupPasswordToggle() {
        if (!elements.password || !elements.togglePassword) {
            console.warn('ë¹„ë°€ë²ˆí˜¸ í† ê¸€ ìš”ì†Œê°€ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }

        elements.togglePassword.addEventListener('click', function() {
            const icon = this.querySelector('i');
            if (elements.password.type === 'password') {
                elements.password.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                elements.password.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });
    }

    // ì…ë ¥ í•„ë“œ ìœ íš¨ì„± ê²€ì‚¬ ìƒíƒœ ì´ˆê¸°í™”
    function clearValidationState(inputElement) {
        if (inputElement) {
            inputElement.classList.remove('is-valid', 'is-invalid');
        }
    }

    // í”¼ë“œë°± ë©”ì‹œì§€ ì„¤ì •
    function setFeedback(feedbackElement, message, isValid) {
        if (!feedbackElement) return;
        
        feedbackElement.textContent = message;
        feedbackElement.style.display = message ? 'block' : 'none';
    }

    // ì…ë ¥ í•„ë“œ ìœ íš¨ì„± ìƒíƒœ ì„¤ì •
    function setValidationState(inputElement, isValid) {
        if (!inputElement) return;
        
        if (isValid) {
            inputElement.classList.remove('is-invalid');
            inputElement.classList.add('is-valid');
        } else {
            inputElement.classList.remove('is-valid');
            inputElement.classList.add('is-invalid');
        }
    }

    // ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ (ê¸°ë³¸ ì…ë ¥ ì—¬ë¶€ë§Œ í™•ì¸, ì‹¤ì œ ë¹„ë°€ë²ˆí˜¸ ì¼ì¹˜ëŠ” ì„œë²„ì—ì„œ ì²˜ë¦¬)
    function validatePassword() {
        const value = elements.password.value.trim();
        const isValid = value.length >= 8; // ìµœì†Œ 8ìë¦¬ ì´ìƒ ì…ë ¥ë˜ì–´ì•¼ í•¨
        
        if (value === '') {
            clearValidationState(elements.password);
            setFeedback(elements.passwordFeedback, '', true);
            return false;
        }
        
        setValidationState(elements.password, isValid);
        if (!isValid) {
            setFeedback(elements.passwordFeedback, 'ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.', false);
        } else {
            setFeedback(elements.passwordFeedback, 'ë¹„ë°€ë²ˆí˜¸ í˜•ì‹ì´ ìœ íš¨í•©ë‹ˆë‹¤. (ì‹¤ì œ ì¼ì¹˜ ì—¬ë¶€ëŠ” ì œì¶œ ì‹œ í™•ì¸)', true);
        }
        
        return isValid;
    }
    
    // ì´ë¦„ ê²€ì¦
    function validateName() {
        const value = elements.confirmName.value.trim();
        const isValid = value === memberName;
        
        if (value === '') {
            clearValidationState(elements.confirmName);
            setFeedback(elements.nameValidationFeedback, '', true);
            return false;
        }
        
        setValidationState(elements.confirmName, isValid);
        if (!isValid) {
            setFeedback(elements.nameValidationFeedback, `ì´ë¦„ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 'ì…ë ¥ê°’: ${value}' â‰  'ë“±ë¡ëœ ì´ë¦„: ${memberName}'`, false);
        } else {
            setFeedback(elements.nameValidationFeedback, 'ì´ë¦„ì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.', true);
        }
        
        return isValid;
    }

    // ë™ì˜ ì²´í¬ë°•ìŠ¤ ê²€ì¦
    function validateConfirmDelete() {
        return elements.confirmDelete && elements.confirmDelete.checked;
    }

    // ì œì¶œ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
    function updateSubmitButton() {
        const isPasswordValid = validatePassword();
        const isNameValid = validateName();
        const isConfirmChecked = validateConfirmDelete();
        
        const isFormValid = isPasswordValid && isNameValid && isConfirmChecked;
        
        if (elements.submitButton) {
            elements.submitButton.disabled = !isFormValid;
        }
        
        return isFormValid;
    }

    // íƒˆí‡´ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
    function showConfirmDialog() {
        const confirmMessage = 
            `ìµœì¢… í™•ì¸: ${memberName}ë‹˜ì˜ íšŒì›íƒˆí‡´ë¥¼ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\n` +
            "âš ï¸ ë§ˆì§€ë§‰ ê²½ê³ :\n" +
            "â€¢ ëª¨ë“  ê°œì¸ì •ë³´ê°€ ì˜êµ¬ ì‚­ì œë©ë‹ˆë‹¤\n" +
            "â€¢ ë™ì¼í•œ ì•„ì´ë””ë¡œ ì¬ê°€ì…ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤\n" +
            "â€¢ íƒˆí‡´ í›„ì—ëŠ” ì ˆëŒ€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤\n\n" +
            "ì§€ê¸ˆ íƒˆí‡´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?";
        
        return confirm(confirmMessage);
    }

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
    function setupEventListeners() {
        // ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì´ë²¤íŠ¸
        if (elements.password) {
            elements.password.addEventListener('input', function() {
                updateSubmitButton();
            });
            
            elements.password.addEventListener('blur', function() {
                validatePassword();
                updateSubmitButton();
            });
            
            elements.password.addEventListener('focus', function() {
                clearValidationState(this);
                setFeedback(elements.passwordFeedback, '', true);
            });
        }

        // ì´ë¦„ ì…ë ¥ ì´ë²¤íŠ¸
        if (elements.confirmName) {
            elements.confirmName.addEventListener('input', function() {
                updateSubmitButton();
            });
            
            elements.confirmName.addEventListener('blur', function() {
                validateName();
                updateSubmitButton();
            });
            
            elements.confirmName.addEventListener('focus', function() {
                clearValidationState(this);
                setFeedback(elements.nameValidationFeedback, '', true);
            });
        }
        
        // ë™ì˜ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸
        if (elements.confirmDelete) {
            elements.confirmDelete.addEventListener('change', function() {
                updateSubmitButton();
                
                // ì²´í¬ë°•ìŠ¤ ìœ íš¨ì„± ìƒíƒœ ì—…ë°ì´íŠ¸
                if (this.checked) {
                    this.classList.remove('is-invalid');
                    this.classList.add('is-valid');
                } else {
                    this.classList.remove('is-valid');
                    this.classList.add('is-invalid');
                }
            });
        }

        // í¼ ì œì¶œ ì´ë²¤íŠ¸
        if (elements.form) {
            elements.form.addEventListener('submit', function(event) {
                event.preventDefault(); // ê¸°ë³¸ ì œì¶œ ë°©ì§€
                
                // ìµœì¢… ìœ íš¨ì„± ê²€ì‚¬
                const isFormValid = updateSubmitButton();
                
                if (!isFormValid) {
                    console.log('í¼ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨');
                    
                    // ì²« ë²ˆì§¸ ì˜¤ë¥˜ í•„ë“œì— í¬ì»¤ìŠ¤
                    if (!validatePassword() && elements.password) {
                        elements.password.focus();
                        alert('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    } else if (!validateName() && elements.confirmName) {
                        elements.confirmName.focus();
                        alert(`ì´ë¦„ì„ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”. ë“±ë¡ëœ ì´ë¦„: '${memberName}'`);
                    } else if (!validateConfirmDelete() && elements.confirmDelete) {
                        elements.confirmDelete.focus();
                        elements.confirmDelete.classList.add('is-invalid');
                        alert('íƒˆí‡´ ë™ì˜ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    }
                    
                    return false;
                }
                
                // ìµœì¢… í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
                if (!showConfirmDialog()) {
                    console.log('ì‚¬ìš©ìê°€ íƒˆí‡´ë¥¼ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤.');
                    return false;
                }
                
                // ì œì¶œ ì¤‘ ë²„íŠ¼ ë¹„í™œì„±í™” ë° ì§„í–‰ ìƒíƒœ í‘œì‹œ
                if (elements.submitButton) {
                    elements.submitButton.disabled = true;
                    elements.submitButton.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>íƒˆí‡´ ì²˜ë¦¬ ì¤‘...';
                    elements.submitButton.classList.remove('btn-danger');
                    elements.submitButton.classList.add('btn-warning');
                }
                
                // í˜ì´ì§€ ë˜ëŒì•„ê°€ê¸° ë°©ì§€ (ì¤‘ë³µ ì œì¶œ ë°©ì§€)
                window.onbeforeunload = null;
                
                console.log('íšŒì›íƒˆí‡´ í¼ ì œì¶œ');
                
                // ì‹¤ì œ í¼ ì œì¶œ
                this.submit();
                return true;
            });
        }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ê²½ê³  ë©”ì‹œì§€
    function showInitialWarning() {
        // í˜ì´ì§€ ì§„ì… ì‹œ í•œ ë²ˆë§Œ ê²½ê³ 
        if (!sessionStorage.getItem('deletePageWarningShown')) {
            setTimeout(() => {
                alert('âš ï¸ íšŒì›íƒˆí‡´ í˜ì´ì§€ì…ë‹ˆë‹¤.\nì‹ ì¤‘íˆ ê²°ì •í•´ì£¼ì„¸ìš”.');
                sessionStorage.setItem('deletePageWarningShown', 'true');
            }, 500);
        }
    }

    // í˜ì´ì§€ ë‚˜ê°€ê¸° ì „ ê²½ê³ 
    function setupBeforeUnloadWarning() {
        let formChanged = false;
        let isSubmitting = false; // í¼ ì œì¶œ ìƒíƒœ í”Œë˜ê·¸
        
        // í¼ ë³€ê²½ ê°ì§€
        if (elements.password) {
            elements.password.addEventListener('input', () => {
                formChanged = true;
            });
        }
        
        if (elements.confirmName) {
            elements.confirmName.addEventListener('input', () => {
                formChanged = true;
            });
        }
        
        if (elements.confirmDelete) {
            elements.confirmDelete.addEventListener('change', () => {
                formChanged = true;
            });
        }
        
        // í¼ ì œì¶œ ì‹œ ê²½ê³  ë¹„í™œì„±í™”
        if (elements.form) {
            elements.form.addEventListener('submit', function() {
                isSubmitting = true;
            });
        }
        
        // í˜ì´ì§€ ë‚˜ê°€ê¸° ì „ ê²½ê³  (í¼ ì œì¶œ ì‹œì—ëŠ” ë¹„í™œì„±í™”)
        window.addEventListener('beforeunload', function(event) {
            if (formChanged && !isSubmitting) {
                event.preventDefault();
                event.returnValue = 'ì…ë ¥ëœ ë‚´ìš©ì´ ìˆìŠµë‹ˆë‹¤. ì •ë§ë¡œ í˜ì´ì§€ë¥¼ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?';
                return event.returnValue;
            }
        });
    }

    // ì´ˆê¸°í™” í•¨ìˆ˜
    function init() {
        setupPasswordToggle();
        setupEventListeners();
        updateSubmitButton(); // ì´ˆê¸° ìƒíƒœ ì„¤ì •
        showInitialWarning();
        // setupBeforeUnloadWarning(); // íƒˆí‡´ í˜ì´ì§€ì—ì„œëŠ” ë¹„í™œì„±í™”
        
        console.log('íšŒì›íƒˆí‡´ í˜ì´ì§€ JavaScript ì´ˆê¸°í™” ì™„ë£Œ');
    }

    // ì´ˆê¸°í™” ì‹¤í–‰
    init();
});
````

## File: src/main/resources/static/js/facility-image-main-controller.js
````javascript
/**
 * ì‹œì„¤ ì´ë¯¸ì§€ ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ (Main Controller)
 * ëª¨ë“  ì‹œì„¤ ì´ë¯¸ì§€ ëª¨ë“ˆì„ í†µí•© ê´€ë¦¬í•˜ëŠ” ì¤‘ì•™ ì»¨íŠ¸ë¡¤ëŸ¬
 * 
 * @version 1.0.0
 * @author LightCare Team
 * @requires FacilityImageCore, FacilityImageCropper, FacilityImageUpload, FacilityImageUI, FacilityImageData, FacilityImageSEO, FacilityImageUtils
 */

(function() {
    'use strict';
    
    // ================================================
    // ì˜ì¡´ì„± ì²´í¬
    // ================================================
    
    const requiredModules = [
        'FacilityImageCore',
        'FacilityImageCropper', 
        'FacilityImageUpload',
        'FacilityImageUI',
        'FacilityImageData',
        'FacilityImageSEO',
        'FacilityImageUtils'
    ];
    
    const missingModules = requiredModules.filter(module => !window[module]);
    if (missingModules.length > 0) {
        throw new Error(`í•„ìˆ˜ ëª¨ë“ˆì´ ì—†ìŠµë‹ˆë‹¤: ${missingModules.join(', ')}`);
    }
    
    // ëª¨ë“ˆ ë‹¨ì¶• ì°¸ì¡°
    const Core = window.FacilityImageCore;
    const Cropper = window.FacilityImageCropper;
    const Upload = window.FacilityImageUpload;
    const UI = window.FacilityImageUI;
    const Data = window.FacilityImageData;
    const SEO = window.FacilityImageSEO;
    const Utils = window.FacilityImageUtils;
    
    // ================================================
    // ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤
    // ================================================
    
    if (!window.FacilityImageSystem.Main) {
        window.FacilityImageSystem.Main = {};
    }
    
    // ================================================
    // ìƒìˆ˜ ì •ì˜
    // ================================================
    
    const MAIN_CONSTANTS = {
        MODULE_NAME: 'FacilityImageMainController',
        VERSION: '1.0.0',
        
        WORKFLOW_STEPS: {
            UPLOAD: 1,
            CROP: 2,
            MANAGE: 3
        },
        
        STATES: {
            INITIALIZING: 'initializing',
            READY: 'ready',
            UPLOADING: 'uploading',
            CROPPING: 'cropping',
            PROCESSING: 'processing',
            COMPLETE: 'complete',
            ERROR: 'error'
        }
    };
    
    // ================================================
    // ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒíƒœ
    // ================================================
    
    const mainState = {
        isInitialized: false,
        currentState: MAIN_CONSTANTS.STATES.INITIALIZING,
        currentStep: MAIN_CONSTANTS.WORKFLOW_STEPS.UPLOAD,
        facilityId: null,
        facilityName: '',
        
        // ëª¨ë“ˆ ì´ˆê¸°í™” ìƒíƒœ
        moduleStates: {
            core: false,
            cropper: false,
            upload: false,
            ui: false,
            data: false,
            seo: false,
            utils: false
        },
        
        // ì‘ì—… ë°ì´í„°
        selectedFiles: [],
        processedImages: [],
        currentImageIndex: 0,
        
        // ì„¤ì •
        settings: {
            maxFiles: 5,
            enableSEO: true,
            enableCompression: true,
            autoAdvanceSteps: true
        }
    };
    
    // ================================================
    // ëª¨ë“ˆ ì´ˆê¸°í™” ê´€ë¦¬
    // ================================================
    
    const moduleInitializer = {
        async initializeAllModules(facilityId, facilityName, options = {}) {
            Core.logger.log('ëª¨ë“  ëª¨ë“ˆ ì´ˆê¸°í™” ì‹œì‘');
            Core.logger.log('ì´ˆê¸°í™” ë§¤ê°œë³€ìˆ˜:', { facilityId, facilityName, options });
            
            // UI ëª¨ë“ˆ ìƒíƒœ ë¨¼ì € í™•ì¸
            if (typeof UI.showProgress === 'function') {
                UI.showProgress('initialization', 'ëª¨ë“ˆ ì´ˆê¸°í™” ì¤‘...');
            } else {
                Core.logger.warn('UI.showProgressë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ');
            }
            
            try {
                // 1. Core ëª¨ë“ˆ ì´ˆê¸°í™” (ì´ë¯¸ ì´ˆê¸°í™”ë¨)
                mainState.moduleStates.core = true;
                UI.updateProgress('initialization', 15, 'Core ëª¨ë“ˆ ì¤€ë¹„ë¨');
                
                // 2. Utils ëª¨ë“ˆ ì´ˆê¸°í™”
                mainState.moduleStates.utils = await Utils.initialize();
                UI.updateProgress('initialization', 25, 'Utils ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                
                // 3. UI ëª¨ë“ˆ ì´ˆê¸°í™”
                mainState.moduleStates.ui = await UI.initialize();
                UI.updateProgress('initialization', 40, 'UI ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                
                // 4. Data ëª¨ë“ˆ ì´ˆê¸°í™”
                mainState.moduleStates.data = await Data.initialize(facilityId);
                UI.updateProgress('initialization', 55, 'Data ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                
                // 5. SEO ëª¨ë“ˆ ì´ˆê¸°í™”
                mainState.moduleStates.seo = await SEO.initialize(facilityName);
                UI.updateProgress('initialization', 70, 'SEO ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                
                // 6. Upload ëª¨ë“ˆ ì´ˆê¸°í™”
                const uploadCallbacks = this.getUploadCallbacks();
                mainState.moduleStates.upload = await Upload.initialize({ callbacks: uploadCallbacks });
                UI.updateProgress('initialization', 85, 'Upload ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                
                // 7. Cropper ëª¨ë“ˆ ì´ˆê¸°í™” (ì•ˆì „í•œ ì´ˆê¸°í™”)
                try {
                    mainState.moduleStates.cropper = await Cropper.initialize();
                    Core.logger.success('í¬ë¡­í¼ ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                } catch (cropperError) {
                    Core.logger.error('í¬ë¡­í¼ ëª¨ë“ˆ ì´ˆê¸°í™” ì‹¤íŒ¨:', cropperError);
                    mainState.moduleStates.cropper = false;
                    // í¬ë¡­í¼ ì´ˆê¸°í™” ì‹¤íŒ¨ ì‹œì—ë„ ì‹œìŠ¤í…œì€ ê³„ì† ì‘ë™
                    Core.logger.warn('í¬ë¡­í¼ ì—†ì´ ì‹œìŠ¤í…œì„ ê³„ì† ì§„í–‰í•©ë‹ˆë‹¤.');
                }
                UI.updateProgress('initialization', 100, 'ëª¨ë“  ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                
                // ì§„í–‰ë¥  ìˆ¨ê¹€
                setTimeout(() => {
                    UI.hideProgress('initialization');
                }, 1000);
                
                Core.logger.success('ëª¨ë“  ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                return true;
                
            } catch (error) {
                UI.hideProgress('initialization');
                UI.showNotification('ëª¨ë“ˆ ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', UI.CONSTANTS.NOTIFICATION_TYPES.ERROR);
                Core.logger.error('ëª¨ë“ˆ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                return false;
            }
        },
        
        getUploadCallbacks() {
            return {
                onFileSelect: this.handleFileSelect.bind(this),
                onFileValidate: this.handleFileValidate.bind(this),
                onUploadProgress: this.handleUploadProgress.bind(this),
                onUploadComplete: this.handleUploadComplete.bind(this),
                onError: this.handleUploadError.bind(this)
            };
        },
        
        handleFileSelect(files) {
            Core.logger.log('íŒŒì¼ ì„ íƒë¨:', files.length);
            
            // 1ë‹¨ê³„ì—ì„œëŠ” ì›ë³¸ File ê°ì²´ë§Œ ì‚¬ìš© (ì••ì¶• ì—†ì´)
            const originalFiles = files.map(fileData => fileData.file || fileData);
            mainState.selectedFiles = originalFiles;
            
            // ë©”ì¸ ì´ë¯¸ì§€ ìƒíƒœ ì´ˆê¸°í™” (ì‚¬ìš©ìê°€ ì§ì ‘ ì„ íƒí•˜ë„ë¡ ë³€ê²½)
            mainState.mainImageIndex = -1; // ì´ˆê¸°ì—ëŠ” ë©”ì¸ ì´ë¯¸ì§€ ë¯¸ì„ íƒ
            
            // ì´ë¯¸ì§€ ìˆœì„œ ì„¤ì • UI í‘œì‹œ
            this.showImageOrderInterface(originalFiles);
        },
        
        handleFileValidate(validation) {
            if (validation.errors.length > 0) {
                UI.showNotification(
                    `íŒŒì¼ ê²€ì¦ ì˜¤ë¥˜: ${validation.errors.join(', ')}`,
                    UI.CONSTANTS.NOTIFICATION_TYPES.ERROR
                );
            }
        },
        
        handleUploadProgress(progress) {
            UI.updateProgress('upload', progress.percentage, progress.message);
        },
        
        handleUploadComplete(result) {
            UI.showNotification('ì—…ë¡œë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', UI.CONSTANTS.NOTIFICATION_TYPES.SUCCESS);
            controller.moveToStep(MAIN_CONSTANTS.WORKFLOW_STEPS.MANAGE);
        },
        
        handleUploadError(error) {
            UI.showNotification(`ì—…ë¡œë“œ ì˜¤ë¥˜: ${error.message}`, UI.CONSTANTS.NOTIFICATION_TYPES.ERROR);
        },
        
        // ì´ë¯¸ì§€ ìˆœì„œ ì„¤ì • UI í‘œì‹œ
        showImageOrderInterface(files) {
            try {
                // ë” ìœ ì—°í•œ DOM ìš”ì†Œ ì°¾ê¸°
                let previewContainer = document.getElementById('selectedImagesPreview') || 
                                     document.querySelector('.selected-images-preview, .image-preview-container, .preview-area');
                
                let orderList = document.getElementById('imageOrderList') || 
                              document.querySelector('.image-order-list, .preview-grid, .image-list');
                
                // DOM ìš”ì†Œê°€ ì—†ìœ¼ë©´ ë™ì ìœ¼ë¡œ ìƒì„±
                if (!previewContainer) {
                    previewContainer = this.createPreviewContainer();
                    Core.logger.log('ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ë™ì  ìƒì„±');
                }
                
                if (!orderList) {
                    orderList = this.createOrderList(previewContainer);
                    Core.logger.log('ì´ë¯¸ì§€ ìˆœì„œ ëª©ë¡ ë™ì  ìƒì„±');
                }
                
                const selectedCount = document.getElementById('selectedCount') || 
                                    document.querySelector('.selected-count, .file-count');
                const proceedBtn = document.getElementById('proceedToCropBtn') || 
                                 document.querySelector('.proceed-btn, .next-step-btn');
                const addMoreBtn = document.getElementById('addMoreImagesBtn') || 
                                 document.querySelector('.add-more-btn, .add-images-btn');
                
                if (!previewContainer || !orderList) {
                    Core.logger.warn('í•„ìš”í•œ DOM ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                    Core.logger.log('DOM ìƒíƒœ:', {
                        previewContainer: !!previewContainer,
                        orderList: !!orderList,
                        body: !!document.body
                    });
                    return;
                }
                
                // ì„ íƒëœ íŒŒì¼ ìˆ˜ ì—…ë°ì´íŠ¸
                if (selectedCount) {
                    selectedCount.textContent = files.length;
                }
                
                // ì´ë¯¸ì§€ ëª©ë¡ ìƒì„±
                orderList.innerHTML = '';
                files.forEach((file, index) => {
                    try {
                        const imageItem = this.createImageOrderItem(file, index);
                        orderList.appendChild(imageItem);
                    } catch (itemError) {
                        Core.logger.error(`ì´ë¯¸ì§€ ì•„ì´í…œ ${index} ìƒì„± ì‹¤íŒ¨:`, itemError);
                        // ì˜¤ë¥˜ê°€ ë°œìƒí•´ë„ ê³„ì† ì§„í–‰
                    }
                });
                
                // ë²„íŠ¼ í™œì„±í™”
                if (proceedBtn) {
                    proceedBtn.style.display = 'inline-block';
                    proceedBtn.onclick = () => {
                        controller.moveToStep(MAIN_CONSTANTS.WORKFLOW_STEPS.CROP);
                    };
                }
                
                // ì¤‘ë³µ íŒŒì¼ì„ íƒ ë²„íŠ¼ ì œê±° - ê¸°ë³¸ mainFileSelectBtnë§Œ ì‚¬ìš©
                if (addMoreBtn && files.length < 5) {
                    // ì´ë¯¸ì§€ ì¶”ê°€ ë²„íŠ¼ì€ ìˆ¨ê¹€ ì²˜ë¦¬ (ì¤‘ë³µ íŒŒì¼ì„ íƒ ë°©ì§€)
                    addMoreBtn.style.display = 'none';
                    Core.logger.log('ì¤‘ë³µ íŒŒì¼ì„ íƒ ë²„íŠ¼ ìˆ¨ê¹€ ì²˜ë¦¬');
                }
                
                // ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ í‘œì‹œ
                this.updateMainImageInfo();
                
                // ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ í‘œì‹œ
                previewContainer.style.display = 'block';
                
            } catch (error) {
                Core.logger.error('ì´ë¯¸ì§€ ìˆœì„œ ì¸í„°í˜ì´ìŠ¤ í‘œì‹œ ì‹¤íŒ¨:', error);
                UI.showNotification('ì´ë¯¸ì§€ ëª©ë¡ í‘œì‹œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', UI.CONSTANTS.NOTIFICATION_TYPES.ERROR);
            }
        },
        
        // ì´ë¯¸ì§€ ìˆœì„œ ì•„ì´í…œ ìƒì„±
        createImageOrderItem(file, index) {
            const col = document.createElement('div');
            col.className = 'col-md-6 col-lg-4 image-order-item';
            
            // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° URL ìƒì„± (1ë‹¨ê³„ëŠ” ì›ë³¸ íŒŒì¼ë§Œ)
            let imageUrl;
            try {
                if (file instanceof File) {
                    imageUrl = URL.createObjectURL(file);
                } else {
                    throw new Error('File ê°ì²´ê°€ ì•„ë‹˜');
                }
            } catch (error) {
                console.warn('ì´ë¯¸ì§€ URL ìƒì„± ì‹¤íŒ¨:', error, file);
                imageUrl = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjOTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2U8L3RleHQ+PC9zdmc+';
            }
            
            const isMainImage = mainState.mainImageIndex >= 0 && index === mainState.mainImageIndex;
            
            col.innerHTML = `
                <div class="card h-100 ${isMainImage ? 'border-warning border-3' : 'border-secondary'}" style="cursor: pointer; transition: all 0.3s ease;">
                    <div class="position-relative">
                        <img src="${imageUrl}" class="card-img-top" style="height: 150px; object-fit: cover;" alt="ì´ë¯¸ì§€ ${index + 1}">
                        
                        <!-- ë©”ì¸ ì´ë¯¸ì§€ ì„ íƒ ë²„íŠ¼ -->
                        <div class="position-absolute top-0 start-0 p-2">
                            <button type="button" class="btn btn-sm ${isMainImage ? 'btn-warning' : 'btn-outline-warning'}" 
                                    onclick="event.stopPropagation(); selectMainImage(${index})" 
                                    title="${isMainImage ? 'ë©”ì¸ ì´ë¯¸ì§€ í•´ì œ' : 'ë©”ì¸ ì´ë¯¸ì§€ë¡œ ì„¤ì •'}">
                                <i class="fas fa-star"></i>
                            </button>
                        </div>
                        
                        <!-- ìˆœì„œ í‘œì‹œ -->
                        <div class="position-absolute top-0 end-0 p-2">
                            <span class="badge ${isMainImage ? 'bg-warning text-dark' : 'bg-primary'} order-badge">${index + 1}</span>
                            ${isMainImage ? '<small class="badge bg-warning text-dark mt-1 d-block">ë©”ì¸</small>' : ''}
                        </div>
                        
                        <!-- ì‚­ì œ ë²„íŠ¼ -->
                        <div class="position-absolute bottom-0 end-0 p-2">
                            <button type="button" class="btn btn-sm btn-danger" onclick="event.stopPropagation(); removeImageFromOrder(${index})">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body p-2">
                        <h6 class="card-title text-truncate mb-1" style="font-size: 0.875rem;">
                            ${file.name || `ì´ë¯¸ì§€ ${index + 1}`}
                        </h6>
                        <small class="text-muted d-block">${this.formatFileSize(file.size || 0)}</small>
                        <div class="mt-2">
                            <div class="btn-group w-100" role="group">
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="event.stopPropagation(); moveImageUp(${index})" ${index === 0 ? 'disabled' : ''}>
                                    <i class="fas fa-chevron-up"></i>
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="event.stopPropagation(); moveImageDown(${index})" ${index === mainState.selectedFiles.length - 1 ? 'disabled' : ''}>
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return col;
        },
        
        // ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸
        updateMainImageInfo() {
            const mainImageInfo = document.getElementById('mainImageInfo');
            const mainImageText = document.getElementById('mainImageText');
            
            if (mainImageInfo && mainImageText && mainState.selectedFiles.length > 0) {
                if (mainState.mainImageIndex >= 0 && mainState.mainImageIndex < mainState.selectedFiles.length) {
                    const mainFile = mainState.selectedFiles[mainState.mainImageIndex];
                    mainImageText.textContent = `ë©”ì¸ ì´ë¯¸ì§€: ${mainFile.name || `ì´ë¯¸ì§€ ${mainState.mainImageIndex + 1}`}`;
                    mainImageInfo.style.display = 'block';
                } else {
                    mainImageText.textContent = 'ë©”ì¸ ì´ë¯¸ì§€: ì„ íƒí•˜ì§€ ì•ŠìŒ (ê° ì´ë¯¸ì§€ì—ì„œ ë³„ ì•„ì´ì½˜ í´ë¦­í•˜ì—¬ ì„ íƒ)';
                    mainImageInfo.style.display = 'block';
                }
            }
        },
        
        // íŒŒì¼ í¬ê¸° í¬ë§·
        formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        },
        
        // ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ë™ì  ìƒì„±
        createPreviewContainer() {
            const container = document.createElement('div');
            container.id = 'selectedImagesPreview';
            container.className = 'selected-images-preview mt-4';
            container.style.display = 'block';
            
            // ì ì ˆí•œ ìœ„ì¹˜ì— ì‚½ì…
            const uploadSection = document.getElementById('uploadSection') || 
                                document.querySelector('.upload-section, .content-wrapper, main');
            if (uploadSection) {
                uploadSection.appendChild(container);
            } else {
                document.body.appendChild(container);
            }
            
            return container;
        },
        
        // ì´ë¯¸ì§€ ìˆœì„œ ëª©ë¡ ë™ì  ìƒì„±
        createOrderList(parentContainer) {
            const orderListHtml = `
                <div class="row mb-3">
                    <div class="col-12">
                        <h5>ì„ íƒëœ ì´ë¯¸ì§€ <span id="selectedCount" class="badge bg-primary">0</span></h5>
                        <div id="mainImageInfo" class="alert alert-info" style="display: none;">
                            <i class="fas fa-star text-warning me-2"></i>
                            <span id="mainImageText">ë©”ì¸ ì´ë¯¸ì§€: </span>
                        </div>
                    </div>
                </div>
                <div id="imageOrderList" class="row g-3"></div>
                <div class="row mt-3">
                    <div class="col-12 text-center">
                        <button type="button" id="addMoreImagesBtn" class="btn btn-outline-primary me-2" style="display: none;">
                            <i class="fas fa-plus me-1"></i>ì´ë¯¸ì§€ ì¶”ê°€
                        </button>
                        <button type="button" id="proceedToCropBtn" class="btn btn-success" style="display: none;">
                            <i class="fas fa-arrow-right me-1"></i>ë‹¤ìŒ ë‹¨ê³„
                        </button>
                    </div>
                </div>
            `;
            
            parentContainer.innerHTML = orderListHtml;
            
            return document.getElementById('imageOrderList');
        }
    };
    
    // ================================================
    // ì›Œí¬í”Œë¡œìš° ê´€ë¦¬
    // ================================================
    
    const workflowManager = {
        async moveToStep(step) {
            if (step === mainState.currentStep) return;
            
            // ğŸ”¥ ìƒˆì°½ ë°©ì‹ ê°•ì œ: 2ë‹¨ê³„ ì´ë™ ì°¨ë‹¨
            if (step === 2) {
                Core.logger.log(`ğŸš« 2ë‹¨ê³„ ì´ë™ ì°¨ë‹¨ - ìƒˆì°½ ë°©ì‹ ì‚¬ìš©`);
                
                // ì‹œì„¤ ID ê°€ì ¸ì˜¤ê¸°
                const facilityId = document.querySelector('meta[name="facility-id"]')?.content || '1';
                
                // ğŸ”¥ 1ë‹¨ê³„ ì••ì¶• í›„ ì„¸ì…˜ ì €ì¥ (ì´ ì½”ë“œëŠ” edit.htmlì˜ ë®ì–´ì“°ê¸°ë¡œ ëŒ€ì²´ë¨)
                Core.logger.log('âš ï¸ ì´ ì½”ë“œëŠ” edit.htmlì˜ ì••ì¶• ëª¨ë“ˆë¡œ ëŒ€ì²´ë˜ì—ˆìŠµë‹ˆë‹¤.');
                
                // í´ë°±: ì••ì¶• ì—†ì´ ì§ì ‘ ì „ì†¡
                if (window.selectedImageFiles && window.selectedImageFiles.length > 0) {
                    window.transferSelectedFiles = window.selectedImageFiles;
                    Core.logger.log('âœ… í´ë°±: ì›ë³¸ íŒŒì¼ë¡œ í¬ë¡­ í˜ì´ì§€ ì´ë™');
                    window.location.href = `/facility/crop-images/${facilityId}`;
                } else {
                    Core.logger.log('âš ï¸ ì„ íƒëœ íŒŒì¼ì´ ì—†ì–´ ë¹ˆ í¬ë¡­ í˜ì´ì§€ë¡œ ì´ë™');
                    window.location.href = `/facility/crop-images/${facilityId}`;
                }
                
                return; // ì—¬ê¸°ì„œ í•¨ìˆ˜ ì¢…ë£Œ
            }
            
            Core.logger.log(`ë‹¨ê³„ ì´ë™: ${mainState.currentStep} â†’ ${step}`);
            
            try {
                // ì´ì „ ë‹¨ê³„ ì •ë¦¬
                await this.cleanupCurrentStep();
                
                // ìƒˆ ë‹¨ê³„ ì„¤ì •
                mainState.currentStep = step;
                UI.updateStep(step);
                
                // ìƒˆ ë‹¨ê³„ ì´ˆê¸°í™”
                await this.initializeStep(step);
                
                Core.emit(Core.CONSTANTS.EVENTS.STEP_CHANGED, {
                    step: step,
                    previousStep: mainState.currentStep
                });
                
            } catch (error) {
                Core.logger.error('ë‹¨ê³„ ì´ë™ ì‹¤íŒ¨:', error);
                UI.showNotification('ë‹¨ê³„ ì´ë™ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', UI.CONSTANTS.NOTIFICATION_TYPES.ERROR);
            }
        },
        
        async cleanupCurrentStep() {
            switch (mainState.currentStep) {
                case MAIN_CONSTANTS.WORKFLOW_STEPS.UPLOAD:
                    // ì—…ë¡œë“œ ë‹¨ê³„ ì •ë¦¬
                    break;
                case MAIN_CONSTANTS.WORKFLOW_STEPS.CROP:
                    // í¬ë¡­ ë‹¨ê³„ ì •ë¦¬
                    if (mainState.moduleStates.cropper) {
                        // í˜„ì¬ í¬ë¡­ ì €ì¥
                        await this.savePendingCrops();
                    }
                    break;
                case MAIN_CONSTANTS.WORKFLOW_STEPS.MANAGE:
                    // ê´€ë¦¬ ë‹¨ê³„ ì •ë¦¬
                    break;
            }
        },
        
        async initializeStep(step) {
            switch (step) {
                case MAIN_CONSTANTS.WORKFLOW_STEPS.UPLOAD:
                    await this.initializeUploadStep();
                    break;
                case MAIN_CONSTANTS.WORKFLOW_STEPS.CROP:
                    await this.initializeCropStep();
                    break;
                case MAIN_CONSTANTS.WORKFLOW_STEPS.MANAGE:
                    await this.initializeManageStep();
                    break;
            }
        },
        
        async initializeUploadStep() {
            UI.show('#uploadSection');
            UI.hide('#cropSection');
            UI.hide('#manageSection');
            
            mainState.currentState = MAIN_CONSTANTS.STATES.READY;
        },
        
        async initializeCropStep() {
            if (mainState.selectedFiles.length === 0) {
                UI.showNotification('ë¨¼ì € ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.', UI.CONSTANTS.NOTIFICATION_TYPES.WARNING);
                await this.moveToStep(MAIN_CONSTANTS.WORKFLOW_STEPS.UPLOAD);
                return;
            }
            
            Core.logger.log('í¬ë¡­ ë‹¨ê³„ ì´ˆê¸°í™” ì‹œì‘');
            
            // 1. ë‹¨ê³„ë³„ UI í‘œì‹œ/ìˆ¨ê¹€ (ë¨¼ì € ì²˜ë¦¬)
            const uploadSection = document.getElementById('uploadSection');
            const cropSection = document.getElementById('cropSection');
            const manageSection = document.getElementById('manageSection');
            
            if (uploadSection) {
                uploadSection.style.display = 'none';
                Core.logger.log('ì—…ë¡œë“œ ì„¹ì…˜ ìˆ¨ê¹€');
            }
            if (cropSection) {
                cropSection.style.display = 'block';
                cropSection.style.visibility = 'visible';
                Core.logger.log('í¬ë¡­ ì„¹ì…˜ í‘œì‹œ');
            } else {
                Core.logger.error('í¬ë¡­ ì„¹ì…˜ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                // í¬ë¡­ ì„¹ì…˜ì´ ì—†ìœ¼ë©´ ë™ì  ìƒì„±
                this.createCropSection();
            }
            if (manageSection) {
                manageSection.style.display = 'none';
            }
            
            // 2. í¬ë¡­í¼ ëª¨ë“ˆ ìƒíƒœ í™•ì¸ ë° ê°•ì œ ì´ˆê¸°í™”
            if (!mainState.moduleStates.cropper) {
                Core.logger.warn('í¬ë¡­í¼ ëª¨ë“ˆì´ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê°•ì œ ì´ˆê¸°í™”ë¥¼ ì‹œë„í•©ë‹ˆë‹¤.');
                try {
                    await Cropper.initialize();
                    mainState.moduleStates.cropper = true;
                    Core.logger.success('í¬ë¡­í¼ ëª¨ë“ˆ ê°•ì œ ì´ˆê¸°í™” ì„±ê³µ');
                } catch (error) {
                    Core.logger.error('í¬ë¡­í¼ ëª¨ë“ˆ ê°•ì œ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                    UI.showNotification('í¬ë¡­ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ì–´ ìµœì¢… ë‹¨ê³„ë¡œ ì´ë™í•©ë‹ˆë‹¤.', UI.CONSTANTS.NOTIFICATION_TYPES.WARNING);
                    await this.moveToStep(MAIN_CONSTANTS.WORKFLOW_STEPS.MANAGE);
                    return;
                }
            }
            
            // 3. íŒŒì¼ ì„ íƒ ì´ë²¤íŠ¸ ì„ì‹œ ì°¨ë‹¨ (2ë‹¨ê³„ ì§„ì… ì‹œ íŒŒì¼ ì„ íƒì°½ ë°©ì§€)
            const fileInput = document.getElementById('imageInput');
            if (fileInput) {
                fileInput.style.pointerEvents = 'none';
                setTimeout(() => {
                    if (fileInput) fileInput.style.pointerEvents = 'auto';
                }, 1000); // 1ì´ˆ í›„ ë‹¤ì‹œ í™œì„±í™”
            }
            
            // 4. ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ë¡œë“œ (500ms ì§€ì—°ìœ¼ë¡œ DOM ì•ˆì •í™” ëŒ€ê¸°)
            setTimeout(async () => {
                if (mainState.selectedFiles.length > 0) {
                    await this.loadImageForCrop(0);
                }
            }, 500);
            
            mainState.currentState = MAIN_CONSTANTS.STATES.CROPPING;
            Core.logger.success('í¬ë¡­ ë‹¨ê³„ ì´ˆê¸°í™” ì™„ë£Œ');
        },
        
        // í¬ë¡­ ì„¹ì…˜ ë™ì  ìƒì„± (HTMLì— ì—†ëŠ” ê²½ìš°)
        createCropSection() {
            const mainContainer = document.querySelector('.upload-section') || document.querySelector('main .container');
            if (!mainContainer) {
                Core.logger.error('ë©”ì¸ ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const cropSection = document.createElement('div');
            cropSection.id = 'cropSection';
            cropSection.className = 'crop-section';
            cropSection.style.display = 'none';
            
            cropSection.innerHTML = `
                <div class="compression-header mb-3">
                    <h6 class="text-success">
                        <i class="fas fa-crop-alt me-2"></i>ì´ë¯¸ì§€ í¬ë¡­ ë° ê³ ì„±ëŠ¥ ì••ì¶•
                    </h6>
                    <div class="compression-progress">
                        <small class="text-muted">í˜„ì¬ ì´ë¯¸ì§€: <span id="currentImageInfo">1 / 1</span></small>
                    </div>
                </div>
                
                <!-- í¬ë¡­ ì˜ì—­ -->
                <div id="cropContainer" class="crop-container mb-3">
                    <div class="crop-image-container">
                        <img id="cropImage" style="max-width: 100%; max-height: 500px; display: block; margin: 0 auto;">
                        <canvas id="cropCanvas" style="display: none;"></canvas>
                    </div>
                </div>
                
                <!-- í¬ë¡­ ì»¨íŠ¸ë¡¤ -->
                <div id="cropControls" class="crop-controls mb-3">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="crop-navigation d-flex align-items-center">
                                <button type="button" id="prevImage" class="btn btn-sm btn-outline-secondary me-2">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button type="button" id="nextImage" class="btn btn-sm btn-outline-secondary me-3">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                                <button type="button" id="resetCrop" class="btn btn-sm btn-outline-warning me-2">
                                    <i class="fas fa-undo me-1"></i>ë¦¬ì…‹
                                </button>
                                <button type="button" id="autoFit" class="btn btn-sm btn-outline-info">
                                    <i class="fas fa-expand-arrows-alt me-1"></i>16:9 ìë™ë§ì¶¤
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 text-end">
                            <button type="button" id="completeImageProcessing" class="btn btn-success">
                                <i class="fas fa-save me-1"></i>ì••ì¶• ì™„ë£Œ
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            mainContainer.appendChild(cropSection);
            Core.logger.log('í¬ë¡­ ì„¹ì…˜ ë™ì  ìƒì„± ì™„ë£Œ');
        },
        
        async initializeManageStep() {
            UI.hide('#uploadSection');
            UI.hide('#cropSection');
            UI.show('#manageSection');
            
            // ìµœì¢… ì—…ë¡œë“œ ì¤€ë¹„
            await this.prepareForFinalUpload();
            
            mainState.currentState = MAIN_CONSTANTS.STATES.PROCESSING;
        },
        
        async loadImageForCrop(index) {
            if (index >= mainState.selectedFiles.length) return;
            
            // í¬ë¡­í¼ ëª¨ë“ˆ ìƒíƒœ ì¬í™•ì¸
            if (!mainState.moduleStates.cropper) {
                Core.logger.warn('í¬ë¡­í¼ ëª¨ë“ˆì´ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.');
                UI.showNotification('í¬ë¡­ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', UI.CONSTANTS.NOTIFICATION_TYPES.WARNING);
                return;
            }
            
            mainState.currentImageIndex = index;
            const file = mainState.selectedFiles[index];
            
            try {
                Core.logger.log('í¬ë¡­ì„ ìœ„í•œ ì´ë¯¸ì§€ ë¡œë“œ:', { index, file: file.name, type: file.type });
                
                // í¬ë¡­ ì´ë¯¸ì§€ ìš”ì†Œ ê°•ì œ í™•ì¸ ë° ìƒì„±
                let cropImage = document.getElementById('cropImage');
                if (!cropImage) {
                    Core.logger.warn('cropImage ìš”ì†Œê°€ ì—†ìŠµë‹ˆë‹¤. ë™ì  ìƒì„± ì‹œë„');
                    cropImage = this.createCropImageElement();
                }
                
                // í¬ë¡­í¼ ëª¨ë“ˆ ìƒíƒœ í™•ì¸ í›„ ë¡œë“œ
                if (Cropper && typeof Cropper.loadImage === 'function') {
                    await Cropper.loadImage(file, index);
                    
                    // í¬ë¡­ ì´ë¯¸ì§€ê°€ ì œëŒ€ë¡œ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
                    setTimeout(() => {
                        const cropImageCheck = document.getElementById('cropImage');
                        if (cropImageCheck && cropImageCheck.src) {
                            Core.logger.success('í¬ë¡­ ì´ë¯¸ì§€ ë¡œë“œ í™•ì¸ë¨:', cropImageCheck.src.substring(0, 50) + '...');
                        } else {
                            Core.logger.error('í¬ë¡­ ì´ë¯¸ì§€ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                            // ì§ì ‘ ì´ë¯¸ì§€ ì†ŒìŠ¤ ì„¤ì • ì‹œë„
                            this.fallbackImageLoad(file, cropImageCheck);
                        }
                    }, 500);
                    
                    // í¬ë¡­ ë„¤ë¹„ê²Œì´ì…˜ ì—…ë°ì´íŠ¸
                    this.updateCropNavigation();
                    
                    // 2ë‹¨ê³„ ì••ì¶• ì„¤ì • ì´ˆê¸°í™”
                    this.initializeCompressionSettings();
                    
                    // SEO ê¸°ëŠ¥ ì´ˆê¸°í™”
                    this.initializeSEOFeatures(file, index);
                    
                    // ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸
                    this.updateImageInfo(file, index);
                } else {
                    throw new Error('í¬ë¡­í¼ ëª¨ë“ˆì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
            } catch (error) {
                Core.logger.error('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:', error);
                UI.showNotification('ì´ë¯¸ì§€ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', UI.CONSTANTS.NOTIFICATION_TYPES.ERROR);
                
                // í¬ë¡­í¼ ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ ë¡œë“œ ì‹œë„
                this.fallbackImageLoad(file, document.getElementById('cropImage'));
            }
        },
        
        // í¬ë¡­ ì´ë¯¸ì§€ ìš”ì†Œ ë™ì  ìƒì„±
        createCropImageElement() {
            const cropContainer = document.querySelector('.crop-image-container') || document.getElementById('cropContainer');
            if (!cropContainer) {
                Core.logger.error('í¬ë¡­ ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return null;
            }
            
            let cropImage = document.createElement('img');
            cropImage.id = 'cropImage';
            cropImage.style.cssText = 'max-width: 100%; max-height: 500px; display: block; margin: 0 auto;';
            
            cropContainer.appendChild(cropImage);
            Core.logger.log('cropImage ìš”ì†Œ ë™ì  ìƒì„± ì™„ë£Œ');
            
            return cropImage;
        },
        
        // ëŒ€ì²´ ì´ë¯¸ì§€ ë¡œë“œ (í¬ë¡­í¼ ì‹¤íŒ¨ ì‹œ)
        fallbackImageLoad(file, imageElement) {
            if (!imageElement || !file) return;
            
            Core.logger.warn('ëŒ€ì²´ ì´ë¯¸ì§€ ë¡œë“œ ì‹œë„:', file.name);
            
            const reader = new FileReader();
            reader.onload = function(e) {
                imageElement.src = e.target.result;
                imageElement.style.display = 'block';
                Core.logger.success('ëŒ€ì²´ ì´ë¯¸ì§€ ë¡œë“œ ì„±ê³µ');
            };
            reader.onerror = function() {
                Core.logger.error('ëŒ€ì²´ ì´ë¯¸ì§€ ë¡œë“œë„ ì‹¤íŒ¨');
                imageElement.style.display = 'none';
            };
            reader.readAsDataURL(file);
        },
        
        // 2ë‹¨ê³„ ì••ì¶• ì„¤ì • ì´ˆê¸°í™”
        initializeCompressionSettings() {
            const compressionContainer = document.getElementById('compressionSettings');
            if (!compressionContainer) return;
            
            // ì••ì¶• ì„¤ì • UI í‘œì‹œ
            compressionContainer.style.display = 'block';
            
            // ì••ì¶• í’ˆì§ˆ ìŠ¬ë¼ì´ë” ì´ˆê¸°í™”
            const qualitySlider = document.getElementById('compressionQuality');
            const qualityValue = document.getElementById('qualityValue');
            
            if (qualitySlider && qualityValue) {
                qualitySlider.value = 85;
                qualityValue.textContent = '85%';
                
                qualitySlider.addEventListener('input', (e) => {
                    qualityValue.textContent = e.target.value + '%';
                });
            }
        },
        
        // SEO ê¸°ëŠ¥ ì´ˆê¸°í™” (ì™„ì „ ê¸°ëŠ¥)
        initializeSEOFeatures(file, index) {
            const seoContainer = document.getElementById('seoSettings');
            if (!seoContainer) return;
            
            seoContainer.style.display = 'block';
            
            // íŒŒì¼ëª… ì˜ë¬¸ ë³€í™˜ (ì•ˆì „í•œ ë°©ì‹)
            const originalName = file.name.split('.')[0];
            let englishName;
            
            try {
                // SEO ëª¨ë“ˆì´ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ ê¸°ë³¸ ë³€í™˜
                if (window.FacilityImageSystem?.SEO?.cleanFileName) {
                    englishName = window.FacilityImageSystem.SEO.cleanFileName(originalName);
                } else {
                    englishName = this.simpleCleanFileName(originalName);
                }
            } catch (error) {
                englishName = this.simpleCleanFileName(originalName);
            }
            
            const filenameInput = document.getElementById('englishFilename');
            if (filenameInput) {
                filenameInput.value = englishName || `facility-image-${index + 1}`;
            }
            
            // Alt í…ìŠ¤íŠ¸ ì„¤ì •
            const altTextInput = document.getElementById('altText');
            if (altTextInput) {
                altTextInput.value = `${mainState.facilityName || 'ì‹œì„¤'} ì‹œì„¤ ì´ë¯¸ì§€ ${index + 1}`;
            }
            
            // í‚¤ì›Œë“œ ëª©ë¡ ì´ˆê¸°í™”
            this.initializeKeywordList();
        },
        
        // ê°„ë‹¨í•œ íŒŒì¼ëª… ì •ë¦¬ (ë°±ì—…ìš©)
        simpleCleanFileName(fileName) {
            if (!fileName || typeof fileName !== 'string') {
                return 'facility-image';
            }
            
            // í•œê¸€ì„ ì˜ì–´ë¡œ ê¸°ë³¸ ë³€í™˜
            const koreanToEnglish = {
                'ì‹œì„¤': 'facility',
                'ìš”ì–‘ì›': 'nursing-home',
                'ë¡œë¹„': 'lobby',
                'ë³µë„': 'corridor',
                'ê±°ì‹¤': 'living-room',
                'ì¹¨ì‹¤': 'bedroom',
                'ì‹ë‹¹': 'dining-room',
                'ì •ì›': 'garden'
            };
            
            let result = fileName.toLowerCase();
            for (const [korean, english] of Object.entries(koreanToEnglish)) {
                result = result.replace(new RegExp(korean, 'g'), english);
            }
            
            // íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° ëŒ€ì‹œë¡œ ë³€í™˜
            result = result.replace(/[^a-zA-Z0-9]/g, '-').replace(/-+/g, '-').replace(/^-|-$/g, '');
            
            return result || 'facility-image';
        },
        
        // í‚¤ì›Œë“œ ëª©ë¡ ì´ˆê¸°í™”
        initializeKeywordList() {
            const keywordContainer = document.getElementById('keywordList');
            if (!keywordContainer) return;
            
            const defaultKeywords = [
                'ì‹œì„¤', 'ìš”ì–‘ì›', 'ë…¸ì¸ìš”ì–‘', 'ë³µì§€ì‹œì„¤', 'ë°ì´ì¼€ì–´',
                'ê°„ë³‘', 'ê±´ê°•ê´€ë¦¬', 'ì˜ë£Œì„œë¹„ìŠ¤', 'ì¬í™œì¹˜ë£Œ', 'ìš”ì–‘ë³´í˜¸'
            ];
            
            keywordContainer.innerHTML = '';
            
            defaultKeywords.forEach(keyword => {
                const badge = document.createElement('span');
                badge.className = 'badge bg-outline-secondary me-1 mb-1 keyword-badge';
                badge.style.cursor = 'pointer';
                badge.textContent = keyword;
                badge.onclick = () => this.toggleKeyword(badge, keyword);
                keywordContainer.appendChild(badge);
            });
        },
        
        // í‚¤ì›Œë“œ í† ê¸€
        toggleKeyword(badge, keyword) {
            if (badge.classList.contains('bg-primary')) {
                badge.classList.remove('bg-primary');
                badge.classList.add('bg-outline-secondary');
            } else {
                badge.classList.remove('bg-outline-secondary');
                badge.classList.add('bg-primary');
            }
            
            // ì„ íƒëœ í‚¤ì›Œë“œ ì—…ë°ì´íŠ¸
            this.updateSelectedKeywords();
        },
        
        // ì„ íƒëœ í‚¤ì›Œë“œ ì—…ë°ì´íŠ¸
        updateSelectedKeywords() {
            const selectedKeywords = [];
            const keywordBadges = document.querySelectorAll('.keyword-badge.bg-primary');
            
            keywordBadges.forEach(badge => {
                selectedKeywords.push(badge.textContent);
            });
            
            // í˜„ì¬ íŒŒì¼ì— í‚¤ì›Œë“œ ì €ì¥
            const currentFile = mainState.selectedFiles[mainState.currentImageIndex];
            if (currentFile) {
                currentFile.keywords = selectedKeywords;
            }
        },
        
        // ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸
        updateImageInfo(file, index) {
            const imageFileName = document.getElementById('imageFileName');
            const imageDimensions = document.getElementById('imageDimensions');
            
            if (imageFileName) {
                imageFileName.textContent = file.name || `ì´ë¯¸ì§€ ${index + 1}`;
                imageFileName.title = file.name || `ì´ë¯¸ì§€ ${index + 1}`;
            }
            
            // ì´ë¯¸ì§€ í¬ê¸° ì •ë³´ ì—…ë°ì´íŠ¸ (íŒŒì¼ ë¡œë“œ í›„)
            if (imageDimensions && file instanceof File) {
                const img = new Image();
                img.onload = () => {
                    imageDimensions.textContent = `${img.width} Ã— ${img.height}`;
                };
                img.src = URL.createObjectURL(file);
            }
        },
        
        updateCropNavigation() {
            const current = mainState.currentImageIndex + 1;
            const total = mainState.selectedFiles.length;
            
            // ë„¤ë¹„ê²Œì´ì…˜ UI ì—…ë°ì´íŠ¸
            const navInfo = document.querySelector('.crop-navigation-info');
            if (navInfo) {
                navInfo.textContent = `${current} / ${total}`;
            }
            
            // ì´ì „/ë‹¤ìŒ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            const prevBtn = document.getElementById('prevImageBtn');
            const nextBtn = document.getElementById('nextImageBtn');
            
            if (prevBtn) {
                prevBtn.disabled = (current === 1);
            }
            
            if (nextBtn) {
                if (current === total) {
                    nextBtn.innerHTML = '<i class="fas fa-check me-1"></i>ì™„ë£Œ';
                    nextBtn.className = 'btn btn-success';
                } else {
                    nextBtn.innerHTML = '<i class="fas fa-arrow-right me-1"></i>ë‹¤ìŒ';
                    nextBtn.className = 'btn btn-primary';
                }
            }
        },
        
        async savePendingCrops() {
            // í˜„ì¬ í¬ë¡­ ë°ì´í„° ì €ì¥
            const cropData = Cropper.getCropData();
            if (cropData) {
                const currentFile = mainState.selectedFiles[mainState.currentImageIndex];
                if (currentFile) {
                    currentFile.cropData = cropData;
                    currentFile.croppedBlob = await Cropper.getCroppedBlob();
                }
            }
        },
        
        async prepareForFinalUpload() {
            UI.showProgress('final-upload', 'ìµœì¢… ì—…ë¡œë“œ ì¤€ë¹„ ì¤‘...');
            
            try {
                // ëª¨ë“  íŒŒì¼ì˜ í¬ë¡­ ë°ì´í„° í™•ì¸
                for (let i = 0; i < mainState.selectedFiles.length; i++) {
                    const fileData = mainState.selectedFiles[i];
                    
                    if (!fileData.croppedBlob) {
                        // í¬ë¡­ë˜ì§€ ì•Šì€ íŒŒì¼ì€ ì›ë³¸ ì‚¬ìš©
                        fileData.croppedBlob = fileData.compressedBlob || fileData.file;
                    }
                    
                    UI.updateProgress('final-upload', (i + 1) / mainState.selectedFiles.length * 100, 
                        `íŒŒì¼ ì¤€ë¹„ ì¤‘... ${i + 1}/${mainState.selectedFiles.length}`);
                }
                
                UI.hideProgress('final-upload');
                mainState.processedImages = mainState.selectedFiles;
                
            } catch (error) {
                UI.hideProgress('final-upload');
                Core.logger.error('ìµœì¢… ì—…ë¡œë“œ ì¤€ë¹„ ì‹¤íŒ¨:', error);
                throw error;
            }
        },
        
        // í¬ë¡­ ë‹¨ê³„ì—ì„œ ì••ì¶• ì ìš© (ì•ˆì „í•œ ì™„ì „ ê¸°ëŠ¥)
        async applyCompressionToCrop() {
            const currentFile = mainState.selectedFiles[mainState.currentImageIndex];
            if (!currentFile || !window.FacilityImageCropper) return;
            
            try {
                const qualitySlider = document.getElementById('compressionQuality');
                const quality = qualitySlider ? parseInt(qualitySlider.value) / 100 : 0.85;
                
                // í¬ë¡­ëœ ì´ë¯¸ì§€ ì–»ê¸°
                const croppedBlob = await window.FacilityImageCropper.getCroppedBlob({
                    quality: quality,
                    format: 'image/jpeg',
                    maxWidth: 1920,
                    maxHeight: 1080
                });
                
                if (croppedBlob) {
                    let finalBlob = croppedBlob;
                    
                    // ì••ì¶• ëª¨ë“ˆì´ ìˆìœ¼ë©´ ì¶”ê°€ ì••ì¶• ì ìš©
                    try {
                        if (window.FacilityImageUpload?.compressImage) {
                            finalBlob = await window.FacilityImageUpload.compressImage(croppedBlob, {
                                quality: quality,
                                maxWidth: 1920,
                                maxHeight: 1080
                            });
                        }
                    } catch (compressError) {
                        Core.logger.warn('ì¶”ê°€ ì••ì¶• ì‹¤íŒ¨, í¬ë¡­ëœ ì´ë¯¸ì§€ ì‚¬ìš©:', compressError);
                        finalBlob = croppedBlob;
                    }
                    
                    // íŒŒì¼ì— ì €ì¥
                    currentFile.croppedBlob = finalBlob;
                    currentFile.compressed = true;
                    
                    // ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
                    this.updateRealTimePreview(finalBlob);
                    
                    Core.logger.log('í¬ë¡­ ë° ì••ì¶• ì™„ë£Œ:', {
                        original: currentFile.size,
                        final: finalBlob.size,
                        reduction: Math.round((1 - finalBlob.size / currentFile.size) * 100) + '%'
                    });
                }
                
            } catch (error) {
                Core.logger.error('ì••ì¶• ì ìš© ì‹¤íŒ¨:', error);
                UI.showNotification('ì´ë¯¸ì§€ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', UI.CONSTANTS.NOTIFICATION_TYPES.WARNING);
            }
        },
        
        // ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
        updateRealTimePreview(blob) {
            try {
                const previewImg = document.getElementById('cropPreviewImage') || 
                                 document.querySelector('.crop-preview-image, .preview-img');
                
                if (previewImg && blob) {
                    const url = URL.createObjectURL(blob);
                    previewImg.src = url;
                    previewImg.style.display = 'block';
                    
                    // ì´ì „ URL ì •ë¦¬
                    if (previewImg.dataset.previousUrl) {
                        URL.revokeObjectURL(previewImg.dataset.previousUrl);
                    }
                    previewImg.dataset.previousUrl = url;
                    
                    Core.logger.log('ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ ì™„ë£Œ');
                } else {
                    Core.logger.warn('ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ ìš”ì†Œ ë˜ëŠ” blobì„ ì°¾ì„ ìˆ˜ ì—†ìŒ');
                }
            } catch (error) {
                Core.logger.error('ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
            }
        },
        
        // ë‹¤ìŒ ì´ë¯¸ì§€ë¡œ ì´ë™
        async proceedToNextImage() {
            // í˜„ì¬ ì„¤ì • ì €ì¥
            await this.saveCurrentImageSettings();
            
            const nextIndex = mainState.currentImageIndex + 1;
            if (nextIndex < mainState.selectedFiles.length) {
                await this.loadImageForCrop(nextIndex);
            } else {
                // ëª¨ë“  ì´ë¯¸ì§€ ì™„ë£Œ - 3ë‹¨ê³„ë¡œ ì´ë™
                await this.moveToStep(MAIN_CONSTANTS.WORKFLOW_STEPS.MANAGE);
            }
        },
        
        // ì´ì „ ì´ë¯¸ì§€ë¡œ ì´ë™
        async proceedToPrevImage() {
            // í˜„ì¬ ì„¤ì • ì €ì¥
            await this.saveCurrentImageSettings();
            
            const prevIndex = mainState.currentImageIndex - 1;
            if (prevIndex >= 0) {
                await this.loadImageForCrop(prevIndex);
            }
        },
        
        // í˜„ì¬ ì´ë¯¸ì§€ ì„¤ì • ì €ì¥
        async saveCurrentImageSettings() {
            const currentFile = mainState.selectedFiles[mainState.currentImageIndex];
            if (!currentFile) return;
            
            try {
                // í¬ë¡­ ë°ì´í„° ì €ì¥
                const cropData = Cropper.getCropData();
                if (cropData) {
                    currentFile.cropData = cropData;
                }
                
                // Alt í…ìŠ¤íŠ¸ ì €ì¥
                const altTextInput = document.getElementById('altText');
                if (altTextInput) {
                    currentFile.altText = altTextInput.value;
                }
                
                // íŒŒì¼ëª… ì €ì¥
                const filenameInput = document.getElementById('englishFilename');
                if (filenameInput) {
                    currentFile.englishFilename = filenameInput.value;
                }
                
                // ì„ íƒëœ í‚¤ì›Œë“œ ì—…ë°ì´íŠ¸
                this.updateSelectedKeywords();
                
                // ì••ì¶• ì ìš©
                await this.applyCompressionToCrop();
                
            } catch (error) {
                Core.logger.error('ì„¤ì • ì €ì¥ ì‹¤íŒ¨:', error);
            }
        }
    };
    
    // ================================================
    // ì´ë²¤íŠ¸ ê´€ë¦¬
    // ================================================
    
    const eventManager = {
        setupGlobalEvents() {
            // í¬ë¡­í¼ ì´ë²¤íŠ¸
            Core.on('imageCropped', this.handleImageCropped.bind(this));
            Core.on('nextImage', this.handleNextImage.bind(this));
            Core.on('prevImage', this.handlePrevImage.bind(this));
            
            // ë°ì´í„° ì´ë²¤íŠ¸
            Core.on('uploadComplete', this.handleDataUploadComplete.bind(this));
            
            // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
            document.addEventListener('keydown', this.handleKeyboardShortcuts.bind(this));
        },
        
        handleImageCropped(data) {
            const currentFile = mainState.selectedFiles[data.index];
            if (currentFile) {
                currentFile.croppedBlob = data.blob;
                currentFile.cropData = data.cropData;
            }
            
            // ìë™ ì´ë”ì„ ì œê±°í•˜ê³  ìˆ˜ë™ ì œì–´ë¡œ ë³€ê²½
            // ì‚¬ìš©ìê°€ ì§ì ‘ ë‹¤ìŒ ë²„íŠ¼ì„ ëˆŒëŸ¬ì•¼ ì´ë™
            this.updateRealTimePreview(data.blob);
        },
        
        async handleNextImage() {
            await workflowManager.proceedToNextImage();
        },
        
        async handlePrevImage() {
            await workflowManager.proceedToPrevImage();
        },
        
        handleDataUploadComplete(data) {
            UI.showNotification('ëª¨ë“  ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!', UI.CONSTANTS.NOTIFICATION_TYPES.SUCCESS);
            mainState.currentState = MAIN_CONSTANTS.STATES.COMPLETE;
            
            // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ë˜ëŠ” ë¦¬ë‹¤ì´ë ‰íŠ¸
            setTimeout(() => {
                window.location.reload();
            }, 2000);
        },
        
        handleKeyboardShortcuts(event) {
            if (mainState.currentStep !== MAIN_CONSTANTS.WORKFLOW_STEPS.CROP) return;
            
            // Cropper ëª¨ë“ˆì˜ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ëŠ” ì´ë¯¸ ì²˜ë¦¬ë¨
            // ì¶”ê°€ì ì¸ ì „ì—­ ë‹¨ì¶•í‚¤ë§Œ ì—¬ê¸°ì„œ ì²˜ë¦¬
            
            if (event.key === 'Escape') {
                // ESC: 1ë‹¨ê³„ë¡œ ëŒì•„ê°€ê¸°
                event.preventDefault();
                controller.moveToStep(MAIN_CONSTANTS.WORKFLOW_STEPS.UPLOAD);
            }
        }
    };
    
    // ================================================
    // ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ê°ì²´
    // ================================================
    
    const controller = {
        async initialize(options = {}) {
            if (mainState.isInitialized) {
                Core.logger.warn('ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì´ë¯¸ ì´ˆê¸°í™”ë¨');
                return true;
            }
            
            Core.logger.log('ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì´ˆê¸°í™” ì‹œì‘');
            
            try {
                // ì„¤ì • ë³‘í•©
                Object.assign(mainState.settings, options.settings || {});
                
                // ì‹œì„¤ ì •ë³´ ì„¤ì •
                mainState.facilityId = options.facilityId || Core.utils.extractFacilityId();
                mainState.facilityName = options.facilityName || '';
                
                if (!mainState.facilityId) {
                    throw new Error('ì‹œì„¤ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                // ëª¨ë“  ëª¨ë“ˆ ì´ˆê¸°í™”
                const initSuccess = await moduleInitializer.initializeAllModules(
                    mainState.facilityId, 
                    mainState.facilityName, 
                    options
                );
                
                if (!initSuccess) {
                    throw new Error('ëª¨ë“ˆ ì´ˆê¸°í™” ì‹¤íŒ¨');
                }
                
                // ì´ë²¤íŠ¸ ì„¤ì •
                eventManager.setupGlobalEvents();
                
                // ì´ˆê¸° ë‹¨ê³„ ì„¤ì •
                await workflowManager.initializeStep(MAIN_CONSTANTS.WORKFLOW_STEPS.UPLOAD);
                
                mainState.isInitialized = true;
                mainState.currentState = MAIN_CONSTANTS.STATES.READY;
                
                Core.logger.success('ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì´ˆê¸°í™” ì™„ë£Œ');
                
                // ì´ˆê¸°í™” ì™„ë£Œ ì•Œë¦¼
                UI.showNotification('ì‹œì„¤ ì´ë¯¸ì§€ ì‹œìŠ¤í…œì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.', UI.CONSTANTS.NOTIFICATION_TYPES.SUCCESS);
                
                return true;
                
            } catch (error) {
                mainState.currentState = MAIN_CONSTANTS.STATES.ERROR;
                Core.logger.error('ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                UI.showNotification('ì‹œìŠ¤í…œ ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', UI.CONSTANTS.NOTIFICATION_TYPES.ERROR);
                return false;
            }
        },
        
        async moveToStep(step) {
            return workflowManager.moveToStep(step);
        },
        
        async uploadImages() {
            if (mainState.processedImages.length === 0) {
                UI.showNotification('ì—…ë¡œë“œí•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.', UI.CONSTANTS.NOTIFICATION_TYPES.WARNING);
                return;
            }
            
            try {
                mainState.currentState = MAIN_CONSTANTS.STATES.UPLOADING;
                UI.showProgress('upload', 'ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘...');
                
                const result = await Data.uploadImages(mainState.processedImages);
                
                UI.hideProgress('upload');
                return result;
                
            } catch (error) {
                UI.hideProgress('upload');
                mainState.currentState = MAIN_CONSTANTS.STATES.ERROR;
                throw error;
            }
        },
        
        getCurrentState() {
            return {
                ...mainState,
                moduleInfo: {
                    core: Core.getInfo(),
                    cropper: Cropper.getInfo(),
                    upload: Upload.getInfo(),
                    ui: UI.getInfo(),
                    data: Data.getInfo(),
                    seo: SEO.getInfo(),
                    utils: Utils.getInfo()
                }
            };
        },
        
        async destroy() {
            Core.logger.log('ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì¢…ë£Œ');
            
            // ê° ëª¨ë“ˆ ì •ë¦¬
            if (mainState.moduleStates.cropper) Cropper.destroy();
            if (mainState.moduleStates.upload) Upload.destroy();
            if (mainState.moduleStates.ui) UI.destroy();
            if (mainState.moduleStates.data) Data.destroy();
            if (mainState.moduleStates.seo) SEO.destroy();
            
            // ìƒíƒœ ì´ˆê¸°í™”
            mainState.isInitialized = false;
            mainState.currentState = MAIN_CONSTANTS.STATES.INITIALIZING;
            
            Core.logger.success('ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì¢…ë£Œ ì™„ë£Œ');
        },
        
        // ê³µìš© íŒŒì¼ ì²˜ë¦¬ í•¨ìˆ˜ (ë‹¤ì–‘í•œ ì…ë ¥ ì†ŒìŠ¤ì—ì„œ ì‚¬ìš©)
        processFiles(files) {
            if (!files || files.length === 0) return;
            
            try {
                Core.logger.log('ê³µìš© íŒŒì¼ ì²˜ë¦¬ ì‹œì‘:', { count: files.length });
                
                // íŒŒì¼ ë°°ì—´ë¡œ ë³€í™˜
                const fileArray = Array.from(files);
                
                // ì—…ë¡œë“œ ëª¨ë“ˆì˜ íŒŒì¼ ì²˜ë¦¬ í•¨ìˆ˜ í˜¸ì¶œ
                if (Upload && typeof Upload.handleFileSelect === 'function') {
                    Upload.handleFileSelect(fileArray);
                } else {
                    Core.logger.warn('ì—…ë¡œë“œ ëª¨ë“ˆì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
            } catch (error) {
                Core.logger.error('íŒŒì¼ ì²˜ë¦¬ ì‹¤íŒ¨:', error);
                UI.showNotification('íŒŒì¼ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', UI.CONSTANTS.NOTIFICATION_TYPES.ERROR);
            }
        },
        
        getInfo() {
            return {
                name: MAIN_CONSTANTS.MODULE_NAME,
                version: MAIN_CONSTANTS.VERSION,
                isInitialized: mainState.isInitialized,
                currentState: mainState.currentState,
                currentStep: mainState.currentStep,
                facilityId: mainState.facilityId,
                moduleStates: mainState.moduleStates
            };
        }
    };
    
    // ================================================
    // ì „ì—­ í•¨ìˆ˜ ì •ì˜ (HTMLì—ì„œ í˜¸ì¶œë¨)
    // ================================================
    
    // ë©”ì¸ ì´ë¯¸ì§€ ì„ íƒ/í•´ì œ í•¨ìˆ˜
    window.selectMainImage = function(index) {
        try {
            // í˜„ì¬ ë©”ì¸ ì´ë¯¸ì§€ì™€ ê°™ì€ ì¸ë±ìŠ¤ë©´ í•´ì œ, ë‹¤ë¥¸ ì¸ë±ìŠ¤ë©´ ì„¤ì •
            if (mainState.mainImageIndex === index) {
                mainState.mainImageIndex = -1; // ë©”ì¸ ì´ë¯¸ì§€ í•´ì œ
                Core.logger.log(`ë©”ì¸ ì´ë¯¸ì§€ í•´ì œ: ${index}`);
            } else {
                mainState.mainImageIndex = index; // ìƒˆ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •
                Core.logger.log(`ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •: ${index}`);
            }
            
            // UI ì—…ë°ì´íŠ¸
            moduleInitializer.updateMainImageInfo();
            
            // ì´ë¯¸ì§€ ëª©ë¡ ì¬ìƒì„± (ë©”ì¸ ì´ë¯¸ì§€ í‘œì‹œ ì—…ë°ì´íŠ¸)
            if (mainState.selectedFiles.length > 0) {
                moduleInitializer.showImageOrderInterface(mainState.selectedFiles);
            }
            
        } catch (error) {
            Core.logger.error('ë©”ì¸ ì´ë¯¸ì§€ ì„ íƒ ì‹¤íŒ¨:', error);
        }
    };
    
    // ì´ë¯¸ì§€ ì œê±° í•¨ìˆ˜
    window.removeImageFromOrder = function(index) {
        try {
            if (index >= 0 && index < mainState.selectedFiles.length) {
                const removedFile = mainState.selectedFiles[index];
                mainState.selectedFiles.splice(index, 1);
                
                // ë©”ì¸ ì´ë¯¸ì§€ ì¸ë±ìŠ¤ ì¡°ì •
                if (mainState.mainImageIndex === index) {
                    mainState.mainImageIndex = -1; // ë©”ì¸ ì´ë¯¸ì§€ê°€ ì œê±°ëœ ê²½ìš° í•´ì œ
                } else if (mainState.mainImageIndex > index) {
                    mainState.mainImageIndex--; // ë©”ì¸ ì´ë¯¸ì§€ê°€ ë’¤ì— ìˆëŠ” ê²½ìš° ì¸ë±ìŠ¤ ì¡°ì •
                }
                
                Core.logger.log(`ì´ë¯¸ì§€ ì œê±°: ${removedFile.name}`);
                
                // UI ì—…ë°ì´íŠ¸
                if (mainState.selectedFiles.length > 0) {
                    moduleInitializer.showImageOrderInterface(mainState.selectedFiles);
                } else {
                    // ëª¨ë“  ì´ë¯¸ì§€ê°€ ì œê±°ëœ ê²½ìš° ì»¨í…Œì´ë„ˆ ìˆ¨ê¹€
                    const previewContainer = document.querySelector('.selected-images-preview');
                    if (previewContainer) {
                        previewContainer.style.display = 'none';
                    }
                }
            }
        } catch (error) {
            Core.logger.error('ì´ë¯¸ì§€ ì œê±° ì‹¤íŒ¨:', error);
        }
    };
    
    // ì´ë¯¸ì§€ ìˆœì„œ ë³€ê²½ í•¨ìˆ˜ë“¤
    window.moveImageUp = function(index) {
        try {
            if (index > 0 && index < mainState.selectedFiles.length) {
                // íŒŒì¼ ìˆœì„œ ë³€ê²½
                [mainState.selectedFiles[index], mainState.selectedFiles[index - 1]] = 
                [mainState.selectedFiles[index - 1], mainState.selectedFiles[index]];
                
                // ë©”ì¸ ì´ë¯¸ì§€ ì¸ë±ìŠ¤ ì¡°ì •
                if (mainState.mainImageIndex === index) {
                    mainState.mainImageIndex = index - 1;
                } else if (mainState.mainImageIndex === index - 1) {
                    mainState.mainImageIndex = index;
                }
                
                // UI ì—…ë°ì´íŠ¸
                moduleInitializer.showImageOrderInterface(mainState.selectedFiles);
                Core.logger.log(`ì´ë¯¸ì§€ ìœ„ë¡œ ì´ë™: ${index} â†’ ${index - 1}`);
            }
        } catch (error) {
            Core.logger.error('ì´ë¯¸ì§€ ìœ„ë¡œ ì´ë™ ì‹¤íŒ¨:', error);
        }
    };
    
    window.moveImageDown = function(index) {
        try {
            if (index >= 0 && index < mainState.selectedFiles.length - 1) {
                // íŒŒì¼ ìˆœì„œ ë³€ê²½
                [mainState.selectedFiles[index], mainState.selectedFiles[index + 1]] = 
                [mainState.selectedFiles[index + 1], mainState.selectedFiles[index]];
                
                // ë©”ì¸ ì´ë¯¸ì§€ ì¸ë±ìŠ¤ ì¡°ì •
                if (mainState.mainImageIndex === index) {
                    mainState.mainImageIndex = index + 1;
                } else if (mainState.mainImageIndex === index + 1) {
                    mainState.mainImageIndex = index;
                }
                
                // UI ì—…ë°ì´íŠ¸
                moduleInitializer.showImageOrderInterface(mainState.selectedFiles);
                Core.logger.log(`ì´ë¯¸ì§€ ì•„ë˜ë¡œ ì´ë™: ${index} â†’ ${index + 1}`);
            }
        } catch (error) {
            Core.logger.error('ì´ë¯¸ì§€ ì•„ë˜ë¡œ ì´ë™ ì‹¤íŒ¨:', error);
        }
    };
    
    // ================================================
    // ëª¨ë“ˆ ë…¸ì¶œ
    // ================================================
    
    window.FacilityImageSystem.Main = {
        CONSTANTS: MAIN_CONSTANTS,
        controller,
        workflowManager,
        eventManager,
        moduleInitializer,
        getState: () => ({ ...mainState }),
        initialize: controller.initialize.bind(controller),
        moveToStep: controller.moveToStep.bind(controller),
        uploadImages: controller.uploadImages.bind(controller),
        processFiles: controller.processFiles.bind(controller),
        getCurrentState: controller.getCurrentState.bind(controller),
        destroy: controller.destroy.bind(controller)
    };
    
    // ì „ì—­ ì ‘ê·¼ì„ ìœ„í•œ ë‹¨ì¶• ì°¸ì¡°
    window.FacilityImageMainController = window.FacilityImageSystem.Main;
    
    // workflowManagerë¥¼ ì „ì—­ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ë…¸ì¶œ
    window.FacilityImageSystem.Main.workflowManager = workflowManager;
    
    // ìë™ ì´ˆê¸°í™” (DOM ì¤€ë¹„ ì‹œ)
    document.addEventListener('DOMContentLoaded', async function() {
        // ì‹œì„¤ ì´ë¯¸ì§€ ê´€ë ¨ í˜ì´ì§€ì—ì„œë§Œ ìë™ ì´ˆê¸°í™”
        if (document.querySelector('#uploadSection, .upload-area, #cropSection') ||
            window.location.pathname.includes('/facility/') && 
            window.location.pathname.includes('/crop-images')) {
            
            Core.logger.log('ì‹œì„¤ ì´ë¯¸ì§€ í˜ì´ì§€ ê°ì§€ - ìë™ ì´ˆê¸°í™” ì‹œì‘');
            
            try {
                const success = await controller.initialize();
                if (success) {
                    Core.logger.success('ì‹œì„¤ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ ìë™ ì´ˆê¸°í™” ì™„ë£Œ');
                } else {
                    Core.logger.error('ì‹œì„¤ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ ìë™ ì´ˆê¸°í™” ì‹¤íŒ¨');
                }
            } catch (error) {
                Core.logger.error('ìë™ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜:', error);
            }
        }
    });
    
    Core.logger.log('ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œë“œ ì™„ë£Œ');
    
})();

// ================================================
// ì „ì—­ í•¨ìˆ˜ë“¤ (HTMLì—ì„œ í˜¸ì¶œ)
// ================================================

// ì´ë¯¸ì§€ ìˆœì„œ ì¡°ì‘ í•¨ìˆ˜ë“¤ (ì „ì—­ í•¨ìˆ˜ë¡œ HTMLì—ì„œ í˜¸ì¶œ)
function removeImageFromOrder(index) {
    try {
        console.log('ì´ë¯¸ì§€ ì œê±° ì‹œë„:', index);
        
        if (!window.FacilityImageSystem?.Main) {
            console.error('FacilityImageSystem.Mainì„ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            return;
        }
        
        const mainController = window.FacilityImageSystem.Main;
        const currentState = mainController.getState();
        
        console.log('í˜„ì¬ ìƒíƒœ:', {
            selectedFilesLength: currentState.selectedFiles?.length,
            index: index,
            moduleInitializer: !!mainController.moduleInitializer
        });
        
        if (index >= 0 && index < (currentState.selectedFiles?.length || 0)) {
            currentState.selectedFiles.splice(index, 1);
            console.log('ì´ë¯¸ì§€ ì œê±° ì™„ë£Œ. ë‚¨ì€ íŒŒì¼:', currentState.selectedFiles.length);
            
            // moduleInitializerì˜ showImageOrderInterface í˜¸ì¶œ
            if (mainController.moduleInitializer?.showImageOrderInterface) {
                mainController.moduleInitializer.showImageOrderInterface(currentState.selectedFiles);
            } else {
                console.error('showImageOrderInterface í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            }
            
            // íŒŒì¼ì´ ì—†ìœ¼ë©´ ë¯¸ë¦¬ë³´ê¸° ìˆ¨ê¸°ê¸°
            if (currentState.selectedFiles.length === 0) {
                const previewContainer = document.getElementById('selectedImagesPreview');
                if (previewContainer) {
                    previewContainer.style.display = 'none';
                }
            }
        } else {
            console.error('ì˜ëª»ëœ ì¸ë±ìŠ¤:', index);
        }
    } catch (error) {
        console.error('ì´ë¯¸ì§€ ì œê±° ì‹¤íŒ¨:', error);
    }
}

function moveImageUp(index) {
    try {
        if (!window.FacilityImageSystem?.Main) return;
        
        const mainController = window.FacilityImageSystem.Main;
        const currentState = mainController.getState();
        
        if (index > 0 && index < currentState.selectedFiles.length) {
            // ë°°ì—´ ìš”ì†Œ êµì²´
            [currentState.selectedFiles[index], currentState.selectedFiles[index - 1]] = 
            [currentState.selectedFiles[index - 1], currentState.selectedFiles[index]];
            
            // UI ë‹¤ì‹œ ê·¸ë¦¬ê¸°
            if (mainController.moduleInitializer?.showImageOrderInterface) {
                mainController.moduleInitializer.showImageOrderInterface(currentState.selectedFiles);
            }
        }
    } catch (error) {
        console.error('ì´ë¯¸ì§€ ìœ„ë¡œ ì´ë™ ì‹¤íŒ¨:', error);
    }
}

function moveImageDown(index) {
    try {
        if (!window.FacilityImageSystem?.Main) return;
        
        const mainController = window.FacilityImageSystem.Main;
        const currentState = mainController.getState();
        
        if (index >= 0 && index < currentState.selectedFiles.length - 1) {
            // ë°°ì—´ ìš”ì†Œ êµì²´
            [currentState.selectedFiles[index], currentState.selectedFiles[index + 1]] = 
            [currentState.selectedFiles[index + 1], currentState.selectedFiles[index]];
            
            // UI ë‹¤ì‹œ ê·¸ë¦¬ê¸°
            if (mainController.moduleInitializer?.showImageOrderInterface) {
                mainController.moduleInitializer.showImageOrderInterface(currentState.selectedFiles);
            }
        }
    } catch (error) {
        console.error('ì´ë¯¸ì§€ ì•„ë˜ë¡œ ì´ë™ ì‹¤íŒ¨:', error);
    }
}

// ë©”ì¸ ì´ë¯¸ì§€ ì„ íƒ (1ë‹¨ê³„ìš©)
function selectMainImage(index) {
    try {
        if (!window.FacilityImageSystem?.Main) return;
        
        const mainController = window.FacilityImageSystem.Main;
        const currentState = mainController.getState();
        
        if (index >= 0 && index < currentState.selectedFiles.length) {
            currentState.mainImageIndex = index;
            
            // UI ë‹¤ì‹œ ê·¸ë¦¬ê¸°
            if (mainController.moduleInitializer?.showImageOrderInterface) {
                mainController.moduleInitializer.showImageOrderInterface(currentState.selectedFiles);
            }
        }
    } catch (error) {
        console.error('ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì‹¤íŒ¨:', error);
    }
}

// í‚¤ì›Œë“œ í´ë¦­ í•¸ë“¤ëŸ¬
function handleKeywordClick(keyword) {
    try {
        // í‚¤ì›Œë“œ ë²„íŠ¼ í† ê¸€ (ê°„ë‹¨í•˜ê²Œ)
        const buttons = document.querySelectorAll(`[data-keyword="${keyword}"]`);
        buttons.forEach(button => {
            if (button.classList.contains('btn-outline-primary')) {
                button.classList.remove('btn-outline-primary');
                button.classList.add('btn-primary');
            } else {
                button.classList.remove('btn-primary');
                button.classList.add('btn-outline-primary');
            }
        });
        
        // ì„ íƒëœ í‚¤ì›Œë“œ ì—…ë°ì´íŠ¸
        if (window.FacilityImageSystem?.Main?.moduleInitializer) {
            window.FacilityImageSystem.Main.moduleInitializer.updateSelectedKeywords();
        }
    } catch (error) {
        console.error('í‚¤ì›Œë“œ ì„ íƒ ì˜¤ë¥˜:', error);
    }
}

// 2ë‹¨ê³„ ì»´íŠ¸ë¡¤ ì „ì—­ í•¨ìˆ˜ë“¤
function proceedToNextImage() {
    try {
        if (window.FacilityImageSystem?.Main?.workflowManager) {
            window.FacilityImageSystem.Main.workflowManager.proceedToNextImage();
        }
    } catch (error) {
        console.error('ë‹¤ìŒ ì´ë¯¸ì§€ ì´ë™ ì‹¤íŒ¨:', error);
    }
}

function proceedToPrevImage() {
    try {
        if (window.FacilityImageSystem?.Main?.workflowManager) {
            window.FacilityImageSystem.Main.workflowManager.proceedToPrevImage();
        }
    } catch (error) {
        console.error('ì´ì „ ì´ë¯¸ì§€ ì´ë™ ì‹¤íŒ¨:', error);
    }
}

function applyCompression() {
    try {
        if (window.FacilityImageSystem?.Main?.workflowManager) {
            window.FacilityImageSystem.Main.workflowManager.applyCompressionToCrop();
        }
    } catch (error) {
        console.error('ì••ì¶• ì ìš© ì‹¤íŒ¨:', error);
    }
}

function saveCropAndNext() {
    try {
        if (window.FacilityImageSystem?.Main?.workflowManager) {
            window.FacilityImageSystem.Main.workflowManager.saveCurrentImageSettings();
        }
    } catch (error) {
        console.error('í¬ë¡­ ì €ì¥ ì‹¤íŒ¨:', error);
    }
}

function resetCrop() {
    try {
        if (window.FacilityImageCropper?.cropperControls) {
            window.FacilityImageCropper.cropperControls.reset();
        }
    } catch (error) {
        console.error('í¬ë¡­ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
    }
}

function zoomIn() {
    try {
        if (window.FacilityImageCropper?.cropperControls) {
            window.FacilityImageCropper.cropperControls.zoomIn();
        }
    } catch (error) {
        console.error('í™•ëŒ€ ì‹¤íŒ¨:', error);
    }
}

function zoomOut() {
    try {
        if (window.FacilityImageCropper?.cropperControls) {
            window.FacilityImageCropper.cropperControls.zoomOut();
        }
    } catch (error) {
        console.error('ì¶•ì†Œ ì‹¤íŒ¨:', error);
    }
}
````

## File: src/main/resources/static/js/kakaomap.js
````javascript
// kakaomap.js

// ë§µ ê°ì²´, ë§ˆì»¤ ë°°ì—´, ì¸í¬ìœˆë„ìš°ë¥¼ ì „ì—­ì ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì„ ì–¸í•©ë‹ˆë‹¤.
// 'var'ëŠ” ì „ì—­ ìŠ¤ì½”í”„ì— í• ë‹¹í•˜ê³ , 'let'ì€ ëª¨ë“ˆ/ìŠ¤í¬ë¦½íŠ¸ ìŠ¤ì½”í”„ì— í• ë‹¹ë©ë‹ˆë‹¤.
// ì—¬ê¸°ì„œëŠ” ë‹¤ë¥¸ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸ì—ì„œë„ `map`ì„ ì§ì ‘ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ varë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜
// ì•„ë‹ˆë©´ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸ì—ì„œë„ mapì„ `window.map`ìœ¼ë¡œ ì°¸ì¡°í•˜ë„ë¡ í•©ë‹ˆë‹¤.
// ê°€ì¥ ê°„ë‹¨í•˜ê²Œ, 'map' ë³€ìˆ˜ê°€ ë‹¤ë¥¸ ê³³ì—ì„œë„ 'map'ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì°¸ì¡°ë  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
let map = null;
let markers = []; // ì§€ë„ì— í‘œì‹œëœ ë§ˆì»¤ë“¤ì„ ê´€ë¦¬í•  ë°°ì—´
let infoWindow = null; // ì¸í¬ìœˆë„ìš° ê°ì²´

// ì‹œì„¤ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° í•¨ìˆ˜
function previewFacilityImage(input) {
    const preview = document.getElementById('facilityImagePreview');
    const previewImg = document.getElementById('facilityImagePreviewImg');
    
    if (input.files && input.files[0]) {
        const file = input.files[0];
        
        // íŒŒì¼ í¬ê¸° ì²´í¬ (5MB = 5 * 1024 * 1024 bytes)
        if (file.size > 5 * 1024 * 1024) {
            alert('íŒŒì¼ í¬ê¸°ê°€ 5MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤. ë” ì‘ì€ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
            input.value = '';
            preview.style.display = 'none';
            return;
        }
        
        // íŒŒì¼ í˜•ì‹ ì²´í¬
        if (!file.type.match('image.*')) {
            alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
            input.value = '';
            preview.style.display = 'none';
            return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
            previewImg.src = e.target.result;
            preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
    } else {
        preview.style.display = 'none';
    }
}

// ì§€ë„ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜
function initKakaoMap(mapId) {
    const mapContainer = document.getElementById(mapId);
    if (!mapContainer) {
        console.error("Error: Map container not found with ID:", mapId);
        return;
    }

    const mapOption = {
        center: new kakao.maps.LatLng(37.566826, 126.9786567), // ê¸°ë³¸ ì¤‘ì‹¬ (ì„œìš¸ ì‹œì²­)
        level: 3 // ê¸°ë³¸ í™•ëŒ€ ë ˆë²¨
    };

    // ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
    map = new kakao.maps.Map(mapContainer, mapOption);

    // ì¸í¬ìœˆë„ìš° ìƒì„± (ë§ˆì»¤ í´ë¦­ ì‹œ ì •ë³´ í‘œì‹œìš©)
    infoWindow = new kakao.maps.InfoWindow({zIndex:1});

    // ì§€ë„ í™•ëŒ€/ì¶•ì†Œ ì»¨íŠ¸ë¡¤ì„ ìƒì„±í•œë‹¤
    const zoomControl = new kakao.maps.ZoomControl();
    map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);

    // ì§€ë„ê°€ ì´ë™ì´ ë©ˆì·„ì„ ë•Œ (idle ì´ë²¤íŠ¸ ë°œìƒ) ì‹œì„¤ì„ ë‹¤ì‹œ ê²€ìƒ‰
    // ì´ ë¶€ë¶„ì„ ì£¼ì„ í•´ì œí•˜ë©´ ì§€ë„ ì´ë™ ì‹œ ìë™ìœ¼ë¡œ ê²€ìƒ‰í•˜ì—¬ ë§ˆì»¤ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
    /*
    kakao.maps.event.addListener(map, 'idle', function() {
        console.log("Map idle event detected. Searching facilities in bounds...");
        searchFacilitiesInBounds(); // ì§€ë„ ì´ë™ì´ ë©ˆì·„ì„ ë•Œ ìë™ ê²€ìƒ‰
    });
    */

    console.log("Kakao Map initialized successfully on element:", mapId);
}

// ë§ˆì»¤ë¥¼ ì¶”ê°€í•˜ê³  ì¸í¬ìœˆë„ìš°ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜
function addMarker(lat, lng, title, content) {
    if (!map) {
        console.error("Error: Map object is not initialized. Cannot add marker for:", title);
        return null;
    }

    const position = new kakao.maps.LatLng(lat, lng);
    const marker = new kakao.maps.Marker({
        map: map,
        position: position,
        title: title // ë§ˆì»¤ì˜ íƒ€ì´í‹€, ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ í‘œì‹œë©ë‹ˆë‹¤
    });

    markers.push(marker); // ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€

    // ë§ˆì»¤ì— í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤
    kakao.maps.event.addListener(marker, 'click', function() {
        // ë§ˆì»¤ë¥¼ í´ë¦­í•˜ë©´ ì¥ì†Œëª…ì´ ì¸í¬ìœˆë„ìš°ì— í‘œì¶œë©ë‹ˆë‹¤
        infoWindow.setContent('<div style="padding:5px;font-size:12px;">' + content + '</div>');
        infoWindow.open(map, marker);
        // í´ë¦­ëœ ë§ˆì»¤ë¡œ ì§€ë„ ì¤‘ì‹¬ ì´ë™ (ì„ íƒ ì‚¬í•­)
        map.panTo(position);
    });

    return marker;
}

// ì§€ë„ì— í‘œì‹œëœ ëª¨ë“  ë§ˆì»¤ë¥¼ ì œê±°í•˜ëŠ” í•¨ìˆ˜
function clearMarkers() {
    for (let i = 0; i < markers.length; i++) {
        markers[i].setMap(null); // ì§€ë„ì—ì„œ ë§ˆì»¤ ì œê±°
    }
    markers = []; // ë§ˆì»¤ ë°°ì—´ ì´ˆê¸°í™”
    if (infoWindow) {
        infoWindow.close(); // ì—´ë ¤ìˆëŠ” ì¸í¬ìœˆë„ìš° ë‹«ê¸°
    }
    console.log("All markers cleared.");
}

// í˜„ì¬ ì§€ë„ ì˜ì—­ ë‚´ ì‹œì„¤ì„ ê²€ìƒ‰í•˜ëŠ” í•¨ìˆ˜ (AJAX í˜¸ì¶œ)
// ì´ í•¨ìˆ˜ëŠ” 'map.addListener('idle', ...)' ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì— ì—°ê²°í•˜ì—¬ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
// í¼ ê²€ìƒ‰ê³¼ëŠ” ë³„ê°œë¡œ ì§€ë„ ì´ë™ì— ë”°ë¼ ì‹œì„¤ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.
function searchFacilitiesInBounds() {
    if (!map) {
        console.error("Error: Map object is not initialized. Cannot search facilities in bounds.");
        return;
    }

    const bounds = map.getBounds(); // í˜„ì¬ ì§€ë„ì˜ ì˜ì—­ì„ ì–»ì–´ì˜µë‹ˆë‹¤
    const swLat = bounds.getSouthWest().getLat();
    const swLng = bounds.getSouthWest().getLng();
    const neLat = bounds.getNorthEast().getLat();
    const neLng = bounds.getNorthEast().getLng();

    // í˜„ì¬ í¼ í•„í„° ê°’ë“¤ë„ í•¨ê»˜ ì „ì†¡í•˜ì—¬ ì§€ë„ ì˜ì—­ê³¼ í•„í„°ê°€ ê²°í•©ëœ ê²€ìƒ‰ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    const facilityName = document.getElementById('facilityName')?.value || '';
    const region = document.getElementById('region')?.value || '';
    const facilityType = document.getElementById('facilityType')?.value || '';
    const gradeRating = document.getElementById('gradeRating')?.value || '';

    // ì„œë²„ì˜ /facility/api/list APIë¥¼ í˜¸ì¶œí•˜ì—¬ í•´ë‹¹ ì˜ì—­ ë‚´ ì‹œì„¤ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
    const url = `/facility/api/list?swLat=${swLat}&swLng=${swLng}&neLat=${neLat}&neLng=${neLng}` +
        `&facilityName=${encodeURIComponent(facilityName)}` +
        `&region=${encodeURIComponent(region)}` +
        `&facilityType=${encodeURIComponent(facilityType)}` +
        `&gradeRating=${encodeURIComponent(gradeRating)}`;

    console.log("Fetching facilities for map bounds and filters:", url);

    fetch(url)
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            clearMarkers(); // ê¸°ì¡´ ë§ˆì»¤ ì§€ìš°ê¸°
            if (data && data.length > 0) {
                data.forEach(facility => {
                    addMarker(
                        parseFloat(facility.latitude),
                        parseFloat(facility.longitude),
                        facility.name,
                        `ì£¼ì†Œ: ${facility.address}<br>ì „í™”: ${facility.phone}<br>í‰ì : ${facility.averageRating}/5.0`
                    );
                });
                console.log(`Updated map with ${data.length} facilities from AJAX.`);
            } else {
                console.log("No facilities found in current map bounds with applied filters.");
            }
        })
        .catch(error => {
            console.error("Error fetching facilities for map API:", error);
        });
}

// searchWithFilters í•¨ìˆ˜ëŠ” ë” ì´ìƒ HTML í¼ ì œì¶œì—ì„œ ì§ì ‘ í˜¸ì¶œë˜ì§€ ì•Šìœ¼ë¯€ë¡œ,
// ë§Œì•½ ì´ í•¨ìˆ˜ê°€ ë‹¤ë¥¸ ëª©ì ìœ¼ë¡œ (ì˜ˆ: íŠ¹ì • í•„í„° ë²„íŠ¼ í´ë¦­ ì‹œ ì§€ë„ ì—…ë°ì´íŠ¸) ì‚¬ìš©ëœë‹¤ë©´
// ê·¸ì— ë§ëŠ” ë¡œì§ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ëŠ” í•„ìš” ì—†ìœ¼ë¯€ë¡œ ì œê±°í•˜ê±°ë‚˜ ì£¼ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
/*
function searchWithFilters(filters) {
    console.warn("searchWithFilters is called. This function is likely deprecated for main form submission.");
    // ë§Œì•½ AJAX ë°©ì‹ìœ¼ë¡œ í•„í„°ë§ëœ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ê°€ì ¸ì™€ ì§€ë„ë‚˜ ëª©ë¡ì„ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´ ì´ê³³ì— ë¡œì§ êµ¬í˜„
    // ì˜ˆ: const queryString = new URLSearchParams(filters).toString();
    // fetch(`/facility/api/list?${queryString}`)
    // ...
}
*/

// ===============================
// ì£¼ì†Œ ê²€ìƒ‰ ê´€ë ¨ í•¨ìˆ˜ë“¤
// ===============================

/**
 * ì¹´ì¹´ì˜¤ ìš°í¸ë²ˆí˜¸ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•œ ì£¼ì†Œ ê²€ìƒ‰ íŒì—…ì„ ë„ìš°ëŠ” í•¨ìˆ˜
 * @param {string} addressInputId - ì£¼ì†Œë¥¼ ì…ë ¥ë°›ì„ input ìš”ì†Œì˜ ID
 * @param {string} detailAddressInputId - ìƒì„¸ì£¼ì†Œë¥¼ ì…ë ¥ë°›ì„ input ìš”ì†Œì˜ ID (ì„ íƒì‚¬í•­)
 * @param {function} callback - ì£¼ì†Œ ì„ íƒ ì™„ë£Œ í›„ ì‹¤í–‰ë  ì½œë°± í•¨ìˆ˜ (ì„ íƒì‚¬í•­)
 */
function openAddressSearch(addressInputId, detailAddressInputId = null, callback = null) {
    new daum.Postcode({
        oncomplete: function(data) {
            // íŒì—…ì—ì„œ ê²€ìƒ‰ê²°ê³¼ í•­ëª©ì„ í´ë¦­í–ˆì„ë•Œ ì‹¤í–‰í•  ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë¶€ë¶„.
            
            // ê° ì£¼ì†Œì˜ ë…¸ì¶œ ê·œì¹™ì— ë”°ë¼ ì£¼ì†Œë¥¼ ì¡°í•©í•œë‹¤.
            let addr = ''; // ì£¼ì†Œ ë³€ìˆ˜
            let extraAddr = ''; // ì°¸ê³ í•­ëª© ë³€ìˆ˜

            // ì‚¬ìš©ìê°€ ì„ íƒí•œ ì£¼ì†Œ íƒ€ì…ì— ë”°ë¼ í•´ë‹¹ ì£¼ì†Œ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
            if (data.userSelectedType === 'R') { // ì‚¬ìš©ìê°€ ë„ë¡œëª… ì£¼ì†Œë¥¼ ì„ íƒí–ˆì„ ê²½ìš°
                addr = data.roadAddress;
            } else { // ì‚¬ìš©ìê°€ ì§€ë²ˆ ì£¼ì†Œë¥¼ ì„ íƒí–ˆì„ ê²½ìš°(J)
                addr = data.jibunAddress;
            }

            // ì‚¬ìš©ìê°€ ì„ íƒí•œ ì£¼ì†Œê°€ ë„ë¡œëª… íƒ€ì…ì¼ë•Œ ì°¸ê³ í•­ëª©ì„ ì¡°í•©í•œë‹¤.
            if(data.userSelectedType === 'R'){
                // ë²•ì •ë™ëª…ì´ ìˆì„ ê²½ìš° ì¶”ê°€í•œë‹¤. (ë²•ì •ë¦¬ëŠ” ì œì™¸)
                // ë²•ì •ë™ì˜ ê²½ìš° ë§ˆì§€ë§‰ ë¬¸ìê°€ "ë™/ë¡œ/ê°€"ë¡œ ëë‚œë‹¤.
                if(data.bname !== '' && /[ë™|ë¡œ|ê°€]$/g.test(data.bname)){
                    extraAddr += data.bname;
                }
                // ê±´ë¬¼ëª…ì´ ìˆê³ , ê³µë™ì£¼íƒì¼ ê²½ìš° ì¶”ê°€í•œë‹¤.
                if(data.buildingName !== '' && data.apartment === 'Y'){
                    extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                }
                // í‘œì‹œí•  ì°¸ê³ í•­ëª©ì´ ìˆì„ ê²½ìš°, ê´„í˜¸ê¹Œì§€ ì¶”ê°€í•œ ìµœì¢… ë¬¸ìì—´ì„ ë§Œë“ ë‹¤.
                if(extraAddr !== ''){
                    extraAddr = ' (' + extraAddr + ')';
                }
            }

            // ìš°í¸ë²ˆí˜¸ì™€ ì£¼ì†Œ ì •ë³´ë¥¼ í•´ë‹¹ í•„ë“œì— ë„£ëŠ”ë‹¤.
            const addressInput = document.getElementById(addressInputId);
            if (addressInput) {
                addressInput.value = addr + extraAddr;
            }

            // ìƒì„¸ì£¼ì†Œ ì…ë ¥ë€ì´ ìˆìœ¼ë©´ í¬ì»¤ìŠ¤ë¥¼ ì´ë™í•œë‹¤.
            if (detailAddressInputId) {
                const detailAddressInput = document.getElementById(detailAddressInputId);
                if (detailAddressInput) {
                    detailAddressInput.focus();
                }
            }

            // ì£¼ì†Œë¡œë¶€í„° ìœ„ë„/ê²½ë„ë¥¼ ê°€ì ¸ì™€ì„œ ì½œë°± í•¨ìˆ˜ ì‹¤í–‰
            if (callback && typeof callback === 'function') {
                getCoordinatesFromAddress(addr, callback);
            }

            console.log('ì£¼ì†Œ ê²€ìƒ‰ ì™„ë£Œ:', {
                zonecode: data.zonecode,
                address: addr + extraAddr,
                roadAddress: data.roadAddress,
                jibunAddress: data.jibunAddress
            });
        }
    }).open();
}

/**
 * ì£¼ì†Œë¥¼ ì´ìš©í•´ì„œ ìœ„ë„/ê²½ë„ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
 * @param {string} address - ê²€ìƒ‰í•  ì£¼ì†Œ
 * @param {function} callback - ì¢Œí‘œë¥¼ ë°›ì„ ì½œë°± í•¨ìˆ˜ (latitude, longitudeë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ìŒ)
 */
function getCoordinatesFromAddress(address, callback) {
    // ì£¼ì†Œ-ì¢Œí‘œ ë³€í™˜ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
    const geocoder = new kakao.maps.services.Geocoder();

    // ì£¼ì†Œë¡œ ì¢Œí‘œë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤
    geocoder.addressSearch(address, function(result, status) {
        // ì •ìƒì ìœ¼ë¡œ ê²€ìƒ‰ì´ ì™„ë£Œëìœ¼ë©´
        if (status === kakao.maps.services.Status.OK) {
            const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
            
            console.log('ì£¼ì†Œë¡œë¶€í„° ì¢Œí‘œ ë³€í™˜ ì„±ê³µ:', {
                address: address,
                latitude: result[0].y,
                longitude: result[0].x
            });

            // ì½œë°± í•¨ìˆ˜ì— ìœ„ë„/ê²½ë„ ì „ë‹¬
            if (callback && typeof callback === 'function') {
                callback(parseFloat(result[0].y), parseFloat(result[0].x));
            }
        } else {
            console.error('ì£¼ì†Œë¡œë¶€í„° ì¢Œí‘œ ë³€í™˜ ì‹¤íŒ¨:', status);
            alert('ì£¼ì†Œë¡œë¶€í„° ì¢Œí‘œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }
    });
}

/**
 * íšŒì›ê°€ì… í˜ì´ì§€ì—ì„œ ì‹œì„¤ ì£¼ì†Œ ê²€ìƒ‰ì— ì‚¬ìš©ë˜ëŠ” í•¨ìˆ˜
 * ì£¼ì†Œ ì„ íƒ ì‹œ ìë™ìœ¼ë¡œ ìœ„ë„/ê²½ë„ë¥¼ íˆë“  í•„ë“œì— ì„¤ì •
 */
function searchFacilityAddress() {
    console.log('searchFacilityAddress í•¨ìˆ˜ í˜¸ì¶œë¨');
    
    // ê¸°ì¡´ ì£¼ì†Œê°€ ìˆëŠ”ì§€ í™•ì¸
    const currentAddress = document.getElementById('facilityAddress').value;
    if (currentAddress && currentAddress.trim() !== '') {
        const confirmChange = confirm('ê¸°ì¡´ ì£¼ì†Œê°€ ìˆìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ì£¼ì†Œë¡œ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\ní˜„ì¬ ì£¼ì†Œ: ' + currentAddress);
        if (!confirmChange) {
            console.log('ì£¼ì†Œ ë³€ê²½ ì·¨ì†Œë¨');
            return;
        }
    }
    
    // Daum ìš°í¸ë²ˆí˜¸ ì„œë¹„ìŠ¤ ì§ì ‘ ì‚¬ìš©
    new daum.Postcode({
        oncomplete: function(data) {
            console.log('ì£¼ì†Œ ì„ íƒ ì™„ë£Œ:', data);
            
            // ì£¼ì†Œ ì¡°í•©
            let addr = '';
            let extraAddr = '';
            
            if (data.userSelectedType === 'R') {
                addr = data.roadAddress;
            } else {
                addr = data.jibunAddress;
            }
            
            if(data.userSelectedType === 'R'){
                if(data.bname !== '' && /[ë™|ë¡œ|ê°€]$/g.test(data.bname)){
                    extraAddr += data.bname;
                }
                if(data.buildingName !== '' && data.apartment === 'Y'){
                    extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                }
                if(extraAddr !== ''){
                    extraAddr = ' (' + extraAddr + ')';
                }
            }
            
            const finalAddress = addr + extraAddr;
            
            // ì£¼ì†Œ í•„ë“œì— ì„¤ì •
            const addressInput = document.getElementById('facilityAddress');
            if (addressInput) {
                // readonly ì†ì„± ì„ì‹œ ì œê±°
                addressInput.removeAttribute('readonly');
                addressInput.value = finalAddress;
                // readonly ì†ì„± ë‹¤ì‹œ ì ìš©
                addressInput.setAttribute('readonly', 'readonly');
                console.log('ì£¼ì†Œ ì„¤ì • ì™„ë£Œ:', finalAddress);
                
                // ì‹œê°ì  í”¼ë“œë°± - ë°°ê²½ìƒ‰ ì ì‹œ ë³€ê²½
                addressInput.style.backgroundColor = '#d4edda';
                setTimeout(function() {
                    addressInput.style.backgroundColor = '';
                }, 1000);
            } else {
                console.error('facilityAddress í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            }
            
            // ìƒì„¸ì£¼ì†Œ ì…ë ¥ë€ì— í¬ì»¤ìŠ¤
            const detailAddressInput = document.getElementById('detailAddress');
            if (detailAddressInput) {
                detailAddressInput.focus();
            }
            
            // ì£¼ì†Œë¡œë¶€í„° ìœ„ë„/ê²½ë„ ê°€ì ¸ì˜¤ê¸°
            getCoordinatesFromAddress(addr, function(latitude, longitude) {
                // ìœ„ë„/ê²½ë„ë¥¼ íˆë“  í•„ë“œì— ì„¤ì •
                const latitudeInput = document.getElementById('latitude');
                const longitudeInput = document.getElementById('longitude');
                
                if (latitudeInput) {
                    latitudeInput.value = latitude;
                    console.log('ìœ„ë„ ì„¤ì •:', latitude);
                } else {
                    console.error('latitude í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
                }
                
                if (longitudeInput) {
                    longitudeInput.value = longitude;
                    console.log('ê²½ë„ ì„¤ì •:', longitude);
                } else {
                    console.error('longitude í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
                }
                
                // ìœ„ë„/ê²½ë„ ì„¤ì • ì™„ë£Œ ì•Œë¦¼
                const notification = document.createElement('div');
                notification.innerHTML = `
                    <div class="alert alert-success alert-dismissible fade show position-fixed" 
                         style="top: 20px; right: 20px; z-index: 9999; max-width: 300px;">
                        <i class="fas fa-check-circle me-2"></i>
                        ì£¼ì†Œì™€ ìœ„ì¹˜ ì¢Œí‘œê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤!
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                `;
                document.body.appendChild(notification);
                
                // 3ì´ˆ í›„ ìë™ ì œê±°
                setTimeout(function() {
                    if (notification && notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 3000);
                
                console.log('ì‹œì„¤ ìœ„ì¹˜ ì¢Œí‘œ ì„¤ì • ì™„ë£Œ:', { latitude, longitude });
                
                // ë¯¸ë¦¬ë³´ê¸° ì§€ë„ ì»¨í…Œì´ë„ˆ í‘œì‹œ
                const mapPreviewContainer = document.getElementById('mapPreviewContainer');
                if (mapPreviewContainer) {
                    mapPreviewContainer.style.display = 'block';
                }
                
                // ë¯¸ë¦¬ë³´ê¸° ì§€ë„ê°€ ìˆë‹¤ë©´ í•´ë‹¹ ìœ„ì¹˜ë¡œ ì´ë™
                updatePreviewMap(latitude, longitude);
            });
        },
        onclose: function(state) {
            console.log('ì£¼ì†Œ ê²€ìƒ‰ ì°½ ë‹«í˜. ìƒíƒœ:', state);
        }
    }).open();
}

/**
 * ì£¼ì†Œ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë¯¸ë¦¬ë³´ê¸° ì§€ë„ì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
 * @param {number} latitude - ìœ„ë„
 * @param {number} longitude - ê²½ë„
 */
function updatePreviewMap(latitude, longitude) {
    const previewMapContainer = document.getElementById('previewMap');
    if (!previewMapContainer) return;

    // ë¯¸ë¦¬ë³´ê¸° ì§€ë„ ìƒì„± ë˜ëŠ” ì—…ë°ì´íŠ¸
    const coords = new kakao.maps.LatLng(latitude, longitude);
    
    if (!window.previewMap) {
        // ì§€ë„ê°€ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±
        const mapOption = {
            center: coords,
            level: 3
        };
        window.previewMap = new kakao.maps.Map(previewMapContainer, mapOption);
    } else {
        // ê¸°ì¡´ ì§€ë„ê°€ ìˆìœ¼ë©´ ì¤‘ì‹¬ ì´ë™
        window.previewMap.setCenter(coords);
    }

    // ê¸°ì¡´ ë§ˆì»¤ ì œê±°
    if (window.previewMarker) {
        window.previewMarker.setMap(null);
    }

    // ìƒˆ ë§ˆì»¤ ì¶”ê°€
    window.previewMarker = new kakao.maps.Marker({
        position: coords,
        map: window.previewMap
    });

    console.log('ë¯¸ë¦¬ë³´ê¸° ì§€ë„ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
}
````

## File: src/main/resources/templates/facility/manage.html
````html
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/header :: header}">
    <title>ì‹œì„¤ ê´€ë¦¬ - ë¼ì´íŠ¸ì¼€ì–´</title>
</head>

<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="container my-4">
    <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
            <li class="breadcrumb-item"><a href="/facility/search">ì‹œì„¤ ì°¾ê¸°</a></li>
            <li class="breadcrumb-item active" aria-current="page">ë‚´ ì‹œì„¤ ê´€ë¦¬</li>
        </ol>
    </nav>
    <div class="row">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-building me-2"></i>ë‚´ ì‹œì„¤ ê´€ë¦¬
                    </h3>
                </div>
                <div class="card-body">
                    <!-- ì‹œì„¤ ì •ë³´ê°€ ì—†ëŠ” ê²½ìš° -->
                    <div th:if="${#lists.isEmpty(facilities)}" class="text-center py-5">
                        <i class="fas fa-building fa-3x text-muted mb-3"></i>
                        <h4 class="text-muted">ë“±ë¡ëœ ì‹œì„¤ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤</h4>
                        <p class="text-muted">ì‹œì„¤ ì •ë³´ë¥¼ ë“±ë¡í•˜ì—¬ êµ¬ì¸êµ¬ì§ê³¼ ë¦¬ë·° ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•´ë³´ì„¸ìš”.</p>
                        <a th:href="@{/facility/register}" class="btn btn-primary btn-lg">
                            <i class="fas fa-plus me-2"></i>ì‹œì„¤ ë“±ë¡í•˜ê¸°
                        </a>
                    </div>

                    <!-- ì‹œì„¤ ì •ë³´ê°€ ìˆëŠ” ê²½ìš° -->
                    <div th:if="${not #lists.isEmpty(facilities)}">
                        <div class="row">
                            <!-- ì™¼ìª½: ì‹œì„¤ ëª©ë¡ (40%) -->
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">
                                            <i class="fas fa-list me-2"></i>ë‚´ ì‹œì„¤ ëª©ë¡ 
                                            <span class="badge bg-primary ms-2" th:text="${facilityCount}">0</span>
                                        </h5>
                                    </div>
                                    <div class="card-body p-0">
                                        <div class="list-group list-group-flush">
                                            <a th:each="facility : ${facilities}" 
                                               href="#" 
                                               class="list-group-item list-group-item-action facility-item"
                                               th:data-facility-id="${facility.facilityId}"
                                               th:data-facility-info="${facility}">
                                                <div class="d-flex w-100 justify-content-between">
                                                    <h6 class="mb-1" th:text="${facility.facilityName}">ì‹œì„¤ëª…</h6>
                                                    <small>
                                                        <span th:if="${facility.approvalStatus == 'APPROVED'}" class="badge bg-success">ìŠ¹ì¸ì™„ë£Œ</span>
                                                        <span th:if="${facility.approvalStatus == 'PENDING'}" class="badge bg-warning">ìŠ¹ì¸ëŒ€ê¸°</span>
                                                        <span th:if="${facility.approvalStatus == 'REJECTED'}" class="badge bg-danger">ìŠ¹ì¸ê±°ì ˆ</span>
                                                    </small>
                                                </div>
                                                <p class="mb-1 text-muted small" th:text="${facility.address}">ì£¼ì†Œ</p>
                                                <small class="text-muted">
                                                    <i class="fas fa-star me-1"></i>
                                                    <span th:text="${facility.averageRating ?: '0.0'}">0.0</span>
                                                    <span class="mx-2">|</span>
                                                    <i class="fas fa-comment me-1"></i>
                                                    <span th:text="${facility.reviewCount ?: '0'}">0</span>
                                                </small>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ì˜¤ë¥¸ìª½: ì„ íƒëœ ì‹œì„¤ ìƒì„¸ ê´€ë¦¬ (60%) -->
                            <div class="col-md-8">
                                <!-- ì‹œì„¤ ì„ íƒ ì•ˆë‚´ (ì´ˆê¸° ìƒíƒœ) -->
                                <div id="no-selection" class="text-center py-5">
                                    <i class="fas fa-arrow-left fa-3x text-muted mb-3"></i>
                                    <h5 class="text-muted">ê´€ë¦¬í•  ì‹œì„¤ì„ ì„ íƒí•´ì£¼ì„¸ìš”</h5>
                                    <p class="text-muted">ì™¼ìª½ ëª©ë¡ì—ì„œ ì‹œì„¤ì„ í´ë¦­í•˜ë©´ ìƒì„¸ ê´€ë¦¬ í™”ë©´ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>
                                </div>

                                <!-- ì„ íƒëœ ì‹œì„¤ ìƒì„¸ ì •ë³´ (ìˆ¨ê¹€ ìƒíƒœ) -->
                                <div id="facility-detail" style="display: none;">
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0" id="selected-facility-name">ì‹œì„¤ëª…</h5>
                                        </div>
                                        <div class="card-body">
                                            <!-- ìŠ¹ì¸ ìƒíƒœ -->
                                            <div id="approval-status" class="alert mb-4">
                                                <i class="fas fa-info-circle me-2"></i>
                                                <strong>ìŠ¹ì¸ ìƒíƒœ: </strong>
                                                <span id="approval-text"></span>
                                            </div>

                                            <!-- í†µê³„ ì •ë³´ -->
                                            <div class="row mb-4">
                                                <div class="col-md-3 col-sm-6 mb-3">
                                                    <div class="card bg-primary text-white text-center">
                                                        <div class="card-body">
                                                            <i class="fas fa-star fa-2x mb-2"></i>
                                                            <h4 id="avg-rating">0.0</h4>
                                                            <small>í‰ê·  í‰ì </small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 col-sm-6 mb-3">
                                                    <div class="card bg-info text-white text-center">
                                                        <div class="card-body">
                                                            <i class="fas fa-comment fa-2x mb-2"></i>
                                                            <h4 id="review-count">0</h4>
                                                            <small>ë¦¬ë·° ìˆ˜</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 col-sm-6 mb-3">
                                                    <div class="card bg-success text-white text-center">
                                                        <div class="card-body">
                                                            <i class="fas fa-briefcase fa-2x mb-2"></i>
                                                            <h4 id="job-count">0</h4>
                                                            <small>êµ¬ì¸ê³µê³  ìˆ˜</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 col-sm-6 mb-3">
                                                    <div class="card bg-warning text-white text-center">
                                                        <div class="card-body">
                                                            <i class="fas fa-users fa-2x mb-2"></i>
                                                            <h4 id="capacity">0</h4>
                                                            <small>ìˆ˜ìš©ì¸ì›</small>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- ì‹œì„¤ ê¸°ë³¸ ì •ë³´ -->
                                            <div class="row mb-4">
                                                <div class="col-12">
                                                    <h6><i class="fas fa-info-circle me-2"></i>ê¸°ë³¸ ì •ë³´</h6>
                                                    <div class="table-responsive">
                                                        <table class="table table-sm">
                                                            <tr>
                                                                <td width="30%"><strong>ì‹œì„¤ ìœ í˜•</strong></td>
                                                                <td id="facility-type">-</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>ì£¼ì†Œ</strong></td>
                                                                <td id="facility-address">-</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>ì „í™”ë²ˆí˜¸</strong></td>
                                                                <td id="facility-phone">-</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>ìš´ì˜ì‹œê°„</strong></td>
                                                                <td id="operating-hours">-</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>í™ˆí˜ì´ì§€</strong></td>
                                                                <td id="homepage">-</td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- ê´€ë¦¬ ë²„íŠ¼ë“¤ -->
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="d-flex gap-2 flex-wrap">
                                                        <a id="edit-btn" href="#" class="btn btn-primary">
                                                            <i class="fas fa-edit me-2"></i>ì‹œì„¤ ì •ë³´ ìˆ˜ì •
                                                        </a>
                                                        <a href="/job/write" class="btn btn-success">
                                                            <i class="fas fa-plus me-2"></i>êµ¬ì¸ê³µê³  ì‘ì„±
                                                        </a>
                                                        <a id="detail-btn" href="#" class="btn btn-info">
                                                            <i class="fas fa-eye me-2"></i>ì‹œì„¤ í˜ì´ì§€ ë³´ê¸°
                                                        </a>
                                                        <button type="button" id="delete-btn" class="btn btn-danger">
                                                            <i class="fas fa-trash me-2"></i>ì‹œì„¤ ì‚­ì œ
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<script>
let currentFacilityId = null;

$(document).ready(function() {
    // ì‹œì„¤ ì„ íƒ ì´ë²¤íŠ¸
    $('.facility-item').on('click', function(e) {
        e.preventDefault();
        
        // ê¸°ì¡´ ì„ íƒ ì œê±°
        $('.facility-item').removeClass('active');
        
        // í˜„ì¬ ì„ íƒ í‘œì‹œ
        $(this).addClass('active');
        
        // ì‹œì„¤ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        const facilityId = $(this).data('facility-id');
        currentFacilityId = facilityId;
        
        // ì‹œì„¤ ì •ë³´ë¥¼ data ì†ì„±ì—ì„œ ê°€ì ¸ì˜¤ê±°ë‚˜ AJAXë¡œ ì¡°íšŒ
        loadFacilityDetail(facilityId);
    });
    
    // ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸
    $('#delete-btn').on('click', function() {
        if (currentFacilityId) {
            deleteFacility(currentFacilityId);
        }
    });
});

function loadFacilityDetail(facilityId) {
    // AJAXë¡œ ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ (í†µí•©ëœ API ì‚¬ìš©)
    $.get(`/facility/facility-info/${facilityId}`, function(data) {
        if (data.success) {
            updateFacilityDetail(data.facility);
        } else {
            alert(data.message || 'ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }
    }).fail(function() {
        alert('ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    });
}

function updateFacilityDetail(facility) {
    // í™”ë©´ ì „í™˜
    $('#no-selection').hide();
    $('#facility-detail').show();
    
    // ê¸°ë³¸ ì •ë³´ ì—…ë°ì´íŠ¸
    $('#selected-facility-name').text(facility.facilityName);
    $('#facility-type').text(getFacilityTypeText(facility.facilityType));
    $('#facility-address').text(facility.address + (facility.detailAddress ? ' ' + facility.detailAddress : ''));
    $('#facility-phone').text(facility.phone || '-');
    $('#operating-hours').text(facility.operatingHours || '-');
    $('#homepage').html(facility.homepage ? 
        `<a href="${facility.homepage}" target="_blank">${facility.homepage}</a>` : '-');
    
    // í†µê³„ ì •ë³´ ì—…ë°ì´íŠ¸
    $('#avg-rating').text(facility.averageRating || '0.0');
    $('#review-count').text(facility.reviewCount || '0');
    $('#job-count').text(facility.jobCount || '0');
    $('#capacity').text(facility.capacity || '0');
    
    // ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸
    updateApprovalStatus(facility.approvalStatus);
    
    // ë²„íŠ¼ ë§í¬ ì—…ë°ì´íŠ¸
    $('#edit-btn').attr('href', `/facility/edit/${facility.facilityId}`);
    $('#detail-btn').attr('href', `/facility/detail/${facility.facilityId}`);
}

function updateApprovalStatus(status) {
    const alertDiv = $('#approval-status');
    const textSpan = $('#approval-text');
    
    alertDiv.removeClass('alert-success alert-warning alert-danger');
    
    switch(status) {
        case 'APPROVED':
            alertDiv.addClass('alert-success');
            textSpan.text('ìŠ¹ì¸ ì™„ë£Œ');
            break;
        case 'PENDING':
            alertDiv.addClass('alert-warning');
            textSpan.text('ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ (ê´€ë¦¬ì ìŠ¹ì¸ í›„ ê²€ìƒ‰ ê²°ê³¼ì— í‘œì‹œë©ë‹ˆë‹¤)');
            break;
        case 'REJECTED':
            alertDiv.addClass('alert-danger');
            textSpan.text('ìŠ¹ì¸ ê±°ì ˆ');
            break;
        default:
            alertDiv.addClass('alert-secondary');
            textSpan.text('ìƒíƒœ ë¶ˆëª…');
    }
}

function getFacilityTypeText(type) {
    switch(type) {
        case 'NURSING_HOME': return 'ìš”ì–‘ì›';
        case 'HOSPITAL': return 'ìš”ì–‘ë³‘ì›';
        case 'DAY_CARE': return 'ë°ì´ì¼€ì–´ì„¼í„°';
        default: return type;
    }
}

function deleteFacility(facilityId) {
    if (confirm('ì •ë§ë¡œ ì´ ì‹œì„¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ì‹œì„¤ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
        $.post(`/facility/delete/${facilityId}`, function() {
            alert('ì‹œì„¤ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            location.reload();
        }).fail(function() {
            alert('ì‹œì„¤ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        });
    }
}
</script>

</body>
</html>
````

## File: src/main/resources/templates/member/deleteMember.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>íšŒì›íƒˆí‡´ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item"><a href="/member/myinfo/edit">ë‚´ ì •ë³´</a></li>
                <li class="breadcrumb-item active" aria-current="page">íšŒì›íƒˆí‡´</li>
            </ol>
        </nav>
        
        <div class="row justify-content-center">
            <div class="col-md-6 col-lg-5">
                <!-- íšŒì›íƒˆí‡´ í™•ì¸ ì¹´ë“œ -->
                <div class="card shadow border-danger">
                    <div class="card-body p-4">
                        <!-- ì œëª© -->
                        <div class="text-center mb-4">
                            <h3 class="card-title fw-bold text-danger">
                                <i class="fas fa-user-times me-2"></i>
                                íšŒì›íƒˆí‡´
                            </h3>
                            <p class="text-muted">ì •ë§ë¡œ íƒˆí‡´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                        </div>
                        
                        <!-- íƒˆí‡´ ì•ˆë‚´ -->
                        <div class="alert alert-danger" role="alert">
                            <h6 class="alert-heading">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                íƒˆí‡´ ì‹œ ì£¼ì˜ì‚¬í•­
                            </h6>
                            <ul class="mb-0 small">
                                <li>íšŒì›íƒˆí‡´ ì‹œ ëª¨ë“  ê°œì¸ì •ë³´ê°€ ì‚­ì œë©ë‹ˆë‹¤</li>
                                <li>ì‘ì„±í•˜ì‹  ê²Œì‹œê¸€ê³¼ ëŒ“ê¸€ì€ ìœ ì§€ë©ë‹ˆë‹¤</li>
                                <li>ë™ì¼í•œ ì•„ì´ë””ë¡œ ì¬ê°€ì…ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤</li>
                                <li>íƒˆí‡´ ì²˜ë¦¬ í›„ì—ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤</li>
                            </ul>
                        </div>
                        
                        <!-- íšŒì› ì •ë³´ í™•ì¸ -->
                        <div class="card mb-4">
                            <div class="card-body">
                                <h6 class="card-title">íƒˆí‡´í•  íšŒì›ì •ë³´</h6>
                                <div class="row">
                                    <div class="col-4 text-muted">ì•„ì´ë””:</div>
                                    <div class="col-8" th:text="${member.userId}">user01</div>
                                </div>
                                <div class="row">
                                    <div class="col-4 text-muted">ì´ë¦„:</div>
                                    <div class="col-8" th:text="${member.name}">í™ê¸¸ë™</div>
                                </div>
                                <div class="row">
                                    <div class="col-4 text-muted">ì´ë©”ì¼:</div>
                                    <div class="col-8" th:text="${member.email ?: 'ë“±ë¡ëœ ì´ë©”ì¼ ì—†ìŒ'}">example@email.com</div>
                                </div>
                                <div class="row">
                                    <div class="col-4 text-muted">ê°€ì…ì¼:</div>
                                    <div class="col-8" th:text="${#temporals.format(member.createdAt, 'yyyy-MM-dd')}">2024-01-01</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í¼ -->
                        <form id="deleteMemberForm" th:action="@{/member/mypage/delete}" method="post" novalidate>
                            <div class="mb-3">
                                <label for="password" class="form-label">
                                    <i class="fas fa-lock me-1"></i>í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ <span class="text-danger">*</span>
                                </label>
                                <div class="input-group">
                                    <input type="password" 
                                           class="form-control" 
                                           id="password" 
                                           name="password"
                                           placeholder="íƒˆí‡´ í™•ì¸ì„ ìœ„í•´ í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                                           required>
                                    <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div id="passwordFeedback" class="invalid-feedback"></div>
                            </div>
                            
                            <!-- ì‘ì„± ì½˜í…ì¸  ì•ˆë‚´ -->
                            <div th:if="${contentCounts.total > 0}" class="alert alert-warning mb-3" role="alert">
                                <h6 class="alert-heading">
                                    <i class="fas fa-edit me-2"></i>
                                    ì‘ì„±í•˜ì‹  ì½˜í…ì¸ ê°€ ìˆìŠµë‹ˆë‹¤
                                </h6>
                                <ul class="mb-2 small">
                                    <li th:if="${contentCounts.board > 0}">ê²Œì‹œê¸€: <strong th:text="${contentCounts.board}">..</strong>ê°œ</li>
                                    <li th:if="${contentCounts.review > 0}">ë¦¬ë·°: <strong th:text="${contentCounts.review}">..</strong>ê°œ</li>
                                    <li th:if="${contentCounts.job > 0}">êµ¬ì¸êµ¬ì§: <strong th:text="${contentCounts.job}">..</strong>ê°œ</li>
                                </ul>
                                <div class="mb-3">
                                    <label class="form-label fw-bold text-warning">ì½˜í…ì¸  ì²˜ë¦¬ ë°©ì‹ ì„ íƒ <span class="text-danger">*</span></label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="deleteOption" id="anonymousOption" value="anonymous" checked required>
                                        <label class="form-check-label" for="anonymousOption">
                                            <strong>ìµëª…í™”</strong> - ê°œì¸ì •ë³´ë§Œ ì‚­ì œ, ì½˜í…ì¸ ëŠ” "íƒˆí‡´íšŒì›"ìœ¼ë¡œ í‘œì‹œ
                                        </label>
                                        <div class="form-text text-muted small">ì¶”ì²œ: ì‘ì„±í•œ ì½˜í…ì¸ ê°€ ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤</div>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="deleteOption" id="completeOption" value="complete" required>
                                        <label class="form-check-label" for="completeOption">
                                            <strong class="text-danger">ì™„ì „ì‚­ì œ</strong> - ëª¨ë“  ê°œì¸ì •ë³´ì™€ ì½˜í…ì¸  ì™„ì „ ì‚­ì œ
                                        </label>
                                        <div class="form-text text-danger small">ê²½ê³ : ì‘ì„±í•œ ëª¨ë“  ê²Œì‹œê¸€, ë¦¬ë·° ë“±ì´ ì˜êµ¬ ì‚­ì œë©ë‹ˆë‹¤</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ì½˜í…ì¸ ê°€ ì—†ëŠ” ê²½ìš° ìˆ¨ê²¨ì§„ í•„ë“œ -->
                            <input th:if="${contentCounts.total == 0}" type="hidden" name="deleteOption" value="complete">
                            
                            <!-- ì´ë¦„ í™•ì¸ ì…ë ¥ -->
                            <div class="mb-3">
                                <label for="confirmName" class="form-label">
                                    <i class="fas fa-user-check me-1"></i>íƒˆí‡´ í™•ì¸ì„ ìœ„í•´ ë³¸ì¸ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” <span class="text-danger">*</span>
                                </label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light text-muted">ì´ë¦„:</span>
                                    <input type="text" 
                                           class="form-control" 
                                           id="confirmName" 
                                           name="confirmName"
                                           placeholder="ì •í™•í•œ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
                                           autocomplete="off"
                                           spellcheck="false"
                                           required>
                                </div>
                                <div class="form-text text-muted small">
                                    <i class="fas fa-info-circle me-1"></i>
                                    íšŒì›ì •ë³´ì— ë“±ë¡ëœ ì´ë¦„ '<strong th:text="${member.name}">í™ê¸¸ë™</strong>'ì„ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.
                                </div>
                                <div id="nameValidationFeedback" class="invalid-feedback"></div>
                            </div>
                            
                            <!-- íƒˆí‡´ í™•ì¸ ì²´í¬ë°•ìŠ¤ -->
                            <div class="mb-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="confirmDelete" required>
                                    <label class="form-check-label text-danger fw-bold" for="confirmDelete">
                                        ìœ„ì˜ ì£¼ì˜ì‚¬í•­ì„ ëª¨ë‘ í™•ì¸í–ˆìœ¼ë©°, íšŒì›íƒˆí‡´ì— ë™ì˜í•©ë‹ˆë‹¤.
                                    </label>
                                    <div class="invalid-feedback">
                                        íƒˆí‡´ ë™ì˜ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ë²„íŠ¼ë“¤ -->
                            <div class="row g-2">
                                <div class="col-6">
                                    <a href="/member/myinfo/edit" class="btn btn-secondary w-100">
                                        <i class="fas fa-arrow-left me-1"></i>
                                        ì·¨ì†Œ
                                    </a>
                                </div>
                                <div class="col-6">
                                    <button type="submit" class="btn btn-danger w-100" id="submitButton" disabled>
                                        <i class="fas fa-user-times me-2"></i>
                                        íƒˆí‡´í•˜ê¸°
                                    </button>
                                </div>
                            </div>
                        </form>
                        
                        <!-- ì¶”ê°€ ì•ˆë‚´ -->
                        <hr class="my-4">
                        <div class="text-center">
                            <small class="text-muted">
                                <i class="fas fa-info-circle me-1"></i>
                                ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ <a href="/board?type=qna">Q&A ê²Œì‹œíŒ</a>ì„ ì´ìš©í•´ì£¼ì„¸ìš”.
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<!-- íšŒì›íƒˆí‡´ ì „ìš© JavaScript -->
<script src="/js/delete-member.js"></script>

</body>
</html>
````

## File: src/main/resources/templates/index.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>CareLink - ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ ì‚¬ì´íŠ¸</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>
    
    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <!-- íˆì–´ë¡œ ì„¹ì…˜ -->
        <section class="bg-gradient-primary text-white py-5">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-6">
                        <h1 class="display-4 fw-bold mb-3">
                            <i class="fas fa-heart text-danger me-3"></i>
                            CareLink
                        </h1>
                        <p class="lead mb-4">
                            ë¯¿ì„ ìˆ˜ ìˆëŠ” ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ í”Œë«í¼<br>
                            ì¢‹ì€ ì‚¬ëŒê³¼ ì¢‹ì€ ì‹œì„¤ì„ ì—°ê²°í•©ë‹ˆë‹¤
                        </p>
                        <div class="d-flex flex-wrap gap-3">
                            <a href="/facility/search" class="btn btn-light btn-lg">
                                <i class="fas fa-map-marker-alt me-2"></i>
                                ì‹œì„¤ ì°¾ê¸°
                            </a>
                            <a href="/job?type=recruit" class="btn btn-outline-light btn-lg">
                                <i class="fas fa-briefcase me-2"></i>
                                ì±„ìš©ì •ë³´
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-6 text-center">
                        <i class="fas fa-hospital-alt" style="font-size: 15rem; opacity: 0.3;"></i>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- í†µê³„ ì„¹ì…˜ -->
        <section class="py-5 bg-light">
            <div class="container">
                <h2 class="text-center mb-5">
                    <i class="fas fa-chart-bar text-primary me-2"></i>
                    ì‹¤ì‹œê°„ í˜„í™©
                </h2>
                <div class="row">
                    <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
                        <div class="stats-card">
                            <h3 th:text="${facilityCount}">150</h3>
                            <p><i class="fas fa-building me-2"></i>ë“±ë¡ ì‹œì„¤</p>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
                        <div class="stats-card">
                            <h3 th:text="${jobCount}">89</h3>
                            <p><i class="fas fa-briefcase me-2"></i>ì±„ìš© ê³µê³ </p>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
                        <div class="stats-card">
                            <h3 th:text="${reviewCount}">234</h3>
                            <p><i class="fas fa-star me-2"></i>ì‹œì„¤ ë¦¬ë·°</p>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
                        <div class="stats-card">
                            <h3 th:text="${memberCount}">512</h3>
                            <p><i class="fas fa-users me-2"></i>ê°€ì… íšŒì›</p>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
                        <div class="stats-card">
                            <h3 th:text="${boardCount}">324</h3>
                            <p><i class="fas fa-clipboard-list me-2"></i>ì •ë³´ ê²Œì‹œê¸€</p>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
                        <div class="stats-card">
                            <h3>5</h3>
                            <p><i class="fas fa-handshake me-2"></i>ìš´ì˜ ë…„ìˆ˜</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- ì£¼ìš” ê¸°ëŠ¥ ì„¹ì…˜ -->
        <section class="py-5">
            <div class="container">
                <h2 class="text-center mb-5">
                    <i class="fas fa-star text-warning me-2"></i>
                    ì£¼ìš” ê¸°ëŠ¥
                </h2>
                <div class="row">
                    <!-- ì‹œì„¤ ê²€ìƒ‰ -->
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <div class="mb-3">
                                    <i class="fas fa-map-marker-alt fa-3x text-primary"></i>
                                </div>
                                <h5 class="card-title">ì‹œì„¤ ì°¾ê¸°</h5>
                                <p class="card-text">
                                    ì§€ë„ë¥¼ í†µí•´ ì£¼ë³€ ìš”ì–‘ ì‹œì„¤ì„ ì‰½ê²Œ ì°¾ì•„ë³´ì„¸ìš”.
                                    ìƒì„¸ ì •ë³´ì™€ ë¦¬ë·°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                </p>
                                <a href="/facility/search" class="btn btn-primary">
                                    <i class="fas fa-search me-1"></i>ê²€ìƒ‰í•˜ê¸°
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- êµ¬ì¸ì •ë³´ -->
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <div class="mb-3">
                                    <i class="fas fa-briefcase fa-3x text-success"></i>
                                </div>
                                <h5 class="card-title">êµ¬ì¸ì •ë³´</h5>
                                <p class="card-text">
                                    ìš”ì–‘ì›ì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ êµ¬ì¸ ì •ë³´ë¥¼ 
                                    í™•ì¸í•˜ê³  ì§€ì›í•´ë³´ì„¸ìš”.
                                </p>
                                <a href="/job?type=recruit" class="btn btn-success">
                                    <i class="fas fa-eye me-1"></i>ë³´ëŸ¬ê°€ê¸°
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- êµ¬ì§ì •ë³´ -->
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <div class="mb-3">
                                    <i class="fas fa-user-tie fa-3x text-info"></i>
                                </div>
                                <h5 class="card-title">êµ¬ì§ì •ë³´</h5>
                                <p class="card-text">
                                    êµ¬ì§ìë“¤ì˜ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  
                                    ìš°ìˆ˜í•œ ì¸ì¬ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.
                                </p>
                                <a href="/job?type=search" class="btn btn-info">
                                    <i class="fas fa-search me-1"></i>ì°¾ì•„ë³´ê¸°
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ë¦¬ë·° -->
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <div class="mb-3">
                                    <i class="fas fa-star fa-3x text-warning"></i>
                                </div>
                                <h5 class="card-title">ì‹œì„¤ ë¦¬ë·°</h5>
                                <p class="card-text">
                                    ì‹¤ì œ ì´ìš©ìë“¤ì˜ ì†”ì§í•œ ë¦¬ë·°ë¥¼ í†µí•´
                                    ì‹œì„¤ ì •ë³´ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.
                                </p>
                                <a href="/review" class="btn btn-warning">
                                    <i class="fas fa-comments me-1"></i>ë¦¬ë·°ë³´ê¸°
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ì¶”ê°€ ê¸°ëŠ¥ ì„¹ì…˜ -->
                <div class="row mt-4">
                    <!-- ì •ë³´ë§ˆë‹¹ -->
                    <div class="col-lg-6 col-md-12 mb-4">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <div class="mb-3">
                                    <i class="fas fa-clipboard-list fa-3x text-secondary"></i>
                                </div>
                                <h5 class="card-title">ì •ë³´ë§ˆë‹¹</h5>
                                <p class="card-text">
                                    ìš”ì–‘ ê´€ë ¨ ìœ ìš©í•œ ì •ë³´ì™€ íŒ, Q&A ë“±ì„ 
                                    í™•ì¸í•˜ê³  ê³µìœ í•´ë³´ì„¸ìš”.
                                </p>
                                <a href="/board" class="btn btn-secondary">
                                    <i class="fas fa-book-open me-1"></i>ì •ë³´ë³´ê¸°
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ê³µì§€ì‚¬í•­ -->
                    <div class="col-lg-6 col-md-12 mb-4">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <div class="mb-3">
                                    <i class="fas fa-bullhorn fa-3x text-danger"></i>
                                </div>
                                <h5 class="card-title">ê³µì§€ì‚¬í•­</h5>
                                <p class="card-text">
                                    CareLinkì˜ ìƒˆë¡œìš´ ì†Œì‹ê³¼ 
                                    ì¤‘ìš”í•œ ê³µì§€ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”.
                                </p>
                                <a href="/board?type=notice" class="btn btn-danger">
                                    <i class="fas fa-bell me-1"></i>ê³µì§€ë³´ê¸°
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- íŒ€ í”„ë¡œì íŠ¸ ì•ˆë‚´ -->
        <section class="py-5 bg-light">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8 text-center">
                        <h3 class="mb-4">
                            <i class="fas fa-users text-primary me-2"></i>
                            4ì¸ íŒ€ í”„ë¡œì íŠ¸
                        </h3>
                        <p class="lead mb-4">
                            ì´ ì‚¬ì´íŠ¸ëŠ” Spring Bootë¥¼ í•™ìŠµí•˜ëŠ” 4ëª…ì˜ íŒ€ì›ì´ í˜‘ì—…í•˜ì—¬ ê°œë°œí•œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.
                        </p>
                        <div class="row">
                            <div class="col-sm-6 col-lg-3 mb-3">
                                <div class="border rounded p-3">
                                    <h6 class="text-primary">íŒ€ì› A</h6>
                                    <small>íšŒì› ê´€ë¦¬</small>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-3 mb-3">
                                <div class="border rounded p-3">
                                    <h6 class="text-success">íŒ€ì› B</h6>
                                    <small>ì‹œì„¤ ê²€ìƒ‰</small>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-3 mb-3">
                                <div class="border rounded p-3">
                                    <h6 class="text-info">íŒ€ì› C</h6>
                                    <small>êµ¬ì¸êµ¬ì§</small>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-3 mb-3">
                                <div class="border rounded p-3">
                                    <h6 class="text-warning">íŒ€ì› D</h6>
                                    <small>ë¦¬ë·°&ê²Œì‹œíŒ</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>
    
    <script>
        $(document).ready(function() {
            // ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜
            $('.card').addClass('fade-in');
            
            // í†µê³„ ì¹´ìš´í„° ì• ë‹ˆë©”ì´ì…˜
            $('.stats-card h3').each(function() {
                var $this = $(this);
                var countTo = parseInt($this.text());
                
                $({ countNum: 0 }).animate({
                    countNum: countTo
                }, {
                    duration: 2000,
                    easing: 'linear',
                    step: function() {
                        $this.text(Math.floor(this.countNum));
                    },
                    complete: function() {
                        $this.text(this.countNum);
                    }
                });
            });
        });
    </script>
</body>
</html>
````

## File: Dockerfile
````dockerfile
FROM openjdk:11-jre-slim

WORKDIR /app

# ì• í”Œë¦¬ì¼€ì´ì…˜ JAR íŒŒì¼ ë³µì‚¬
COPY build/libs/*.jar app.jar

# í¬íŠ¸ ë…¸ì¶œ
EXPOSE 8080

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
ENV SPRING_PROFILES_ACTIVE=production

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
ENTRYPOINT ["java", "-jar", "app.jar"]
````

## File: src/main/java/com/example/carelink/common/BaseDTO.java
````java
package com.example.carelink.common;

import lombok.Data;
import java.time.LocalDateTime;
import com.fasterxml.jackson.annotation.JsonFormat;
/**
 * ëª¨ë“  DTO í´ë˜ìŠ¤ê°€ ìƒì†ë°›ì„ ê¸°ë³¸ í´ë˜ìŠ¤
 * ê³µí†µ í•„ë“œ(ìƒì„±ì¼ì‹œ, ìˆ˜ì •ì¼ì‹œ, ì‚­ì œì—¬ë¶€)ë¥¼ í¬í•¨
 */

@Data
public class BaseDTO {

    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")
    private LocalDateTime createdAt;  // ìƒì„±ì¼ì‹œ

    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")
    private LocalDateTime updatedAt;  // ìˆ˜ì •ì¼ì‹œ
    private boolean isDeleted;        // ì‚­ì œ ì—¬ë¶€

    // í˜ì´ì§• ê´€ë ¨ í•„ë“œ íƒ€ì…ì„ Integerë¡œ ë³€ê²½
    private Integer page;               // í˜„ì¬ í˜ì´ì§€ (ê¸°ë³¸ê°’ì€ í•„ìš”ì— ë”°ë¼ ìƒì„±ìì—ì„œ ì„¤ì •)
    private Integer pageSize;           // í˜ì´ì§€ í¬ê¸°
    private Integer offset;             // ì¡°íšŒ ì‹œì‘ ìœ„ì¹˜
    private Integer size;               // ì¡°íšŒí•  ë ˆì½”ë“œ ìˆ˜ (pageSizeì™€ ë™ì¼í•œ ì˜ë¯¸)

    // í•„ìš”í•˜ë‹¤ë©´ ì´ˆê¸°ê°’ ì„¤ì •ì„ ìœ„í•œ ìƒì„±ìë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    public BaseDTO() {
        this.page = 1;
        this.pageSize = Constants.DEFAULT_PAGE_SIZE;
        this.offset = (this.page - 1) * this.pageSize; // ì´ˆê¸° offset ê³„ì‚°
        this.size = this.pageSize;
    }

    /*
    *//**
     * í˜ì´ì§• ì²˜ë¦¬ë¥¼ ìœ„í•œ offset ê³„ì‚°
     *//*
    public int getOffset() {
        return (page - 1) * pageSize;
    }
    
    *//**
     * í˜ì´ì§•ì„ ìœ„í•œ size ì„¤ì • (MyBatisìš©)
     *//*
    public void setSize(int size) {
        this.size = size;
        this.pageSize = size;
    }
    
    *//**
     * í˜ì´ì§•ì„ ìœ„í•œ page ì„¤ì • (offset ìë™ ê³„ì‚°)
     *//*
    public void setPage(int page) {
        this.page = page;
        this.offset = (page - 1) * this.pageSize;  // offset ìë™ ê³„ì‚°
    }
    */

}
````

## File: src/main/java/com/example/carelink/dao/MemberMapper.java
````java
package com.example.carelink.dao;

import com.example.carelink.dto.MemberDTO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;

import java.util.List;

/**
 * íšŒì› ê´€ë¦¬ ë§¤í¼ ì¸í„°í˜ì´ìŠ¤
 * íŒ€ì› A ë‹´ë‹¹: íšŒì› ê´€ë¦¬ ë°ì´í„° ì•¡ì„¸ìŠ¤
 */
@Mapper
public interface MemberMapper {

    /**
     * ì‚¬ìš©ì IDë¡œ íšŒì› ì •ë³´ ì¡°íšŒ
     * is_deleted = FALSE ì¸ í™œì„±í™”ëœ íšŒì›ë§Œ ì¡°íšŒí•˜ë„ë¡ XML ì¿¼ë¦¬ ìˆ˜ì • í•„ìš”
     */
    MemberDTO findByUserId(@Param("userId") String userId);

    /**
     * íšŒì› IDë¡œ íšŒì› ì •ë³´ ì¡°íšŒ
     * is_deleted = FALSE ì¸ í™œì„±í™”ëœ íšŒì›ë§Œ ì¡°íšŒí•˜ë„ë¡ XML ì¿¼ë¦¬ ìˆ˜ì • í•„ìš”
     */
    MemberDTO findById(@Param("memberId") Long memberId);

    /**
     * ì´ë©”ì¼ë¡œ íšŒì› ì •ë³´ ì¡°íšŒ
     * is_deleted = FALSE ì¸ í™œì„±í™”ëœ íšŒì›ë§Œ ì¡°íšŒí•˜ë„ë¡ XML ì¿¼ë¦¬ ìˆ˜ì • í•„ìš”
     */
    MemberDTO findByEmail(@Param("email") String email);

    /**
     * íšŒì› ì •ë³´ ì €ì¥
     */
    int insertMember(MemberDTO memberDTO); // insertëŠ” ë³´í†µ int(ì˜í–¥ë°›ì€ í–‰ ìˆ˜) ë°˜í™˜

    /**
     * íšŒì› ì •ë³´ ìˆ˜ì •
     */
    int updateMember(MemberDTO memberDTO); // updateëŠ” ë³´í†µ int(ì˜í–¥ë°›ì€ í–‰ ìˆ˜) ë°˜í™˜

    /**
     * íšŒì› íƒˆí‡´ (ë…¼ë¦¬ ì‚­ì œ) - ë©”ì„œë“œ ì´ë¦„ì„ ì¢€ ë” ëª…í™•í•˜ê²Œ ë³€ê²½
     * ê¸°ì¡´ì˜ deleteMemberë¥¼ softDeleteMemberë¡œ ë³€ê²½í•˜ê³  íŒŒë¼ë¯¸í„°ë„ userIdë¡œ ë³€ê²½
     */
    int softDeleteMember(@Param("userId") String userId); // deleteMember -> softDeleteMemberë¡œ ë³€ê²½, memberId -> userId

    /**
     * ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
     * MemberDTOë¥¼ ë°›ì•„ passwordë§Œ ì—…ë°ì´íŠ¸í•˜ëŠ” ìš©ë„
     */
    int updatePassword(MemberDTO memberDTO); // ìƒˆë¡œ ì¶”ê°€

    /**
     * ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì •ë³´ ì—…ë°ì´íŠ¸ (ì‹¤íŒ¨ íšŸìˆ˜ ì´ˆê¸°í™”, ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„ ì—…ë°ì´íŠ¸)
     */
    int updateLoginSuccess(@Param("memberId") Long memberId); // updateëŠ” ë³´í†µ int(ì˜í–¥ë°›ì€ í–‰ ìˆ˜) ë°˜í™˜

    /**
     * ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ì‹¤íŒ¨ íšŸìˆ˜ ì¦ê°€
     */
    int updateLoginFail(@Param("memberId") Long memberId); // updateëŠ” ë³´í†µ int(ì˜í–¥ë°›ì€ í–‰ ìˆ˜) ë°˜í™˜

    /**
     * ì „ì²´ íšŒì› ìˆ˜ ì¡°íšŒ
     */
    int getTotalCount();

    /**
     * í˜ì´ì§•ëœ íšŒì› ëª©ë¡ ì¡°íšŒ (ê´€ë¦¬ììš©)
     */
    List<MemberDTO> findMembersWithPaging(MemberDTO searchDTO);

    /**
     * íŠ¹ì • ì—­í• ì˜ íšŒì› ëª©ë¡ ì¡°íšŒ
     */
    List<MemberDTO> findMembersByRole(@Param("role") String role);

    /**
     * íšŒì› ìƒíƒœ ë³€ê²½ (í™œì„±í™”/ë¹„í™œì„±í™”)
     */
    void updateMemberStatus(@Param("memberId") Long memberId, @Param("isActive") boolean isActive);

    /**
     * ì „ì²´ íšŒì› ìˆ˜ ì¡°íšŒ (í†µê³„ìš©)
     */
    int getMemberCount();

    /**
     * íŠ¹ì • ì‚¬ìš©ì IDê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
     * (í™œì„±/ë¹„í™œì„± ì—¬ë¶€, ì‚­ì œ ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ ID ìì²´ì˜ ì¤‘ë³µ í™•ì¸)
     */
    boolean existsByUserId(@Param("userId") String userId);

    /**
     * íŠ¹ì • ì´ë©”ì¼ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
     * (í™œì„±/ë¹„í™œì„± ì—¬ë¶€, ì‚­ì œ ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ ì´ë©”ì¼ ìì²´ì˜ ì¤‘ë³µ í™•ì¸)
     */
    boolean existsByEmail(@Param("email") String email);
    
    /**
     * íšŒì› ìµëª…í™” (ê°œì¸ì •ë³´ë§Œ ì‚­ì œ, ì½˜í…ì¸ ëŠ” ìœ ì§€)
     */
    int anonymizeMember(@Param("userId") String userId);
    
    /**
     * íšŒì› ë¬¼ë¦¬ ì‚­ì œ (ì™„ì „ ì‚­ì œ)
     */
    int hardDeleteMember(@Param("userId") String userId);

    // ================== ê´€ë¦¬ììš© ë©”ì„œë“œë“¤ ==================

    /**
     * ì‹œì„¤ íšŒì› ìˆ˜ ì¡°íšŒ (ê´€ë¦¬ììš©)
     */
    int getFacilityMemberCount();

    /**
     * ì¼ë°˜ íšŒì› ìˆ˜ ì¡°íšŒ (ê´€ë¦¬ììš©)
     */
    int getUserMemberCount();

    /**
     * ì—­í• ë³„ íšŒì› ìˆ˜ ì¡°íšŒ (ê´€ë¦¬ììš©)
     */
    int getMemberCountByRole(@Param("role") String role);

}
````

## File: src/main/resources/mapper/MemberMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.carelink.dao.MemberMapper">

    <resultMap id="memberResultMap" type="com.example.carelink.dto.MemberDTO">
        <id property="memberId" column="member_id"/>
        <result property="userId" column="user_id"/>
        <result property="password" column="password"/>
        <result property="name" column="name"/>
        <result property="email" column="email"/>
        <result property="phone" column="phone"/>
        <result property="role" column="role"/>
        <result property="address" column="address"/>
        <result property="detailAddress" column="detail_address"/>
        <result property="profileImage" column="profile_image"/>
        <result property="profileImageAltText" column="profile_image_alt_text"/>
        <result property="isActive" column="is_active"/>
        <result property="loginFailCount" column="login_fail_count"/>
        <result property="lastLoginAt" column="last_login_at"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
        <result property="isDeleted" column="is_deleted"/>
    </resultMap>

    <select id="findByUserId" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE user_id = #{userId}
          AND is_deleted = false
    </select>

    <select id="findById" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE member_id = #{memberId}
          AND is_deleted = false
    </select>

    <select id="findByEmail" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE email = #{email}
          AND is_deleted = false
    </select>

    <insert id="insertMember" parameterType="com.example.carelink.dto.MemberDTO" useGeneratedKeys="true" keyProperty="memberId">
        INSERT INTO member (
        member_id,          <!-- 1 (ìë™ ì¦ê°€) -->
        user_id,            <!-- 2 -->
        password,           <!-- 3 -->
        name,               <!-- 4 -->
        email,              <!-- 5 -->
        phone,              <!-- 6 -->
        role,               <!-- 7 -->
        address,            <!-- 8 -->
        detail_address,     <!-- 9 -->
        profile_image,      <!-- 10 -->
        is_active,          <!-- 11 -->
        login_fail_count,   <!-- 12 -->
        last_login_at,      <!-- 13 -->
        is_deleted          <!-- 14 -->
        <!-- created_at, updated_atì€ DB DEFAULTì´ë¯€ë¡œ ì œì™¸ -->
        ) VALUES (
        #{memberId},              <!-- DTOì— null ë˜ëŠ” 0ìœ¼ë¡œ ì„¤ì • -->
        #{userId, jdbcType=VARCHAR},
        #{password, jdbcType=VARCHAR},
        #{name, jdbcType=VARCHAR},
        #{email, jdbcType=VARCHAR},
        #{phone, jdbcType=VARCHAR},
        #{role, jdbcType=VARCHAR},
        #{address, jdbcType=VARCHAR},
        #{detailAddress, jdbcType=VARCHAR},
        #{profileImage, jdbcType=VARCHAR},
        #{isActive, jdbcType=BOOLEAN},
        #{loginFailCount, jdbcType=INTEGER},
        #{lastLoginAt, jdbcType=TIMESTAMP},
        #{isDeleted, jdbcType=BOOLEAN}
        )
    </insert>

    <select id="existsByUserId" resultType="boolean">
        SELECT COUNT(*) > 0 FROM member WHERE user_id = #{userId}
    </select>

    <select id="existsByEmail" resultType="boolean">
        SELECT COUNT(*) > 0 FROM member WHERE email = #{email}
    </select>

    <update id="updateMember" parameterType="MemberDTO">
        UPDATE member
        SET
            name = #{name},
            email = #{email},
            phone = #{phone},
            address = #{address},
            detail_address = #{detailAddress},
            profile_image = #{profileImage},
            profile_image_alt_text = #{profileImageAltText},
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>

    <update id="softDeleteMember">
        UPDATE member
        SET
            is_deleted = TRUE,
            is_active = FALSE,
            updated_at = NOW()
        WHERE user_id = #{userId}
    </update>
    
    <!-- ìµëª…í™”: ê°œì¸ì •ë³´ë§Œ ì‚­ì œ, ì½˜í…ì¸ ëŠ” ìœ ì§€ -->
    <update id="anonymizeMember">
        UPDATE member
        SET
            name = 'íƒˆí‡´íšŒì›',
            email = NULL,
            phone = NULL,
            address = NULL,
            profile_image = NULL,
            password = 'DELETED',
            is_deleted = TRUE,
            is_active = FALSE,
            updated_at = NOW()
        WHERE user_id = #{userId}
    </update>
    
    <!-- ë¬¼ë¦¬ ì‚­ì œ: ì™„ì „íˆ ë°ì´í„° ì œê±° -->
    <delete id="hardDeleteMember">
        DELETE FROM member WHERE user_id = #{userId}
    </delete>

    <update id="updatePassword" parameterType="MemberDTO">
        UPDATE member
        SET
            password = #{password},
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>

    <update id="updateLoginSuccess">
        UPDATE member
        SET login_fail_count = 0,
            last_login_at = NOW(),
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>

    <update id="updateLoginFail">
        UPDATE member
        SET login_fail_count = login_fail_count + 1,
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>

    <!-- ì „ì²´ íšŒì› ìˆ˜ ì¡°íšŒ (ê´€ë¦¬ììš©) -->
    <select id="getTotalCount" resultType="int">
        SELECT COUNT(*)
        FROM member
        WHERE is_deleted = FALSE
    </select>

    <select id="findMembersWithPaging" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE is_deleted = FALSE
        <if test="role != null and !role.isEmpty()">
            AND role = #{role}
        </if>
        ORDER BY created_at DESC
        LIMIT #{pageSize} OFFSET #{offset}
    </select>

    <select id="findMembersByRole" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE is_deleted = FALSE
        <if test="role != null and role != ''">
            AND role = #{role}
        </if>
        ORDER BY created_at DESC
    </select>

    <update id="updateMemberStatus">
        UPDATE member
        SET is_active = #{isActive},
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>

    <!-- ì „ì²´ íšŒì› ìˆ˜ ì¡°íšŒ (í†µê³„ìš©) -->
    <select id="getMemberCount" resultType="int">
        SELECT COUNT(*) 
        FROM member 
        WHERE is_deleted = false AND is_active = true
    </select>

    <!-- ================== ê´€ë¦¬ììš© ì¿¼ë¦¬ë“¤ ================== -->

    <!-- ì‹œì„¤ íšŒì› ìˆ˜ ì¡°íšŒ (ê´€ë¦¬ììš©) -->
    <select id="getFacilityMemberCount" resultType="int">
        SELECT COUNT(*) 
        FROM member 
        WHERE is_deleted = false 
        AND role = 'FACILITY'
    </select>

    <!-- ì¼ë°˜ íšŒì› ìˆ˜ ì¡°íšŒ (ê´€ë¦¬ììš©) -->
    <select id="getUserMemberCount" resultType="int">
        SELECT COUNT(*) 
        FROM member 
        WHERE is_deleted = false 
        AND role = 'USER'
    </select>

    <!-- ì—­í• ë³„ íšŒì› ìˆ˜ ì¡°íšŒ (ê´€ë¦¬ììš©) -->
    <select id="getMemberCountByRole" resultType="int">
        SELECT COUNT(*) 
        FROM member 
        WHERE is_deleted = false
        <if test="role != null and role != ''">
            AND role = #{role}
        </if>
    </select>

</mapper>
````

## File: src/main/resources/static/css/common.css
````css
/* ===================================
   CareLink ê³µí†µ ìŠ¤íƒ€ì¼
   4ì¸ íŒ€ í”„ë¡œì íŠ¸ ì „ìš©
   =================================== */

/* ê¸°ë³¸ ì„¤ì • */
:root {
    --primary-color: #0d6efd;
    --secondary-color: #6c757d;
    --success-color: #198754;
    --danger-color: #dc3545;
    --warning-color: #ffc107;
    --info-color: #0dcaf0;
    --light-color: #f8f9fa;
    --dark-color: #212529;
    --border-radius: 8px;
    --box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    --navbar-height: 56px;
}

body {
    font-family: 'Noto Sans KR', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: var(--dark-color);
    background-color: #f8f9fa;
}

/* ê³ ì • ë„¤ë¹„ê²Œì´ì…˜ë°”ë¥¼ ìœ„í•œ ì—¬ë°± */
body.pt-5 {
    padding-top: calc(var(--navbar-height) + 1rem) !important;
}

/* ë„¤ë¹„ê²Œì´ì…˜ë°” ê³ ì • ìŠ¤íƒ€ì¼ */
.navbar.fixed-top {
    z-index: 1030;
    box-shadow: 0 2px 4px rgba(0,0,0,.1);
}

/* ë ˆì´ì•„ì›ƒ */
.min-vh-100 {
    min-height: 100vh;
}

/* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
.card {
    border: none;
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

.card:hover {
    transform: translateY(-2px);
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
}

/* ì¹´ë“œ í—¤ë” ìŠ¤íƒ€ì¼ ê°œì„  */
.card-header {
    border-bottom: 1px solid rgba(0,0,0,.125);
    font-weight: 600;
}

.card-header.bg-primary {
    background-color: var(--primary-color) !important;
    border-color: var(--primary-color);
}

/* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.btn {
    border-radius: var(--border-radius);
    font-weight: 500;
    padding: 0.5rem 1rem;
    transition: all 0.2s ease-in-out;
}

.btn:hover {
    transform: translateY(-1px);
}

/* í¼ ìŠ¤íƒ€ì¼ */
.form-control {
    border-radius: var(--border-radius);
    border: 1px solid #ced4da;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.form-control:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

/* ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤íƒ€ì¼ */
.navbar-brand {
    font-size: 1.5rem;
    font-weight: 700;
}

.navbar-nav .nav-link {
    font-weight: 500;
    transition: color 0.2s ease-in-out;
}

.navbar-nav .nav-link:hover {
    color: rgba(255, 255, 255, 0.8) !important;
}

/* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ìŠ¤íƒ€ì¼ */
.dropdown-menu {
    border: none;
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    border-radius: var(--border-radius);
}

.dropdown-item {
    transition: background-color 0.2s ease-in-out;
}

.dropdown-item:hover {
    background-color: rgba(13, 110, 253, 0.1);
}

/* í‘¸í„° ìŠ¤íƒ€ì¼ */
footer {
    background: linear-gradient(135deg, #343a40 0%, #495057 100%) !important;
}

footer a {
    transition: color 0.2s ease-in-out;
}

footer a:hover {
    color: var(--info-color) !important;
}

/* ì•Œë¦¼ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
.alert {
    border: none;
    border-radius: var(--border-radius);
    border-left: 4px solid;
}

.alert-success {
    border-left-color: var(--success-color);
    background-color: rgba(25, 135, 84, 0.1);
}

.alert-danger {
    border-left-color: var(--danger-color);
    background-color: rgba(220, 53, 69, 0.1);
}

.alert-warning {
    border-left-color: var(--warning-color);
    background-color: rgba(255, 193, 7, 0.1);
}

.alert-info {
    border-left-color: var(--info-color);
    background-color: rgba(13, 202, 240, 0.1);
}

/* í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
.table {
    border-radius: var(--border-radius);
    overflow: hidden;
}

.table thead th {
    background-color: var(--primary-color);
    color: white;
    border: none;
    font-weight: 600;
    vertical-align: middle;
}

.table-primary th {
    background-color: var(--primary-color) !important;
    color: white !important;
}

.table tbody tr {
    transition: background-color 0.2s ease-in-out;
}

.table tbody tr:hover {
    background-color: rgba(13, 110, 253, 0.05);
}

/* ë¦¬ìŠ¤íŠ¸ ê·¸ë£¹ ìŠ¤íƒ€ì¼ */
.list-group-item {
    border: 1px solid rgba(0,0,0,.125);
    transition: all 0.2s ease-in-out;
}

.list-group-item:hover {
    background-color: rgba(13, 110, 253, 0.05);
    transform: translateX(2px);
}

.list-group-item-action:hover {
    color: var(--primary-color);
    text-decoration: none;
}

/* í˜ì´ì§€ë„¤ì´ì…˜ ìŠ¤íƒ€ì¼ */
.pagination .page-link {
    border-radius: var(--border-radius);
    margin: 0 2px;
    border: 1px solid #dee2e6;
    color: var(--primary-color);
    transition: all 0.2s ease-in-out;
}

.pagination .page-item.active .page-link {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
}

.pagination .page-link:hover {
    background-color: rgba(13, 110, 253, 0.1);
    border-color: var(--primary-color);
    transform: translateY(-1px);
}

/* ë°°ì§€ ìŠ¤íƒ€ì¼ */
.badge {
    font-size: 0.75em;
    border-radius: 0.375rem;
}

.badge.bg-danger {
    background-color: var(--danger-color) !important;
}

.badge.bg-secondary {
    background-color: var(--secondary-color) !important;
}

/* ê²€ìƒ‰ í•„í„° ìŠ¤íƒ€ì¼ */
.search-filters {
    background-color: white;
    border-radius: var(--border-radius);
    padding: 1.5rem;
    margin-bottom: 2rem;
    box-shadow: var(--box-shadow);
}

/* í†µê³„ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
.stats-card {
    background: linear-gradient(135deg, var(--primary-color) 0%, #0a58ca 100%);
    color: white;
    border-radius: var(--border-radius);
    padding: 1.5rem;
    text-align: center;
    transition: transform 0.2s ease-in-out;
}

.stats-card:hover {
    transform: translateY(-3px);
}

.stats-card h3 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.stats-card p {
    margin-bottom: 0;
    opacity: 0.9;
}

/* í‰ì  ë³„ ìŠ¤íƒ€ì¼ */
.rating .fa-star {
    transition: color 0.2s ease-in-out;
}

.rating .fa-star.text-warning {
    color: #ffc107 !important;
}

.rating .fa-star.text-muted {
    color: #6c757d !important;
}

/* ë¡œë”© ìŠ¤í”¼ë„ˆ */
.loading-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: #fff;
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* ì…ë ¥ í•„ë“œ ì•„ì´ì½˜ */
.input-group-text {
    background-color: var(--light-color);
    border-color: #ced4da;
}

/* íŒŒì¼ ì—…ë¡œë“œ ìŠ¤íƒ€ì¼ */
.file-upload-area {
    border: 2px dashed #ced4da;
    border-radius: var(--border-radius);
    padding: 2rem;
    text-align: center;
    transition: border-color 0.2s ease-in-out;
    cursor: pointer;
}

.file-upload-area:hover {
    border-color: var(--primary-color);
    background-color: rgba(13, 110, 253, 0.05);
}

.file-upload-area.dragover {
    border-color: var(--success-color);
    background-color: rgba(25, 135, 84, 0.1);
}

/* íƒœê·¸ ìŠ¤íƒ€ì¼ */
.tag {
    display: inline-block;
    background-color: var(--primary-color);
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 12px;
    font-size: 0.75rem;
    margin: 0.125rem;
}

.tag-secondary {
    background-color: var(--secondary-color);
}

.tag-success {
    background-color: var(--success-color);
}

.tag-warning {
    background-color: var(--warning-color);
    color: var(--dark-color);
}

/* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
@media (max-width: 768px) {
    .navbar-brand {
        font-size: 1.25rem;
    }
    
    .card-body {
        padding: 1rem;
    }
    
    .btn {
        padding: 0.75rem 1rem;
        width: 100%;
        margin-bottom: 0.5rem;
    }
    
    .stats-card h3 {
        font-size: 2rem;
    }
    
    .search-filters {
        padding: 1rem;
    }
}

/* ë‹¤í¬ ëª¨ë“œ ì§€ì› ì¤€ë¹„ */
@media (prefers-color-scheme: dark) {
    /* ì¶”í›„ ë‹¤í¬ ëª¨ë“œ ìŠ¤íƒ€ì¼ ì¶”ê°€ ì˜ˆì • */
}

/* ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ */
.text-hover:hover {
    color: var(--primary-color) !important;
    text-decoration: underline;
}

.bg-gradient-primary {
    background: linear-gradient(135deg, var(--primary-color) 0%, #0a58ca 100%) !important;
}

.border-primary-soft {
    border: 1px solid rgba(13, 110, 253, 0.3) !important;
}

.shadow-soft {
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;
}

/* ì• ë‹ˆë©”ì´ì…˜ */
.fade-in {
    animation: fadeIn 0.5s ease-in-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* ì§€ë„ ê´€ë ¨ ìŠ¤íƒ€ì¼ */
#map {
    border-radius: var(--border-radius);
    overflow: hidden;
    transition: all 0.3s ease-in-out;
}

.info-window {
    padding: 15px;
    max-width: 300px;
    border-radius: var(--border-radius);
}

.info-window h5 {
    margin: 0 0 10px 0;
    color: var(--primary-color);
    font-weight: 600;
}

.info-window p {
    margin: 5px 0;
    font-size: 0.9rem;
    color: var(--dark-color);
}

.facility-item {
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}

.facility-item:hover {
    background-color: rgba(13, 110, 253, 0.05);
    transform: translateX(5px);
}

.facility-item.active {
    background-color: rgba(13, 110, 253, 0.1);
    border-left: 4px solid var(--primary-color);
}

/* ì§€ë„ ì»¨íŠ¸ë¡¤ ìŠ¤íƒ€ì¼ */
.custom-control {
    background-color: white;
    border-radius: 4px;
    box-shadow: var(--box-shadow);
    padding: 5px;
    margin: 5px;
}

.custom-control:hover {
    background-color: #f8f9fa;
}

/* ë³„ì  ìŠ¤íƒ€ì¼ */
.rating-stars {
    display: inline-flex;
    gap: 4px;
    cursor: pointer;
}

.rating-stars .star {
    font-size: 24px;
    color: #ddd;
    transition: color 0.2s;
}

.rating-stars .star:hover,
.rating-stars .star.active {
    color: #ffc107;
}

.rating-group {
    margin-bottom: 1rem;
}

.rating-group label {
    display: block;
    margin-bottom: 0.5rem;
}

.detailed-rating .star {
    font-size: 20px;
}

/* ë³„ì  í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
#ratingText {
    font-size: 14px;
    color: #6c757d;
}

/* ë³„ì  ê·¸ë£¹ ìŠ¤íƒ€ì¼ */
.rating-input-group {
    background-color: #f8f9fa;
    padding: 1rem;
    border-radius: 0.5rem;
    margin-bottom: 1rem;
}

.rating-group {
    background-color: #fff;
    padding: 1rem;
    border-radius: 0.5rem;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

/* ë³„ì  í˜¸ë²„ íš¨ê³¼ */
.rating-stars .star:hover ~ .star {
    color: #ddd;
}

.rating-stars:hover .star {
    color: #ffc107;
}

.rating-stars .star:hover ~ .star {
    color: #ddd !important;
}

/* ë³„ì  ì• ë‹ˆë©”ì´ì…˜ */
@keyframes star-pop {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.rating-stars .star.active {
    animation: star-pop 0.3s ease-out;
}

/* ì´ë¯¸ì§€ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
.modal {
    display: none;
    position: fixed;
    z-index: 1050;
    padding-top: 100px;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.9);
}

.modal-content {
    margin: auto;
    display: block;
    width: 80%;
    max-width: 700px;
}

.close-modal {
    position: absolute;
    right: 35px;
    top: 15px;
    color: #f1f1f1;
    font-size: 40px;
    font-weight: bold;
    cursor: pointer;
}

.close-modal:hover,
.close-modal:focus {
    color: #bbb;
    text-decoration: none;
    cursor: pointer;
}

/* ë¦¬ë·° ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
.review-image {
    cursor: pointer;
    transition: transform 0.2s ease-in-out;
}

.review-image:hover {
    transform: scale(1.05);
}

/* ë¦¬ë·° ìƒì„¸ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
.rating-detail {
    font-size: 0.9rem;
}

.rating-detail .fas.fa-star {
    color: #ffc107;
}

.rating-detail .far.fa-star {
    color: #dee2e6;
}

.content-area {
    white-space: pre-wrap;
    word-break: break-word;
}

.list-group-item-action:hover {
    background-color: rgba(13, 110, 253, 0.05);
}

.list-group-item-action .rating-stars {
    font-size: 0.8rem;
}
````

## File: src/main/resources/templates/job/edit.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>êµ¬ì¸êµ¬ì§ ìˆ˜ì • - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item"><a href="/job">êµ¬ì¸êµ¬ì§</a></li>
                <li class="breadcrumb-item"><a th:href="@{/job/detail/{id}(id=${jobDTO.jobId})}">ìƒì„¸ë³´ê¸°</a></li>
                <li class="breadcrumb-item active" aria-current="page">
                    <span th:if="${jobDTO.jobType == 'RECRUIT'}">êµ¬ì¸ ìˆ˜ì •</span>
                    <span th:if="${jobDTO.jobType == 'SEARCH'}">êµ¬ì§ ìˆ˜ì •</span>
                </li>
            </ol>
        </nav>

        <div class="d-flex align-items-center mb-4">
            <h2 class="me-3">
                <i class="fas fa-edit me-2"></i>
                <span th:if="${jobDTO.jobType == 'RECRUIT'}" class="text-success">êµ¬ì¸ê³µê³  ìˆ˜ì •</span>
                <span th:if="${jobDTO.jobType == 'SEARCH'}" class="text-info">êµ¬ì§ê³µê³  ìˆ˜ì •</span>
            </h2>
        </div>

        <form th:action="@{/job/edit/{id}(id=${jobDTO.jobId})}" method="post" th:object="${jobDTO}">
            <!-- ìˆ˜ì • ì‹œ í•„ìš”í•œ hidden í•„ë“œë“¤ -->
            <input type="hidden" th:field="*{jobId}" />
            <input type="hidden" th:field="*{jobType}" id="hiddenJobType" />
            
            <!-- í–¥ìƒëœ UI ë ˆì´ì•„ì›ƒ -->
            <div class="row">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="jobTitle" class="form-label">ì œëª© *</label>
                                <input type="text" class="form-control" id="jobTitle" th:field="*{title}" required
                                       autocomplete="off"
                                       th:placeholder="${jobDTO.jobType == 'RECRUIT' ? 'êµ¬ì¸ê³µê³  ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”' : 'êµ¬ì§ê³µê³  ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”'}">
                            </div>
                            
                            <div class="row">
                                <!-- êµ¬ì¸ê¸€(ì‹œì„¤íšŒì›): íšŒì‚¬ëª… ì…ë ¥ -->
                                <div class="col-md-6 mb-3" id="facilityNameField" 
                                     th:style="${jobDTO.jobType == 'SEARCH' ? 'display: none;' : ''}">
                                    <label for="facilityNameInput" class="form-label">
                                        <span class="facility-mode">íšŒì‚¬ëª… *</span>
                                        <span class="search-mode" style="display: none;">í¬ë§ ê·¼ë¬´ì§€ *</span>
                                    </label>
                                    <input type="text" class="form-control" th:field="*{facilityName}" 
                                           id="facilityNameInput" autocomplete="organization"
                                           placeholder="íšŒì‚¬ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                                </div>
                                
                                <!-- êµ¬ì§ê¸€(ì¼ë°˜ì‚¬ìš©ì): í¬ë§ ê·¼ë¬´ì§€ ì…ë ¥ -->
                                <div class="col-md-6 mb-3" id="workLocationField"
                                     th:style="${jobDTO.jobType == 'RECRUIT' ? 'display: none;' : ''}">
                                    <label for="workLocationInput" class="form-label">í¬ë§ ê·¼ë¬´ì§€ *</label>
                                    <input type="text" class="form-control" th:field="*{workLocation}" 
                                           id="workLocationInput" autocomplete="address-level2"
                                           placeholder="í¬ë§ ê·¼ë¬´ì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label for="jobPosition" class="form-label">ì§ì¢… *</label>
                                    <select class="form-select" th:field="*{position}" id="jobPosition"
                                            autocomplete="off" required>
                                        <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                        <option value="ê°„ë³‘ì¸">ê°„ë³‘ì¸</option>
                                        <option value="ìš”ì–‘ë³´í˜¸ì‚¬">ìš”ì–‘ë³´í˜¸ì‚¬</option>
                                        <option value="ì‚¬íšŒë³µì§€ì‚¬">ì‚¬íšŒë³µì§€ì‚¬</option>
                                        <option value="ë¬¼ë¦¬ì¹˜ë£Œì‚¬">ë¬¼ë¦¬ì¹˜ë£Œì‚¬</option>
                                        <option value="ê°„í˜¸ì‚¬">ê°„í˜¸ì‚¬</option>
                                        <option value="ì˜ì–‘ì‚¬">ì˜ì–‘ì‚¬</option>
                                        <option value="ì‚¬ë¬´ì§">ì‚¬ë¬´ì§</option>
                                        <option value="ì¡°ë¦¬ì›">ì¡°ë¦¬ì›</option>
                                        <option value="ìš´ì „ì›">ìš´ì „ì›</option>
                                        <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="contentTextarea" class="form-label">
                                    <span class="facility-mode">ì—…ë¬´ ë‚´ìš© *</span>
                                    <span class="search-mode" style="display: none;">ìê¸°ì†Œê°œ ë° ê²½ë ¥ì‚¬í•­ *</span>
                                </label>
                                <textarea class="form-control" rows="10" th:field="*{content}" required
                                          id="contentTextarea" autocomplete="off"
                                          data-rich-editor='{"height": "350px"}'></textarea>
                            </div>
                            
                            <!-- êµ¬ì§ê¸€ ì „ìš© í•„ë“œë“¤ -->
                            <div id="jobSeekerFields" th:style="${jobDTO.jobType == 'RECRUIT' ? 'display: none;' : ''}">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="jobExperience" class="form-label">ê²½ë ¥</label>
                                        <select class="form-select" th:field="*{experience}" id="jobExperience"
                                                autocomplete="off">
                                            <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                            <option value="ì‹ ì…">ì‹ ì…</option>
                                            <option value="1ë…„ ì´ìƒ">1ë…„ ì´ìƒ</option>
                                            <option value="3ë…„ ì´ìƒ">3ë…„ ì´ìƒ</option>
                                            <option value="5ë…„ ì´ìƒ">5ë…„ ì´ìƒ</option>
                                            <option value="10ë…„ ì´ìƒ">10ë…„ ì´ìƒ</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="jobEducation" class="form-label">í•™ë ¥</label>
                                        <select class="form-select" th:field="*{education}" id="jobEducation"
                                                autocomplete="off">
                                            <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                            <option value="ì¤‘í•™êµ ì¡¸ì—…">ì¤‘í•™êµ ì¡¸ì—…</option>
                                            <option value="ê³ ë“±í•™êµ ì¡¸ì—…">ê³ ë“±í•™êµ ì¡¸ì—…</option>
                                            <option value="ì „ë¬¸ëŒ€í•™ ì¡¸ì—…">ì „ë¬¸ëŒ€í•™ ì¡¸ì—…</option>
                                            <option value="ëŒ€í•™êµ ì¡¸ì—…">ëŒ€í•™êµ ì¡¸ì—…</option>
                                            <option value="ëŒ€í•™ì› ì¡¸ì—…">ëŒ€í•™ì› ì¡¸ì—…</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="jobQualifications" class="form-label">ë³´ìœ  ìê²©ì¦</label>
                                    <textarea class="form-control" rows="3" th:field="*{qualifications}"
                                              id="jobQualifications" autocomplete="off"
                                              placeholder="ë³´ìœ í•˜ì‹  ìê²©ì¦ì„ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ: ìš”ì–‘ë³´í˜¸ì‚¬ 1ê¸‰, ê°„ë³‘ì¸ ìê²©ì¦ ë“±)"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <!-- êµ¬ì¸ê¸€: ê¸‰ì—¬ ì •ë³´ -->
                            <div id="recruitFields" th:style="${jobDTO.jobType == 'SEARCH' ? 'display: none;' : ''}">
                                <div class="mb-3">
                                    <label for="editSalaryType" class="form-label">ê¸‰ì—¬ ìœ í˜• *</label>
                                    <select class="form-select" th:field="*{salaryType}" id="editSalaryType"
                                            autocomplete="off">
                                        <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                        <option value="HOURLY">ì‹œê¸‰</option>
                                        <option value="MONTHLY">ì›”ê¸‰</option>
                                        <option value="ANNUAL">ì—°ë´‰</option>
                                    </select>
                                </div>
                                
                                <div class="row">
                                    <div class="col-6 mb-3">
                                        <label for="editSalaryMin" class="form-label">ìµœì†Œ ê¸‰ì—¬</label>
                                        <input type="number" class="form-control" th:field="*{salaryMin}" 
                                               id="editSalaryMin" autocomplete="off"
                                               placeholder="ìµœì†Œ ê¸‰ì—¬">
                                    </div>
                                    <div class="col-6 mb-3">
                                        <label for="editSalaryMax" class="form-label">ìµœëŒ€ ê¸‰ì—¬</label>
                                        <input type="number" class="form-control" th:field="*{salaryMax}" 
                                               id="editSalaryMax" autocomplete="off"
                                               placeholder="ìµœëŒ€ ê¸‰ì—¬">
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="editSalaryDescription" class="form-label">ê¸‰ì—¬ ì„¤ëª…</label>
                                    <input type="text" class="form-control" th:field="*{salaryDescription}" 
                                           id="editSalaryDescription" autocomplete="off"
                                           placeholder="ì˜ˆ: ì‹œê¸‰ 10,000ì›, ì•¼ê°„ìˆ˜ë‹¹ ë³„ë„">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="editRecruitCount" class="form-label">ëª¨ì§‘ì¸ì›</label>
                                    <input type="number" class="form-control" th:field="*{recruitCount}" 
                                           id="editRecruitCount" autocomplete="off"
                                           placeholder="ëª¨ì§‘ì¸ì›" min="1">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="editWorkHours" class="form-label">ê·¼ë¬´ì‹œê°„</label>
                                    <input type="text" class="form-control" th:field="*{workHours}" 
                                           id="editWorkHours" autocomplete="off"
                                           placeholder="ì˜ˆ: 09:00~18:00, ì£¼ 5ì¼">
                                </div>
                            </div>
                            
                            <!-- êµ¬ì§ê¸€: í¬ë§ ì¡°ê±´ -->
                            <div id="searchFields" th:style="${jobDTO.jobType == 'RECRUIT' ? 'display: none;' : ''}">
                                <div class="mb-3">
                                    <label for="editSearchSalaryType" class="form-label">í¬ë§ ê¸‰ì—¬ ìœ í˜•</label>
                                    <select class="form-select" th:field="*{salaryType}" id="editSearchSalaryType"
                                            autocomplete="off">
                                        <option value="">ìƒê´€ì—†ìŒ</option>
                                        <option value="HOURLY">ì‹œê¸‰</option>
                                        <option value="MONTHLY">ì›”ê¸‰</option>
                                        <option value="ANNUAL">ì—°ë´‰</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="editSearchSalaryDescription" class="form-label">í¬ë§ ê¸‰ì—¬</label>
                                    <input type="text" class="form-control" th:field="*{salaryDescription}" 
                                           id="editSearchSalaryDescription" autocomplete="off"
                                           placeholder="ì˜ˆ: ì‹œê¸‰ 12,000ì› ì´ìƒ">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="editSearchWorkHours" class="form-label">í¬ë§ ê·¼ë¬´ì‹œê°„</label>
                                    <input type="text" class="form-control" th:field="*{workHours}" 
                                           id="editSearchWorkHours" autocomplete="off"
                                           placeholder="ì˜ˆ: ì£¼ê°„ê·¼ë¬´ ì„ í˜¸, ì•¼ê°„ ê°€ëŠ¥">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="editContactPhone" class="form-label">ì—°ë½ì²˜ *</label>
                                    <input type="tel" class="form-control" th:field="*{contactPhone}" 
                                           id="editContactPhone" autocomplete="tel"
                                           placeholder="ì—°ë½ ê°€ëŠ¥í•œ ì „í™”ë²ˆí˜¸" required>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="editWorkType" class="form-label">ê³ ìš©í˜•íƒœ *</label>
                                <select class="form-select" th:field="*{workType}" id="editWorkType"
                                        autocomplete="off" required>
                                    <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                    <option value="FULL_TIME">ì •ê·œì§</option>
                                    <option value="PART_TIME">íŒŒíŠ¸íƒ€ì„</option>
                                    <option value="TEMPORARY">ì„ì‹œì§</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label for="editStatus" class="form-label">ê²Œì‹œê¸€ ìƒíƒœ *</label>
                                <select class="form-select" th:field="*{status}" id="editStatus"
                                        autocomplete="off" required>
                                    <option value="">ìƒíƒœ ì„ íƒ</option>
                                    <option value="ACTIVE">í™œì„±</option>
                                    <option value="CLOSED">ë§ˆê°</option>
                                    <option value="DRAFT">ì„ì‹œì €ì¥</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="d-grid gap-2 mt-4">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save me-1"></i>
                    <span th:if="${jobDTO.jobType == 'RECRUIT'}">êµ¬ì¸ê³µê³  ìˆ˜ì • ì™„ë£Œ</span>
                    <span th:if="${jobDTO.jobType == 'SEARCH'}">êµ¬ì§ê³µê³  ìˆ˜ì • ì™„ë£Œ</span>
                </button>
                <a th:href="@{/job/detail/{id}(id=${jobDTO.jobId})}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left me-1"></i>ì·¨ì†Œ
                </a>
            </div>
        </form>
    </div>
</main>

<!-- í‘¸í„° -->
<footer th:replace="~{layout/footer :: footer}"></footer>

<!-- JavaScript -->
<div th:replace="~{layout/footer :: scripts}"></div>

<!-- êµ¬ì¸êµ¬ì§ ìˆ˜ì • í˜ì´ì§€ ì „ìš© JavaScript -->
<script src="/js/job-edit.js"></script>

<script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ì„¤ì •
    document.addEventListener('DOMContentLoaded', function() {
        const jobType = '[[${jobDTO.jobType}]]';
        
        // ê¶Œí•œë³„ ì´ˆê¸° ìƒíƒœ ì„¤ì •
        if (jobType === 'SEARCH') {
            switchToSearchMode();
        } else if (jobType === 'RECRUIT') {
            switchToRecruitMode();
        }
        
        // ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° ì´ˆê¸°í™”
        initRichTextEditor();
    });
    
    // êµ¬ì¸ ëª¨ë“œë¡œ ì „í™˜
    function switchToRecruitMode() {
        // ìˆ¨ê²¨ì§„ jobType í•„ë“œ ì—…ë°ì´íŠ¸
        const hiddenJobType = document.getElementById('hiddenJobType');
        if (hiddenJobType) {
            hiddenJobType.value = 'RECRUIT';
        }
        
        // í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€
        const facilityNameField = document.getElementById('facilityNameField');
        const workLocationField = document.getElementById('workLocationField');
        const jobSeekerFields = document.getElementById('jobSeekerFields');
        const recruitFields = document.getElementById('recruitFields');
        const searchFields = document.getElementById('searchFields');
        
        if (facilityNameField) facilityNameField.style.display = 'block';
        if (workLocationField) workLocationField.style.display = 'none';
        if (jobSeekerFields) jobSeekerFields.style.display = 'none';
        if (recruitFields) recruitFields.style.display = 'block';
        if (searchFields) searchFields.style.display = 'none';
        
        // ë¼ë²¨ í‘œì‹œ
        document.querySelectorAll('.facility-mode').forEach(el => el.style.display = 'inline');
        document.querySelectorAll('.search-mode').forEach(el => el.style.display = 'none');
        
        // í•„ìˆ˜ í•„ë“œ ì„¤ì •
        const facilityNameInput = document.getElementById('facilityNameInput');
        if (facilityNameInput) {
            facilityNameInput.required = true;
        }
        
        const contactPhoneInput = document.querySelector('[name="contactPhone"]');
        if (contactPhoneInput) {
            contactPhoneInput.required = false;
        }
    }
    
    // êµ¬ì§ ëª¨ë“œë¡œ ì „í™˜
    function switchToSearchMode() {
        // ìˆ¨ê²¨ì§„ jobType í•„ë“œ ì—…ë°ì´íŠ¸
        const hiddenJobType = document.getElementById('hiddenJobType');
        if (hiddenJobType) {
            hiddenJobType.value = 'SEARCH';
        }
        
        // í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€
        const facilityNameField = document.getElementById('facilityNameField');
        const workLocationField = document.getElementById('workLocationField');
        const jobSeekerFields = document.getElementById('jobSeekerFields');
        const recruitFields = document.getElementById('recruitFields');
        const searchFields = document.getElementById('searchFields');
        
        if (facilityNameField) facilityNameField.style.display = 'none';
        if (workLocationField) workLocationField.style.display = 'block';
        if (jobSeekerFields) jobSeekerFields.style.display = 'block';
        if (recruitFields) recruitFields.style.display = 'none';
        if (searchFields) searchFields.style.display = 'block';
        
        // ë¼ë²¨ í‘œì‹œ
        document.querySelectorAll('.facility-mode').forEach(el => el.style.display = 'none');
        document.querySelectorAll('.search-mode').forEach(el => el.style.display = 'inline');
        
        // í•„ìˆ˜ í•„ë“œ ì„¤ì •
        const facilityNameInput = document.getElementById('facilityNameInput');
        if (facilityNameInput) {
            facilityNameInput.required = false;
        }
        
        const contactPhoneInput = document.querySelector('[name="contactPhone"]');
        if (contactPhoneInput) {
            contactPhoneInput.required = true;
        }
    }
    
    // ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° ì´ˆê¸°í™”
    function initRichTextEditor() {
        const contentTextarea = document.getElementById('contentTextarea');
        if (contentTextarea && typeof window.RichTextEditor !== 'undefined') {
            const editor = new RichTextEditor(contentTextarea, {
                height: '350px',
                placeholder: 'ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...',
                toolbar: [
                    'bold', 'italic', 'underline', 'strikethrough', '|',
                    'h1', 'h2', 'h3', '|',
                    'ul', 'ol', '|',
                    'link', 'image', '|',
                    'align-left', 'align-center', 'align-right', '|',
                    'table', 'quote', 'code', '|',
                    'undo', 'redo', '|',
                    'fullscreen'
                ]
            });
            
            // ê¸°ì¡´ ë‚´ìš© ì„¤ì •
            const existingContent = contentTextarea.value;
            if (existingContent) {
                editor.setContent(existingContent);
            }
            
            // í¼ ì œì¶œ ì‹œ ì—ë””í„° ë‚´ìš© ë™ê¸°í™”
            const form = document.querySelector('form');
            if (form) {
                form.addEventListener('submit', function() {
                    contentTextarea.value = editor.getContent();
                });
            }
        }
    }
</script>
</body>
</html>
````

## File: src/main/java/com/example/carelink/dao/BoardMapper.java
````java
package com.example.carelink.dao;

import com.example.carelink.dto.BoardDTO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;

import java.util.List;

/**
 * ê²Œì‹œíŒ ê´€ë ¨ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë§¤í¼
 * íŒ€ì› D ë‹´ë‹¹
 */
@Mapper
public interface BoardMapper {
    
    /**
     * ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
     */
    List<BoardDTO> getBoardList(BoardDTO searchDTO);
    
    /**
     * ê²Œì‹œê¸€ ìƒì„¸ ì •ë³´ ì¡°íšŒ
     */
    BoardDTO getBoardById(@Param("boardId") Long boardId);
    
    /**
     * ê²Œì‹œê¸€ ìƒì„¸ ì •ë³´ ì¡°íšŒ (ì‚­ì œëœ ê²ƒ í¬í•¨)
     */
    BoardDTO getBoardByIdIncludeDeleted(@Param("boardId") Long boardId);
    
    /**
     * ê²Œì‹œê¸€ ë“±ë¡
     */
    int insertBoard(BoardDTO boardDTO);
    
    /**
     * ê²Œì‹œê¸€ ìˆ˜ì •
     */
    int updateBoard(BoardDTO boardDTO);
    
    /**
     * ê²Œì‹œê¸€ ì‚­ì œ
     */
    int deleteBoard(@Param("boardId") Long boardId);
    
    /**
     * ì¡°íšŒìˆ˜ ì¦ê°€
     */
    void increaseViewCount(@Param("boardId") Long boardId);
    
    /**
     * ì¡°íšŒìˆ˜ ì¦ê°€ (ë³„ì¹­)
     */
    void incrementViewCount(@Param("boardId") Long boardId);
    
    /**
     * ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
     */
    List<BoardDTO> getPopularBoards();
    
    /**
     * ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
     */
    List<BoardDTO> getBoardsByCategory(@Param("category") String category);
    
    /**
     * ê²Œì‹œê¸€ ì´ ê°œìˆ˜ ì¡°íšŒ
     */
    int getBoardCount(BoardDTO searchDTO);
    
    /**
     * ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
     */
    List<BoardDTO> getPopularBoardsByCategory(@Param("category") String category);
    

    
    /**
     * ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ì¦ê°€
     */
    void incrementLikeCount(@Param("boardId") Long boardId);
    
    /**
     * ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ê°ì†Œ
     */
    void decrementLikeCount(@Param("boardId") Long boardId);

    /**
     * ì´ì „ ê²Œì‹œê¸€ ì¡°íšŒ
     */
    BoardDTO getPreviousBoard(@Param("boardId") Long boardId);

    /**
     * ë‹¤ìŒ ê²Œì‹œê¸€ ì¡°íšŒ
     */
    BoardDTO getNextBoard(@Param("boardId") Long boardId);
    
    /**
     * íŠ¹ì • íšŒì›ì´ ì‘ì„±í•œ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
     */
    List<BoardDTO> findBoardsByMemberId(@Param("memberId") Long memberId);

    /**
     * íšŒì› IDë¡œ ê²Œì‹œê¸€ ì‚­ì œ (íšŒì› íƒˆí‡´ ì‹œ ì‚¬ìš©)
     */
    int deleteByMemberId(@Param("memberId") Long memberId);

}
````

## File: src/main/java/com/example/carelink/dao/FacilityMapper.java
````java
package com.example.carelink.dao;


import com.example.carelink.dto.FacilityDTO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;

import java.util.List;

/**
 * ì‹œì„¤ ê´€ë ¨ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë§¤í¼
 * íŒ€ì› B ë‹´ë‹¹
 */
@Mapper
public interface FacilityMapper {

    /**
     * ì‹œì„¤ ê²€ìƒ‰
     */
    List<FacilityDTO> searchFacilities(FacilityDTO searchDTO);

    /**
     * ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ
     */
    FacilityDTO getFacilityById(@Param("facilityId") Long facilityId);

    /**
     * ì „ì²´ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ
     */
    List<FacilityDTO> getAllFacilities();

    /**
     * í™œì„±í™”ëœ ëª¨ë“  ì‹œì„¤ ëª©ë¡ ì¡°íšŒ (ë¦¬ë·° ì‘ì„±ìš©)
     */
    List<FacilityDTO> getAllActiveFacilities();

    /**
     * ì‹œì„¤ ë“±ë¡
     */
    int insertFacility(FacilityDTO facilityDTO);

    /**
     * ì‹œì„¤ ì •ë³´ ìˆ˜ì •
     */
    int updateFacility(FacilityDTO facilityDTO);

    /**
     * ì‹œì„¤ ì‚­ì œ
     */
    int deleteFacility(@Param("facilityId") Long facilityId);

    /**
     * ì§€ì—­ë³„ ì‹œì„¤ ê°œìˆ˜ ì¡°íšŒ
     */
    int countFacilitiesByRegion(@Param("region") String region);

    /**
     * ì „ì²´ ì‹œì„¤ ìˆ˜ ì¡°íšŒ (í†µê³„ìš©)
     */
    int getFacilityCount();

    /**
     * íšŒì› IDë¡œ ì‹œì„¤ ì‚­ì œ (íšŒì› íƒˆí‡´ ì‹œ ì‚¬ìš©)
     */
    int deleteByMemberId(@Param("memberId") Long memberId);

    /**
     * íšŒì› IDë¡œ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ
     */
    List<FacilityDTO> getFacilitiesByMemberId(@Param("memberId") Long memberId);
    
    /**
     * íšŒì› IDë¡œ ì‹œì„¤ ì¡°íšŒ (ë‹¨ì¼ ì¡°íšŒ - í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€)
     */
    FacilityDTO getFacilityByMemberId(@Param("memberId") Long memberId);
    
    /**
     * ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸
     */
    int updateFacilityMainImage(@Param("facilityId") Long facilityId, 
                               @Param("mainImagePath") String mainImagePath, 
                               @Param("imageCount") Integer imageCount);

    // ================== ê´€ë¦¬ììš© ë©”ì„œë“œë“¤ ==================

    /**
     * ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ (ê´€ë¦¬ììš©)
     */
    List<FacilityDTO> getFacilitiesByApprovalStatus(@Param("approvalStatus") String approvalStatus);

    /**
     * ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ (ê´€ë¦¬ììš©)
     */
    int updateFacilityApprovalStatus(@Param("facilityId") Long facilityId, 
                                   @Param("approvalStatus") String approvalStatus, 
                                   @Param("rejectionReason") String rejectionReason);

    /**
     * ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ìˆ˜ ì¡°íšŒ (ê´€ë¦¬ììš©)
     */
    int countFacilitiesByStatus(@Param("approvalStatus") String approvalStatus);
}
````

## File: src/main/java/com/example/carelink/dao/JobMapper.java
````java
package com.example.carelink.dao;

import com.example.carelink.dto.JobDTO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;

import java.util.List;

/**
 * êµ¬ì¸êµ¬ì§ ê´€ë ¨ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë§¤í¼
 * íŒ€ì› C ë‹´ë‹¹
 */
@Mapper
public interface JobMapper {
    
    /**
     * êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ (ê²€ìƒ‰ í¬í•¨) - ë©”ì¸ ê²€ìƒ‰ ë©”ì„œë“œ
     */
    List<JobDTO> findJobsWithSearch(JobDTO searchDTO);
    
    /**
     * ê¸°ë³¸ êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ (ê¸°ì¡´ í˜¸í™˜ì„± ìœ ì§€)
     */
    List<JobDTO> getJobList(JobDTO searchDTO);
    
    /**
     * êµ¬ì¸êµ¬ì§ ìƒì„¸ ì •ë³´ ì¡°íšŒ
     */
    JobDTO findJobById(@Param("jobId") Long jobId);
    
    /**
     * êµ¬ì¸êµ¬ì§ ë“±ë¡
     */
    int insertJob(JobDTO jobDTO);
    
    /**
     * êµ¬ì¸êµ¬ì§ ìˆ˜ì •
     */
    int updateJob(JobDTO jobDTO);
    
    /**
     * êµ¬ì¸êµ¬ì§ ì‚­ì œ
     */
    int deleteJob(@Param("jobId") Long jobId);
    
    /**
     * ì¸ê¸° êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ
     */
    List<JobDTO> getPopularJobs();
    
    /**
     * êµ¬ì¸êµ¬ì§ ê²€ìƒ‰ (ë³„ì¹­)
     */
    List<JobDTO> searchJobs(JobDTO searchDTO);
    
    /**
     * ê²€ìƒ‰ ì¡°ê±´ì— ë”°ë¥¸ êµ¬ì¸êµ¬ì§ ì´ ê°œìˆ˜ ì¡°íšŒ
     */
    int countJobsWithSearch(JobDTO searchDTO);

    /**
     * ì „ì²´ êµ¬ì¸êµ¬ì§ ìˆ˜ ì¡°íšŒ (í†µê³„ìš© - ê²€ìƒ‰ ì¡°ê±´ ì—†ìŒ)
     */
    int getJobCount();

    // --- applyCount ì¦ê°€ë¥¼ ìœ„í•œ ë©”ì„œë“œ ì¶”ê°€ ---
    /**
     * íŠ¹ì • êµ¬ì¸êµ¬ì§ ê³µê³ ì˜ ì§€ì›ì ìˆ˜ (applyCount)ë¥¼ 1 ì¦ê°€ì‹œí‚µë‹ˆë‹¤.
     */
    void incrementApplyCount(@Param("jobId") Long jobId);
    
    /**
     * íŠ¹ì • íšŒì›ì´ ì‘ì„±í•œ êµ¬ì¸êµ¬ì§ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
     */
    List<JobDTO> findJobsByMemberId(@Param("memberId") Long memberId);

    /**
     * íšŒì› IDë¡œ êµ¬ì¸êµ¬ì§ ê²Œì‹œê¸€ ì‚­ì œ (íšŒì› íƒˆí‡´ ì‹œ ì‚¬ìš©)
     */
    int deleteByMemberId(@Param("memberId") Long memberId);

    /**
     * ì‹œì„¤ íšŒì› IDë¡œ êµ¬ì¸êµ¬ì§ ê²Œì‹œê¸€ ì‚­ì œ (ì‹œì„¤ ì‚­ì œ ì‹œ ì‚¬ìš©)
     */
    int deleteByFacilityMemberId(@Param("memberId") Long memberId);
}
````

## File: src/main/java/com/example/carelink/dto/BoardDTO.java
````java
package com.example.carelink.dto;

import com.example.carelink.common.BaseDTO;
import lombok.Data;
import lombok.EqualsAndHashCode;

import javax.validation.constraints.NotBlank;
import javax.validation.constraints.NotNull;
import java.time.LocalDateTime;

/**
 * ì •ë³´ ê²Œì‹œíŒ DTO
 * íŒ€ì› D ë‹´ë‹¹: ì •ë³´ ê²Œì‹œíŒ ê¸°ëŠ¥
 */
@Data
@EqualsAndHashCode(callSuper = true)
public class BoardDTO extends BaseDTO {
    
    private Long boardId;           // ê²Œì‹œê¸€ ID (ìë™ì¦ê°€)
    
    @NotBlank(message = "ê²Œì‹œíŒ ìœ í˜•ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String boardType;       // ê²Œì‹œíŒ ìœ í˜• (NOTICE, INFO, QNA, FAQ)
    
    @NotBlank(message = "ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String title;           // ì œëª©
    
    @NotBlank(message = "ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String content;         // ë‚´ìš©
    
    @NotNull(message = "ì‘ì„±ì ì •ë³´ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    private Long memberId;          // ì‘ì„±ì ID
    private String memberName;      // ì‘ì„±ì ì´ë¦„
    private String author;          // ì‘ì„±ì í‘œì‹œëª… (íšŒì›ëª… ë˜ëŠ” ë‹‰ë„¤ì„)
    
    // ì¡°íšŒìˆ˜ ë° ì¶”ì²œ
    private Integer viewCount;      // ì¡°íšŒìˆ˜
    private Integer likeCount;      // ì¶”ì²œìˆ˜
    private Integer commentCount;   // ëŒ“ê¸€ìˆ˜
    
    // ì²¨ë¶€íŒŒì¼
    private String attachmentPath;  // ì²¨ë¶€íŒŒì¼ ê²½ë¡œ
    private String attachmentName;  // ì²¨ë¶€íŒŒì¼ ì›ë³¸ëª…
    private Long attachmentSize;    // ì²¨ë¶€íŒŒì¼ í¬ê¸°
    
    // ìƒíƒœ ê´€ë¦¬
    private Boolean isNotice;        // ê³µì§€ì‚¬í•­ ì—¬ë¶€
    private Boolean isSecret;        // ë¹„ë°€ê¸€ ì—¬ë¶€
    private Boolean isActive;        // í™œì„± ìƒíƒœ (true: í™œì„±, false: ë¹„í™œì„±)
    private Boolean isDeleted;       // ì‚­ì œ ì—¬ë¶€ (true: ì‚­ì œë¨, false: í™œì„±)
    private String status;           // ìƒíƒœ (ACTIVE, HIDDEN, DELETED)
    
    // ì¹´í…Œê³ ë¦¬
    private String category;        // ì¹´í…Œê³ ë¦¬
    private String subCategory;     // ì„œë¸Œ ì¹´í…Œê³ ë¦¬
    
    // ìš°ì„ ìˆœìœ„ (ìƒë‹¨ ê³ ì •ìš©)
    private Integer priority = 1;    // ìš°ì„ ìˆœìœ„ (ê¸°ë³¸ê°’ ì„¤ì •)
    private Boolean isPinned;        // ìƒë‹¨ ê³ ì • ì—¬ë¶€
    
    // ë‹µê¸€/ëŒ“ê¸€ ê´€ë ¨
    private Long parentBoardId;      // ë¶€ëª¨ ê²Œì‹œê¸€ ID (ë‹µê¸€ì¸ ê²½ìš°)
    private Integer replyDepth;      // ë‹µê¸€ ê¹Šì´
    private Integer replyOrder;      // ë‹µê¸€ ìˆœì„œ
    
    // Q&A ê´€ë ¨ (ì§ˆë¬¸-ë‹µë³€ êµ¬ì¡°)
    private String qaType;           // Q&A íƒ€ì… (QUESTION: ì§ˆë¬¸, ANSWER: ë‹µë³€)
    private Boolean isAnswered;      // ë‹µë³€ ì™„ë£Œ ì—¬ë¶€ (ì§ˆë¬¸ê¸€ì¸ ê²½ìš°)
    private Integer answerCount;     // ë‹µë³€ ìˆ˜ (ì§ˆë¬¸ê¸€ì¸ ê²½ìš°)
    
    // ê²€ìƒ‰ìš© í•„ë“œ
    private String searchKeyword;    // ê²€ìƒ‰ í‚¤ì›Œë“œ
    private String searchType;       // ê²€ìƒ‰ ìœ í˜• (TITLE, CONTENT, AUTHOR, ALL)
    private String searchCategory;   // ê²€ìƒ‰ ì¹´í…Œê³ ë¦¬
    
    // ì •ë ¬ìš©
    private String sortBy;           // ì •ë ¬ ê¸°ì¤€ (LATEST, VIEW_COUNT, LIKE_COUNT)
    private String sortOrder;        // ì •ë ¬ ìˆœì„œ (ASC, DESC)
    
    // íƒœê·¸
    private String tags;             // íƒœê·¸ (ì½¤ë§ˆë¡œ êµ¬ë¶„)
    
    // SEO ê´€ë ¨
    private String metaDescription;  // ë©”íƒ€ ì„¤ëª…
    private String metaKeywords;     // ë©”íƒ€ í‚¤ì›Œë“œ
    
    // í˜ì´ì§•ì„ ìœ„í•œ í•„ë“œ (BaseDTOì™€ ì¼ì¹˜í•˜ë„ë¡ Integer íƒ€ì… ì‚¬ìš©)
    private Integer page = 1;
    private Integer size = 10;
    private Integer offset = 0;
    
    private LocalDateTime createdAt;  // ìƒì„±ì¼ì‹œ
    private LocalDateTime updatedAt;  // ìˆ˜ì •ì¼ì‹œ
    
    /**
     * ì‘ì„±ì í‘œì‹œëª… ì„¤ì •
     * memberNameì´ ìˆìœ¼ë©´ memberNameì„, ì—†ìœ¼ë©´ ì£¼ì–´ì§„ author ê°’ì„ ì‚¬ìš©
     */
    public void setAuthor(String author) {
        this.author = (this.memberName != null && !this.memberName.isEmpty()) ? this.memberName : author;
    }
    
    /**
     * ì‘ì„±ì í‘œì‹œëª… ì¡°íšŒ
     * memberNameì´ ìˆìœ¼ë©´ memberNameì„, ì—†ìœ¼ë©´ author ê°’ì„ ë°˜í™˜
     */
    public String getAuthor() {
        return (this.memberName != null && !this.memberName.isEmpty()) ? this.memberName : this.author;
    }
    
    /**
     * ìƒˆ ê¸€ ì—¬ë¶€ í™•ì¸ (24ì‹œê°„ ì´ë‚´ ì‘ì„±)
     */
    public boolean getIsNew() {
        if (this.getCreatedAt() == null) return false;
        return this.getCreatedAt().isAfter(java.time.LocalDateTime.now().minusDays(1));
    }
    
    /**
     * ì¸ê¸° ê¸€ ì—¬ë¶€ í™•ì¸ (ì¡°íšŒìˆ˜ 100 ì´ìƒ ë˜ëŠ” ì¶”ì²œìˆ˜ 10 ì´ìƒ)
     */
    public boolean getIsHot() {
        return (this.viewCount != null && this.viewCount >= 100) || 
               (this.likeCount != null && this.likeCount >= 10);
    }
    
    /**
     * ëŒ“ê¸€ì´ ìˆëŠ”ì§€ í™•ì¸
     */
    public boolean getHasComments() {
        return this.commentCount != null && this.commentCount > 0;
    }
    
}
````

## File: src/main/java/com/example/carelink/service/BoardService.java
````java
package com.example.carelink.service;

import com.example.carelink.common.PageInfo;
import com.example.carelink.dao.BoardMapper;
import com.example.carelink.dto.BoardDTO;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;
import java.util.Map;
import java.util.HashMap;

/**
 * ê²Œì‹œíŒ ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì„œë¹„ìŠ¤
 * íŒ€ì› D ë‹´ë‹¹
 */
@Slf4j
@Service
@RequiredArgsConstructor
public class BoardService {
    
    private final BoardMapper boardMapper;
    
    private static final int DEFAULT_PAGE_SIZE = 10;
    
    /**
     * ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•)
     */
    public PageInfo<BoardDTO> getBoardList(int page, String keyword, String category) {
        log.info("ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - page: {}, keyword: {}, category: {}", page, keyword, category);
        
        try {
            // ê²€ìƒ‰ ì¡°ê±´ ì„¤ì •
            BoardDTO searchDTO = new BoardDTO();
            searchDTO.setPage(page);
            searchDTO.setSize(DEFAULT_PAGE_SIZE);
            searchDTO.setOffset((page - 1) * DEFAULT_PAGE_SIZE);
            
            if (keyword != null && !keyword.trim().isEmpty()) {
                searchDTO.setSearchKeyword(keyword.trim());
            }
            if (category != null && !category.trim().isEmpty() && !"all".equals(category)) {
                searchDTO.setCategory(category.trim());
            }
            
            log.info("ê²€ìƒ‰ ì¡°ê±´ - searchDTO: page={}, size={}, offset={}, keyword={}, category={}", 
                searchDTO.getPage(), searchDTO.getSize(), searchDTO.getOffset(), 
                searchDTO.getSearchKeyword(), searchDTO.getCategory());
            
            // ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ ì¡°íšŒ
            int totalCount = boardMapper.getBoardCount(searchDTO);
            log.info("ì „ì²´ ê²Œì‹œê¸€ ìˆ˜: {}", totalCount);
            
            // ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
            List<BoardDTO> boardList = boardMapper.getBoardList(searchDTO);
            log.info("ì¡°íšŒëœ ê²Œì‹œê¸€ ìˆ˜: {}", boardList != null ? boardList.size() : 0);
            
            if (boardList != null && !boardList.isEmpty()) {
                log.info("ì²« ë²ˆì§¸ ê²Œì‹œê¸€ ì •ë³´ - ID: {}, ì œëª©: {}, ì‘ì„±ì: {}, is_active: {}, is_deleted: {}", 
                    boardList.get(0).getBoardId(), 
                    boardList.get(0).getTitle(), 
                    boardList.get(0).getMemberName(),
                    boardList.get(0).getIsActive(),
                    boardList.get(0).getIsDeleted());
            } else {
                log.warn("ì¡°íšŒëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.");
            }
            
            // í˜ì´ì§• ì •ë³´ ìƒì„±
            PageInfo<BoardDTO> pageInfo = new PageInfo<>(boardList, page, DEFAULT_PAGE_SIZE, totalCount);
            log.info("í˜ì´ì§• ì •ë³´ - í˜„ì¬í˜ì´ì§€: {}, ì „ì²´í˜ì´ì§€: {}, ì „ì²´ê±´ìˆ˜: {}", 
                pageInfo.getCurrentPage(), pageInfo.getTotalPages(), pageInfo.getTotalCount());
            
            return pageInfo;
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ê²Œì‹œê¸€ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ê²Œì‹œê¸€ ìƒì„¸ ì •ë³´ ì¡°íšŒ
     */
    @Transactional
    public BoardDTO getBoardById(Long id) {
        log.info("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ ì‹œì‘ - boardId: {}", id);
        
        try {
            BoardDTO board = boardMapper.getBoardById(id);
            if (board == null) {
                throw new RuntimeException("í•´ë‹¹ ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + id);
            }
            
            log.info("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ ì™„ë£Œ - boardId: {}, title: {}", id, board.getTitle());
            return board;
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            throw new RuntimeException("ê²Œì‹œê¸€ ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ (ì‚­ì œëœ ê²ƒ í¬í•¨)
     */
    public BoardDTO getBoardByIdIncludeDeleted(Long id) {
        log.info("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ (ì‚­ì œ í¬í•¨) ì‹œì‘ - boardId: {}", id);
        
        try {
            BoardDTO board = boardMapper.getBoardByIdIncludeDeleted(id);
            if (board != null) {
                log.info("ğŸ“„ ê²Œì‹œê¸€ ì¡°íšŒ ì„±ê³µ (ì‚­ì œ í¬í•¨) - boardId: {}, title: {}", id, board.getTitle());
                log.info("   ğŸ” DBì—ì„œ ì¡°íšŒëœ isDeleted ì›ë³¸ê°’: {}", board.getIsDeleted());
                log.info("   ğŸ” isDeleted null ì²´í¬: {}", board.getIsDeleted() == null ? "NULL" : "NOT NULL");
                if (board.getIsDeleted() != null) {
                    log.info("   ğŸ” isDeleted boolean ê°’: {} ({})", board.getIsDeleted(), 
                        board.getIsDeleted() ? "ì‚­ì œë¨" : "ì •ìƒ");
                }
            } else {
                log.warn("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²Œì‹œê¸€ ì¡°íšŒ ì‹œë„ (ì‚­ì œ í¬í•¨) - boardId: {}", id);
            }
            return board;
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ (ì‚­ì œ í¬í•¨) ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            throw new RuntimeException("ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ê²Œì‹œê¸€ ë“±ë¡
     */
    @Transactional
    public int insertBoard(BoardDTO boardDTO) {
        log.info("ê²Œì‹œê¸€ ë“±ë¡ ì‹œì‘ - title: {}, memberId: {}", boardDTO.getTitle(), boardDTO.getMemberId());
        
        try {
            // í•„ìˆ˜ ê°’ ê²€ì¦
            validateBoardData(boardDTO);
            
            // ê¸°ë³¸ê°’ ì„¤ì •
            if (boardDTO.getStatus() == null) {
                boardDTO.setStatus("ACTIVE");
            }
            
            // priority ê¸°ë³¸ê°’ ì„¤ì • (nullì´ë©´ ê¸°ë³¸ê°’ 0)
            if (boardDTO.getPriority() == null) {
                boardDTO.setPriority(0);
            }
            
            // ëŒ“ê¸€ ê´€ë ¨ í•„ë“œ ê¸°ë³¸ê°’ ì„¤ì •
            if (boardDTO.getReplyDepth() == null) {
                boardDTO.setReplyDepth(0);
            }
            if (boardDTO.getReplyOrder() == null) {
                boardDTO.setReplyOrder(0);
            }
            
            // Boolean í•„ë“œ ê¸°ë³¸ê°’ ì„¤ì •
            if (boardDTO.getIsNotice() == null) {
                boardDTO.setIsNotice(false);
            }
            if (boardDTO.getIsSecret() == null) {
                boardDTO.setIsSecret(false);
            }
            if (boardDTO.getIsActive() == null) {
                boardDTO.setIsActive(true);  // í™œì„± ìƒíƒœë¡œ ê¸°ë³¸ ì„¤ì •
            }
            if (boardDTO.getIsDeleted() == null) {
                boardDTO.setIsDeleted(false);
            }
            if (boardDTO.getIsPinned() == null) {
                boardDTO.setIsPinned(false);
            }
            
            // ì¹´í…Œê³ ë¦¬ì— ë”°ë¼ ê³µì§€ì‚¬í•­ ì—¬ë¶€ ì„¤ì •
            if (boardDTO.getCategory() != null && "NOTICE".equals(boardDTO.getCategory())) {
                boardDTO.setIsNotice(true);
            }
            
            if (boardDTO.getBoardType() == null) {
                // ì¹´í…Œê³ ë¦¬ì— ë”°ë¼ boardType ì„¤ì •
                String category = boardDTO.getCategory();
                if ("NOTICE".equals(category)) {
                    boardDTO.setBoardType("NOTICE");
                } else if ("INFO".equals(category)) {
                    boardDTO.setBoardType("INFO");
                } else if ("QNA".equals(category)) {
                    boardDTO.setBoardType("QNA");
                } else if ("FAQ".equals(category)) {
                    boardDTO.setBoardType("FAQ");
                } else {
                    boardDTO.setBoardType("GENERAL");
                }
            }
            
            // ë“±ë¡ ì „ ìƒíƒœ ë¡œê·¸
            log.info("ğŸ“ ë“±ë¡ ì „ ìƒíƒœ í™•ì¸ - isDeleted: {}, isActive: {}", 
                boardDTO.getIsDeleted(), boardDTO.getIsActive());
            
            int result = boardMapper.insertBoard(boardDTO);
            log.info("âœ… ê²Œì‹œê¸€ ë“±ë¡ ì™„ë£Œ - boardId: {}", boardDTO.getBoardId());
            
            // ë“±ë¡ ì§í›„ DBì—ì„œ ë‹¤ì‹œ ì¡°íšŒí•´ì„œ í™•ì¸
            if (boardDTO.getBoardId() != null) {
                BoardDTO savedBoard = boardMapper.getBoardByIdIncludeDeleted(boardDTO.getBoardId());
                if (savedBoard != null) {
                    log.info("ğŸ” ë“±ë¡ ì§í›„ DB ìƒíƒœ í™•ì¸ - boardId: {}, isDeleted: {}, isActive: {}", 
                        savedBoard.getBoardId(), savedBoard.getIsDeleted(), savedBoard.getIsActive());
                } else {
                    log.warn("âš ï¸ ë“±ë¡ ì§í›„ ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. boardId: {}", boardDTO.getBoardId());
                }
            }
            
            return result;
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ê²Œì‹œê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ê²Œì‹œê¸€ ìˆ˜ì •
     */
    @Transactional
    public int updateBoard(BoardDTO boardDTO) {
        log.info("ê²Œì‹œê¸€ ìˆ˜ì • ì‹œì‘ - boardId: {}, title: {}", boardDTO.getBoardId(), boardDTO.getTitle());
        
        try {
            // ê²Œì‹œê¸€ ì¡´ì¬ í™•ì¸ (ì‚­ì œëœ ê²ƒ í¬í•¨)
            BoardDTO existingBoard = boardMapper.getBoardByIdIncludeDeleted(boardDTO.getBoardId());
            if (existingBoard == null) {
                throw new RuntimeException("ìˆ˜ì •í•  ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + boardDTO.getBoardId());
            }
            
            // í•„ìˆ˜ ê°’ ê²€ì¦ ë° ê¸°ë³¸ê°’ ì„¤ì •
            validateBoardData(boardDTO);
            if (boardDTO.getPriority() == null) {
                boardDTO.setPriority(1); // ê¸°ë³¸ ìš°ì„ ìˆœìœ„
            }
            
            int result = boardMapper.updateBoard(boardDTO);
            log.info("ê²Œì‹œê¸€ ìˆ˜ì • ì™„ë£Œ - boardId: {}", boardDTO.getBoardId());
            
            return result;
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", boardDTO.getBoardId(), e);
            throw new RuntimeException("ê²Œì‹œê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ê²Œì‹œê¸€ ì‚­ì œ (ë…¼ë¦¬ì  ì‚­ì œ)
     */
    @Transactional
    public Map<String, Object> deleteBoard(Long id) {
        log.info("ê²Œì‹œê¸€ ì‚­ì œ ì‹œì‘ - boardId: {}", id);
        
        Map<String, Object> result = new HashMap<>();
        
        try {
            // ê²Œì‹œê¸€ ì¡´ì¬ í™•ì¸ (ì‚­ì œëœ ê²ƒ í¬í•¨í•˜ì—¬ ì¡°íšŒ)
            BoardDTO existingBoard = boardMapper.getBoardByIdIncludeDeleted(id);
            if (existingBoard == null) {
                log.warn("ì‚­ì œ ìš”ì²­ëœ ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: {}", id);
                result.put("success", false);
                result.put("code", "NOT_FOUND");
                result.put("message", "ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            
            // ë””ë²„ê¹…: í˜„ì¬ ê²Œì‹œê¸€ ìƒíƒœ ìƒì„¸ ë¡œê·¸
            log.info("ğŸ” ê²Œì‹œê¸€ ìƒíƒœ í™•ì¸ - boardId: {}", id);
            log.info("   - title: {}", existingBoard.getTitle());
            log.info("   - isDeleted ê°’: {}", existingBoard.getIsDeleted());
            log.info("   - isDeleted íƒ€ì…: {}", existingBoard.getIsDeleted() != null ? existingBoard.getIsDeleted().getClass().getSimpleName() : "null");
            
            // ì‚­ì œ ìƒíƒœ ìƒì„¸ ë¶„ì„
            log.info("ğŸ” ì‚­ì œ ìƒíƒœ ìƒì„¸ ë¶„ì„:");
            log.info("   - isDeleted ì›ë³¸ê°’: {}", existingBoard.getIsDeleted());
            log.info("   - isDeleted == null: {}", existingBoard.getIsDeleted() == null);
            log.info("   - isDeleted != null: {}", existingBoard.getIsDeleted() != null);
            if (existingBoard.getIsDeleted() != null) {
                log.info("   - isDeleted.booleanValue(): {}", existingBoard.getIsDeleted().booleanValue());
                log.info("   - Boolean.TRUE.equals(isDeleted): {}", Boolean.TRUE.equals(existingBoard.getIsDeleted()));
            }
            
            // ì´ë¯¸ ì‚­ì œëœ ê²Œì‹œê¸€ì¸ì§€ í™•ì¸
            boolean isAlreadyDeleted = existingBoard.getIsDeleted() != null && existingBoard.getIsDeleted();
            log.info("ğŸ” ìµœì¢… ì‚­ì œ íŒì •: {}", isAlreadyDeleted);
            
            if (isAlreadyDeleted) {
                log.info("âŒ ì´ë¯¸ ì‚­ì œëœ ê²Œì‹œê¸€ì…ë‹ˆë‹¤. boardId: {}, isDeleted: {}", id, existingBoard.getIsDeleted());
                result.put("success", false);
                result.put("code", "ALREADY_DELETED");
                result.put("message", "ì´ë¯¸ ì‚­ì œëœ ê²Œì‹œê¸€ì…ë‹ˆë‹¤.");
                return result;
            }
            
            log.info("âœ… ì‚­ì œ ê°€ëŠ¥í•œ ê²Œì‹œê¸€ì…ë‹ˆë‹¤. boardId: {}, isDeleted: {}", id, existingBoard.getIsDeleted());
            
            // ì‚­ì œ ì‹¤í–‰
            int deleteResult = boardMapper.deleteBoard(id);
            if (deleteResult > 0) {
                log.info("ê²Œì‹œê¸€ ì‚­ì œ ì™„ë£Œ - boardId: {}, ì˜í–¥ë°›ì€ í–‰: {}", id, deleteResult);
                result.put("success", true);
                result.put("code", "DELETED");
                result.put("message", "ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
            } else {
                log.warn("ê²Œì‹œê¸€ ì‚­ì œ ì‹¤íŒ¨ - boardId: {}, ì˜í–¥ë°›ì€ í–‰: {}", id, deleteResult);
                result.put("success", false);
                result.put("code", "DELETE_FAILED");
                result.put("message", "ê²Œì‹œê¸€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            }
            
            return result;
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            result.put("success", false);
            result.put("code", "ERROR");
            result.put("message", "ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return result;
        }
    }
    
    /**
     * ì¡°íšŒìˆ˜ ì¦ê°€
     */
    @Transactional
    public void incrementViewCount(Long id) {
        log.info("ì¡°íšŒìˆ˜ ì¦ê°€ ì‹œì‘ - boardId: {}", id);
        
        try {
            boardMapper.incrementViewCount(id);
            log.info("ì¡°íšŒìˆ˜ ì¦ê°€ ì™„ë£Œ - boardId: {}", id);
        } catch (Exception e) {
            log.warn("ì¡°íšŒìˆ˜ ì¦ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {} (ë¬´ì‹œí•˜ê³  ì§„í–‰)", id, e);
            // ì¡°íšŒìˆ˜ ì¦ê°€ ì‹¤íŒ¨ëŠ” ì¹˜ëª…ì ì´ì§€ ì•Šìœ¼ë¯€ë¡œ ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•ŠìŒ
        }
    }
    
    /**
     * ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
     */
    public List<BoardDTO> getPopularBoards() {
        log.info("ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹œì‘");
        
        try {
            List<BoardDTO> popularBoards = boardMapper.getPopularBoards();
            log.info("ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", popularBoards.size());
            
            return popularBoards;
        } catch (Exception e) {
            log.error("ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ì¸ê¸° ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
     */
    public List<BoardDTO> getBoardsByCategory(String category) {
        log.info("ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - category: {}", category);
        
        try {
            List<BoardDTO> boards = boardMapper.getBoardsByCategory(category);
            log.info("ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - category: {}, ì¡°íšŒëœ ê±´ìˆ˜: {}", category, boards.size());
            
            return boards;
        } catch (Exception e) {
            log.error("ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - category: {}", category, e);
            throw new RuntimeException("ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ê³µì§€ì‚¬í•­ ëª©ë¡ ì¡°íšŒ
     */
    public List<BoardDTO> getNoticeBoards() {
        log.info("ê³µì§€ì‚¬í•­ ëª©ë¡ ì¡°íšŒ ì‹œì‘");
        
        try {
            BoardDTO searchDTO = new BoardDTO();
            searchDTO.setCategory("NOTICE");
            searchDTO.setSize(5); // ìµœì‹  5ê°œë§Œ
            searchDTO.setPage(1); // 1í˜ì´ì§€ë¶€í„° ì‹œì‘
            
            List<BoardDTO> notices = boardMapper.getBoardList(searchDTO);
            log.info("ê³µì§€ì‚¬í•­ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", notices.size());
            
            return notices;
        } catch (Exception e) {
            log.error("ê³µì§€ì‚¬í•­ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ê³µì§€ì‚¬í•­ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ê²Œì‹œê¸€ ë°ì´í„° ìœ íš¨ì„± ê²€ì¦
     */
    private void validateBoardData(BoardDTO boardDTO) {
        if (boardDTO.getMemberId() == null) {
            throw new IllegalArgumentException("ì‘ì„±ì IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (boardDTO.getTitle() == null || boardDTO.getTitle().trim().isEmpty()) {
            throw new IllegalArgumentException("ê²Œì‹œê¸€ ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (boardDTO.getContent() == null || boardDTO.getContent().trim().isEmpty()) {
            throw new IllegalArgumentException("ê²Œì‹œê¸€ ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (boardDTO.getTitle().length() > 200) {
            throw new IllegalArgumentException("ê²Œì‹œê¸€ ì œëª©ì€ 200ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
    }
    
    /**
     * ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
     */
    public List<BoardDTO> getPopularBoardsByCategory(String category) {
        log.info("ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - category: {}", category);
        
        try {
            List<BoardDTO> popularBoards;
            if (category == null || category.trim().isEmpty()) {
                popularBoards = boardMapper.getPopularBoards();
            } else {
                popularBoards = boardMapper.getPopularBoardsByCategory(category);
            }
            log.info("ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", popularBoards.size());
            
            return popularBoards;
        } catch (Exception e) {
            log.error("ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ì¸ê¸° ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ì´ì „ ê²Œì‹œê¸€ ì¡°íšŒ
     */
    public BoardDTO getPreviousBoard(Long currentId) {
        log.info("ì´ì „ ê²Œì‹œê¸€ ì¡°íšŒ ì‹œì‘ - currentId: {}", currentId);
        
        try {
            BoardDTO prevBoard = boardMapper.getPreviousBoard(currentId);
            log.info("ì´ì „ ê²Œì‹œê¸€ ì¡°íšŒ ì™„ë£Œ - prevBoardId: {}", prevBoard != null ? prevBoard.getBoardId() : "ì—†ìŒ");
            
            return prevBoard;
        } catch (Exception e) {
            log.error("ì´ì „ ê²Œì‹œê¸€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return null; // ì´ì „ ê²Œì‹œê¸€ì´ ì—†ê±°ë‚˜ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš° null ë°˜í™˜
        }
    }
    
    /**
     * ë‹¤ìŒ ê²Œì‹œê¸€ ì¡°íšŒ
     */
    public BoardDTO getNextBoard(Long currentId) {
        log.info("ë‹¤ìŒ ê²Œì‹œê¸€ ì¡°íšŒ ì‹œì‘ - currentId: {}", currentId);
        
        try {
            BoardDTO nextBoard = boardMapper.getNextBoard(currentId);
            log.info("ë‹¤ìŒ ê²Œì‹œê¸€ ì¡°íšŒ ì™„ë£Œ - nextBoardId: {}", nextBoard != null ? nextBoard.getBoardId() : "ì—†ìŒ");
            
            return nextBoard;
        } catch (Exception e) {
            log.error("ë‹¤ìŒ ê²Œì‹œê¸€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return null; // ë‹¤ìŒ ê²Œì‹œê¸€ì´ ì—†ê±°ë‚˜ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš° null ë°˜í™˜
        }
    }
    
    /**
     * ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ì¦ê°€
     */
    @Transactional
    public void incrementLikeCount(Long id) {
        log.info("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ì¦ê°€ ì‹œì‘ - boardId: {}", id);
        
        try {
            boardMapper.incrementLikeCount(id);
            log.info("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ì¦ê°€ ì™„ë£Œ - boardId: {}", id);
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ì¦ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            throw new RuntimeException("ì¶”ì²œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ê°ì†Œ
     */
    @Transactional
    public void decrementLikeCount(Long id) {
        log.info("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ê°ì†Œ ì‹œì‘ - boardId: {}", id);
        
        try {
            boardMapper.decrementLikeCount(id);
            log.info("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ê°ì†Œ ì™„ë£Œ - boardId: {}", id);
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ê°ì†Œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            throw new RuntimeException("ì¶”ì²œ ì·¨ì†Œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ ì¡°íšŒ (í™ˆí˜ì´ì§€ í†µê³„ìš©)
     */
    public int getBoardCount() {
        log.info("ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ ì¡°íšŒ ì‹œì‘");
        
        try {
            BoardDTO searchDTO = new BoardDTO();
            int count = boardMapper.getBoardCount(searchDTO);
            log.info("ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ ì¡°íšŒ ì™„ë£Œ - ì´ {}ê±´", count);
            
            return count;
        } catch (Exception e) {
            log.error("ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0; // ì˜¤ë¥˜ ì‹œ 0 ë°˜í™˜
        }
    }
    

}
````

## File: src/main/resources/mapper/boardMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.carelink.dao.BoardMapper">

    <!-- ResultMap ì •ì˜ -->
    <resultMap id="boardResultMap" type="com.example.carelink.dto.BoardDTO">
        <id property="boardId" column="board_id"/>
        <result property="boardType" column="board_type"/>
        <result property="title" column="title"/>
        <result property="content" column="content"/>
        <result property="memberId" column="member_id"/>
        <result property="memberName" column="member_name"/>
        <result property="viewCount" column="view_count"/>
        <result property="likeCount" column="like_count"/>
        <result property="commentCount" column="comment_count"/>
        <result property="attachmentPath" column="attachment_path"/>
        <result property="attachmentName" column="attachment_name"/>
        <result property="attachmentSize" column="attachment_size"/>
        <result property="isNotice" column="is_notice"/>
        <result property="isSecret" column="is_secret"/>
        <result property="isDeleted" column="is_deleted"/>
        <result property="status" column="status"/>
        <result property="category" column="category"/>
        <result property="subCategory" column="sub_category"/>
        <result property="priority" column="priority"/>
        <result property="isPinned" column="is_pinned"/>
        <result property="parentBoardId" column="parent_board_id"/>
        <result property="replyDepth" column="reply_depth"/>
        <result property="replyOrder" column="reply_order"/>
        <result property="tags" column="tags"/>
        <result property="metaDescription" column="meta_description"/>
        <result property="metaKeywords" column="meta_keywords"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
    </resultMap>

    <!-- ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ -->
    <select id="getBoardList" parameterType="com.example.carelink.dto.BoardDTO" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.board_type,
            b.title,
            b.content,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.is_notice,
            b.is_secret,
            COALESCE(b.is_active, true) as is_active,
            COALESCE(b.is_deleted, false) as is_deleted,
            b.status,
            b.category,
            b.sub_category,
            b.priority,
            b.is_pinned,
            b.tags,
            b.created_at,
            b.updated_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            <if test="searchKeyword != null and searchKeyword != ''">
                AND (b.title LIKE CONCAT('%', #{searchKeyword}, '%') OR b.content LIKE CONCAT('%', #{searchKeyword}, '%'))
            </if>
            <if test="category != null and category != ''">
                AND b.category = #{category}
            </if>
        ORDER BY
            b.is_notice DESC,
            b.created_at DESC
        LIMIT #{size} OFFSET #{offset}
    </select>

    <!-- ê²Œì‹œê¸€ ìˆ˜ ì¡°íšŒ -->
    <select id="getBoardCount" parameterType="com.example.carelink.dto.BoardDTO" resultType="int">
        SELECT COUNT(*)
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            <if test="searchKeyword != null and searchKeyword != ''">
                AND (b.title LIKE CONCAT('%', #{searchKeyword}, '%') OR b.content LIKE CONCAT('%', #{searchKeyword}, '%'))
            </if>
            <if test="category != null and category != ''">
                AND b.category = #{category}
            </if>
    </select>

    <!-- ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ -->
    <select id="getBoardById" parameterType="long" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.board_type,
            b.title,
            b.content,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.attachment_path,
            b.attachment_name,
            b.attachment_size,
            b.is_notice,
            b.is_secret,
            COALESCE(b.is_active, true) as is_active,
            COALESCE(b.is_deleted, false) as is_deleted,
            b.status,
            b.category,
            b.sub_category,
            b.priority,
            b.is_pinned,
            b.parent_board_id,
            b.reply_depth,
            b.reply_order,
            b.tags,
            b.meta_description,
            b.meta_keywords,
            b.created_at,
            b.updated_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            b.board_id = #{boardId}
            AND COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
    </select>

    <!-- ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ (ì‚­ì œëœ ê²ƒ í¬í•¨) -->
    <select id="getBoardByIdIncludeDeleted" parameterType="long" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.board_type,
            b.title,
            b.content,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.attachment_path,
            b.attachment_name,
            b.attachment_size,
            b.is_notice,
            b.is_secret,
            COALESCE(b.is_active, true) as is_active,
            COALESCE(b.is_deleted, false) as is_deleted,
            b.status,
            b.category,
            b.sub_category,
            b.priority,
            b.is_pinned,
            b.parent_board_id,
            b.reply_depth,
            b.reply_order,
            b.tags,
            b.meta_description,
            b.meta_keywords,
            b.created_at,
            b.updated_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            b.board_id = #{boardId}
    </select>

    <!-- ê²Œì‹œê¸€ ë“±ë¡ -->
    <insert id="insertBoard" parameterType="com.example.carelink.dto.BoardDTO" useGeneratedKeys="true" keyProperty="boardId">
        INSERT INTO board (
            board_type,
            title,
            content,
            member_id,
            attachment_path,
            attachment_name,
            attachment_size,
            is_notice,
            is_secret,
            is_active,
            is_deleted,
            category,
            sub_category,
            priority,
            is_pinned,
            parent_board_id,
            reply_depth,
            reply_order,
            tags,
            meta_description,
            meta_keywords,
            created_at,
            updated_at
        ) VALUES (
            #{boardType},
            #{title},
            #{content},
            #{memberId},
            #{attachmentPath},
            #{attachmentName},
            #{attachmentSize},
            #{isNotice},
            #{isSecret},
            #{isActive},
            #{isDeleted},
            #{category},
            #{subCategory},
            COALESCE(#{priority}, 1),
            #{isPinned},
            #{parentBoardId},
            #{replyDepth},
            #{replyOrder},
            #{tags},
            #{metaDescription},
            #{metaKeywords},
            NOW(),
            NOW()
        )
    </insert>

    <!-- ê²Œì‹œê¸€ ìˆ˜ì • -->
    <update id="updateBoard" parameterType="com.example.carelink.dto.BoardDTO">
        UPDATE board
        SET
            board_type = #{boardType},
            title = #{title},
            content = #{content},
            attachment_path = #{attachmentPath},
            attachment_name = #{attachmentName},
            attachment_size = #{attachmentSize},
            is_notice = #{isNotice},
            is_secret = #{isSecret},
            category = #{category},
            sub_category = #{subCategory},
            priority = COALESCE(#{priority}, 1),
            is_pinned = #{isPinned},
            tags = #{tags},
            meta_description = #{metaDescription},
            meta_keywords = #{metaKeywords},
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
    </update>

    <!-- ê²Œì‹œê¸€ ì‚­ì œ (ë…¼ë¦¬ì  ì‚­ì œ) -->
    <update id="deleteBoard" parameterType="long">
        UPDATE board
        SET
            is_deleted = true,
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_deleted, false) = false
    </update>



    <!-- ì¡°íšŒìˆ˜ ì¦ê°€ -->
    <update id="incrementViewCount" parameterType="long">
        UPDATE board
        SET
            view_count = view_count + 1,
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_active, true) = true
            AND COALESCE(is_deleted, false) = false
    </update>
    
    <!-- ì¡°íšŒìˆ˜ ì¦ê°€ (ë³„ì¹­) -->
    <update id="increaseViewCount" parameterType="long">
        UPDATE board
        SET
            view_count = view_count + 1,
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_active, true) = true
            AND COALESCE(is_deleted, false) = false
    </update>

    <!-- ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ -->
    <select id="getPopularBoards" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.category,
            b.is_notice,
            b.is_pinned,
            b.created_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.created_at >= DATE_SUB(NOW(), INTERVAL 7 DAY)
        ORDER BY
            (b.view_count * 0.4 + b.like_count * 0.4 + b.comment_count * 0.2) DESC
        LIMIT 5
    </select>

    <!-- ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ -->
    <select id="getBoardsByCategory" parameterType="string" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.category,
            b.is_notice,
            b.is_pinned,
            b.created_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.category = #{category}
        ORDER BY
            b.created_at DESC
        LIMIT 10
    </select>

    <!-- ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ -->
    <select id="getPopularBoardsByCategory" parameterType="string" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.category,
            b.is_notice,
            b.is_pinned,
            b.created_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.created_at >= DATE_SUB(NOW(), INTERVAL 7 DAY)
            <if test="category != null and category != ''">
                AND b.category = #{category}
            </if>
        ORDER BY
            (b.view_count * 0.4 + b.like_count * 0.4 + b.comment_count * 0.2) DESC
        LIMIT 5
    </select>
    
    <!-- ì´ì „ ê²Œì‹œê¸€ ì¡°íšŒ -->
    <select id="getPreviousBoard" parameterType="long" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title
        FROM
            board b
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.board_id &lt; #{boardId}
        ORDER BY
            b.board_id DESC
        LIMIT 1
    </select>
    
    <!-- ë‹¤ìŒ ê²Œì‹œê¸€ ì¡°íšŒ -->
    <select id="getNextBoard" parameterType="long" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title
        FROM
            board b
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.board_id &gt; #{boardId}
        ORDER BY
            b.board_id ASC
        LIMIT 1
    </select>
    
    <!-- ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ì¦ê°€ -->
    <update id="incrementLikeCount" parameterType="long">
        UPDATE board
        SET
            like_count = like_count + 1,
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_active, true) = true
            AND COALESCE(is_deleted, false) = false
    </update>
    
    <!-- ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ê°ì†Œ -->
    <update id="decrementLikeCount" parameterType="long">
        UPDATE board
        SET
            like_count = GREATEST(0, like_count - 1),
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_active, true) = true
            AND COALESCE(is_deleted, false) = false
    </update>
    
    <!-- íŠ¹ì • íšŒì›ì´ ì‘ì„±í•œ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ -->
    <select id="findBoardsByMemberId" resultMap="boardResultMap">
        SELECT b.*, m.name as author_name
        FROM board b
        LEFT JOIN member m ON b.member_id = m.member_id
        WHERE b.member_id = #{memberId}
          AND b.is_deleted = false
        ORDER BY b.created_at DESC
    </select>

    <!-- íšŒì› IDë¡œ ê²Œì‹œê¸€ ì‚­ì œ (íšŒì› íƒˆí‡´ ì‹œ ì‚¬ìš©) -->
    <delete id="deleteByMemberId" parameterType="long">
        DELETE FROM board WHERE member_id = #{memberId}
    </delete>

</mapper>
````

## File: src/main/resources/templates/board/write.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title th:text="${pageTitle + ' - CareLink'}">ê²Œì‹œê¸€ ì‘ì„± - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container mt-4">
            <!-- í˜ì´ì§€ ì œëª© (ë™ì ) -->
            <div class="row mb-4">
                <div class="col-12">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                            <li class="breadcrumb-item"><a href="/board">ì •ë³´ë§ˆë‹¹</a></li>
                            <li class="breadcrumb-item">
                                <a th:href="@{/board(type=${type})}" th:text="${boardTitle}">ê²Œì‹œíŒ</a>
                            </li>
                            <li class="breadcrumb-item active" aria-current="page">ê¸€ ì‘ì„±</li>
                        </ol>
                    </nav>
                    <h2>
                        <i class="fas fa-edit text-primary me-2"></i> 
                        <span th:text="${boardTitle + ' ì‘ì„±'}">ê²Œì‹œê¸€ ì‘ì„±</span>
                    </h2>
                    <p class="text-muted">ìœ ìš©í•œ ì •ë³´ë¥¼ ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ê³¼ ê³µìœ í•´ë³´ì„¸ìš”.</p>
                </div>
            </div>
            
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <form th:action="@{/board/write}" method="post" th:object="${boardDTO}">
                        <!-- ê²Œì‹œíŒ íƒ€ì… ìœ ì§€ë¥¼ ìœ„í•œ hidden í•„ë“œ -->
                        <input type="hidden" name="type" th:value="${type}">
                        
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">
                                    <i class="fas fa-pen me-2"></i>
                                    <span th:text="${boardTitle + ' ì‘ì„±'}">ìƒˆ ê²Œì‹œê¸€ ì‘ì„±</span>
                                </h5>
                            </div>
                            <div class="card-body">
                                <!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label">ì¹´í…Œê³ ë¦¬ <span class="text-danger">*</span></label>
                                        <select class="form-select" th:field="*{category}" required>
                                            <option value="" th:if="${type == 'all'}">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                            <option value="NOTICE" th:selected="${type == 'notice'}" th:if="${type == 'all' or type == 'notice'}">ê³µì§€ì‚¬í•­</option>
                                            <option value="INFO" th:selected="${type == 'info'}" th:if="${type == 'all' or type == 'info'}">ì •ë³´ê³µìœ </option>
                                            <option value="QNA" th:selected="${type == 'qna'}" th:if="${type == 'all' or type == 'qna'}">Q&A</option>
                                            <option value="FAQ" th:selected="${type == 'faq'}" th:if="${type == 'all' or type == 'faq'}">ìì£¼ë¬»ëŠ”ì§ˆë¬¸</option>
                                            <option value="TIP" th:if="${type == 'all'}">íŒ&ë…¸í•˜ìš°</option>
                                            <option value="NEWS" th:if="${type == 'all'}">ë‰´ìŠ¤</option>
                                            <option value="FREE" th:if="${type == 'all'}">ììœ ê²Œì‹œíŒ</option>
                                        </select>
                                        <div class="form-text">
                                            í˜„ì¬ ê²Œì‹œíŒ: <strong th:text="${boardTitle}">ê²Œì‹œíŒ</strong>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">ê²Œì‹œê¸€ ì„¤ì •</label>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" th:field="*{isNotice}" id="isNotice">
                                            <label class="form-check-label" for="isNotice">
                                                ê³µì§€ì‚¬í•­ìœ¼ë¡œ ë“±ë¡
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" th:field="*{isPinned}" id="isPinned">
                                            <label class="form-check-label" for="isPinned">
                                                ìƒë‹¨ ê³ ì •
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì œëª© -->
                                <div class="mb-3">
                                    <label class="form-label">ì œëª© <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" th:field="*{title}" 
                                           placeholder="ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" required maxlength="100">
                                    <div class="form-text">
                                        ìµœëŒ€ 100ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                                        <small class="float-end">
                                            <span id="titleLength">0</span>/100ì
                                        </small>
                                    </div>
                                </div>

                                <!-- ë‚´ìš© -->
                                <div class="mb-4">
                                    <label class="form-label">ë‚´ìš© <span class="text-danger">*</span></label>
                                    <textarea class="form-control" id="content" rows="15" th:field="*{content}" 
                                              placeholder="ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" required minlength="20"
                                              data-rich-editor='{"height": "400px"}'></textarea>
                                    <div class="form-text">
                                        ìµœì†Œ 20ì ì´ìƒ ì‘ì„±í•´ì£¼ì„¸ìš”. ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„°ë¡œ ì´ë¯¸ì§€, í…Œì´ë¸”, ë§í¬ ë“±ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                        <small class="float-end">
                                            <span id="contentLength">0</span>ì
                                        </small>
                                    </div>
                                </div>

                                <!-- íƒœê·¸ -->
                                <div class="mb-4">
                                    <label class="form-label">íƒœê·¸</label>
                                    <input type="text" class="form-control" th:field="*{tags}" 
                                           placeholder="íƒœê·¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ: ìš”ì–‘ì›, ê°„ë³‘, ë³´í—˜)">
                                    <div class="form-text">ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•´ì£¼ì„¸ìš”. ìµœëŒ€ 5ê°œê¹Œì§€ ì¶”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
                                </div>

                                <!-- ë²„íŠ¼ -->
                                <div class="d-flex justify-content-between">
                                    <a th:href="@{/board(type=${type})}" class="btn btn-secondary">
                                        <i class="fas fa-arrow-left me-1"></i> ì·¨ì†Œ
                                    </a>
                                    <div>
                                        <button type="button" class="btn btn-outline-primary me-2" onclick="saveDraft()">
                                            <i class="fas fa-save me-1"></i> ì„ì‹œì €ì¥
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary me-2" onclick="previewBoard()">
                                            <i class="fas fa-eye me-1"></i> ë¯¸ë¦¬ë³´ê¸°
                                        </button>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-paper-plane me-1"></i> ë“±ë¡í•˜ê¸°
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>

                    <!-- ì‘ì„± ê°€ì´ë“œ -->
                    <div class="card mt-4">
                        <div class="card-header bg-info text-white">
                            <h6 class="mb-0"><i class="fas fa-info-circle me-2"></i> ê²Œì‹œê¸€ ì‘ì„± ê°€ì´ë“œ</h6>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="text-success"><i class="fas fa-check-circle me-1"></i> ê¶Œì¥ì‚¬í•­</h6>
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-check text-success me-2"></i> ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ ë„ì›€ì´ ë˜ëŠ” ì •ë³´ë¥¼ ê³µìœ í•´ì£¼ì„¸ìš”</li>
                                        <li><i class="fas fa-check text-success me-2"></i> ëª…í™•í•˜ê³  ì´í•´í•˜ê¸° ì‰½ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”</li>
                                        <li><i class="fas fa-check text-success me-2"></i> ê´€ë ¨ íƒœê·¸ë¥¼ ì¶”ê°€í•˜ì—¬ ê²€ìƒ‰ì´ ìš©ì´í•˜ë„ë¡ í•´ì£¼ì„¸ìš”</li>
                                        <li><i class="fas fa-check text-success me-2"></i> ì ì ˆí•œ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="text-danger"><i class="fas fa-exclamation-triangle me-1"></i> ì£¼ì˜ì‚¬í•­</h6>
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-times text-danger me-2"></i> ê°œì¸ì •ë³´ë‚˜ ë¯¼ê°í•œ ì •ë³´ëŠ” í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”</li>
                                        <li><i class="fas fa-times text-danger me-2"></i> ê´‘ê³ ì„± ê¸€ì´ë‚˜ ìŠ¤íŒ¸ì€ ê¸ˆì§€ë©ë‹ˆë‹¤</li>
                                        <li><i class="fas fa-times text-danger me-2"></i> ìš•ì„¤ì´ë‚˜ ë¹„ë°©ì€ ì‚¼ê°€í•´ì£¼ì„¸ìš”</li>
                                        <li><i class="fas fa-times text-danger me-2"></i> ì €ì‘ê¶Œì„ ì¹¨í•´í•˜ëŠ” ë‚´ìš©ì€ ê¸ˆì§€ë©ë‹ˆë‹¤</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>

    <script>
        // ë¬¸ì ìˆ˜ ì¹´ìš´íŒ…
        document.addEventListener('DOMContentLoaded', function() {
            const titleInput = document.querySelector('input[name="title"]');
            const contentTextarea = document.querySelector('textarea[name="content"]');
            const titleLength = document.getElementById('titleLength');
            const contentLength = document.getElementById('contentLength');
            
            // ì œëª© ê¸€ì ìˆ˜ ì¹´ìš´íŒ…
            titleInput.addEventListener('input', function() {
                titleLength.textContent = this.value.length;
                if (this.value.length > 100) {
                    titleLength.style.color = 'red';
                } else {
                    titleLength.style.color = '';
                }
            });
            
            // ë‚´ìš© ê¸€ì ìˆ˜ ì¹´ìš´íŒ…
            contentTextarea.addEventListener('input', function() {
                contentLength.textContent = this.value.length;
                if (this.value.length < 20) {
                    contentLength.style.color = 'red';
                } else {
                    contentLength.style.color = 'green';
                }
            });
            
            // í¼ ìœ íš¨ì„± ê²€ì‚¬
            const form = document.querySelector('form');
            form.addEventListener('submit', function(e) {
                const title = titleInput.value.trim();
                const content = contentTextarea.value.trim();
                const category = document.querySelector('select[name="category"]').value;
                
                if (!category) {
                    e.preventDefault();
                    alert('ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return false;
                }
                
                if (title.length === 0) {
                    e.preventDefault();
                    alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    titleInput.focus();
                    return false;
                }
                
                if (title.length > 100) {
                    e.preventDefault();
                    alert('ì œëª©ì€ 100ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    titleInput.focus();
                    return false;
                }
                
                if (content.length < 20) {
                    e.preventDefault();
                    alert('ë‚´ìš©ì„ ìµœì†Œ 20ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    contentTextarea.focus();
                    return false;
                }
            });
        });

        // ì„ì‹œì €ì¥ ê¸°ëŠ¥
        function saveDraft() {
            const title = document.querySelector('input[name="title"]').value;
            const content = document.querySelector('textarea[name="content"]').value;
            
            if (title.trim() === '' && content.trim() === '') {
                alert('ì œëª© ë˜ëŠ” ë‚´ìš©ì„ ì…ë ¥í•œ í›„ ì„ì‹œì €ì¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // localStorageì— ì„ì‹œì €ì¥
            const draftData = {
                title: title,
                content: content,
                category: document.querySelector('select[name="category"]').value,
                tags: document.querySelector('input[name="tags"]').value,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('boardDraft', JSON.stringify(draftData));
            alert('ì„ì‹œì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }
        
        // ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥
        function previewBoard() {
            const title = document.querySelector('input[name="title"]').value;
            const content = document.querySelector('textarea[name="content"]').value;
            
            if (title.trim() === '' || content.trim() === '') {
                alert('ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•œ í›„ ë¯¸ë¦¬ë³´ê¸°ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ìƒˆ ì°½ì—ì„œ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
            const previewWindow = window.open('', 'preview', 'width=800,height=600,scrollbars=yes');
            previewWindow.document.write(`
                <html>
                <head>
                    <title>ë¯¸ë¦¬ë³´ê¸°</title>
                    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
                </head>
                <body class="p-4">
                    <div class="container">
                        <h2>${title}</h2>
                        <hr>
                        <div style="white-space: pre-wrap;">${content}</div>
                    </div>
                </body>
                </html>
            `);
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì„ì‹œì €ì¥ëœ ë°ì´í„° ë³µì›
        document.addEventListener('DOMContentLoaded', function() {
            const draftData = localStorage.getItem('boardDraft');
            if (draftData) {
                const data = JSON.parse(draftData);
                const timeDiff = new Date() - new Date(data.timestamp);
                
                // 24ì‹œê°„ ì´ë‚´ ë°ì´í„°ë§Œ ë³µì›
                if (timeDiff < 24 * 60 * 60 * 1000) {
                    if (confirm('ì„ì‹œì €ì¥ëœ ë°ì´í„°ê°€ ìˆìŠµë‹ˆë‹¤. ë³µì›í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        document.querySelector('input[name="title"]').value = data.title;
                        document.querySelector('textarea[name="content"]').value = data.content;
                        document.querySelector('select[name="category"]').value = data.category;
                        document.querySelector('input[name="tags"]').value = data.tags;
                        
                        // ë¬¸ì ìˆ˜ ì—…ë°ì´íŠ¸
                        document.getElementById('titleLength').textContent = data.title.length;
                        document.getElementById('contentLength').textContent = data.content.length;
                    }
                } else {
                    // 24ì‹œê°„ ì§€ë‚œ ë°ì´í„°ëŠ” ì‚­ì œ
                    localStorage.removeItem('boardDraft');
                }
            }
        });
    </script>
    
</body>
</html>
````

## File: src/main/resources/templates/job/detail.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title th:text="${job.title + ' - CareLink'}">êµ¬ì¸êµ¬ì§ ìƒì„¸ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container py-4">
            <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                    <li class="breadcrumb-item"><a href="/job">êµ¬ì¸êµ¬ì§</a></li>
                    <li class="breadcrumb-item active" aria-current="page">ìƒì„¸ë³´ê¸°</li>
                </ol>
            </nav>

            <div class="row">
                <!-- êµ¬ì¸êµ¬ì§ ìƒì„¸ ì •ë³´ -->
                <div class="col-lg-8">
                    <div class="card">
                        <!-- êµ¬ì¸êµ¬ì§ í—¤ë” -->
                        <div class="card-header bg-gradient-primary text-white">
                            <div class="row align-items-center">
                                <div class="col-md-8">
                                    <div class="mb-2">
                                        <div class="d-flex align-items-center gap-2 mb-3">
                                            <span th:if="${job.jobType == 'RECRUIT'}" class="badge bg-white text-primary">êµ¬ì¸</span>
                                            <span th:if="${job.jobType == 'SEARCH'}" class="badge bg-white text-success">êµ¬ì§</span>
                                            <span th:if="${job.workType == 'FULL_TIME'}" class="badge bg-success">ì •ê·œì§</span>
                                            <span th:if="${job.workType == 'PART_TIME'}" class="badge bg-info">íŒŒíŠ¸íƒ€ì„</span>
                                            <span th:if="${job.workType == 'TEMPORARY'}" class="badge bg-warning text-dark">ì„ì‹œì§</span>
                                            <span th:if="${job.priority > 0}" class="badge bg-danger">
                                                <i class="fas fa-fire me-1"></i>ê¸´ê¸‰
                                            </span>
                                        </div>
                                        <h3 class="mb-2 fw-bold" th:text="${job.title}">êµ¬ì¸êµ¬ì§ ì œëª©</h3>
                                        <h5 class="mb-0 fw-normal opacity-75" th:text="${job.facilityName ?: 'ê°œì¸ ì‚¬ì—…ì'}">íšŒì‚¬ëª…</h5>
                                    </div>
                                    <div class="text-white-50 small">
                                        <i class="fas fa-user me-1"></i>
                                        <span th:text="${job.memberName ?: 'ì‘ì„±ì'}">ì‘ì„±ì</span>
                                        <span class="mx-2">|</span>
                                        <i class="fas fa-calendar me-1"></i>
                                        <span th:text="${#temporals.format(job.createdAt, 'yyyy-MM-dd')}">ì‘ì„±ì¼</span>
                                        <span class="mx-2">|</span>
                                        <i class="fas fa-eye me-1"></i>
                                        ì¡°íšŒ <span th:text="${job.viewCount ?: 0}">0</span>
                                    </div>
                                </div>
                                <div class="col-md-4 text-end">
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-light btn-sm" onclick="bookmarkJob()">
                                            <i class="fas fa-bookmark me-1"></i>ê´€ì‹¬ë“±ë¡
                                        </button>
                                        <button type="button" class="btn btn-light btn-sm" onclick="shareJob()">
                                            <i class="fas fa-share me-1"></i>ê³µìœ 
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- êµ¬ì¸êµ¬ì§ ìƒì„¸ ë‚´ìš© -->
                        <div class="card-body">
                            <!-- ê¸°ë³¸ ì •ë³´ ì¹´ë“œ -->
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="card border-0 bg-light h-100">
                                        <div class="card-body">
                                            <h6 class="card-title text-primary mb-3">
                                                <i class="fas fa-briefcase me-2"></i>ê¸°ë³¸ ì •ë³´
                                            </h6>
                                            <div class="info-grid">
                                                <div class="info-item mb-3" th:if="${job.position}">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon-box bg-primary text-white me-3">
                                                            <i class="fas fa-user-tie"></i>
                                                        </div>
                                                        <div>
                                                            <small class="text-muted d-block">ì§ì¢…</small>
                                                            <strong th:text="${job.position}">ì§ì¢…</strong>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="info-item mb-3" th:if="${job.recruitCount}">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon-box bg-success text-white me-3">
                                                            <i class="fas fa-users"></i>
                                                        </div>
                                                        <div>
                                                            <small class="text-muted d-block">ëª¨ì§‘ì¸ì›</small>
                                                            <strong><span th:text="${job.recruitCount}">1</span>ëª…</strong>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="info-item mb-3" th:if="${job.workLocation}">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon-box bg-info text-white me-3">
                                                            <i class="fas fa-map-marker-alt"></i>
                                                        </div>
                                                        <div>
                                                            <small class="text-muted d-block">ê·¼ë¬´ì§€ì—­</small>
                                                            <strong th:text="${job.workLocation}">ê·¼ë¬´ì§€ì—­</strong>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="info-item mb-3" th:if="${job.workHours}">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon-box bg-warning text-white me-3">
                                                            <i class="fas fa-clock"></i>
                                                        </div>
                                                        <div>
                                                            <small class="text-muted d-block">ê·¼ë¬´ì‹œê°„</small>
                                                            <strong th:text="${job.workHours}">ê·¼ë¬´ì‹œê°„</strong>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card border-0 bg-light h-100">
                                        <div class="card-body">
                                            <h6 class="card-title text-success mb-3">
                                                <i class="fas fa-won-sign me-2"></i>ê¸‰ì—¬ ì •ë³´
                                            </h6>
                                            <div class="info-grid">
                                                <div class="info-item mb-3" th:if="${job.salaryType}">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon-box bg-success text-white me-3">
                                                            <i class="fas fa-coins"></i>
                                                        </div>
                                                        <div>
                                                            <small class="text-muted d-block">ê¸‰ì—¬í˜•íƒœ</small>
                                                            <strong>
                                                                <span th:if="${job.salaryType == 'HOURLY'}">ì‹œê¸‰</span>
                                                                <span th:if="${job.salaryType == 'MONTHLY'}">ì›”ê¸‰</span>
                                                                <span th:if="${job.salaryType == 'ANNUAL'}">ì—°ë´‰</span>
                                                            </strong>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="info-item mb-3" th:if="${job.salaryMin != null and job.salaryMax != null}">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon-box bg-primary text-white me-3">
                                                            <i class="fas fa-chart-line"></i>
                                                        </div>
                                                        <div>
                                                            <small class="text-muted d-block">ê¸‰ì—¬ë²”ìœ„</small>
                                                            <strong class="text-success">
                                                                <span th:text="${#numbers.formatDecimal(job.salaryMin, 0, 'COMMA', 0, 'POINT')}">0</span>ì›
                                                                ~ <span th:text="${#numbers.formatDecimal(job.salaryMax, 0, 'COMMA', 0, 'POINT')}">0</span>ì›
                                                            </strong>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="info-item mb-3" th:if="${job.salaryDescription}">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon-box bg-info text-white me-3">
                                                            <i class="fas fa-info-circle"></i>
                                                        </div>
                                                        <div>
                                                            <small class="text-muted d-block">ê¸‰ì—¬ì„¤ëª…</small>
                                                            <strong th:text="${job.salaryDescription}">ê¸‰ì—¬ì„¤ëª…</strong>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ì§€ì› ìê²© -->
                            <div th:if="${not #strings.isEmpty(job.experience) or not #strings.isEmpty(job.education) or not #strings.isEmpty(job.qualifications)}">
                                <h6><i class="fas fa-user-graduate me-2"></i>ì§€ì› ìê²©</h6>
                                <div class="row">
                                    <div class="col-md-4" th:if="${job.experience}">
                                        <strong>ê²½ë ¥:</strong> <span th:text="${job.experience}">ê²½ë ¥</span>
                                    </div>
                                    <div class="col-md-4" th:if="${job.education}">
                                        <strong>í•™ë ¥:</strong> <span th:text="${job.education}">í•™ë ¥</span>
                                    </div>
                                    <div class="col-md-4" th:if="${job.qualifications}">
                                        <strong>ìê²©ìš”ê±´:</strong> <span th:text="${job.qualifications}">ìê²©ìš”ê±´</span>
                                    </div>
                                </div>
                            </div>

                            <!-- ë³µë¦¬í›„ìƒ -->
                            <div class="mb-4" th:if="${job.benefits}">
                                <h6><i class="fas fa-gift me-2"></i>ë³µë¦¬í›„ìƒ</h6>
                                <p th:text="${job.benefits}">ë³µë¦¬í›„ìƒ</p>
                            </div>

                            <!-- ìƒì„¸ ë‚´ìš© -->
                            <div class="mb-4">
                                <h6><i class="fas fa-file-alt me-2"></i>ìƒì„¸ ë‚´ìš©</h6>
                                <div class="content-area border rounded p-3" style="min-height: 200px; line-height: 1.8; background-color: #f8f9fa;">
                                    <div th:utext="${formattedJobContent}"></div>
                                        êµ¬ì¸êµ¬ì§ ìƒì„¸ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                                    </div>
                                </div>
                            </div>

                            <!-- ëª¨ì§‘ ê¸°ê°„ -->
                            <div class="mb-4" th:if="${job.startDate != null or job.endDate != null}">
                                <h6><i class="fas fa-calendar-alt me-2"></i>ëª¨ì§‘ ê¸°ê°„</h6>
                                <div class="alert alert-info">
                                    <span th:if="${job.startDate}">
                                        <strong>ì‹œì‘ì¼:</strong> <span th:text="${#temporals.format(job.startDate, 'yyyy-MM-dd')}">ì‹œì‘ì¼</span>
                                    </span>
                                    <span th:if="${job.endDate}" class="ms-3">
                                        <strong>ë§ˆê°ì¼:</strong> <span th:text="${#temporals.format(job.endDate, 'yyyy-MM-dd')}">ë§ˆê°ì¼</span>
                                    </span>
                                </div>
                            </div>

                            <!-- ì—°ë½ì²˜ ì •ë³´ -->
                            <div class="mb-4" th:if="${(job.contactName != null and !#strings.isEmpty(job.contactName)) or
                             (job.contactPhone != null and !#strings.isEmpty(job.contactPhone)) or
                             (job.contactEmail != null and !#strings.isEmpty(job.contactEmail))}">
                                <h6><i class="fas fa-phone me-2"></i>ì—°ë½ì²˜ ì •ë³´</h6>
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <div th:if="${job.contactName != null and !#strings.isEmpty(job.contactName)}">
                                            <strong>ë‹´ë‹¹ì:</strong> <span th:text="${job.contactName}">ë‹´ë‹¹ì</span>
                                        </div>
                                        <div th:if="${job.contactPhone != null and !#strings.isEmpty(job.contactPhone)}">
                                            <strong>ì—°ë½ì²˜:</strong> <span th:text="${job.contactPhone}">ì—°ë½ì²˜</span>
                                        </div>
                                        <div th:if="${job.contactEmail != null and !#strings.isEmpty(job.contactEmail)}">
                                            <strong>ì´ë©”ì¼:</strong> <span th:text="${job.contactEmail}">ì´ë©”ì¼</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- êµ¬ì¸êµ¬ì§ í‘¸í„° -->
                        <div class="card-footer bg-light">
                            <div class="row">
                                <div class="col-md-6">
                                    <small class="text-muted">
                                        <i class="fas fa-clock me-1"></i>
                                        ìµœì¢… ìˆ˜ì •: <span th:text="${#temporals.format(job.updatedAt, 'yyyy-MM-dd HH:mm')}">ìˆ˜ì •ì¼</span>
                                    </small>
                                </div>
                                <div class="col-md-6 text-end">
                                    <!-- ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥ -->
                                    <div th:if="${(session.memberId != null and session.memberId == job.memberId) or (session.loginMember != null and session.loginMember.role == 'ADMIN')}" 
                                         class="btn-group" role="group">
                                        <a th:href="@{/job/edit/{id}(id=${job.jobId})}" 
                                           class="btn btn-outline-primary btn-sm">
                                            <i class="fas fa-edit me-1"></i>ìˆ˜ì •
                                        </a>
                                        <button type="button" class="btn btn-outline-danger btn-sm" 
                                                onclick="deleteJob()">
                                            <i class="fas fa-trash me-1"></i>ì‚­ì œ
                                        </button>
                                    </div>
                                    <!-- ì‘ì„±ìê°€ ì•„ë‹Œ ê²½ìš° ì‹ ê³  ë²„íŠ¼ë§Œ í‘œì‹œ (ê´€ë¦¬ì ì œì™¸) -->
                                    <button type="button" class="btn btn-outline-warning btn-sm" 
                                            th:if="${session.loginMember != null and session.loginMember.memberId != job.memberId and session.loginMember.role != 'ADMIN'}"
                                            onclick="reportJob()">
                                        <i class="fas fa-exclamation-triangle me-1"></i>ì‹ ê³ 
                                    </button>
                                    <!-- ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì -->
                                    <a th:if="${session.loginMember == null}" 
                                       href="/member/login" class="btn btn-outline-secondary btn-sm">
                                        <i class="fas fa-sign-in-alt me-1"></i>ë¡œê·¸ì¸
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ì§€ì›í•˜ê¸° ë²„íŠ¼ (êµ¬ì¸ê¸€ì¸ ê²½ìš°) -->
                    <div class="text-center mt-4" th:if="${job.jobType == 'RECRUIT'}">
                        <div class="btn-group" role="group">
                            <!-- ì¼ë°˜íšŒì›(USER)ë§Œ ì§€ì›í•˜ê¸° ê°€ëŠ¥ (ì‘ì„±ì ì œì™¸) -->
                            <button class="btn btn-primary btn-lg" 
                                    th:if="${session.loginMember != null and session.loginMember.role == 'USER' and session.memberId != job.memberId}"
                                    onclick="applyJob()">
                                <i class="fas fa-paper-plane me-2"></i>ì§€ì›í•˜ê¸°
                            </button>
                            
                            <!-- ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì -->
                            <a th:if="${session.loginMember == null}" 
                               href="/member/login" class="btn btn-outline-primary btn-lg">
                                <i class="fas fa-sign-in-alt me-2"></i>ë¡œê·¸ì¸ í›„ ì§€ì›í•˜ê¸°
                            </a>
                            
                            <!-- ì§€ì› ë¶ˆê°€ ì‚¬ìš©ìë“¤ ë©”ì‹œì§€ -->
                            <div th:if="${session.loginMember != null and (session.loginMember.role == 'FACILITY' or session.loginMember.role == 'ADMIN' or session.loginMember.memberId == job.memberId)}" 
                                 class="alert alert-info">
                                <i class="fas fa-info-circle me-1"></i>
                                <span th:if="${session.loginMember.memberId == job.memberId}">ì‘ì„±ìëŠ” ìì‹ ì˜ ê³µê³ ì— ì§€ì›í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤</span>
                                <span th:if="${session.loginMember.role == 'FACILITY' and session.loginMember.memberId != job.memberId}">ì‹œì„¤íšŒì›ì€ ì§€ì›í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. êµ¬ì§ìë¥¼ ì±„ìš©í•˜ëŠ” ì—­í• ì…ë‹ˆë‹¤.</span>
                                <span th:if="${session.loginMember.role == 'ADMIN'}">ê´€ë¦¬ìëŠ” ì§€ì›í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤</span>
                            </div>
                            
                            <a href="/job" class="btn btn-secondary">
                                <i class="fas fa-list me-1"></i>ëª©ë¡ìœ¼ë¡œ
                            </a>
                            
                            <!-- ì‹œì„¤íšŒì›(FACILITY) ë˜ëŠ” ê´€ë¦¬ì(ADMIN)ë§Œ êµ¬ì¸ê¸€ì“°ê¸° ê°€ëŠ¥ -->
                            <a th:if="${session.loginMember != null and (session.loginMember.role == 'FACILITY' or session.loginMember.role == 'ADMIN')}" 
                               href="/job/write" class="btn btn-outline-success">
                                <i class="fas fa-plus me-1"></i>êµ¬ì¸ê¸€ì“°ê¸°
                            </a>
                            
                            <!-- ì¼ë°˜ì‚¬ìš©ì(USER)ëŠ” êµ¬ì§ê¸€ì“°ê¸°ë§Œ ê°€ëŠ¥ -->
                            <a th:if="${session.loginMember != null and session.loginMember.role == 'USER'}" 
                               href="/job/write" class="btn btn-outline-info">
                                <i class="fas fa-plus me-1"></i>êµ¬ì§ê¸€ì“°ê¸°
                            </a>
                        </div>
                    </div>

                    <!-- ì—°ë½í•˜ê¸° ë²„íŠ¼ (êµ¬ì§ê¸€ì¸ ê²½ìš°) -->
                    <div class="text-center mt-4" th:if="${job.jobType == 'SEARCH'}">
                        <div class="btn-group" role="group">
                            <!-- ì‹œì„¤íšŒì›(FACILITY)ë§Œ êµ¬ì§ìì—ê²Œ ì—°ë½ ê°€ëŠ¥ (ì‘ì„±ì ì œì™¸) -->
                            <button class="btn btn-success btn-lg" 
                                    th:if="${session.loginMember != null and session.loginMember.role == 'FACILITY' and session.memberId != job.memberId}"
                                    onclick="contactJob()">
                                <i class="fas fa-phone me-2"></i>ì—°ë½í•˜ê¸°
                            </button>
                            
                            <!-- ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì -->
                            <a th:if="${session.loginMember == null}" 
                               href="/member/login" class="btn btn-outline-success btn-lg">
                                <i class="fas fa-sign-in-alt me-2"></i>ë¡œê·¸ì¸ í›„ ì—°ë½í•˜ê¸°
                            </a>
                            
                            <!-- ì—°ë½ ë¶ˆê°€ ì‚¬ìš©ìë“¤ ë©”ì‹œì§€ -->
                            <div th:if="${session.loginMember != null and (session.loginMember.role == 'USER' or session.loginMember.role == 'ADMIN' or session.loginMember.memberId == job.memberId)}" 
                                 class="alert alert-warning">
                                <i class="fas fa-info-circle me-1"></i>
                                <span th:if="${session.loginMember.memberId == job.memberId}">ì‘ì„±ìëŠ” ìì‹ ì˜ ê¸€ì— ì—°ë½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤</span>
                                <span th:if="${session.loginMember.role == 'USER' and session.loginMember.memberId != job.memberId}">ì‹œì„¤íšŒì›ë§Œ êµ¬ì§ìì—ê²Œ ì—°ë½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</span>
                                <span th:if="${session.loginMember.role == 'ADMIN'}">ê´€ë¦¬ìëŠ” ì—°ë½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤</span>
                            </div>
                            
                            <a href="/job" class="btn btn-secondary">
                                <i class="fas fa-list me-1"></i>ëª©ë¡ìœ¼ë¡œ
                            </a>
                            
                            <!-- ì‹œì„¤íšŒì›(FACILITY) ë˜ëŠ” ê´€ë¦¬ì(ADMIN)ë§Œ êµ¬ì¸ê¸€ì“°ê¸° ê°€ëŠ¥ -->
                            <a th:if="${session.loginMember != null and (session.loginMember.role == 'FACILITY' or session.loginMember.role == 'ADMIN')}" 
                               href="/job/write" class="btn btn-outline-success">
                                <i class="fas fa-plus me-1"></i>êµ¬ì¸ê¸€ì“°ê¸°
                            </a>
                            
                            <!-- ì¼ë°˜ì‚¬ìš©ì(USER)ëŠ” êµ¬ì§ê¸€ì“°ê¸°ë§Œ ê°€ëŠ¥ -->
                            <a th:if="${session.loginMember != null and session.loginMember.role == 'USER'}" 
                               href="/job/write" class="btn btn-outline-info">
                                <i class="fas fa-plus me-1"></i>êµ¬ì§ê¸€ì“°ê¸°
                            </a>
                        </div>
                    </div>
                </div>

                <!-- ì‚¬ì´ë“œë°” -->
                <div class="col-lg-4">
                    <!-- ì‹œì„¤ ì •ë³´ (êµ¬ì¸ê¸€ì´ê³  ì‹œì„¤ ì •ë³´ê°€ ìˆëŠ” ê²½ìš°) -->
                    <div th:if="${job.jobType == 'RECRUIT' and (job.facilityName != null and !#strings.isEmpty(job.facilityName))}"> </div>
                        <div class="card-header bg-primary text-white">
                            <h6 class="mb-0">
                                <i class="fas fa-building me-2"></i>ì‹œì„¤ ì •ë³´
                            </h6>
                        </div>
                        <div class="card-body">
                            <h6 th:text="${job.facilityName}">ì‹œì„¤ëª…</h6>
                            <p class="text-muted mb-2">ê´€ë ¨ ì‹œì„¤ì—ì„œ ëª¨ì§‘í•˜ëŠ” êµ¬ì¸ ì •ë³´ì…ë‹ˆë‹¤.</p>
                            <a th:href="@{/facility/detail/{id}(id=${job.facilityId})}" 
                               class="btn btn-outline-primary btn-sm"
                               th:if="${job.facilityId}">
                                <i class="fas fa-info-circle me-1"></i>ì‹œì„¤ ìƒì„¸ë³´ê¸°
                            </a>
                        </div>
                    </div>

                    <!-- ì§€ì› í˜„í™© -->
                    <div class="card mb-4" th:if="${job.jobType == 'RECRUIT'}">
                        <div class="card-header bg-light">
                            <h6 class="mb-0">
                                <i class="fas fa-users me-2"></i>ì§€ì› í˜„í™©
                            </h6>
                        </div>
                        <div class="card-body text-center">
                            <div class="row">
                                <div class="col-6">
                                    <div class="border-end">
                                        <h4 class="text-primary mb-0" th:text="${job.applyCount ?: 0}">0</h4>
                                        <small class="text-muted">ì§€ì›ì ìˆ˜</small>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <h4 class="text-success mb-0" th:text="${job.recruitCount ?: 1}">1</h4>
                                    <small class="text-muted">ëª¨ì§‘ ì¸ì›</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ì‘ì„±ì ì •ë³´ -->
                    <div class="card">
                        <div class="card-header bg-light">
                            <h6 class="mb-0">
                                <i class="fas fa-user me-2"></i>ì‘ì„±ì ì •ë³´
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <div class="avatar-circle bg-primary text-white me-3">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div>
                                    <h6 class="mb-0" th:text="${job.memberName ?: 'ì‘ì„±ì'}">ì‘ì„±ì</h6>
                                    <small class="text-muted">
                                        <span th:text="${#temporals.format(job.createdAt, 'yyyy-MM-dd')}">2024-01-01</span> ê°€ì…
                                    </small>
                                </div>
                            </div>
                            <div class="text-center">
                                <button class="btn btn-outline-primary btn-sm me-2" onclick="sendMessage()">
                                    <i class="fas fa-envelope me-1"></i>ìª½ì§€
                                </button>
                                <button class="btn btn-outline-secondary btn-sm" onclick="reportJob()">
                                    <i class="fas fa-exclamation-triangle me-1"></i>ì‹ ê³ 
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- JavaScriptìš© hidden inputs -->
    <input type="hidden" id="contactPhone" th:value="${job.contactPhone}">
    <input type="hidden" id="contactEmail" th:value="${job.contactEmail}">
    <input type="hidden" id="jobId" th:value="${job.jobId}">
    
    
    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>
    
    <!-- êµ¬ì¸êµ¬ì§ ìƒì„¸ë³´ê¸° ì „ìš© JavaScript -->
    <script src="/js/job-detail.js"></script>

    <style>
        .avatar-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* êµ¬ì¸êµ¬ì§ ìƒì„¸ í˜ì´ì§€ ì¶”ê°€ ìŠ¤íƒ€ì¼ */
        .bg-gradient-primary {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
        }

        .icon-box {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .info-item {
            transition: all 0.3s ease;
        }

        .info-item:hover {
            transform: translateX(5px);
        }

        .content-area {
            transition: all 0.3s ease;
        }

        .content-area:hover {
            border-color: #007bff;
        }
    </style>

</body>
</html>
````

## File: src/main/resources/templates/member/crop-image.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item"><a href="/member/myinfo">ë§ˆì´í˜ì´ì§€</a></li>
                <li class="breadcrumb-item active" aria-current="page">í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­</li>
            </ol>
        </nav>
        
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
                <div class="card shadow">
                    <div class="card-body p-4">
                        <div class="text-center mb-4">
                            <h3 class="card-title fw-bold text-primary">
                                <i class="fas fa-crop me-2"></i>
                                í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­
                            </h3>
                            <p class="text-muted">ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨(3:4)ì— ë§ì¶° í”„ë¡œí•„ ì‚¬ì§„ì„ ì¡°ì ˆí•˜ì„¸ìš”</p>
                        </div>

                        <!-- ë‹¨ê³„ í‘œì‹œê¸° -->
                        <div class="steps-indicator mb-4">
                            <div class="step-item" id="step1">
                                <div class="step-circle">
                                    <i class="fas fa-upload"></i>
                                </div>
                                <div class="step-label">ì´ë¯¸ì§€ ì„ íƒ</div>
                            </div>
                            <div class="step-connector"></div>
                            <div class="step-item" id="step2">
                                <div class="step-circle">
                                    <i class="fas fa-crop-alt"></i>
                                </div>
                                <div class="step-label">ë¹„ìœ¨ ì¡°ì ˆ</div>
                            </div>
                            <div class="step-connector"></div>
                            <div class="step-item" id="step3">
                                <div class="step-circle">
                                    <i class="fas fa-compress-alt"></i>
                                </div>
                                <div class="step-label">ì••ì¶• & SEO</div>
                            </div>
                            <div class="step-connector"></div>
                            <div class="step-item" id="step4">
                                <div class="step-circle">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="step-label">ì™„ë£Œ</div>
                            </div>
                        </div>

                        <!-- 1ë‹¨ê³„: íŒŒì¼ ì—…ë¡œë“œ -->
                        <div id="uploadSection" class="upload-section">
                            <div class="upload-area" id="uploadArea">
                                <div class="upload-content">
                                    <div class="upload-icon">
                                        <i class="fas fa-cloud-upload-alt fa-3x text-primary"></i>
                                    </div>
                                    <h5 class="upload-title">í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ</h5>
                                    <p class="upload-description text-muted">
                                        ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œí•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”
                                    </p>
                                    <div class="upload-format-info">
                                        <small class="text-muted">
                                            <i class="fas fa-info-circle me-1"></i>
                                            JPG, PNG, WebP íŒŒì¼ ì§€ì› (í° íŒŒì¼ë„ ìë™ ì••ì¶•)
                                        </small>
                                        <br>
                                        <small class="text-info">
                                            <i class="fas fa-crop-alt me-1"></i>
                                            ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨ (3:4) ìë™ ì¡°ì •
                                        </small>
                                        <br>
                                        <small class="text-success">
                                            <i class="fas fa-compress-alt me-1"></i>
                                            AVIF/WebPë¡œ ìš©ëŸ‰ ìµœì í™”
                                        </small>
                                    </div>
                                    <button type="button" class="btn btn-primary btn-lg mt-3" id="fileSelectBtn">
                                        <i class="fas fa-folder-open me-2"></i>íŒŒì¼ ì„ íƒ
                                    </button>
                                </div>
                            </div>
                            <input type="file" id="imageInput" accept="image/*" style="display: none;">
                        </div>

                        <!-- 2ë‹¨ê³„: í¬ë¡­ ë° ì¡°ì • -->
                        <div id="cropSection" class="crop-section" style="display: none;">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="crop-container">
                                        <h6 class="mb-3">
                                            <i class="fas fa-crop-alt me-2"></i>ì´ë¯¸ì§€ í¬ë¡­ ë° ì¡°ì •
                                        </h6>
                                        <div class="crop-image-container">
                                            <img id="cropImage" alt="í¬ë¡­í•  ì´ë¯¸ì§€" style="max-width: 100%; max-height: 400px;">
                                        </div>
                                        <div class="crop-controls mt-3">
                                            <div class="btn-group" role="group">
                                                <button type="button" class="btn btn-outline-secondary btn-sm" id="zoomIn">
                                                    <i class="fas fa-search-plus me-1"></i>í™•ëŒ€
                                                </button>
                                                <button type="button" class="btn btn-outline-secondary btn-sm" id="zoomOut">
                                                    <i class="fas fa-search-minus me-1"></i>ì¶•ì†Œ
                                                </button>
                                                <button type="button" class="btn btn-outline-secondary btn-sm" id="resetZoom">
                                                    <i class="fas fa-undo me-1"></i>ì´ˆê¸°í™”
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="crop-preview-panel">
                                        <h6 class="mb-3">
                                            <i class="fas fa-eye me-2"></i>ë¯¸ë¦¬ë³´ê¸°
                                        </h6>
                                        
                                        <div class="profile-preview mb-3">
                                            <div class="profile-card text-center p-3 bg-light rounded">
                                                <canvas id="previewCanvas" width="90" height="120" 
                                                        style="border-radius: 8px; border: 2px solid #dee2e6;"></canvas>
                                                <div class="mt-2">
                                                    <small class="text-muted">í”„ë¡œí•„ ë¯¸ë¦¬ë³´ê¸°</small>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- ì¤Œ í‘œì‹œê¸° -->
                                        <div class="zoom-indicator" id="zoomIndicator" style="display: none;">
                                            <small class="text-muted">
                                                <i class="fas fa-search me-1"></i>
                                                ì¤Œ: <span id="zoomLevel">100%</span>
                                                <span id="zoomStatus" class="ms-1"></span>
                                            </small>
                                        </div>

                                        <!-- ì´ë¯¸ì§€ ì •ë³´ -->
                                        <div class="image-info-panel mt-3">
                                            <small class="text-muted">
                                                <div class="mb-1">
                                                    <i class="fas fa-file-image me-1"></i>
                                                    í¬ê¸°: <span id="imageSize">-</span>
                                                </div>
                                                <div class="mb-1">
                                                    <i class="fas fa-arrows-alt me-1"></i>
                                                    í•´ìƒë„: <span id="imageDimensions">-</span>
                                                </div>
                                                <div class="mb-1">
                                                    <i class="fas fa-crop-alt me-1"></i>
                                                    ìµœì¢…: 300 Ã— 400px
                                                </div>
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="crop-actions mt-4">
                                <div class="d-flex justify-content-between">
                                    <button type="button" class="btn btn-outline-secondary" id="backToUpload">
                                        <i class="fas fa-arrow-left me-1"></i>ë‹¤ë¥¸ ì´ë¯¸ì§€ ì„ íƒ
                                    </button>
                                    <button type="button" class="btn btn-primary" id="cropAndSave">
                                        <i class="fas fa-crop-alt me-1"></i>í¬ë¡­ ì™„ë£Œ
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 3ë‹¨ê³„: ì••ì¶• ë° SEO ìµœì í™” -->
                        <div id="compressionSection" class="compression-section" style="display: none;">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="compression-settings">
                                        <h6 class="mb-3">
                                            <i class="fas fa-compress-alt me-2"></i>ì´ë¯¸ì§€ ì••ì¶• ì„¤ì •
                                        </h6>
                                        
                                        <!-- ì´ë¯¸ì§€ í˜•ì‹ ì„ íƒ -->
                                        <div class="mb-3">
                                            <label class="form-label">ì´ë¯¸ì§€ í˜•ì‹</label>
                                            <div class="btn-group w-100" role="group">
                                                <input type="radio" class="btn-check" name="imageFormat" id="formatAVIF" value="avif" checked>
                                                <label class="btn btn-outline-success btn-sm" for="formatAVIF">
                                                    <i class="fas fa-bolt me-1"></i>AVIF
                                                    <small class="d-block text-muted">ìš©ëŸ‰ ìµœì†Œ (ê¶Œì¥)</small>
                                                </label>
                                                
                                                <input type="radio" class="btn-check" name="imageFormat" id="formatWEBP" value="webp">
                                                <label class="btn btn-outline-primary btn-sm" for="formatWEBP">
                                                    <i class="fas fa-rocket me-1"></i>WebP
                                                    <small class="d-block text-muted">ë¹ ë¥¸ ë¡œë”©</small>
                                                </label>
                                                
                                                <input type="radio" class="btn-check" name="imageFormat" id="formatJPEG" value="jpeg">
                                                <label class="btn btn-outline-secondary btn-sm" for="formatJPEG">
                                                    <i class="fas fa-check me-1"></i>JPEG
                                                    <small class="d-block text-muted">ë²”ìš© í˜¸í™˜</small>
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <!-- ì••ì¶• í’ˆì§ˆ -->
                                        <div class="mb-3">
                                            <label class="form-label">
                                                ì••ì¶• í’ˆì§ˆ: <span id="qualityPercent">80%</span>
                                            </label>
                                            <input type="range" class="form-range" id="qualitySlider" 
                                                   min="0.3" max="1.0" step="0.1" value="0.8">
                                            <div class="d-flex justify-content-between small text-muted">
                                                <span>ë†’ì€ ì••ì¶•</span>
                                                <span>ë†’ì€ í’ˆì§ˆ</span>
                                            </div>
                                        </div>
                                        
                                        <!-- ìë™ ìµœì í™” -->
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="autoOptimize" checked>
                                            <label class="form-check-label" for="autoOptimize">
                                                <i class="fas fa-magic me-1"></i>ìë™ ìµœì í™”
                                                <small class="d-block text-muted">ë¸Œë¼ìš°ì €ë³„ ìµœì  í˜•ì‹ ìë™ ì„ íƒ</small>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="compression-preview">
                                        <h6 class="mb-3">
                                            <i class="fas fa-eye me-2"></i>ì••ì¶• ê²°ê³¼
                                        </h6>
                                        <div class="compression-info text-center mb-3">
                                            <div class="compression-savings text-success fw-bold mb-2">
                                                <span id="compressionSavings">ê³„ì‚° ì¤‘...</span>
                                            </div>
                                            <small class="text-muted">
                                                í˜„ì¬ í˜•ì‹: <span id="currentFormat" class="fw-bold">AVIF</span>
                                            </small>
                                        </div>
                                        
                                        <div class="final-preview-container">
                                            <img id="finalPreviewImage" class="img-fluid rounded" 
                                                 style="max-width: 100%; height: auto; border: 2px solid #dee2e6;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- SEO ìµœì í™” ì„¹ì…˜ -->
                            <div class="seo-optimization-section mt-4">
                                <h6 class="mb-3">
                                    <i class="fas fa-search me-2"></i>SEO ìµœì í™” & íŒŒì¼ëª… ê´€ë¦¬
                                </h6>
                                
                                <!-- ì´ë¯¸ì§€ íŒŒì¼ëª… ìˆ˜ì • -->
                                <div class="mb-4">
                                    <label for="profileNameInput" class="form-label">
                                        <i class="fas fa-file-signature me-1"></i>ì´ë¯¸ì§€ íŒŒì¼ëª…
                                    </label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="profileNameInput" 
                                               placeholder="ì˜ˆ: ê¹€ì² ìˆ˜-ì¦ëª…ì‚¬ì§„">
                                        <button type="button" class="btn btn-outline-info" id="previewProfileNameBtn">
                                            <i class="fas fa-eye me-1"></i>ë¯¸ë¦¬ë³´ê¸°
                                        </button>
                                    </div>
                                    <div class="mt-2">
                                        <small class="text-info">
                                            <i class="fas fa-info-circle me-1"></i>
                                            ì‹¤ì œ ì €ì¥ëª…: <span id="previewProfileName" class="fw-bold">profile_user_photo.jpg</span>
                                        </small>
                                    </div>
                                </div>

                                <!-- ì¶”ì²œ í‚¤ì›Œë“œ -->
                                <div class="mb-3">
                                    <label class="form-label">
                                        <i class="fas fa-tags me-1"></i>ì¶”ì²œ í‚¤ì›Œë“œ (í´ë¦­í•˜ì—¬ ì¶”ê°€)
                                    </label>
                                    <div class="keyword-suggestions">
                                        <div class="mb-2">
                                            <small class="text-muted fw-bold">ì‚¬ì§„ ì¢…ë¥˜:</small>
                                            <div class="keyword-group">
                                                <button type="button" class="btn btn-outline-primary btn-sm keyword-btn" data-keyword="ì¦ëª…ì‚¬ì§„">ì¦ëª…ì‚¬ì§„</button>
                                                <button type="button" class="btn btn-outline-primary btn-sm keyword-btn" data-keyword="í”„ë¡œí•„">í”„ë¡œí•„</button>
                                                <button type="button" class="btn btn-outline-primary btn-sm keyword-btn" data-keyword="ì •ë©´ì‚¬ì§„">ì •ë©´ì‚¬ì§„</button>
                                                <button type="button" class="btn btn-outline-primary btn-sm keyword-btn" data-keyword="ì—¬ê¶Œì‚¬ì§„">ì—¬ê¶Œì‚¬ì§„</button>
                                            </div>
                                        </div>
                                        <div class="mb-2">
                                            <small class="text-muted fw-bold">ìš©ë„:</small>
                                            <div class="keyword-group">
                                                <button type="button" class="btn btn-outline-success btn-sm keyword-btn" data-keyword="ì´ë ¥ì„œ">ì´ë ¥ì„œ</button>
                                                <button type="button" class="btn btn-outline-success btn-sm keyword-btn" data-keyword="ìê²©ì¦">ìê²©ì¦</button>
                                                <button type="button" class="btn btn-outline-success btn-sm keyword-btn" data-keyword="ì‹ ë¶„ì¦">ì‹ ë¶„ì¦</button>
                                                <button type="button" class="btn btn-outline-success btn-sm keyword-btn" data-keyword="ì…ì‚¬ì§€ì›">ì…ì‚¬ì§€ì›</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Alt í…ìŠ¤íŠ¸ -->
                                <div class="mb-3">
                                    <label for="altTextInput" class="form-label">
                                        <i class="fas fa-tag me-1"></i>ì´ë¯¸ì§€ ì„¤ëª… (Alt í…ìŠ¤íŠ¸)
                                    </label>
                                    <div class="input-group">
                                        <textarea class="form-control" id="altTextInput" rows="2" 
                                                  placeholder="í”„ë¡œí•„ ì´ë¯¸ì§€ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš” (SEO ìµœì í™”ìš©)">ì‚¬ìš©ì í”„ë¡œí•„ ì‚¬ì§„</textarea>
                                        <button type="button" class="btn btn-outline-secondary" id="autoGenerateAltBtn">
                                            <i class="fas fa-magic me-1"></i>ìë™ ìƒì„±
                                        </button>
                                    </div>
                                    <small class="text-muted">
                                        <i class="fas fa-lightbulb me-1"></i>
                                        ê²€ìƒ‰ ì—”ì§„ ìµœì í™”ë¥¼ ìœ„í•œ ì´ë¯¸ì§€ ì„¤ëª…ì…ë‹ˆë‹¤
                                    </small>
                                </div>

                                <!-- SEO íŒ -->
                                <div class="seo-tips alert alert-info">
                                    <h6 class="alert-heading">
                                        <i class="fas fa-graduation-cap me-2"></i>SEO ìµœì í™” íŒ
                                    </h6>
                                    <ul class="mb-0 small">
                                        <li>êµ¬ì²´ì ì¸ í”„ë¡œí•„ ì‚¬ì§„ ì„¤ëª… ì‘ì„±</li>
                                        <li>ìš©ë„ë‚˜ ëª©ì ì„ í¬í•¨í•œ í‚¤ì›Œë“œ ì‚¬ìš©</li>
                                        <li>ì˜ˆ: "ê¹€ì² ìˆ˜ ìš”ì–‘ë³´í˜¸ì‚¬ ì¦ëª…ì‚¬ì§„"</li>
                                        <li>í•œê¸€ í‚¤ì›Œë“œë¡œ êµ­ë‚´ ê²€ìƒ‰ì— ìµœì í™”</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="compression-actions mt-4 text-center">
                                <div class="d-flex justify-content-between">
                                    <button type="button" class="btn btn-outline-secondary" id="backToCropBtn">
                                        <i class="fas fa-arrow-left me-2"></i>í¬ë¡­ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                                    </button>
                                    <button type="button" class="btn btn-success" id="saveImageBtn">
                                        <i class="fas fa-save me-2"></i>ì™„ë£Œ
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 4ë‹¨ê³„: ì™„ë£Œ -->
                        <div id="completeSection" class="complete-section" style="display: none;">
                            <div class="text-center">
                                <div class="success-icon mb-3">
                                    <i class="fas fa-check-circle fa-4x text-success"></i>
                                </div>
                                <h4 class="text-success mb-2">í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ!</h4>
                                <p class="text-muted mb-4">ìƒˆë¡œìš´ í”„ë¡œí•„ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                                
                                <div class="final-preview mb-4">
                                    <img id="finalPreview" style="width: 150px; height: 200px; border-radius: 8px; object-fit: cover;" alt="ìµœì¢… í”„ë¡œí•„ ì´ë¯¸ì§€">
                                </div>
                                
                                <div class="d-flex justify-content-center gap-3">
                                    <button type="button" class="btn btn-outline-primary" id="cropAnother">
                                        <i class="fas fa-redo me-1"></i>ë‹¤ë¥¸ ì´ë¯¸ì§€ ì„ íƒ
                                    </button>
                                    <a href="/member/myinfo/edit" class="btn btn-success">
                                        <i class="fas fa-user me-1"></i>ë§ˆì´í˜ì´ì§€ë¡œ ì´ë™
                                    </a>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ë°±ì—… ê¸°ë°˜ ê³ ê¸‰ í¬ë¡­ ìŠ¤í¬ë¦½íŠ¸ -->
<script>
/**
 * í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ ì „ìš© JavaScript
 * í•œêµ­ í‘œì¤€ ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨(3:4) ìµœì í™” ë²„ì „
 * Cropper.js ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
 */

// ì „ì—­ ë³€ìˆ˜
let cropper = null;
let originalImageData = null;
let originalImage = null;

// DOM ìš”ì†Œ
const elements = {};

// ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    initializeElements();
    setupEventListeners();
    console.log('í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€ ì´ˆê¸°í™” ì™„ë£Œ (Cropper.js)');
});

// DOM ìš”ì†Œ ì´ˆê¸°í™”
function initializeElements() {
    elements.imageInput = document.getElementById('imageInput');
    elements.cropImage = document.getElementById('cropImage');
    elements.uploadSection = document.getElementById('uploadSection');
    elements.cropSection = document.getElementById('cropSection');
    elements.compressionSection = document.getElementById('compressionSection');
    elements.completeSection = document.getElementById('completeSection');
    elements.previewCanvas = document.getElementById('previewCanvas');
    elements.finalPreview = document.getElementById('finalPreview');
    elements.finalPreviewImage = document.getElementById('finalPreviewImage');
    elements.zoomIndicator = document.getElementById('zoomIndicator');
    elements.zoomLevel = document.getElementById('zoomLevel');
    elements.zoomStatus = document.getElementById('zoomStatus');
    elements.compressionSavings = document.getElementById('compressionSavings');
    elements.qualitySlider = document.getElementById('qualitySlider');
    elements.qualityLabel = document.getElementById('qualityLabel');
    elements.altTextInput = document.getElementById('altTextInput');
    elements.currentFormat = document.getElementById('currentFormat');
    elements.formatJPEG = document.getElementById('formatJPEG');
    elements.formatAVIF = document.getElementById('formatAVIF');
    elements.formatWEBP = document.getElementById('formatWEBP');
    
    // ë‹¨ê³„ ìš”ì†Œ
    elements.steps = {
        step1: document.getElementById('step1'),
        step2: document.getElementById('step2'),
        step3: document.getElementById('step3'),
        step4: document.getElementById('step4')
    };
    
    // ë²„íŠ¼ ìš”ì†Œ
    elements.buttons = {
        zoomIn: document.getElementById('zoomIn'),
        zoomOut: document.getElementById('zoomOut'),
        resetZoom: document.getElementById('resetZoom'),
        backToUpload: document.getElementById('backToUpload'),
        cropAndSave: document.getElementById('cropAndSave'),
        cropAnother: document.getElementById('cropAnother'),
        backToCrop: document.getElementById('backToCropBtn'),
        removeImage: document.getElementById('removeImageBtn'),
        saveImage: document.getElementById('saveImageBtn'),
        recompress: document.getElementById('recompressBtn'),
        autoGenerateAlt: document.getElementById('autoGenerateAltBtn'),
        optimize: document.getElementById('optimizeBtn')
    };
}

// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
function setupEventListeners() {
    // íŒŒì¼ ì…ë ¥ ì´ë²¤íŠ¸ ë“±ë¡
    if (elements.imageInput) {
        elements.imageInput.removeEventListener('change', handleImageUpload);
        elements.imageInput.addEventListener('change', handleImageUpload);
        console.log('íŒŒì¼ ì…ë ¥ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ë¨');
    }
    
    // í™•ëŒ€/ì¶•ì†Œ ë²„íŠ¼
    if (elements.buttons.zoomIn) {
        elements.buttons.zoomIn.addEventListener('click', () => {
            if (cropper) {
                cropper.zoom(0.1);
            }
        });
    }
    
    if (elements.buttons.zoomOut) {
        elements.buttons.zoomOut.addEventListener('click', () => {
            if (cropper) {
                cropper.zoom(-0.1);
            }
        });
    }
    
    if (elements.buttons.resetZoom) {
        elements.buttons.resetZoom.addEventListener('click', () => {
            if (cropper) {
                cropper.reset();
            }
        });
    }
    
    // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼
    if (elements.buttons.backToUpload) {
        elements.buttons.backToUpload.addEventListener('click', goToUploadStep);
    }
    
    if (elements.buttons.cropAndSave) {
        elements.buttons.cropAndSave.addEventListener('click', cropAndSaveImage);
    }
    
    if (elements.buttons.cropAnother) {
        elements.buttons.cropAnother.addEventListener('click', goToUploadStep);
    }
    
    // 3ë‹¨ê³„ ì••ì¶• ê´€ë ¨ ë²„íŠ¼
    if (elements.buttons.backToCrop) {
        elements.buttons.backToCrop.addEventListener('click', goToCropStep);
    }
    
    if (elements.buttons.removeImage) {
        elements.buttons.removeImage.addEventListener('click', goToUploadStep);
    }
    
    if (elements.buttons.saveImage) {
        elements.buttons.saveImage.addEventListener('click', saveCompressedImageToServer);
    }
    
    if (elements.buttons.recompress) {
        elements.buttons.recompress.addEventListener('click', updateCompression);
    }
    
    if (elements.buttons.autoGenerateAlt) {
        elements.buttons.autoGenerateAlt.addEventListener('click', generateAltText);
    }
    
    if (elements.buttons.optimize) {
        elements.buttons.optimize.addEventListener('click', autoOptimizeImage);
    }
    
    // ì••ì¶• í’ˆì§ˆ ìŠ¬ë¼ì´ë”
    if (elements.qualitySlider) {
        elements.qualitySlider.addEventListener('input', (e) => {
            const quality = Math.round(e.target.value * 100);
            elements.qualityLabel.textContent = quality;
            updateCompression();
        });
    }
    
    // ì´ë¯¸ì§€ í˜•ì‹ ì„ íƒ
    ['formatJPEG', 'formatAVIF', 'formatWEBP'].forEach(formatId => {
        const element = document.getElementById(formatId);
        if (element) {
            element.addEventListener('change', updateCompression);
        }
    });
    
    // íŒŒì¼ ì„ íƒ ë²„íŠ¼
    const fileSelectBtn = document.getElementById('fileSelectBtn');
    if (fileSelectBtn) {
        fileSelectBtn.addEventListener('click', () => {
            console.log('íŒŒì¼ ì„ íƒ ë²„íŠ¼ í´ë¦­ë¨');
            if (elements.imageInput) {
                elements.imageInput.click();
            }
        });
    }
    
    // ë“œë˜ê·¸ ì•¤ ë“œë¡­ (ì—…ë¡œë“œ ì˜ì—­ ì „ì²´)
    const uploadArea = document.querySelector('.upload-area');
    if (uploadArea) {
        uploadArea.addEventListener('dragover', handleDragOver);
        uploadArea.addEventListener('drop', handleDrop);
        
        // ì—…ë¡œë“œ ì˜ì—­ í´ë¦­ ì‹œ íŒŒì¼ ì„ íƒ (ë²„íŠ¼ ì˜ì—­ ì œì™¸)
        uploadArea.addEventListener('click', (event) => {
            if (!event.target.closest('#fileSelectBtn')) {
                console.log('ì—…ë¡œë“œ ì˜ì—­ í´ë¦­ë¨');
                if (elements.imageInput) {
                    elements.imageInput.click();
                }
            }
        });
    }
}

// ë“œë˜ê·¸ ì˜¤ë²„ ì²˜ë¦¬
function handleDragOver(event) {
    event.preventDefault();
    event.currentTarget.style.borderColor = '#0d6efd';
    event.currentTarget.style.backgroundColor = '#f8f9ff';
}

// ë“œë¡­ ì²˜ë¦¬
function handleDrop(event) {
    event.preventDefault();
    const files = event.dataTransfer.files;
    if (files.length > 0) {
        handleImageFile(files[0]);
    }
    
    // ìŠ¤íƒ€ì¼ ë¦¬ì…‹
    event.currentTarget.style.borderColor = '';
    event.currentTarget.style.backgroundColor = '';
}

// ì´ë¯¸ì§€ ì—…ë¡œë“œ ì²˜ë¦¬
function handleImageUpload(event) {
    console.log('íŒŒì¼ ì—…ë¡œë“œ ì´ë²¤íŠ¸ ë°œìƒ:', event);
    const file = event.target.files[0];
    if (file) {
        console.log('ì„ íƒëœ íŒŒì¼:', file.name, file.size, file.type);
        handleImageFile(file);
    } else {
        console.log('ì„ íƒëœ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤');
    }
}

// ì´ë¯¸ì§€ íŒŒì¼ ì²˜ë¦¬
function handleImageFile(file) {
    console.log('ì´ë¯¸ì§€ íŒŒì¼ ì²˜ë¦¬ ì‹œì‘:', file.name, 'í¬ê¸°:', (file.size / 1024 / 1024).toFixed(2) + 'MB');
    
    // íŒŒì¼ íƒ€ì… ê²€ì¦
    if (!file.type.startsWith('image/')) {
        alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
        return;
    }
    
    // ì§€ì›ë˜ëŠ” í˜•ì‹ ê²€ì¦
    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
        alert('JPG, PNG, WebP íŒŒì¼ë§Œ ì§€ì›ë©ë‹ˆë‹¤.');
        return;
    }
    
    console.log('íŒŒì¼ ê²€ì¦ í†µê³¼, FileReader ì‹œì‘');
    
    // í° íŒŒì¼ë„ í—ˆìš©í•˜ê³  ì••ì¶•ìœ¼ë¡œ í•´ê²°
    if (file.size > 5 * 1024 * 1024) {
        console.log('âš ï¸ í° íŒŒì¼ ê°ì§€ (' + (file.size / 1024 / 1024).toFixed(2) + 'MB) - ì••ì¶•ìœ¼ë¡œ ì²˜ë¦¬');
        showLargeFileNotice(file.size);
    }
    
    // ë¡œì»¬ì—ì„œ ì´ë¯¸ì§€ ë¡œë“œ
    const reader = new FileReader();
    reader.onload = function(e) {
        console.log('FileReader ë¡œë“œ ì™„ë£Œ');
        originalImageData = e.target.result;
        loadImageToCropper(originalImageData);
        goToCropStep();
    };
    reader.onerror = function(e) {
        console.error('FileReader ì˜¤ë¥˜:', e);
        alert('íŒŒì¼ ì½ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    };
    reader.readAsDataURL(file);
}

// í° íŒŒì¼ ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ
function showLargeFileNotice(fileSize) {
    const sizeMB = (fileSize / 1024 / 1024).toFixed(2);
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-info alert-dismissible fade show position-fixed top-0 start-50 translate-middle-x mt-3';
    alertDiv.style.cssText = 'z-index: 10000; min-width: 350px;';
    alertDiv.innerHTML = `
        <i class="fas fa-info-circle me-2"></i>
        í° íŒŒì¼(${sizeMB}MB)ì„ ì—…ë¡œë“œí•˜ì…¨ìŠµë‹ˆë‹¤. ìë™ìœ¼ë¡œ ì••ì¶•í•˜ì—¬ ìµœì í™”í•©ë‹ˆë‹¤.
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    document.body.appendChild(alertDiv);
    
    // 8ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 8000);
}

// í¬ë¡­í¼ì— ì´ë¯¸ì§€ ë¡œë“œ
function loadImageToCropper(imageData) {
    if (!elements.cropImage) return;
    
    elements.cropImage.src = imageData;
    elements.cropImage.style.display = 'block';
    
    // ì´ë¯¸ì§€ê°€ ë¡œë“œëœ í›„ í¬ë¡­í¼ ì´ˆê¸°í™”
    elements.cropImage.onload = function() {
        console.log('ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ, í¬ë¡­í¼ ì´ˆê¸°í™” ì‹œì‘');
        setTimeout(() => {
            initializeCropper();
        }, 100);
    };
}

// í¬ë¡­í¼ ì´ˆê¸°í™” (Cropper.js ì‚¬ìš©)
function initializeCropper() {
    if (cropper) {
        cropper.destroy();
    }
    
    console.log('ğŸš€ Cropper.js ì´ˆê¸°í™” ì‹œì‘');
    
    // í•œêµ­ í‘œì¤€ ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨ ì ìš© (ê°€ë¡œ3:ì„¸ë¡œ4)
    const aspectRatio = 3 / 4; // 0.75 (ì„¸ë¡œê°€ ë” ê¸´ í˜•íƒœ)
    
    cropper = new Cropper(elements.cropImage, {
        aspectRatio: aspectRatio, // 3:4 ë¹„ìœ¨
        viewMode: 1, // í¬ë¡­ ë°•ìŠ¤ë¥¼ ìº”ë²„ìŠ¤ ë‚´ë¶€ë¡œ ì œí•œ
        dragMode: 'move', // ë“œë˜ê·¸ ëª¨ë“œ
        autoCropArea: 0.8, // ìë™ í¬ë¡­ ì˜ì—­ í¬ê¸°
        restore: false, // í¬ê¸° ì¡°ì • ì‹œ í¬ë¡­ ë°•ìŠ¤ ë³µì› ì•ˆí•¨
        guides: true, // ê°€ì´ë“œ ë¼ì¸ í‘œì‹œ
        center: true, // ì¤‘ì•™ í‘œì‹œì í‘œì‹œ
        highlight: true, // í¬ë¡­ ë°•ìŠ¤ í•˜ì´ë¼ì´íŠ¸
        cropBoxMovable: true, // í¬ë¡­ ë°•ìŠ¤ ì´ë™ ê°€ëŠ¥
        cropBoxResizable: true, // í¬ë¡­ ë°•ìŠ¤ í¬ê¸° ì¡°ì • ê°€ëŠ¥
        toggleDragModeOnDblclick: false, // ë”ë¸”í´ë¦­ìœ¼ë¡œ ë“œë˜ê·¸ ëª¨ë“œ í† ê¸€ ì•ˆí•¨
        
        // ì´ˆê¸°í™” ì™„ë£Œ ì‹œ
        ready: function() {
            console.log('âœ… Cropper.js ì´ˆê¸°í™” ì™„ë£Œ');
            console.log('ğŸ“ ì„¤ì •ëœ aspectRatio:', aspectRatio);
            console.log('ğŸ¯ ëª©í‘œ: ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨ (3:4, ì„¸ë¡œê°€ ë” ê¸´ í˜•íƒœ)');
            
            // ì´ˆê¸° í¬ë¡­ ë°ì´í„° í™•ì¸
            const cropData = cropper.getData();
            const currentRatio = cropData.width / cropData.height;
            console.log('ğŸ“Š ì´ˆê¸° í¬ë¡­ ì˜ì—­:', Math.round(cropData.width), 'x', Math.round(cropData.height));
            console.log('ğŸ“Š ì´ˆê¸° ì‹¤ì œ ë¹„ìœ¨:', currentRatio.toFixed(3), 'ëª©í‘œ:', aspectRatio.toFixed(3));
            
            // ì´ˆê¸° ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
            updatePreview();
        },
        
        // í¬ë¡­ ë³€ê²½ ì‹œ
        crop: function(event) {
            const data = event.detail;
            const currentRatio = data.width / data.height;
            const targetRatio = aspectRatio;
            
            // ë¹„ìœ¨ ì°¨ì´ í—ˆìš© ì˜¤ì°¨ (0.5%) - ë” ì—„ê²©í•˜ê²Œ
            const tolerance = 0.005;
            
            // ë¹„ìœ¨ì´ ëª©í‘œì—ì„œ ë²—ì–´ë‚  ê²½ìš° ê°•ì œ ì¡°ì • (ëŒ€ê°ì„  ë¹„ë¡€ ì¡°ì •)
            if (Math.abs(currentRatio - targetRatio) > tolerance) {
                console.log('ğŸ”§ ë¹„ìœ¨ ìë™ ì¡°ì • (ëŒ€ê°ì„  ë¹„ë¡€):', currentRatio.toFixed(3), 'â†’', targetRatio.toFixed(3));
                
                // ëŒ€ê°ì„  ë¹„ë¡€ ì¡°ì •: ì¤‘ì‹¬ì ì„ ìœ ì§€í•˜ë©´ì„œ ë¹„ìœ¨ ë§ì¶¤
                const centerX = data.x + data.width / 2;
                const centerY = data.y + data.height / 2;
                
                let newWidth, newHeight;
                
                // í˜„ì¬ í¬ê¸°ì—ì„œ ë¹„ìœ¨ì— ë§ê²Œ ì¡°ì • (ëŒ€ê°ì„  í™•ëŒ€/ì¶•ì†Œ)
                if (currentRatio > targetRatio) {
                    // ë„ˆë¬´ ë„“ìŒ - ë†’ì´ ê¸°ì¤€ìœ¼ë¡œ ì¡°ì •
                    newHeight = data.height;
                    newWidth = newHeight * targetRatio;
                } else {
                    // ë„ˆë¬´ ë†’ìŒ - ë„ˆë¹„ ê¸°ì¤€ìœ¼ë¡œ ì¡°ì •
                    newWidth = data.width;
                    newHeight = newWidth / targetRatio;
                }
                
                // ì¤‘ì‹¬ì  ìœ ì§€í•˜ë©´ì„œ ìƒˆ ìœ„ì¹˜ ê³„ì‚°
                const newX = centerX - newWidth / 2;
                const newY = centerY - newHeight / 2;
                
                // ë¹„ìœ¨ ê°•ì œ ì ìš© (ëŒ€ê°ì„  ë¹„ë¡€ ìœ ì§€)
                cropper.setData({
                    x: newX,
                    y: newY,
                    width: newWidth,
                    height: newHeight
                });
                
                console.log('âœ… ëŒ€ê°ì„  ë¹„ìœ¨ ì¡°ì • ì™„ë£Œ:', newWidth.toFixed(1), 'x', newHeight.toFixed(1));
            } else {
                // ì •ìƒ ë²”ìœ„ ë‚´ ë¹„ìœ¨
                if (Math.abs(currentRatio - targetRatio) > 0.002) {
                    console.log('ğŸ“ ë¹„ìœ¨ ì²´í¬ (ì •ìƒ):', currentRatio.toFixed(3), 'ëª©í‘œ:', targetRatio.toFixed(3));
                }
            }
            
            // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
            updatePreview();
        }
    });
    
    // ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ ì¶”ê°€ (ì´ë¯¸ì§€ í™•ëŒ€/ì¶•ì†Œ ìš°ì„ , í•œê³„ì ì—ì„œ í˜ì´ì§€ ìŠ¤í¬ë¡¤)
    setupSmartScroll();
}

// ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥
function setupSmartScroll() {
    if (!cropper || !elements.cropImage) return;
    
    const cropContainer = elements.cropImage.parentElement;
    if (!cropContainer) return;
    
    // ìµœëŒ€/ìµœì†Œ ì¤Œ ë ˆë²¨ ì„¤ì •
    const MIN_ZOOM = 0.1;  // ìµœì†Œ ì¤Œ (10%)
    const MAX_ZOOM = 3.0;  // ìµœëŒ€ ì¤Œ (300%)
    
    console.log('ğŸ–±ï¸ ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ í™œì„±í™”');
    
    cropContainer.addEventListener('wheel', function(event) {
        if (!cropper) return;
        
        // í˜„ì¬ ì¤Œ ë ˆë²¨ í™•ì¸ (ë” ì •í™•í•œ ë°©ì‹)
        const canvasData = cropper.getCanvasData();
        const containerData = cropper.getContainerData();
        const currentZoom = canvasData.naturalWidth > 0 ? canvasData.width / canvasData.naturalWidth : 1;
        
        const isZoomingIn = event.deltaY < 0;  // íœ ì„ ìœ„ë¡œ ì˜¬ë¦¬ë©´ í™•ëŒ€
        const isZoomingOut = event.deltaY > 0; // íœ ì„ ì•„ë˜ë¡œ ë‚´ë¦¬ë©´ ì¶•ì†Œ
        
        console.log('ğŸ” í˜„ì¬ ì¤Œ:', currentZoom.toFixed(2), 'ë°©í–¥:', isZoomingIn ? 'í™•ëŒ€' : 'ì¶•ì†Œ');
        
        // ë” ê´€ëŒ€í•œ ì„ê³„ê°’ ì„¤ì •
        const maxThreshold = 2.8;  // ì¡°ê¸ˆ ë” ë‚®ì€ ìµœëŒ€ê°’
        const minThreshold = 0.2;  // ì¡°ê¸ˆ ë” ë†’ì€ ìµœì†Œê°’
        
        // í™•ëŒ€ ì‹œ: ìµœëŒ€ ì¤Œ ê·¼ì²˜ì—ì„œ í˜ì´ì§€ ìŠ¤í¬ë¡¤ í—ˆìš©
        if (isZoomingIn && currentZoom >= maxThreshold) {
            updateZoomIndicator(currentZoom, 'ìµœëŒ€ í™•ëŒ€');
            console.log('ğŸ“ˆ ìµœëŒ€ í™•ëŒ€ ê·¼ì²˜ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ì‹¤í–‰');
            
            // í˜ì´ì§€ ìŠ¤í¬ë¡¤ì„ ë” ë¶€ë“œëŸ½ê²Œ ì‹¤í–‰
            const scrollAmount = event.deltaY * 0.5; // ìŠ¤í¬ë¡¤ ê°•ë„ ì¡°ì ˆ
            window.scrollBy({
                top: scrollAmount,
                behavior: 'smooth'
            });
            return;
        }
        
        // ì¶•ì†Œ ì‹œ: ìµœì†Œ ì¤Œ ê·¼ì²˜ì—ì„œ í˜ì´ì§€ ìŠ¤í¬ë¡¤ í—ˆìš©  
        if (isZoomingOut && currentZoom <= minThreshold) {
            updateZoomIndicator(currentZoom, 'ìµœì†Œ ì¶•ì†Œ');
            console.log('ğŸ“‰ ìµœì†Œ ì¶•ì†Œ ê·¼ì²˜ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ì‹¤í–‰');
            
            // í˜ì´ì§€ ìŠ¤í¬ë¡¤ì„ ë” ë¶€ë“œëŸ½ê²Œ ì‹¤í–‰
            const scrollAmount = event.deltaY * 0.5; // ìŠ¤í¬ë¡¤ ê°•ë„ ì¡°ì ˆ
            window.scrollBy({
                top: scrollAmount,
                behavior: 'smooth'
            });
            return;
        }
        
        // ì´ë¯¸ì§€ í™•ëŒ€/ì¶•ì†Œ ë²”ìœ„ ë‚´ì—ì„œëŠ” ê¸°ë³¸ ìŠ¤í¬ë¡¤ ì°¨ë‹¨í•˜ê³  ì¤Œ ì ìš©
        event.preventDefault();
        event.stopPropagation();
        
        const zoomDelta = isZoomingIn ? 0.1 : -0.1;
        cropper.zoom(zoomDelta);
        
        // ì¤Œ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
        const newZoom = Math.max(MIN_ZOOM, Math.min(MAX_ZOOM, currentZoom + zoomDelta));
        updateZoomIndicator(newZoom, isZoomingIn ? 'í™•ëŒ€' : 'ì¶•ì†Œ');
        
    }, { passive: false }); // passive: falseë¡œ ì„¤ì •í•´ì•¼ preventDefault ì‘ë™
}

// ì¤Œ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
function updateZoomIndicator(zoomLevel, status) {
    if (!elements.zoomIndicator || !elements.zoomLevel || !elements.zoomStatus) return;
    
    // ì¤Œ ë ˆë²¨ì„ í¼ì„¼íŠ¸ë¡œ í‘œì‹œ
    const zoomPercent = Math.round(zoomLevel * 100);
    elements.zoomLevel.textContent = zoomPercent + '%';
    
    // ìƒíƒœ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
    let statusMessage = '';
    let statusClass = '';
    
    if (status === 'ìµœëŒ€ í™•ëŒ€') {
        statusMessage = '(ìµœëŒ€ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ê°€ëŠ¥)';
        statusClass = 'text-warning';
    } else if (status === 'ìµœì†Œ ì¶•ì†Œ') {
        statusMessage = '(ìµœì†Œ - í˜ì´ì§€ ìŠ¤í¬ë¡¤ ê°€ëŠ¥)';
        statusClass = 'text-info';
    } else {
        statusMessage = `(${status} ì¤‘)`;
        statusClass = 'text-success';
    }
    
    elements.zoomStatus.textContent = statusMessage;
    elements.zoomStatus.className = `ms-2 ${statusClass}`;
    
    // ì¤Œ í‘œì‹œê¸° ë³´ì´ê¸°
    elements.zoomIndicator.style.display = 'block';
    
    // 3ì´ˆ í›„ ìë™ ìˆ¨ê¹€
    clearTimeout(window.zoomIndicatorTimeout);
    window.zoomIndicatorTimeout = setTimeout(() => {
        if (elements.zoomIndicator) {
            elements.zoomIndicator.style.display = 'none';
        }
    }, 3000);
}

// ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
function updatePreview() {
    if (!cropper || !elements.previewCanvas) {
        return;
    }
    
    console.log('ğŸ–¼ï¸ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ ì‹œì‘');
    
    // í¬ë¡­ëœ ì´ë¯¸ì§€ë¥¼ ìº”ë²„ìŠ¤ì— ê·¸ë¦¬ê¸°
    const canvas = cropper.getCroppedCanvas({
        width: 90,  // ë¯¸ë¦¬ë³´ê¸° ìº”ë²„ìŠ¤ í¬ê¸°ì™€ ë™ì¼
        height: 120,
        imageSmoothingEnabled: true,
        imageSmoothingQuality: 'high'
    });
    
    if (canvas) {
        const ctx = elements.previewCanvas.getContext('2d');
        ctx.clearRect(0, 0, elements.previewCanvas.width, elements.previewCanvas.height);
        
        // í¬ë¡­ëœ ì´ë¯¸ì§€ë¥¼ ë¯¸ë¦¬ë³´ê¸° ìº”ë²„ìŠ¤ì— ê·¸ë¦¬ê¸°
        ctx.drawImage(canvas, 0, 0, elements.previewCanvas.width, elements.previewCanvas.height);
        
        console.log('âœ… ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ ì™„ë£Œ');
    }
}

// í¬ë¡­ ì™„ë£Œ í›„ 3ë‹¨ê³„ë¡œ ì´ë™
function cropAndSaveImage() {
    if (!cropper) {
        alert('ì´ë¯¸ì§€ë¥¼ ë¨¼ì € ë¡œë“œí•´ì£¼ì„¸ìš”.');
        return;
    }
    
    setButtonLoading(elements.buttons.cropAndSave, true, 'ì²˜ë¦¬ ì¤‘...');
    
    try {
        // ìµœì¢… í¬ë¡­ëœ ì´ë¯¸ì§€ ìƒì„± (ê³ í’ˆì§ˆ)
        const canvas = cropper.getCroppedCanvas({
            width: 300,   // ìµœì¢… ì´ë¯¸ì§€ ê°€ë¡œ í¬ê¸°
            height: 400,  // ìµœì¢… ì´ë¯¸ì§€ ì„¸ë¡œ í¬ê¸° (3:4 ë¹„ìœ¨)
            imageSmoothingEnabled: true,
            imageSmoothingQuality: 'high'
        });
        
        if (canvas) {
            // í¬ë¡­ëœ ì›ë³¸ ë°ì´í„°ë¥¼ ì „ì—­ ë³€ìˆ˜ì— ì €ì¥
            window.croppedCanvas = canvas;
            window.originalFile = elements.imageInput.files[0];
            
            console.log('âœ… í¬ë¡­ ì™„ë£Œ - 3ë‹¨ê³„ë¡œ ì´ë™');
            
            // 3ë‹¨ê³„ ì••ì¶• ë‹¨ê³„ë¡œ ì´ë™
            goToCompressionStep();
            
        } else {
            throw new Error('ìº”ë²„ìŠ¤ ìƒì„± ì‹¤íŒ¨');
        }
        
    } catch (error) {
        console.error('í¬ë¡­ ì²˜ë¦¬ ì˜¤ë¥˜:', error);
        alert('ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    } finally {
        setButtonLoading(elements.buttons.cropAndSave, false);
    }
}

// 3ë‹¨ê³„: ì••ì¶• ë° SEO ìµœì í™” ë‹¨ê³„ë¡œ ì´ë™
function goToCompressionStep() {
    hideAllSections();
    if (elements.compressionSection) elements.compressionSection.style.display = 'block';
    updateStepIndicator(3);
    
    // ì´ˆê¸° ì••ì¶• ì ìš© ë° ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
    updateCompression();
    generateAltText();
}

// ì´ë¯¸ì§€ ì••ì¶• ì—…ë°ì´íŠ¸ (ë‹¤ì¤‘ í˜•ì‹ ì§€ì›)
function updateCompression() {
    if (!window.croppedCanvas) {
        console.error('âŒ í¬ë¡­ëœ ìº”ë²„ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤');
        return;
    }
    
    const quality = parseFloat(elements.qualitySlider.value || 0.8);
    const selectedFormat = getSelectedImageFormat();
    
    console.log('ğŸ”„ ì´ë¯¸ì§€ ì••ì¶• ì—…ë°ì´íŠ¸ - í˜•ì‹:', selectedFormat.toUpperCase(), 'í’ˆì§ˆ:', Math.round(quality * 100) + '%');
    
    try {
        let compressedImageData;
        let actualFormat = selectedFormat;
        let formatSupported = false;
        
        // ë‹¨ê³„ë³„ í˜•ì‹ ì§€ì› í™•ì¸ ë° ì••ì¶•
        if (selectedFormat === 'avif') {
            console.log('ğŸ” AVIF ì§€ì› í™•ì¸ ì¤‘...');
            formatSupported = isFormatSupported('image/avif');
            if (formatSupported) {
                compressedImageData = window.croppedCanvas.toDataURL('image/avif', quality);
                console.log('âœ… AVIF í˜•ì‹ìœ¼ë¡œ ì••ì¶• ì„±ê³µ');
            } else {
                console.log('âš ï¸ AVIF ë¯¸ì§€ì› - WebP ì‹œë„');
                formatSupported = isFormatSupported('image/webp');
                if (formatSupported) {
                    compressedImageData = window.croppedCanvas.toDataURL('image/webp', quality);
                    actualFormat = 'webp';
                    console.log('âœ… WebP í˜•ì‹ìœ¼ë¡œ ì••ì¶• ì„±ê³µ (AVIF ëŒ€ì²´)');
                    showFormatFallbackMessage('AVIF', 'WebP');
                } else {
                    console.log('âš ï¸ WebPë„ ë¯¸ì§€ì› - JPEG ì‚¬ìš©');
                    compressedImageData = window.croppedCanvas.toDataURL('image/jpeg', quality);
                    actualFormat = 'jpeg';
                    console.log('âœ… JPEG í˜•ì‹ìœ¼ë¡œ ì••ì¶• ì„±ê³µ (AVIF ëŒ€ì²´)');
                    showFormatFallbackMessage('AVIF', 'JPEG');
                }
            }
        } else if (selectedFormat === 'webp') {
            console.log('ğŸ” WebP ì§€ì› í™•ì¸ ì¤‘...');
            formatSupported = isFormatSupported('image/webp');
            if (formatSupported) {
                compressedImageData = window.croppedCanvas.toDataURL('image/webp', quality);
                console.log('âœ… WebP í˜•ì‹ìœ¼ë¡œ ì••ì¶• ì„±ê³µ');
            } else {
                console.log('âš ï¸ WebP ë¯¸ì§€ì› - JPEG ì‚¬ìš©');
                compressedImageData = window.croppedCanvas.toDataURL('image/jpeg', quality);
                actualFormat = 'jpeg';
                console.log('âœ… JPEG í˜•ì‹ìœ¼ë¡œ ì••ì¶• ì„±ê³µ (WebP ëŒ€ì²´)');
                showFormatFallbackMessage('WebP', 'JPEG');
            }
        } else {
            // JPEGëŠ” ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì›
            compressedImageData = window.croppedCanvas.toDataURL('image/jpeg', quality);
            console.log('âœ… JPEG í˜•ì‹ìœ¼ë¡œ ì••ì¶• ì„±ê³µ');
        }
        
        // ë°ì´í„° ìœ íš¨ì„± ê²€ì¦
        if (!compressedImageData || !compressedImageData.startsWith('data:image/')) {
            throw new Error('ì••ì¶•ëœ ì´ë¯¸ì§€ ë°ì´í„°ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤');
        }
        
        // í˜„ì¬ í˜•ì‹ í‘œì‹œ ì—…ë°ì´íŠ¸
        if (elements.currentFormat) {
            elements.currentFormat.textContent = actualFormat.toUpperCase();
        }
        
        // ìµœì¢… ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
        if (elements.finalPreviewImage) {
            elements.finalPreviewImage.src = compressedImageData;
            elements.finalPreviewImage.onload = function() {
                console.log('âœ… ìµœì¢… ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ');
            };
            elements.finalPreviewImage.onerror = function() {
                console.error('âŒ ìµœì¢… ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨');
            };
        }
        
        // ì••ì¶• ì •ë³´ ì—…ë°ì´íŠ¸
        updateCompressionInfo(compressedImageData, actualFormat);
        
        // ì••ì¶•ëœ ë°ì´í„° ë° í˜•ì‹ ì €ì¥
        window.compressedImageData = compressedImageData;
        window.selectedImageFormat = actualFormat;
        
        console.log('âœ… ì••ì¶• ì²˜ë¦¬ ì™„ë£Œ - í˜•ì‹:', actualFormat.toUpperCase(), 'ë°ì´í„° í¬ê¸°:', Math.round(compressedImageData.length / 1024) + 'KB');
        
    } catch (error) {
        console.error('âŒ ì••ì¶• ì²˜ë¦¬ ì˜¤ë¥˜:', error);
        
        // ì˜¤ë¥˜ ì‹œ ì•ˆì „í•œ JPEG í´ë°±
        try {
            const fallbackData = window.croppedCanvas.toDataURL('image/jpeg', 0.8);
            if (elements.finalPreviewImage) {
                elements.finalPreviewImage.src = fallbackData;
            }
            updateCompressionInfo(fallbackData, 'jpeg');
            window.compressedImageData = fallbackData;
            window.selectedImageFormat = 'jpeg';
            
            console.log('ğŸ”„ JPEG í´ë°± ì²˜ë¦¬ ì™„ë£Œ');
            showFormatFallbackMessage(selectedFormat.toUpperCase(), 'JPEG');
        } catch (fallbackError) {
            console.error('âŒ í´ë°± ì²˜ë¦¬ë„ ì‹¤íŒ¨:', fallbackError);
            alert('ì´ë¯¸ì§€ ì••ì¶• ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
        }
    }
}

// ì„ íƒëœ ì´ë¯¸ì§€ í˜•ì‹ ê°€ì ¸ì˜¤ê¸°
function getSelectedImageFormat() {
    if (elements.formatAVIF && elements.formatAVIF.checked) return 'avif';
    if (elements.formatWEBP && elements.formatWEBP.checked) return 'webp';
    if (elements.formatJPEG && elements.formatJPEG.checked) return 'jpeg';
    return 'avif'; // ê¸°ë³¸ê°’
}

// ë¸Œë¼ìš°ì € í˜•ì‹ ì§€ì› ì—¬ë¶€ í™•ì¸ (ê°œì„ ëœ ë²„ì „)
function isFormatSupported(mimeType) {
    // 1. ê¸°ë³¸ ë¸Œë¼ìš°ì € ì§€ì› í™•ì¸
    const canvas = document.createElement('canvas');
    canvas.width = 2;
    canvas.height = 2;
    const ctx = canvas.getContext('2d');
    
    // ì‘ì€ ì´ë¯¸ì§€ ë°ì´í„° ìƒì„±
    ctx.fillStyle = 'rgb(255, 0, 0)';
    ctx.fillRect(0, 0, 1, 1);
    ctx.fillStyle = 'rgb(0, 255, 0)';
    ctx.fillRect(1, 0, 1, 1);
    ctx.fillStyle = 'rgb(0, 0, 255)';
    ctx.fillRect(0, 1, 1, 1);
    ctx.fillStyle = 'rgb(255, 255, 255)';
    ctx.fillRect(1, 1, 1, 1);
    
    try {
        const dataURL = canvas.toDataURL(mimeType, 0.9);
        const isSupported = dataURL.startsWith(`data:${mimeType}`);
        
        console.log(`ğŸ” í˜•ì‹ ì§€ì› í™•ì¸: ${mimeType} - ${isSupported ? 'ì§€ì›ë¨' : 'ë¯¸ì§€ì›'}`);
        console.log(`ğŸ“„ DataURL ì‹œì‘: ${dataURL.substring(0, 50)}...`);
        
        return isSupported;
    } catch (e) {
        console.warn(`âš ï¸ í˜•ì‹ ì§€ì› í™•ì¸ ì˜¤ë¥˜: ${mimeType}`, e);
        return false;
    }
}

// í˜•ì‹ í´ë°± ë©”ì‹œì§€ í‘œì‹œ
function showFormatFallbackMessage(original, fallback) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-warning alert-dismissible fade show position-fixed top-0 start-50 translate-middle-x mt-3';
    alertDiv.style.cssText = 'z-index: 10000; min-width: 300px;';
    alertDiv.innerHTML = `
        <i class="fas fa-exclamation-triangle me-2"></i>
        ${original} í˜•ì‹ì´ ì§€ì›ë˜ì§€ ì•Šì•„ ${fallback}ë¡œ ë³€í™˜ë©ë‹ˆë‹¤.
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    document.body.appendChild(alertDiv);
    
    // 5ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 5000);
}

// ìë™ ìµœì í™” ê¸°ëŠ¥
function autoOptimizeImage() {
    console.log('ğŸš€ ìë™ ìµœì í™” ì‹œì‘');
    
    // AVIFê°€ ì§€ì›ë˜ë©´ AVIF + 70% í’ˆì§ˆ ì‚¬ìš©
    if (isFormatSupported('image/avif')) {
        elements.formatAVIF.checked = true;
        elements.qualitySlider.value = 0.7;
        elements.qualityLabel.textContent = '70';
        console.log('âœ… AVIF 70% í’ˆì§ˆë¡œ ìë™ ìµœì í™”');
    } 
    // WebPê°€ ì§€ì›ë˜ë©´ WebP + 75% í’ˆì§ˆ ì‚¬ìš©
    else if (isFormatSupported('image/webp')) {
        elements.formatWEBP.checked = true;
        elements.qualitySlider.value = 0.75;
        elements.qualityLabel.textContent = '75';
        console.log('âœ… WebP 75% í’ˆì§ˆë¡œ ìë™ ìµœì í™”');
    } 
    // ë‘˜ ë‹¤ ì•ˆë˜ë©´ JPEG + 80% í’ˆì§ˆ
    else {
        elements.formatJPEG.checked = true;
        elements.qualitySlider.value = 0.8;
        elements.qualityLabel.textContent = '80';
        console.log('âœ… JPEG 80% í’ˆì§ˆë¡œ ìë™ ìµœì í™”');
    }
    
    // ì••ì¶• ì—…ë°ì´íŠ¸
    updateCompression();
    
    // ì„±ê³µ ë©”ì‹œì§€
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-success alert-dismissible fade show position-fixed top-0 start-50 translate-middle-x mt-3';
    alertDiv.style.cssText = 'z-index: 10000; min-width: 300px;';
    alertDiv.innerHTML = `
        <i class="fas fa-magic me-2"></i>ìë™ ìµœì í™”ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    document.body.appendChild(alertDiv);
    setTimeout(() => alertDiv.remove(), 3000);
}

// ì••ì¶• ì •ë³´ ì—…ë°ì´íŠ¸ (í˜•ì‹ ì •ë³´ í¬í•¨)
function updateCompressionInfo(compressedImageData, format) {
    if (!window.originalFile || !elements.compressionSavings) return;
    
    // ì›ë³¸ íŒŒì¼ í¬ê¸°
    const originalSize = window.originalFile.size;
    
    // ì••ì¶•ëœ íŒŒì¼ í¬ê¸° (Base64ë¥¼ Blobìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ê³„ì‚°)
    const compressedSize = dataURLtoBlob(compressedImageData).size;
    
    // ì ˆì•½ë¥  ê³„ì‚°
    const savings = ((originalSize - compressedSize) / originalSize * 100).toFixed(1);
    
    // í˜•ì‹ë³„ ì˜ˆìƒ ì¶”ê°€ ì ˆì•½ë¥  í‘œì‹œ
    let formatBenefit = '';
    if (format === 'avif') {
        formatBenefit = ' (AVIFë¡œ ìµœëŒ€ ì ˆì•½)';
    } else if (format === 'webp') {
        formatBenefit = ' (WebPë¡œ íš¨ìœ¨ì  ì••ì¶•)';
    } else if (format === 'jpeg') {
        formatBenefit = ' (JPEG í˜¸í™˜ì„± ìš°ì„ )';
    }
    
    console.log('ğŸ“Š ì••ì¶• ì •ë³´:', {
        format: format.toUpperCase(),
        originalSize: formatFileSize(originalSize),
        compressedSize: formatFileSize(compressedSize),
        savings: savings + '%'
    });
    
    elements.compressionSavings.innerHTML = 
        `<div>${savings}% ì ˆì•½ (${formatFileSize(originalSize)} â†’ ${formatFileSize(compressedSize)})</div>
         <small class="text-muted">${format.toUpperCase()} í˜•ì‹${formatBenefit}</small>`;
}

// Alt í…ìŠ¤íŠ¸ ìë™ ìƒì„±
function generateAltText() {
    if (!elements.altTextInput) return;
    
    // ê¸°ë³¸ Alt í…ìŠ¤íŠ¸ ìƒì„±
    let altText = 'ì‚¬ìš©ì í”„ë¡œí•„ ì‚¬ì§„';
    
    // íŒŒì¼ëª…ì—ì„œ ì¶”ê°€ ì •ë³´ ì¶”ì¶œ
    if (window.originalFile && window.originalFile.name) {
        const fileName = window.originalFile.name.replace(/\.[^/.]+$/, ''); // í™•ì¥ì ì œê±°
        if (fileName.length > 0 && fileName !== 'image') {
            altText += ` - ${fileName}`;
        }
    }
    
    elements.altTextInput.value = altText;
    console.log('ğŸ·ï¸ Alt í…ìŠ¤íŠ¸ ìë™ ìƒì„±:', altText);
}

// ì••ì¶•ëœ ì´ë¯¸ì§€ë¥¼ ì„œë²„ì— ì €ì¥
function saveCompressedImageToServer() {
    console.log('ğŸ“¤ ìµœì¢… ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œì‘');
    
    if (!window.compressedImageData) {
        console.error('âŒ ì••ì¶•ëœ ì´ë¯¸ì§€ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤');
        alert('ì••ì¶•ëœ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
        return;
    }
    
    const altText = elements.altTextInput?.value?.trim() || 'ì‚¬ìš©ì í”„ë¡œí•„ ì‚¬ì§„';
    const selectedFormat = window.selectedImageFormat || 'jpeg';
    const quality = Math.round((elements.qualitySlider?.value || 0.8) * 100);
    
    console.log('ğŸ“‹ ì—…ë¡œë“œ ì •ë³´:');
    console.log('  - Alt í…ìŠ¤íŠ¸:', altText);
    console.log('  - í˜•ì‹:', selectedFormat.toUpperCase());
    console.log('  - í’ˆì§ˆ:', quality + '%');
    console.log('  - ë°ì´í„° í¬ê¸°:', Math.round(window.compressedImageData.length / 1024) + 'KB');
    
    if (elements.buttons.saveImage) {
        setButtonLoading(elements.buttons.saveImage, true, 'ì €ì¥ ì¤‘...');
    }
    
    // Base64 ë°ì´í„°ë¥¼ Blobìœ¼ë¡œ ë³€í™˜
    const blob = dataURLtoBlob(window.compressedImageData);
    console.log('ğŸ“¦ Blob ìƒì„± ì™„ë£Œ - í¬ê¸°:', formatFileSize(blob.size), 'íƒ€ì…:', blob.type);
    
    const formData = new FormData();
    formData.append('croppedImage', blob, `profile.${selectedFormat}`);
    formData.append('altText', altText);
    formData.append('format', selectedFormat);
    formData.append('quality', quality.toString());
    
    console.log('ğŸ“¤ FormData ì „ì†¡ ì‹œì‘...');
    
    fetch('/member/myinfo/crop-image/save', {
        method: 'POST',
        body: formData
    })
    .then(response => {
        console.log('ğŸ“¨ ì„œë²„ ì‘ë‹µ ìˆ˜ì‹ :', response.status, response.statusText);
        if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }
        return response.json();
    })
    .then(data => {
        if (elements.buttons.saveImage) {
            setButtonLoading(elements.buttons.saveImage, false);
        }
        
        console.log('ğŸ“„ ì„œë²„ ì‘ë‹µ ë°ì´í„°:', data);
        
        if (data.success) {
            // ìµœì¢… ì™„ë£Œ ë¯¸ë¦¬ë³´ê¸° ì„¤ì •
            if (elements.finalPreview) {
                elements.finalPreview.src = window.compressedImageData;
            }
            
            // ì„±ê³µ ì‹œ ì™„ë£Œ ë‹¨ê³„ í‘œì‹œ
            goToCompleteStep();
            console.log('âœ… í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì„±ê³µ');
            
            // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
            showSuccessMessage('í”„ë¡œí•„ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
            
        } else {
            console.error('âŒ ì„œë²„ì—ì„œ ì‹¤íŒ¨ ì‘ë‹µ:', data.message);
            alert(data.message || 'ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    })
    .catch(error => {
        if (elements.buttons.saveImage) {
            setButtonLoading(elements.buttons.saveImage, false);
        }
        console.error('âŒ ì—…ë¡œë“œ ì˜¤ë¥˜:', error);
        alert('ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
    });
}

// ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
function showSuccessMessage(message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-success alert-dismissible fade show position-fixed top-0 start-50 translate-middle-x mt-3';
    alertDiv.style.cssText = 'z-index: 10000; min-width: 350px;';
    alertDiv.innerHTML = `
        <i class="fas fa-check-circle me-2"></i>
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    document.body.appendChild(alertDiv);
    
    // 5ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 5000);
}

// Base64ë¥¼ Blobìœ¼ë¡œ ë³€í™˜
function dataURLtoBlob(dataurl) {
    const arr = dataurl.split(',');
    const mime = arr[0].match(/:(.*?);/)[1];
    const bstr = atob(arr[1]);
    let n = bstr.length;
    const u8arr = new Uint8Array(n);
    while (n--) {
        u8arr[n] = bstr.charCodeAt(n);
    }
    return new Blob([u8arr], { type: mime });
}

// íŒŒì¼ í¬ê¸° í¬ë§·íŒ…
function formatFileSize(bytes) {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
}

// ì„œë²„ì— í¬ë¡­ëœ ì´ë¯¸ì§€ ì €ì¥
function saveImageToServer(compressedImageData, altText) {
    const formData = new FormData();
    formData.append('croppedImage', compressedImageData);
    formData.append('altText', altText);
    
    console.log('ğŸ“¤ ì„œë²„ ì—…ë¡œë“œ ì‹œì‘ - Alt í…ìŠ¤íŠ¸:', altText);
    
    fetch('/member/myinfo/crop-image/save', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        setButtonLoading(elements.buttons.cropAndSave, false);
        
        if (data.success) {
            // ìµœì¢… ë¯¸ë¦¬ë³´ê¸° ì„¤ì •
            if (elements.finalPreview) {
                elements.finalPreview.src = compressedImageData;
            }
            
            // ì„±ê³µ ì‹œ ì™„ë£Œ ë‹¨ê³„ í‘œì‹œ
            goToCompleteStep();
            console.log('âœ… í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì„±ê³µ');
            
        } else {
            alert(data.message || 'ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    })
    .catch(error => {
        setButtonLoading(elements.buttons.cropAndSave, false);
        console.error('ì €ì¥ ì˜¤ë¥˜:', error);
        alert('ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    });
}

// ë‹¨ê³„ ì´ë™ í•¨ìˆ˜ë“¤
function goToUploadStep() {
    hideAllSections();
    if (elements.uploadSection) elements.uploadSection.style.display = 'block';
    updateStepIndicator(1);
    
    // ì „ì²´ ì´ˆê¸°í™”
    if (elements.imageInput) elements.imageInput.value = '';
    if (cropper) {
        cropper.destroy();
        cropper = null;
    }
    originalImageData = null;
    originalImage = null;
    window.croppedCanvas = null;
    window.originalFile = null;
    window.compressedImageData = null;
}

function goToCropStep() {
    hideAllSections();
    if (elements.cropSection) elements.cropSection.style.display = 'block';
    updateStepIndicator(2);
}

function goToCompleteStep() {
    hideAllSections();
    if (elements.completeSection) elements.completeSection.style.display = 'block';
    updateStepIndicator(4);
}

// ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
function hideAllSections() {
    if (elements.uploadSection) elements.uploadSection.style.display = 'none';
    if (elements.cropSection) elements.cropSection.style.display = 'none';
    if (elements.compressionSection) elements.compressionSection.style.display = 'none';
    if (elements.completeSection) elements.completeSection.style.display = 'none';
}

// ë‹¨ê³„ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
function updateStepIndicator(currentStep) {
    // ëª¨ë“  ë‹¨ê³„ ì´ˆê¸°í™”
    Object.values(elements.steps).forEach(step => {
        if (step) {
            step.classList.remove('active', 'completed');
        }
    });
    
    // í˜„ì¬ ë‹¨ê³„ê¹Œì§€ í™œì„±í™”
    for (let i = 1; i <= currentStep; i++) {
        const step = elements.steps[`step${i}`];
        if (step) {
            if (i === currentStep) {
                step.classList.add('active');
            } else {
                step.classList.add('completed');
            }
        }
    }
}

// ë²„íŠ¼ ë¡œë”© ìƒíƒœ ì„¤ì •
function setButtonLoading(button, isLoading, loadingText = 'ì²˜ë¦¬ ì¤‘...') {
    if (!button) return;
    
    if (isLoading) {
        button.disabled = true;
        button.classList.add('loading');
        button.setAttribute('data-original-text', button.innerHTML);
        button.innerHTML = `<i class="fas fa-spinner fa-spin me-1"></i>${loadingText}`;
    } else {
        button.disabled = false;
        button.classList.remove('loading');
        const originalText = button.getAttribute('data-original-text');
        if (originalText) {
            button.innerHTML = originalText;
        }
    }
}
</script>

<!-- ìŠ¤íƒ€ì¼ ì¶”ê°€ -->
<style>
/* ë‹¨ê³„ í‘œì‹œê¸° ìŠ¤íƒ€ì¼ */
.steps-indicator {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 30px;
}

.step-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    z-index: 2;
}

.step-circle {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: #e9ecef;
    border: 3px solid #dee2e6;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #6c757d;
    font-size: 18px;
    transition: all 0.3s ease;
    margin-bottom: 8px;
}

.step-item.active .step-circle {
    background: #007bff;
    border-color: #007bff;
    color: white;
    transform: scale(1.1);
    box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
}

.step-item.completed .step-circle {
    background: #28a745;
    border-color: #28a745;
    color: white;
}

.step-label {
    font-size: 12px;
    color: #6c757d;
    font-weight: 500;
    text-align: center;
    margin-top: 5px;
}

.step-item.active .step-label {
    color: #007bff;
    font-weight: 600;
}

/* SEO ìµœì í™” ê¸°ëŠ¥ ìŠ¤íƒ€ì¼ */
.keyword-suggestions {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
}

.keyword-group {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 5px;
}

.keyword-btn {
    font-size: 0.875rem;
    padding: 5px 10px;
    border-radius: 15px;
    transition: all 0.2s ease;
    cursor: pointer;
}

.keyword-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

.keyword-btn.btn-success {
    animation: keywordClick 0.5s ease;
}

@keyframes keywordClick {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.seo-optimization-section {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 10px;
    padding: 20px;
    border: 1px solid #dee2e6;
}

.seo-tips {
    border-left: 4px solid #17a2b8;
    background: rgba(23, 162, 184, 0.1);
}

#profileNameInput {
    border-radius: 8px;
}

#previewProfileName {
    color: #17a2b8;
    background: rgba(23, 162, 184, 0.1);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
}

.input-group .btn {
    border-radius: 0 8px 8px 0;
}

.form-label {
    font-weight: 600;
    color: #495057;
}

/* Cropper.js ê°€ì‹œì„± ê°œì„  */
.cropper-center::before,
.cropper-center::after {
    background-color: #007bff !important;
    opacity: 0.8 !important;
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.8) !important;
}

.cropper-line {
    background-color: #007bff !important;
    opacity: 0.6 !important;
}

.cropper-point {
    background-color: #007bff !important;
    opacity: 0.8 !important;
    width: 8px !important;
    height: 8px !important;
    border-radius: 50% !important;
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.8) !important;
}

.step-item.completed .step-label {
    color: #28a745;
    font-weight: 600;
}

.step-connector {
    width: 80px;
    height: 3px;
    background: #dee2e6;
    margin: 0 10px;
    margin-top: -25px;
    z-index: 1;
    transition: background 0.3s ease;
}

.step-item.completed + .step-connector {
    background: #28a745;
}

/* ì—…ë¡œë“œ ì˜ì—­ ìŠ¤íƒ€ì¼ */
.upload-area {
    border: 2px dashed #dee2e6;
    border-radius: 12px;
    padding: 40px 20px;
    text-align: center;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    transition: all 0.3s ease;
    cursor: pointer;
}

.upload-area:hover {
    border-color: #007bff;
    background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,123,255,0.15);
}

.upload-icon i {
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

.crop-container, .crop-preview-panel {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.crop-image-container {
    border-radius: 8px;
    overflow: hidden;
    background: #f8f9fa;
    min-height: 300px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.image-info-panel {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    border: 1px solid #e9ecef;
}

.zoom-indicator {
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 8px 12px;
    border-radius: 20px;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 9999;
    animation: fadeInOut 0.3s ease;
}

@keyframes fadeInOut {
    from { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
    to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

.crop-actions {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 20px;
    border: 1px solid #e9ecef;
}

/* 3ë‹¨ê³„ ì••ì¶• ì„¹ì…˜ */
.compression-section {
    padding: 20px 0;
}

.final-preview-panel, .compression-settings {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.final-image-container {
    text-align: center;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    display: inline-block;
}

.compression-info {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    border: 1px solid #e9ecef;
    text-align: center;
}

.compression-savings {
    font-size: 18px;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}

/* Alt í…ìŠ¤íŠ¸ ì„¹ì…˜ */
.alt-text-section {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 8px;
    padding: 15px;
}

.alt-text-section .form-label {
    color: #856404;
    font-weight: 600;
}

/* ìŠ¬ë¼ì´ë” ìŠ¤íƒ€ì¼ */
.form-range {
    appearance: none;
    background: transparent;
    cursor: pointer;
    height: 6px;
}

.form-range::-webkit-slider-track {
    background: #dee2e6;
    height: 6px;
    border-radius: 3px;
}

.form-range::-webkit-slider-thumb {
    appearance: none;
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #007bff;
    cursor: pointer;
    border: 2px solid #fff;
    box-shadow: 0 2px 6px rgba(0,123,255,0.3);
    transition: all 0.2s ease;
}

.form-range::-webkit-slider-thumb:hover {
    background: #0056b3;
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0,123,255,0.5);
}

.final-actions {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 20px;
    border: 1px solid #e9ecef;
}

.complete-section {
    text-align: center;
    padding: 40px 20px;
}

.success-icon {
    animation: bounceIn 0.6s ease;
}

@keyframes bounceIn {
    0% { transform: scale(0.3); opacity: 0; }
    50% { transform: scale(1.05); }
    70% { transform: scale(0.9); }
    100% { transform: scale(1); opacity: 1; }
}

/* Cropper.js ê°€ì‹œì„± ê°œì„  (ì¤‘ì•™ ì‹­ìê°€ë¥¼ íŒŒë€ìƒ‰ìœ¼ë¡œ) */
.cropper-center::before,
.cropper-center::after {
    background-color: #007bff !important;
    opacity: 0.8 !important;
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.8) !important;
}

.cropper-line {
    background-color: #007bff !important;
    opacity: 0.6 !important;
}

.cropper-point {
    background-color: #007bff !important;
    opacity: 0.8 !important;
    width: 8px !important;
    height: 8px !important;
    border: 2px solid #ffffff !important;
    border-radius: 50% !important;
    box-shadow: 0 2px 8px rgba(0, 123, 255, 0.3) !important;
}

.cropper-point:hover {
    background-color: #0056b3 !important;
    opacity: 1 !important;
    transform: scale(1.2) !important;
}

.cropper-face {
    background-color: rgba(0, 123, 255, 0.1) !important;
}

.cropper-crop-box {
    border: 2px solid #007bff !important;
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.5) !important;
}

/* íŒŒì¼ëª… ë³€í™˜ UI ìŠ¤íƒ€ì¼ */
.filename-section {
    background: linear-gradient(135deg, #e3f2fd 0%, #f8f9fa 100%);
    border: 1px solid #bbdefb;
    border-radius: 10px;
    padding: 20px;
}

.filename-section h6 {
    color: #1976d2;
    font-weight: 600;
}

.keyword-suggestions {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    border: 1px solid #e9ecef;
}

.keyword-group {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 5px;
}

.keyword-btn {
    font-size: 0.875rem;
    padding: 5px 10px;
    border-radius: 15px;
    transition: all 0.2s ease;
    cursor: pointer;
}

.keyword-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

.keyword-btn.btn-success {
    animation: keywordClick 0.5s ease;
}

@keyframes keywordClick {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

#previewProfileName {
    color: #1976d2;
    background: rgba(25, 118, 210, 0.1);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
}

.filename-section .input-group .btn {
    border-radius: 0 8px 8px 0;
}

.filename-section .form-label {
    font-weight: 600;
    color: #495057;
}
</style>

</body>
</html>
````

## File: src/main/resources/templates/member/login.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ë¡œê·¸ì¸ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>
    
    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container mt-4">
            <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                    <li class="breadcrumb-item active" aria-current="page">ë¡œê·¸ì¸</li>
                </ol>
            </nav>
            
            <div class="row justify-content-center">
                <div class="col-md-6 col-lg-4">
                    <!-- ë¡œê·¸ì¸ ì¹´ë“œ -->
                    <div class="card shadow">
                        <div class="card-body p-4">
                            <!-- ì œëª© -->
                            <div class="text-center mb-4">
                                <h3 class="card-title fw-bold text-primary">
                                    <i class="fas fa-sign-in-alt me-2"></i>
                                    ë¡œê·¸ì¸
                                </h3>
                                <p class="text-muted">CareLinkì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤</p>
                            </div>
                            
                            <!-- ë¡œê·¸ì¸ í¼ -->
                            <form th:action="@{/member/login}" th:object="${loginDTO}" method="post" novalidate>
                                <!-- ì‚¬ìš©ì ID -->
                                <div class="mb-3">
                                    <label for="userId" class="form-label">
                                        <i class="fas fa-user me-1"></i>ì•„ì´ë””
                                    </label>
                                    <input type="text" 
                                           class="form-control" 
                                           id="userId" 
                                           th:field="*{userId}"
                                           placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                                           required>
                                    <div class="invalid-feedback" th:if="${#fields.hasErrors('userId')}" th:errors="*{userId}"></div>
                                </div>
                                
                                <!-- ë¹„ë°€ë²ˆí˜¸ -->
                                <div class="mb-3">
                                    <label for="password" class="form-label">
                                        <i class="fas fa-lock me-1"></i>ë¹„ë°€ë²ˆí˜¸
                                    </label>
                                    <div class="input-group">
                                        <input type="password" 
                                               class="form-control" 
                                               id="password" 
                                               th:field="*{password}"
                                               placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                                               required>
                                        <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div class="invalid-feedback" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
                                </div>
                                
                                <!-- ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€ -->
                                <div class="mb-3 form-check">
                                    <input type="checkbox" 
                                           class="form-check-input" 
                                           id="rememberMe" 
                                           th:field="*{rememberMe}">
                                    <label class="form-check-label" for="rememberMe">
                                        ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€
                                    </label>
                                </div>
                                
                                <!-- ë¡œê·¸ì¸ ë²„íŠ¼ -->
                                <div class="d-grid mb-3">
                                    <button type="submit" class="btn btn-primary btn-lg">
                                        <i class="fas fa-sign-in-alt me-2"></i>
                                        ë¡œê·¸ì¸
                                    </button>
                                </div>
                            </form>
                            
                            <!-- ë§í¬ë“¤ -->
                            <div class="row text-center">
                                <div class="col">
                                    <a href="/member/join" class="btn btn-outline-primary">
                                        <i class="fas fa-user-plus me-1"></i>
                                        íšŒì›ê°€ì…
                                    </a>
                                </div>
                            </div>
                            
                            <hr class="my-4">
                            
                            <!-- í…ŒìŠ¤íŠ¸ ê³„ì • ì•ˆë‚´ -->
                            <div class="alert alert-info" role="alert">
                                <h6 class="alert-heading">
                                    <i class="fas fa-info-circle me-2"></i>
                                    í…ŒìŠ¤íŠ¸ ê³„ì • ì•ˆë‚´
                                </h6>
                                <div class="row text-center">
                                    <div class="col-6">
                                        <small>
                                            <strong>ê´€ë¦¬ì</strong><br>
                                            ID: admin<br>
                                            PW: admin123
                                        </small>
                                    </div>
                                    <div class="col-6">
                                        <small>
                                            <strong>ì¼ë°˜ ì‚¬ìš©ì</strong><br>
                                            ID: user01<br>
                                            PW: user123
                                        </small>
                                    </div>
                                </div>
                                <div class="row text-center mt-2">
                                    <div class="col-6">
                                        <small>
                                            <strong>ì‚¬ìš©ì2</strong><br>
                                            ID: user02<br>
                                            PW: user123
                                        </small>
                                    </div>
                                    <div class="col-6">
                                        <small>
                                            <strong>ì‹œì„¤ê´€ë¦¬ì</strong><br>
                                            ID: facility01<br>
                                            PW: facility123
                                        </small>
                                    </div>
                                </div>
                                <hr class="my-2">
                                <div class="text-center">
                                    <small class="text-muted">
                                        <i class="fas fa-info-circle me-1"></i>
                                        í…ŒìŠ¤íŠ¸ ê³„ì •ì„ í´ë¦­í•˜ë©´ ìë™ìœ¼ë¡œ ì…ë ¥ë©ë‹ˆë‹¤
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </main>
    
    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>
    
    <script>
        $(document).ready(function() {
            // ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ/ìˆ¨ê¹€ í† ê¸€
            $('#togglePassword').click(function() {
                const passwordField = $('#password');
                const icon = $(this).find('i');
                
                if (passwordField.attr('type') === 'password') {
                    passwordField.attr('type', 'text');
                    icon.removeClass('fa-eye').addClass('fa-eye-slash');
                } else {
                    passwordField.attr('type', 'password');
                    icon.removeClass('fa-eye-slash').addClass('fa-eye');
                }
            });
            
            // í…ŒìŠ¤íŠ¸ ê³„ì • í´ë¦­ ì‹œ ìë™ ì…ë ¥
            $('.alert').on('click', 'small', function() {
                const text = $(this).text();
                if (text.includes('admin')) {
                    $('#userId').val('admin');
                    $('#password').val('admin123');
                } else if (text.includes('user01')) {
                    $('#userId').val('user01');
                    $('#password').val('user123');
                } else if (text.includes('user02')) {
                    $('#userId').val('user02');
                    $('#password').val('user123');
                } else if (text.includes('facility01')) {
                    $('#userId').val('facility01');
                    $('#password').val('facility123');
                }
            });
            
            // ë¡œê·¸ì¸ í¼ì—ì„œëŠ” ìœ íš¨ì„± ê²€ì‚¬ ìŠ¤íƒ€ì¼ ì œê±°
            $('#userId, #password').on('input blur', function() {
                $(this).removeClass('is-valid is-invalid');
            });
        });
    </script>
</body>
</html>
````

## File: src/main/resources/templates/member/myinfo.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ë§ˆì´í˜ì´ì§€ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item active" aria-current="page">ë§ˆì´í˜ì´ì§€</li>
            </ol>
        </nav>
        
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
                <div class="card shadow">
                    <div class="card-body p-4">
                        <div class="text-center mb-4">
                            <h3 class="card-title fw-bold text-primary">
                                <i class="fas fa-user-circle me-2"></i>
                                ë§ˆì´í˜ì´ì§€
                            </h3>
                            <p class="text-muted">ë‚´ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ì„¸ìš”</p>
                        </div>

                        <form th:action="@{/member/myinfo/update}" th:object="${memberDTO}" method="post" id="mypageForm" enctype="multipart/form-data">
                            <input type="hidden" th:field="*{memberId}">
                            <input type="hidden" th:field="*{userId}">
                            <input type="hidden" th:field="*{password}">

                            <div class="mb-3">
                                <label for="userId" class="form-label">
                                    <i class="fas fa-user me-1"></i>ì•„ì´ë””
                                </label>
                                <input type="text"
                                       class="form-control"
                                       id="userIdDisplay"
                                       th:value="*{userId}"
                                       readonly disabled >
                            </div>

                            <div class="mb-3">
                                <label for="name" class="form-label">
                                    <i class="fas fa-user-tag me-1"></i>ì´ë¦„
                                </label>
                                <input type="text"
                                       class="form-control"
                                       th:classappend="${#fields.hasErrors('name')} ? 'is-invalid'"
                                       id="name"
                                       th:field="*{name}"
                                       placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
                                       required>
                                <div class="invalid-feedback" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
                            </div>

                            <div class="mb-3">
                                <label for="email" class="form-label">
                                    <i class="fas fa-envelope me-1"></i>ì´ë©”ì¼
                                </label>
                                <input type="email"
                                       class="form-control"
                                       th:classappend="${#fields.hasErrors('email')} ? 'is-invalid'"
                                       id="email"
                                       th:field="*{email}"
                                       placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”"
                                       required>
                                <div class="invalid-feedback" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
                            </div>

                            <div class="mb-3">
                                <label for="phone" class="form-label">
                                    <i class="fas fa-mobile-alt me-1"></i>íœ´ëŒ€í° ë²ˆí˜¸
                                </label>
                                <input type="tel"
                                       class="form-control"
                                       th:classappend="${#fields.hasErrors('phone')} ? 'is-invalid'"
                                       id="phone"
                                       th:field="*{phone}"
                                       placeholder="íœ´ëŒ€í° ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 010-1234-5678)">
                                <div class="invalid-feedback" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></div>
                            </div>

                            <div class="mb-3">
                                <label for="address" class="form-label">
                                    <i class="fas fa-map-marker-alt me-1"></i>ì£¼ì†Œ (ì„ íƒì‚¬í•­)
                                </label>
                                <div class="input-group mb-2">
                                    <input type="text"
                                           class="form-control"
                                           th:classappend="${#fields.hasErrors('address')} ? 'is-invalid'"
                                           id="address"
                                           th:field="*{address}" 
                                           placeholder="ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”"
                                           readonly>
                                    <button type="button" class="btn btn-outline-primary" onclick="openAddressSearch('address')">
                                        <i class="fas fa-search me-1"></i>ì£¼ì†Œ ê²€ìƒ‰
                                    </button>
                                </div>
                                <input type="text" 
                                       class="form-control" 
                                       id="detailAddress" 
                                       th:field="*{detailAddress}"
                                       placeholder="ìƒì„¸ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 101ë™ 201í˜¸, 2ì¸µ)">
                                <div class="invalid-feedback" th:if="${#fields.hasErrors('address')}" th:errors="*{address}"></div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">
                                    <i class="fas fa-image me-1"></i>í”„ë¡œí•„ ì´ë¯¸ì§€ <span class="text-muted">(êµ¬ì§ ì‹ ì²­ ì‹œ ì‚¬ìš©)</span>
                                </label>
                                <div class="text-center p-3 border border-2 border-dashed rounded">
                                    <!-- í˜„ì¬ ë“±ë¡ëœ í”„ë¡œí•„ ì´ë¯¸ì§€ -->
                                    <div th:if="${memberDTO.profileImage}" class="current-profile-image mb-3">
                                        <p class="text-success mb-2">
                                            <i class="fas fa-check-circle me-1"></i>í˜„ì¬ ë“±ë¡ëœ í”„ë¡œí•„ ì´ë¯¸ì§€:
                                        </p>
                                        <img th:src="@{/profile_images/{image}(image=${memberDTO.profileImage})}" 
                                             class="img-thumbnail" 
                                             style="width: 90px; height: 120px; object-fit: cover;"
                                             alt="í˜„ì¬ í”„ë¡œí•„ ì´ë¯¸ì§€">
                                        <p class="small text-muted mt-1">ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨ (3:4)</p>
                                    </div>
                                    
                                    <!-- ì´ë¯¸ì§€ ë“±ë¡/ìˆ˜ì • ë²„íŠ¼ -->
                                    <div>
                                        <a href="/member/myinfo/crop-image" class="btn btn-primary">
                                            <i class="fas fa-crop me-1"></i>
                                            <span th:text="${memberDTO.profileImage} ? 'í”„ë¡œí•„ ì´ë¯¸ì§€ ìˆ˜ì •' : 'í”„ë¡œí•„ ì´ë¯¸ì§€ ë“±ë¡'">í”„ë¡œí•„ ì´ë¯¸ì§€ ë“±ë¡</span>
                                        </a>
                                        <p class="small text-muted mt-2">
                                            <i class="fas fa-info-circle me-1"></i>
                                            ê¶Œì¥: ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨ (3:4), ìµœëŒ€ 5MB, JPG/PNG í˜•ì‹
                                        </p>
                                    </div>
                                </div>
                                
                                <!-- ê°„ë‹¨í•œ ê°€ì´ë“œë¼ì¸ -->
                                <div class="mt-2">
                                    <small class="text-muted">
                                        <i class="fas fa-info-circle me-1"></i>
                                        <strong>ê¶Œì¥:</strong> ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨ (3:4), ìµœëŒ€ 5MB, JPG/PNG í˜•ì‹
                                        <span class="ms-2 text-primary">|</span>
                                        <strong class="text-primary">ê³ ê¸‰ í¬ë¡­ ë²„íŠ¼</strong>ìœ¼ë¡œ ì •í™•í•œ ë¹„ìœ¨ ì¡°ì ˆ ê°€ëŠ¥
                                    </small>
                                </div>

                                <!-- í˜„ì¬ í”„ë¡œí•„ ì´ë¯¸ì§€ í‘œì‹œ -->
                                <div th:if="${memberDTO.profileImage}" class="mt-3">
                                    <p class="text-muted mb-2">
                                        <i class="fas fa-check-circle text-success me-1"></i>í˜„ì¬ ë“±ë¡ëœ í”„ë¡œí•„ ì´ë¯¸ì§€:
                                    </p>
                                    <div class="d-flex align-items-center">
                                        <img th:src="@{${memberDTO.profileImage}}" 
                                             alt="í”„ë¡œí•„ ì´ë¯¸ì§€" 
                                             class="img-thumbnail me-3" 
                                             style="width: 90px; height: 120px; object-fit: cover; border: 2px solid #dee2e6; border-radius: 8px;" 
                                             id="currentProfileImage" 
                                             onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                        <div class="alert alert-warning mb-0" style="display: none;">
                                            <i class="fas fa-exclamation-triangle me-1"></i>
                                            ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
                                        </div>
                                        <div class="ms-2">
                                            <small class="text-muted">
                                                ì¦ëª…ì‚¬ì§„ ë¹„ìœ¨ (3:4)<br>
                                                êµ¬ì§ ì‹ ì²­ ì‹œ ì‚¬ìš©ë©ë‹ˆë‹¤
                                            </small>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì´ë¯¸ì§€ í¬ë¡­ ëª¨ë‹¬ -->
                                <div class="modal fade" id="cropModal" tabindex="-1" aria-labelledby="cropModalLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-lg">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="cropModalLabel">
                                                    <i class="fas fa-crop me-2"></i>í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­
                                                </h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="mb-3">
                                                    <div class="alert alert-info">
                                                        <i class="fas fa-info-circle me-1"></i>
                                                        <strong>í¬ë¡­ ê°€ì´ë“œ:</strong> ë°˜ëª…í•¨ ë¹„ìœ¨(3.5:2.2)ì— ë§ì¶° ì›í•˜ëŠ” ì˜ì—­ì„ ì„ íƒí•˜ì„¸ìš”.
                                                    </div>
                                                    <div class="row text-center">
                                                        <div class="col-md-6">
                                                            <h6 class="text-primary mb-2">
                                                                <i class="fas fa-mouse-pointer me-1"></i>í¬ë¡­ ì˜ì—­ ì¡°ì ˆ
                                                            </h6>
                                                            <ul class="small text-start mb-0">
                                                                <li>ë§ˆìš°ìŠ¤ë¡œ í¬ë¡­ ì˜ì—­ì„ ë“œë˜ê·¸í•˜ì—¬ ì´ë™</li>
                                                                <li>ëª¨ì„œë¦¬ë¥¼ ë“œë˜ê·¸í•˜ì—¬ í¬ê¸° ì¡°ì ˆ</li>
                                                                <li>ë¹„ìœ¨ì€ ìë™ìœ¼ë¡œ 3.5:2.2 ìœ ì§€</li>
                                                            </ul>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <h6 class="text-success mb-2">
                                                                <i class="fas fa-expand-arrows-alt me-1"></i>ì´ë¯¸ì§€ ì¡°ì ˆ
                                                            </h6>
                                                            <div class="btn-group-vertical d-grid gap-1">
                                                                <button type="button" class="btn btn-sm btn-outline-success" id="zoomIn">
                                                                    <i class="fas fa-search-plus me-1"></i>í™•ëŒ€
                                                                </button>
                                                                <button type="button" class="btn btn-sm btn-outline-success" id="zoomOut">
                                                                    <i class="fas fa-search-minus me-1"></i>ì¶•ì†Œ
                                                                </button>
                                                                <button type="button" class="btn btn-sm btn-outline-info" id="resetZoom">
                                                                    <i class="fas fa-undo me-1"></i>ì›ë˜í¬ê¸°
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="text-center">
                                                    <div id="cropContainer" style="max-width: 100%; max-height: 450px; overflow: hidden; border: 2px solid #dee2e6; border-radius: 8px; position: relative;">
                                                        <img id="cropImage" style="max-width: 100%; height: auto; cursor: move;">
                                                    </div>
                                                </div>
                                                <div class="mt-2 text-center">
                                                    <small class="text-muted">
                                                        <i class="fas fa-hand-paper me-1"></i>
                                                        ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ìœ„ì¹˜ë¥¼ ì¡°ì ˆí•˜ì„¸ìš”. ë§ˆìš°ìŠ¤ íœ ë¡œ í™•ëŒ€/ì¶•ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                                    </small>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                                    <i class="fas fa-times me-1"></i>ì·¨ì†Œ
                                                </button>
                                                <button type="button" class="btn btn-primary" id="cropConfirm">
                                                    <i class="fas fa-check me-1"></i>í¬ë¡­ ì ìš©
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì˜ì—­ -->
                                <div id="imagePreview" class="mt-3" style="display: none;">
                                    <p class="text-muted mb-2">
                                        <i class="fas fa-eye me-1"></i>ìƒˆ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°:
                                    </p>
                                    <div class="d-flex align-items-center">
                                        <img id="previewImage" 
                                             class="img-thumbnail me-3" 
                                             style="width: 105px; height: 66px; object-fit: cover; border: 2px solid #28a745; border-radius: 8px;">
                                        <div class="ms-2">
                                            <small class="text-success">
                                                <i class="fas fa-check me-1"></i>ìƒˆ ì´ë¯¸ì§€ê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤<br>
                                                ì €ì¥ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë³€ê²½ì‚¬í•­ì„ ì ìš©í•˜ì„¸ìš”
                                            </small>
                                            <div class="mt-1">
                                                <button type="button" class="btn btn-sm btn-outline-primary" id="recropButton">
                                                    <i class="fas fa-crop me-1"></i>ë‹¤ì‹œ í¬ë¡­í•˜ê¸°
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <input type="hidden" th:field="*{profileImage}">
                            </div>

                            <div class="mb-3">
                                <label for="role" class="form-label">
                                    <i class="fas fa-user-shield me-1"></i>ì—­í• 
                                </label>
                                <input type="text"
                                       class="form-control"
                                       id="role"
                                       th:field="*{role}"
                                       readonly
                                       disabled>
                            </div>

                            <hr class="my-4">

                            <div class="d-grid mb-3">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-save me-2"></i>
                                    ì •ë³´ ìˆ˜ì •
                                </button>
                            </div>
                        </form>

                        <div class="mt-4 text-center">
                            <a th:href="@{/member/mypage/change-password}" class="btn btn-outline-secondary me-2">
                                <i class="fas fa-key me-1"></i> ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
                            </a>
                            <a th:href="@{/member/mypage/delete}" class="btn btn-outline-danger">
                                <i class="fas fa-user-minus me-1"></i> íšŒì› íƒˆí‡´
                            </a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</main>


<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ë‹¤ìŒ ìš°í¸ë²ˆí˜¸ ì„œë¹„ìŠ¤ -->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

<!-- ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ -->
<script>
function openAddressSearch(targetId) {
    new daum.Postcode({
        oncomplete: function(data) {
            // ë„ë¡œëª… ì£¼ì†Œ ìš°ì„ , ì—†ìœ¼ë©´ ì§€ë²ˆ ì£¼ì†Œ ì‚¬ìš©
            var addr = data.roadAddress || data.jibunAddress;
            
            // ì„ íƒëœ ì£¼ì†Œë¥¼ í•´ë‹¹ í•„ë“œì— ì…ë ¥
            document.getElementById(targetId).value = addr;
            
            // ìƒì„¸ì£¼ì†Œ ì…ë ¥ í•„ë“œì— í¬ì»¤ìŠ¤
            if (targetId === 'address') {
                document.getElementById('detailAddress').focus();
            } else if (targetId === 'facilityAddress') {
                document.getElementById('facilityDetailAddress').focus();
            }
        },
        theme: {
            searchBgColor: "#0d6efd",
            queryTextColor: "#FFFFFF"
        }
    }).open();
}
</script>

<!-- ë‚´ì •ë³´ìˆ˜ì • ì „ìš© JavaScript (ë‹¨ìˆœí™”) -->
<script src="/js/myinfo.js"></script>
</body>
</html>
````

## File: src/main/resources/templates/review/list.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ì‹œì„¤ ë¦¬ë·° - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container mt-4">
            <!-- íƒìƒ‰ ê²½ë¡œ -->
            <nav aria-label="breadcrumb" class="mb-3">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                    <li class="breadcrumb-item"><a href="/facility/search">ì‹œì„¤ ì°¾ê¸°</a></li>
                    <li class="breadcrumb-item active" aria-current="page">ì‹œì„¤ ë¦¬ë·°</li>
                </ol>
            </nav>
            
            <div class="row mb-4">
                <div class="col-md-8">
                    <h2><i class="fas fa-star text-warning me-2"></i> ì‹œì„¤ ë¦¬ë·°</h2>
                    <p class="text-muted">ì‹¤ì œ ì´ìš©ìë“¤ì˜ ìƒìƒí•œ ì‹œì„¤ í›„ê¸°ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
                </div>
                <div class="col-md-4 text-end">
                    <a href="/review/write" class="btn btn-primary">
                        <i class="fas fa-plus me-1"></i> ë¦¬ë·° ì‘ì„±
                    </a>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <!-- ê²€ìƒ‰ í•„í„° -->
                    <div class="card mb-4">
                        <div class="card-header bg-primary text-white">
                            <h6 class="mb-0"><i class="fas fa-filter me-1"></i> ê²€ìƒ‰ í•„í„°</h6>
                        </div>
                        <div class="card-body">
                            <form method="get" th:action="@{/review}">
                                <div class="mb-3">
                                    <label class="form-label">í‚¤ì›Œë“œ</label>
                                    <input type="text" name="keyword" class="form-control" 
                                           placeholder="ì‹œì„¤ëª…, ë‚´ìš© ë“±" th:value="${keyword}">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">í‰ì </label>
                                    <select name="minRating" class="form-select">
                                        <option value="">ì „ì²´</option>
                                        <option value="5" th:selected="${param.minRating == '5'}">5ì </option>
                                        <option value="4" th:selected="${param.minRating == '4'}">4ì  ì´ìƒ</option>
                                        <option value="3" th:selected="${param.minRating == '3'}">3ì  ì´ìƒ</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">
                                    <i class="fas fa-search me-1"></i> ê²€ìƒ‰
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="col-md-9">
                    <!-- ë¦¬ë·° ëª©ë¡ -->
                    <div id="reviewList">
                        <!-- ì‹¤ì œ ë¦¬ë·° ëª©ë¡ -->
                        <div th:if="${not #lists.isEmpty(reviewList)}">
                            <div class="card mb-3" th:each="review : ${reviewList}">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-2">
                                        <div>
                                            <h6 class="mb-1" th:text="${review.title}">ë¦¬ë·° ì œëª©</h6>
                                            <div class="rating mb-2">
                                                <th:block th:each="i : ${#numbers.sequence(1, 5)}">
                                                    <i class="fas fa-star" 
                                                       th:classappend="${i <= review.rating} ? 'text-warning' : 'text-muted'"></i>
                                                </th:block>
                                                <span class="ms-2" th:text="${review.rating + '.0'}">5.0</span>
                                            </div>
                                        </div>
                                        <small class="text-muted" th:text="${#temporals.format(review.createdAt, 'yyyy-MM-dd')}">2024-01-15</small>
                                    </div>
                                    <p class="card-text rich-text-content" th:utext="${#strings.abbreviate(review.content, 100)}">
                                        ì‹œì„¤ì´ ê¹¨ë—í•˜ê³  ì§ì›ë¶„ë“¤ì´ ë§¤ìš° ì¹œì ˆí•©ë‹ˆë‹¤...
                                    </p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <small class="text-muted">
                                            ì‘ì„±ì: <span th:text="${review.memberName}">ê¹€â—‹â—‹</span> |
                                            ì¡°íšŒ <span th:text="${review.viewCount}">0</span> |
                                            ì¶”ì²œ <span th:text="${review.likeCount}">0</span>
                                        </small>
                                        <a th:href="@{/review/detail/{id}(id=${review.reviewId})}" 
                                           class="btn btn-sm btn-outline-primary">ìì„¸íˆ ë³´ê¸°</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ë¦¬ë·°ê°€ ì—†ëŠ” ê²½ìš° -->
                        <div th:if="${#lists.isEmpty(reviewList)}" class="text-center text-muted py-5">
                            <i class="fas fa-comments fa-3x mb-3"></i>
                            <h5>ë“±ë¡ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤</h5>
                            <p>ì²« ë²ˆì§¸ ë¦¬ë·°ë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”!</p>
                            <a href="/review/write" class="btn btn-primary">
                                <i class="fas fa-plus me-1"></i> ë¦¬ë·° ì‘ì„±í•˜ê¸°
                            </a>
                        </div>
                    </div>

                    <!-- í˜ì´ì§• -->
                    <nav th:if="${pageInfo != null and pageInfo.totalPages > 1}" aria-label="ë¦¬ë·° í˜ì´ì§•">
                        <ul class="pagination justify-content-center">
                            <!-- ì´ì „ í˜ì´ì§€ -->
                            <li class="page-item" th:classappend="${pageInfo == null or not pageInfo.hasPrevious} ? 'disabled'">
                                <a class="page-link" 
                                   th:href="@{/review(page=${pageInfo != null ? pageInfo.currentPage - 1 : 1}, keyword=${keyword ?: ''}, minRating=${minRating})}"
                                   aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <!-- í˜ì´ì§€ ë²ˆí˜¸ -->
                            <li class="page-item" 
                                th:each="page : ${pageInfo != null ? #numbers.sequence(pageInfo.startPage, pageInfo.endPage) : #numbers.sequence(1, 1)}"
                                th:classappend="${pageInfo != null and page == pageInfo.currentPage} ? 'active'">
                                <a class="page-link" 
                                   th:href="@{/review(page=${page}, keyword=${keyword ?: ''}, minRating=${minRating})}"
                                   th:text="${page}">1</a>
                            </li>
                            <!-- ë‹¤ìŒ í˜ì´ì§€ -->
                            <li class="page-item" th:classappend="${pageInfo == null or not pageInfo.hasNext} ? 'disabled'">
                                <a class="page-link" 
                                   th:href="@{/review(page=${pageInfo != null ? pageInfo.currentPage + 1 : 1}, keyword=${keyword ?: ''}, minRating=${minRating})}"
                                   aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </main>

    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>
</body>
</html>
````

## File: src/main/java/com/example/carelink/controller/BoardController.java
````java
package com.example.carelink.controller;

import com.example.carelink.common.PageInfo;
import com.example.carelink.common.Constants;
import com.example.carelink.dto.BoardDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.service.BoardService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 * ì •ë³´ ê²Œì‹œíŒ ì»¨íŠ¸ë¡¤ëŸ¬
 * íŒ€ì› D ë‹´ë‹¹ - ì™„ì „ ê°œì„  ë²„ì „
 */
@Slf4j
@Controller
@RequestMapping("/board")
@RequiredArgsConstructor
public class BoardController {
    
    private final BoardService boardService;
    
    // ê²Œì‹œíŒ íƒ€ì…ë³„ ì •ë³´ ë§¤í•‘
    private final Map<String, Map<String, String>> boardTypeInfo = Map.of(
        "notice", Map.of("title", "ê³µì§€ì‚¬í•­", "description", "ì¤‘ìš”í•œ ê³µì§€ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”", "category", "NOTICE"),
        "info", Map.of("title", "ì •ë³´ê³µìœ ", "description", "ìœ ìš©í•œ ì •ë³´ë¥¼ ê³µìœ í•˜ê³  í•¨ê»˜ ë‚˜ëˆ„ì„¸ìš”", "category", "INFO"),
        "qna", Map.of("title", "Q&A", "description", "ê¶ê¸ˆí•œ ì ì„ ì§ˆë¬¸í•˜ê³  ë‹µë³€ì„ ë°›ì•„ë³´ì„¸ìš”", "category", "QNA"),
        "faq", Map.of("title", "ìì£¼ë¬»ëŠ”ì§ˆë¬¸", "description", "ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ê³¼ ë‹µë³€ì„ í™•ì¸í•˜ì„¸ìš”", "category", "FAQ"),
        "all", Map.of("title", "ì „ì²´ ê²Œì‹œíŒ", "description", "ëª¨ë“  ê²Œì‹œíŒì˜ ê¸€ì„ í•œë²ˆì— í™•ì¸í•˜ì„¸ìš”", "category", "")
    );
    
    /**
     * ê²Œì‹œíŒ ëª©ë¡ í˜ì´ì§€ (íƒ€ì…ë³„ êµ¬ë¶„ ì§€ì›)
     */
    @GetMapping
    public String listPage(Model model,
                          @RequestParam(defaultValue = "1") int page,
                          @RequestParam(defaultValue = "") String keyword,
                          @RequestParam(defaultValue = "") String category,
                          @RequestParam(defaultValue = "all") String type,
                          HttpServletResponse response) {
        
        // ìºì‹œ ë°©ì§€ í—¤ë” ì„¤ì •
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
        response.setHeader("Pragma", "no-cache");
        response.setDateHeader("Expires", 0);
        
        // ê²Œì‹œíŒ íƒ€ì… ì •ë³´ ì„¤ì •
        Map<String, String> currentBoardInfo = boardTypeInfo.getOrDefault(type, boardTypeInfo.get("all"));
        String actualCategory = currentBoardInfo.get("category");
        
        // category íŒŒë¼ë¯¸í„°ê°€ ìˆìœ¼ë©´ ìš°ì„  ì‚¬ìš©, ì—†ìœ¼ë©´ typeì—ì„œ ê°€ì ¸ì˜¨ category ì‚¬ìš©
        if (category.isEmpty() && !actualCategory.isEmpty()) {
            category = actualCategory;
        }
        
        try {
            // ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§• í¬í•¨)
            PageInfo<BoardDTO> pageInfo = boardService.getBoardList(page, keyword, category);
            
            // ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (í•´ë‹¹ ì¹´í…Œê³ ë¦¬ ë‚´ì—ì„œ)
            List<BoardDTO> popularBoards = boardService.getPopularBoardsByCategory(category);
            
            // Modelì— ë°ì´í„° ì¶”ê°€
            model.addAttribute("pageInfo", pageInfo);
            model.addAttribute("boardList", pageInfo.getList());
            model.addAttribute("popularBoards", popularBoards != null ? popularBoards : List.of());
            model.addAttribute("keyword", keyword != null ? keyword : "");
            model.addAttribute("category", category != null ? category : "");
            model.addAttribute("type", type);
            model.addAttribute("currentPage", page);
        } catch (Exception e) {
            // ì—ëŸ¬ ë°œìƒ ì‹œ ë¹ˆ í˜ì´ì§€ ì •ë³´ ì „ë‹¬
            model.addAttribute("pageInfo", new PageInfo<>(List.of(), page, 10, 0));
            model.addAttribute("boardList", List.of());
            model.addAttribute("popularBoards", List.of());
            model.addAttribute("keyword", keyword != null ? keyword : "");
            model.addAttribute("category", category != null ? category : "");
            model.addAttribute("type", type);
            model.addAttribute("currentPage", page);
            model.addAttribute("error", "ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
        }
        
        // ê²Œì‹œíŒ íƒ€ì…ë³„ ì •ë³´
        model.addAttribute("boardTitle", currentBoardInfo.get("title"));
        model.addAttribute("boardDescription", currentBoardInfo.get("description"));
        model.addAttribute("pageTitle", currentBoardInfo.get("title"));
        
        // ì¹´í…Œê³ ë¦¬ë³„ ì „ìš© í…œí”Œë¦¿ ì‚¬ìš©
        if ("faq".equals(type)) {
            return "board/faq-list";
        } else if ("notice".equals(type)) {
            return "board/notice-list";
        } else if ("qna".equals(type)) {
            return "board/qna-list";
        }
        
        return "board/list";
    }
    
    /**
     * ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€
     */
    @GetMapping("/write")
    public String writePage(Model model, 
                          @RequestParam(defaultValue = "all") String type,
                          @RequestParam(required = false) String qaType,
                          HttpSession session,
                          RedirectAttributes redirectAttributes) {
        
        // ë¡œê·¸ì¸ ì²´í¬
        Long memberId = (Long) session.getAttribute("memberId");
        if (memberId == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        
        // ê¶Œí•œ ì²´í¬ - ê³µì§€ì‚¬í•­ê³¼ FAQëŠ” ê´€ë¦¬ìë§Œ ì‘ì„± ê°€ëŠ¥
        MemberDTO loginMember = (MemberDTO) session.getAttribute("loginMember");
        if (("notice".equals(type) || "faq".equals(type)) && 
            (loginMember == null || !"ADMIN".equals(loginMember.getRole()))) {
            redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ê²Œì‹œíŒì— ê¸€ì„ ì‘ì„±í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
            return "redirect:/board?type=" + type;
        }
        
        // Q&A ë‹µë³€í•˜ê¸°ëŠ” ê´€ë¦¬ìë§Œ ê°€ëŠ¥
        if ("qna".equals(type) && "ANSWER".equals(qaType) && 
            (loginMember == null || !"ADMIN".equals(loginMember.getRole()))) {
            redirectAttributes.addFlashAttribute("error", "ë‹µë³€í•˜ê¸°ëŠ” ê´€ë¦¬ìë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
            return "redirect:/board?type=" + type;
        }
        
        BoardDTO boardDTO = new BoardDTO();
        boardDTO.setMemberId(memberId); // ì„¸ì…˜ì—ì„œ ê°€ì ¸ì˜¨ ì‚¬ìš©ì ID ì„¤ì •
        
        // ê²Œì‹œíŒ íƒ€ì…ì— ë”°ë¼ ê¸°ë³¸ ì¹´í…Œê³ ë¦¬ ì„¤ì •
        Map<String, String> currentBoardInfo = boardTypeInfo.getOrDefault(type, boardTypeInfo.get("all"));
        String defaultCategory = currentBoardInfo.get("category");
        if (!defaultCategory.isEmpty()) {
            boardDTO.setCategory(defaultCategory);
        }
        
        // Q&A íƒ€ì… ì„¤ì •
        if ("qna".equals(type) && qaType != null) {
            boardDTO.setQaType(qaType);
            // ì§ˆë¬¸ì¸ ê²½ìš° ë‹µë³€ ìƒíƒœ ì´ˆê¸°ê°’ ì„¤ì •
            if ("QUESTION".equals(qaType)) {
                boardDTO.setIsAnswered(false);
                boardDTO.setAnswerCount(0);
            }
        }
        
        model.addAttribute("boardDTO", boardDTO);
        model.addAttribute("type", type);
        model.addAttribute("qaType", qaType);
        model.addAttribute("boardTitle", currentBoardInfo.get("title"));
        
        // Q&A íƒ€ì…ì— ë”°ë¥¸ í˜ì´ì§€ ì œëª© ì„¤ì •
        String pageTitle = currentBoardInfo.get("title");
        if ("qna".equals(type) && qaType != null) {
            pageTitle += ("QUESTION".equals(qaType) ? " - ì§ˆë¬¸í•˜ê¸°" : " - ë‹µë³€í•˜ê¸°");
        } else {
            pageTitle += " ì‘ì„±";
        }
        model.addAttribute("pageTitle", pageTitle);
        
        // íƒ€ì…ë³„ ì „ìš© ì‘ì„± í…œí”Œë¦¿ ì‚¬ìš©
        if ("faq".equals(type)) {
            return "board/faq-write";
        } else if ("notice".equals(type)) {
            return "board/write";  // ê³µì§€ì‚¬í•­ì€ ì¼ë°˜ ì‘ì„± í¼ ì‚¬ìš©
        } else if ("qna".equals(type)) {
            return "board/write";  // Q&AëŠ” ì¼ë°˜ ì‘ì„± í¼ ì‚¬ìš©  
        } else if ("info".equals(type)) {
            return "board/write";  // ì •ë³´ê³µìœ ëŠ” ì¼ë°˜ ì‘ì„± í¼ ì‚¬ìš©
        }
        
        return "board/write";
    }
    
    /**
     * ê²Œì‹œê¸€ ë“±ë¡ ì²˜ë¦¬
     */
    @PostMapping("/write")
    public String writeBoard(@ModelAttribute BoardDTO boardDTO, 
                           @RequestParam(defaultValue = "all") String type,
                           @RequestParam(required = false) String qaType,
                           HttpSession session,
                           RedirectAttributes redirectAttributes) {
        try {
            // ë¡œê·¸ì¸ ì²´í¬
            Long memberId = (Long) session.getAttribute("memberId");
            if (memberId == null) {
                redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
            
            // ê¶Œí•œ ì²´í¬ - ê³µì§€ì‚¬í•­ê³¼ FAQëŠ” ê´€ë¦¬ìë§Œ ì‘ì„± ê°€ëŠ¥
            MemberDTO loginMember = (MemberDTO) session.getAttribute("loginMember");
            if (("notice".equals(type) || "faq".equals(type)) && 
                (loginMember == null || !"ADMIN".equals(loginMember.getRole()))) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ê²Œì‹œíŒì— ê¸€ì„ ì‘ì„±í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/board?type=" + type;
            }
            
            // Q&A ë‹µë³€í•˜ê¸°ëŠ” ê´€ë¦¬ìë§Œ ê°€ëŠ¥
            if ("qna".equals(type) && "ANSWER".equals(qaType) && 
                (loginMember == null || !"ADMIN".equals(loginMember.getRole()))) {
                redirectAttributes.addFlashAttribute("error", "ë‹µë³€í•˜ê¸°ëŠ” ê´€ë¦¬ìë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
                return "redirect:/board?type=" + type;
            }
            
            // ì„¸ì…˜ì—ì„œ ê°€ì ¸ì˜¨ ì‚¬ìš©ì ID ì„¤ì • (ë³´ì•ˆ ê°•í™”)
            boardDTO.setMemberId(memberId);
            
            // Q&A íƒ€ì…ë³„ ì²˜ë¦¬
            if ("qna".equals(type) && qaType != null) {
                boardDTO.setQaType(qaType);
                if ("QUESTION".equals(qaType)) {
                    // ì§ˆë¬¸ì¸ ê²½ìš° ë‹µë³€ ìƒíƒœ ì´ˆê¸°í™”
                    boardDTO.setIsAnswered(false);
                    boardDTO.setAnswerCount(0);
                } else if ("ANSWER".equals(qaType)) {
                    // ë‹µë³€ì¸ ê²½ìš° (ê´€ë¦¬ìë§Œ ê°€ëŠ¥)
                    boardDTO.setIsAnswered(null); // ë‹µë³€ê¸€ì€ ë‹µë³€ ìƒíƒœë¥¼ nullë¡œ ì„¤ì •
                    boardDTO.setAnswerCount(null);
                }
            }
            
            // ê¸°ë³¸ê°’ ì„¤ì •
            if (boardDTO.getIsNotice() == null) {
                boardDTO.setIsNotice(false);
            }
            if (boardDTO.getIsSecret() == null) {
                boardDTO.setIsSecret(false);
            }
            if (boardDTO.getIsActive() == null) {
                boardDTO.setIsActive(true);  // í™œì„± ìƒíƒœë¡œ ê¸°ë³¸ ì„¤ì •
            }
            if (boardDTO.getIsDeleted() == null) {
                boardDTO.setIsDeleted(false);  // ì‚­ì œë˜ì§€ ì•Šì€ ìƒíƒœë¡œ ê¸°ë³¸ ì„¤ì •
            }
            
            boardService.insertBoard(boardDTO);
            
            // ì„±ê³µ ë©”ì‹œì§€ ì„¤ì •
            String successMessage = "ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.";
            if ("qna".equals(type) && qaType != null) {
                successMessage = "QUESTION".equals(qaType) ? "ì§ˆë¬¸ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤." : "ë‹µë³€ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.";
            }
            redirectAttributes.addFlashAttribute("message", successMessage);
            
            // ì›ë˜ ê²Œì‹œíŒ íƒ€ì…ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            if ("all".equals(type)) {
                return "redirect:/board";
            } else {
                return "redirect:/board?type=" + type;
            }
        } catch (Exception e) {
            redirectAttributes.addFlashAttribute("error", "ê²Œì‹œê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            String redirectUrl = "redirect:/board/write?type=" + type;
            if (qaType != null) {
                redirectUrl += "&qaType=" + qaType;
            }
            return redirectUrl;
        }
    }
    
    /**
     * ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°
     */
    @GetMapping("/detail/{id}")
    public String detailPage(@PathVariable Long id, 
                           @RequestParam(defaultValue = "all") String type,
                           @RequestParam(defaultValue = "1") int page,
                           Model model,
                           RedirectAttributes redirectAttributes) {
        try {
            BoardDTO board = boardService.getBoardById(id);
            // ì¡°íšŒìˆ˜ ì¦ê°€
            boardService.incrementViewCount(id);
            
            // ì´ì „ê¸€/ë‹¤ìŒê¸€ ì¡°íšŒ
            BoardDTO prevBoard = boardService.getPreviousBoard(id);
            BoardDTO nextBoard = boardService.getNextBoard(id);
            
            model.addAttribute("board", board);
            model.addAttribute("prevBoard", prevBoard);
            model.addAttribute("nextBoard", nextBoard);
            model.addAttribute("type", type);
            model.addAttribute("page", page);
            model.addAttribute("pageTitle", board.getTitle());
            
            // ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ë³´ê¸° í…œí”Œë¦¿ ë¶„ê¸° (í˜„ì¬ëŠ” ëª¨ë‘ ë™ì¼í•œ í…œí”Œë¦¿ ì‚¬ìš©)
            // í–¥í›„ ì¹´í…Œê³ ë¦¬ë³„ íŠ¹í™” ìƒì„¸ë³´ê¸°ê°€ í•„ìš”í•œ ê²½ìš° ì—¬ê¸°ì„œ ë¶„ê¸° ì²˜ë¦¬
            return "board/detail";
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸° ì˜¤ë¥˜ - boardId: {}", id, e);
            redirectAttributes.addFlashAttribute("error", "ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + e.getMessage());
            return "redirect:/board?type=" + type;
        }
    }
    
    /**
     * ê²Œì‹œê¸€ ìˆ˜ì • í˜ì´ì§€
     */
    @GetMapping("/edit/{id}")
    public String editPage(@PathVariable Long id, 
                          @RequestParam(name = "type", required = false) String type,
                         HttpSession session,
                         Model model,
                         RedirectAttributes redirectAttributes) {
        try {
            // ë¡œê·¸ì¸ ì²´í¬
            Long memberId = (Long) session.getAttribute("memberId");
            if (memberId == null) {
                redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
            
            // ê²Œì‹œê¸€ ì¡°íšŒ (ì‚­ì œëœ ê²ƒ í¬í•¨)
            BoardDTO board = boardService.getBoardByIdIncludeDeleted(id);
            if (board == null) {
                redirectAttributes.addFlashAttribute("error", "ìˆ˜ì •í•  ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/board?type=" + (type != null ? type : "all");
            }
            
            // ì‚­ì œëœ ê²Œì‹œê¸€ì¸ì§€ í™•ì¸
            if (board.getIsDeleted() != null && board.getIsDeleted()) {
                redirectAttributes.addFlashAttribute("error", "ì‚­ì œëœ ê²Œì‹œê¸€ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/board/detail/" + id + "?type=" + (type != null ? type : "all");
            }
            
            log.info("ìˆ˜ì • í˜ì´ì§€ ì ‘ê·¼ - ê²Œì‹œê¸€ ID: {}, ì‘ì„±ì ID: {}, ìš”ì²­ì ID: {}", id, board.getMemberId(), memberId);
            
            // ê¶Œí•œ ì²´í¬
            MemberDTO loginMember = (MemberDTO) session.getAttribute("loginMember");
            boolean isAdmin = loginMember != null && "ADMIN".equals(loginMember.getRole());
            boolean isAuthor = board.getMemberId().equals(memberId);
            
            // ê³µì§€ì‚¬í•­ê³¼ FAQëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì • ê°€ëŠ¥
            if (("NOTICE".equals(board.getCategory()) || "FAQ".equals(board.getCategory())) && !isAdmin) {
                log.warn("ê¶Œí•œ ì—†ëŠ” ìˆ˜ì • ì‹œë„ - ê³µì§€ì‚¬í•­/FAQ ìˆ˜ì • ê¶Œí•œ ì—†ìŒ. ìš”ì²­ì: {}", memberId);
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/board/detail/" + id + "?type=" + (type != null ? type : "all");
            }
            
            // ì¼ë°˜ ê²Œì‹œê¸€ì€ ì‘ì„±ì ë³¸ì¸ ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì • ê°€ëŠ¥
            if (!isAuthor && !isAdmin) {
                log.warn("ê¶Œí•œ ì—†ëŠ” ìˆ˜ì • ì‹œë„ - ê²Œì‹œê¸€ ì‘ì„±ì: {}, ìš”ì²­ì: {}", board.getMemberId(), memberId);
                redirectAttributes.addFlashAttribute("error", "ì‘ì„±ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return "redirect:/board/detail/" + id + "?type=" + (type != null ? type : "all");
            }
            
            // ê²Œì‹œíŒ íƒ€ì…ë³„ ì •ë³´
            Map<String, String> currentBoardInfo = boardTypeInfo.getOrDefault(type != null ? type : "all", boardTypeInfo.get("all"));
            
            model.addAttribute("boardDTO", board);
            model.addAttribute("type", type != null ? type : "all");
            model.addAttribute("boardTitle", currentBoardInfo.get("title"));
            model.addAttribute("pageTitle", currentBoardInfo.get("title") + " ìˆ˜ì •");
            
            return "board/edit";
        } catch (Exception e) {
            log.error("ìˆ˜ì • í˜ì´ì§€ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            redirectAttributes.addFlashAttribute("error", "ìˆ˜ì • í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return "redirect:/board?type=" + (type != null ? type : "all");
        }
    }
    
    /**
     * ê²Œì‹œê¸€ ìˆ˜ì • ì²˜ë¦¬
     */
    @PostMapping("/edit/{id}")
    public String editBoard(@PathVariable Long id, 
                          @ModelAttribute BoardDTO boardDTO,
                          @RequestParam(defaultValue = "all") String type,
                          HttpSession session,
                          RedirectAttributes redirectAttributes) {
        try {
            // ë¡œê·¸ì¸ ì²´í¬
            Long memberId = (Long) session.getAttribute("memberId");
            if (memberId == null) {
                redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
            
            // ê¸°ì¡´ ê²Œì‹œê¸€ ì •ë³´ ì¡°íšŒ (ì‚­ì œëœ ê²ƒ í¬í•¨)
            BoardDTO existingBoard = boardService.getBoardByIdIncludeDeleted(id);
            if (existingBoard == null) {
                redirectAttributes.addFlashAttribute("error", "ìˆ˜ì •í•  ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return getRedirectUrl(type);
            }
            
            // ì‚­ì œëœ ê²Œì‹œê¸€ì¸ì§€ í™•ì¸
            if (existingBoard.getIsDeleted() != null && existingBoard.getIsDeleted()) {
                redirectAttributes.addFlashAttribute("error", "ì‚­ì œëœ ê²Œì‹œê¸€ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return getRedirectUrl(type);
            }
            
            log.info("ìˆ˜ì • ìš”ì²­ - ê²Œì‹œê¸€ ID: {}, ì‘ì„±ì ID: {}, ìš”ì²­ì ID: {}", id, existingBoard.getMemberId(), memberId);
            
            // ê¶Œí•œ ì²´í¬
            MemberDTO loginMember = (MemberDTO) session.getAttribute("loginMember");
            boolean isAdmin = loginMember != null && "ADMIN".equals(loginMember.getRole());
            boolean isAuthor = existingBoard.getMemberId().equals(memberId);
            
            // ê³µì§€ì‚¬í•­ê³¼ FAQëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì • ê°€ëŠ¥
            if (("NOTICE".equals(existingBoard.getCategory()) || "FAQ".equals(existingBoard.getCategory())) && !isAdmin) {
                log.warn("ê¶Œí•œ ì—†ëŠ” ìˆ˜ì • ì‹œë„ - ê³µì§€ì‚¬í•­/FAQ ìˆ˜ì • ê¶Œí•œ ì—†ìŒ. ìš”ì²­ì: {}", memberId);
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/board/detail/" + id + "?type=" + type;
            }
            
            // ì¼ë°˜ ê²Œì‹œê¸€ì€ ì‘ì„±ì ë³¸ì¸ ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì • ê°€ëŠ¥
            if (!isAuthor && !isAdmin) {
                log.warn("ê¶Œí•œ ì—†ëŠ” ìˆ˜ì • ì‹œë„ - ê²Œì‹œê¸€ ì‘ì„±ì: {}, ìš”ì²­ì: {}", existingBoard.getMemberId(), memberId);
                redirectAttributes.addFlashAttribute("error", "ì‘ì„±ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return "redirect:/board/detail/" + id + "?type=" + type;
            }
            
            // ìˆ˜ì •í•  ê²Œì‹œê¸€ ì •ë³´ ì„¤ì •
            boardDTO.setBoardId(id);
            boardDTO.setMemberId(memberId);
            
            // ê¸°ë³¸ê°’ ì„¤ì •
            if (boardDTO.getIsNotice() == null) {
                boardDTO.setIsNotice(false);
            }
            if (boardDTO.getIsSecret() == null) {
                boardDTO.setIsSecret(false);
            }
            if (boardDTO.getIsActive() == null) {
                boardDTO.setIsActive(true);  // í™œì„± ìƒíƒœ ìœ ì§€
            }
            if (boardDTO.getIsDeleted() == null) {
                boardDTO.setIsDeleted(false);  // ì‚­ì œë˜ì§€ ì•Šì€ ìƒíƒœ ìœ ì§€
            }
            
            boardService.updateBoard(boardDTO);
            log.info("ìˆ˜ì • ì™„ë£Œ - ê²Œì‹œê¸€ ID: {}", id);
            redirectAttributes.addFlashAttribute("message", "âœ… ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return "redirect:/board/detail/" + id + "?type=" + type;
        } catch (Exception e) {
            log.error("ìˆ˜ì • ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            redirectAttributes.addFlashAttribute("error", "âŒ ê²Œì‹œê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return "redirect:/board/edit/" + id + "?type=" + type;
        }
    }
    
    /**
     * ê²Œì‹œê¸€ ì‚­ì œ ì²˜ë¦¬
     */
    @PostMapping("/delete/{id}")
    public String deleteBoard(@PathVariable Long id,
                             @RequestParam(name = "type", required = false) String type,
                            HttpSession session,
                            RedirectAttributes redirectAttributes) {
        
        try {
            log.info("ğŸš€ ì‚­ì œ ìš”ì²­ ì‹œì‘ - ê²Œì‹œê¸€ ID: {}", id);
            
            // ë¡œê·¸ì¸ í™•ì¸
            Long memberId = (Long) session.getAttribute("memberId");
            log.info("ğŸ” ì„¸ì…˜ í™•ì¸ - memberId: {}", memberId);
            
            if (memberId == null) {
                log.warn("âŒ ë¡œê·¸ì¸ ì•ˆë¨ - ì‚­ì œ ì‹¤íŒ¨");
                redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
            
            // ê²Œì‹œê¸€ ì¡°íšŒ (ì‚­ì œëœ ê²ƒ í¬í•¨)
            BoardDTO board = boardService.getBoardByIdIncludeDeleted(id);
            log.info("ğŸ” ê²Œì‹œê¸€ ì¡°íšŒ ê²°ê³¼ - board: {}", board != null ? "ì¡´ì¬í•¨" : "ì—†ìŒ");
            
            if (board == null) {
                log.warn("âŒ ê²Œì‹œê¸€ ì—†ìŒ - ì‚­ì œ ì‹¤íŒ¨");
                redirectAttributes.addFlashAttribute("error", "ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return getRedirectUrl(type);
            }
            
            log.info("ğŸ” ê¶Œí•œ ì²´í¬ - ê²Œì‹œê¸€ ì‘ì„±ì: {}, ìš”ì²­ì: {}", board.getMemberId(), memberId);
            log.info("ì‚­ì œ ìš”ì²­ - ê²Œì‹œê¸€ ID: {}, ì‘ì„±ì ID: {}, ìš”ì²­ì ID: {}", id, board.getMemberId(), memberId);
            
            // ê¶Œí•œ ì²´í¬
            MemberDTO loginMember = (MemberDTO) session.getAttribute("loginMember");
            boolean isAdmin = loginMember != null && "ADMIN".equals(loginMember.getRole());
            boolean isAuthor = board.getMemberId().equals(memberId);
            
            // ê³µì§€ì‚¬í•­ê³¼ FAQëŠ” ê´€ë¦¬ìë§Œ ì‚­ì œ ê°€ëŠ¥
            if (("NOTICE".equals(board.getCategory()) || "FAQ".equals(board.getCategory())) && !isAdmin) {
                log.warn("âŒ ê¶Œí•œ ì—†ëŠ” ì‚­ì œ ì‹œë„ - ê³µì§€ì‚¬í•­/FAQ ì‚­ì œ ê¶Œí•œ ì—†ìŒ. ìš”ì²­ì: {}", memberId);
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ê²Œì‹œê¸€ì„ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return getRedirectUrl(type);
            }
            
            // ì¼ë°˜ ê²Œì‹œê¸€ì€ ì‘ì„±ì ë³¸ì¸ ë˜ëŠ” ê´€ë¦¬ìë§Œ ì‚­ì œ ê°€ëŠ¥
            if (!isAuthor && !isAdmin) {
                log.warn("âŒ ê¶Œí•œ ì—†ëŠ” ì‚­ì œ ì‹œë„ - ê²Œì‹œê¸€ ì‘ì„±ì: {}, ìš”ì²­ì: {}", board.getMemberId(), memberId);
                redirectAttributes.addFlashAttribute("error", "ì‘ì„±ìë§Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return getRedirectUrl(type);
            }
            
            log.info("âœ… ê¶Œí•œ ì²´í¬ í†µê³¼ - ì‚­ì œ ì§„í–‰");
            
            // ì‚­ì œ ì‹¤í–‰
            Map<String, Object> deleteResult = boardService.deleteBoard(id);
            Boolean success = (Boolean) deleteResult.get("success");
            String message = (String) deleteResult.get("message");
            
            log.info("ì‚­ì œ ê²°ê³¼ - ì„±ê³µ: {}, ë©”ì‹œì§€: {}", success, message);
            
            if (success) {
                redirectAttributes.addFlashAttribute("message", "âœ… " + message);
            } else {
                redirectAttributes.addFlashAttribute("error", "âŒ " + message);
            }
            
            return getRedirectUrl(type);
            
        } catch (Exception e) {
            log.error("ê²Œì‹œê¸€ ì‚­ì œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
            redirectAttributes.addFlashAttribute("error", "âŒ ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return getRedirectUrl(type);
        }
    }
    
    /**
     * ë¦¬ë‹¤ì´ë ‰íŠ¸ URL ìƒì„± (ì¤‘ë³µ ì½”ë“œ ì œê±°)
     */
    private String getRedirectUrl(String type) {
        if ("all".equals(type)) {
            return "redirect:/board";
        } else {
            return "redirect:/board?type=" + type;
        }
    }
    
    /**
     * ê²Œì‹œê¸€ ì¶”ì²œ/ë¹„ì¶”ì²œ
     */
    @PostMapping("/like/{id}")
    @ResponseBody
    public Map<String, Object> toggleLike(@PathVariable Long id, 
                                        @RequestParam String action) {
        Map<String, Object> result = new HashMap<>();
        try {
            if ("like".equals(action)) {
                boardService.incrementLikeCount(id);
                result.put("success", true);
                result.put("message", "ì¶”ì²œë˜ì—ˆìŠµë‹ˆë‹¤.");
            } else if ("dislike".equals(action)) {
                boardService.decrementLikeCount(id);
                result.put("success", true);
                result.put("message", "ì¶”ì²œì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.");
            }
        } catch (Exception e) {
            result.put("success", false);
            result.put("message", "ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return result;
    }
    
    /**
     * ë””ë²„ê¹…: ê²Œì‹œê¸€ ìƒíƒœ í™•ì¸
     */
    @GetMapping("/debug/board/{id}")
    @ResponseBody
    public Map<String, Object> debugBoardStatus(@PathVariable Long id) {
        Map<String, Object> result = new HashMap<>();
        
        try {
            log.info("ğŸ”§ ë””ë²„ê·¸ API í˜¸ì¶œ - boardId: {}", id);
            
            // ì‚­ì œëœ ê²ƒ í¬í•¨í•˜ì—¬ ì¡°íšŒ
            BoardDTO board = boardService.getBoardByIdIncludeDeleted(id);
            if (board == null) {
                result.put("error", "ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
                log.warn("ğŸ”§ ë””ë²„ê·¸ - ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ: {}", id);
                return result;
            }
            
            result.put("boardId", board.getBoardId());
            result.put("title", board.getTitle());
            result.put("isDeleted", board.getIsDeleted());
            result.put("isDeletedType", board.getIsDeleted() != null ? board.getIsDeleted().getClass().getSimpleName() : "null");
            result.put("isDeletedValue", board.getIsDeleted() != null ? board.getIsDeleted().toString() : "null");
            result.put("isActive", board.getIsActive());
            result.put("isActiveType", board.getIsActive() != null ? board.getIsActive().getClass().getSimpleName() : "null");
            result.put("createdAt", board.getCreatedAt());
            
            // ì‚­ì œ ì¡°ê±´ ì²´í¬
            boolean wouldBeDeleted = board.getIsDeleted() != null && board.getIsDeleted();
            result.put("wouldBeConsideredDeleted", wouldBeDeleted);
            
            log.info("ğŸ”§ ë””ë²„ê·¸ ê²°ê³¼ - boardId: {}, isDeleted: {}, wouldBeDeleted: {}", 
                id, board.getIsDeleted(), wouldBeDeleted);
            
            return result;
        } catch (Exception e) {
            log.error("ğŸ”§ ë””ë²„ê·¸ API ì˜¤ë¥˜ - boardId: {}", id, e);
            result.put("error", "ì˜¤ë¥˜ ë°œìƒ: " + e.getMessage());
            return result;
        }
    }
    
    /**
     * í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
     */
    private MemberDTO getCurrentMember(HttpSession session) {
        return (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
    }
    
    /**
     * í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID ì¡°íšŒ (ê¸°ì¡´ memberId ì„¸ì…˜ í‚¤ ì‚¬ìš©)
     */
    private Long getCurrentMemberId(HttpSession session) {
        return (Long) session.getAttribute("memberId");
    }
    
    /**
     * í˜„ì¬ ì‚¬ìš©ìê°€ ê´€ë¦¬ìì¸ì§€ í™•ì¸
     */
    private boolean isAdmin(HttpSession session) {
        MemberDTO loginMember = getCurrentMember(session);
        return loginMember != null && "ADMIN".equals(loginMember.getRole());
    }
    
    /**
     * ìˆ˜ì •/ì‚­ì œ ê¶Œí•œ í™•ì¸ (ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì)
     */
    private boolean hasEditPermission(HttpSession session, Long authorMemberId) {
        Long currentMemberId = getCurrentMemberId(session);
        return (currentMemberId != null && currentMemberId.equals(authorMemberId)) || isAdmin(session);
    }


}
````

## File: src/main/java/com/example/carelink/controller/ReviewController.java
````java
package com.example.carelink.controller;

import com.example.carelink.common.PageInfo;
import com.example.carelink.common.Constants;
import com.example.carelink.dto.ReviewDTO;
import com.example.carelink.dto.FacilityDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.service.ReviewService;
import com.example.carelink.service.FacilityService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

import javax.servlet.http.HttpSession;
import java.util.List;
import java.util.Map;
import java.util.HashMap;

/**
 * ì‹œì„¤ ë¦¬ë·° ì»¨íŠ¸ë¡¤ëŸ¬
 * íŒ€ì› D ë‹´ë‹¹ - ì™„ì „ ê°œì„  ë²„ì „
 */
@Slf4j
@Controller
@RequestMapping("/review")
@RequiredArgsConstructor
public class ReviewController {
    
    private final ReviewService reviewService;
    private final FacilityService facilityService;
    
    /**
     * ë¦¬ë·° ëª©ë¡ í˜ì´ì§€
     */
    @GetMapping
    public String listPage(Model model,
                          @RequestParam(defaultValue = "1") int page,
                          @RequestParam(defaultValue = "") String keyword,
                          @RequestParam(required = false) Integer minRating,
                          @RequestParam(required = false) Long facilityId) {
        
        try {
            log.info("ë¦¬ë·° ëª©ë¡ í˜ì´ì§€ ì ‘ì† - page: {}, keyword: {}, minRating: {}, facilityId: {}", 
                    page, keyword, minRating, facilityId);
            
            PageInfo<ReviewDTO> pageInfo = reviewService.getReviewList(page, keyword, minRating, facilityId);
            model.addAttribute("pageInfo", pageInfo);
            model.addAttribute("reviewList", pageInfo.getList());
            model.addAttribute("keyword", keyword != null ? keyword : "");
            model.addAttribute("minRating", minRating);
            model.addAttribute("facilityId", facilityId);
            model.addAttribute("currentPage", page);
            model.addAttribute("pageTitle", "ì‹œì„¤ ë¦¬ë·°");
            
            // ì‹œì„¤ë³„ í•„í„°ë§ì¸ ê²½ìš° ì‹œì„¤ ì •ë³´ë„ í•¨ê»˜ ì¡°íšŒ
            if (facilityId != null) {
                try {
                    FacilityDTO facility = facilityService.getFacilityById(facilityId);
                    model.addAttribute("selectedFacility", facility);
                    model.addAttribute("pageTitle", facility.getFacilityName() + " ë¦¬ë·°");
                } catch (Exception e) {
                    log.warn("ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨ - facilityId: {}", facilityId, e);
                }
            }
            
            return "review/list";
        } catch (Exception e) {
            log.error("ë¦¬ë·° ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            // ì—ëŸ¬ ë°œìƒ ì‹œ ë¹ˆ í˜ì´ì§€ ì •ë³´ ì „ë‹¬
            model.addAttribute("pageInfo", new PageInfo<>(List.of(), page, 10, 0));
            model.addAttribute("reviewList", List.of());
            model.addAttribute("keyword", keyword != null ? keyword : "");
            model.addAttribute("minRating", minRating);
            model.addAttribute("facilityId", facilityId);
            model.addAttribute("currentPage", page);
            model.addAttribute("error", "ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            
            return "review/list";
        }
    }
    
    /**
     * ë¦¬ë·° ì‘ì„± í˜ì´ì§€
     */
    @GetMapping("/write")
    public String writePage(Model model,
                           @RequestParam(required = false) Long facilityId,
                           HttpSession session,
                           RedirectAttributes redirectAttributes) {
        
        // ë¡œê·¸ì¸ ì²´í¬
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            log.warn("ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìì˜ ë¦¬ë·° ì‘ì„± í˜ì´ì§€ ì ‘ì† ì‹œë„");
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        try {
            log.info("ë¦¬ë·° ì‘ì„± í˜ì´ì§€ ì ‘ì† - facilityId: {}", facilityId);
            
            ReviewDTO reviewDTO = new ReviewDTO();
            
            // ì‹œì„¤ ëª©ë¡ ì¡°íšŒ (ì‹œì„¤ ì„ íƒì„ ìœ„í•´)
            List<FacilityDTO> facilityList = facilityService.getAllActiveFacilities();
            log.info("í™œì„±í™”ëœ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", facilityList.size());
            
            if (facilityId != null) {
                FacilityDTO selectedFacility = facilityService.getFacilityById(facilityId);
                if (selectedFacility != null) {
                    log.info("ì„ íƒëœ ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì„±ê³µ - facilityId: {}, facilityName: {}, status: {}", 
                            facilityId, selectedFacility.getFacilityName(), selectedFacility.getStatus());
                    
                    // ì‹œì„¤ ìƒíƒœ ì²´í¬
                    if ("ì‚­ì œë¨".equals(selectedFacility.getStatus())) {
                        model.addAttribute("error", "ì„ íƒí•˜ì‹  ì‹œì„¤ì€ ì‚­ì œë˜ì–´ ë¦¬ë·°ë¥¼ ì‘ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                    } else if ("ìŠ¹ì¸ëŒ€ê¸°".equals(selectedFacility.getStatus())) {
                        model.addAttribute("error", "ì„ íƒí•˜ì‹  ì‹œì„¤ì€ ì•„ì§ ìŠ¹ì¸ë˜ì§€ ì•Šì•„ ë¦¬ë·°ë¥¼ ì‘ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                    } else {
                        reviewDTO.setFacilityId(facilityId);
                        model.addAttribute("selectedFacility", selectedFacility);
                    }
                } else {
                    log.warn("ì„ íƒëœ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ - facilityId: {}", facilityId);
                    model.addAttribute("error", "ì„ íƒí•˜ì‹  ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                }
            }
            
            model.addAttribute("reviewDTO", reviewDTO);
            model.addAttribute("facilityList", facilityList);
            model.addAttribute("pageTitle", "ë¦¬ë·° ì‘ì„±");
            
            return "review/write";
        } catch (Exception e) {
            log.error("ë¦¬ë·° ì‘ì„± í˜ì´ì§€ ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            model.addAttribute("error", "ë¦¬ë·° ì‘ì„± í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return "review/write";
        }
    }
    
    /**
     * ë¦¬ë·° ë“±ë¡ ì²˜ë¦¬
     */
    @PostMapping("/write")
    public String writeReview(@ModelAttribute ReviewDTO reviewDTO,
                             HttpSession session,
                             RedirectAttributes redirectAttributes) {
        try {
            log.info("ë¦¬ë·° ë“±ë¡ ìš”ì²­ - title: {}, facilityId: {}", reviewDTO.getTitle(), reviewDTO.getFacilityId());
            
            // í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID ì„¤ì • (ì„¸ì…˜ì—ì„œ ê°€ì ¸ì˜¤ê¸°)
            MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (loginMember == null) {
                log.warn("ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìì˜ ë¦¬ë·° ì‘ì„± ì‹œë„");
                redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
            
            reviewDTO.setMemberId(loginMember.getMemberId());
            log.info("ë¦¬ë·° ì‘ì„±ì ì„¤ì • - memberId: {}, userId: {}", loginMember.getMemberId(), loginMember.getUserId());
            
            // í•„ìˆ˜ ê°’ ê²€ì¦
            if (reviewDTO.getFacilityId() == null) {
                log.warn("ì‹œì„¤ì´ ì„ íƒë˜ì§€ ì•ŠìŒ");
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/write";
            }
            
            // ì‹œì„¤ ì¡´ì¬ ì—¬ë¶€ ë° ìƒíƒœ í™•ì¸
            FacilityDTO facility = facilityService.getFacilityById(reviewDTO.getFacilityId());
            if (facility == null) {
                log.warn("ì„ íƒëœ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ - facilityId: {}", reviewDTO.getFacilityId());
                redirectAttributes.addFlashAttribute("error", "ì„ íƒí•œ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/write";
            }
            
            // ì‹œì„¤ ìƒíƒœ ê²€ì¦
            if (!facilityService.validateFacilityStatus(facility)) {
                log.warn("ìœ íš¨í•˜ì§€ ì•Šì€ ì‹œì„¤ ìƒíƒœ - facilityId: {}, status: {}", 
                        facility.getFacilityId(), facility.getStatus());
                redirectAttributes.addFlashAttribute("error", facility.getStatusMessage());
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/write";
            }
            
            log.info("ì‹œì„¤ ì •ë³´ í™•ì¸ ì™„ë£Œ - facilityId: {}, facilityName: {}, status: {}", 
                    facility.getFacilityId(), facility.getFacilityName(), facility.getStatus());
            
            // ì œëª© ê²€ì¦
            if (reviewDTO.getTitle() == null || reviewDTO.getTitle().trim().isEmpty()) {
                log.warn("ì œëª©ì´ ì…ë ¥ë˜ì§€ ì•ŠìŒ");
                redirectAttributes.addFlashAttribute("error", "ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/write?facilityId=" + reviewDTO.getFacilityId();
            }
            
            // ë‚´ìš© ê²€ì¦
            if (reviewDTO.getContent() == null || reviewDTO.getContent().trim().length() < 10) {
                log.warn("ë‚´ìš©ì´ 10ì ë¯¸ë§Œì„");
                redirectAttributes.addFlashAttribute("error", "ë‚´ìš©ì„ 10ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/write?facilityId=" + reviewDTO.getFacilityId();
            }
            
            // í‰ì  ê²€ì¦
            if (reviewDTO.getRating() == null || reviewDTO.getRating() < 1 || reviewDTO.getRating() > 5) {
                log.warn("í‰ì ì´ ìœ íš¨í•˜ì§€ ì•ŠìŒ - rating: {}", reviewDTO.getRating());
                redirectAttributes.addFlashAttribute("error", "í‰ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/write?facilityId=" + reviewDTO.getFacilityId();
            }
            
            // ë¦¬ë·° ë“±ë¡
            reviewService.insertReview(reviewDTO);
            log.info("ë¦¬ë·° ë“±ë¡ ì„±ê³µ - reviewId: {}", reviewDTO.getReviewId());
            redirectAttributes.addFlashAttribute("message", "ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
            
            return "redirect:/review";
        } catch (Exception e) {
            log.error("ë¦¬ë·° ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            redirectAttributes.addFlashAttribute("error", "ë¦¬ë·° ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
            return "redirect:/review/write?facilityId=" + reviewDTO.getFacilityId();
        }
    }
    
    /**
     * ë¦¬ë·° ìƒì„¸ë³´ê¸°
     */
    @GetMapping("/detail/{id}")
    public String detailPage(@PathVariable Long id, Model model, HttpSession session) {
        try {
            ReviewDTO review = reviewService.getReviewById(id);
            
            if (review == null) {
                model.addAttribute("error", "ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/review";
            }
            
            // ì¡°íšŒìˆ˜ ì¦ê°€
            reviewService.incrementViewCount(id);
            
            // ê°™ì€ ì‹œì„¤ì˜ ë‹¤ë¥¸ ë¦¬ë·°ë“¤ ì¡°íšŒ (ìµœëŒ€ 5ê°œ)
            List<ReviewDTO> otherReviews = reviewService.getReviewsByFacilityId(review.getFacilityId())
                    .stream()
                    .filter(r -> !r.getReviewId().equals(id))
                    .limit(5)
                    .collect(java.util.stream.Collectors.toList());
            
            model.addAttribute("review", review);
            model.addAttribute("otherReviews", otherReviews);
            model.addAttribute("pageTitle", review.getTitle());
            model.addAttribute("currentMemberId", getCurrentMemberId(session)); // í˜„ì¬ ì‚¬ìš©ì ID ì¶”ê°€
            
            return "review/detail";
        } catch (Exception e) {
            log.error("ë¦¬ë·° ìƒì„¸ë³´ê¸° ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            model.addAttribute("error", "ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + e.getMessage());
            return "redirect:/review";
        }
    }
    
    /**
     * ë¦¬ë·° ìˆ˜ì • í˜ì´ì§€
     */
    @GetMapping("/edit/{id}")
    public String editPage(@PathVariable Long id, Model model, HttpSession session, RedirectAttributes redirectAttributes) {
        try {
            ReviewDTO review = reviewService.getReviewById(id);
            
            if (review == null) {
                redirectAttributes.addFlashAttribute("error", "ìˆ˜ì •í•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/review";
            }
            
            // ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
            if (!hasEditPermission(session, review.getMemberId())) {
                redirectAttributes.addFlashAttribute("error", "ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return "redirect:/review/detail/" + id;
            }
            
            model.addAttribute("reviewDTO", review);
            model.addAttribute("pageTitle", "ë¦¬ë·° ìˆ˜ì •");
            
            return "review/edit";
        } catch (Exception e) {
            log.error("ë¦¬ë·° ìˆ˜ì • í˜ì´ì§€ ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            redirectAttributes.addFlashAttribute("error", "ìˆ˜ì • í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return "redirect:/review";
        }
    }
    
    /**
     * ë¦¬ë·° ìˆ˜ì • ì²˜ë¦¬
     */
    @PostMapping("/update")
    public String updateReview(@ModelAttribute ReviewDTO reviewDTO, HttpSession session, RedirectAttributes redirectAttributes) {
        try {
            log.info("ë¦¬ë·° ìˆ˜ì • ìš”ì²­ - reviewId: {}, title: {}", reviewDTO.getReviewId(), reviewDTO.getTitle());
            
            // ê¸°ì¡´ ë¦¬ë·° ì¡°íšŒ
            ReviewDTO existingReview = reviewService.getReviewById(reviewDTO.getReviewId());
            if (existingReview == null) {
                redirectAttributes.addFlashAttribute("error", "ìˆ˜ì •í•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/review";
            }
            
            // ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
            if (!hasEditPermission(session, existingReview.getMemberId())) {
                redirectAttributes.addFlashAttribute("error", "ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return "redirect:/review/detail/" + reviewDTO.getReviewId();
            }
            
            // ì œëª© ê²€ì¦
            if (reviewDTO.getTitle() == null || reviewDTO.getTitle().trim().isEmpty()) {
                redirectAttributes.addFlashAttribute("error", "ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/edit/" + reviewDTO.getReviewId();
            }
            
            // ë‚´ìš© ê²€ì¦
            if (reviewDTO.getContent() == null || reviewDTO.getContent().trim().length() < 10) {
                redirectAttributes.addFlashAttribute("error", "ë‚´ìš©ì„ 10ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/edit/" + reviewDTO.getReviewId();
            }
            
            // í‰ì  ê²€ì¦
            if (reviewDTO.getRating() == null || reviewDTO.getRating() < 1 || reviewDTO.getRating() > 5) {
                redirectAttributes.addFlashAttribute("error", "í‰ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
                redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
                return "redirect:/review/edit/" + reviewDTO.getReviewId();
            }
            
            // ìˆ˜ì •í•  ìˆ˜ ì—†ëŠ” í•„ë“œë“¤ ê¸°ì¡´ ê°’ ìœ ì§€
            reviewDTO.setFacilityId(existingReview.getFacilityId());
            reviewDTO.setMemberId(existingReview.getMemberId());
            reviewDTO.setViewCount(existingReview.getViewCount());
            reviewDTO.setLikeCount(existingReview.getLikeCount());
            reviewDTO.setDislikeCount(existingReview.getDislikeCount());
            reviewDTO.setCreatedAt(existingReview.getCreatedAt());
            
            // ë¦¬ë·° ìˆ˜ì •
            reviewService.updateReview(reviewDTO);
            log.info("ë¦¬ë·° ìˆ˜ì • ì„±ê³µ - reviewId: {}", reviewDTO.getReviewId());
            
            redirectAttributes.addFlashAttribute("message", "ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return "redirect:/review/detail/" + reviewDTO.getReviewId();
        } catch (Exception e) {
            log.error("ë¦¬ë·° ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", reviewDTO.getReviewId(), e);
            redirectAttributes.addFlashAttribute("error", "ë¦¬ë·° ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
            return "redirect:/review/edit/" + reviewDTO.getReviewId();
        }
    }
    
    /**
     * ë¦¬ë·° ì‚­ì œ
     */
    @PostMapping("/delete/{id}")
    public String deleteReview(@PathVariable Long id, HttpSession session, RedirectAttributes redirectAttributes) {
        try {
            // ê¸°ì¡´ ë¦¬ë·° ì¡°íšŒ
            ReviewDTO existingReview = reviewService.getReviewById(id);
            if (existingReview == null) {
                redirectAttributes.addFlashAttribute("error", "ì‚­ì œí•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/review";
            }
            
            // ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
            if (!hasEditPermission(session, existingReview.getMemberId())) {
                redirectAttributes.addFlashAttribute("error", "ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return "redirect:/review/detail/" + id;
            }
            
            reviewService.deleteReview(id);
            redirectAttributes.addFlashAttribute("message", "ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
        } catch (Exception e) {
            log.error("ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            redirectAttributes.addFlashAttribute("error", "ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
        }
        
        return "redirect:/review";
    }
    
    /**
     * ë¦¬ë·° ì‹ ê³  API
     */
    @PostMapping("/report/{id}")
    @ResponseBody
    public Map<String, Object> reportReview(@PathVariable Long id, @RequestBody Map<String, String> request, HttpSession session) {
        Map<String, Object> result = new HashMap<>();
        
        try {
            String reason = request.get("reason");
            if (reason == null || reason.trim().isEmpty()) {
                result.put("success", false);
                result.put("message", "ì‹ ê³  ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return result;
            }
            
            // ë¦¬ë·° ì¡´ì¬ í™•ì¸
            ReviewDTO review = reviewService.getReviewById(id);
            if (review == null) {
                result.put("success", false);
                result.put("message", "ì‹ ê³ í•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            
            // ë³¸ì¸ ë¦¬ë·° ì‹ ê³  ë°©ì§€
            Long currentMemberId = getCurrentMemberId(session);
            if (review.getMemberId().equals(currentMemberId)) {
                result.put("success", false);
                result.put("message", "ë³¸ì¸ì´ ì‘ì„±í•œ ë¦¬ë·°ëŠ” ì‹ ê³ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            
            // TODO: ì‹¤ì œ ì‹ ê³  ì²˜ë¦¬ ë¡œì§ êµ¬í˜„
            // í˜„ì¬ëŠ” ë¡œê·¸ë§Œ ë‚¨ê¹€
            log.info("ë¦¬ë·° ì‹ ê³  ì ‘ìˆ˜ - reviewId: {}, reason: {}, reporter: {}", id, reason, currentMemberId);
            
            result.put("success", true);
            result.put("message", "ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ê²€í†  í›„ ì ì ˆí•œ ì¡°ì¹˜ë¥¼ ì·¨í•˜ê² ìŠµë‹ˆë‹¤.");
        } catch (Exception e) {
            log.error("ë¦¬ë·° ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            result.put("success", false);
            result.put("message", "ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        
        return result;
    }
    
    /**
     * ì¡°íšŒìˆ˜ ì¦ê°€ API
     */
    @PostMapping("/view/{id}")
    @ResponseBody
    public Map<String, Object> incrementViewCount(@PathVariable Long id) {
        Map<String, Object> result = new HashMap<>();
        
        try {
            reviewService.incrementViewCount(id);
            result.put("success", true);
        } catch (Exception e) {
            log.error("ì¡°íšŒìˆ˜ ì¦ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            result.put("success", false);
            result.put("message", "ì¡°íšŒìˆ˜ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        
        return result;
    }
    
    /**
     * ì‹œì„¤ë³„ ë¦¬ë·° ëª©ë¡ API
     */
    @GetMapping("/api/facility/{facilityId}")
    @ResponseBody
    public Map<String, Object> getReviewsByFacility(@PathVariable Long facilityId,
                                                   @RequestParam(defaultValue = "1") int page) {
        Map<String, Object> result = new HashMap<>();
        
        try {
            List<ReviewDTO> reviews = reviewService.getReviewsByFacilityId(facilityId);
            Double averageRating = reviewService.getAverageRating(facilityId);
            
            result.put("success", true);
            result.put("reviews", reviews);
            result.put("averageRating", averageRating);
            result.put("reviewCount", reviews.size());
        } catch (Exception e) {
            result.put("success", false);
            result.put("message", "ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        
        return result;
    }
    
    /**
     * ë¦¬ë·° ì¶”ì²œ API
     */
    @PostMapping("/like/{id}")
    @ResponseBody
    public Map<String, Object> likeReview(@PathVariable Long id) {
        Map<String, Object> result = new HashMap<>();
        
        try {
            reviewService.likeReview(id);
            
            // ì—…ë°ì´íŠ¸ëœ ë¦¬ë·° ì •ë³´ ì¡°íšŒ
            ReviewDTO review = reviewService.getReviewById(id);
            
            result.put("success", true);
            result.put("likeCount", review.getLikeCount());
            result.put("message", "ì¶”ì²œí•˜ì˜€ìŠµë‹ˆë‹¤.");
        } catch (Exception e) {
            result.put("success", false);
            result.put("message", "ì¶”ì²œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        
        return result;
    }
    
    /**
     * ë¦¬ë·° ë¹„ì¶”ì²œ API
     */
    @PostMapping("/dislike/{id}")
    @ResponseBody
    public Map<String, Object> dislikeReview(@PathVariable Long id) {
        Map<String, Object> result = new HashMap<>();
        
        try {
            reviewService.dislikeReview(id);
            
            // ì—…ë°ì´íŠ¸ëœ ë¦¬ë·° ì •ë³´ ì¡°íšŒ
            ReviewDTO review = reviewService.getReviewById(id);
            
            result.put("success", true);
            result.put("dislikeCount", review.getDislikeCount());
            result.put("message", "ë¹„ì¶”ì²œí•˜ì˜€ìŠµë‹ˆë‹¤.");
        } catch (Exception e) {
            result.put("success", false);
            result.put("message", "ë¹„ì¶”ì²œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        
        return result;
    }
    
    /**
     * í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID ì¡°íšŒ (ì„¸ì…˜ ê¸°ë°˜)
     */
    private Long getCurrentMemberId(HttpSession session) {
        return (Long) session.getAttribute("memberId");
    }
    
    /**
     * í˜„ì¬ ì‚¬ìš©ìê°€ ê´€ë¦¬ìì¸ì§€ í™•ì¸
     */
    private boolean isAdmin(HttpSession session) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        return loginMember != null && "ADMIN".equals(loginMember.getRole());
    }
    
    /**
     * ìˆ˜ì •/ì‚­ì œ ê¶Œí•œ í™•ì¸ (ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì)
     */
    private boolean hasEditPermission(HttpSession session, Long authorMemberId) {
        Long currentMemberId = getCurrentMemberId(session);
        return (currentMemberId != null && currentMemberId.equals(authorMemberId)) || isAdmin(session);
    }
}
````

## File: src/main/java/com/example/carelink/dto/FacilityDTO.java
````java
package com.example.carelink.dto;

import com.example.carelink.common.BaseDTO;
import lombok.Data;
import lombok.EqualsAndHashCode;
import lombok.NoArgsConstructor;
import lombok.AllArgsConstructor;

/**
 * ì‹œì„¤ ì •ë³´ë¥¼ ë‹´ëŠ” ë°ì´í„° ì „ì†¡ ê°ì²´ (DTO)
 * DB ìŠ¤í‚¤ë§ˆ ë° Mapperì˜ property ì´ë¦„ì— ë§ì¶° í•„ë“œëª…ì„ ì„¤ì •í•©ë‹ˆë‹¤.
 */
@Data
@EqualsAndHashCode(callSuper = true)
@NoArgsConstructor
@AllArgsConstructor
public class FacilityDTO extends BaseDTO {

    // DB ì»¬ëŸ¼ê³¼ ì¼ì¹˜í•˜ëŠ” í•„ë“œ (snake_caseëŠ” camelCaseë¡œ ë³€í™˜)
    private Long facilityId; // DB: facility_id
    private String facilityName; // DB: facility_name
    private String facilityType; // DB: facility_type
    private String address; // DB: address
    private String detailAddress; // DB: detail_address
    private String phone; // DB: phone_number (DB ìŠ¤í‚¤ë§ˆì— ë§ì¶° 'phone'ìœ¼ë¡œ í†µì¼)
    private Double longitude; // DB: longitude
    private Double latitude; // DB: latitude
    private String description;
    private String facilityImage; // DB: facility_image
    private String facilityImageAltText; // DB: facility_image_alt_text (SEO ìµœì í™”ìš©)
    private String homepage;
    private Integer capacity;
    private Integer currentOccupancy;
    private String operatingHours;
    private String features;
    private Boolean isApproved; // DB: is_approved
    private Boolean isDeleted; // DB: is_deleted
    private String approvalStatus; // DB: approval_status
    private String rejectionReason; // DB: rejection_reason (ê´€ë¦¬ììš©)
    private Long registeredMemberId; // DB: registered_member_id
    private String registeredMemberName; // DB: registered_member_name
    private String registeredUserName; // DB: registered_user_name (ê´€ë¦¬ììš© - ë¡œê·¸ì¸ ID)
    private Double averageRating; // DB: average_rating (ìŠ¤í‚¤ë§ˆì— ì¡´ì¬)
    private Integer reviewCount; // DB: review_count (ìŠ¤í‚¤ë§ˆì— ì¡´ì¬)
    private Integer gradeRating; // DB: grade_rating (ìŠ¤í‚¤ë§ˆì— ì¡´ì¬)

    // ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í•„ë“œ (DB ì»¬ëŸ¼ê³¼ ì§ì ‘ ë§¤í•‘ë˜ì§€ ì•ŠìŒ)
    private String region;
    private Double swLat;
    private Double swLng;
    private Double neLat;
    private Double neLng;

    // ìƒíƒœ ì •ë³´ (UI í‘œì‹œìš©)
    private String status; // ì‹œì„¤ ìƒíƒœ (ì •ìƒ, ì‚­ì œë¨, ìŠ¹ì¸ëŒ€ê¸°)

    // ì‹œì„¤ ìƒíƒœ í™•ì¸ ë©”ì„œë“œ
    public boolean isNormalStatus() {
        return "ì •ìƒ".equals(status);
    }

    public boolean isDeletedStatus() {
        return "ì‚­ì œë¨".equals(status);
    }

    public boolean isPendingStatus() {
        return "ìŠ¹ì¸ëŒ€ê¸°".equals(status);
    }

    // ì‹œì„¤ ìƒíƒœ ë©”ì‹œì§€ ë°˜í™˜
    public String getStatusMessage() {
        if (isDeletedStatus()) {
            return "ì‚­ì œëœ ì‹œì„¤ì…ë‹ˆë‹¤.";
        } else if (isPendingStatus()) {
            return "ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ì‹œì„¤ì…ë‹ˆë‹¤.";
        }
        return "";
    }
}
````

## File: src/main/java/com/example/carelink/dto/MemberDTO.java
````java
package com.example.carelink.dto;

import com.example.carelink.common.BaseDTO;
import com.example.carelink.validation.groups.OnFacilityJoin;
import lombok.Data;
import lombok.EqualsAndHashCode;
import org.springframework.web.multipart.MultipartFile; // MultipartFile import ìœ ì§€

import javax.validation.constraints.Email;
import javax.validation.constraints.NotBlank;
import javax.validation.constraints.Pattern;
import javax.validation.constraints.Size; // Size ì–´ë…¸í…Œì´ì…˜ ì¶”ê°€ (ì œê³µí•´ì£¼ì‹  ë‚´ìš©ì— í¬í•¨ë¨)

/**
 * íšŒì› ì •ë³´ DTO
 * íŒ€ì› A ë‹´ë‹¹: íšŒì› ê´€ë¦¬ ê¸°ëŠ¥ (ë¡œê·¸ì¸, íšŒì›ê°€ì…)
 */
@Data
@EqualsAndHashCode(callSuper = true)
public class MemberDTO extends BaseDTO {

    private Long memberId;        // íšŒì› ID (ìë™ì¦ê°€)

    @NotBlank(message = "ì‚¬ìš©ì IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.")
    @Pattern(regexp = "^[a-zA-Z0-9]{4,20}$", message = "ì‚¬ìš©ì IDëŠ” 4-20ìì˜ ì˜ë¬¸, ìˆ«ìë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.")
    private String userId;        // ì‚¬ìš©ì ID (ë¡œê·¸ì¸ìš©)

    // ë¹„ë°€ë²ˆí˜¸ëŠ” íšŒì›ê°€ì… ì‹œì—ë§Œ @NotBlankë¥¼ ì ìš©í•˜ê³ , íšŒì› ì •ë³´ ìˆ˜ì • ì‹œì—ëŠ” ì ìš©í•˜ì§€ ì•Šë„ë¡
    // ë³„ë„ì˜ DTOë¥¼ ë§Œë“¤ê±°ë‚˜ @Validated ê·¸ë£¹ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ìœ ì—°í•©ë‹ˆë‹¤.
    // ì—¬ê¸°ì„œëŠ” ì¼ë‹¨ ê¸°ë³¸ ì„¤ì •ë§Œ ìœ ì§€í•˜ë©°, í•„ìš” ì‹œ ì»¨íŠ¸ë¡¤ëŸ¬ë‚˜ ì„œë¹„ìŠ¤ì—ì„œ ì¡°ê±´ë¶€ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    @NotBlank(message = "ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.")
    @Pattern(regexp = "^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d@$!%*#?&]{8,20}$",
            message = "ë¹„ë°€ë²ˆí˜¸ëŠ” 8-20ìì˜ ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ 1ê°œ ì´ìƒ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.")
    private String password;      // ë¹„ë°€ë²ˆí˜¸

    @NotBlank(message = "ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.")
    @Size(max = 50, message = "ì´ë¦„ì€ 50ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.") // ì˜ˆì‹œ: ì´ë¦„ ê¸¸ì´ ì œí•œ ì¶”ê°€
    private String name;          // ì´ë¦„

    @NotBlank(message = "ì´ë©”ì¼ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.")
    @Email(message = "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
    @Size(max = 100, message = "ì´ë©”ì¼ì€ 100ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.") // ì˜ˆì‹œ: ì´ë©”ì¼ ê¸¸ì´ ì œí•œ ì¶”ê°€
    private String email;         // ì´ë©”ì¼ (í•„ìˆ˜ì‚¬í•­)

    // íœ´ëŒ€í° ë²ˆí˜¸ íŒ¨í„´ ìˆ˜ì •: ë¹ˆ ë¬¸ìì—´("")ë„ í—ˆìš©í•˜ë„ë¡ ^$| ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
    @Pattern(regexp = "^$|^01(?:0|1|[6-9])-(?:\\d{3}|\\d{4})-\\d{4}$",
            message = "ì˜¬ë°”ë¥¸ íœ´ëŒ€í° ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
    private String phone;

    private String role;          // íšŒì› ì—­í•  (USER, FACILITY, ADMIN)

    // ì‹œì„¤íšŒì› ê°€ì… ì‹œì—ë§Œ addressê°€ í•„ìˆ˜ì„ì„ ì§€ì • (OnFacilityJoin ê·¸ë£¹ì— ì†í•  ë•Œë§Œ ê²€ì‚¬)
    @NotBlank(message = "ì‹œì„¤ ì£¼ì†ŒëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.", groups = OnFacilityJoin.class)
    private String address;       // ì£¼ì†Œ (DDLì— ë”°ë¼ VARCHAR ê¸¸ì´ ì œí•œ ì¶”ê°€ ê³ ë ¤)

    private String profileImage;  // í”„ë¡œí•„ ì´ë¯¸ì§€ ê²½ë¡œ (DBì— ì €ì¥ë  URL)
    private String profileImageAltText;  // í”„ë¡œí•„ ì´ë¯¸ì§€ alt í…ìŠ¤íŠ¸ (SEO ìµœì í™”ìš©)
    
    // ì‹œì„¤íšŒì› ì¶”ê°€ ì •ë³´ (facility í…Œì´ë¸”ì— ì €ì¥ë  ì •ë³´)
    private String facilityName;     // ì‹œì„¤ëª…
    private String facilityType;     // ì‹œì„¤ ìœ í˜• (NURSING_HOME, HOSPITAL, DAY_CARE)
    private String facilityAddress;  // ì‹œì„¤ ì£¼ì†Œ (ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ìœ¼ë¡œ ì…ë ¥)
    private String detailAddress;    // ìƒì„¸ ì£¼ì†Œ
    private String facilityPhone;    // ì‹œì„¤ ì „í™”ë²ˆí˜¸
    private String description;      // ì‹œì„¤ ì„¤ëª…
    private String homepage;         // í™ˆí˜ì´ì§€ URL
    private Integer capacity;        // ìˆ˜ìš© ì¸ì›
    private String operatingHours;   // ìš´ì˜ ì‹œê°„
    private String features;         // ì‹œì„¤ íŠ¹ì§•
    private Double latitude;         // ìœ„ë„ (ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ìœ¼ë¡œ ìë™ ì„¤ì •)
    private Double longitude;        // ê²½ë„ (ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ìœ¼ë¡œ ìë™ ì„¤ì •)

    // DB í…Œì´ë¸”ì˜ is_active ì»¬ëŸ¼ê³¼ ë§¤í•‘
    private Boolean isActive;     // ê³„ì • í™œì„±í™” ì—¬ë¶€ (Booleanìœ¼ë¡œ ë³€ê²½í•˜ì—¬ null í—ˆìš©, ê¸°ë³¸ê°’ì€ DBì—ì„œ ì„¤ì •)

    // ë…¼ë¦¬ì  ì‚­ì œ ì—¬ë¶€ (DDLì˜ is_deleted ì»¬ëŸ¼ê³¼ ë§¤í•‘)
    private Boolean isDeleted;    // ê³„ì • ì‚­ì œ ì—¬ë¶€ (true: ì‚­ì œë¨, false: ìœ ì§€ë¨)

    // ë¹„ë°€ë²ˆí˜¸ í™•ì¸ìš© (DBì— ì €ì¥ë˜ì§€ ì•ŠìŒ, íšŒì›ê°€ì…/ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í¼ì—ì„œë§Œ ì‚¬ìš©)
    private transient String passwordConfirm;
    // ë¡œê·¸ì¸ ì‹¤íŒ¨ íšŸìˆ˜
    private int loginFailCount;

    // ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„
    private java.time.LocalDateTime lastLoginAt;

    // í”„ë¡œí•„ ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œìš© (DBì— ì €ì¥ë˜ì§€ ì•ŠëŠ” í•„ë“œ, DTOê°€ í¼ ë°ì´í„°ë¥¼ ë°›ì„ ë•Œ ì‚¬ìš©)
    // myinfo.htmlì˜ <input type="file" name="profileImageFile"> ì™€ ë§¤í•‘ë©ë‹ˆë‹¤.
    private transient MultipartFile profileImageFile; // íŒŒì¼ ìì²´ë¥¼ ë°›ê¸° ìœ„í•œ í•„ë“œ
}
````

## File: src/main/java/com/example/carelink/service/FacilityImageService.java
````java
package com.example.carelink.service;

import com.example.carelink.dao.FacilityImageMapper;
import com.example.carelink.dao.FacilityMapper;
import com.example.carelink.dto.FacilityImageDTO;
import com.example.carelink.common.Constants;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.web.multipart.MultipartFile;

import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.UUID;

@Service
public class FacilityImageService {

    private final FacilityImageMapper facilityImageMapper;
    private final FacilityMapper facilityMapper;
    private static final Logger log = LoggerFactory.getLogger(FacilityImageService.class);

    @Autowired
    public FacilityImageService(FacilityImageMapper facilityImageMapper, FacilityMapper facilityMapper) {
        this.facilityImageMapper = facilityImageMapper;
        this.facilityMapper = facilityMapper;
    }

    /**
     * ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì¡°íšŒ
     */
    @Transactional(readOnly = true)
    public List<FacilityImageDTO> getImagesByFacilityId(Long facilityId) {
        log.info("ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - facilityId: {}", facilityId);
        List<FacilityImageDTO> images = facilityImageMapper.getImagesByFacilityId(facilityId);
        log.info("ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - facilityId: {}, ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, images.size());
        return images;
    }

    /**
     * ì‹œì„¤ì˜ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ
     */
    @Transactional(readOnly = true)
    public FacilityImageDTO getMainImageByFacilityId(Long facilityId) {
        log.info("ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ - facilityId: {}", facilityId);
        return facilityImageMapper.getMainImageByFacilityId(facilityId);
    }

    /**
     * ë‹¤ì¤‘ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ (5ì¥ ì œí•œ ì ìš©)
     */
    @Transactional
    public void saveFacilityImages(Long facilityId, List<MultipartFile> imageFiles, List<String> altTexts) {
        try {
            log.info("ğŸ“¸ ë‹¤ì¤‘ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì‹œì‘ - facilityId: {}, ìš”ì²­ ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, imageFiles.size());
            
            // ê¸°ì¡´ ì´ë¯¸ì§€ ê°œìˆ˜ í™•ì¸
            int existingImageCount = facilityImageMapper.countImagesByFacilityId(facilityId);
            
            // ì €ì¥í•  ì´ë¯¸ì§€ ìˆ˜ ê³„ì‚° (ê¸°ì¡´ + ìƒˆë¡œìš´ ì´ë¯¸ì§€ê°€ 5ì¥ì„ ë„˜ì§€ ì•Šë„ë¡)
            List<MultipartFile> validFiles = new ArrayList<>();
            for (MultipartFile file : imageFiles) {
                if (!file.isEmpty() && validFiles.size() + existingImageCount < Constants.MAX_FACILITY_IMAGES) {
                    validateImageFile(file);
                    validFiles.add(file);
                }
            }
            
            if (validFiles.isEmpty()) {
                throw new IllegalArgumentException("ì €ì¥í•  ìœ íš¨í•œ ì´ë¯¸ì§€ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.");
            }
            
            if (existingImageCount + validFiles.size() > Constants.MAX_FACILITY_IMAGES) {
                log.warn("âš ï¸ ì¼ë¶€ ì´ë¯¸ì§€ëŠ” 5ì¥ ì œí•œìœ¼ë¡œ ì¸í•´ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê¸°ì¡´: {}ì¥, ìš”ì²­: {}ì¥, ì €ì¥ ê°€ëŠ¥: {}ì¥", 
                    existingImageCount, imageFiles.size(), validFiles.size());
            }
            
            log.info("ğŸ“Š ì´ë¯¸ì§€ ì €ì¥ ê³„íš - ê¸°ì¡´: {}ì¥, ìƒˆë¡œ ì €ì¥: {}ì¥, ì´: {}ì¥", 
                existingImageCount, validFiles.size(), existingImageCount + validFiles.size());
            
            for (int i = 0; i < validFiles.size(); i++) {
                MultipartFile file = validFiles.get(i);
                String altText = (altTexts != null && i < altTexts.size()) ? altTexts.get(i) : null;
                
                // íŒŒì¼ ì €ì¥
                String imagePath = saveImageFile(file, facilityId.toString(), existingImageCount + i);
                
                // ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
                FacilityImageDTO imageDTO = new FacilityImageDTO();
                imageDTO.setFacilityId(facilityId);
                imageDTO.setImagePath(imagePath);
                imageDTO.setImageAltText(altText);
                imageDTO.setImageOrder(existingImageCount + i);
                // ì „ì²´ ì²« ë²ˆì§¸ ì´ë¯¸ì§€ì¸ ê²½ìš°ì—ë§Œ ë©”ì¸ìœ¼ë¡œ ì„¤ì •
                imageDTO.setIsMainImage(existingImageCount == 0 && i == 0);
                
                facilityImageMapper.insertFacilityImage(imageDTO);
                log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ - order: {}, path: {}", existingImageCount + i, imagePath);
            }
            
            // ì‹œì„¤ í…Œì´ë¸”ì˜ ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸
            updateFacilityMainImageInfo(facilityId);
            
            log.info("ğŸ‰ ë‹¤ì¤‘ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ - facilityId: {}, ì´ {}ì¥ ì €ì¥", facilityId, validFiles.size());
            
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ë‹¨ì¼ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ (5ì¥ ì œí•œ ì ìš©)
     */
    @Transactional
    public FacilityImageDTO saveSingleFacilityImage(Long facilityId, MultipartFile imageFile, String altText, Integer imageOrder) {
        return saveSingleFacilityImage(facilityId, imageFile, altText, imageOrder, null);
    }
    
    /**
     * ë‹¨ì¼ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ (ì‚¬ìš©ì ì§€ì • íŒŒì¼ëª… ì§€ì›)
     */
    @Transactional
    public FacilityImageDTO saveSingleFacilityImage(Long facilityId, MultipartFile imageFile, String altText, Integer imageOrder, String customFileName) {
        try {
            log.info("ğŸ“¸ ë‹¨ì¼ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì‹œì‘ - facilityId: {}, order: {}, customFileName: '{}'", facilityId, imageOrder, customFileName);
            
            if (imageFile.isEmpty()) {
                throw new IllegalArgumentException("ì—…ë¡œë“œëœ ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
            }
            
            // ê¸°ì¡´ ì´ë¯¸ì§€ ê°œìˆ˜ í™•ì¸ (5ì¥ ì œí•œ)
            int existingImageCount = facilityImageMapper.countImagesByFacilityId(facilityId);
            if (existingImageCount >= Constants.MAX_FACILITY_IMAGES) {
                throw new IllegalArgumentException(String.format("ì‹œì„¤ ì´ë¯¸ì§€ëŠ” ìµœëŒ€ %dì¥ê¹Œì§€ë§Œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì¬ %dì¥ ë“±ë¡ë¨", 
                    Constants.MAX_FACILITY_IMAGES, existingImageCount));
            }
            
            // íŒŒì¼ í™•ì¥ì ê²€ì¦
            validateImageFile(imageFile);
            
            // íŒŒì¼ ì €ì¥ (ì‚¬ìš©ì ì§€ì • íŒŒì¼ëª… ì ìš©)
            String imagePath = saveImageFileWithCustomName(imageFile, facilityId.toString(), 
                imageOrder != null ? imageOrder : existingImageCount, customFileName);
            
            // ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
            FacilityImageDTO imageDTO = new FacilityImageDTO();
            imageDTO.setFacilityId(facilityId);
            imageDTO.setImagePath(imagePath);
            imageDTO.setImageAltText(altText);
            imageDTO.setImageOrder(imageOrder != null ? imageOrder : existingImageCount);
            // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ì¸ ê²½ìš° ìë™ìœ¼ë¡œ ë©”ì¸ ì´ë¯¸ì§€ë¡œ ì„¤ì •
            imageDTO.setIsMainImage(existingImageCount == 0);
            
            facilityImageMapper.insertFacilityImage(imageDTO);
            log.info("âœ… facility_images í…Œì´ë¸”ì— ì €ì¥ ì™„ë£Œ - imageId: {}, path: {}, í˜„ì¬ ì´ {}ì¥", 
                imageDTO.getImageId(), imagePath, existingImageCount + 1);
            
            // ì‹œì„¤ í…Œì´ë¸”ì˜ ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ë„ ì—…ë°ì´íŠ¸
            updateFacilityMainImageInfo(facilityId);
            
            return imageDTO;
            
        } catch (Exception e) {
            log.error("âŒ ë‹¨ì¼ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ì‹œì„¤ í…Œì´ë¸”ì˜ ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸
     */
    private void updateFacilityMainImageInfo(Long facilityId) {
        try {
            // ì‹œì„¤ì˜ ì´ ì´ë¯¸ì§€ ìˆ˜ ì¡°íšŒ
            int imageCount = facilityImageMapper.countImagesByFacilityId(facilityId);
            
            // ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ
            FacilityImageDTO mainImage = facilityImageMapper.getMainImageByFacilityId(facilityId);
            String mainImagePath = mainImage != null ? mainImage.getImagePath() : null;
            
            log.info("ğŸ”„ ì‹œì„¤ í…Œì´ë¸” ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ ì‹œì‘ - facilityId: {}, imageCount: {}, mainImagePath: {}", 
                    facilityId, imageCount, mainImagePath);
            
            // ì‹œì„¤ í…Œì´ë¸”ì˜ facility_image, image_count ì—…ë°ì´íŠ¸
            int updateResult = facilityMapper.updateFacilityMainImage(facilityId, mainImagePath, imageCount);
            
            if (updateResult > 0) {
                log.info("âœ… ì‹œì„¤ í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì„±ê³µ - facilityId: {}, ì—…ë°ì´íŠ¸ëœ í–‰: {}", facilityId, updateResult);
            } else {
                log.warn("âš ï¸ ì‹œì„¤ í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ - facilityId: {}, ì—…ë°ì´íŠ¸ëœ í–‰: {}", facilityId, updateResult);
            }
            
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ í…Œì´ë¸” ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
            throw new RuntimeException("ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ë©”ì„œë“œ (ì‚¬ìš©ì ì§€ì • íŒŒì¼ëª… ì§€ì›)
     */
    private String saveImageFileWithCustomName(MultipartFile file, String facilityId, int index, String customFileName) {
        try {
            // ë¡œì»¬ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ì‚¬ìš©
            String uploadDir = Constants.FACILITY_UPLOAD_PATH;
            File uploadDirFile = new File(uploadDir);
            if (!uploadDirFile.exists()) {
                boolean created = uploadDirFile.mkdirs();
                log.info("ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} - {}", uploadDir, created ? "ì„±ê³µ" : "ì‹¤íŒ¨");
            }
            
            // í™•ì¥ì ë¨¼ì € ì¶”ì¶œ (í”„ë¡œí•„ ì´ë¯¸ì§€ ë°©ì‹ ì ìš©)
            String originalFilename = file.getOriginalFilename();
            String extension = "";
            String baseName = "";
            
            if (originalFilename != null && originalFilename.contains(".")) {
                extension = originalFilename.substring(originalFilename.lastIndexOf("."));
                baseName = originalFilename.substring(0, originalFilename.lastIndexOf("."));
            } else if (originalFilename != null) {
                baseName = originalFilename;
                extension = ".jpg"; // ê¸°ë³¸ í™•ì¥ì
            }
            
            String finalFileName;
            
            if (customFileName != null && !customFileName.trim().isEmpty()) {
                // ì‚¬ìš©ì ì§€ì • íŒŒì¼ëª…ì—ì„œë„ í™•ì¥ì ë¶„ë¦¬
                String userFileName = customFileName.trim();
                String userBaseName = userFileName;
                String userExtension = extension; // ì›ë³¸ íŒŒì¼ì˜ í™•ì¥ì ìœ ì§€
                
                // ì‚¬ìš©ì íŒŒì¼ëª…ì— í™•ì¥ìê°€ í¬í•¨ëœ ê²½ìš° ë¶„ë¦¬
                if (userFileName.contains(".")) {
                    userBaseName = userFileName.substring(0, userFileName.lastIndexOf("."));
                    userExtension = userFileName.substring(userFileName.lastIndexOf("."));
                }
                
                // í•œê¸€ íŒŒì¼ëª…ì„ ì˜ë¬¸ìœ¼ë¡œ ë³€í™˜ (í™•ì¥ì ì œì™¸)
                String englishBaseName = convertKoreanToEnglish(userBaseName);
                String cleanBaseName = sanitizeFilename(englishBaseName);
                
                // ìµœì¢… íŒŒì¼ëª… ìƒì„± (í™•ì¥ìë¥¼ ë§¨ ë§ˆì§€ë§‰ì— ì¶”ê°€)
                finalFileName = String.format("facility_%s_%d_%s_%s%s", 
                        facilityId, index, cleanBaseName, 
                        UUID.randomUUID().toString().substring(0, 8), userExtension);
                log.info("ğŸ“ ì‚¬ìš©ì ì§€ì • íŒŒì¼ëª… ì ìš©: '{}' â†’ '{}'", customFileName, finalFileName);
            } else {
                // ê¸°ë³¸ íŒŒì¼ëª… ë¡œì§ ì‚¬ìš©
                return saveImageFile(file, facilityId, index);
            }
            
            // íŒŒì¼ ì €ì¥
            File savedFile = new File(uploadDir + finalFileName);
            file.transferTo(savedFile);
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì™„ë£Œ: {}", savedFile.getAbsolutePath());
            
            // ì›¹ ê²½ë¡œ ë°˜í™˜
            return "/uploads/facility/" + finalFileName;
            
        } catch (IOException e) {
            log.error("ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}, index={}, customFileName={}", facilityId, index, customFileName, e);
            throw new RuntimeException("ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ë©”ì„œë“œ (ê¸°ë³¸)
     */
    private String saveImageFile(MultipartFile file, String facilityId, int index) {
        try {
            // ë¡œì»¬ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ì‚¬ìš©
            String uploadDir = Constants.FACILITY_UPLOAD_PATH;
            File uploadDirFile = new File(uploadDir);
            if (!uploadDirFile.exists()) {
                boolean created = uploadDirFile.mkdirs();
                log.info("ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} - {}", uploadDir, created ? "ì„±ê³µ" : "ì‹¤íŒ¨");
            }
            
            // íŒŒì¼ëª… ìƒì„± (í•œê¸€ íŒŒì¼ëª… ì˜ë¬¸ ë³€í™˜ í¬í•¨)
            String originalFilename = file.getOriginalFilename();
            String extension = "";
            String baseName = "";
            
            if (originalFilename != null && originalFilename.contains(".")) {
                extension = originalFilename.substring(originalFilename.lastIndexOf("."));
                baseName = originalFilename.substring(0, originalFilename.lastIndexOf("."));
            } else if (originalFilename != null) {
                baseName = originalFilename;
            }
            
            // í•œê¸€ íŒŒì¼ëª…ì„ ì˜ë¬¸ìœ¼ë¡œ ë³€í™˜
            String englishBaseName = convertKoreanToEnglish(baseName);
            String cleanBaseName = sanitizeFilename(englishBaseName);
            
            // ìµœì¢… íŒŒì¼ëª… ìƒì„±
            String savedFilename;
            if (!cleanBaseName.isEmpty() && !cleanBaseName.equals("facility_image")) {
                savedFilename = String.format("facility_%s_%d_%s_%s%s", 
                        facilityId, index, cleanBaseName, UUID.randomUUID().toString().substring(0, 8), extension);
            } else {
                savedFilename = String.format("facility_%s_%d_%s%s", 
                        facilityId, index, UUID.randomUUID().toString(), extension);
            }
            
            log.info("ğŸ“ íŒŒì¼ëª… ë³€í™˜: '{}' â†’ '{}'", originalFilename, savedFilename);
            
            // íŒŒì¼ ì €ì¥
            File savedFile = new File(uploadDir + savedFilename);
            file.transferTo(savedFile);
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì™„ë£Œ: {}", savedFile.getAbsolutePath());
            
            // ì›¹ ê²½ë¡œ ë°˜í™˜
            return "/uploads/facility/" + savedFilename;
            
        } catch (IOException e) {
            log.error("ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}, index={}", facilityId, index, e);
            throw new RuntimeException("ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½
     */
    @Transactional
    public void updateMainImage(Long facilityId, Long imageId) {
        try {
            log.info("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ ì‹œì‘ - facilityId: {}, imageId: {}", facilityId, imageId);
            
            // ê¸°ì¡´ ë©”ì¸ ì´ë¯¸ì§€ í•´ì œ
            facilityImageMapper.clearMainImages(facilityId);
            
            // ìƒˆ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •
            int result = facilityImageMapper.updateMainImage(facilityId, imageId);
            if (result == 0) {
                throw new RuntimeException("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            }
            
            log.info("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ ì™„ë£Œ - facilityId: {}, imageId: {}", facilityId, imageId);
            
        } catch (Exception e) {
            log.error("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}, imageId: {}", facilityId, imageId, e);
            throw new RuntimeException("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ ì™„ì „ ì‚­ì œ (DB + íŒŒì¼ ì‹œìŠ¤í…œ)
     */
    @Transactional
    public boolean deleteFacilityImage(Long imageId) {
        try {
            log.info("ğŸ—‘ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ì™„ì „ ì‚­ì œ ì‹œì‘ - imageId: {}", imageId);
            
            // 1. ë¨¼ì € ì´ë¯¸ì§€ ì •ë³´ ì¡°íšŒ (íŒŒì¼ ê²½ë¡œ í™•ì¸ìš©)
            FacilityImageDTO imageToDelete = facilityImageMapper.getImageById(imageId);
            if (imageToDelete == null) {
                log.warn("âš ï¸ ì‚­ì œí•  ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ - imageId: {}", imageId);
                return false;
            }
            
            String imagePath = imageToDelete.getImagePath();
            log.info("ğŸ“ ì‚­ì œ ëŒ€ìƒ íŒŒì¼: {}", imagePath);
            
            // 2. ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚­ì œ
            int result = facilityImageMapper.deleteFacilityImage(imageId);
            boolean dbDeleteSuccess = result > 0;
            
            if (dbDeleteSuccess) {
                log.info("âœ… DBì—ì„œ ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - imageId: {}", imageId);
                
                // 3. íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ì‹¤ì œ íŒŒì¼ ì‚­ì œ
                boolean fileDeleteSuccess = deleteImageFile(imagePath);
                
                if (fileDeleteSuccess) {
                    log.info("âœ… íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - path: {}", imagePath);
                } else {
                    log.warn("âš ï¸ íŒŒì¼ ì‚­ì œ ì‹¤íŒ¨í•˜ì˜€ì§€ë§Œ DB ì‚­ì œëŠ” ì„±ê³µ - path: {}", imagePath);
                }
                
                return true; // DB ì‚­ì œê°€ ì„±ê³µí•˜ë©´ ì„±ê³µìœ¼ë¡œ ê°„ì£¼
                
            } else {
                log.warn("âŒ DBì—ì„œ ì´ë¯¸ì§€ ì‚­ì œ ì‹¤íŒ¨ - imageId: {} (ê²°ê³¼: {})", imageId, result);
                return false;
            }
            
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - imageId: {}", imageId, e);
            return false;
        }
    }
    
    /**
     * íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ì´ë¯¸ì§€ íŒŒì¼ ì‚­ì œ
     */
    private boolean deleteImageFile(String imagePath) {
        try {
            if (imagePath == null || imagePath.trim().isEmpty()) {
                log.warn("âš ï¸ ì‚­ì œí•  íŒŒì¼ ê²½ë¡œê°€ ë¹„ì–´ìˆìŒ");
                return false;
            }
            
            // ì›¹ ê²½ë¡œë¥¼ ì‹¤ì œ íŒŒì¼ ì‹œìŠ¤í…œ ê²½ë¡œë¡œ ë³€í™˜
            String actualFilePath;
            if (imagePath.startsWith("/uploads/facility/")) {
                String filename = imagePath.substring("/uploads/facility/".length());
                actualFilePath = Constants.FACILITY_UPLOAD_PATH + filename;
            } else {
                log.warn("âš ï¸ ì˜ˆìƒì¹˜ ëª»í•œ íŒŒì¼ ê²½ë¡œ í˜•ì‹: {}", imagePath);
                return false;
            }
            
            log.info("ğŸ” ì‹¤ì œ íŒŒì¼ ê²½ë¡œ: {}", actualFilePath);
            
            File fileToDelete = new File(actualFilePath);
            
            if (fileToDelete.exists()) {
                boolean deleted = fileToDelete.delete();
                if (deleted) {
                    log.info("âœ… íŒŒì¼ ì‚­ì œ ì„±ê³µ: {}", actualFilePath);
                    return true;
                } else {
                    log.error("âŒ íŒŒì¼ ì‚­ì œ ì‹¤íŒ¨: {}", actualFilePath);
                    return false;
                }
            } else {
                log.warn("âš ï¸ ì‚­ì œí•  íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ: {}", actualFilePath);
                return true; // íŒŒì¼ì´ ì—†ìœ¼ë©´ ì‚­ì œëœ ê²ƒìœ¼ë¡œ ê°„ì£¼
            }
            
        } catch (Exception e) {
            log.error("âŒ íŒŒì¼ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - imagePath: {}", imagePath, e);
            return false;
        }
    }

    /**
     * ì‹œì„¤ì˜ ì´ë¯¸ì§€ ê°œìˆ˜ ì¡°íšŒ
     */
    @Transactional(readOnly = true)
    public int getImageCountByFacilityId(Long facilityId) {
        return facilityImageMapper.countImagesByFacilityId(facilityId);
    }
    
    /**
     * ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • (boolean ë°˜í™˜)
     */
    @Transactional
    public boolean setMainImage(Long facilityId, Long imageId) {
        try {
            log.info("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì‹œì‘ - facilityId: {}, imageId: {}", facilityId, imageId);
            
            // ê¸°ì¡´ ë©”ì¸ ì´ë¯¸ì§€ í•´ì œ
            facilityImageMapper.clearMainImages(facilityId);
            
            // ìƒˆ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •
            int result = facilityImageMapper.updateMainImage(facilityId, imageId);
            boolean success = result > 0;
            
            if (success) {
                log.info("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì™„ë£Œ - facilityId: {}, imageId: {}", facilityId, imageId);
            } else {
                log.warn("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì‹¤íŒ¨ - facilityId: {}, imageId: {} (ê²°ê³¼: {})", facilityId, imageId, result);
            }
            
            return success;
            
        } catch (Exception e) {
            log.error("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}, imageId: {}", facilityId, imageId, e);
            return false;
        }
    }
    
    /**
     * íŠ¹ì • ì´ë¯¸ì§€ IDë¡œ ì´ë¯¸ì§€ ì¡°íšŒ (ê¶Œí•œ í™•ì¸ìš©)
     */
    @Transactional(readOnly = true)
    public FacilityImageDTO getImageById(Long imageId) {
        log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì¡°íšŒ - imageId: {}", imageId);
        return facilityImageMapper.getImageById(imageId);
    }
    
    /**
     * ëª¨ë“  ì´ë¯¸ì§€ ì¡°íšŒ (ì„ì‹œ - ë” ë‚˜ì€ ë°©ë²•ìœ¼ë¡œ ëŒ€ì²´ ì˜ˆì •)
     */
    @Transactional(readOnly = true)
    public List<FacilityImageDTO> getAllImages() {
        // ì„ì‹œ êµ¬í˜„: ì‹¤ì œë¡œëŠ” íŠ¹ì • ì‹œì„¤ì˜ ì´ë¯¸ì§€ë§Œ ì¡°íšŒí•˜ëŠ” ê²ƒì´ ì¢‹ìŒ
        log.info("ëª¨ë“  ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ (ì„ì‹œ)");
        // ì„ì‹œë¡œ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜í•˜ê³  getImageById ì‚¬ìš©
        return java.util.Collections.emptyList();
    }
    
    /**
     * í•œê¸€ íŒŒì¼ëª…ì„ ì˜ë¬¸ìœ¼ë¡œ ë³€í™˜ (ì‹¤ì œ ë²ˆì—­ + ë¡œë§ˆì ë³€í™˜)
     */
    private String convertKoreanToEnglish(String korean) {
        if (korean == null || korean.trim().isEmpty()) {
            return "facility_image";
        }
        
        String input = korean.toLowerCase().trim();
        String result = input;
        
        // 1ë‹¨ê³„: ì˜ë¯¸ ìˆëŠ” í•œê¸€ í‚¤ì›Œë“œë¥¼ ì˜ë¬¸ìœ¼ë¡œ ë²ˆì—­
        java.util.Map<String, String> koreanToEnglish = java.util.Map.ofEntries(
            // ì‹œì„¤ ì¢…ë¥˜
            java.util.Map.entry("ì‹œì„¤", "facility"),
            java.util.Map.entry("ìš”ì–‘ì›", "nursing_home"),
            java.util.Map.entry("ìš”ì–‘ë³‘ì›", "nursing_hospital"),
            java.util.Map.entry("ë³‘ì›", "hospital"),
            java.util.Map.entry("ì˜ì›", "clinic"),
            java.util.Map.entry("ë°ì´ì¼€ì–´", "daycare"),
            java.util.Map.entry("ì„¼í„°", "center"),
            java.util.Map.entry("í™ˆ", "home"),
            java.util.Map.entry("ì¼€ì–´", "care"),
            
            // ê³µê°„ (ê¸°ë³¸)
            java.util.Map.entry("ì™¸ê´€", "exterior"),
            java.util.Map.entry("ì™¸ë¶€", "exterior"), 
            java.util.Map.entry("ê±´ë¬¼", "building"),
            java.util.Map.entry("ì…êµ¬", "entrance"),
            java.util.Map.entry("í˜„ê´€", "entrance"),
            java.util.Map.entry("ë‚´ë¶€", "interior"),
            java.util.Map.entry("ë¡œë¹„", "lobby"),
            java.util.Map.entry("ë³µë„", "corridor"),
            java.util.Map.entry("í™€", "hall"),
            
            // ê³µê°„ (ê±°ì£¼)
            java.util.Map.entry("ë°©", "room"),
            java.util.Map.entry("ê°ì‹¤", "room"),
            java.util.Map.entry("ì¹¨ì‹¤", "bedroom"),
            java.util.Map.entry("ìƒí™œì‹¤", "living_room"),
            java.util.Map.entry("íœ´ê²Œì‹¤", "rest_room"),
            
            // ê³µê°„ (ìƒí™œ)
            java.util.Map.entry("ì‹ë‹¹", "dining_room"),
            java.util.Map.entry("ì£¼ë°©", "kitchen"),
            java.util.Map.entry("ì¹´í˜", "cafe"),
            java.util.Map.entry("í™”ì¥ì‹¤", "restroom"),
            java.util.Map.entry("ìš•ì‹¤", "bathroom"),
            java.util.Map.entry("ì„¸íƒì‹¤", "laundry"),
            
            // ê³µê°„ (ì˜ë£Œ)
            java.util.Map.entry("ì¹˜ë£Œì‹¤", "treatment_room"),
            java.util.Map.entry("ì˜ë¬´ì‹¤", "medical_room"),
            java.util.Map.entry("ìƒë‹´ì‹¤", "consultation_room"),
            java.util.Map.entry("ê°„í˜¸ì‚¬ì‹¤", "nurses_station"),
            
            // ê³µê°„ (ì¬í™œ/ìš´ë™)
            java.util.Map.entry("ì¬í™œì‹¤", "rehabilitation_room"),
            java.util.Map.entry("ë¬¼ë¦¬ì¹˜ë£Œì‹¤", "physical_therapy_room"),
            java.util.Map.entry("ìš´ë™ì‹¤", "exercise_room"),
            java.util.Map.entry("í—¬ìŠ¤ì¥", "gym"),
            
            // ê³µê°„ (í™œë™)
            java.util.Map.entry("í”„ë¡œê·¸ë¨ì‹¤", "program_room"),
            java.util.Map.entry("ê°•ë‹¹", "auditorium"),
            java.util.Map.entry("ë„ì„œì‹¤", "library"),
            java.util.Map.entry("ì˜¤ë½ì‹¤", "recreation_room"),
            
            // ê³µê°„ (ì™¸ë¶€)
            java.util.Map.entry("ì •ì›", "garden"),
            java.util.Map.entry("ë§ˆë‹¹", "yard"),
            java.util.Map.entry("í…Œë¼ìŠ¤", "terrace"),
            java.util.Map.entry("ë°œì½”ë‹ˆ", "balcony"),
            java.util.Map.entry("ì£¼ì°¨ì¥", "parking_lot"),
            java.util.Map.entry("ì‚°ì±…ë¡œ", "walking_path"),
            
            // ê³µê°„ (ê¸°íƒ€)
            java.util.Map.entry("ì—˜ë¦¬ë² ì´í„°", "elevator"),
            java.util.Map.entry("ê³„ë‹¨", "stairs"),
            java.util.Map.entry("ì‚¬ë¬´ì‹¤", "office"),
            java.util.Map.entry("ì ‘ìˆ˜ì²˜", "reception"),
            
            // ì„œë¹„ìŠ¤/ì˜ë£Œ
            java.util.Map.entry("ê°„í˜¸", "nursing"),
            java.util.Map.entry("ê°„ë³‘", "care"),
            java.util.Map.entry("ì¹˜ë£Œ", "treatment"),
            java.util.Map.entry("ì¬í™œ", "rehabilitation"),
            java.util.Map.entry("ë¬¼ë¦¬ì¹˜ë£Œ", "physical_therapy"),
            java.util.Map.entry("ê±´ê°•ê´€ë¦¬", "health_care"),
            
            // íŠ¹ì§•/ìƒíƒœ
            java.util.Map.entry("ê¹¨ë—í•œ", "clean"),
            java.util.Map.entry("ë°ì€", "bright"),
            java.util.Map.entry("ë„“ì€", "spacious"),
            java.util.Map.entry("ì•ˆì „í•œ", "safe"),
            java.util.Map.entry("í¸ì•ˆí•œ", "comfortable"),
            java.util.Map.entry("í˜„ëŒ€ì ", "modern"),
            java.util.Map.entry("ê³ ê¸‰", "premium"),
            
            // ì‹œê°„/ìœ„ì¹˜
            java.util.Map.entry("ì•„ì¹¨", "morning"),
            java.util.Map.entry("ì ì‹¬", "lunch"),
            java.util.Map.entry("ì €ë…", "evening"),
            java.util.Map.entry("ì•", "front"),
            java.util.Map.entry("ë’¤", "back"),
            java.util.Map.entry("ì¸µ", "floor"),
            java.util.Map.entry("1ì¸µ", "first_floor"),
            java.util.Map.entry("2ì¸µ", "second_floor"),
            
            // ìˆ«ì
            java.util.Map.entry("1", "one"),
            java.util.Map.entry("2", "two"),
            java.util.Map.entry("3", "three"),
            java.util.Map.entry("4", "four"),
            java.util.Map.entry("5", "five"),
            java.util.Map.entry("ì²«ë²ˆì§¸", "first"),
            java.util.Map.entry("ë‘ë²ˆì§¸", "second"),
            java.util.Map.entry("ì„¸ë²ˆì§¸", "third")
        );
        
        // í‚¤ì›Œë“œ ë³€í™˜ ì ìš©
        for (java.util.Map.Entry<String, String> entry : koreanToEnglish.entrySet()) {
            result = result.replace(entry.getKey(), entry.getValue());
        }
        
        // 2ë‹¨ê³„: ë‚¨ì€ í•œê¸€ì„ ë¡œë§ˆìë¡œ ë³€í™˜
        if (containsKorean(result)) {
            result = convertKoreanToRomanization(result);
        }
        
        return result;
    }
    
    /**
     * í•œê¸€ì„ ë¡œë§ˆìë¡œ ë³€í™˜ (ê°„ë‹¨í•œ ë¡œë§ˆì ë³€í™˜)
     */
    private String convertKoreanToRomanization(String korean) {
        if (korean == null || korean.trim().isEmpty()) {
            return "korean_text";
        }
        
        // ê¸°ë³¸ì ì¸ í•œê¸€ ìëª¨ ë¡œë§ˆì ë³€í™˜ í…Œì´ë¸”
        java.util.Map<String, String> koreanRomanization = java.util.Map.ofEntries(
            // ììŒ (ì´ˆì„±)
            java.util.Map.entry("ã„±", "g"), java.util.Map.entry("ã„´", "n"), java.util.Map.entry("ã„·", "d"),
            java.util.Map.entry("ã„¹", "r"), java.util.Map.entry("ã…", "m"), java.util.Map.entry("ã…‚", "b"),
            java.util.Map.entry("ã……", "s"), java.util.Map.entry("ã…‡", ""), java.util.Map.entry("ã…ˆ", "j"),
            java.util.Map.entry("ã…Š", "ch"), java.util.Map.entry("ã…‹", "k"), java.util.Map.entry("ã…Œ", "t"),
            java.util.Map.entry("ã…", "p"), java.util.Map.entry("ã…", "h"),
            
            // ëª¨ìŒ
            java.util.Map.entry("ã…", "a"), java.util.Map.entry("ã…‘", "ya"), java.util.Map.entry("ã…“", "eo"),
            java.util.Map.entry("ã…•", "yeo"), java.util.Map.entry("ã…—", "o"), java.util.Map.entry("ã…›", "yo"),
            java.util.Map.entry("ã…œ", "u"), java.util.Map.entry("ã… ", "yu"), java.util.Map.entry("ã…¡", "eu"),
            java.util.Map.entry("ã…£", "i"), java.util.Map.entry("ã…", "ae"), java.util.Map.entry("ã…”", "e"),
            
            // ì¼ë°˜ì ì¸ í•œê¸€ ë‹¨ì–´ ë¡œë§ˆì ë³€í™˜
            java.util.Map.entry("ê°€", "ga"), java.util.Map.entry("ë‚˜", "na"), java.util.Map.entry("ë‹¤", "da"),
            java.util.Map.entry("ë¼", "ra"), java.util.Map.entry("ë§ˆ", "ma"), java.util.Map.entry("ë°”", "ba"),
            java.util.Map.entry("ì‚¬", "sa"), java.util.Map.entry("ì", "ja"), java.util.Map.entry("ì°¨", "cha"),
            java.util.Map.entry("ì¹´", "ka"), java.util.Map.entry("íƒ€", "ta"), java.util.Map.entry("íŒŒ", "pa"),
            java.util.Map.entry("í•˜", "ha"),
            
            // ìì£¼ ì‚¬ìš©ë˜ëŠ” í•œê¸€ ì¡°í•©
            java.util.Map.entry("ê¹€", "kim"), java.util.Map.entry("ì´", "lee"), java.util.Map.entry("ë°•", "park"),
            java.util.Map.entry("ìµœ", "choi"), java.util.Map.entry("ì •", "jung"), java.util.Map.entry("ê°•", "kang"),
            java.util.Map.entry("ì¡°", "cho"), java.util.Map.entry("ìœ¤", "yoon"), java.util.Map.entry("ì¥", "jang"),
            java.util.Map.entry("ì„", "lim"), java.util.Map.entry("í•œ", "han"), java.util.Map.entry("ì˜¤", "oh"),
            java.util.Map.entry("ì„œ", "seo"), java.util.Map.entry("ì‹ ", "shin"), java.util.Map.entry("ê¶Œ", "kwon"),
            java.util.Map.entry("í™©", "hwang"), java.util.Map.entry("ì•ˆ", "ahn"), java.util.Map.entry("ì†¡", "song"),
            java.util.Map.entry("ë¥˜", "ryu"), java.util.Map.entry("ì „", "jeon"), java.util.Map.entry("í™", "hong")
        );
        
        String result = korean;
        
        // ë¡œë§ˆì ë³€í™˜ ì ìš©
        for (java.util.Map.Entry<String, String> entry : koreanRomanization.entrySet()) {
            result = result.replace(entry.getKey(), entry.getValue());
        }
        
        // ë³€í™˜ë˜ì§€ ì•Šì€ í•œê¸€ì´ ìˆìœ¼ë©´ ì•ˆì „í•œ ê¸°ë³¸ê°’ ì‚¬ìš©
        if (containsKorean(result)) {
            result = "korean_" + System.currentTimeMillis() % 10000;
        }
        
        return result;
    }
    
    /**
     * íŒŒì¼ëª… ì •ë¦¬ (íŠ¹ìˆ˜ë¬¸ì ì œê±°, ì˜ë¬¸ìì™€ ìˆ«ìë§Œ ìœ ì§€)
     */
    private String sanitizeFilename(String filename) {
        if (filename == null || filename.trim().isEmpty()) {
            return "facility_image";
        }
        
        // ì˜ë¬¸ì, ìˆ«ì, í•˜ì´í”ˆ, ì–¸ë”ìŠ¤ì½”ì–´ë§Œ ìœ ì§€
        String sanitized = filename.replaceAll("[^a-zA-Z0-9_-]", "_")
                                  .replaceAll("_{2,}", "_")  // ì—°ì†ëœ ì–¸ë”ìŠ¤ì½”ì–´ ì œê±°
                                  .replaceAll("^_+|_+$", ""); // ì•ë’¤ ì–¸ë”ìŠ¤ì½”ì–´ ì œê±°
        
        // ë„ˆë¬´ ê¸¸ë©´ ìë¥´ê¸° (ìµœëŒ€ 30ì)
        if (sanitized.length() > 30) {
            sanitized = sanitized.substring(0, 30);
        }
        
        // ë¹„ì–´ìˆìœ¼ë©´ ê¸°ë³¸ê°’
        if (sanitized.isEmpty()) {
            sanitized = "facility_image";
        }
        
        return sanitized;
    }
    
    /**
     * ë¬¸ìì—´ì— í•œê¸€ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
     */
    private boolean containsKorean(String text) {
        if (text == null) return false;
        return text.matches(".*[ã„±-ã…ã…-ã…£ê°€-í£]+.*");
    }
    
    /**
     * ì´ë¯¸ì§€ íŒŒì¼ ìœ íš¨ì„± ê²€ì¦ (í™•ì¥ì, í¬ê¸° ë“±)
     */
    private void validateImageFile(MultipartFile file) {
        if (file == null || file.isEmpty()) {
            throw new IllegalArgumentException("ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
        }
        
        // íŒŒì¼ í¬ê¸° ê²€ì¦
        if (file.getSize() > Constants.MAX_FILE_SIZE) {
            throw new IllegalArgumentException(String.format("íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤. ìµœëŒ€ %dMBê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.", 
                Constants.MAX_FILE_SIZE / (1024 * 1024)));
        }
        
        // íŒŒì¼ í™•ì¥ì ê²€ì¦
        String originalFilename = file.getOriginalFilename();
        if (originalFilename == null || !originalFilename.contains(".")) {
            throw new IllegalArgumentException("ìœ íš¨í•˜ì§€ ì•Šì€ íŒŒì¼ì…ë‹ˆë‹¤.");
        }
        
        String extension = originalFilename.substring(originalFilename.lastIndexOf(".") + 1).toLowerCase();
        boolean isValidExtension = false;
        for (String allowedExt : Constants.ALLOWED_IMAGE_EXTENSIONS) {
            if (allowedExt.equals(extension)) {
                isValidExtension = true;
                break;
            }
        }
        
        if (!isValidExtension) {
            throw new IllegalArgumentException(String.format("ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤. ì§€ì› í˜•ì‹: %s", 
                String.join(", ", Constants.ALLOWED_IMAGE_EXTENSIONS)));
        }
        
        // Content-Type ê²€ì¦ (ì¶”ê°€ ë³´ì•ˆ)
        String contentType = file.getContentType();
        if (contentType == null || !contentType.startsWith("image/")) {
            throw new IllegalArgumentException("ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
        }
        
        log.debug("âœ… ì´ë¯¸ì§€ íŒŒì¼ ê²€ì¦ í†µê³¼ - íŒŒì¼ëª…: {}, í¬ê¸°: {}KB, íƒ€ì…: {}", 
            originalFilename, file.getSize() / 1024, contentType);
    }
    
    /**
     * ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ (ë°ì´í„° ì •í•©ì„± ë³´ì¥)
     */
    @Transactional
    public boolean updateImageOrder(Long imageId, Integer imageOrder) {
        try {
            log.info("ğŸ”¢ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ - imageId: {}, newOrder: {}", imageId, imageOrder);
            
            int result = facilityImageMapper.updateImageOrder(imageId, imageOrder);
            boolean success = result > 0;
            
            if (success) {
                log.info("âœ… ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì„±ê³µ - imageId: {}, newOrder: {}", imageId, imageOrder);
            } else {
                log.warn("âš ï¸ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ - imageId: {}, newOrder: {}", imageId, imageOrder);
            }
            
            return success;
            
        } catch (Exception e) {
            log.error("âŒ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - imageId: {}, newOrder: {}", imageId, imageOrder, e);
            return false;
        }
    }
    
    /**
     * ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ (ì¤‘ë³µ ë°©ì§€ ë° ë°ì´í„° ì •í•©ì„± ë³´ì¥)
     */
    @Transactional
    public boolean reorderAllFacilityImages(Long facilityId) {
        try {
            log.info("ğŸ”„ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ ì‹œì‘ - facilityId: {}", facilityId);
            
            // í˜„ì¬ ì´ë¯¸ì§€ë“¤ì„ ìˆœì„œëŒ€ë¡œ ì¡°íšŒ (ì—…ë¡œë“œ ìˆœì„œ ê¸°ì¤€)
            List<FacilityImageDTO> images = facilityImageMapper.getImagesByFacilityId(facilityId);
            
            if (images.isEmpty()) {
                log.info("â„¹ï¸ ì¬ì •ë ¬í•  ì´ë¯¸ì§€ê°€ ì—†ìŒ - facilityId: {}", facilityId);
                return true;
            }
            
            log.info("ğŸ“Š ì¬ì •ë ¬í•  ì´ë¯¸ì§€ ìˆ˜: {} - facilityId: {}", images.size(), facilityId);
            
            // ê° ì´ë¯¸ì§€ì˜ ìˆœì„œë¥¼ 0, 1, 2, 3, 4ë¡œ ì¬ì„¤ì •
            for (int i = 0; i < images.size(); i++) {
                FacilityImageDTO image = images.get(i);
                int newOrder = i;
                
                // ê¸°ì¡´ ìˆœì„œì™€ ë‹¤ë¥¸ ê²½ìš°ì—ë§Œ ì—…ë°ì´íŠ¸
                if (image.getImageOrder() == null || !image.getImageOrder().equals(newOrder)) {
                    int updateResult = facilityImageMapper.updateImageOrder(image.getImageId(), newOrder);
                    
                    if (updateResult > 0) {
                        log.debug("âœ… ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ - imageId: {}, ê¸°ì¡´: {} â†’ ìƒˆë¡œìš´: {}", 
                            image.getImageId(), image.getImageOrder(), newOrder);
                    } else {
                        log.warn("âš ï¸ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ ì‹¤íŒ¨ - imageId: {}, ìƒˆë¡œìš´ ìˆœì„œ: {}", 
                            image.getImageId(), newOrder);
                    }
                }
            }
            
            log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ ì™„ë£Œ - facilityId: {}", facilityId);
            return true;
            
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            return false;
        }
    }
    
    /**
     * ë°°ì¹˜ë¡œ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ (í”„ë¡ íŠ¸ì—ì„œ ì „ë‹¬ë°›ì€ ìˆœì„œëŒ€ë¡œ)
     */
    @Transactional
    public boolean updateImageOrdersBatch(Long facilityId, List<Long> imageIds) {
        try {
            log.info("ğŸ”¢ ë°°ì¹˜ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì‹œì‘ - facilityId: {}, imageIds: {}", facilityId, imageIds);
            
            if (imageIds == null || imageIds.isEmpty()) {
                log.warn("âš ï¸ ì—…ë°ì´íŠ¸í•  ì´ë¯¸ì§€ ID ëª©ë¡ì´ ë¹„ì–´ìˆìŒ - facilityId: {}", facilityId);
                return false;
            }
            
            // ì‹œì„¤ì˜ ê¸°ì¡´ ì´ë¯¸ì§€ ê°œìˆ˜ í™•ì¸
            int existingImageCount = facilityImageMapper.countImagesByFacilityId(facilityId);
            
            if (imageIds.size() > existingImageCount) {
                log.warn("âš ï¸ ì „ë‹¬ë°›ì€ ì´ë¯¸ì§€ ID ìˆ˜ê°€ ê¸°ì¡´ ì´ë¯¸ì§€ ìˆ˜ë³´ë‹¤ ë§ìŒ - facilityId: {}, ì „ë‹¬ë°›ì€: {}, ê¸°ì¡´: {}", 
                    facilityId, imageIds.size(), existingImageCount);
                return false;
            }
            
            int successCount = 0;
            
            // ê° ì´ë¯¸ì§€ì˜ ìˆœì„œë¥¼ ì—…ë°ì´íŠ¸
            for (int i = 0; i < imageIds.size(); i++) {
                Long imageId = imageIds.get(i);
                int newOrder = i; // 0ë¶€í„° ì‹œì‘
                
                // í•´ë‹¹ ì´ë¯¸ì§€ê°€ ì‹¤ì œë¡œ í•´ë‹¹ ì‹œì„¤ì˜ ì´ë¯¸ì§€ì¸ì§€ í™•ì¸
                FacilityImageDTO existingImage = facilityImageMapper.getImageById(imageId);
                if (existingImage == null || !existingImage.getFacilityId().equals(facilityId)) {
                    log.warn("âš ï¸ ì˜ëª»ëœ ì´ë¯¸ì§€ ID ë˜ëŠ” ì‹œì„¤ ë¶ˆì¼ì¹˜ - imageId: {}, facilityId: {}", 
                        imageId, facilityId);
                    continue;
                }
                
                int updateResult = facilityImageMapper.updateImageOrder(imageId, newOrder);
                if (updateResult > 0) {
                    successCount++;
                    log.debug("âœ… ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ - imageId: {}, ìƒˆë¡œìš´ ìˆœì„œ: {}", imageId, newOrder);
                } else {
                    log.warn("âš ï¸ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ - imageId: {}, ìƒˆë¡œìš´ ìˆœì„œ: {}", imageId, newOrder);
                }
            }
            
            boolean success = successCount == imageIds.size();
            
            if (success) {
                log.info("âœ… ë°°ì¹˜ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ - facilityId: {}, ì„±ê³µ: {}/{}", 
                    facilityId, successCount, imageIds.size());
            } else {
                log.warn("âš ï¸ ë°°ì¹˜ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ë¶€ë¶„ ì‹¤íŒ¨ - facilityId: {}, ì„±ê³µ: {}/{}", 
                    facilityId, successCount, imageIds.size());
            }
            
            return success;
            
        } catch (Exception e) {
            log.error("âŒ ë°°ì¹˜ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            return false;
        }
    }
    
    /**
     * ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì™„ì „ ì‚­ì œ (ì‹œì„¤ ì‚­ì œ ì‹œ ì‚¬ìš©)
     */
    @Transactional
    public boolean deleteAllFacilityImages(Long facilityId) {
        try {
            log.info("ğŸ—‘ï¸ ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì™„ì „ ì‚­ì œ ì‹œì‘ - facilityId: {}", facilityId);
            
            // 1. ë¨¼ì € ëª¨ë“  ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ (íŒŒì¼ ê²½ë¡œ í™•ì¸ìš©)
            List<FacilityImageDTO> imagesToDelete = facilityImageMapper.getImagesByFacilityId(facilityId);
            
            if (imagesToDelete.isEmpty()) {
                log.info("â„¹ï¸ ì‚­ì œí•  ì´ë¯¸ì§€ê°€ ì—†ìŒ - facilityId: {}", facilityId);
                return true;
            }
            
            log.info("ğŸ“Š ì‚­ì œí•  ì´ë¯¸ì§€ ìˆ˜: {}", imagesToDelete.size());
            
            // 2. ê° ì´ë¯¸ì§€ì˜ íŒŒì¼ ê²½ë¡œ ìˆ˜ì§‘
            List<String> imagePaths = new ArrayList<>();
            for (FacilityImageDTO image : imagesToDelete) {
                if (image.getImagePath() != null && !image.getImagePath().trim().isEmpty()) {
                    imagePaths.add(image.getImagePath());
                }
            }
            
            // 3. ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ëª¨ë“  ì´ë¯¸ì§€ ì‚­ì œ
            int deletedCount = facilityImageMapper.deleteAllImagesByFacilityId(facilityId);
            log.info("âœ… DBì—ì„œ {} ê°œ ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - facilityId: {}", deletedCount, facilityId);
            
            // 4. íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ëª¨ë“  íŒŒì¼ ì‚­ì œ
            int fileDeletedCount = 0;
            for (String imagePath : imagePaths) {
                if (deleteImageFile(imagePath)) {
                    fileDeletedCount++;
                }
            }
            
            log.info("âœ… íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ {}/{} ê°œ íŒŒì¼ ì‚­ì œ ì™„ë£Œ", fileDeletedCount, imagePaths.size());
            
            return deletedCount > 0;
            
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            return false;
        }
    }

    /**
     * ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ (Blob ë°©ì‹)
     */
    @Transactional
    public List<FacilityImageDTO> uploadMultipleImages(Long facilityId, List<MultipartFile> images) {
        List<FacilityImageDTO> uploadedImages = new ArrayList<>();
        
        try {
            log.info("ğŸ“¤ ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œì‘ - facilityId: {}, ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, images.size());
            
            // í˜„ì¬ ì´ë¯¸ì§€ ìˆ˜ ì²´í¬
            List<FacilityImageDTO> existingImages = facilityImageMapper.getImagesByFacilityId(facilityId);
            int currentCount = existingImages.size();
            int nextOrderNum = currentCount + 1;
            
            log.info("ê¸°ì¡´ ì´ë¯¸ì§€ ìˆ˜: {}, ì‹œì‘ ìˆœì„œ ë²ˆí˜¸: {}", currentCount, nextOrderNum);
            
            // ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±
            String uploadDir = Constants.FACILITY_UPLOAD_PATH;
            File directory = new File(uploadDir);
            if (!directory.exists()) {
                boolean created = directory.mkdirs();
                log.info("ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} (ì„±ê³µ: {})", uploadDir, created);
            }
            
            // ê° ì´ë¯¸ì§€ ì²˜ë¦¬
            for (int i = 0; i < images.size(); i++) {
                MultipartFile image = images.get(i);
                
                try {
                    // íŒŒì¼ëª… ìƒì„± (UUID + í™•ì¥ì)
                    String originalFilename = image.getOriginalFilename();
                    String extension = "";
                    if (originalFilename != null && originalFilename.contains(".")) {
                        extension = originalFilename.substring(originalFilename.lastIndexOf("."));
                    }
                    
                    String uniqueFilename = UUID.randomUUID().toString() + extension;
                    String filePath = uploadDir + uniqueFilename;
                    
                    // íŒŒì¼ ì €ì¥
                    File destinationFile = new File(filePath);
                    image.transferTo(destinationFile);
                    
                    log.info("íŒŒì¼ ì €ì¥ ì™„ë£Œ: {} -> {}", originalFilename, uniqueFilename);
                    
                    // DTO ìƒì„±
                    FacilityImageDTO imageDTO = new FacilityImageDTO();
                    imageDTO.setFacilityId(facilityId);
                    imageDTO.setImagePath("/uploads/facility/" + uniqueFilename);
                    imageDTO.setImageAltText(originalFilename); // ALT í…ìŠ¤íŠ¸ì— ì›ë³¸ íŒŒì¼ëª… ì €ì¥
                    imageDTO.setImageOrder(nextOrderNum + i);
                    imageDTO.setIsMainImage(currentCount == 0 && i == 0); // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ê°€ ë©”ì¸
                    
                    // DB ì €ì¥
                    int result = facilityImageMapper.insertFacilityImage(imageDTO);
                    
                    if (result > 0) {
                        uploadedImages.add(imageDTO);
                        log.info("ì´ë¯¸ì§€ DB ì €ì¥ ì™„ë£Œ: {} (ìˆœì„œ: {})", uniqueFilename, imageDTO.getImageOrder());
                    } else {
                        log.warn("ì´ë¯¸ì§€ DB ì €ì¥ ì‹¤íŒ¨: {}", uniqueFilename);
                        // ì‹¤íŒ¨í•œ íŒŒì¼ ì‚­ì œ
                        destinationFile.delete();
                    }
                    
                } catch (IOException e) {
                    log.error("ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì‹¤íŒ¨: {}", image.getOriginalFilename(), e);
                } catch (Exception e) {
                    log.error("ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜: {}", image.getOriginalFilename(), e);
                }
            }
            
            log.info("âœ… ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ - facilityId: {}, ì„±ê³µ: {}/{}", 
                    facilityId, uploadedImages.size(), images.size());
            
            return uploadedImages;
            
        } catch (Exception e) {
            log.error("âŒ ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            
            // ì‹¤íŒ¨ ì‹œ ì—…ë¡œë“œëœ íŒŒì¼ë“¤ ë¡¤ë°±
            for (FacilityImageDTO uploadedImage : uploadedImages) {
                try {
                    if (uploadedImage.getImageId() != null) {
                        facilityImageMapper.deleteFacilityImage(uploadedImage.getImageId());
                    }
                    deleteImageFile(uploadedImage.getImagePath());
                } catch (Exception rollbackException) {
                    log.error("ë¡¤ë°± ì¤‘ ì˜¤ë¥˜:", rollbackException);
                }
            }
            
            throw new RuntimeException("ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
}
````

## File: src/main/java/com/example/carelink/service/ReviewService.java
````java
package com.example.carelink.service;

import com.example.carelink.common.PageInfo;
import com.example.carelink.dao.ReviewMapper;
import com.example.carelink.dto.ReviewDTO;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;

/**
 * ë¦¬ë·° ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì„œë¹„ìŠ¤
 * íŒ€ì› D ë‹´ë‹¹
 */
@Slf4j
@Service
@RequiredArgsConstructor
public class ReviewService {
    
    private final ReviewMapper reviewMapper;
    
    private static final int DEFAULT_PAGE_SIZE = 10;
    
    /**
     * ë¦¬ë·° ëª©ë¡ ì¡°íšŒ (í˜ì´ì§• ë° ê²€ìƒ‰ í¬í•¨)
     */
    public PageInfo<ReviewDTO> getReviewList(int page, String keyword) {
        return getReviewList(page, keyword, null, null);
    }
    
    /**
     * ë¦¬ë·° ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•, ê²€ìƒ‰, í‰ì  í•„í„° í¬í•¨)
     */
    public PageInfo<ReviewDTO> getReviewList(int page, String keyword, Integer minRating) {
        return getReviewList(page, keyword, minRating, null);
    }
    
    /**
     * ë¦¬ë·° ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•, ê²€ìƒ‰, í‰ì  í•„í„°, ì‹œì„¤ í•„í„° í¬í•¨)
     */
    public PageInfo<ReviewDTO> getReviewList(int page, String keyword, Integer minRating, Long facilityId) {
        log.info("ë¦¬ë·° ëª©ë¡ ì¡°íšŒ ì‹œì‘ - page: {}, keyword: {}, minRating: {}, facilityId: {}", page, keyword, minRating, facilityId);
        
        try {
            // ê²€ìƒ‰ ì¡°ê±´ ì„¤ì •
            ReviewDTO searchDTO = new ReviewDTO();
            // BaseDTOì˜ setPage() ë©”ì„œë“œê°€ ìë™ìœ¼ë¡œ offsetì„ ê³„ì‚°í•´ì¤Œ
            searchDTO.setPage(page);
            searchDTO.setSize(DEFAULT_PAGE_SIZE);
            
            if (keyword != null && !keyword.trim().isEmpty()) {
                searchDTO.setSearchKeyword(keyword.trim());
            }
            
            if (minRating != null) {
                searchDTO.setMinRating(minRating);
            }
            
            if (facilityId != null) {
                searchDTO.setFacilityId(facilityId);
            }
            
            // ì „ì²´ ë¦¬ë·° ìˆ˜ ì¡°íšŒ
            int totalCount = reviewMapper.countReviewsWithSearch(searchDTO);
            
            // ë¦¬ë·° ëª©ë¡ ì¡°íšŒ
            List<ReviewDTO> reviewList = reviewMapper.findReviewsWithSearch(searchDTO);
            
            log.info("ë¦¬ë·° ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}, ì „ì²´: {}", reviewList.size(), totalCount);
            
            // í˜ì´ì§• ì •ë³´ ìƒì„±
            return new PageInfo<>(reviewList, page, DEFAULT_PAGE_SIZE, totalCount);
            
        } catch (Exception e) {
            log.error("ë¦¬ë·° ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ë¦¬ë·° ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ë¦¬ë·° ìƒì„¸ ì •ë³´ ì¡°íšŒ
     */
    @Transactional
    public ReviewDTO getReviewById(Long id) {
        log.info("ë¦¬ë·° ìƒì„¸ ì¡°íšŒ ì‹œì‘ - reviewId: {}", id);
        
        try {
            ReviewDTO review = reviewMapper.findReviewById(id);
            if (review == null) {
                throw new RuntimeException("í•´ë‹¹ ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + id);
            }
            
            // ì¡°íšŒìˆ˜ ì¦ê°€
            reviewMapper.incrementViewCount(id);
            log.info("ë¦¬ë·° ìƒì„¸ ì¡°íšŒ ì™„ë£Œ - reviewId: {}, title: {}", id, review.getTitle());
            
            return review;
        } catch (Exception e) {
            log.error("ë¦¬ë·° ìƒì„¸ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            throw new RuntimeException("ë¦¬ë·° ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ë¦¬ë·° ë“±ë¡
     */
    @Transactional
    public int insertReview(ReviewDTO reviewDTO) {
        log.info("ë¦¬ë·° ë“±ë¡ ì‹œì‘ - title: {}, facilityId: {}", reviewDTO.getTitle(), reviewDTO.getFacilityId());
        
        try {
            // í•„ìˆ˜ ê°’ ê²€ì¦
            validateReviewData(reviewDTO);
            
            // ê¸°ë³¸ê°’ ì„¤ì • (í•„ìš”í•œ ê²½ìš°ì—ë§Œ)
            if (reviewDTO.getStatus() == null) {
                reviewDTO.setStatus("ACTIVE");
            }
            if (reviewDTO.getReplyDepth() == null) {
                reviewDTO.setReplyDepth(0);
            }
            // isVisibleì€ ê¸°ë³¸ì ìœ¼ë¡œ trueë¡œ ì„¤ì • (boolean íƒ€ì…)
            reviewDTO.setVisible(true);
            // isDeletedëŠ” falseë¡œ ì„¤ì • (ë…¼ë¦¬ì  ì‚­ì œë¥¼ ìœ„í•´)
            reviewDTO.setDeleted(false);
            
            int result = reviewMapper.insertReview(reviewDTO);
            log.info("ë¦¬ë·° ë“±ë¡ ì™„ë£Œ - reviewId: {}", reviewDTO.getReviewId());
            
            return result;
        } catch (Exception e) {
            log.error("ë¦¬ë·° ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ë¦¬ë·° ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ì‹œì„¤ë³„ ë¦¬ë·° ëª©ë¡ ì¡°íšŒ
     */
    public List<ReviewDTO> getReviewsByFacilityId(Long facilityId) {
        log.info("ì‹œì„¤ë³„ ë¦¬ë·° ì¡°íšŒ ì‹œì‘ - facilityId: {}", facilityId);
        
        try {
            List<ReviewDTO> reviews = reviewMapper.findReviewsByFacilityId(facilityId);
            log.info("ì‹œì„¤ë³„ ë¦¬ë·° ì¡°íšŒ ì™„ë£Œ - facilityId: {}, ì¡°íšŒëœ ê±´ìˆ˜: {}", facilityId, reviews.size());
            
            return reviews;
        } catch (Exception e) {
            log.error("ì‹œì„¤ë³„ ë¦¬ë·° ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            throw new RuntimeException("ì‹œì„¤ë³„ ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ë¦¬ë·° ì‚­ì œ (ë…¼ë¦¬ ì‚­ì œ)
     */
    @Transactional
    public int deleteReview(Long id) {
        log.info("ë¦¬ë·° ì‚­ì œ ì‹œì‘ - reviewId: {}", id);
        
        try {
            // ë¦¬ë·° ì¡´ì¬ í™•ì¸
            ReviewDTO existingReview = reviewMapper.findReviewById(id);
            if (existingReview == null) {
                throw new RuntimeException("ì‚­ì œí•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + id);
            }
            
            int result = reviewMapper.deleteReview(id);
            log.info("ë¦¬ë·° ì‚­ì œ ì™„ë£Œ - reviewId: {}", id);
            
            return result;
        } catch (Exception e) {
            log.error("ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            throw new RuntimeException("ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ì‹œì„¤ì˜ í‰ê·  í‰ì  ì¡°íšŒ
     */
    public Double getAverageRating(Long facilityId) {
        log.info("í‰ê·  í‰ì  ì¡°íšŒ ì‹œì‘ - facilityId: {}", facilityId);
        
        try {
            Double averageRating = reviewMapper.getAverageRating(facilityId);
            if (averageRating == null) {
                averageRating = 0.0;
            }
            
            log.info("í‰ê·  í‰ì  ì¡°íšŒ ì™„ë£Œ - facilityId: {}, í‰ê·  í‰ì : {}", facilityId, averageRating);
            return averageRating;
        } catch (Exception e) {
            log.error("í‰ê·  í‰ì  ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            // í‰ì  ì¡°íšŒ ì‹¤íŒ¨ ì‹œ 0.0 ë°˜í™˜
            return 0.0;
        }
    }
    
    /**
     * ë¦¬ë·° ì¶”ì²œ
     */
    @Transactional
    public int likeReview(Long reviewId) {
        log.info("ë¦¬ë·° ì¶”ì²œ ì‹œì‘ - reviewId: {}", reviewId);
        
        try {
            int result = reviewMapper.incrementLikeCount(reviewId);
            log.info("ë¦¬ë·° ì¶”ì²œ ì™„ë£Œ - reviewId: {}", reviewId);
            
            return result;
        } catch (Exception e) {
            log.error("ë¦¬ë·° ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", reviewId, e);
            throw new RuntimeException("ë¦¬ë·° ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ë¦¬ë·° ë¹„ì¶”ì²œ
     */
    @Transactional
    public int dislikeReview(Long reviewId) {
        log.info("ë¦¬ë·° ë¹„ì¶”ì²œ ì‹œì‘ - reviewId: {}", reviewId);
        
        try {
            int result = reviewMapper.incrementDislikeCount(reviewId);
            log.info("ë¦¬ë·° ë¹„ì¶”ì²œ ì™„ë£Œ - reviewId: {}", reviewId);
            
            return result;
        } catch (Exception e) {
            log.error("ë¦¬ë·° ë¹„ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", reviewId, e);
            throw new RuntimeException("ë¦¬ë·° ë¹„ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * íšŒì›ë³„ ë¦¬ë·° ëª©ë¡ ì¡°íšŒ
     */
    public List<ReviewDTO> getReviewsByMemberId(Long memberId) {
        log.info("íšŒì›ë³„ ë¦¬ë·° ì¡°íšŒ ì‹œì‘ - memberId: {}", memberId);
        
        try {
            List<ReviewDTO> reviews = reviewMapper.findReviewsByMemberId(memberId);
            log.info("íšŒì›ë³„ ë¦¬ë·° ì¡°íšŒ ì™„ë£Œ - memberId: {}, ì¡°íšŒëœ ê±´ìˆ˜: {}", memberId, reviews.size());
            
            return reviews;
        } catch (Exception e) {
            log.error("íšŒì›ë³„ ë¦¬ë·° ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - memberId: {}", memberId, e);
            throw new RuntimeException("íšŒì›ë³„ ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ë¦¬ë·° ë°ì´í„° ìœ íš¨ì„± ê²€ì¦
     */
    private void validateReviewData(ReviewDTO reviewDTO) {
        if (reviewDTO.getFacilityId() == null) {
            throw new IllegalArgumentException("ì‹œì„¤ IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (reviewDTO.getMemberId() == null) {
            throw new IllegalArgumentException("íšŒì› IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (reviewDTO.getTitle() == null || reviewDTO.getTitle().trim().isEmpty()) {
            throw new IllegalArgumentException("ë¦¬ë·° ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (reviewDTO.getContent() == null || reviewDTO.getContent().trim().isEmpty()) {
            throw new IllegalArgumentException("ë¦¬ë·° ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (reviewDTO.getRating() == null || reviewDTO.getRating() < 1 || reviewDTO.getRating() > 5) {
            throw new IllegalArgumentException("í‰ì ì€ 1~5 ì‚¬ì´ì˜ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
        }
    }

    /**
     * ì „ì²´ ë¦¬ë·° ìˆ˜ ì¡°íšŒ (í†µê³„ìš©)
     */
    @Transactional(readOnly = true)
    public int getReviewCount() {
        try {
            return reviewMapper.getReviewCount();
        } catch (Exception e) {
            log.error("ë¦¬ë·° ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0; // ì˜¤ë¥˜ ì‹œ 0 ë°˜í™˜
        }
    }

    /**
     * ë¦¬ë·° ìˆ˜ì •
     */
    @Transactional
    public int updateReview(ReviewDTO reviewDTO) {
        log.info("ë¦¬ë·° ìˆ˜ì • ì‹œì‘ - reviewId: {}, title: {}", reviewDTO.getReviewId(), reviewDTO.getTitle());
        
        try {
            // ê¸°ì¡´ ë¦¬ë·° ì¡´ì¬ í™•ì¸
            ReviewDTO existingReview = reviewMapper.findReviewById(reviewDTO.getReviewId());
            if (existingReview == null) {
                throw new RuntimeException("ìˆ˜ì •í•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + reviewDTO.getReviewId());
            }
            
            // í•„ìˆ˜ ê°’ ê²€ì¦
            validateReviewData(reviewDTO);
            
            // status ê¸°ë³¸ê°’ ì„¤ì • (ìˆ˜ì • ì‹œì—ë„ ê¸°ì¡´ ìƒíƒœ ìœ ì§€ ë˜ëŠ” ê¸°ë³¸ê°’ ì„¤ì •)
            if (reviewDTO.getStatus() == null || reviewDTO.getStatus().isEmpty()) {
                reviewDTO.setStatus("ACTIVE");
            }
            
            int result = reviewMapper.updateReview(reviewDTO);
            log.info("ë¦¬ë·° ìˆ˜ì • ì™„ë£Œ - reviewId: {}", reviewDTO.getReviewId());
            
            return result;
        } catch (Exception e) {
            log.error("ë¦¬ë·° ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", reviewDTO.getReviewId(), e);
            throw new RuntimeException("ë¦¬ë·° ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ì¡°íšŒìˆ˜ ì¦ê°€
     */
    @Transactional
    public int incrementViewCount(Long id) {
        log.info("ì¡°íšŒìˆ˜ ì¦ê°€ ì‹œì‘ - reviewId: {}", id);
        
        try {
            int result = reviewMapper.incrementViewCount(id);
            log.info("ì¡°íšŒìˆ˜ ì¦ê°€ ì™„ë£Œ - reviewId: {}", id);
            
            return result;
        } catch (Exception e) {
            log.error("ì¡°íšŒìˆ˜ ì¦ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
            // ì¡°íšŒìˆ˜ ì¦ê°€ ì‹¤íŒ¨ëŠ” ì „ì²´ í”„ë¡œì„¸ìŠ¤ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•ŠìŒ
            return 0;
        }
    }
}
````

## File: src/main/resources/templates/board/detail.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title th:text="${board.title + ' - CareLink'}">ê²Œì‹œê¸€ ìƒì„¸ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>


    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container py-4">
            <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                    <li class="breadcrumb-item"><a href="/board">ì •ë³´ë§ˆë‹¹</a></li>
                    <li class="breadcrumb-item">
                        <a th:href="@{/board(type=${type})}" th:text="${board.category}">ê²Œì‹œíŒ</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">ê²Œì‹œê¸€ ìƒì„¸</li>
                </ol>
            </nav>

            <!-- ê²Œì‹œê¸€ ìƒì„¸ -->
            <div class="card">
                <!-- ê²Œì‹œê¸€ í—¤ë” -->
                <div class="card-header bg-light">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="d-flex align-items-center mb-2">
                                <span th:if="${board.category == 'NOTICE'}" class="badge bg-danger me-2">ê³µì§€</span>
                                <span th:if="${board.category == 'INFO'}" class="badge bg-primary me-2">ì •ë³´</span>
                                <span th:if="${board.category == 'QNA'}" class="badge bg-success me-2">Q&A</span>
                                <span th:if="${board.category == 'FAQ'}" class="badge bg-warning me-2">FAQ</span>
                                <span th:if="${board.isPinned}" class="badge bg-info me-2">ê³ ì •</span>
                                <h4 class="mb-0" th:text="${board.title}">ê²Œì‹œê¸€ ì œëª©</h4>
                            </div>
                            <div class="text-muted small">
                                <i class="fas fa-user me-1"></i>
                                <span th:text="${board.memberName}">ì‘ì„±ì</span>
                                <span class="mx-2">|</span>
                                <i class="fas fa-calendar me-1"></i>
                                <span th:text="${#temporals.format(board.createdAt, 'yyyy-MM-dd HH:mm')}">ì‘ì„±ì¼</span>
                                <span class="mx-2">|</span>
                                <i class="fas fa-eye me-1"></i>
                                ì¡°íšŒ <span th:text="${board.viewCount}">0</span>
                            </div>
                        </div>
                        <div class="col-md-4 text-end">
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-outline-success btn-sm" onclick="likeBoard()">
                                    <i class="fas fa-thumbs-up me-1"></i>
                                    ì¶”ì²œ <span id="likeCount" th:text="${board.likeCount}">0</span>
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="shareBoard()">
                                    <i class="fas fa-share me-1"></i>
                                    ê³µìœ 
                                </button>
                                <button type="button" class="btn btn-outline-danger btn-sm" onclick="reportBoard()">
                                    <i class="fas fa-exclamation-triangle me-1"></i>
                                    ì‹ ê³ 
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ê²Œì‹œê¸€ ë‚´ìš© -->
                <div class="card-body">
                    <div class="content-area" style="min-height: 300px; line-height: 1.8;">
                        <div th:utext="${#strings.replace(#strings.replace(board.content, '\n', '&lt;br&gt;'), '\r\n', '&lt;br&gt;')}">
                            ê²Œì‹œê¸€ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                        </div>
                    </div>
                    
                    <!-- íƒœê·¸ -->
                    <div th:if="${not #strings.isEmpty(board.tags)}" class="mt-4 pt-3 border-top">
                        <small class="text-muted">íƒœê·¸: </small>
                        <span th:each="tag : ${#strings.arraySplit(board.tags, ',')}" class="badge bg-light text-dark me-1" th:text="${tag}">íƒœê·¸</span>
                    </div>
                </div>

                <!-- ê²Œì‹œê¸€ í‘¸í„° -->
                <div class="card-footer bg-light">
                    <div class="row">
                        <div class="col-md-6">
                            <small class="text-muted">
                                <i class="fas fa-clock me-1"></i>
                                ìµœì¢… ìˆ˜ì •: <span th:text="${#temporals.format(board.updatedAt, 'yyyy-MM-dd HH:mm')}">ìˆ˜ì •ì¼</span>
                            </small>
                        </div>
                        <div class="col-md-6 text-end">
                            <!-- ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ - ê¶Œí•œë³„ í‘œì‹œ -->
                            <!-- ê³µì§€ì‚¬í•­ê³¼ FAQëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥ -->
                            <div th:if="${session.loginMember != null and (board.category == 'NOTICE' or board.category == 'FAQ') and session.loginMember.role == 'ADMIN'}" 
                                 class="btn-group" role="group">
                                <a th:href="@{/board/edit/{id}(id=${board.boardId}, type=${type})}" 
                                   class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-edit me-1"></i>ìˆ˜ì •
                                </a>
                                <button type="button" class="btn btn-outline-danger btn-sm" 
                                        onclick="deleteBoard(event)" 
                                        th:data-board-id="${board.boardId}"
                                        th:data-type="${type}">
                                    <i class="fas fa-trash me-1"></i>ì‚­ì œ
                                </button>
                                <span class="badge bg-warning text-dark ms-2">ê´€ë¦¬ì</span>
                            </div>
                            
                            <!-- ì¼ë°˜ ê²Œì‹œê¸€(INFO, QNA)ì€ ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥ -->
                            <div th:if="${session.loginMember != null and (board.category == 'INFO' or board.category == 'QNA') and (session.loginMember.memberId == board.memberId or session.loginMember.role == 'ADMIN')}" 
                                 class="btn-group" role="group">
                                <a th:href="@{/board/edit/{id}(id=${board.boardId}, type=${type})}" 
                                   class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-edit me-1"></i>ìˆ˜ì •
                                </a>
                                <button type="button" class="btn btn-outline-danger btn-sm" 
                                        onclick="deleteBoard(event)" 
                                        th:data-board-id="${board.boardId}"
                                        th:data-type="${type}">
                                    <i class="fas fa-trash me-1"></i>ì‚­ì œ
                                </button>
                                <!-- ê´€ë¦¬ìì¸ ê²½ìš° í‘œì‹œ -->
                                <span th:if="${session.loginMember.role == 'ADMIN' and session.loginMember.memberId != board.memberId}" 
                                      class="badge bg-warning text-dark ms-2">ê´€ë¦¬ì</span>
                            </div>
                            
                            <!-- ê¶Œí•œì´ ì—†ëŠ” ê²½ìš° ì•ˆë‚´ ë©”ì‹œì§€ -->
                            <div th:if="${session.loginMember == null}">
                                <small class="text-muted">
                                    <i class="fas fa-info-circle me-1"></i>ë¡œê·¸ì¸ í›„ ìˆ˜ì •/ì‚­ì œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                                </small>
                            </div>
                            <div th:if="${session.loginMember != null and (board.category == 'NOTICE' or board.category == 'FAQ') and session.loginMember.role != 'ADMIN'}">
                                <small class="text-muted">
                                    <i class="fas fa-lock me-1"></i>ê´€ë¦¬ìë§Œ ìˆ˜ì •/ì‚­ì œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                                </small>
                            </div>
                            <div th:if="${session.loginMember != null and (board.category == 'INFO' or board.category == 'QNA') and session.loginMember.memberId != board.memberId and session.loginMember.role != 'ADMIN'}">
                                <small class="text-muted">
                                    <i class="fas fa-user-lock me-1"></i>ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •/ì‚­ì œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì´ì „ê¸€/ë‹¤ìŒê¸€ -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body py-2">
                            <div class="row">
                                <!-- ì´ì „ê¸€ -->
                                <div class="col-md-6">
                                    <div th:if="${prevBoard != null}">
                                        <small class="text-muted">
                                            <i class="fas fa-chevron-up me-1"></i>ì´ì „ê¸€
                                        </small>
                                        <a th:href="@{/board/detail/{id}(id=${prevBoard.boardId}, type=${type}, page=${page})}" 
                                           class="d-block text-decoration-none text-truncate" 
                                           th:text="${prevBoard.title}">ì´ì „ ê²Œì‹œê¸€ ì œëª©</a>
                                    </div>
                                    <div th:unless="${prevBoard != null}">
                                        <small class="text-muted">
                                            <i class="fas fa-chevron-up me-1"></i>ì´ì „ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
                                        </small>
                                    </div>
                                </div>
                                <!-- ë‹¤ìŒê¸€ -->
                                <div class="col-md-6 text-end">
                                    <div th:if="${nextBoard != null}">
                                        <small class="text-muted">
                                            ë‹¤ìŒê¸€<i class="fas fa-chevron-down ms-1"></i>
                                        </small>
                                        <a th:href="@{/board/detail/{id}(id=${nextBoard.boardId}, type=${type}, page=${page})}" 
                                           class="d-block text-decoration-none text-truncate" 
                                           th:text="${nextBoard.title}">ë‹¤ìŒ ê²Œì‹œê¸€ ì œëª©</a>
                                    </div>
                                    <div th:unless="${nextBoard != null}">
                                        <small class="text-muted">
                                            ë‹¤ìŒê¸€ì´ ì—†ìŠµë‹ˆë‹¤.<i class="fas fa-chevron-down ms-1"></i>
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- í•˜ë‹¨ ë²„íŠ¼ -->
            <div class="row mt-4">
                <div class="col-12 text-center">
                    <div class="btn-group" role="group">
                        <a th:href="@{/board(type=${type}, page=${page})}" class="btn btn-secondary">
                            <i class="fas fa-list me-1"></i>ëª©ë¡ìœ¼ë¡œ
                        </a>
                        <!-- ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ê¸€ì“°ê¸° ë²„íŠ¼ í‘œì‹œ -->
                        <a th:if="${session.memberId != null}" 
                           th:href="@{/board/write(type=${type})}" 
                           class="btn btn-primary">
                            <i class="fas fa-plus me-1"></i>ê¸€ì“°ê¸°
                        </a>
                        <!-- ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìì—ê²ŒëŠ” ë¡œê·¸ì¸ ì•ˆë‚´ -->
                        <a th:unless="${session.memberId != null}" 
                           href="/member/login" 
                           class="btn btn-outline-secondary">
                            <i class="fas fa-sign-in-alt me-1"></i>ë¡œê·¸ì¸ í›„ ê¸€ì“°ê¸°
                        </a>
                        <button type="button" class="btn btn-info" onclick="window.scrollTo(0, 0)">
                            <i class="fas fa-arrow-up me-1"></i>ë§¨ ìœ„ë¡œ
                        </button>
                    </div>
                </div>
            </div>

            <!-- ëŒ“ê¸€ ì˜ì—­ (í–¥í›„ êµ¬í˜„) -->
            <div class="card mt-4">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="fas fa-comments me-2"></i>ëŒ“ê¸€ 
                        <span class="badge bg-secondary" th:text="${board.commentCount}">0</span>
                    </h6>
                </div>
                <div class="card-body">
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-comment-slash fa-2x mb-2"></i><br>
                        ëŒ“ê¸€ ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>

    <!-- ê²Œì‹œê¸€ ìƒì„¸ í˜ì´ì§€ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="/js/board-detail.js"></script>
</body>
</html>
````

## File: src/main/resources/templates/job/list.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>êµ¬ì¸êµ¬ì§ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container mt-4">
            <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                    <li class="breadcrumb-item active" aria-current="page">êµ¬ì¸êµ¬ì§</li>
                </ol>
            </nav>
            
            <!-- í˜ì´ì§€ íƒ€ì´í‹€ -->
            <div class="row mb-4">
                <div class="col-md-8">
                    <h2><i class="fas fa-briefcase text-success me-2"></i> êµ¬ì¸êµ¬ì§</h2>
                    <p class="text-muted">ìš”ì–‘ì›, ìš”ì–‘ë³‘ì› ë“± ë‹¤ì–‘í•œ ì¼ìë¦¬ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
                </div>
                <div class="col-md-4 text-end">
                    <!-- ì‹œì„¤íšŒì›(FACILITY) ë˜ëŠ” ê´€ë¦¬ì(ADMIN)ë§Œ êµ¬ì¸ë“±ë¡ ê°€ëŠ¥ -->
                    <a th:if="${session.loginMember != null and (session.loginMember.role == 'FACILITY' or session.loginMember.role == 'ADMIN')}" 
                       href="/job/write" class="btn btn-success me-2">
                        <i class="fas fa-plus me-1"></i>êµ¬ì¸ë“±ë¡
                    </a>
                    
                    <!-- ì¼ë°˜ì‚¬ìš©ì(USER)ëŠ” êµ¬ì§ë“±ë¡ë§Œ ê°€ëŠ¥ -->
                    <a th:if="${session.loginMember != null and session.loginMember.role == 'USER'}" 
                       href="/job/write" class="btn btn-info">
                        <i class="fas fa-plus me-1"></i>êµ¬ì§ë“±ë¡
                    </a>
                    
                    <!-- ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìì—ê²ŒëŠ” ë¡œê·¸ì¸ ì•ˆë‚´ -->
                    <div th:if="${session.loginMember == null}" class="btn-group">
                        <a href="/member/login" class="btn btn-outline-success">
                            <i class="fas fa-sign-in-alt me-1"></i>ë¡œê·¸ì¸ í›„ êµ¬ì¸ë“±ë¡
                        </a>
                        <a href="/member/login" class="btn btn-outline-info">
                            <i class="fas fa-sign-in-alt me-1"></i>ë¡œê·¸ì¸ í›„ êµ¬ì§ë“±ë¡
                        </a>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- í•„í„° ë° ê²€ìƒ‰ ì˜ì—­ -->
                <div class="col-md-3">
                    <div class="card mb-4">
                        <div class="card-header bg-success text-white">
                            <h6 class="mb-0"><i class="fas fa-filter me-1"></i> ê²€ìƒ‰ í•„í„°</h6>
                        </div>
                        <div class="card-body">
                            <form id="searchForm" method="get" th:action="@{/job}">
                                <!-- í‚¤ì›Œë“œ ê²€ìƒ‰ -->
                                <div class="mb-3">
                                    <label for="keyword" class="form-label fw-bold">í‚¤ì›Œë“œ ê²€ìƒ‰</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="keyword" 
                                               name="keyword" th:value="${keyword}"
                                               placeholder="ì§ë¬´, íšŒì‚¬ëª…, ì§€ì—­ ë“±">
                                        <button type="submit" class="btn btn-outline-secondary">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- êµ¬ì¸/êµ¬ì§ êµ¬ë¶„ -->
                                <div class="mb-3">
                                    <label class="form-label fw-bold">êµ¬ì¸/êµ¬ì§ êµ¬ë¶„</label>
                                    <div class="btn-group w-100" role="group">
                                        <input type="radio" class="btn-check" name="type" id="type_all" value="" th:checked="${type == null or type == ''}">
                                        <label class="btn btn-outline-primary" for="type_all">ì „ì²´</label>
                                        
                                        <input type="radio" class="btn-check" name="type" id="type_recruit" value="recruit" th:checked="${type == 'recruit'}">
                                        <label class="btn btn-outline-primary" for="type_recruit">êµ¬ì¸</label>
                                        
                                        <input type="radio" class="btn-check" name="type" id="type_search" value="search" th:checked="${type == 'search'}">
                                        <label class="btn btn-outline-primary" for="type_search">êµ¬ì§</label>
                                    </div>
                                </div>

                                <!-- ì§ì¢… ì„ íƒ -->
                                <div class="mb-3">
                                    <label for="position" class="form-label fw-bold">ì§ì¢…</label>
                                    <select class="form-select" id="position" name="position">
                                        <option value="">ì „ì²´</option>
                                        <option value="ê°„ë³‘ì¸" th:selected="${position == 'ê°„ë³‘ì¸'}">ê°„ë³‘ì¸</option>
                                        <option value="ìš”ì–‘ë³´í˜¸ì‚¬" th:selected="${position == 'ìš”ì–‘ë³´í˜¸ì‚¬'}">ìš”ì–‘ë³´í˜¸ì‚¬</option>
                                        <option value="ì‚¬íšŒë³µì§€ì‚¬" th:selected="${position == 'ì‚¬íšŒë³µì§€ì‚¬'}">ì‚¬íšŒë³µì§€ì‚¬</option>
                                        <option value="ë¬¼ë¦¬ì¹˜ë£Œì‚¬" th:selected="${position == 'ë¬¼ë¦¬ì¹˜ë£Œì‚¬'}">ë¬¼ë¦¬ì¹˜ë£Œì‚¬</option>
                                        <option value="ì‚¬ë¬´ì§" th:selected="${position == 'ì‚¬ë¬´ì§'}">ì‚¬ë¬´ì§</option>
                                        <option value="ì¡°ë¦¬ì›" th:selected="${position == 'ì¡°ë¦¬ì›'}">ì¡°ë¦¬ì›</option>
                                        <option value="ìš´ì „ì›" th:selected="${position == 'ìš´ì „ì›'}">ìš´ì „ì›</option>
                                        <option value="ê°„í˜¸ì‚¬" th:selected="${position == 'ê°„í˜¸ì‚¬'}">ê°„í˜¸ì‚¬</option>
                                        <option value="ì˜ì–‘ì‚¬" th:selected="${position == 'ì˜ì–‘ì‚¬'}">ì˜ì–‘ì‚¬</option>
                                        <option value="ê¸°íƒ€" th:selected="${position == 'ê¸°íƒ€'}">ê¸°íƒ€</option>
                                    </select>
                                </div>

                                <!-- ì§€ì—­ ì„ íƒ -->
                                <div class="mb-3">
                                    <label for="region" class="form-label fw-bold">ê·¼ë¬´ì§€ì—­</label>
                                    <select class="form-select" id="region" name="region">
                                        <option value="">ì „êµ­</option>
                                        <option value="ì„œìš¸" th:selected="${region == 'ì„œìš¸'}">ì„œìš¸íŠ¹ë³„ì‹œ</option>
                                        <option value="ë¶€ì‚°" th:selected="${region == 'ë¶€ì‚°'}">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
                                        <option value="ëŒ€êµ¬" th:selected="${region == 'ëŒ€êµ¬'}">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
                                        <option value="ì¸ì²œ" th:selected="${region == 'ì¸ì²œ'}">ì¸ì²œê´‘ì—­ì‹œ</option>
                                        <option value="ê´‘ì£¼" th:selected="${region == 'ê´‘ì£¼'}">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
                                        <option value="ëŒ€ì „" th:selected="${region == 'ëŒ€ì „'}">ëŒ€ì „ê´‘ì—­ì‹œ</option>
                                        <option value="ìš¸ì‚°" th:selected="${region == 'ìš¸ì‚°'}">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
                                        <option value="ì„¸ì¢…" th:selected="${region == 'ì„¸ì¢…'}">ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ</option>
                                        <option value="ê²½ê¸°" th:selected="${region == 'ê²½ê¸°'}">ê²½ê¸°ë„</option>
                                        <option value="ê°•ì›" th:selected="${region == 'ê°•ì›'}">ê°•ì›ë„</option>
                                        <option value="ì¶©ë¶" th:selected="${region == 'ì¶©ë¶'}">ì¶©ì²­ë¶ë„</option>
                                        <option value="ì¶©ë‚¨" th:selected="${region == 'ì¶©ë‚¨'}">ì¶©ì²­ë‚¨ë„</option>
                                        <option value="ì „ë¶" th:selected="${region == 'ì „ë¶'}">ì „ë¼ë¶ë„</option>
                                        <option value="ì „ë‚¨" th:selected="${region == 'ì „ë‚¨'}">ì „ë¼ë‚¨ë„</option>
                                        <option value="ê²½ë¶" th:selected="${region == 'ê²½ë¶'}">ê²½ìƒë¶ë„</option>
                                        <option value="ê²½ë‚¨" th:selected="${region == 'ê²½ë‚¨'}">ê²½ìƒë‚¨ë„</option>
                                        <option value="ì œì£¼" th:selected="${region == 'ì œì£¼'}">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
                                    </select>
                                </div>

                                <!-- ê³ ìš©í˜•íƒœ -->
                                <div class="mb-3">
                                    <label for="workType" class="form-label fw-bold">ê³ ìš©í˜•íƒœ</label>
                                    <select class="form-select" id="workType" name="workType">
                                        <option value="">ì „ì²´</option>
                                        <option value="FULL_TIME" th:selected="${workType == 'FULL_TIME'}">ì •ê·œì§</option>
                                        <option value="PART_TIME" th:selected="${workType == 'PART_TIME'}">íŒŒíŠ¸íƒ€ì„</option>
                                        <option value="TEMPORARY" th:selected="${workType == 'TEMPORARY'}">ì„ì‹œì§</option>
                                    </select>
                                </div>

                                <!-- ê²½ë ¥ -->
                                <div class="mb-3">
                                    <label for="experience" class="form-label fw-bold">ê²½ë ¥</label>
                                    <select class="form-select" id="experience" name="experience">
                                        <option value="">ë¬´ê´€</option>
                                        <option value="ì‹ ì…" th:selected="${experience == 'ì‹ ì…'}">ì‹ ì…</option>
                                        <option value="1ë…„ ì´ìƒ" th:selected="${experience == '1ë…„ ì´ìƒ'}">1ë…„ ì´ìƒ</option>
                                        <option value="3ë…„ ì´ìƒ" th:selected="${experience == '3ë…„ ì´ìƒ'}">3ë…„ ì´ìƒ</option>
                                        <option value="5ë…„ ì´ìƒ" th:selected="${experience == '5ë…„ ì´ìƒ'}">5ë…„ ì´ìƒ</option>
                                        <option value="10ë…„ ì´ìƒ" th:selected="${experience == '10ë…„ ì´ìƒ'}">10ë…„ ì´ìƒ</option>
                                    </select>
                                </div>

                                <div class="d-grid gap-2">
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-search me-1"></i>ê²€ìƒ‰
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary" onclick="resetFilters()">
                                        <i class="fas fa-undo me-1"></i>ì´ˆê¸°í™”
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- ì¸ê¸° ê²€ìƒ‰ì–´ -->
                    <div class="card">
                        <div class="card-header bg-warning text-dark">
                            <h6 class="mb-0"><i class="fas fa-fire me-1"></i> ì¸ê¸° ê²€ìƒ‰ì–´</h6>
                        </div>
                        <div class="card-body">
                            <div class="d-flex flex-wrap gap-1">
                                <span class="badge bg-light text-dark">ê°„ë³‘ì¸</span>
                                <span class="badge bg-light text-dark">ìš”ì–‘ë³´í˜¸ì‚¬</span>
                                <span class="badge bg-light text-dark">ì‚¬íšŒë³µì§€ì‚¬</span>
                                <span class="badge bg-light text-dark">ì„œìš¸</span>
                                <span class="badge bg-light text-dark">ì •ê·œì§</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- êµ¬ì¸êµ¬ì§ ëª©ë¡ -->
                <div class="col-md-9">
                    <!-- ê²°ê³¼ ìš”ì•½ ë° ì •ë ¬ -->
                    <div class="row align-items-center mb-4">
                        <div class="col-md-6">
                            <div class="d-flex align-items-center gap-3">
                                <h5 class="mb-0">
                                    <i class="fas fa-list me-2 text-success"></i>ì±„ìš©ì •ë³´
                                </h5>
                                <span class="badge bg-success fs-6" th:text="${jobList != null ? #lists.size(jobList) : 0} + 'ê±´'">
                                    0ê±´
                                </span>
                            </div>
                            <small class="text-muted">
                                ì „ì²´ <strong th:text="${totalCount ?: 0}">0</strong>ê±´ ì¤‘ 
                                <strong th:text="${jobList != null ? #lists.size(jobList) : 0}">0</strong>ê±´ í‘œì‹œ
                            </small>
                        </div>
                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-auto">
                                    <label for="sortOrder" class="form-label small mb-0">ì •ë ¬ê¸°ì¤€</label>
                                    <select class="form-select form-select-sm" id="sortOrder" name="sortOrder" onchange="changeSortOrder(this.value)">
                                        <option value="latest" th:selected="${sortOrder == 'latest' or sortOrder == null}">ìµœì‹ ìˆœ</option>
                                        <option value="viewCount" th:selected="${sortOrder == 'viewCount'}">ì¡°íšŒìˆœ</option>
                                        <option value="salary" th:selected="${sortOrder == 'salary'}">ê¸‰ì—¬ìˆœ</option>
                                        <option value="deadline" th:selected="${sortOrder == 'deadline'}">ë§ˆê°ì„ë°•ìˆœ</option>
                                    </select>
                                </div>
                                <div class="col-auto">
                                    <label for="viewType" class="form-label small mb-0">ë³´ê¸°ë°©ì‹</label>
                                    <div class="btn-group btn-group-sm" role="group">
                                        <input type="radio" class="btn-check" name="viewType" id="listView" value="list" checked>
                                        <label class="btn btn-outline-secondary" for="listView">
                                            <i class="fas fa-list"></i>
                                        </label>
                                        <input type="radio" class="btn-check" name="viewType" id="cardView" value="card">
                                        <label class="btn btn-outline-secondary" for="cardView">
                                            <i class="fas fa-th"></i>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- êµ¬ì¸êµ¬ì§ ì¹´ë“œ ëª©ë¡ -->
                    <div id="jobList">
                        <!-- ì‹¤ì œ êµ¬ì¸êµ¬ì§ ëª©ë¡ -->
                        <div th:if="${not #lists.isEmpty(jobList)}">
                            <div class="card mb-3" th:each="job : ${jobList}">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="d-flex justify-content-between align-items-start mb-2">
                                                <h5 class="card-title mb-0" th:text="${job.title}">êµ¬ì¸ ì œëª©</h5>
                                                <div class="d-flex gap-1">
                                                    <span class="badge bg-primary" th:if="${job.jobType == 'RECRUIT'}">êµ¬ì¸</span>
                                                    <span class="badge bg-success" th:if="${job.jobType == 'SEARCH'}">êµ¬ì§</span>
                                                    <span class="badge bg-secondary" th:if="${job.workType == 'FULL_TIME'}">ì •ê·œì§</span>
                                                    <span class="badge bg-info" th:if="${job.workType == 'PART_TIME'}">íŒŒíŠ¸íƒ€ì„</span>
                                                    <span class="badge bg-warning" th:if="${job.workType == 'TEMPORARY'}">ì„ì‹œì§</span>
                                                    <span class="badge bg-danger" th:if="${job.priority > 0}">ê¸´ê¸‰</span>
                                                </div>
                                            </div>
                                            <h6 class="text-primary mb-2" th:text="${job.facilityName ?: 'ê°œì¸ ì‚¬ì—…ì'}">íšŒì‚¬ëª…</h6>
                                            <div class="job-info mb-2">
                                                <span class="text-muted me-3" th:if="${job.workLocation}">
                                                    <i class="fas fa-map-marker-alt me-1"></i><span th:text="${job.workLocation}">ì§€ì—­</span>
                                                </span>
                                                <span class="text-muted me-3" th:if="${job.workHours}">
                                                    <i class="fas fa-clock me-1"></i><span th:text="${job.workHours}">ê·¼ë¬´ì‹œê°„</span>
                                                </span>
                                                <span class="text-muted me-3" th:if="${job.salaryDescription}">
                                                    <i class="fas fa-won-sign me-1"></i><span th:text="${job.salaryDescription}">ê¸‰ì—¬</span>
                                                </span>
                                                <span class="text-muted" th:if="${job.experience}">
                                                    <i class="fas fa-user-graduate me-1"></i><span th:text="${job.experience}">ê²½ë ¥</span>
                                                </span>
                                            </div>
                                            <p class="card-text mb-2 rich-text-content" th:utext="${#strings.abbreviate(job.content, 120)}">êµ¬ì¸ ë‚´ìš©...</p>
                                            <div class="d-flex flex-wrap gap-1">
                                                <span class="badge bg-light text-dark" th:if="${job.position}" th:text="${job.position}">ì§ì¢…</span>
                                                <span class="badge bg-light text-dark" th:if="${job.education}" th:text="${job.education}">í•™ë ¥</span>
                                            </div>
                                        </div>
                                        <div class="col-md-4 text-end">
                                            <div class="job-meta mb-3">
                                                <small class="text-muted d-block">
                                                    <i class="fas fa-eye me-1"></i>ì¡°íšŒ <span th:text="${job.viewCount ?: 0}">0</span>íšŒ
                                                </small>
                                                <small class="text-muted d-block">
                                                    <i class="fas fa-calendar me-1"></i><span th:text="${#temporals.format(job.createdAt, 'yyyy-MM-dd')}">ë‚ ì§œ</span>
                                                </small>
                                                <small class="text-muted d-block" th:if="${job.endDate}">
                                                    <i class="fas fa-clock me-1"></i>ë§ˆê°: <span th:text="${#temporals.format(job.endDate, 'MM-dd')}">ë§ˆê°ì¼</span>
                                                </small>
                                            </div>
                                            <div class="d-grid gap-2">
                                                <a th:href="@{/job/detail/{id}(id=${job.jobId})}" class="btn btn-outline-success btn-sm">
                                                    <i class="fas fa-eye me-1"></i>ìƒì„¸ë³´ê¸°
                                                </a>
                                                <button class="btn btn-success btn-sm" th:if="${job.jobType == 'RECRUIT'}">
                                                    <i class="fas fa-paper-plane me-1"></i>ì§€ì›í•˜ê¸°
                                                </button>
                                                <button class="btn btn-primary btn-sm" th:if="${job.jobType == 'SEARCH'}">
                                                    <i class="fas fa-phone me-1"></i>ì—°ë½í•˜ê¸°
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- êµ¬ì¸êµ¬ì§ì´ ì—†ëŠ” ê²½ìš° -->
                        <div th:if="${#lists.isEmpty(jobList)}" class="text-center text-muted py-5">
                            <i class="fas fa-briefcase fa-3x mb-3"></i>
                            <h5>ë“±ë¡ëœ ì±„ìš©ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤</h5>
                            <p>ì²« ë²ˆì§¸ ì±„ìš©ì •ë³´ë¥¼ ë“±ë¡í•´ë³´ì„¸ìš”!</p>
                            
                            <div class="btn-group mt-3" role="group">
                                <!-- ì‹œì„¤íšŒì›(FACILITY) ë˜ëŠ” ê´€ë¦¬ì(ADMIN)ë§Œ êµ¬ì¸ë“±ë¡ ê°€ëŠ¥ -->
                                <a th:if="${session.loginMember != null and (session.loginMember.role == 'FACILITY' or session.loginMember.role == 'ADMIN')}" 
                                   href="/job/write" class="btn btn-success">
                                    <i class="fas fa-plus me-1"></i>êµ¬ì¸ë“±ë¡í•˜ê¸°
                                </a>
                                
                                <!-- ì¼ë°˜ì‚¬ìš©ì(USER)ëŠ” êµ¬ì§ë“±ë¡ë§Œ ê°€ëŠ¥ -->
                                <a th:if="${session.loginMember != null and session.loginMember.role == 'USER'}" 
                                   href="/job/write" class="btn btn-info">
                                    <i class="fas fa-plus me-1"></i>êµ¬ì§ë“±ë¡í•˜ê¸°
                                </a>
                            </div>
                            
                            <!-- ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì -->
                            <div th:if="${session.loginMember == null}" class="mt-3">
                                <div class="btn-group" role="group">
                                    <a href="/member/login" class="btn btn-outline-success">
                                        <i class="fas fa-sign-in-alt me-1"></i>ë¡œê·¸ì¸ í›„ êµ¬ì¸ë“±ë¡
                                    </a>
                                    <a href="/member/login" class="btn btn-outline-info">
                                        <i class="fas fa-sign-in-alt me-1"></i>ë¡œê·¸ì¸ í›„ êµ¬ì§ë“±ë¡
                                    </a>
                                </div>
                                <div class="alert alert-light mt-3">
                                    <i class="fas fa-info-circle me-2"></i>
                                    <strong>ì±„ìš© ì‹œìŠ¤í…œ ì•ˆë‚´:</strong><br>
                                    â€¢ <span class="text-success">ì‹œì„¤íšŒì›</span>: êµ¬ì¸ê³µê³  ë“±ë¡ ë° êµ¬ì§ì ì±„ìš©<br>
                                    â€¢ <span class="text-info">ì¼ë°˜ì‚¬ìš©ì</span>: êµ¬ì§ê³µê³  ë“±ë¡ ë° êµ¬ì¸ê³µê³  ì§€ì›
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--
                    &lt;!&ndash; í˜ì´ì§• &ndash;&gt;
                    <nav th:if="${not #lists.isEmpty(jobList)}" aria-label="êµ¬ì¸êµ¬ì§ í˜ì´ì§•">
                        <ul class="pagination justify-content-center">
                            &lt;!&ndash; ì´ì „ í˜ì´ì§€ &ndash;&gt;
                            <li class="page-item" th:classappend="${not pageInfo.hasPrevious} ? 'disabled'">
                                <a class="page-link" 
                                   th:href="@{/job(page=${pageInfo.currentPage - 1}, keyword=${keyword}, jobType=${jobType}, region=${region}, employmentType=${employmentType})}"
                                   aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            &lt;!&ndash; í˜ì´ì§€ ë²ˆí˜¸ &ndash;&gt;
                            <li class="page-item" 
                                th:each="page : ${#numbers.sequence(pageInfo.startPage, pageInfo.endPage)}"
                                th:classappend="${page == pageInfo.currentPage} ? 'active'">
                                <a class="page-link" 
                                   th:href="@{/job(page=${page}, keyword=${keyword}, jobType=${jobType}, region=${region}, employmentType=${employmentType})}"
                                   th:text="${page}">1</a>
                            </li>
                            &lt;!&ndash; ë‹¤ìŒ í˜ì´ì§€ &ndash;&gt;
                            <li class="page-item" th:classappend="${not pageInfo.hasNext} ? 'disabled'">
                                <a class="page-link" 
                                   th:href="@{/job(page=${pageInfo.currentPage + 1}, keyword=${keyword}, jobType=${jobType}, region=${region}, employmentType=${employmentType})}"
                                   aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                    -->

                </div>
            </div>
        </div>
    </main>

    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>
</body>
    <script>
        // ê²€ìƒ‰ í•„í„° ì´ˆê¸°í™”
        function resetFilters() {
            document.getElementById('keyword').value = '';
            document.querySelectorAll('input[name="type"]')[0].checked = true;
            document.getElementById('position').value = '';
            document.getElementById('region').value = '';
            document.getElementById('workType').value = '';
            document.getElementById('experience').value = '';
            document.getElementById('searchForm').submit();
        }
        
        // ì •ë ¬ ìˆœì„œ ë³€ê²½
        function changeSortOrder(value) {
            const url = new URL(window.location);
            url.searchParams.set('sortOrder', value);
            window.location.href = url.toString();
        }
        
        // ì¸ê¸° ê²€ìƒ‰ì–´ í´ë¦­
        document.addEventListener('DOMContentLoaded', function() {
            const popularKeywords = document.querySelectorAll('.badge.bg-light');
            popularKeywords.forEach(function(keyword) {
                keyword.style.cursor = 'pointer';
                keyword.addEventListener('click', function() {
                    document.getElementById('keyword').value = this.textContent;
                    document.getElementById('searchForm').submit();
                });
            });
            
            // ì—”í„°í‚¤ë¡œ ê²€ìƒ‰
            document.getElementById('keyword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    document.getElementById('searchForm').submit();
                }
            });
        });
    </script>\n    \n    <style>\n        /* êµ¬ì¸êµ¬ì§ ì¹´ë“œ ìŠ¤íƒ€ì¼ */\n        .job-info {\n            font-size: 0.9rem;\n        }\n        \n        .job-meta {\n            font-size: 0.8rem;\n        }\n        \n        .badge.bg-light {\n            cursor: pointer;\n            transition: all 0.2s;\n        }\n        \n        .badge.bg-light:hover {\n            background-color: #e9ecef !important;\n            transform: translateY(-1px);\n        }\n        \n        .card:hover {\n            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;\n            transform: translateY(-2px);\n            transition: all 0.3s;\n        }\n        \n        .btn-group .btn-check:checked + .btn {\n            background-color: var(--bs-primary);\n            border-color: var(--bs-primary);\n            color: white;\n        }\n    </style>\n</html>
````

## File: src/main/resources/templates/review/detail.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title th:text="${review.title + ' - CareLink'}">ë¦¬ë·° ìƒì„¸ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container py-4">
            <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                    <li class="breadcrumb-item"><a href="/review">ë¦¬ë·°</a></li>
                    <li class="breadcrumb-item active" aria-current="page">ë¦¬ë·° ìƒì„¸</li>
                </ol>
            </nav>

            <!-- ë¦¬ë·° ID (hidden) -->
            <input type="hidden" id="reviewId" th:value="${review.reviewId}">

            <div class="row">
                <!-- ë¦¬ë·° ìƒì„¸ ë‚´ìš© -->
                <div class="col-lg-8">
                    <div class="card">
                        <!-- ë¦¬ë·° í—¤ë” -->
                        <div class="card-header bg-light">
                            <div class="row align-items-center">
                                <div class="col-md-8">
                                    <h4 class="mb-2" th:text="${review.title}">ë¦¬ë·° ì œëª©</h4>
                                    <div class="d-flex align-items-center mb-2">
                                        <!-- í‰ì  í‘œì‹œ -->
                                        <div class="rating-stars me-3">
                                            <span th:each="i : ${#numbers.sequence(1, 5)}" 
                                                  th:class="${i <= review.rating} ? 'fas fa-star text-warning' : 'far fa-star text-muted'"></span>
                                            <span class="ms-2 fw-bold" th:text="${review.rating} + '.0'">5.0</span>
                                        </div>
                                        <!-- ì‹œì„¤ëª… -->
                                        <a th:href="@{/facility/detail/{id}(id=${review.facilityId})}" class="badge bg-primary text-decoration-none">
                                            <i class="fas fa-building me-1"></i>
                                            <span th:text="${review.facilityName}">ì‹œì„¤ëª…</span>
                                        </a>
                                    </div>
                                    <div class="text-muted small">
                                        <i class="fas fa-user me-1"></i>
                                        <span th:text="${review.memberName}">ì‘ì„±ì</span>
                                        <span class="mx-2">|</span>
                                        <i class="fas fa-calendar me-1"></i>
                                        <span th:text="${#temporals.format(review.createdAt, 'yyyy-MM-dd HH:mm')}">ì‘ì„±ì¼</span>
                                        <span class="mx-2">|</span>
                                        <i class="fas fa-eye me-1"></i>
                                        ì¡°íšŒ <span th:text="${review.viewCount}">0</span>
                                    </div>
                                </div>
                                <div class="col-md-4 text-end">
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-outline-success btn-sm" data-action="likeReview">
                                            <i class="fas fa-thumbs-up me-1"></i>
                                            ì¶”ì²œ <span id="likeCount" th:text="${review.likeCount}">0</span>
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm" data-action="shareReview">
                                            <i class="fas fa-share me-1"></i>
                                            ê³µìœ 
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ë¦¬ë·° ë‚´ìš© -->
                        <div class="card-body">
                            <!-- ì„¸ë¶€ í‰ì  -->
                            <div class="row mb-4" th:if="${review.serviceRating != null}">
                                <div class="col-12">
                                    <h6 class="mb-3">ì„¸ë¶€ í‰ì </h6>
                                    <div class="row">
                                        <div class="col-md-3 col-6 mb-2">
                                            <small class="text-muted">ì„œë¹„ìŠ¤</small>
                                            <div class="rating-detail">
                                                <span th:each="i : ${#numbers.sequence(1, 5)}" 
                                                      th:class="${i <= (review.serviceRating != null ? review.serviceRating : 0)} ? 'fas fa-star text-warning' : 'far fa-star text-muted'"></span>
                                                <span class="ms-1" th:text="${review.serviceRating != null ? review.serviceRating : 0}">0</span>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-6 mb-2">
                                            <small class="text-muted">ì‹œì„¤</small>
                                            <div class="rating-detail">
                                                <span th:each="i : ${#numbers.sequence(1, 5)}" 
                                                      th:class="${i <= (review.facilityRating != null ? review.facilityRating : 0)} ? 'fas fa-star text-warning' : 'far fa-star text-muted'"></span>
                                                <span class="ms-1" th:text="${review.facilityRating != null ? review.facilityRating : 0}">0</span>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-6 mb-2">
                                            <small class="text-muted">ì§ì›</small>
                                            <div class="rating-detail">
                                                <span th:each="i : ${#numbers.sequence(1, 5)}" 
                                                      th:class="${i <= (review.staffRating != null ? review.staffRating : 0)} ? 'fas fa-star text-warning' : 'far fa-star text-muted'"></span>
                                                <span class="ms-1" th:text="${review.staffRating != null ? review.staffRating : 0}">0</span>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-6 mb-2">
                                            <small class="text-muted">ê°€ê²©</small>
                                            <div class="rating-detail">
                                                <span th:each="i : ${#numbers.sequence(1, 5)}" 
                                                      th:class="${i <= (review.priceRating != null ? review.priceRating : 0)} ? 'fas fa-star text-warning' : 'far fa-star text-muted'"></span>
                                                <span class="ms-1" th:text="${review.priceRating != null ? review.priceRating : 0}">0</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ë¦¬ë·° ë‚´ìš© -->
                            <div class="content-area" style="min-height: 200px; line-height: 1.8;">
                                <div class="rich-text-content" th:utext="${review.content}" style="white-space: pre-line;">
                                    ë¦¬ë·° ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                                </div>
                            </div>

                            <!-- ë¦¬ë·° ì´ë¯¸ì§€ -->
                            <div th:if="${not #strings.isEmpty(review.reviewImage1)}" class="mt-4">
                                <h6>ì²¨ë¶€ ì´ë¯¸ì§€</h6>
                                <div class="row">
                                    <div th:if="${not #strings.isEmpty(review.reviewImage1)}" class="col-md-4 mb-2">
                                        <img th:src="${review.reviewImage1}" class="img-fluid rounded review-image" alt="ë¦¬ë·° ì´ë¯¸ì§€ 1">
                                    </div>
                                    <div th:if="${not #strings.isEmpty(review.reviewImage2)}" class="col-md-4 mb-2">
                                        <img th:src="${review.reviewImage2}" class="img-fluid rounded review-image" alt="ë¦¬ë·° ì´ë¯¸ì§€ 2">
                                    </div>
                                    <div th:if="${not #strings.isEmpty(review.reviewImage3)}" class="col-md-4 mb-2">
                                        <img th:src="${review.reviewImage3}" class="img-fluid rounded review-image" alt="ë¦¬ë·° ì´ë¯¸ì§€ 3">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ë¦¬ë·° í‘¸í„° -->
                        <div class="card-footer bg-light">
                            <div class="row">
                                <div class="col-md-6">
                                    <small class="text-muted">
                                        <i class="fas fa-clock me-1"></i>
                                        ìµœì¢… ìˆ˜ì •: <span th:text="${#temporals.format(review.updatedAt, 'yyyy-MM-dd HH:mm')}">ìˆ˜ì •ì¼</span>
                                    </small>
                                </div>
                                <div class="col-md-6 text-end">
                                    <!-- ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥ -->
                                    <div class="btn-group" role="group" th:if="${session.loginMember != null and (session.loginMember.memberId == review.memberId or session.loginMember.role == 'ADMIN')}">
                                        <a th:href="@{/review/edit/{id}(id=${review.reviewId})}" class="btn btn-outline-primary btn-sm">
                                            <i class="fas fa-edit me-1"></i>ìˆ˜ì •
                                        </a>
                                        <button type="button" class="btn btn-outline-danger btn-sm" data-action="deleteReview">
                                            <i class="fas fa-trash me-1"></i>ì‚­ì œ
                                        </button>
                                        <!-- ê´€ë¦¬ìì¸ ê²½ìš° í‘œì‹œ -->
                                        <span th:if="${session.loginMember.role == 'ADMIN' and session.loginMember.memberId != review.memberId}" 
                                              class="badge bg-warning text-dark ms-2">ê´€ë¦¬ì</span>
                                    </div>
                                    <!-- ì‘ì„±ìë„ ì•„ë‹ˆê³  ê´€ë¦¬ìë„ ì•„ë‹Œ ê²½ìš° ì‹ ê³  ë²„íŠ¼ë§Œ í‘œì‹œ -->
                                    <button type="button" class="btn btn-outline-warning btn-sm" 
                                            th:if="${session.loginMember != null and session.loginMember.memberId != review.memberId and session.loginMember.role != 'ADMIN'}"
                                            data-action="reportReview">
                                        <i class="fas fa-exclamation-triangle me-1"></i>ì‹ ê³ 
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- í•˜ë‹¨ ë²„íŠ¼ -->
                    <div class="text-center mt-4">
                        <div class="btn-group" role="group">
                            <a href="/review" class="btn btn-secondary">
                                <i class="fas fa-list me-1"></i>ëª©ë¡ìœ¼ë¡œ
                            </a>
                            <a href="/review/write" class="btn btn-primary">
                                <i class="fas fa-plus me-1"></i>ë¦¬ë·° ì“°ê¸°
                            </a>
                            <button type="button" class="btn btn-info" onclick="window.scrollTo(0, 0)">
                                <i class="fas fa-arrow-up me-1"></i>ë§¨ ìœ„ë¡œ
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ì‚¬ì´ë“œë°” -->
                <div class="col-lg-4">
                    <!-- ì‹œì„¤ ì •ë³´ ì¹´ë“œ -->
                    <div class="card mb-4">
                        <div class="card-header bg-primary text-white">
                            <h6 class="mb-0">
                                <i class="fas fa-building me-2"></i>ì‹œì„¤ ì •ë³´
                            </h6>
                        </div>
                        <div class="card-body">
                            <h6>
                                <a th:href="@{/facility/detail/{id}(id=${review.facilityId})}" 
                                   class="text-decoration-none" 
                                   th:text="${review.facilityName}">ì‹œì„¤ëª…</a>
                            </h6>
                            <p class="text-muted mb-2">
                                <i class="fas fa-map-marker-alt me-1"></i>
                                ì‹œì„¤ ìƒì„¸ë³´ê¸°ì—ì„œ ì£¼ì†Œ í™•ì¸ ê°€ëŠ¥
                            </p>
                            <div class="d-flex align-items-center mb-2">
                                <span class="me-2">í‰ê·  í‰ì :</span>
                                <div class="rating-stars me-2">
                                    <span th:each="i : ${#numbers.sequence(1, 5)}" 
                                          th:class="${i <= (review.facilityAverageRating != null ? review.facilityAverageRating : 0)} ? 'fas fa-star text-warning' : 'far fa-star text-muted'"></span>
                                </div>
                                <span>
                                    <span th:text="${review.facilityAverageRating ?: 0}">0</span>
                                    (<span th:text="${review.facilityReviewCount ?: 0}">0</span>ê°œ)
                                </span>
                            </div>
                            <a th:href="@{/facility/detail/{id}(id=${review.facilityId})}" class="btn btn-outline-primary btn-sm w-100">
                                <i class="fas fa-info-circle me-1"></i>ì‹œì„¤ ìƒì„¸ë³´ê¸°
                            </a>
                        </div>
                    </div>

                    <!-- ë‹¤ë¥¸ ë¦¬ë·° ì¹´ë“œ -->
                    <div class="card" th:if="${not #lists.isEmpty(otherReviews)}">
                        <div class="card-header bg-info text-white">
                            <h6 class="mb-0">
                                <i class="fas fa-comments me-2"></i>ì´ ì‹œì„¤ì˜ ë‹¤ë¥¸ ë¦¬ë·°
                            </h6>
                        </div>
                        <div class="list-group list-group-flush">
                            <a th:each="otherReview : ${otherReviews}"
                               th:href="@{/review/detail/{id}(id=${otherReview.reviewId})}"
                               class="list-group-item list-group-item-action">
                                <div class="d-flex w-100 justify-content-between">
                                    <h6 class="mb-1" th:text="${otherReview.title}">ë¦¬ë·° ì œëª©</h6>
                                    <small class="text-muted">
                                        <span th:each="i : ${#numbers.sequence(1, 5)}" 
                                              th:class="${i <= otherReview.rating} ? 'fas fa-star text-warning' : 'far fa-star text-muted'"></span>
                                    </small>
                                </div>
                                <p class="mb-1 text-truncate rich-text-content" th:utext="${otherReview.content}">ë¦¬ë·° ë‚´ìš©</p>
                                <small class="text-muted">
                                    <span th:text="${otherReview.memberName}">ì‘ì„±ì</span> |
                                    <span th:text="${#temporals.format(otherReview.createdAt, 'yyyy-MM-dd')}">ì‘ì„±ì¼</span>
                                </small>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ì´ë¯¸ì§€ ëª¨ë‹¬ -->
    <div id="imageModal" class="modal">
        <span class="close-modal">&times;</span>
        <img id="modalImage" class="modal-content">
    </div>

    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>

    <!-- JavaScript -->
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- jQuery (review-detail.jsì—ì„œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŒ) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- ê³µí†µ JS -->
    <script th:src="@{/js/common.js}"></script>
    <!-- ë¦¬ë·° ìƒì„¸ JS -->
    <script th:src="@{/js/review-detail.js}"></script>
</body>
</html>
````

## File: src/main/resources/templates/review/write.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ë¦¬ë·° ì‘ì„± - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container py-4">
            <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                    <li class="breadcrumb-item"><a href="/facility/search">ì‹œì„¤ ì°¾ê¸°</a></li>
                    <li class="breadcrumb-item"><a href="/review">ì‹œì„¤ ë¦¬ë·°</a></li>
                    <li class="breadcrumb-item active" aria-current="page">ë¦¬ë·° ì‘ì„±</li>
                </ol>
            </nav>

            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <h4 class="mb-0">
                                <i class="fas fa-star me-2"></i>ì‹œì„¤ ë¦¬ë·° ì‘ì„±
                            </h4>
                        </div>
                        <div class="card-body">
                            <form th:action="@{/review/write}" method="post" th:object="${reviewDTO}" id="reviewForm">
                                <!-- ì‹œì„¤ ID (hidden) -->
                                <input type="hidden" th:field="*{facilityId}" id="facilityId">
                                
                                <!-- ì‹œì„¤ ì„ íƒ -->
                                <div class="mb-4" th:if="${reviewDTO.facilityId == null}">
                                    <label class="form-label fw-bold">ì‹œì„¤ ì„ íƒ *</label>
                                    <select class="form-select" name="facilityId" id="facilitySelect" required>
                                        <option value="">ì‹œì„¤ì„ ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                        <option th:each="facility : ${facilityList}" 
                                                th:value="${facility.facilityId}" 
                                                th:text="${facility.facilityName + ' (' + facility.address + ')'}"
                                                th:selected="${facility.facilityId == reviewDTO.facilityId}"
                                                th:data-status="${facility.status}"
                                                th:disabled="${!facility.normalStatus}">
                                            ì‹œì„¤ëª… (ì£¼ì†Œ)
                                        </option>
                                    </select>
                                    <div class="form-text text-danger" th:if="${facilityList.empty}">
                                        í˜„ì¬ ë“±ë¡ëœ ì‹œì„¤ì´ ì—†ìŠµë‹ˆë‹¤. ì‹œì„¤ ë“±ë¡ í›„ ë¦¬ë·°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.
                                    </div>
                                    <div class="form-text" th:unless="${facilityList.empty}">
                                        ë¦¬ë·°ë¥¼ ì‘ì„±í•  ì‹œì„¤ì„ ì„ íƒí•´ì£¼ì„¸ìš”. ì‚­ì œë˜ê±°ë‚˜ ìŠ¹ì¸ë˜ì§€ ì•Šì€ ì‹œì„¤ì€ ì„ íƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
                                    </div>
                                </div>

                                <!-- ì„ íƒëœ ì‹œì„¤ ì •ë³´ í‘œì‹œ -->
                                <div class="mb-4" th:if="${reviewDTO.facilityId != null and selectedFacility != null}">
                                    <label class="form-label fw-bold">ì„ íƒëœ ì‹œì„¤</label>
                                    <div class="alert" th:classappend="${selectedFacility.normalStatus ? 'alert-info' : 'alert-warning'}">
                                        <i class="fas fa-building me-2"></i>
                                        <strong>ì‹œì„¤ëª…:</strong> <span th:text="${selectedFacility.facilityName}">ì‹œì„¤ëª…</span><br>
                                        <i class="fas fa-map-marker-alt me-2"></i>
                                        <strong>ì£¼ì†Œ:</strong> <span th:text="${selectedFacility.address}">ì£¼ì†Œ</span><br>
                                        <i class="fas fa-tag me-2"></i>
                                        <strong>ìœ í˜•:</strong> <span th:text="${selectedFacility.facilityType}">ìœ í˜•</span><br>
                                        <i class="fas fa-phone me-2"></i>
                                        <strong>ì—°ë½ì²˜:</strong> <span th:text="${selectedFacility.phone}">ì—°ë½ì²˜</span><br>
                                        <i class="fas fa-info-circle me-2"></i>
                                        <strong>ìƒíƒœ:</strong> <span th:text="${selectedFacility.status}">ìƒíƒœ</span>
                                        <div class="mt-2 text-danger" th:if="${!selectedFacility.normalStatus}">
                                            <i class="fas fa-exclamation-triangle me-1"></i>
                                            <span th:text="${selectedFacility.statusMessage}">ìƒíƒœ ë©”ì‹œì§€</span>
                                        </div>
                                    </div>
                                    <div class="mt-2">
                                        <a href="/review/write" class="btn btn-outline-secondary btn-sm">
                                            <i class="fas fa-sync-alt me-1"></i>ë‹¤ë¥¸ ì‹œì„¤ ì„ íƒ
                                        </a>
                                    </div>
                                </div>

                                <!-- ì‹œì„¤ ì„ íƒ ì˜¤ë¥˜ ë©”ì‹œì§€ -->
                                <div class="mb-4" th:if="${reviewDTO.facilityId != null and selectedFacility == null}">
                                    <div class="alert alert-danger">
                                        <i class="fas fa-exclamation-triangle me-2"></i>
                                        ì„ íƒí•œ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì‹œì„¤ì„ ì„ íƒí•´ì£¼ì„¸ìš”.
                                    </div>
                                    <div class="mt-2">
                                        <a href="/review/write" class="btn btn-primary">
                                            <i class="fas fa-redo me-1"></i>ì‹œì„¤ ë‹¤ì‹œ ì„ íƒí•˜ê¸°
                                        </a>
                                    </div>
                                </div>

                                <!-- ì œëª© -->
                                <div class="mb-4">
                                    <label class="form-label fw-bold">ì œëª© *</label>
                                    <input type="text" class="form-control" th:field="*{title}" id="title"
                                           placeholder="ë¦¬ë·° ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ: ì¹œì ˆí•œ ì§ì›ë“¤ê³¼ ê¹¨ë—í•œ ì‹œì„¤)" 
                                           maxlength="200" required>
                                    <div class="form-text">ìµœëŒ€ 200ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
                                </div>

                                <!-- ì „ì²´ í‰ì  -->
                                <div class="mb-4">
                                    <label class="form-label fw-bold">ì „ì²´ í‰ì  *</label>
                                    <div class="rating-input-group">
                                        <div class="d-flex align-items-center">
                                            <div class="rating-stars" id="overallRating">
                                                <span class="star" data-rating="1" title="ë§¤ìš° ë¶ˆë§Œì¡±">â˜…</span>
                                                <span class="star" data-rating="2" title="ë¶ˆë§Œì¡±">â˜…</span>
                                                <span class="star" data-rating="3" title="ë³´í†µ">â˜…</span>
                                                <span class="star" data-rating="4" title="ë§Œì¡±">â˜…</span>
                                                <span class="star" data-rating="5" title="ë§¤ìš° ë§Œì¡±">â˜…</span>
                                            </div>
                                            <span id="ratingText" class="ms-2">í‰ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”</span>
                                        </div>
                                        <input type="hidden" name="rating" id="ratingValue" th:value="${reviewDTO != null ? reviewDTO.rating : ''}" required>
                                    </div>
                                    <div class="form-text">ë³„í‘œë¥¼ í´ë¦­í•˜ì—¬ í‰ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</div>
                                </div>

                                <!-- ì„¸ë¶€ í‰ì  -->
                                <div class="mb-4">
                                    <label class="form-label fw-bold">ì„¸ë¶€ í‰ì </label>
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <div class="rating-group">
                                                <label class="form-label">ì„œë¹„ìŠ¤ í’ˆì§ˆ</label>
                                                <div class="d-flex align-items-center">
                                                    <div class="rating-stars detailed-rating" data-field="serviceRating">
                                                        <span class="star" data-rating="1" title="ë§¤ìš° ë¶ˆë§Œì¡±">â˜…</span>
                                                        <span class="star" data-rating="2" title="ë¶ˆë§Œì¡±">â˜…</span>
                                                        <span class="star" data-rating="3" title="ë³´í†µ">â˜…</span>
                                                        <span class="star" data-rating="4" title="ë§Œì¡±">â˜…</span>
                                                        <span class="star" data-rating="5" title="ë§¤ìš° ë§Œì¡±">â˜…</span>
                                                    </div>
                                                </div>
                                                <input type="hidden" name="serviceRating" class="detailed-rating-input" th:value="${reviewDTO != null ? reviewDTO.serviceRating : ''}">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="rating-group">
                                                <label class="form-label">ì‹œì„¤ í™˜ê²½</label>
                                                <div class="d-flex align-items-center">
                                                    <div class="rating-stars detailed-rating" data-field="facilityRating">
                                                        <span class="star" data-rating="1" title="ë§¤ìš° ë¶ˆë§Œì¡±">â˜…</span>
                                                        <span class="star" data-rating="2" title="ë¶ˆë§Œì¡±">â˜…</span>
                                                        <span class="star" data-rating="3" title="ë³´í†µ">â˜…</span>
                                                        <span class="star" data-rating="4" title="ë§Œì¡±">â˜…</span>
                                                        <span class="star" data-rating="5" title="ë§¤ìš° ë§Œì¡±">â˜…</span>
                                                    </div>
                                                </div>
                                                <input type="hidden" name="facilityRating" class="detailed-rating-input" th:value="${reviewDTO != null ? reviewDTO.facilityRating : ''}">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="rating-group">
                                                <label class="form-label">ì§ì› ì¹œì ˆë„</label>
                                                <div class="d-flex align-items-center">
                                                    <div class="rating-stars detailed-rating" data-field="staffRating">
                                                        <span class="star" data-rating="1" title="ë§¤ìš° ë¶ˆë§Œì¡±">â˜…</span>
                                                        <span class="star" data-rating="2" title="ë¶ˆë§Œì¡±">â˜…</span>
                                                        <span class="star" data-rating="3" title="ë³´í†µ">â˜…</span>
                                                        <span class="star" data-rating="4" title="ë§Œì¡±">â˜…</span>
                                                        <span class="star" data-rating="5" title="ë§¤ìš° ë§Œì¡±">â˜…</span>
                                                    </div>
                                                </div>
                                                <input type="hidden" name="staffRating" class="detailed-rating-input" th:value="${reviewDTO != null ? reviewDTO.staffRating : ''}">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="rating-group">
                                                <label class="form-label">ê°€ê²© ë§Œì¡±ë„</label>
                                                <div class="d-flex align-items-center">
                                                    <div class="rating-stars detailed-rating" data-field="priceRating">
                                                        <span class="star" data-rating="1" title="ë§¤ìš° ë¶ˆë§Œì¡±">â˜…</span>
                                                        <span class="star" data-rating="2" title="ë¶ˆë§Œì¡±">â˜…</span>
                                                        <span class="star" data-rating="3" title="ë³´í†µ">â˜…</span>
                                                        <span class="star" data-rating="4" title="ë§Œì¡±">â˜…</span>
                                                        <span class="star" data-rating="5" title="ë§¤ìš° ë§Œì¡±">â˜…</span>
                                                    </div>
                                                </div>
                                                <input type="hidden" name="priceRating" class="detailed-rating-input" th:value="${reviewDTO != null ? reviewDTO.priceRating : ''}">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-text mt-2">ê° í•­ëª©ë³„ë¡œ ì„¸ë¶€ í‰ì ì„ ë§¤ê²¨ì£¼ì„¸ìš” (ì„ íƒì‚¬í•­).</div>
                                </div>

                                <!-- ë¦¬ë·° ë‚´ìš© -->
                                <div class="mb-4">
                                    <label class="form-label fw-bold">ë¦¬ë·° ë‚´ìš© *</label>
                                    <textarea class="form-control" rows="8" th:field="*{content}" id="content"
                                              placeholder="ì‹œì„¤ ì´ìš© ê²½í—˜ì„ ìì„¸íˆ ì‘ì„±í•´ì£¼ì„¸ìš”.&#10;&#10;ì˜ˆì‹œ:&#10;- ì‹œì„¤ì˜ ì¥ì ê³¼ ë‹¨ì &#10;- ì§ì›ë“¤ì˜ ì„œë¹„ìŠ¤ í’ˆì§ˆ&#10;- ì‹œì„¤ í™˜ê²½ê³¼ ì²­ê²°ë„&#10;- ë‹¤ë¥¸ ì´ìš©ìë“¤ì—ê²Œ ë„ì›€ì´ ë  ì •ë³´" 
                                              maxlength="2000" required
                                              data-rich-editor='{"height": "350px", "maxLength": 2000}'></textarea>
                                    <div class="form-text">
                                        <span id="contentLength">0</span>/2000ì (ìµœì†Œ 10ì ì´ìƒ ì‘ì„±í•´ì£¼ì„¸ìš”)
                                    </div>
                                </div>

                                <!-- ì¶”ì²œ ì—¬ë¶€ -->
                                <div class="mb-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="recommended" name="recommended">
                                        <label class="form-check-label fw-bold" for="recommended">
                                            <i class="fas fa-thumbs-up text-success me-1"></i>
                                            ì´ ì‹œì„¤ì„ ë‹¤ë¥¸ ë¶„ë“¤ê»˜ ì¶”ì²œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
                                        </label>
                                    </div>
                                </div>

                                <!-- ë²„íŠ¼ -->
                                <div class="d-flex justify-content-between">
                                    <button type="button" class="btn btn-secondary" id="cancelBtn">
                                        <i class="fas fa-arrow-left me-1"></i>ì·¨ì†Œ
                                    </button>
                                    <button type="submit" class="btn btn-primary" id="submitBtn">
                                        <i class="fas fa-save me-1"></i>ë¦¬ë·° ë“±ë¡
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- ë¦¬ë·° ì‘ì„± ê°€ì´ë“œ -->
                    <div class="card mt-4">
                        <div class="card-header bg-light">
                            <h6 class="mb-0">
                                <i class="fas fa-lightbulb text-warning me-2"></i>ë¦¬ë·° ì‘ì„± ê°€ì´ë“œ
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="text-success">
                                        <i class="fas fa-check-circle me-1"></i>ì¢‹ì€ ë¦¬ë·° ì‘ì„±ë²•
                                    </h6>
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-check text-success me-2"></i>ì‹¤ì œ ì´ìš© ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ì‘ì„±</li>
                                        <li><i class="fas fa-check text-success me-2"></i>ì‹œì„¤ì˜ ì¥ë‹¨ì ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…</li>
                                        <li><i class="fas fa-check text-success me-2"></i>ë‹¤ë¥¸ ì´ìš©ìë“¤ì—ê²Œ ë„ì›€ì´ ë˜ëŠ” ì •ë³´ í¬í•¨</li>
                                        <li><i class="fas fa-check text-success me-2"></i>ê°ê´€ì ì´ê³  ì •í™•í•œ ì •ë³´ ì œê³µ</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="text-danger">
                                        <i class="fas fa-times-circle me-1"></i>ì£¼ì˜ì‚¬í•­
                                    </h6>
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-times text-danger me-2"></i>ìš•ì„¤ì´ë‚˜ ë¹„ë°© ê¸ˆì§€</li>
                                        <li><i class="fas fa-times text-danger me-2"></i>í—ˆìœ„ ì •ë³´ ì‘ì„± ê¸ˆì§€</li>
                                        <li><i class="fas fa-times text-danger me-2"></i>ê°œì¸ì •ë³´ ë…¸ì¶œ ê¸ˆì§€</li>
                                        <li><i class="fas fa-times text-danger me-2"></i>ê´‘ê³ ì„± ë‚´ìš© ê¸ˆì§€</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- í‘¸í„° -->
    <div th:replace="~{layout/footer :: footer}"></div>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>
    
    <!-- ë¦¬ë·° ì‘ì„± ì „ìš© JavaScript -->
    <script src="/js/review-write.js"></script>

    <style>
        /* ì „ì²´ í‰ì  ìŠ¤íƒ€ì¼ */
        #overallRating {
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        #overallRating .star {
            color: #ddd;
            transition: color 0.2s;
            cursor: pointer;
            user-select: none;
            display: inline-block;
            margin-right: 4px;
        }
        
        #overallRating .star:hover,
        #overallRating .star.active {
            color: #ffc107;
        }
        
        /* ì„¸ë¶€ í‰ì  ìŠ¤íƒ€ì¼ */
        .detailed-rating {
            font-size: 1.2rem;
            cursor: pointer;
        }
        
        .detailed-rating .star {
            color: #ddd;
            transition: color 0.2s;
            cursor: pointer;
            user-select: none;
            display: inline-block;
            margin-right: 2px;
        }
        
        .detailed-rating .star:hover,
        .detailed-rating .star.active {
            color: #ffc107;
        }
        
        /* ë³„ì  ê·¸ë£¹ ì „ìš© ìŠ¤íƒ€ì¼ë¡œ common.css ì˜¤ë²„ë¼ì´ë“œ */
        .rating-input-group .rating-stars .star {
            font-size: 1.5rem !important;
            cursor: pointer !important;
            display: inline-block !important;
        }
        
        .rating-group .rating-stars .star {
            font-size: 1.2rem !important;
            cursor: pointer !important;
            display: inline-block !important;
        }
        
        /* í˜¸ë²„ íš¨ê³¼ ìˆ˜ì • */
        .detailed-rating .star:hover ~ .star {
            color: #ddd !important;
        }
        
        .detailed-rating:hover .star {
            color: #ffc107;
        }
        
        .detailed-rating .star:hover ~ .star {
            color: #ddd !important;
        }
        
        #overallRating .star:hover ~ .star {
            color: #ddd !important;
        }
        
        #overallRating:hover .star {
            color: #ffc107;
        }
        
        #overallRating .star:hover ~ .star {
            color: #ddd !important;
        }
        
        /* í‰ì ì— ëŒ€í•œ ë””ë²„ê¹…ìš© ìŠ¤íƒ€ì¼ (ì„ì‹œ) */
        .detailed-rating {
            border: 1px solid transparent;
        }
        
        .detailed-rating:hover {
            border: 1px solid #007bff;
            border-radius: 4px;
            padding: 2px;
        }
    </style>
    
</body>
</html>
````

## File: src/main/java/com/example/carelink/controller/JobController.java
````java
package com.example.carelink.controller;

import com.example.carelink.common.Constants;
import com.example.carelink.dto.JobDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.service.JobService;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

import javax.servlet.http.HttpSession;
import java.util.List;

/**
 * êµ¬ì¸êµ¬ì§ ê²Œì‹œíŒ ì»¨íŠ¸ë¡¤ëŸ¬
 * íŒ€ì› C ë‹´ë‹¹
 */
@Controller
@RequestMapping("/job")
@RequiredArgsConstructor
public class JobController {
    
    private final JobService jobService;

    /**
     * êµ¬ì¸êµ¬ì§ ëª©ë¡ í˜ì´ì§€
     */
    @GetMapping
    public String listPage(Model model,
                          @RequestParam(defaultValue = "1") int page,
                          @RequestParam(defaultValue = "") String keyword,
                          @RequestParam(defaultValue = "") String jobType) {

        List<JobDTO> jobList = jobService.getJobList(page, keyword, jobType);
        model.addAttribute("jobList", jobList);
        model.addAttribute("keyword", keyword);
        model.addAttribute("jobType", jobType);
        model.addAttribute("currentPage", page);
        
        return "job/list";
    }

    /**
     * êµ¬ì¸êµ¬ì§ ì‘ì„± í˜ì´ì§€ ë¡œë“œ
     * ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ëª¨ë‘ ì ‘ê·¼ ê°€ëŠ¥ (ê¶Œí•œë³„ íƒ€ì… ì œí•œì€ POSTì—ì„œ ì²˜ë¦¬)
     */
    @GetMapping("/write")
    public String writePage(@RequestParam(defaultValue = "RECRUIT") String type, Model model, HttpSession session) {
        // ë¡œê·¸ì¸ ì²´í¬ë§Œ ìˆ˜í–‰
        MemberDTO loggedInMember = getCurrentMember(session);
        if (loggedInMember == null) {
            session.setAttribute("errorMessage", "ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”.");
            return "redirect:/member/login";
        }
        
        // ê¶Œí•œë³„ ê¸°ë³¸ íƒ€ì… ì„¤ì • (ì—„ê²©í•œ ì²´í¬ ì œê±°)
        String defaultType = type;
        if ("FACILITY".equals(loggedInMember.getRole())) {
            defaultType = "RECRUIT"; // ì‹œì„¤íšŒì›ì€ êµ¬ì¸ ê¸°ë³¸
        } else if ("USER".equals(loggedInMember.getRole())) {
            defaultType = "SEARCH"; // ì¼ë°˜íšŒì›ì€ êµ¬ì§ ê¸°ë³¸
        }
        // ê´€ë¦¬ìëŠ” ìš”ì²­ë°›ì€ íƒ€ì… ê·¸ëŒ€ë¡œ ì‚¬ìš©

        JobDTO jobDTO = new JobDTO();
        jobDTO.setJobType(defaultType);
        model.addAttribute("jobDTO", jobDTO);
        model.addAttribute("selectedType", defaultType);
        model.addAttribute("currentMember", loggedInMember);
        return "job/write";
    }

    /**
     * êµ¬ì¸êµ¬ì§ ë“±ë¡ ì²˜ë¦¬ (ê¶Œí•œë³„ íƒ€ì… ì œí•œ ì ìš©)
     */
    @PostMapping("/write")
    public String writeJob(@ModelAttribute JobDTO jobDTO, HttpSession session) {
        // ë¡œê·¸ì¸ ì²´í¬
        MemberDTO loggedInMember = getCurrentMember(session);
        if (loggedInMember == null) {
            session.setAttribute("errorMessage", "ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”.");
            return "redirect:/member/login";
        }
        
        // ê¶Œí•œë³„ íƒ€ì… ìœ íš¨ì„± ê²€ì‚¬ (POST ì²˜ë¦¬ ì‹œì ì—ì„œ ìˆ˜í–‰)
        String jobType = jobDTO.getJobType();
        String userRole = loggedInMember.getRole();
        
        // ì‹œì„¤íšŒì›ì´ êµ¬ì§ê¸€ì„ ì‘ì„±í•˜ë ¤ê³  í•˜ëŠ” ê²½ìš°
        if ("FACILITY".equals(userRole) && "SEARCH".equals(jobType)) {
            session.setAttribute("errorMessage", "ì‹œì„¤íšŒì›ì€ êµ¬ì¸ê³µê³ ë§Œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/job/write?type=RECRUIT";
        }
        
        // ì¼ë°˜íšŒì›ì´ êµ¬ì¸ê¸€ì„ ì‘ì„±í•˜ë ¤ê³  í•˜ëŠ” ê²½ìš°
        if ("USER".equals(userRole) && "RECRUIT".equals(jobType)) {
            session.setAttribute("errorMessage", "ì¼ë°˜íšŒì›ì€ êµ¬ì§ê³µê³ ë§Œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/job/write?type=SEARCH";
        }

        // ê¸°ë³¸ê°’ ì„¤ì •
        if (jobDTO.getStatus() == null || jobDTO.getStatus().isEmpty()) {
            jobDTO.setStatus("ACTIVE");
        }

        // í˜„ì¬ ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì •ë³´ ì„¤ì •
        jobDTO.setMemberId(loggedInMember.getMemberId());

        // priority ê¸°ë³¸ê°’ ì„¤ì • (NULL ë°©ì§€)
        if (jobDTO.getPriority() == null) {
            jobDTO.setPriority(0);
        }

        try {
            // ì„œë¹„ìŠ¤ í˜¸ì¶œ
            jobService.insertJob(jobDTO);
            session.setAttribute("successMessage", "ê³µê³ ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return "redirect:/job";
        } catch (Exception e) {
            session.setAttribute("errorMessage", "ê³µê³  ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            return "redirect:/job/write?type=" + jobType;
        }
    }

    @GetMapping("/detail/{id}")
    public String detailPage(@PathVariable Long id, Model model, HttpSession session) {
        try {
            JobDTO job = jobService.getJobById(id);

            if (job == null) {
                session.setAttribute("errorMessage", "í•´ë‹¹ êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/job";
            }

            String formattedContent = "";
            if (job.getContent() != null) {
                formattedContent = job.getContent().replace(System.lineSeparator(), "<br>");
                formattedContent = formattedContent.replace("\n", "<br>");
            }
            model.addAttribute("formattedJobContent", formattedContent);

            MemberDTO loggedInMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (loggedInMember == null || !job.getMemberId().equals(loggedInMember.getMemberId())) {
                // jobService.increaseViewCount(id);
            }

            model.addAttribute("job", job);

            return "job/detail";

        } catch (Exception e) {
            e.printStackTrace();
            session.setAttribute("errorMessage", "êµ¬ì¸ê³µê³  ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/job";
        }
    }

    /**
     * êµ¬ì¸êµ¬ì§ ìˆ˜ì • í˜ì´ì§€ (ì‘ì„±ìë§Œ ì ‘ê·¼ ê°€ëŠ¥)
     */
    @GetMapping("/edit/{id}")
    public String editPage(@PathVariable Long id, Model model, HttpSession session) {
        // ë¡œê·¸ì¸ ì²´í¬
        MemberDTO loggedInMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loggedInMember == null) {
            return "redirect:/member/login";
        }
        
        JobDTO job = jobService.getJobById(id);
        if (job == null) {
            session.setAttribute("errorMessage", "í•´ë‹¹ êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            return "redirect:/job";
        }
        
        // ìˆ˜ì • ê¶Œí•œ ì²´í¬ (ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì)
        if (!canEditJob(loggedInMember, job.getMemberId())) {
            session.setAttribute("errorMessage", "ìˆ˜ì • ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/job/detail/" + id;
        }
        
        model.addAttribute("jobDTO", job);
        return "job/edit";
    }
    
    /**
     * êµ¬ì¸êµ¬ì§ ìˆ˜ì • ì²˜ë¦¬ (ì‘ì„±ìë§Œ ê°€ëŠ¥)
     */
    @PostMapping("/edit/{id}")
    public String editJob(@PathVariable Long id, @ModelAttribute JobDTO jobDTO, HttpSession session) {
        // ë¡œê·¸ì¸ ì²´í¬
        MemberDTO loggedInMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loggedInMember == null) {
            return "redirect:/member/login";
        }
        
        JobDTO existingJob = jobService.getJobById(id);
        if (existingJob == null) {
            session.setAttribute("errorMessage", "í•´ë‹¹ êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            return "redirect:/job";
        }
        
        // ìˆ˜ì • ê¶Œí•œ ì²´í¬ (ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì)
        if (!canEditJob(loggedInMember, existingJob.getMemberId())) {
            session.setAttribute("errorMessage", "ìˆ˜ì • ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/job/detail/" + id;
        }
        
        jobDTO.setJobId(id);
        jobDTO.setMemberId(loggedInMember.getMemberId()); // ì‘ì„±ì ì •ë³´ ìœ ì§€
        jobService.updateJob(jobDTO);
        return "redirect:/job/detail/" + id;
    }
    
    /**
     * êµ¬ì¸êµ¬ì§ ì‚­ì œ (ì‘ì„±ìë§Œ ê°€ëŠ¥)
     */
    @PostMapping("/delete/{id}")
    public String deleteJob(@PathVariable Long id, HttpSession session) {
        // ë¡œê·¸ì¸ ì²´í¬
        MemberDTO loggedInMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loggedInMember == null) {
            return "redirect:/member/login";
        }
        
        JobDTO existingJob = jobService.getJobById(id);
        if (existingJob == null) {
            session.setAttribute("errorMessage", "í•´ë‹¹ êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            return "redirect:/job";
        }
        
        // ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì ê¶Œí•œ ì²´í¬
        boolean isOwner = existingJob.getMemberId().equals(loggedInMember.getMemberId());
        boolean isAdmin = "ADMIN".equals(loggedInMember.getRole());
        
        if (!isOwner && !isAdmin) {
            session.setAttribute("errorMessage", "ì‚­ì œ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ì‘ì„±ìë§Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/job/detail/" + id;
        }
        
        jobService.deleteJob(id);
        session.setAttribute("successMessage", "êµ¬ì¸ê³µê³ ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
        return "redirect:/job";
    }

    /**
     * êµ¬ì¸ê³µê³ ì— ì§€ì›í•˜ê¸° (ê°œì¸ íšŒì›ë§Œ ê°€ëŠ¥)
     * POST ìš”ì²­ìœ¼ë¡œ ì§€ì› ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
     */
    @PostMapping("/{id}/apply")
    public String applyForJob(@PathVariable Long id, HttpSession session, RedirectAttributes redirectAttributes) {
        // 1. ë¡œê·¸ì¸ ì—¬ë¶€ ë° íšŒì› ìœ í˜• í™•ì¸ (ê°œì¸ íšŒì›ë§Œ ì§€ì› ê°€ëŠ¥í•˜ë„ë¡)
        MemberDTO loggedInMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loggedInMember == null) {
            redirectAttributes.addFlashAttribute("errorMessage", "ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”.");
            return "redirect:/member/login";
        }
        if (!"USER".equals(loggedInMember.getRole())) {
            redirectAttributes.addFlashAttribute("errorMessage", "ê°œì¸ íšŒì›ë§Œ êµ¬ì¸ê³µê³ ì— ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/job/detail/" + id;
        }

        try {
            // 2. JobServiceë¥¼ í†µí•´ ì§€ì› ë¡œì§ ìˆ˜í–‰
            // ì´ ë©”ì„œë“œëŠ” JobServiceì— ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. (ì•„ë˜ ì°¸ê³ )
            jobService.applyForJob(id, loggedInMember.getMemberId());

            redirectAttributes.addFlashAttribute("successMessage", "êµ¬ì¸ê³µê³  ì§€ì›ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
            return "redirect:/job/detail/" + id; // ì§€ì› ì™„ë£Œ í›„ ìƒì„¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        } catch (IllegalArgumentException e) {
            // ì˜ˆë¥¼ ë“¤ì–´, ì´ë¯¸ ì§€ì›í–ˆê±°ë‚˜, ì—†ëŠ” ê³µê³ ì— ì§€ì› ì‹œ
            redirectAttributes.addFlashAttribute("errorMessage", e.getMessage());
            return "redirect:/job/detail/" + id;
        } catch (Exception e) {
            // ê¸°íƒ€ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ ì‹œ
            redirectAttributes.addFlashAttribute("errorMessage", "êµ¬ì¸ê³µê³  ì§€ì› ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            return "redirect:/job/detail/" + id;
        }
    }
    
    // ================= ê¶Œí•œ ì²´í¬ ë©”ì„œë“œë“¤ =================
    
    /**
     * í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì¡°íšŒ
     */
    private MemberDTO getCurrentMember(HttpSession session) {
        return (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
    }
    
    /**
     * êµ¬ì¸ê³µê³  ì‘ì„± ê¶Œí•œ í™•ì¸ (ì‹œì„¤íšŒì›, ê´€ë¦¬ì)
     */
    private boolean canWriteRecruit(MemberDTO member) {
        return member != null && ("FACILITY".equals(member.getRole()) || "ADMIN".equals(member.getRole()));
    }
    
    /**
     * êµ¬ì§ê³µê³  ì‘ì„± ê¶Œí•œ í™•ì¸ (ì¼ë°˜íšŒì›, ê´€ë¦¬ì)
     */
    private boolean canWriteSearch(MemberDTO member) {
        return member != null && ("USER".equals(member.getRole()) || "ADMIN".equals(member.getRole()));
    }
    
    /**
     * ìˆ˜ì •/ì‚­ì œ ê¶Œí•œ í™•ì¸ (ì‘ì„±ì, ê´€ë¦¬ì)
     */
    private boolean canEditJob(MemberDTO member, Long authorId) {
        return member != null && (member.getMemberId().equals(authorId) || "ADMIN".equals(member.getRole()));
    }
    
    /**
     * ì§€ì›/ì—°ë½ ê¶Œí•œ í™•ì¸ (ì‘ì„±ìê°€ ì•„ë‹Œ ë¡œê·¸ì¸ ì‚¬ìš©ì)
     */
    private boolean canApplyOrContact(MemberDTO member, Long authorId) {
        return member != null && !member.getMemberId().equals(authorId);
    }
    
    /**
     * ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
     */
    private boolean isAdmin(MemberDTO member) {
        return member != null && "ADMIN".equals(member.getRole());
    }
}
````

## File: src/main/java/com/example/carelink/service/JobService.java
````java
package com.example.carelink.service;

import com.example.carelink.dao.JobMapper;
import com.example.carelink.dto.JobApplicationDTO;
import com.example.carelink.dto.JobDTO;
import com.example.carelink.dao.JobApplicationMapper;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;

/**
 * êµ¬ì¸êµ¬ì§ ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì„œë¹„ìŠ¤
 * íŒ€ì› C ë‹´ë‹¹ - ê°œì„  ë²„ì „
 */
@Slf4j
@Service
@RequiredArgsConstructor
public class JobService {
    
    private final JobMapper jobMapper;
    private final JobApplicationMapper jobApplicationMapper;

    /**
     * êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ
     */
    public List<JobDTO> getJobList(int currentPage, String keyword, String jobType) {
        log.info("êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - page: {}, keyword: {}, jobType: {}", currentPage, keyword, jobType);
        
        try {
            JobDTO searchDTO = new JobDTO();
            
            int pageSize = 10;
            searchDTO.setSize(pageSize);
            searchDTO.setPage((currentPage - 1) * pageSize);
            
            if (keyword != null && !keyword.trim().isEmpty()) {
                searchDTO.setSearchKeyword(keyword.trim());
            }
            
            if (jobType != null && !jobType.trim().isEmpty()) {
                searchDTO.setJobType(jobType.trim());
            }
            
            List<JobDTO> jobList = jobMapper.getJobList(searchDTO);
            log.info("êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", jobList.size());
            
            return jobList;
        } catch (Exception e) {
            log.error("êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            // ì„ì‹œë¡œ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜ (ê°œë°œ ì´ˆê¸° ì—ëŸ¬ ë°©ì§€)
            return new ArrayList<>();
        }
    }
    
    /**
     * êµ¬ì¸êµ¬ì§ ìƒì„¸ ì •ë³´ ì¡°íšŒ
     */
    public JobDTO getJobById(Long id) {
        log.info("êµ¬ì¸êµ¬ì§ ìƒì„¸ ì¡°íšŒ ì‹œì‘ - jobId: {}", id);
        
        try {
            JobDTO job = jobMapper.findJobById(id);
            if (job == null) {
                log.warn("êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ - jobId: {}", id);
                throw new RuntimeException("í•´ë‹¹ êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + id);
            }
            
            // ì¡°íšŒìˆ˜ ì¦ê°€ëŠ” ë³„ë„ ë©”ì„œë“œë¡œ ì²˜ë¦¬ (í˜„ì¬ëŠ” ì£¼ì„ ì²˜ë¦¬)
            // jobMapper.incrementViewCount(id);
            log.info("êµ¬ì¸êµ¬ì§ ìƒì„¸ ì¡°íšŒ ì™„ë£Œ - jobId: {}, title: {}", id, job.getTitle());
            
            return job;
        } catch (Exception e) {
            log.error("êµ¬ì¸êµ¬ì§ ìƒì„¸ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - jobId: {}", id, e);
            
            // ì„ì‹œë¡œ ê¸°ë³¸ êµ¬ì¸êµ¬ì§ ì •ë³´ ë°˜í™˜ (ê°œë°œ ì´ˆê¸° ì—ëŸ¬ ë°©ì§€)
            JobDTO job = new JobDTO();
            job.setJobId(id);
            job.setTitle("êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
            job.setContent("ì‹œìŠ¤í…œ ì˜¤ë¥˜ë¡œ ì¸í•´ ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            job.setJobType("RECRUIT");
            job.setWorkType("FULL_TIME");
            job.setPosition("ë¯¸ì •");
            job.setSalaryMin(java.math.BigDecimal.ZERO);
            job.setSalaryMax(java.math.BigDecimal.ZERO);
            job.setWorkLocation("ë¯¸ì •");
            job.setStatus("ACTIVE");
            job.setMemberId(1L);
            job.setViewCount(0);
            
            return job;
        }
    }
    
    /**
     * êµ¬ì¸êµ¬ì§ ë“±ë¡
     */
    public int insertJob(JobDTO jobDTO) {
        log.info("êµ¬ì¸êµ¬ì§ ë“±ë¡ ì‹œì‘ - title: {}, jobType: {}", jobDTO.getTitle(), jobDTO.getJobType());
        
        try {
            // í•„ìˆ˜ ê°’ ê²€ì¦
            validateJobData(jobDTO);
            
            // ë°ì´í„° ì •ë¦¬ ë° ì¤‘ë³µ ì œê±° (ëˆ„ì  ë°©ì§€)
            cleanAndValidateJobData(jobDTO);
            
            // ê¸°ë³¸ê°’ ì„¤ì •
            if (jobDTO.getStatus() == null) {
                jobDTO.setStatus("ACTIVE");
            }
            if (jobDTO.getPriority() == null) {
                jobDTO.setPriority(0);
            }
            
            int result = jobMapper.insertJob(jobDTO);
            log.info("êµ¬ì¸êµ¬ì§ ë“±ë¡ ì™„ë£Œ - jobId: {}", jobDTO.getJobId());
            
            return result;
        } catch (Exception e) {
            log.error("êµ¬ì¸êµ¬ì§ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("êµ¬ì¸êµ¬ì§ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * êµ¬ì¸êµ¬ì§ ìˆ˜ì •
     */
    public int updateJob(JobDTO jobDTO) {
        log.info("êµ¬ì¸êµ¬ì§ ìˆ˜ì • ì‹œì‘ - jobId: {}, title: {}", jobDTO.getJobId(), jobDTO.getTitle());
        
        try {
            // êµ¬ì¸êµ¬ì§ ì¡´ì¬ í™•ì¸
            JobDTO existingJob = jobMapper.findJobById(jobDTO.getJobId());
            if (existingJob == null) {
                throw new RuntimeException("ìˆ˜ì •í•  êµ¬ì¸êµ¬ì§ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + jobDTO.getJobId());
            }
            
            // í•„ìˆ˜ ê°’ ê²€ì¦
            validateJobData(jobDTO);
            
            // ë°ì´í„° ì •ë¦¬ ë° ì¤‘ë³µ ì œê±° (ëˆ„ì  ë°©ì§€)
            cleanAndValidateJobData(jobDTO);

            // priority null ì²´í¬ ë° ê¸°ë³¸ê°’ ì„¤ì • ë¡œì§ ì¶”ê°€
            if (jobDTO.getPriority() == null) {
                jobDTO.setPriority(0);
                log.warn("priority ê°’ì´ nullì´ì–´ì„œ 0ìœ¼ë¡œ ìë™ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. jobId: {}", jobDTO.getJobId());
            }

            int result = jobMapper.updateJob(jobDTO);
            log.info("êµ¬ì¸êµ¬ì§ ìˆ˜ì • ì™„ë£Œ - jobId: {}", jobDTO.getJobId());
            
            return result;
        } catch (Exception e) {
            log.error("êµ¬ì¸êµ¬ì§ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - jobId: {}", jobDTO.getJobId(), e);
            throw new RuntimeException("êµ¬ì¸êµ¬ì§ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * êµ¬ì¸êµ¬ì§ ì‚­ì œ
     */
    public int deleteJob(Long id) {
        log.info("êµ¬ì¸êµ¬ì§ ì‚­ì œ ì‹œì‘ - jobId: {}", id);
        
        try {
            int result = jobMapper.deleteJob(id);
            log.info("êµ¬ì¸êµ¬ì§ ì‚­ì œ ì™„ë£Œ - jobId: {}", id);
            
            return result;
        } catch (Exception e) {
            log.error("êµ¬ì¸êµ¬ì§ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - jobId: {}", id, e);
            throw new RuntimeException("êµ¬ì¸êµ¬ì§ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ì¸ê¸° êµ¬ì¸êµ¬ì§ ì¡°íšŒ
     */
    public List<JobDTO> getPopularJobs() {
        try {
            return jobMapper.getPopularJobs();
        } catch (Exception e) {
            log.error("ì¸ê¸° êµ¬ì¸êµ¬ì§ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return new ArrayList<>();
        }
    }
    
    /**
     * ì „ì²´ êµ¬ì¸êµ¬ì§ ìˆ˜ ì¡°íšŒ (í†µê³„ìš©)
     */
    public int getJobCount() {
        try {
            return jobMapper.getJobCount();
        } catch (Exception e) {
            log.error("êµ¬ì¸êµ¬ì§ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0; // ì˜¤ë¥˜ ì‹œ 0 ë°˜í™˜
        }
    }
    
    /**
     * êµ¬ì¸êµ¬ì§ ë°ì´í„° ìœ íš¨ì„± ê²€ì¦
     */
    private void validateJobData(JobDTO jobDTO) {
        if (jobDTO.getTitle() == null || jobDTO.getTitle().trim().isEmpty()) {
            throw new IllegalArgumentException("ì œëª©ì€ í•„ìˆ˜ ì…ë ¥ê°’ì…ë‹ˆë‹¤.");
        }
        if (jobDTO.getContent() == null || jobDTO.getContent().trim().isEmpty()) {
            throw new IllegalArgumentException("ë‚´ìš©ì€ í•„ìˆ˜ ì…ë ¥ê°’ì…ë‹ˆë‹¤.");
        }
        if (jobDTO.getJobType() == null || jobDTO.getJobType().trim().isEmpty()) {
            throw new IllegalArgumentException("êµ¬ì¸êµ¬ì§ ìœ í˜•ì€ í•„ìˆ˜ ì…ë ¥ê°’ì…ë‹ˆë‹¤.");
        }
        if (jobDTO.getMemberId() == null) {
            throw new IllegalArgumentException("ì‘ì„±ì ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.");
        }
    }
    
    /**
     * êµ¬ì¸êµ¬ì§ ë°ì´í„° ì •ë¦¬ ë° ì¤‘ë³µ ì œê±° (ëˆ„ì  ë°©ì§€)
     */
    private void cleanAndValidateJobData(JobDTO jobDTO) {
        log.info("ë°ì´í„° ì •ë¦¬ ì‹œì‘ - jobId: {}", jobDTO.getJobId());
        
        // ì œëª© ì •ë¦¬
        if (jobDTO.getTitle() != null) {
            jobDTO.setTitle(jobDTO.getTitle().trim());
        }
        
        // ë‚´ìš© ì •ë¦¬
        if (jobDTO.getContent() != null) {
            jobDTO.setContent(jobDTO.getContent().trim());
        }
        
        // ê¸‰ì—¬ ì„¤ëª… ì •ë¦¬ (ì¤‘ë³µ ì œê±°)
        if (jobDTO.getSalaryDescription() != null && !jobDTO.getSalaryDescription().trim().isEmpty()) {
            String cleanSalaryDesc = cleanDuplicateValues(jobDTO.getSalaryDescription());
            jobDTO.setSalaryDescription(cleanSalaryDesc);
            log.debug("ê¸‰ì—¬ ì„¤ëª… ì •ë¦¬ë¨: {} -> {}", jobDTO.getSalaryDescription(), cleanSalaryDesc);
        }
        
        // ê·¼ë¬´ì‹œê°„ ì •ë¦¬ (ì¤‘ë³µ ì œê±°)
        if (jobDTO.getWorkHours() != null && !jobDTO.getWorkHours().trim().isEmpty()) {
            String cleanWorkHours = cleanDuplicateValues(jobDTO.getWorkHours());
            jobDTO.setWorkHours(cleanWorkHours);
            log.debug("ê·¼ë¬´ì‹œê°„ ì •ë¦¬ë¨: {} -> {}", jobDTO.getWorkHours(), cleanWorkHours);
        }
        
        // íšŒì‚¬ëª… ì •ë¦¬
        if (jobDTO.getFacilityName() != null) {
            jobDTO.setFacilityName(jobDTO.getFacilityName().trim());
        }
        
        // ê·¼ë¬´ì§€ ì •ë¦¬
        if (jobDTO.getWorkLocation() != null) {
            jobDTO.setWorkLocation(jobDTO.getWorkLocation().trim());
        }
        
        // ì—°ë½ì²˜ ì •ë¦¬
        if (jobDTO.getContactPhone() != null) {
            jobDTO.setContactPhone(jobDTO.getContactPhone().trim());
        }
        
        // ìê²©ì¦ ì •ë¦¬ (ì¤‘ë³µ ì œê±°)
        if (jobDTO.getQualifications() != null && !jobDTO.getQualifications().trim().isEmpty()) {
            String cleanQualifications = cleanDuplicateValues(jobDTO.getQualifications());
            jobDTO.setQualifications(cleanQualifications);
        }
        
        log.info("ë°ì´í„° ì •ë¦¬ ì™„ë£Œ - jobId: {}", jobDTO.getJobId());
    }
    
    /**
     * ì½¤ë§ˆë¡œ êµ¬ë¶„ëœ ê°’ë“¤ì˜ ì¤‘ë³µ ì œê±° ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ
     */
    private String cleanDuplicateValues(String input) {
        if (input == null || input.trim().isEmpty()) {
            return input;
        }
        
        try {
            // ì½¤ë§ˆë¡œ ë¶„ë¦¬í•˜ì—¬ ì¤‘ë³µ ì œê±°
            String[] values = input.split(",");
            return java.util.Arrays.stream(values)
                    .map(String::trim)
                    .filter(s -> !s.isEmpty())
                    .distinct()
                    .collect(java.util.stream.Collectors.joining(", "));
        } catch (Exception e) {
            log.warn("ê°’ ì •ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ, ì›ë³¸ ê°’ ë°˜í™˜: {}", input, e);
            return input.trim();
        }
    }

    /**
     * êµ¬ì¸ê³µê³ ì— ì§€ì›í•˜ëŠ” ë¡œì§
     * @param jobId ì§€ì›í•  êµ¬ì¸ê³µê³ ì˜ ID
     * @param applicantMemberId ì§€ì›í•˜ëŠ” ê°œì¸ íšŒì›ì˜ ID
     * @throws IllegalArgumentException ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨ ì‹œ
     */
    @Transactional // íŠ¸ëœì­ì…˜ì´ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ ë‹¤ì‹œ í•œë²ˆ í™•ì¸ (í•„ìˆ˜)
    public void applyForJob(Long jobId, Long applicantMemberId) {
        log.info("êµ¬ì¸ê³µê³  ì§€ì› ë¡œì§ ì‹œì‘ - jobId: {}, applicantMemberId: {}", jobId, applicantMemberId);

        JobDTO jobDTO = jobMapper.findJobById(jobId);

        if (jobDTO == null) {
            log.warn("ì§€ì›í•  êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ - jobId: {}", jobId);
            throw new IllegalArgumentException("ì§€ì›í•  êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }

        // 1. ì´ë¯¸ ì§€ì›í–ˆëŠ”ì§€ í™•ì¸ (ì¤‘ë³µ ì§€ì› ë°©ì§€)
        int existingApplications = jobApplicationMapper.countByJobIdAndApplicantMemberId(jobId, applicantMemberId);
        if (existingApplications > 0) {
            log.warn("ì´ë¯¸ ì§€ì›í•œ êµ¬ì¸ê³µê³ ì…ë‹ˆë‹¤ - jobId: {}, applicantMemberId: {}", jobId, applicantMemberId);
            throw new IllegalArgumentException("ì´ë¯¸ ì§€ì›í•œ êµ¬ì¸ê³µê³ ì…ë‹ˆë‹¤.");
        }

        // 2. ì§€ì› ì •ë³´ DTO ìƒì„± ë° ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
        JobApplicationDTO jobApplication = new JobApplicationDTO();
        jobApplication.setJobId(jobId);
        jobApplication.setApplicantMemberId(applicantMemberId);
        jobApplication.setApplicationDate(LocalDateTime.now()); // í˜„ì¬ ì‹œê°„ìœ¼ë¡œ ì„¤ì •
        jobApplication.setStatus("PENDING"); // ì´ˆê¸° ìƒíƒœë¥¼ "PENDING"ìœ¼ë¡œ ì„¤ì •

        // JobApplicationMapperë¥¼ í†µí•´ DBì— ì‚½ì…í•©ë‹ˆë‹¤.
        jobApplicationMapper.insertJobApplication(jobApplication); // ì´ ì¤„ì˜ ì£¼ì„ì„ í•´ì œí•˜ê³  ì‚¬ìš©í•©ë‹ˆë‹¤.

        // 3. apply_count ì¦ê°€ (ì—¬ê¸°ê°€ í•µì‹¬ì ìœ¼ë¡œ ì¶”ê°€ë˜ì–´ì•¼ í•˜ëŠ” ë¶€ë¶„!)
        jobMapper.incrementApplyCount(jobId); // <-- ì´ ì¤„ì„ ì¶”ê°€í•©ë‹ˆë‹¤!

        log.info("êµ¬ì¸ê³µê³  ì§€ì› ë¡œì§ ì™„ë£Œ - jobId: {}, applicantMemberId: {}, ìƒì„±ëœ ì§€ì› ID: {}",
                jobId, applicantMemberId, jobApplication.getId());
    }

}
````

## File: src/main/resources/templates/job/write.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>êµ¬ì¸êµ¬ì§ ë“±ë¡ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item"><a href="/job">êµ¬ì¸êµ¬ì§</a></li>
                <li class="breadcrumb-item active" aria-current="page">
                    <span th:if="${session.loginMember != null and session.loginMember.role == 'FACILITY'}">êµ¬ì¸ ë“±ë¡</span>
                    <span th:if="${session.loginMember != null and session.loginMember.role == 'USER'}">êµ¬ì§ ë“±ë¡</span>
                    <span th:if="${session.loginMember != null and session.loginMember.role == 'ADMIN'}">êµ¬ì¸êµ¬ì§ ë“±ë¡</span>
                </li>
            </ol>
        </nav>

        <div class="d-flex align-items-center mb-4">
            <h2 class="me-3">
                <i class="fas fa-plus me-2"></i>
                <span th:if="${session.loginMember != null and session.loginMember.role == 'FACILITY'}" class="text-success">êµ¬ì¸ ë“±ë¡</span>
                <span th:if="${session.loginMember != null and session.loginMember.role == 'USER'}" class="text-info">êµ¬ì§ ë“±ë¡</span>
                <span th:if="${session.loginMember != null and session.loginMember.role == 'ADMIN'}" class="text-primary">êµ¬ì¸êµ¬ì§ ë“±ë¡</span>
            </h2>

            <!-- ê´€ë¦¬ì ì „ìš©: êµ¬ì¸/êµ¬ì§ íƒ€ì… ì„ íƒ (í˜„ì¬ ë¸Œëœì¹˜ì˜ ê¶Œí•œ ì‹œìŠ¤í…œ ìœ ì§€) -->
            <div th:if="${session.loginMember != null and session.loginMember.role == 'ADMIN'}" class="btn-group" role="group">
                <input type="radio" class="btn-check" name="postingType" id="postingTypeRecruit" value="RECRUIT"
                       th:field="${jobDTO.jobType}" th:checked="${jobDTO.jobType == 'RECRUIT'}">
                <label class="btn btn-outline-success" for="postingTypeRecruit">êµ¬ì¸ê¸€</label>

                <input type="radio" class="btn-check" name="postingType" id="postingTypeSearch" value="SEARCH"
                       th:field="${jobDTO.jobType}" th:checked="${jobDTO.jobType == 'SEARCH'}">
                <label class="btn btn-outline-info" for="postingTypeSearch">êµ¬ì§ê¸€</label>
            </div>
        </div>

        <form th:action="@{/job/write}" method="post" th:object="${jobDTO}">
            <!-- ê¶Œí•œë³„ ìë™ jobType ì„¤ì • (í˜„ì¬ ë¸Œëœì¹˜ ê¶Œí•œ ì‹œìŠ¤í…œ ìœ ì§€) -->
            <input type="hidden" th:if="${session.loginMember != null and session.loginMember.role != 'ADMIN'}"
                   th:field="*{jobType}" id="hiddenJobType"
                   th:value="${session.loginMember.role == 'FACILITY' ? 'RECRUIT' : 'SEARCH'}">
            
            <!-- ê´€ë¦¬ìëŠ” ë¼ë””ì˜¤ ë²„íŠ¼ìœ¼ë¡œ ë™ì  ì œì–´ -->
            <input type="hidden" th:if="${session.loginMember != null and session.loginMember.role == 'ADMIN'}" 
                   th:field="*{jobType}" id="hiddenJobType" 
                   th:value="${session.loginMember.role == 'FACILITY' ? 'RECRUIT' : (session.loginMember.role == 'USER' ? 'SEARCH' : 'RECRUIT')}">
            
            <!-- í–¥ìƒëœ UI ë ˆì´ì•„ì›ƒ (ë©”ì¸ ë¸Œëœì¹˜ì˜ ê°œì„ ì‚¬í•­ ì ìš©) -->
            <div class="row">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="jobTitle" class="form-label">ì œëª© *</label>
                                <input type="text" class="form-control" id="jobTitle" th:field="*{title}" required 
                                       autocomplete="off"
                                       th:placeholder="${session.loginMember.role == 'FACILITY' ? 'êµ¬ì¸ê³µê³  ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”' : (session.loginMember.role == 'USER' ? 'êµ¬ì§ê³µê³  ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”' : 'ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”')}">
                            </div>
                            
                            <div class="row">
                                <!-- êµ¬ì¸ê¸€(ì‹œì„¤íšŒì›): íšŒì‚¬ëª… ì…ë ¥ -->
                                <div class="col-md-6 mb-3" id="facilityNameField" 
                                     th:style="${session.loginMember.role == 'USER' ? 'display: none;' : ''}">
                                    <label for="facilityNameInput" class="form-label">
                                        <span class="facility-mode">íšŒì‚¬ëª… *</span>
                                        <span class="search-mode" style="display: none;">í¬ë§ ê·¼ë¬´ì§€ *</span>
                                    </label>
                                    <input type="text" class="form-control" th:field="*{facilityName}" 
                                           id="facilityNameInput" autocomplete="organization"
                                           placeholder="íšŒì‚¬ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                                </div>
                                
                                <!-- êµ¬ì§ê¸€(ì¼ë°˜ì‚¬ìš©ì): í¬ë§ ê·¼ë¬´ì§€ ì…ë ¥ -->
                                <div class="col-md-6 mb-3" id="workLocationField"
                                     th:style="${session.loginMember.role == 'FACILITY' ? 'display: none;' : ''}">
                                    <label for="workLocationInput" class="form-label">í¬ë§ ê·¼ë¬´ì§€ *</label>
                                    <input type="text" class="form-control" th:field="*{workLocation}" 
                                           id="workLocationInput" autocomplete="address-level2"
                                           placeholder="í¬ë§ ê·¼ë¬´ì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label for="jobPosition" class="form-label">ì§ì¢… *</label>
                                    <select class="form-select" th:field="*{position}" id="jobPosition" 
                                            autocomplete="off" required>
                                        <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                        <option value="ê°„ë³‘ì¸">ê°„ë³‘ì¸</option>
                                        <option value="ìš”ì–‘ë³´í˜¸ì‚¬">ìš”ì–‘ë³´í˜¸ì‚¬</option>
                                        <option value="ì‚¬íšŒë³µì§€ì‚¬">ì‚¬íšŒë³µì§€ì‚¬</option>
                                        <option value="ë¬¼ë¦¬ì¹˜ë£Œì‚¬">ë¬¼ë¦¬ì¹˜ë£Œì‚¬</option>
                                        <option value="ê°„í˜¸ì‚¬">ê°„í˜¸ì‚¬</option>
                                        <option value="ì˜ì–‘ì‚¬">ì˜ì–‘ì‚¬</option>
                                        <option value="ì‚¬ë¬´ì§">ì‚¬ë¬´ì§</option>
                                        <option value="ì¡°ë¦¬ì›">ì¡°ë¦¬ì›</option>
                                        <option value="ìš´ì „ì›">ìš´ì „ì›</option>
                                        <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="contentTextarea" class="form-label">
                                    <span class="facility-mode">ì—…ë¬´ ë‚´ìš© *</span>
                                    <span class="search-mode" style="display: none;">ìê¸°ì†Œê°œ ë° ê²½ë ¥ì‚¬í•­ *</span>
                                </label>
                                <textarea class="form-control" rows="10" th:field="*{content}" required
                                          id="contentTextarea" autocomplete="off"
                                          data-rich-editor='{"height": "350px"}'></textarea>
                            </div>
                            
                            <!-- êµ¬ì§ê¸€ ì „ìš© í•„ë“œë“¤ (ë©”ì¸ ë¸Œëœì¹˜ì˜ ì¶”ê°€ ê¸°ëŠ¥) -->
                            <div id="jobSeekerFields" th:style="${session.loginMember.role == 'FACILITY' ? 'display: none;' : ''}">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="jobExperience" class="form-label">ê²½ë ¥</label>
                                        <select class="form-select" th:field="*{experience}" id="jobExperience"
                                                autocomplete="off">
                                            <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                            <option value="ì‹ ì…">ì‹ ì…</option>
                                            <option value="1ë…„ ì´ìƒ">1ë…„ ì´ìƒ</option>
                                            <option value="3ë…„ ì´ìƒ">3ë…„ ì´ìƒ</option>
                                            <option value="5ë…„ ì´ìƒ">5ë…„ ì´ìƒ</option>
                                            <option value="10ë…„ ì´ìƒ">10ë…„ ì´ìƒ</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="jobEducation" class="form-label">í•™ë ¥</label>
                                        <select class="form-select" th:field="*{education}" id="jobEducation"
                                                autocomplete="off">
                                            <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                            <option value="ì¤‘í•™êµ ì¡¸ì—…">ì¤‘í•™êµ ì¡¸ì—…</option>
                                            <option value="ê³ ë“±í•™êµ ì¡¸ì—…">ê³ ë“±í•™êµ ì¡¸ì—…</option>
                                            <option value="ì „ë¬¸ëŒ€í•™ ì¡¸ì—…">ì „ë¬¸ëŒ€í•™ ì¡¸ì—…</option>
                                            <option value="ëŒ€í•™êµ ì¡¸ì—…">ëŒ€í•™êµ ì¡¸ì—…</option>
                                            <option value="ëŒ€í•™ì› ì¡¸ì—…">ëŒ€í•™ì› ì¡¸ì—…</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="jobQualifications" class="form-label">ë³´ìœ  ìê²©ì¦</label>
                                    <textarea class="form-control" rows="3" th:field="*{qualifications}"
                                              id="jobQualifications" autocomplete="off"
                                              placeholder="ë³´ìœ í•˜ì‹  ìê²©ì¦ì„ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ: ìš”ì–‘ë³´í˜¸ì‚¬ 1ê¸‰, ê°„ë³‘ì¸ ìê²©ì¦ ë“±)"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <!-- êµ¬ì¸ê¸€: ê¸‰ì—¬ ì •ë³´ (ë©”ì¸ ë¸Œëœì¹˜ì˜ ìƒì„¸ í•„ë“œë“¤) -->
                            <div id="recruitFields" th:style="${session.loginMember.role == 'USER' ? 'display: none;' : ''}">
                                <div class="mb-3">
                                    <label for="salaryType" class="form-label">ê¸‰ì—¬ ìœ í˜• *</label>
                                    <select class="form-select" th:field="*{salaryType}" id="salaryType"
                                            autocomplete="off">
                                        <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                        <option value="HOURLY">ì‹œê¸‰</option>
                                        <option value="MONTHLY">ì›”ê¸‰</option>
                                        <option value="ANNUAL">ì—°ë´‰</option>
                                    </select>
                                </div>
                                
                                <div class="row">
                                    <div class="col-6 mb-3">
                                        <label for="salaryMin" class="form-label">ìµœì†Œ ê¸‰ì—¬</label>
                                        <input type="number" class="form-control" th:field="*{salaryMin}" 
                                               id="salaryMin" autocomplete="off"
                                               placeholder="ìµœì†Œ ê¸‰ì—¬">
                                    </div>
                                    <div class="col-6 mb-3">
                                        <label for="salaryMax" class="form-label">ìµœëŒ€ ê¸‰ì—¬</label>
                                        <input type="number" class="form-control" th:field="*{salaryMax}" 
                                               id="salaryMax" autocomplete="off"
                                               placeholder="ìµœëŒ€ ê¸‰ì—¬">
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="salaryDescription" class="form-label">ê¸‰ì—¬ ì„¤ëª…</label>
                                    <input type="text" class="form-control" th:field="*{salaryDescription}" 
                                           id="salaryDescription" autocomplete="off"
                                           placeholder="ì˜ˆ: ì‹œê¸‰ 10,000ì›, ì•¼ê°„ìˆ˜ë‹¹ ë³„ë„">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="recruitCount" class="form-label">ëª¨ì§‘ì¸ì›</label>
                                    <input type="number" class="form-control" th:field="*{recruitCount}" 
                                           id="recruitCount" autocomplete="off"
                                           placeholder="ëª¨ì§‘ì¸ì›" min="1" value="1">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="workHours" class="form-label">ê·¼ë¬´ì‹œê°„</label>
                                    <input type="text" class="form-control" th:field="*{workHours}" 
                                           id="workHours" autocomplete="off"
                                           placeholder="ì˜ˆ: 09:00~18:00, ì£¼ 5ì¼">
                                </div>
                            </div>
                            
                            <!-- êµ¬ì§ê¸€: í¬ë§ ì¡°ê±´ (ë©”ì¸ ë¸Œëœì¹˜ì˜ ì¶”ê°€ ê¸°ëŠ¥) -->
                            <div id="searchFields" th:style="${session.loginMember.role == 'FACILITY' ? 'display: none;' : ''}">
                                <div class="mb-3">
                                    <label for="searchSalaryType" class="form-label">í¬ë§ ê¸‰ì—¬ ìœ í˜•</label>
                                    <select class="form-select" th:field="*{salaryType}" id="searchSalaryType"
                                            autocomplete="off">
                                        <option value="">ìƒê´€ì—†ìŒ</option>
                                        <option value="HOURLY">ì‹œê¸‰</option>
                                        <option value="MONTHLY">ì›”ê¸‰</option>
                                        <option value="ANNUAL">ì—°ë´‰</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="searchSalaryDescription" class="form-label">í¬ë§ ê¸‰ì—¬</label>
                                    <input type="text" class="form-control" th:field="*{salaryDescription}" 
                                           id="searchSalaryDescription" autocomplete="off"
                                           placeholder="ì˜ˆ: ì‹œê¸‰ 12,000ì› ì´ìƒ">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="searchWorkHours" class="form-label">í¬ë§ ê·¼ë¬´ì‹œê°„</label>
                                    <input type="text" class="form-control" th:field="*{workHours}" 
                                           id="searchWorkHours" autocomplete="off"
                                           placeholder="ì˜ˆ: ì£¼ê°„ê·¼ë¬´ ì„ í˜¸, ì•¼ê°„ ê°€ëŠ¥">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="contactPhone" class="form-label">ì—°ë½ì²˜ *</label>
                                    <input type="tel" class="form-control" th:field="*{contactPhone}" 
                                           id="contactPhone" autocomplete="tel"
                                           placeholder="ì—°ë½ ê°€ëŠ¥í•œ ì „í™”ë²ˆí˜¸" required>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="workType" class="form-label">ê³ ìš©í˜•íƒœ *</label>
                                <select class="form-select" th:field="*{workType}" id="workType" 
                                        autocomplete="off" required>
                                    <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                    <option value="FULL_TIME">ì •ê·œì§</option>
                                    <option value="PART_TIME">íŒŒíŠ¸íƒ€ì„</option>
                                    <option value="TEMPORARY">ì„ì‹œì§</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="d-grid gap-2 mt-4">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save me-1"></i>
                    <span th:if="${session.loginMember != null and session.loginMember.role == 'FACILITY'}">êµ¬ì¸ê³µê³  ë“±ë¡</span>
                    <span th:if="${session.loginMember != null and session.loginMember.role == 'USER'}">êµ¬ì§ê³µê³  ë“±ë¡</span>
                    <span th:if="${session.loginMember != null and session.loginMember.role == 'ADMIN'}">ê³µê³  ë“±ë¡</span>
                </button>
                <a href="/job" class="btn btn-secondary">
                    <i class="fas fa-arrow-left me-1"></i>ì·¨ì†Œ
                </a>
            </div>
        </form>
    </div>
</main>

<!-- í‘¸í„° -->
<footer th:replace="~{layout/footer :: footer}"></footer>

<!-- JavaScript -->
<div th:replace="~{layout/footer :: scripts}"></div>

<!-- êµ¬ì¸êµ¬ì§ ì‘ì„± í˜ì´ì§€ ì „ìš© JavaScript -->
<script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ì„¤ì • (í˜„ì¬ ë¸Œëœì¹˜ ê¶Œí•œ ì‹œìŠ¤í…œ + ë©”ì¸ ë¸Œëœì¹˜ ë™ì  ì œì–´)
    document.addEventListener('DOMContentLoaded', function() {
        const userRole = '[[${session.loginMember?.role}]]';
        console.log('ì‘ì„± í˜ì´ì§€ ë¡œë“œ - ì‚¬ìš©ì ì—­í• :', userRole);
        
        // ê¶Œí•œë³„ ì´ˆê¸° ìƒíƒœ ì„¤ì • (í˜„ì¬ ë¸Œëœì¹˜ ê¶Œí•œ ì‹œìŠ¤í…œ ìœ ì§€)
        if (userRole === 'USER') {
            switchToSearchMode();
        } else if (userRole === 'FACILITY') {
            switchToRecruitMode();
        }
        
        // í¼ ê²€ì¦ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        const form = document.querySelector('form');
        if (form) {
            form.addEventListener('submit', function(e) {
                console.log('í¼ ì œì¶œ ì‹œë„ ì¤‘...');
                if (!validateJobForm()) {
                    console.log('í¼ ê²€ì¦ ì‹¤íŒ¨ - ì œì¶œ ì¤‘ë‹¨');
                    e.preventDefault();
                    return false;
                }
                console.log('í¼ ê²€ì¦ ì„±ê³µ - ì œì¶œ ê³„ì†');
            });
        }
        
        // ê´€ë¦¬ì ì „ìš©: ë¼ë””ì˜¤ ë²„íŠ¼ ì´ë²¤íŠ¸ (í˜„ì¬ ë¸Œëœì¹˜ ë°©ì‹ ìœ ì§€ + ë©”ì¸ ë¸Œëœì¹˜ ë™ì  ê¸°ëŠ¥ ì¶”ê°€)
        if (userRole === 'ADMIN') {
            const recruitRadio = document.getElementById('postingTypeRecruit');
            const searchRadio = document.getElementById('postingTypeSearch');

            if (recruitRadio && searchRadio) {
                // ë©”ì¸ ë¸Œëœì¹˜ ë°©ì‹: ë™ì  ì „í™˜ (ì¶”ê°€ ê¸°ëŠ¥)
                recruitRadio.addEventListener('change', function() {
                    if (this.checked) {
                        switchToRecruitMode();
                    }
                });
                
                searchRadio.addEventListener('change', function() {
                    if (this.checked) {
                        switchToSearchMode();
                    }
                });
            }
        }
        
        // í”Œë ˆì´ìŠ¤í™€ë” ì„¤ì • (ë©”ì¸ ë¸Œëœì¹˜ ê¸°ëŠ¥)
        updatePlaceholders();
    });
    
    /**
     * ì‘ì„± í˜ì´ì§€ ì „ìš© í¼ ê²€ì¦ í•¨ìˆ˜
     */
    function validateJobForm() {
        const hiddenJobType = document.getElementById('hiddenJobType');
        const jobType = hiddenJobType ? hiddenJobType.value : '';
        
        console.log('ê²€ì¦ ì‹œì‘ - jobType:', jobType);
        
        // ê³µí†µ í•„ìˆ˜ í•„ë“œ ê²€ì‚¬
        const title = document.querySelector('[name="title"]')?.value?.trim() || '';
        const content = document.querySelector('[name="content"]')?.value?.trim() || '';
        const workType = document.querySelector('[name="workType"]')?.value || '';
        const position = document.querySelector('[name="position"]')?.value || '';
        
        if (!title) {
            alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            document.querySelector('[name="title"]')?.focus();
            return false;
        }
        
        if (!content) {
            alert('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            document.querySelector('[name="content"]')?.focus();
            return false;
        }
        
        if (!position) {
            alert('ì§ì¢…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
            document.querySelector('[name="position"]')?.focus();
            return false;
        }
        
        if (!workType) {
            alert('ê³ ìš©í˜•íƒœë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
            document.querySelector('[name="workType"]')?.focus();
            return false;
        }
        
        // êµ¬ì¸ê¸€(RECRUIT) ì „ìš© í•„ìˆ˜ í•„ë“œ ê²€ì‚¬
        if (jobType === 'RECRUIT') {
            console.log('êµ¬ì¸ê¸€ ê²€ì¦ ì¤‘...');
            const facilityName = document.querySelector('[name="facilityName"]')?.value?.trim() || '';
            
            if (!facilityName) {
                alert('íšŒì‚¬ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                document.querySelector('[name="facilityName"]')?.focus();
                return false;
            }
        }
        
        // êµ¬ì§ê¸€(SEARCH) ì „ìš© í•„ìˆ˜ í•„ë“œ ê²€ì‚¬
        if (jobType === 'SEARCH') {
            console.log('êµ¬ì§ê¸€ ê²€ì¦ ì¤‘...');
            const workLocation = document.querySelector('[name="workLocation"]')?.value?.trim() || '';
            const contactPhone = document.querySelector('[name="contactPhone"]')?.value?.trim() || '';
            
            if (!workLocation) {
                alert('í¬ë§ ê·¼ë¬´ì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                document.querySelector('[name="workLocation"]')?.focus();
                return false;
            }
            
            if (!contactPhone) {
                alert('ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                document.querySelector('[name="contactPhone"]')?.focus();
                return false;
            }
        }
        
        // ê¸¸ì´ ê²€ì‚¬
        if (title.length > 100) {
            alert('ì œëª©ì€ 100ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            document.querySelector('[name="title"]')?.focus();
            return false;
        }
        
        if (content.length > 2000) {
            alert('ë‚´ìš©ì€ 2000ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            document.querySelector('[name="content"]')?.focus();
            return false;
        }
        
        console.log('ëª¨ë“  ê²€ì¦ í†µê³¼');
        return true;
    }
    
    // êµ¬ì¸ ëª¨ë“œë¡œ ì „í™˜ (ë©”ì¸ ë¸Œëœì¹˜ì˜ ë™ì  ì œì–´ ê¸°ëŠ¥)
    function switchToRecruitMode() {
        console.log('êµ¬ì¸ ëª¨ë“œë¡œ ì „í™˜');
        
        // ìˆ¨ê²¨ì§„ jobType í•„ë“œ ì—…ë°ì´íŠ¸
        const hiddenJobType = document.getElementById('hiddenJobType');
        if (hiddenJobType) {
            hiddenJobType.value = 'RECRUIT';
        }
        
        // í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€
        const facilityNameField = document.getElementById('facilityNameField');
        const workLocationField = document.getElementById('workLocationField');
        const jobSeekerFields = document.getElementById('jobSeekerFields');
        const recruitFields = document.getElementById('recruitFields');
        const searchFields = document.getElementById('searchFields');
        
        if (facilityNameField) facilityNameField.style.display = 'block';
        if (workLocationField) workLocationField.style.display = 'none';
        if (jobSeekerFields) jobSeekerFields.style.display = 'none';
        if (recruitFields) recruitFields.style.display = 'block';
        if (searchFields) searchFields.style.display = 'none';
        
        // ë¼ë²¨ í‘œì‹œ
        document.querySelectorAll('.facility-mode').forEach(el => el.style.display = 'inline');
        document.querySelectorAll('.search-mode').forEach(el => el.style.display = 'none');
        
        // í•„ìˆ˜ í•„ë“œ ì„¤ì •
        const facilityNameInput = document.getElementById('facilityNameInput');
        if (facilityNameInput) {
            facilityNameInput.required = true;
        }
        
        const contactPhoneInput = document.querySelector('[name="contactPhone"]');
        if (contactPhoneInput) {
            contactPhoneInput.required = false;
        }
    }
    
    // êµ¬ì§ ëª¨ë“œë¡œ ì „í™˜ (ë©”ì¸ ë¸Œëœì¹˜ì˜ ë™ì  ì œì–´ ê¸°ëŠ¥)
    function switchToSearchMode() {
        console.log('êµ¬ì§ ëª¨ë“œë¡œ ì „í™˜');
        
        // ìˆ¨ê²¨ì§„ jobType í•„ë“œ ì—…ë°ì´íŠ¸
        const hiddenJobType = document.getElementById('hiddenJobType');
        if (hiddenJobType) {
            hiddenJobType.value = 'SEARCH';
        }
        
        // í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€
        const facilityNameField = document.getElementById('facilityNameField');
        const workLocationField = document.getElementById('workLocationField');
        const jobSeekerFields = document.getElementById('jobSeekerFields');
        const recruitFields = document.getElementById('recruitFields');
        const searchFields = document.getElementById('searchFields');
        
        if (facilityNameField) facilityNameField.style.display = 'none';
        if (workLocationField) workLocationField.style.display = 'block';
        if (jobSeekerFields) jobSeekerFields.style.display = 'block';
        if (recruitFields) recruitFields.style.display = 'none';
        if (searchFields) searchFields.style.display = 'block';
        
        // ë¼ë²¨ í‘œì‹œ
        document.querySelectorAll('.facility-mode').forEach(el => el.style.display = 'none');
        document.querySelectorAll('.search-mode').forEach(el => el.style.display = 'inline');
        
        // í•„ìˆ˜ í•„ë“œ ì„¤ì •
        const facilityNameInput = document.getElementById('facilityNameInput');
        if (facilityNameInput) {
            facilityNameInput.required = false;
        }
        
        const contactPhoneInput = document.querySelector('[name="contactPhone"]');
        if (contactPhoneInput) {
            contactPhoneInput.required = true;
        }
    }
    
    // í”Œë ˆì´ìŠ¤í™€ë” ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ë©”ì¸ ë¸Œëœì¹˜ ê¸°ëŠ¥)
    function updatePlaceholders() {
        // í•„ìš”ì— ë”°ë¼ í”Œë ˆì´ìŠ¤í™€ë” ë™ì  ë³€ê²½ ë¡œì§ ì¶”ê°€
    }
</script>
</body>
</html>
````

## File: build.gradle
````
plugins {
    id 'org.springframework.boot' version '2.7.18'
    id 'io.spring.dependency-management' version '1.0.15.RELEASE'
    id 'java'
}

group = 'com.example'
version = '0.0.1-SNAPSHOT'

java {
    sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11
}

repositories {
    mavenCentral()
}

dependencies {
    // Spring Boot ê¸°ë³¸ ì˜ì¡´ì„±
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-actuator'
    developmentOnly 'org.springframework.boot:spring-boot-devtools'

    // Thymeleaf í…œí”Œë¦¿ ì—”ì§„
    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'

    // MySQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° (ë¡œì»¬ ê°œë°œìš©)
    runtimeOnly 'com.mysql:mysql-connector-j'
    
    // PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° (Herokuìš©)
    runtimeOnly 'org.postgresql:postgresql'

    // MyBatis ì—°ë™
    implementation 'org.mybatis.spring.boot:mybatis-spring-boot-starter:2.3.1'

    // Lombok (ì½”ë“œ ìë™ ìƒì„±)
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'

    // ìœ íš¨ì„± ê²€ì¦
    implementation 'org.springframework.boot:spring-boot-starter-validation'

    // JSON ì²˜ë¦¬
    implementation 'com.fasterxml.jackson.core:jackson-databind'
    implementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310'

    // í…ŒìŠ¤íŠ¸ ì˜ì¡´ì„±
    testImplementation 'org.springframework.boot:spring-boot-starter-test'

    // Spring Security
    implementation 'org.springframework.boot:spring-boot-starter-security'

    // Thymeleafì™€ Spring Security ì—°ë™ì„ ìœ„í•œ í™•ì¥ ë¼ì´ë¸ŒëŸ¬ë¦¬
    implementation 'org.thymeleaf.extras:thymeleaf-extras-springsecurity5'

    // SpringDoc OpenAPI ì˜ì¡´ì„± ì¶”ê°€ (ì„ì‹œ ë¹„í™œì„±í™” - ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ í›„ í™œì„±í™” ì˜ˆì •)
    // implementation 'org.springdoc:springdoc-openapi-ui:1.7.0'
    // implementation 'org.springdoc:springdoc-openapi-security:1.7.0'

}

tasks.named('test') {
    useJUnitPlatform()
}
````

## File: src/main/java/com/example/carelink/service/FacilityService.java
````java
package com.example.carelink.service;

import com.example.carelink.dao.FacilityMapper;
import com.example.carelink.dto.FacilityDTO;
import com.example.carelink.dto.FacilityImageDTO;
import com.example.carelink.common.Constants;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.web.multipart.MultipartFile;

import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.UUID;

@Service
public class FacilityService {

    private final FacilityMapper facilityMapper;
    private final FacilityImageService facilityImageService;
    private static final Logger log = LoggerFactory.getLogger(FacilityService.class);

    @Autowired
    public FacilityService(FacilityMapper facilityMapper, FacilityImageService facilityImageService) {
        this.facilityMapper = facilityMapper;
        this.facilityImageService = facilityImageService;
    }

    /**
     * ì‹œì„¤ ê²€ìƒ‰ ì„œë¹„ìŠ¤ (ë©”ì¸ ì´ë¯¸ì§€ í¬í•¨)
     */
    public List<FacilityDTO> searchFacilities(FacilityDTO searchDTO) {
        log.info("ì‹œì„¤ ê²€ìƒ‰ ì„œë¹„ìŠ¤ í˜¸ì¶œ - facilityName: {}, address: {}, facilityType: {}", 
                searchDTO.getFacilityName(), searchDTO.getAddress(), searchDTO.getFacilityType());
        
        List<FacilityDTO> results = facilityMapper.searchFacilities(searchDTO);
        log.info("ì‹œì„¤ ê²€ìƒ‰ ê²°ê³¼ - ì´ {}ê°œ ì‹œì„¤ ë°œê²¬", results.size());
        
        // ê° ì‹œì„¤ì˜ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •
        for (FacilityDTO facility : results) {
            try {
                FacilityImageDTO mainImage = facilityImageService.getMainImageByFacilityId(facility.getFacilityId());
                if (mainImage != null && mainImage.getImagePath() != null) {
                    facility.setFacilityImage(mainImage.getImagePath());
                }
            } catch (Exception e) {
                log.warn("ì‹œì„¤ ê²€ìƒ‰ ì¤‘ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ ì‹¤íŒ¨ - facilityId: {}", facility.getFacilityId(), e);
                facility.setFacilityImage(null);
            }
        }
        
        return results;
    }

    /**
     * ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì„œë¹„ìŠ¤ (ë©”ì¸ ì´ë¯¸ì§€ í¬í•¨)
     */
    @Transactional(readOnly = true)
    public FacilityDTO getFacilityById(Long facilityId) {
        if (facilityId == null) {
            log.warn("ì‹œì„¤ IDê°€ nullì…ë‹ˆë‹¤.");
            return null;
        }
        
        log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì‹œì‘ - facilityId: {}", facilityId);
        FacilityDTO facility = facilityMapper.getFacilityById(facilityId);
        
        if (facility == null) {
            log.warn("ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ - facilityId: {}", facilityId);
            return null;
        }
        
        // ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì¶”ê°€ ì¡°íšŒ
        try {
            FacilityImageDTO mainImage = facilityImageService.getMainImageByFacilityId(facilityId);
            if (mainImage != null && mainImage.getImagePath() != null) {
                facility.setFacilityImage(mainImage.getImagePath());
                log.info("âœ… ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì™„ë£Œ - imagePath: {}", mainImage.getImagePath());
            } else {
                log.info("âš ï¸ ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì—†ìŒ - facilityId: {}", facilityId);
                facility.setFacilityImage(null); // ëª…ì‹œì ìœ¼ë¡œ null ì„¤ì •
            }
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            facility.setFacilityImage(null);
        }
        
        log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì™„ë£Œ - facilityName: {}, status: {}, mainImage: {}", 
                facility.getFacilityName(), facility.getStatus(), facility.getFacilityImage());
        return facility;
    }

    /**
     * ì „ì²´ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì„œë¹„ìŠ¤
     */
    public List<FacilityDTO> getAllFacilities() {
        try {
            log.info("ì „ì²´ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì‹œì‘");
            List<FacilityDTO> facilities = facilityMapper.getAllFacilities();
            log.info("ì „ì²´ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", facilities.size());
            return facilities;
        } catch (Exception e) {
            log.error("ì „ì²´ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("ì‹œì„¤ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ì‹œì„¤ ë“±ë¡ ì„œë¹„ìŠ¤
     */
    public int insertFacility(FacilityDTO facilityDTO) {
        return facilityMapper.insertFacility(facilityDTO);
    }

    /**
     * ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì„œë¹„ìŠ¤
     */
    public int updateFacility(FacilityDTO facilityDTO) {
        return facilityMapper.updateFacility(facilityDTO);
    }

    /**
     * ì‹œì„¤ ì‚­ì œ ì„œë¹„ìŠ¤
     */
    public int deleteFacility(Long facilityId) {
        return facilityMapper.deleteFacility(facilityId);
    }

    /**
     * ì§€ì—­ë³„ ì‹œì„¤ ê°œìˆ˜ ì¡°íšŒ ì„œë¹„ìŠ¤
     */
    public int countFacilitiesByRegion(String region) {
        return facilityMapper.countFacilitiesByRegion(region);
    }

    /**
     * ì „ì²´ ì‹œì„¤ ìˆ˜ ì¡°íšŒ (í†µê³„ìš©)
     */
    public int getFacilityCount() {
        try {
            return facilityMapper.getFacilityCount();
        } catch (Exception e) {
            // ì—ëŸ¬ ì‹œ ì„ì‹œ ë°ì´í„° ê°œìˆ˜ ë°˜í™˜ (ê°œë°œ ì´ˆê¸° ì—ëŸ¬ ë°©ì§€)
            return 3; // ì„ì‹œë¡œ ìƒì„±í•œ ì‹œì„¤ ìˆ˜
        }
    }

    /**
     * í™œì„±í™”ëœ ëª¨ë“  ì‹œì„¤ ëª©ë¡ ì¡°íšŒ (ë¦¬ë·° ì‘ì„±ìš©)
     */
    @Transactional(readOnly = true)
    public List<FacilityDTO> getAllActiveFacilities() {
        log.info("í™œì„±í™”ëœ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì‹œì‘");
        List<FacilityDTO> facilities = facilityMapper.getAllActiveFacilities();
        
        if (!facilities.isEmpty()) {
            FacilityDTO firstFacility = facilities.get(0);
            log.info("ì²« ë²ˆì§¸ ì‹œì„¤ ì •ë³´ - ID: {}, ì´ë¦„: {}, ìŠ¹ì¸ìƒíƒœ: {}", 
                    firstFacility.getFacilityId(), 
                    firstFacility.getFacilityName(),
                    firstFacility.getStatus());
        }
        
        log.info("í™œì„±í™”ëœ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", facilities.size());
        return facilities;
    }

    /**
     * ì‹œì„¤ ìƒíƒœ ê²€ì¦
     */
    public boolean validateFacilityStatus(FacilityDTO facility) {
        if (facility == null) {
            log.warn("ì‹œì„¤ ì •ë³´ê°€ nullì…ë‹ˆë‹¤.");
            return false;
        }
        
        if (facility.isDeletedStatus()) {
            log.warn("ì‚­ì œëœ ì‹œì„¤ì…ë‹ˆë‹¤ - facilityId: {}", facility.getFacilityId());
            return false;
        }
        
        if (facility.isPendingStatus()) {
            log.warn("ìŠ¹ì¸ë˜ì§€ ì•Šì€ ì‹œì„¤ì…ë‹ˆë‹¤ - facilityId: {}", facility.getFacilityId());
            return false;
        }
        
        return true;
    }

    /**
     * íšŒì› IDë¡œ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ
     */
    public List<FacilityDTO> getFacilitiesByMemberId(Long memberId) {
        try {
            log.info("íšŒì›ì˜ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - memberId: {}", memberId);
            List<FacilityDTO> facilities = facilityMapper.getFacilitiesByMemberId(memberId);
            
            if (!facilities.isEmpty()) {
                log.info("íšŒì›ì˜ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - memberId: {}, ì‹œì„¤ ìˆ˜: {}", 
                        memberId, facilities.size());
            } else {
                log.info("íšŒì›ì˜ ì‹œì„¤ ì •ë³´ ì—†ìŒ - memberId: {}", memberId);
            }
            
            return facilities;
        } catch (Exception e) {
            log.error("íšŒì›ì˜ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - memberId: {}", memberId, e);
            throw new RuntimeException("ì‹œì„¤ ì •ë³´ ì¡°íšŒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * íšŒì› IDë¡œ ì‹œì„¤ ì¡°íšŒ (ì²« ë²ˆì§¸ ì‹œì„¤ ë°˜í™˜)
     */
    public FacilityDTO getFacilityByMemberId(Long memberId) {
        try {
            log.info("íšŒì›ì˜ ì²« ë²ˆì§¸ ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì‹œì‘ - memberId: {}", memberId);
            List<FacilityDTO> facilities = facilityMapper.getFacilitiesByMemberId(memberId);
            
            if (!facilities.isEmpty()) {
                FacilityDTO facility = facilities.get(0);
                log.info("íšŒì›ì˜ ì²« ë²ˆì§¸ ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì™„ë£Œ - memberId: {}, facilityId: {}, facilityName: {}", 
                        memberId, facility.getFacilityId(), facility.getFacilityName());
                return facility;
            } else {
                log.info("íšŒì›ì˜ ì‹œì„¤ ì •ë³´ ì—†ìŒ - memberId: {}", memberId);
                return null;
            }
        } catch (Exception e) {
            log.error("íšŒì›ì˜ ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - memberId: {}", memberId, e);
            throw new RuntimeException("ì‹œì„¤ ì •ë³´ ì¡°íšŒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ì‹œì„¤ ì •ë³´ ìˆ˜ì • (íŒŒì¼ ì—…ë¡œë“œ í¬í•¨)
     */
    @Transactional
    public void updateFacility(FacilityDTO facilityDTO, MultipartFile facilityImageFile) {
        try {
            log.info("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì‹œì‘ - facilityId: {}, facilityName: {}", 
                    facilityDTO.getFacilityId(), facilityDTO.getFacilityName());
            
            // ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì²˜ë¦¬
            if (facilityImageFile != null && !facilityImageFile.isEmpty()) {
                String imagePath = saveFacilityImage(facilityImageFile, facilityDTO.getFacilityId().toString());
                facilityDTO.setFacilityImage(imagePath);
                log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸ - facilityId: {}, imagePath: {}", 
                        facilityDTO.getFacilityId(), imagePath);
            }
            
            // ì‹œì„¤ ì •ë³´ ì—…ë°ì´íŠ¸
            int result = facilityMapper.updateFacility(facilityDTO);
            if (result == 0) {
                throw new RuntimeException("ì‹œì„¤ ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            }
            
            log.info("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì™„ë£Œ - facilityId: {}", facilityDTO.getFacilityId());
        } catch (Exception e) {
            log.error("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityDTO.getFacilityId(), e);
            throw new RuntimeException("ì‹œì„¤ ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ë©”ì„œë“œ
     */
    private String saveFacilityImage(MultipartFile file, String facilityId) {
        try {
            // ë¡œì»¬ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ì‚¬ìš©
            String uploadDir = Constants.FACILITY_UPLOAD_PATH;
            File uploadDirFile = new File(uploadDir);
            if (!uploadDirFile.exists()) {
                boolean created = uploadDirFile.mkdirs();
                log.info("ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} - {}", uploadDir, created ? "ì„±ê³µ" : "ì‹¤íŒ¨");
            }
            
            // íŒŒì¼ëª… ìƒì„± (facilityId + UUID + ì›ë³¸ í™•ì¥ì)
            String originalFilename = file.getOriginalFilename();
            String extension = "";
            if (originalFilename != null && originalFilename.contains(".")) {
                extension = originalFilename.substring(originalFilename.lastIndexOf("."));
            }
            String savedFilename = "facility_" + facilityId + "_" + UUID.randomUUID().toString() + extension;
            
            // íŒŒì¼ ì €ì¥
            File savedFile = new File(uploadDir + savedFilename);
            file.transferTo(savedFile);
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ: {}", savedFile.getAbsolutePath());
            
            // ì›¹ ê²½ë¡œ ë°˜í™˜
            return "/uploads/facility/" + savedFilename;
            
        } catch (IOException e) {
            log.error("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            throw new RuntimeException("ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    // ================== ê´€ë¦¬ììš© ë©”ì„œë“œë“¤ ==================

    /**
     * ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ (ê´€ë¦¬ììš©)
     */
    @Transactional(readOnly = true)
    public List<FacilityDTO> getFacilitiesByApprovalStatus(String status) {
        try {
            log.info("ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ - status: {}", status);
            List<FacilityDTO> facilities = facilityMapper.getFacilitiesByApprovalStatus(status);
            log.info("ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - status: {}, count: {}", status, facilities.size());
            return facilities;
        } catch (Exception e) {
            log.error("ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - status: {}", status, e);
            throw new RuntimeException("ì‹œì„¤ ëª©ë¡ ì¡°íšŒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ (ê´€ë¦¬ììš©)
     */
    @Transactional
    public void updateFacilityApprovalStatus(Long facilityId, String newStatus, String reason) {
        try {
            log.info("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ - facilityId: {}, newStatus: {}, reason: {}", 
                    facilityId, newStatus, reason);
            
            int result = facilityMapper.updateFacilityApprovalStatus(facilityId, newStatus, reason);
            if (result == 0) {
                throw new RuntimeException("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            }
            
            log.info("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ ì™„ë£Œ - facilityId: {}, newStatus: {}", facilityId, newStatus);
        } catch (Exception e) {
            log.error("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            throw new RuntimeException("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ì‹œì„¤ ìˆ˜ ì¡°íšŒ
     */
    @Transactional(readOnly = true)
    public int countPendingFacilities() {
        try {
            int count = facilityMapper.countFacilitiesByStatus("PENDING");
            log.info("ìŠ¹ì¸ ëŒ€ê¸° ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì™„ë£Œ - count: {}", count);
            return count;
        } catch (Exception e) {
            log.error("ìŠ¹ì¸ ëŒ€ê¸° ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }

    /**
     * ìŠ¹ì¸ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ
     */
    @Transactional(readOnly = true)
    public int countApprovedFacilities() {
        try {
            int count = facilityMapper.countFacilitiesByStatus("APPROVED");
            log.info("ìŠ¹ì¸ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì™„ë£Œ - count: {}", count);
            return count;
        } catch (Exception e) {
            log.error("ìŠ¹ì¸ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }

    /**
     * ê±°ë¶€ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ
     */
    @Transactional(readOnly = true)
    public int countRejectedFacilities() {
        try {
            int count = facilityMapper.countFacilitiesByStatus("REJECTED");
            log.info("ê±°ë¶€ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì™„ë£Œ - count: {}", count);
            return count;
        } catch (Exception e) {
            log.error("ê±°ë¶€ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }
}
````

## File: src/main/resources/templates/board/list.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title th:text="${pageTitle + ' - CareLink'}">ê²Œì‹œíŒ ëª©ë¡ - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav th:replace="~{layout/header :: navbar}"></nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:replace="~{layout/header :: messages}"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="flex-grow-1">
        <div class="container py-4">
            <!-- í˜ì´ì§€ ì œëª© (ë™ì ) -->
            <div class="row mb-4">
                <div class="col-12">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                            <li class="breadcrumb-item"><a href="/board">ì •ë³´ë§ˆë‹¹</a></li>
                            <li class="breadcrumb-item active" aria-current="page" th:text="${boardTitle}">ê²Œì‹œíŒ</li>
                        </ol>
                    </nav>
                    <h2>
                        <i class="fas fa-clipboard-list text-primary me-2"></i> 
                        <span th:text="${boardTitle}">ê²Œì‹œíŒ</span>
                    </h2>
                    <p class="text-muted mb-3" th:text="${boardDescription}">ê²Œì‹œíŒ ì„¤ëª…</p>
                    
                    <!-- ê²Œì‹œíŒ íƒ€ì… ë©”ë‰´ (ê¸°ì¡´ ë°©ì‹ ê·¸ëŒ€ë¡œ ìœ ì§€) -->
                    <div class="btn-group mb-3" role="group" aria-label="ê²Œì‹œíŒ íƒ€ì…">
                        <a th:href="@{/board(type='all')}" 
                           class="btn btn-sm board-type-link"
                           th:classappend="${type == 'all'} ? 'btn-primary' : 'btn-outline-primary'">
                            ì „ì²´
                        </a>
                        <a th:href="@{/board(type='notice')}" 
                           class="btn btn-sm board-type-link"
                           th:classappend="${type == 'notice'} ? 'btn-primary' : 'btn-outline-primary'">
                            ê³µì§€ì‚¬í•­
                        </a>
                        <a th:href="@{/board(type='info')}" 
                           class="btn btn-sm board-type-link"
                           th:classappend="${type == 'info'} ? 'btn-primary' : 'btn-outline-primary'">
                            ì •ë³´ê³µìœ 
                        </a>
                        <a th:href="@{/board(type='qna')}" 
                           class="btn btn-sm board-type-link"
                           th:classappend="${type == 'qna'} ? 'btn-primary' : 'btn-outline-primary'">
                            Q&A
                        </a>
                        <a th:href="@{/board(type='faq')}" 
                           class="btn btn-sm board-type-link"
                           th:classappend="${type == 'faq'} ? 'btn-primary' : 'btn-outline-primary'">
                            FAQ
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- ê²€ìƒ‰ í¼ (ê°œì„ ëœ íŒŒë¼ë¯¸í„° ì²˜ë¦¬) -->
            <div class="row mb-4">
                <div class="col-md-8">
                    <form th:action="@{/board}" method="get" class="d-flex gap-2">
                        <input type="hidden" name="type" th:value="${type}">
                        <select name="category" class="form-select" style="width: auto;">
                            <option value="">ì „ì²´ ì¹´í…Œê³ ë¦¬</option>
                            <option value="NOTICE" th:selected="${category == 'NOTICE'}">ê³µì§€ì‚¬í•­</option>
                            <option value="INFO" th:selected="${category == 'INFO'}">ì •ë³´ê³µìœ </option>
                            <option value="QNA" th:selected="${category == 'QNA'}">ì§ˆë¬¸ë‹µë³€</option>
                            <option value="FAQ" th:selected="${category == 'FAQ'}">ìì£¼ë¬»ëŠ”ì§ˆë¬¸</option>
                        </select>
                        <input type="text" name="keyword" class="form-control" th:value="${keyword}"
                               placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-search me-1"></i>ê²€ìƒ‰
                        </button>
                    </form>
                </div>
                <div class="col-md-4 text-end">
                    <!-- ê¸€ì“°ê¸° ë²„íŠ¼ - ê¶Œí•œë³„ í‘œì‹œ -->
                    <!-- ê³µì§€ì‚¬í•­ê³¼ FAQëŠ” ê´€ë¦¬ìë§Œ ì‘ì„± ê°€ëŠ¥ -->
                    <a th:if="${session.memberId != null and (type == 'notice' or type == 'faq') and session.loginMember?.role == 'ADMIN'}" 
                       th:href="@{/board/write(type=${type})}" 
                       class="btn btn-success">
                        <i class="fas fa-plus me-1"></i>ê¸€ì“°ê¸°
                    </a>
                    
                    <!-- ì •ë³´ê³µìœ ëŠ” ëª¨ë“  ë¡œê·¸ì¸ ì‚¬ìš©ì ì‘ì„± ê°€ëŠ¥ -->
                    <a th:if="${session.memberId != null and (type == 'info' or type == 'all')}" 
                       th:href="@{/board/write(type=${type == 'all' ? 'info' : type})}" 
                       class="btn btn-success">
                        <i class="fas fa-plus me-1"></i>ê¸€ì“°ê¸°
                    </a>
                    
                    <!-- Q&A: ì¼ë°˜ ì‚¬ìš©ìëŠ” ì§ˆë¬¸í•˜ê¸°, ê´€ë¦¬ìëŠ” ë‹µë³€í•˜ê¸° -->
                    <div th:if="${session.memberId != null and type == 'qna'}" class="btn-group">
                        <!-- ì¼ë°˜ ì‚¬ìš©ì: ì§ˆë¬¸í•˜ê¸° -->
                        <a th:if="${session.loginMember?.role != 'ADMIN'}" 
                           th:href="@{/board/write(type=qna, qaType=QUESTION)}" 
                           class="btn btn-primary">
                            <i class="fas fa-question-circle me-1"></i>ì§ˆë¬¸í•˜ê¸°
                        </a>
                        
                        <!-- ê´€ë¦¬ì: ì§ˆë¬¸í•˜ê¸° + ë‹µë³€í•˜ê¸° -->
                        <a th:if="${session.loginMember?.role == 'ADMIN'}" 
                           th:href="@{/board/write(type=qna, qaType=QUESTION)}" 
                           class="btn btn-primary">
                            <i class="fas fa-question-circle me-1"></i>ì§ˆë¬¸í•˜ê¸°
                        </a>
                        <a th:if="${session.loginMember?.role == 'ADMIN'}" 
                           th:href="@{/board/write(type=qna, qaType=ANSWER)}" 
                           class="btn btn-success">
                            <i class="fas fa-reply me-1"></i>ë‹µë³€í•˜ê¸°
                        </a>
                    </div>
                    
                    <!-- ê¶Œí•œ ì—†ëŠ” ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´ ë©”ì‹œì§€ -->
                    <span th:if="${session.memberId != null and (type == 'notice' or type == 'faq') and session.loginMember?.role != 'ADMIN'}" 
                          class="text-muted small">
                        <i class="fas fa-lock me-1"></i>ê´€ë¦¬ìë§Œ ì‘ì„± ê°€ëŠ¥
                    </span>
                    
                    <!-- ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìì—ê²ŒëŠ” ë¡œê·¸ì¸ ì•ˆë‚´ -->
                    <a th:unless="${session.memberId != null}" 
                       href="/member/login" 
                       class="btn btn-outline-secondary">
                        <i class="fas fa-sign-in-alt me-1"></i>ë¡œê·¸ì¸ í›„ ê¸€ì“°ê¸°
                    </a>
                </div>
            </div>

            <!-- ë™ì  ë¡œë”©ë  ê²Œì‹œíŒ ì»¨í…ì¸  ì»¨í…Œì´ë„ˆ -->
            <div id="boardContentContainer">
            <!-- í†µê³„ ì •ë³´ -->
            <div class="row mb-4">
                <div class="col-md-12">
                    <div class="card bg-light">
                        <div class="card-body py-2">
                            <div class="row text-center">
                                <div class="col-md-3">
                                    <small class="text-muted">ì „ì²´ ê²Œì‹œê¸€</small>
                                    <strong class="d-block" th:text="${pageInfo.totalCount}">0</strong>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">í˜„ì¬ í˜ì´ì§€</small>
                                    <strong class="d-block" th:text="${pageInfo.currentPage + '/' + pageInfo.totalPages}">1/1</strong>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">ì˜¤ëŠ˜ ì‘ì„±ê¸€</small>
                                    <strong class="d-block text-primary">0</strong>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">ì´ë²ˆì£¼ ì¸ê¸°ê¸€</small>
                                    <strong class="d-block text-success" th:text="${#lists.size(popularBoards)}">0</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì¸ê¸° ê²Œì‹œê¸€ -->
            <div class="card mb-4" th:if="${not #lists.isEmpty(popularBoards)}">
                <div class="card-header bg-primary text-white">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-fire me-2"></i>ì¸ê¸° ê²Œì‹œê¸€
                        <small class="ms-2" th:if="${not #strings.isEmpty(category)}" 
                               th:text="'(' + ${category} + ' ì¹´í…Œê³ ë¦¬)'">(ì¹´í…Œê³ ë¦¬)</small>
                    </h5>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <a th:each="board : ${popularBoards}"
                           th:href="@{/board/detail/{id}(id=${board.boardId}, type=${type})}"
                           class="list-group-item list-group-item-action">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-1" th:text="${board.title}">ê²Œì‹œê¸€ ì œëª©</h6>
                                <small th:text="${#temporals.format(board.createdAt, 'yyyy-MM-dd')}">ì‘ì„±ì¼</small>
                            </div>
                            <small class="text-muted">
                                <span th:text="${board.memberName}">ì‘ì„±ì</span> |
                                ì¡°íšŒ <span th:text="${board.viewCount ?: 0}">0</span> |
                                ì¶”ì²œ <span th:text="${board.likeCount ?: 0}">0</span>
                            </small>
                        </a>
                    </div>
                </div>
            </div>

            <!-- ê²Œì‹œê¸€ ëª©ë¡ -->
            <div class="card">
                <div class="card-header bg-light">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-list me-2"></i>ê²Œì‹œê¸€ ëª©ë¡
                        <small class="text-muted ms-2">
                            (ì´ <span th:text="${pageInfo.totalCount}">0</span>ê°œ)
                        </small>
                    </h5>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead class="table-primary">
                            <tr>
                                <th width="80">ë²ˆí˜¸</th>
                                <th width="100">ë¶„ë¥˜</th>
                                <th>ì œëª©</th>
                                <th width="120">ì‘ì„±ì</th>
                                <th width="100">ì‘ì„±ì¼</th>
                                <th width="80">ì¡°íšŒ</th>
                                <th width="60">ì¶”ì²œ</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:if="${#lists.isEmpty(boardList)}">
                                <td colspan="7" class="text-center py-4 text-muted">
                                    <i class="fas fa-inbox fa-2x mb-2"></i><br>
                                    ë“±ë¡ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
                                </td>
                            </tr>
                            <tr th:each="board, iterStat : ${boardList}">
                                <td class="text-center">
                                    <span th:if="${board.isNotice != null and board.isNotice}" class="badge bg-danger">ê³µì§€</span>
                                    <span th:unless="${board.isNotice != null and board.isNotice}" 
                                          th:text="${pageInfo.totalCount - ((pageInfo.currentPage - 1) * pageInfo.pageSize + iterStat.index)}">1</span>
                                </td>
                                <td class="text-center">
                                    <span th:if="${board.category == 'NOTICE'}" class="badge bg-danger">ê³µì§€</span>
                                    <span th:if="${board.category == 'INFO'}" class="badge bg-primary">ì •ë³´</span>
                                    <span th:if="${board.category == 'QNA' and board.qaType == 'QUESTION'}" class="badge bg-success">ì§ˆë¬¸</span>
                                    <span th:if="${board.category == 'QNA' and board.qaType == 'ANSWER'}" class="badge bg-info">ë‹µë³€</span>
                                    <span th:if="${board.category == 'QNA' and #strings.isEmpty(board.qaType)}" class="badge bg-success">Q&A</span>
                                    <span th:if="${board.category == 'FAQ'}" class="badge bg-warning">FAQ</span>
                                    <span th:if="${#strings.isEmpty(board.category)}" class="badge bg-secondary">ì¼ë°˜</span>
                                </td>
                                <td>
                                    <a th:href="@{/board/detail/{id}(id=${board.boardId}, type=${type}, page=${currentPage})}"
                                       th:text="${board.title}" class="text-decoration-none">ê²Œì‹œê¸€ ì œëª©</a>
                                    <span th:if="${board.commentCount != null and board.commentCount > 0}"
                                          class="badge bg-secondary ms-1" th:text="'[' + ${board.commentCount} + ']'">0</span>
                                    <span th:if="${board.isNew != null and board.isNew}" class="badge bg-danger ms-1">NEW</span>
                                    <span th:if="${board.isPinned != null and board.isPinned}" class="badge bg-info ms-1">ê³ ì •</span>
                                    <!-- Q&A ë‹µë³€ ìƒíƒœ í‘œì‹œ -->
                                    <span th:if="${board.category == 'QNA' and board.qaType == 'QUESTION' and board.isAnswered != null and board.isAnswered}" 
                                          class="badge bg-success ms-1">ë‹µë³€ì™„ë£Œ</span>
                                    <span th:if="${board.category == 'QNA' and board.qaType == 'QUESTION' and (board.isAnswered == null or !board.isAnswered)}" 
                                          class="badge bg-warning ms-1">ë‹µë³€ëŒ€ê¸°</span>
                                    <span th:if="${board.category == 'QNA' and board.qaType == 'QUESTION' and board.answerCount != null and board.answerCount > 0}" 
                                          class="badge bg-primary ms-1" th:text="'ë‹µë³€ ' + ${board.answerCount} + 'ê°œ'">ë‹µë³€ 0ê°œ</span>
                                </td>
                                <td th:text="${board.memberName}">ì‘ì„±ì</td>
                                <td th:text="${#temporals.format(board.createdAt, 'MM-dd')}">01-01</td>
                                <td class="text-center" th:text="${board.viewCount}">0</td>
                                <td class="text-center">
                                    <span th:if="${board.likeCount != null and board.likeCount > 0}" class="text-success" th:text="${board.likeCount}">0</span>
                                    <span th:unless="${board.likeCount != null and board.likeCount > 0}" class="text-muted">0</span>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- ì™„ì „í•œ í˜ì´ì§• (ëª¨ë“  íŒŒë¼ë¯¸í„° í¬í•¨) -->
                    <nav th:if="${pageInfo.totalPages > 1}" aria-label="Page navigation" class="mt-3">
                        <ul class="pagination justify-content-center">
                            <!-- ì²˜ìŒ í˜ì´ì§€ -->
                            <li class="page-item" th:classappend="${pageInfo.firstPage} ? 'disabled'">
                                <a class="page-link" 
                                   th:href="@{/board(page=1, keyword=${keyword}, category=${category}, type=${type})}"
                                   aria-label="First">
                                    <span aria-hidden="true">&laquo;&laquo;</span>
                                </a>
                            </li>
                            <!-- ì´ì „ í˜ì´ì§€ -->
                            <li class="page-item" th:classappend="${not pageInfo.hasPrevious} ? 'disabled'">
                                <a class="page-link"
                                   th:href="@{/board(page=${pageInfo.currentPage - 1}, keyword=${keyword}, category=${category}, type=${type})}"
                                   aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <!-- í˜ì´ì§€ ë²ˆí˜¸ -->
                            <li class="page-item"
                                th:each="page : ${#numbers.sequence(pageInfo.startPage, pageInfo.endPage)}"
                                th:classappend="${page == pageInfo.currentPage} ? 'active'">
                                <a class="page-link"
                                   th:href="@{/board(page=${page}, keyword=${keyword}, category=${category}, type=${type})}"
                                   th:text="${page}">1</a>
                            </li>
                            <!-- ë‹¤ìŒ í˜ì´ì§€ -->
                            <li class="page-item" th:classappend="${not pageInfo.hasNext} ? 'disabled'">
                                <a class="page-link"
                                   th:href="@{/board(page=${pageInfo.currentPage + 1}, keyword=${keyword}, category=${category}, type=${type})}"
                                   aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                            <!-- ë§ˆì§€ë§‰ í˜ì´ì§€ -->
                            <li class="page-item" th:classappend="${pageInfo.lastPage} ? 'disabled'">
                                <a class="page-link"
                                   th:href="@{/board(page=${pageInfo.totalPages}, keyword=${keyword}, category=${category}, type=${type})}"
                                   aria-label="Last">
                                    <span aria-hidden="true">&raquo;&raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
            </div> <!-- boardContentContainer ë -->
        </div>
    </main>

    <!-- í‘¸í„° -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
    
    <!-- JavaScript -->
    <div th:replace="~{layout/footer :: scripts}"></div>
    
    <!-- ê²Œì‹œíŒ ë„¤ë¹„ê²Œì´ì…˜ ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="/js/board-navigation.js"></script>
</body>
</html>
````

## File: src/main/resources/templates/facility/edit.html
````html
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/header :: header}">
    <title>ì‹œì„¤ ì •ë³´ ìˆ˜ì • - ë¼ì´íŠ¸ì¼€ì–´</title>
    <!-- ì‹œì„¤ ì •ë³´ ë©”íƒ€ íƒœê·¸ (JavaScriptì—ì„œ ì‚¬ìš©) -->
    <meta name="facility-id" th:content="${facility?.facilityId ?: ''}">
    <meta name="facility-name" th:content="${facility?.facilityName ?: 'ì‹œì„¤'}">
</head>

<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="container my-4">
    <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
            <li class="breadcrumb-item"><a href="/facility/search">ì‹œì„¤ ì°¾ê¸°</a></li>
            <li class="breadcrumb-item"><a href="/facility/manage">ë‚´ ì‹œì„¤ ê´€ë¦¬</a></li>
            <li class="breadcrumb-item active" aria-current="page">ì‹œì„¤ ì •ë³´ ìˆ˜ì •</li>
        </ol>
    </nav>
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-edit me-2"></i>ì‹œì„¤ ì •ë³´ ìˆ˜ì •
                    </h3>
                </div>
                <div class="card-body">
                    <form id="facilityEditForm" th:action="@{/facility/edit/{id}(id=${facility.facilityId})}" 
                          method="post" enctype="multipart/form-data" th:object="${facility}">
                        
                        <!-- ì‹œì„¤ëª… -->
                        <div class="mb-3">
                            <label for="facilityName" class="form-label">
                                <i class="fas fa-building me-1"></i>ì‹œì„¤ëª… <span class="text-danger">*</span>
                            </label>
                            <input type="text" class="form-control" id="facilityName" th:field="*{facilityName}"
                                   placeholder="ì‹œì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                        </div>

                        <!-- ì‹œì„¤ ìœ í˜• -->
                        <div class="mb-3">
                            <label for="facilityType" class="form-label">
                                <i class="fas fa-tag me-1"></i>ì‹œì„¤ ìœ í˜• <span class="text-danger">*</span>
                            </label>
                            <select class="form-select" id="facilityType" th:field="*{facilityType}" required>
                                <option value="">ì‹œì„¤ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="NURSING_HOME">ìš”ì–‘ì›</option>
                                <option value="HOSPITAL">ìš”ì–‘ë³‘ì›</option>
                                <option value="DAY_CARE">ë°ì´ì¼€ì–´ì„¼í„°</option>
                            </select>
                        </div>

                        <!-- ì£¼ì†Œ -->
                        <div class="mb-3">
                            <label for="facilityAddress" class="form-label">
                                <i class="fas fa-map-marker-alt me-1"></i>ì£¼ì†Œ <span class="text-danger">*</span>
                            </label>
                            <div class="input-group mb-2">
                                <input type="text" class="form-control" id="facilityAddress" th:field="*{address}"
                                       placeholder="ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”" readonly required>
                                <button type="button" class="btn btn-outline-primary" onclick="searchFacilityAddress()">
                                    <i class="fas fa-search me-1"></i>ì£¼ì†Œ ê²€ìƒ‰
                                </button>
                            </div>
                            <input type="text" class="form-control" id="detailAddress" th:field="*{detailAddress}"
                                   placeholder="ìƒì„¸ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 101í˜¸, 2ì¸µ)">
                            <!-- ìœ„ë„/ê²½ë„ íˆë“  í•„ë“œ -->
                            <input type="hidden" id="latitude" th:field="*{latitude}">
                            <input type="hidden" id="longitude" th:field="*{longitude}">
                        </div>
                        
                        <!-- ìœ„ì¹˜ ë¯¸ë¦¬ë³´ê¸° ì§€ë„ -->
                        <div class="mb-3" id="mapPreviewContainer" style="display: none;">
                            <label class="form-label">
                                <i class="fas fa-map me-1"></i>ìœ„ì¹˜ ë¯¸ë¦¬ë³´ê¸°
                            </label>
                            <div id="previewMap" style="width:100%; height:200px; border-radius: 8px; border: 1px solid #dee2e6;"></div>
                            <small class="form-text text-muted">ì„ íƒëœ ì£¼ì†Œì˜ ìœ„ì¹˜ê°€ ì§€ë„ì— í‘œì‹œë©ë‹ˆë‹¤.</small>
                        </div>

                        <!-- ì‹œì„¤ ì „í™”ë²ˆí˜¸ -->
                        <div class="mb-3">
                            <label for="phone" class="form-label">
                                <i class="fas fa-phone me-1"></i>ì‹œì„¤ ì „í™”ë²ˆí˜¸ <span class="text-danger">*</span>
                            </label>
                            <input type="tel" class="form-control" id="phone" th:field="*{phone}"
                                   placeholder="ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì§€ì—­ë²ˆí˜¸ì— ë§ê²Œ ìë™ í¬ë§·íŒ…)" required>
                            <small class="form-text text-muted">
                                <strong>ì§€ì—­ë²ˆí˜¸ ì˜ˆì‹œ:</strong> 
                                ì„œìš¸(02), ë¶€ì‚°(051), ëŒ€êµ¬(053), ì¸ì²œ(032), ê´‘ì£¼(062), ëŒ€ì „(042), ìš¸ì‚°(052) ë“±<br>
                                <strong>í˜•ì‹:</strong> 042ëŠ” 3-3-4, 02ëŠ” 2-3-4 ë˜ëŠ” 2-4-4 í˜•ì‹ìœ¼ë¡œ ìë™ ì ìš©ë©ë‹ˆë‹¤
                            </small>
                        </div>

                        <!-- í˜„ì¬ ì‹œì„¤ ì´ë¯¸ì§€ (ìˆëŠ” ê²½ìš°) -->
                        <div class="mb-3" th:if="${facility.facilityImage}">
                            <label class="form-label">
                                <i class="fas fa-image me-1"></i>í˜„ì¬ ì‹œì„¤ ì‚¬ì§„
                            </label>
                            <div class="current-image-container mb-3" style="position: relative; display: inline-block;">
                                <img th:src="@{${facility.facilityImage}}" alt="í˜„ì¬ ì‹œì„¤ ì‚¬ì§„" 
                                     style="max-width: 300px; max-height: 200px; border-radius: 12px; border: 2px solid #dee2e6; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                <div class="current-image-overlay" style="position: absolute; top: 8px; right: 8px;">
                                    <span class="badge bg-primary">í˜„ì¬ ì´ë¯¸ì§€</span>
                                </div>
                            </div>
                        </div>

                        <!-- ì‹œì„¤ ì´ë¯¸ì§€ ê´€ë¦¬ -->
                        <div class="mb-4">
                            <label class="form-label">
                                <i class="fas fa-images me-1"></i>ì‹œì„¤ ì‚¬ì§„ ê´€ë¦¬
                                <span th:if="${facility.facilityImage == null}" class="text-danger">*</span>
                            </label>
                            
                            <!-- ê³ ê¸‰ ì´ë¯¸ì§€ ì••ì¶• ë° ìµœì í™” ì‹œìŠ¤í…œ -->
                            <div class="image-management-section">
                                <div class="card border-success mb-3">
                                    <div class="card-body">
                                        <div class="d-flex align-items-center mb-3">
                                            <i class="fas fa-compress-alt fa-2x text-success me-3"></i>
                                            <div>
                                                <h6 class="card-title mb-1">ê³ ì„±ëŠ¥ ì´ë¯¸ì§€ ì••ì¶• ì‹œìŠ¤í…œ</h6>
                                                <p class="card-text text-muted small mb-0">
                                                    AVIF/WebP ì••ì¶•ìœ¼ë¡œ ìµœëŒ€ 80% ìš©ëŸ‰ ì ˆì•½ | 16:9 ë¹„ìœ¨ ìµœì í™” | ìµœëŒ€ 5ì¥ ë“±ë¡
                                                </p>
                                            </div>
                                        </div>
                                        
                                        <!-- 1ë‹¨ê³„: ì´ë¯¸ì§€ ì„ íƒ -->
                                        <div id="uploadSection" class="upload-section">
                                            <!-- íŒŒì¼ ì„ íƒ ì˜ì—­ -->
                                            <div class="file-selection-area">
                                                <!-- ë“œë˜ê·¸ì•¤ë“œë¡­ ì˜ì—­ ë° íŒŒì¼ ì„ íƒ -->
                                                <div id="dropZone" class="drop-zone" style="
                                                    border: 2px dashed #dee2e6;
                                                    border-radius: 8px;
                                                    padding: 2rem;
                                                    text-align: center;
                                                    background-color: #f8f9fa;
                                                    transition: all 0.3s ease;
                                                ">
                                                    <div class="drop-zone-content">
                                                        <i class="fas fa-cloud-upload-alt fa-2x text-muted mb-3"></i>
                                                        <button type="button" id="mainFileSelectBtn" class="btn btn-primary btn-lg px-4 py-2 mb-3" style="display: none;">
                                                            <i class="fas fa-folder-open me-2"></i>íŒŒì¼ ì„ íƒ
                                                        </button>
                                                        <p class="text-muted mb-2">ì—¬ê¸°ì— íŒŒì¼ì„ ë“œë˜ê·¸í•˜ì„¸ìš”</p>
                                                        <small class="text-muted">JPG, PNG, WebP ì§€ì› (ìµœëŒ€ 10MB, 5ê°œ íŒŒì¼)</small>
                                                        <div class="mt-3">
                                                            <div class="d-flex justify-content-center align-items-center gap-3 flex-wrap">
                                                                <small class="text-success d-flex align-items-center">
                                                                    <i class="fas fa-chart-line me-1"></i>ì‹¤ì‹œê°„ ì••ì¶•ë¥  í‘œì‹œ
                                                                </small>
                                                                <small class="text-success d-flex align-items-center">
                                                                    <i class="fas fa-tachometer-alt me-1"></i>ìµœì í™”ëœ ë¡œë”© ì†ë„
                                                                </small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <input type="file" id="imageInput" multiple accept="image/*" style="display: none;">
                                            </div>
                                            
                                            <!-- ì¶”ê°€ CSS ìŠ¤íƒ€ì¼ -->
                                            <style>
                                                /* ë©”ì¸ íŒŒì¼ ì„ íƒ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
                                                #mainFileSelectBtn {
                                                    transition: all 0.3s ease;
                                                    box-shadow: 0 2px 8px rgba(0, 123, 255, 0.2);
                                                    pointer-events: auto;
                                                    position: relative;
                                                    z-index: 10;
                                                }
                                                
                                                #mainFileSelectBtn:hover {
                                                    transform: translateY(-1px);
                                                    box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
                                                }
                                                
                                                #mainFileSelectBtn:active {
                                                    transform: translateY(0);
                                                    box-shadow: 0 2px 8px rgba(0, 123, 255, 0.2);
                                                }
                                                
                                                /* ë“œë˜ê·¸ì•¤ë“œë¡­ ì˜ì—­ ìŠ¤íƒ€ì¼ */
                                                .drop-zone {
                                                    cursor: pointer;
                                                }
                                                
                                                .drop-zone:hover {
                                                    border-color: #007bff;
                                                    background-color: #f0f8ff;
                                                }
                                                
                                                .drop-zone:hover {
                                                    background-color: #e9ecef !important;
                                                    border-color: #28a745 !important;
                                                }
                                                
                                                .drop-zone.dragover {
                                                    background-color: #d4edda !important;
                                                    border-color: #28a745 !important;
                                                    border-style: solid !important;
                                                }
                                                
                                                /* ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ìŠ¤íƒ€ì¼ */
                                                .image-preview-item {
                                                    transition: transform 0.3s ease;
                                                }
                                                
                                                .image-preview-item:hover {
                                                    transform: scale(1.05);
                                                }
                                                
                                                .image-preview-item.dragging {
                                                    opacity: 0.5;
                                                    transform: rotate(5deg);
                                                }
                                                
                                                .set-main-image:hover {
                                                    background-color: #ffc107 !important;
                                                    transform: scale(1.1);
                                                }
                                            </style>
                                            
                                            <!-- ì„ íƒëœ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ (ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë™ì  ìƒì„±) -->
                                            <!-- ì¤‘ë³µ ì œê±°: ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ selectedImagesPreview ì»¨í…Œì´ë„ˆë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ì—¬ -->
                                            <!-- ìˆœì„œ ë³€ê²½ê³¼ ë©”ì¸ ì´ë¯¸ì§€ ì§€ì • ê¸°ëŠ¥ì„ í†µí•©í•œ ë‹¨ì¼ ëª©ë¡ì„ ì œê³µí•©ë‹ˆë‹¤ -->
                                        </div>
                                        
                                        <!-- 1.5ë‹¨ê³„: ì••ì¶• ì§„í–‰ ìƒí™© í‘œì‹œ (ìƒˆë¡œ ì¶”ê°€) -->
                                        <div id="compressionProgress" class="compression-progress-section" style="display: none;">
                                            <div class="card border-info mb-3">
                                                <div class="card-header bg-info text-white">
                                                    <h6 class="mb-0">
                                                        <i class="fas fa-compress me-2"></i>íŒŒì¼ ì••ì¶• ì§„í–‰ ì¤‘
                                                    </h6>
                                                </div>
                                                <div class="card-body">
                                                    <div class="progress mb-3" style="height: 20px;">
                                                        <div id="compressionProgressBar" class="progress-bar progress-bar-striped progress-bar-animated bg-info" 
                                                             role="progressbar" style="width: 0%"></div>
                                                    </div>
                                                    <div id="compressionStatus" class="text-center text-muted">
                                                        <i class="fas fa-compress fa-spin me-2"></i>ì••ì¶• ì¤€ë¹„ ì¤‘...
                                                    </div>
                                                    <div id="compressionStats" class="mt-3 text-center" style="display: none;">
                                                        <small class="text-success">
                                                            <i class="fas fa-check-circle me-1"></i>
                                                            <span id="compressionResult"></span>
                                                        </small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- 2ë‹¨ê³„: í¬ë¡­ ë° ì••ì¶• (ìƒˆì°½ ë°©ì‹ ì‚¬ìš©ìœ¼ë¡œ ë¹„í™œì„±í™”) -->
                                        <div id="cropSection" class="crop-section" style="display: none !important;">
                                            <div class="compression-header mb-3">
                                                <h6 class="text-success">
                                                    <i class="fas fa-crop-alt me-2"></i>ì´ë¯¸ì§€ í¬ë¡­ ë° ê³ ì„±ëŠ¥ ì••ì¶•
                                                </h6>
                                                <div class="compression-progress">
                                                    <small class="text-muted">í˜„ì¬ ì´ë¯¸ì§€: <span id="currentImageInfo">1 / 1</span></small>
                                                </div>
                                            </div>
                                            
                                            <!-- í¬ë¡­ ì˜ì—­ -->
                                            <div id="cropContainer" class="crop-container mb-3">
                                                <div class="crop-image-container" style="min-height: 400px; background-color: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px;">
                                                    <img id="cropImage" style="max-width: 100%; height: auto; display: block;">
                                                    <canvas id="cropCanvas" style="display: none;"></canvas>
                                                    
                                                    <!-- ë¡œë”© ì¸ë””ì¼€ì´í„° -->
                                                    <div id="cropLoading" class="text-center py-5" style="display: none;">
                                                        <div class="spinner-border text-primary" role="status">
                                                            <span class="visually-hidden">í¬ë¡­ ì¤€ë¹„ ì¤‘...</span>
                                                        </div>
                                                        <p class="text-muted mt-2">ì´ë¯¸ì§€ í¬ë¡­ ì¤€ë¹„ ì¤‘...</p>
                                                    </div>
                                                    
                                                    <!-- ì˜¤ë¥˜ ë©”ì‹œì§€ -->
                                                    <div id="cropError" class="alert alert-warning text-center" style="display: none;">
                                                        <i class="fas fa-exclamation-triangle me-2"></i>
                                                        <strong>í¬ë¡­ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</strong><br>
                                                        <small>ì´ë¯¸ì§€ëŠ” ì›ë³¸ ê·¸ëŒ€ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.</small>
                                                        <div class="mt-2">
                                                            <button type="button" class="btn btn-sm btn-outline-primary" onclick="initializeCropperForce()">
                                                                <i class="fas fa-retry me-1"></i>í¬ë¡­ ê¸°ëŠ¥ ë‹¤ì‹œ ì‹œë„
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- í¬ë¡­ ì»¨íŠ¸ë¡¤ -->
                                            <div id="cropControls" class="crop-controls mb-3">
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <div class="crop-navigation d-flex align-items-center">
                                                            <button type="button" id="prevImage" class="btn btn-sm btn-outline-secondary me-2">
                                                                <i class="fas fa-chevron-left"></i>
                                                            </button>
                                                            <button type="button" id="nextImage" class="btn btn-sm btn-outline-secondary me-3">
                                                                <i class="fas fa-chevron-right"></i>
                                                            </button>
                                                            <button type="button" id="resetCrop" class="btn btn-sm btn-outline-warning me-2">
                                                                <i class="fas fa-undo me-1"></i>ë¦¬ì…‹
                                                            </button>
                                                            <button type="button" id="autoFit" class="btn btn-sm btn-outline-info">
                                                                <i class="fas fa-expand-arrows-alt me-1"></i>16:9 ìë™ë§ì¶¤
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4 text-end">
                                                        <button type="button" id="skipCrop" class="btn btn-outline-secondary me-2">
                                                            <i class="fas fa-forward me-1"></i>í¬ë¡­ ê±´ë„ˆë›°ê¸°
                                                        </button>
                                                        <button type="button" id="completeImageProcessing" class="btn btn-success">
                                                            <i class="fas fa-save me-1"></i>ì••ì¶• ì™„ë£Œ
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- ê³ ê¸‰ ì••ì¶• ì„¤ì • -->
                                            <div id="compressionSettings" class="compression-settings border-top pt-3">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <h6 class="text-success mb-3">
                                                            <i class="fas fa-sliders-h me-2"></i>ì••ì¶• ìµœì í™” ì„¤ì •
                                                        </h6>
                                                        <div class="mb-3">
                                                            <label for="compressionQuality" class="form-label">ì••ì¶• í’ˆì§ˆ</label>
                                                            <div class="d-flex align-items-center">
                                                                <input type="range" class="form-range flex-grow-1" id="compressionQuality" min="60" max="100" value="85">
                                                                <span class="badge bg-success ms-2" id="qualityValue">85%</span>
                                                            </div>
                                                            <small class="text-muted">í’ˆì§ˆì´ ë†’ì„ìˆ˜ë¡ ìš©ëŸ‰ì´ ì»¤ì§‘ë‹ˆë‹¤</small>
                                                        </div>
                                                        
                                                        <div class="mb-3">
                                                            <label class="form-label">ì••ì¶• í˜•ì‹</label>
                                                            <div class="btn-group w-100" role="group">
                                                                <input type="radio" class="btn-check" name="compressionFormat" id="formatWebP" value="webp" checked>
                                                                <label class="btn btn-outline-success" for="formatWebP">WebP</label>
                                                                
                                                                <input type="radio" class="btn-check" name="compressionFormat" id="formatAVIF" value="avif">
                                                                <label class="btn btn-outline-success" for="formatAVIF">AVIF</label>
                                                                
                                                                <input type="radio" class="btn-check" name="compressionFormat" id="formatJPEG" value="jpeg">
                                                                <label class="btn btn-outline-success" for="formatJPEG">JPEG</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="col-md-6">
                                                        <h6 class="text-info mb-3">
                                                            <i class="fas fa-chart-bar me-2"></i>ì••ì¶• íš¨ê³¼ ë¶„ì„
                                                        </h6>
                                                        <div class="compression-stats-detailed">
                                                            <div class="stat-item mb-2">
                                                                <div class="d-flex justify-content-between">
                                                                    <span>ì›ë³¸ í¬ê¸°:</span>
                                                                    <strong id="originalSize">-</strong>
                                                                </div>
                                                            </div>
                                                            <div class="stat-item mb-2">
                                                                <div class="d-flex justify-content-between">
                                                                    <span>ì••ì¶• í›„:</span>
                                                                    <strong class="text-success" id="compressedSize">-</strong>
                                                                </div>
                                                            </div>
                                                            <div class="stat-item mb-2">
                                                                <div class="d-flex justify-content-between">
                                                                    <span>ì ˆì•½ëŸ‰:</span>
                                                                    <strong class="text-warning" id="savedSize">-</strong>
                                                                </div>
                                                            </div>
                                                            <div class="stat-item mb-3">
                                                                <div class="d-flex justify-content-between">
                                                                    <span>ì••ì¶•ë¥ :</span>
                                                                    <strong class="text-primary" id="compressionRatio">-</strong>
                                                                </div>
                                                            </div>
                                                            
                                                            <div class="data-cost-savings">
                                                                <div class="alert alert-success py-2">
                                                                    <small>
                                                                        <i class="fas fa-wifi me-1"></i>
                                                                        <strong>ë°ì´í„° ë¹„ìš© ì ˆì•½:</strong><br>
                                                                        ì›” ì•½ <span id="monthlySavings" class="text-success">0ì›</span> ì ˆì•½ ì˜ˆìƒ
                                                                    </small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- SEO ìµœì í™” -->
                                            <div id="seoSettings" class="seo-settings border-top pt-3 mt-3">
                                                <h6 class="text-primary mb-3">
                                                    <i class="fas fa-search me-2"></i>SEO ê²€ìƒ‰ ìµœì í™”
                                                </h6>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label for="altText" class="form-label">Alt í…ìŠ¤íŠ¸ (ì›¹ì ‘ê·¼ì„±)</label>
                                                        <input type="text" class="form-control" id="altText" placeholder="ì´ë¯¸ì§€ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                                                        <small class="text-muted">ì‹œê° ì¥ì• ì¸ì„ ìœ„í•œ ì„¤ëª…</small>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label for="englishFilename" class="form-label">ì˜ë¬¸ íŒŒì¼ëª… (ìë™ìƒì„±)</label>
                                                        <input type="text" class="form-control" id="englishFilename" placeholder="ìë™ ìƒì„±ë¨" readonly>
                                                        <small class="text-muted">ê²€ìƒ‰ì—”ì§„ ìµœì í™”ìš©</small>
                                                    </div>
                                                </div>
                                                <div class="mt-3">
                                                    <label class="form-label">í‚¤ì›Œë“œ íƒœê·¸</label>
                                                    <div id="keywordList" class="keyword-list">
                                                        <span class="badge bg-primary me-1 mb-1" onclick="selectKeyword('ìš”ì–‘ì›')" style="cursor: pointer;">ìš”ì–‘ì›</span>
                                                        <span class="badge bg-primary me-1 mb-1" onclick="selectKeyword('ì‹œì„¤')" style="cursor: pointer;">ì‹œì„¤</span>
                                                        <span class="badge bg-primary me-1 mb-1" onclick="selectKeyword('ë‚´ë¶€')" style="cursor: pointer;">ë‚´ë¶€</span>
                                                        <span class="badge bg-primary me-1 mb-1" onclick="selectKeyword('ì™¸ê´€')" style="cursor: pointer;">ì™¸ê´€</span>
                                                        <span class="badge bg-primary me-1 mb-1" onclick="selectKeyword('ê¹¨ë—í•œ')" style="cursor: pointer;">ê¹¨ë—í•œ</span>
                                                        <span class="badge bg-primary me-1 mb-1" onclick="selectKeyword('í˜„ëŒ€ì ')" style="cursor: pointer;">í˜„ëŒ€ì </span>
                                                        <span class="badge bg-primary me-1 mb-1" onclick="selectKeyword('ë°ì€')" style="cursor: pointer;">ë°ì€</span>
                                                        <span class="badge bg-primary me-1 mb-1" onclick="selectKeyword('ì¾Œì í•œ')" style="cursor: pointer;">ì¾Œì í•œ</span>
                                                    </div>
                                                    <small class="text-muted">í´ë¦­í•˜ì—¬ í‚¤ì›Œë“œë¥¼ ì„ íƒí•˜ë©´ íŒŒì¼ëª…ì— ìë™ ë°˜ì˜ë©ë‹ˆë‹¤</small>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- 3ë‹¨ê³„: ìµœì¢… ì—…ë¡œë“œ ê´€ë¦¬ -->
                                        <div id="manageSection" class="manage-section" style="display: none;">
                                            <div class="final-upload-header mb-3">
                                                <h6 class="text-success">
                                                    <i class="fas fa-check-circle me-2"></i>ì••ì¶• ì™„ë£Œ - ì—…ë¡œë“œ ì¤€ë¹„
                                                </h6>
                                            </div>
                                            <div id="finalImageList" class="final-image-list">
                                                <!-- ìµœì¢… ì••ì¶•ëœ ì´ë¯¸ì§€ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë¨ -->
                                            </div>
                                            <div class="mt-3">
                                                <button type="button" id="uploadOptimizedImages" class="btn btn-success btn-lg">
                                                    <i class="fas fa-cloud-upload-alt me-2"></i>ìµœì í™”ëœ ì´ë¯¸ì§€ ì—…ë¡œë“œ
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Alt í…ìŠ¤íŠ¸ ì…ë ¥ (SEOìš©) -->
                            <input type="hidden" id="facilityImageAltText" name="facilityImageAltText" 
                                   th:value="${facility.facilityImageAltText}">
                            
                            <!-- ì €ì¥ëœ ì´ë¯¸ì§€ ëª©ë¡ (í¬ë¡­ í˜ì´ì§€ì—ì„œ ëŒì•„ì˜¨ ê²½ìš° í‘œì‹œ) -->
                            <div id="savedImagesSection" class="saved-images-section mt-3" style="display: none;">
                                <div class="card border-success">
                                    <div class="card-header bg-success text-white d-flex align-items-center">
                                        <i class="fas fa-check-circle me-2"></i>
                                        <h6 class="mb-0">ì €ì¥ëœ ì´ë¯¸ì§€ ëª©ë¡</h6>
                                        <span class="badge bg-light text-success ms-auto" id="savedImageCount">0ê°œ</span>
                                    </div>
                                    <div class="card-body">
                                        <div class="row g-3" id="savedImagesGrid">
                                            <!-- ì €ì¥ëœ ì´ë¯¸ì§€ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                                        </div>
                                        <div class="mt-3 text-center">
                                            <button type="button" class="btn btn-outline-primary btn-sm" onclick="openImageCropPage()">
                                                <i class="fas fa-plus me-2"></i>ì´ë¯¸ì§€ ì¶”ê°€/í¸ì§‘
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ìˆ˜ìš© ì¸ì› -->
                        <div class="mb-3">
                            <label for="capacity" class="form-label">
                                <i class="fas fa-users me-1"></i>ìˆ˜ìš© ì¸ì›
                            </label>
                            <input type="number" class="form-control" id="capacity" th:field="*{capacity}"
                                   placeholder="ìˆ˜ìš© ê°€ëŠ¥ ì¸ì›ì„ ì…ë ¥í•˜ì„¸ìš”" min="1">
                        </div>

                        <!-- ìš´ì˜ ì‹œê°„ -->
                        <div class="mb-3">
                            <label for="operatingHours" class="form-label">
                                <i class="fas fa-clock me-1"></i>ìš´ì˜ ì‹œê°„
                            </label>
                            <div class="row g-2">
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="operatingType" id="operating24" 
                                               value="24ì‹œê°„" th:checked="${facility.operatingHours == '24ì‹œê°„'}">
                                        <label class="form-check-label fw-bold text-success" for="operating24">
                                            <i class="fas fa-clock me-1"></i>24ì‹œê°„ ìš´ì˜
                                        </label>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="operatingType" id="operatingCustom" 
                                               value="custom" th:checked="${facility.operatingHours != '24ì‹œê°„' && facility.operatingHours != null}">
                                        <label class="form-check-label" for="operatingCustom">
                                            <i class="fas fa-clock me-1"></i>ì‹œê°„ ì§ì ‘ ì„¤ì •
                                        </label>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="operatingType" id="operatingWeekly" value="weekly">
                                        <label class="form-check-label" for="operatingWeekly">
                                            <i class="fas fa-calendar-week me-1"></i>ìš”ì¼ë³„ ì‹œê°„ ì„¤ì •
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì • -->
                            <div id="simpleTimeContainer" class="mt-3" style="display: none;">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h6 class="card-title mb-3">ìš´ì˜ ì‹œê°„ ì„¤ì •</h6>
                                        <div class="row g-2">
                                            <div class="col-md-6">
                                                <label class="form-label small">ì‹œì‘ ì‹œê°„</label>
                                                <select class="form-select" id="startHour">
                                                    <option value="">ì‹œ</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label small">ì¢…ë£Œ ì‹œê°„</label>
                                                <select class="form-select" id="endHour">
                                                    <option value="">ì‹œ</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="mt-2">
                                            <small class="text-muted">
                                                <i class="fas fa-info-circle me-1"></i>
                                                ë§¤ì¼ ë™ì¼í•œ ì‹œê°„ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ìš”ì¼ë³„ ì‹œê°„ ì„¤ì • -->
                            <div id="weeklyTimeContainer" class="mt-3" style="display: none;">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h6 class="card-title mb-3">ìš”ì¼ë³„ ìš´ì˜ ì‹œê°„</h6>
                                        <div id="weeklySchedule">
                                            <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                                        </div>
                                        
                                        <div class="mt-3">
                                            <small class="text-muted">
                                                <i class="fas fa-info-circle me-1"></i>
                                                ìš´ì˜í•˜ì§€ ì•ŠëŠ” ìš”ì¼ì€ ì²´í¬ë¥¼ í•´ì œí•˜ì„¸ìš”
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ì§ì ‘ ì…ë ¥ -->
                            <div id="customTimeContainer" class="mt-3" style="display: none;">
                                <input type="text" class="form-control" id="customOperatingHours" 
                                       placeholder="ì˜ˆ: 09:00-18:00, í‰ì¼ 09:00-18:00 ì£¼ë§ 10:00-16:00"
                                       th:value="${facility.operatingHours != '24ì‹œê°„' ? facility.operatingHours : ''}">
                                <small class="form-text text-muted">
                                    ììœ  í˜•ì‹ìœ¼ë¡œ ìš´ì˜ ì‹œê°„ì„ ì…ë ¥í•˜ì„¸ìš”
                                </small>
                            </div>
                            
                            <input type="hidden" id="operatingHours" th:field="*{operatingHours}">
                        </div>

                        <!-- í™ˆí˜ì´ì§€ -->
                        <div class="mb-3">
                            <label for="homepage" class="form-label">
                                <i class="fas fa-globe me-1"></i>í™ˆí˜ì´ì§€ URL
                            </label>
                            <input type="url" class="form-control" id="homepage" th:field="*{homepage}"
                                   placeholder="https://www.example.com">
                        </div>

                        <!-- ì‹œì„¤ ì„¤ëª… -->
                        <div class="mb-3">
                            <label for="description" class="form-label">
                                <i class="fas fa-info-circle me-1"></i>ì‹œì„¤ ì„¤ëª…
                            </label>
                            <textarea class="form-control" id="description" th:field="*{description}" rows="4"
                                      placeholder="ì‹œì„¤ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"
                                      data-rich-editor='{"height": "250px", "enableTable": false, "enableLink": true}'></textarea>
                        </div>

                        <!-- ì‹œì„¤ íŠ¹ì§• -->
                        <div class="mb-3">
                            <label for="features" class="form-label">
                                <i class="fas fa-star me-1"></i>ì‹œì„¤ íŠ¹ì§•
                            </label>
                            <input type="text" class="form-control" id="features" th:field="*{features}"
                                   placeholder="ì‹œì„¤ì˜ ì£¼ìš” íŠ¹ì§•ì„ ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 24ì‹œê°„ ê°„ë³‘ì„œë¹„ìŠ¤, ë¬¼ë¦¬ì¹˜ë£Œì‹¤, ì¹´í˜)">
                            <small class="form-text text-muted">ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ì—¬ëŸ¬ íŠ¹ì§•ì„ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</small>
                        </div>

                        <!-- ë²„íŠ¼ -->
                        <div class="d-flex gap-2 justify-content-end">
                            <a th:href="@{/facility/manage}" class="btn btn-secondary">
                                <i class="fas fa-times me-2"></i>ì·¨ì†Œ
                            </a>
                            <button type="submit" class="btn btn-primary" id="submitButton">
                                <i class="fas fa-save me-2"></i>ìˆ˜ì • ì™„ë£Œ
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ API -->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<!-- ì¹´ì¹´ì˜¤ë§µ API (ì¢Œí‘œ ë³€í™˜ìš©) -->
<script type="text/javascript" th:src="@{//dapi.kakao.com/v2/maps/sdk.js(appkey=${KAKAO_APP_KEY}, libraries='services')}"></script>
<!-- ì¹´ì¹´ì˜¤ë§µ ìœ í‹¸ë¦¬í‹° -->
<script src="/js/kakaomap.js"></script>
<script src="/js/facility-edit.js"></script>

<!-- ì „í™”ë²ˆí˜¸ í¬ë§·í„° -->
<script src="/js/phone-formatter.js"></script>

<!-- ëª¨ë“ˆí™”ëœ ì‹œì„¤ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ CSS -->
<link th:href="@{/css/facility-image-uploader.css}" rel="stylesheet">
<link th:href="@{/css/image-compressor.css}" rel="stylesheet">
<link th:href="@{/css/advanced-image-cropper.css}" rel="stylesheet">

<!-- ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ìœ í‹¸ë¦¬í‹° -->
<script th:src="@{/js/smart-scroll-utility.js}"></script>

<!-- ì‹œì„¤ ì´ë¯¸ì§€ ëª¨ë“ˆ ì‹œìŠ¤í…œ -->
<script th:src="@{/js/facility-image-core.js}"></script>
<script th:src="@{/js/facility-image-utils-module.js}"></script>
<script th:src="@{/js/facility-image-ui-module.js}"></script>
<script th:src="@{/js/facility-image-upload-module.js}"></script>
<script th:src="@{/js/facility-image-cropper-module.js}"></script>
<script th:src="@{/js/facility-image-data-module.js}"></script>
<script th:src="@{/js/facility-image-seo-module.js}"></script>
<script th:src="@{/js/facility-image-main-controller.js}"></script>

<!-- ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„°ëŠ” header.htmlì—ì„œ ì „ì—­ìœ¼ë¡œ ë¡œë“œë¨ -->

<script>
$(document).ready(function() {
    console.log('Initializing operating hours...');
    
    // ì‹œê°„ ì˜µì…˜ ë™ì  ìƒì„±
    initializeTimeOptions();
    
    // ìš”ì¼ë³„ ìŠ¤ì¼€ì¤„ ë¯¸ë¦¬ ìƒì„±
    generateWeeklySchedule();
    
    // ì§ì ‘ ì…ë ¥ ë³€ê²½ ì´ë²¤íŠ¸
    $('#customOperatingHours').on('input', function() {
        updateOperatingHours();
    });
    
    // ì´ˆê¸° ìƒíƒœ ì„¤ì •
    initializeOperatingHours();
});

function initializeTimeOptions() {
    // ì‹œì‘ ì‹œê°„ ì˜µì…˜ ìƒì„±
    for (let i = 0; i <= 23; i++) {
        const hour = String(i).padStart(2, '0');
        $('#startHour').append(`<option value="${hour}">${hour}ì‹œ</option>`);
        $('#endHour').append(`<option value="${hour}">${hour}ì‹œ</option>`);
    }
}

function generateWeeklySchedule() {
    console.log('Generating weekly schedule...');
    const days = ['ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼', 'ì¼ìš”ì¼'];
    let html = '';
    
    days.forEach((day, index) => {
        html += `
            <div class="row g-2 mb-2">
                <div class="col-3">
                    <div class="form-check">
                        <input class="form-check-input day-check" type="checkbox" id="day${index}" checked>
                        <label class="form-check-label" for="day${index}">${day}</label>
                    </div>
                </div>
                <div class="col-9 time-controls">
                    <div class="d-flex align-items-center gap-2">
                        <select class="form-select form-select-sm day-start" id="start${index}" style="width: 80px;">
                            <option value="">ì‹œì‘</option>
                        </select>
                        <span>ì‹œ ~</span>
                        <select class="form-select form-select-sm day-end" id="end${index}" style="width: 80px;">
                            <option value="">ì¢…ë£Œ</option>
                        </select>
                        <span>ì‹œ</span>
                    </div>
                    <div class="rest-day-notice text-muted small mt-1" style="display: none;">
                        <i class="fas fa-moon me-1"></i>íœ´ë¬´ì¼
                    </div>
                </div>
            </div>
        `;
    });
    
    $('#weeklySchedule').html(html);
    
    // ì‹œê°„ ì˜µì…˜ ì¶”ê°€
    for (let i = 0; i <= 23; i++) {
        const hour = String(i).padStart(2, '0');
        days.forEach((day, index) => {
            $(`#start${index}`).append(`<option value="${hour}">${hour}</option>`);
            $(`#end${index}`).append(`<option value="${hour}">${hour}</option>`);
        });
    }
    
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    setTimeout(function() {
        $('.day-check').off('change').on('change', function() {
            const index = $(this).attr('id').replace('day', '');
            const timeControls = $(this).closest('.row').find('.time-controls');
            const restNotice = timeControls.find('.rest-day-notice');
            const selects = timeControls.find('select');
            
            if ($(this).is(':checked')) {
                selects.show();
                timeControls.find('span').show();
                restNotice.hide();
            } else {
                selects.hide();
                timeControls.find('span').hide();
                restNotice.show();
            }
            
            updateOperatingHours();
        });
        
        $('.day-start, .day-end').off('change').on('change', function() {
            updateOperatingHours();
        });
        
        // ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì • ì´ë²¤íŠ¸ë„ ì—¬ê¸°ì„œ ë“±ë¡
        $('#startHour, #endHour').off('change').on('change', function() {
            updateOperatingHours();
        });
    }, 100);
}

function initializeOperatingHours() {
    const currentHours = $('#operatingHours').val();
    
    if (currentHours === '24ì‹œê°„') {
        $('#operating24').prop('checked', true);
    } else if (currentHours && currentHours !== '') {
        $('#operatingCustom').prop('checked', true);
        $('#customTimeContainer').show();
        $('#customOperatingHours').val(currentHours);
    }
}

function updateOperatingHours() {
    const operatingType = $('input[name="operatingType"]:checked').val();
    let operatingHours = '';
    
    if (operatingType === '24ì‹œê°„') {
        operatingHours = '24ì‹œê°„';
    } else if (operatingType === 'simple') {
        const startHour = $('#startHour').val();
        const endHour = $('#endHour').val();
        
        if (startHour && endHour) {
            operatingHours = `${startHour}:00-${endHour}:00`;
        }
    } else if (operatingType === 'weekly') {
        const weeklyHours = [];
        const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
        
        $('.day-check').each(function(index) {
            if ($(this).is(':checked')) {
                const startHour = $(`#start${index}`).val();
                const endHour = $(`#end${index}`).val();
                
                if (startHour && endHour) {
                    weeklyHours.push(`${days[index]} ${startHour}:00-${endHour}:00`);
                }
            } else {
                weeklyHours.push(`${days[index]} íœ´ë¬´`);
            }
        });
        
        operatingHours = weeklyHours.join(', ');
    } else if (operatingType === 'custom') {
        operatingHours = $('#customOperatingHours').val();
    }
    
    $('#operatingHours').val(operatingHours);
}


// ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì • ë¼ë””ì˜¤ ë²„íŠ¼ ë™ì  ì¶”ê°€
$(document).ready(function() {
    const simpleOption = `
        <div class="col-12">
            <div class="form-check">
                <input class="form-check-input" type="radio" name="operatingType" id="operatingSimple" value="simple">
                <label class="form-check-label" for="operatingSimple">
                    <i class="fas fa-clock me-1"></i>ê°„ë‹¨í•œ ì‹œê°„ ì„¤ì •
                </label>
            </div>
        </div>
    `;
    
    $('#operatingCustom').closest('.col-12').after(simpleOption);
    
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë‹¤ì‹œ ë“±ë¡
    setTimeout(function() {
        $('input[name="operatingType"]').off('change').on('change', function() {
            const value = $(this).val();
            console.log('Operating type changed:', value);
            
            // ëª¨ë“  ì»¨í…Œì´ë„ˆ ìˆ¨ê¸°ê¸°
            $('#simpleTimeContainer, #weeklyTimeContainer, #customTimeContainer').hide();
            
            if (value === 'custom') {
                $('#customTimeContainer').show();
            } else if (value === 'weekly') {
                $('#weeklyTimeContainer').show();
                generateWeeklySchedule();
            } else if (value === 'simple') {
                $('#simpleTimeContainer').show();
            }
            
            updateOperatingHours();
        });
    }, 100);
    
    // ëª¨ë“ˆí™”ëœ ì‹œì„¤ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ ì´ˆê¸°í™” (ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° ì´í›„)
    // ì—¬ëŸ¬ ë‹¨ê³„ë¡œ ì•ˆì „í•˜ê²Œ ì´ˆê¸°í™”
    
    // ì „ì—­ ì´ˆê¸°í™” ë°©ì§€ í”Œë˜ê·¸ ì²´í¬
    if (window.facilityImageSystemInitialized) {
        console.log('âš ï¸ ì´ë¯¸ì§€ ì‹œìŠ¤í…œì´ ì´ë¯¸ ì´ˆê¸°í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì¤‘ë³µ ì‹¤í–‰ì„ ë°©ì§€í•©ë‹ˆë‹¤.');
        return;
    }
    
    let initAttempts = 0;
    const maxInitAttempts = 3;
    
    function attemptImageSystemInit() {
        initAttempts++;
        
        try {
            console.log(`ğŸ”„ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹œë„ ${initAttempts}/${maxInitAttempts}`);
            
            // DOMì´ ì™„ì „íˆ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
            if (document.readyState !== 'complete') {
                console.log('â³ DOM ë¡œë”© ëŒ€ê¸° ì¤‘...');
                setTimeout(attemptImageSystemInit, 200);
                return;
            }
            
            // í•„ìˆ˜ DOM ìš”ì†Œ í™•ì¸
            const requiredElements = {
                dropZone: document.getElementById('dropZone'),
                imageInput: document.getElementById('imageInput'),
                uploadSection: document.getElementById('uploadSection')
            };
            
            const missingElements = Object.entries(requiredElements)
                .filter(([key, element]) => !element)
                .map(([key]) => key);
            
            if (missingElements.length > 0) {
                console.warn('âš ï¸ í•„ìˆ˜ DOM ìš”ì†Œê°€ ì—†ìŠµë‹ˆë‹¤:', missingElements);
                if (initAttempts < maxInitAttempts) {
                    setTimeout(attemptImageSystemInit, 500);
                    return;
                }
            }
            
            // ì´ë¯¸ì§€ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹¤í–‰
            initializeModularImageSystem();
            window.facilityImageSystemInitialized = true; // ì „ì—­ ì´ˆê¸°í™” ì™„ë£Œ í”Œë˜ê·¸ ì„¤ì •
            
        } catch (error) {
            console.error('âŒ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
            
            if (initAttempts < maxInitAttempts) {
                console.log(`ğŸ”„ ${500 * initAttempts}ms í›„ ì¬ì‹œë„...`);
                setTimeout(attemptImageSystemInit, 500 * initAttempts);
            } else {
                console.error('âŒ ìµœëŒ€ ì¬ì‹œë„ íšŸìˆ˜ ì´ˆê³¼. ê¸°ë³¸ ì—…ë¡œë“œë¡œ í´ë°±í•©ë‹ˆë‹¤.');
                showWarningMessage('ê³ ê¸‰ ì´ë¯¸ì§€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ì–´ ê¸°ë³¸ ì—…ë¡œë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');
                initializeBasicUpload();
            }
        }
    }
    
    // ì²« ë²ˆì§¸ ì‹œë„
    setTimeout(attemptImageSystemInit, 300);
});

// ëª¨ë“ˆí™”ëœ ì‹œì„¤ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
function initializeModularImageSystem() {
    try {
        console.log('ëª¨ë“ˆí™”ëœ ì‹œì„¤ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹œì‘...');
        
        // ì „ì²´ ëª¨ë“ˆ ë¡œë“œ ìƒíƒœ í™•ì¸ ë° ë””ë²„ê¹…
        console.log('ëª¨ë“ˆ ì‹œìŠ¤í…œ ë¡œë“œ ìƒíƒœ:', {
            FacilityImageSystem: !!window.FacilityImageSystem,
            FacilityImageMainController: !!window.FacilityImageMainController,
            FacilityImageCore: !!window.FacilityImageCore,
            FacilityImageUpload: !!window.FacilityImageUpload,
            FacilityImageCropper: !!window.FacilityImageCropper,
            FacilityImageSEO: !!window.FacilityImageSEO,
            FacilityImageUI: !!window.FacilityImageUI,
            FacilityImageUtils: !!window.FacilityImageUtils,
            FacilityImageData: !!window.FacilityImageData
        });
        
        // ë¸Œë¼ìš°ì € ì§€ì› í™•ì¸
        console.log('ë¸Œë¼ìš°ì € ì§€ì› ìƒíƒœ:', {
            FileReader: !!window.FileReader,
            FormData: !!window.FormData,
            fetch: !!window.fetch,
            Promise: !!window.Promise,
            URL: !!window.URL,
            FileAPI: !!(window.File && window.FileReader && window.FileList && window.Blob)
        });
        
        // ëª¨ë“ˆ ì‹œìŠ¤í…œì´ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
        if (!window.FacilityImageSystem || !window.FacilityImageMainController) {
            console.warn('âš ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ëª¨ë“ˆ ì‹œìŠ¤í…œì´ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            console.log('ì‚¬ìš© ê°€ëŠ¥í•œ Facility ê´€ë ¨ ê°ì²´:', Object.keys(window).filter(key => key.includes('Facility')));
            console.log('ğŸ”„ ê¸°ë³¸ ì—…ë¡œë“œ ì‹œìŠ¤í…œìœ¼ë¡œ í´ë°±í•©ë‹ˆë‹¤.');
            
            // ê¸°ë³¸ ì—…ë¡œë“œ ì‹œìŠ¤í…œ ë°”ë¡œ ì—°ê²°
            connectWithExistingFileInput();
            return;
        }
        
        // ì‹œì„¤ ì •ë³´ ê°€ì ¸ì˜¤ê¸° (ë‹¤ì¤‘ ë°©ë²•ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì¶”ì¶œ)
        let facilityId = null;
        let facilityName = 'ì‹œì„¤';
        
        // ë°©ë²• 1: ë©”íƒ€ íƒœê·¸ì—ì„œ ì¶”ì¶œ
        const facilityIdMeta = document.querySelector('meta[name="facility-id"]');
        const facilityNameMeta = document.querySelector('meta[name="facility-name"]');
        
        if (facilityIdMeta && facilityIdMeta.getAttribute('content')) {
            facilityId = facilityIdMeta.getAttribute('content');
        }
        if (facilityNameMeta && facilityNameMeta.getAttribute('content')) {
            facilityName = facilityNameMeta.getAttribute('content');
        }
        
        // ë°©ë²• 2: í¼ action URLì—ì„œ ì¶”ì¶œ
        if (!facilityId) {
            const form = document.getElementById('facilityEditForm');
            if (form && form.action) {
                const actionUrl = form.action;
                const match = actionUrl.match(/\/facility\/edit\/(\d+)/);
                if (match && match[1]) {
                    facilityId = match[1];
                    console.log('í¼ URLì—ì„œ ì‹œì„¤ ID ì¶”ì¶œ:', facilityId);
                }
            }
        }
        
        // ë°©ë²• 3: ì‹œì„¤ëª… ì…ë ¥ í•„ë“œì—ì„œ ì¶”ì¶œ
        if (facilityName === 'ì‹œì„¤' || !facilityName) {
            const facilityNameInput = document.getElementById('facilityName');
            if (facilityNameInput && facilityNameInput.value) {
                facilityName = facilityNameInput.value;
            }
        }
        
        console.log('ğŸ“‹ ì‹œì„¤ ì •ë³´:', {facilityId, facilityName});
        
        if (!facilityId || facilityId === '' || facilityId === '0') {
            console.warn('ì‹œì„¤ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê¸°ì¡´ íŒŒì¼ ì…ë ¥ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.');
            return;
        }
        
        // ëª¨ë“ˆ ì‹œìŠ¤í…œ ì´ˆê¸°í™” (ë¹„ë™ê¸°)
        window.FacilityImageMainController.initialize({
            facilityId: facilityId,
            facilityName: facilityName,
            settings: {
                maxFiles: 5,
                enableSEO: true,
                enableCompression: true,
                autoAdvanceSteps: false // edit í˜ì´ì§€ì—ì„œëŠ” ìë™ ì§„í–‰ ë¹„í™œì„±í™”
            }
        }).then(success => {
            if (success) {
                console.log('ëª¨ë“ˆí™”ëœ ì‹œì„¤ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ');
                
                // ì™„ë£Œ ì½œë°± ì„¤ì •
                setupImageSystemCallbacks();
                
                // ê¸°ì¡´ íŒŒì¼ ì…ë ¥ê³¼ ì—°ê²°
                connectWithExistingFileInput();
            } else {
                console.warn('ëª¨ë“ˆ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹¤íŒ¨, ê¸°ì¡´ íŒŒì¼ ì…ë ¥ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.');
            }
        }).catch(error => {
            console.error('ëª¨ë“ˆ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
            console.warn('ê¸°ì¡´ íŒŒì¼ ì…ë ¥ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.');
        });
        
    } catch (error) {
        console.error('ì‹œì„¤ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
        console.warn('ê¸°ì¡´ íŒŒì¼ ì…ë ¥ ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.');
    }
}

// ì´ë¯¸ì§€ ì‹œìŠ¤í…œ ì½œë°± ì„¤ì • (í˜¸í™˜ì„± í™•ë³´)
function setupImageSystemCallbacks() {
    if (!window.FacilityImageCore) return;
    
    // ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ ì‹œ ì²˜ë¦¬
    window.FacilityImageCore.on('uploadComplete', function(data) {
        console.log('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ:', data);
        
        // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
        showSuccessMessage('ì‹œì„¤ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
        
        // ê¸°ì¡´ íŒŒì¼ ì…ë ¥ í¼ê³¼ ì—°ê²° (í˜¸í™˜ì„±)
        updateExistingFileInput(data);
        
        // í•„ìš”ì‹œ í¼ ì—…ë°ì´íŠ¸
        setTimeout(() => {
            if (confirm('ì´ë¯¸ì§€ ì—…ë¡œë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                window.location.reload();
            }
        }, 2000);
    });
    
    // ì´ë¯¸ì§€ í¬ë¡­ ì™„ë£Œ ì‹œ ì²˜ë¦¬ (ê¸°ì¡´ AdvancedImageCropperì™€ í˜¸í™˜)
    window.FacilityImageCore.on('imageCropped', function(data) {
        console.log('ì´ë¯¸ì§€ í¬ë¡­ ì™„ë£Œ:', data);
        
        // ê¸°ì¡´ íŒŒì¼ ì…ë ¥ì— í¬ë¡­ëœ íŒŒì¼ ì„¤ì • (í˜¸í™˜ì„± ìœ ì§€)
        const facilityImageFile = document.getElementById('facilityImageFile');
        const facilityImageAltText = document.getElementById('facilityImageAltText');
        
        if (facilityImageFile && data.blob) {
            try {
                // DataTransferë¥¼ ì‚¬ìš©í•˜ì—¬ File ê°ì²´ë¥¼ inputì— ì„¤ì •
                const dataTransfer = new DataTransfer();
                const compressedFile = new File([data.blob], 
                    'facility-image.jpg', {
                        type: 'image/jpeg',
                        lastModified: Date.now()
                    });
                
                dataTransfer.items.add(compressedFile);
                facilityImageFile.files = dataTransfer.files;
                
                // Alt í…ìŠ¤íŠ¸ ì„¤ì •
                if (facilityImageAltText && data.altText) {
                    facilityImageAltText.value = data.altText;
                }
                
                // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
                showSuccessMessage('ì‹œì„¤ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ìµœì í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
                
            } catch (error) {
                console.error('íŒŒì¼ ì…ë ¥ ì—°ê²° ì‹¤íŒ¨:', error);
            }
        }
    });
    
    // ì—ëŸ¬ ì²˜ë¦¬
    window.FacilityImageCore.on('error', function(error) {
        console.error('ì´ë¯¸ì§€ ì‹œìŠ¤í…œ ì˜¤ë¥˜:', error);
        showErrorMessage('ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
    });
}

// ëª¨ë“  í•µì‹¬ ê¸°ëŠ¥ ì™„ì „ ì—°ê²° (ì´ë¯¸ì§€ ë¸”ëŸ¬ì˜¤ê¸°, ë©”ì¸ì´ë¯¸ì§€ ì§€ì •, ì´ë¯¸ì§€ìˆœì„œ, í¬ë¡­, ì••ì¶•, SEO)
function connectWithExistingFileInput() {
    console.log('ğŸ”— ê³ ì„±ëŠ¥ ì´ë¯¸ì§€ ì••ì¶• ì‹œìŠ¤í…œ ì—°ê²° ì‹œì‘');
    
    // ëª¨ë“ˆ ì‹œìŠ¤í…œ ìƒíƒœ ìƒì„¸ í™•ì¸
    const moduleStatus = {
        FacilityImageSystem: !!window.FacilityImageSystem,
        FacilityImageMainController: !!window.FacilityImageMainController,
        FacilityImageUpload: !!window.FacilityImageUpload,
        FacilityImageCore: !!window.FacilityImageCore,
        FacilityImageCropper: !!window.FacilityImageCropper
    };
    
    console.log('ğŸ“Š ëª¨ë“ˆ ì‹œìŠ¤í…œ ìƒíƒœ:', moduleStatus);
    
    // ëª¨ë“ˆ ì‹œìŠ¤í…œì´ ì„±ê³µí•œ ê²½ìš° ëª¨ë“  í•µì‹¬ ê¸°ëŠ¥ í™œì„±í™”
    if (window.FacilityImageMainController && window.FacilityImageSystem) {
        console.log('âœ… ëª¨ë“ˆ ì‹œìŠ¤í…œ ì‚¬ìš© ê°€ëŠ¥ - ëª¨ë“  ì••ì¶• ê¸°ëŠ¥ í™œì„±í™”');
        
        try {
            // 1. ë“œë˜ê·¸ì•¤ë“œë¡­ íŒŒì¼ ì„ íƒ ê¸°ëŠ¥ ì´ˆê¸°í™”
            initializeDragAndDrop();
            console.log('âœ… 1ë‹¨ê³„: ë“œë˜ê·¸ì•¤ë“œë¡­ ê¸°ëŠ¥ ì´ˆê¸°í™” ì™„ë£Œ');
            
            // 2. ì´ë¯¸ì§€ ìˆœì„œ ë³€ê²½ ê¸°ëŠ¥ ì´ˆê¸°í™”
            initializeImageOrdering();
            console.log('âœ… 2ë‹¨ê³„: ì´ë¯¸ì§€ ìˆœì„œ ë³€ê²½ ê¸°ëŠ¥ ì´ˆê¸°í™” ì™„ë£Œ');
            
            // 3. ë©”ì¸ ì´ë¯¸ì§€ ì§€ì • ê¸°ëŠ¥ ì´ˆê¸°í™”
            initializeMainImageSelection();
            console.log('âœ… 3ë‹¨ê³„: ë©”ì¸ ì´ë¯¸ì§€ ì§€ì • ê¸°ëŠ¥ ì´ˆê¸°í™” ì™„ë£Œ');
            
            // 4. ì‹¤ì‹œê°„ ì••ì¶•ë¥  ê³„ì‚° ì´ˆê¸°í™”
            initializeCompressionCalculation();
            console.log('âœ… 4ë‹¨ê³„: ì‹¤ì‹œê°„ ì••ì¶•ë¥  ê³„ì‚° ê¸°ëŠ¥ ì´ˆê¸°í™” ì™„ë£Œ');
            
            // 5. SEO ìµœì í™” ê¸°ëŠ¥ ì´ˆê¸°í™”
            initializeSEOOptimization();
            console.log('âœ… 5ë‹¨ê³„: SEO ìµœì í™” ê¸°ëŠ¥ ì´ˆê¸°í™” ì™„ë£Œ');
            
            // 6. í¬ë¡­ ê¸°ëŠ¥ ì´ˆê¸°í™”
            initializeCropFunctionality();
            console.log('âœ… 6ë‹¨ê³„: í¬ë¡­ ê¸°ëŠ¥ ì´ˆê¸°í™” ì™„ë£Œ');
            
            // 7. ìµœì¢… ì—…ë¡œë“œ ê¸°ëŠ¥ ì´ˆê¸°í™”
            initializeFinalUpload();
            console.log('âœ… 7ë‹¨ê³„: ìµœì¢… ì—…ë¡œë“œ ê¸°ëŠ¥ ì´ˆê¸°í™” ì™„ë£Œ');
            
        } catch (error) {
            console.error('âŒ ê¸°ëŠ¥ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
            // ê¸°ë³¸ ê¸°ëŠ¥ìœ¼ë¡œ í´ë°±
            initializeBasicUpload();
        }
        
    } else {
        console.warn('âš ï¸ ëª¨ë“ˆ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ - ê¸°ë³¸ ì—…ë¡œë“œ ì‚¬ìš©');
        // ê¸°ë³¸ íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ í™œì„±í™”
        initializeBasicUpload();
    }
    
    console.log('âœ… ëª¨ë“  í•µì‹¬ ê¸°ëŠ¥ ì—°ê²° ì™„ë£Œ');
}

// ê¸°ë³¸ ì—…ë¡œë“œ ê¸°ëŠ¥ (ëª¨ë“ˆ ì‹œìŠ¤í…œ ì—†ì´ ì‘ë™)
function initializeBasicUpload() {
    console.log('ğŸ”„ ê¸°ë³¸ ì—…ë¡œë“œ ê¸°ëŠ¥ ì´ˆê¸°í™” ì‹œì‘');
    
    const dropZone = document.getElementById('dropZone');
    const imageInput = document.getElementById('imageInput');
    const fileSelectBtn = document.getElementById('mainFileSelectBtn');
    
    if (!dropZone || !imageInput) {
        console.error('âŒ ê¸°ë³¸ DOM ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    // ê¸°ë³¸ ë“œë˜ê·¸ì•¤ë“œë¡­ ê¸°ëŠ¥
    dropZone.addEventListener('dragover', function(e) {
        e.preventDefault();
        dropZone.style.backgroundColor = '#e8f5e8';
        dropZone.style.borderColor = '#28a745';
    });
    
    dropZone.addEventListener('dragleave', function(e) {
        e.preventDefault();
        dropZone.style.backgroundColor = '';
        dropZone.style.borderColor = '';
    });
    
    dropZone.addEventListener('drop', function(e) {
        e.preventDefault();
        dropZone.style.backgroundColor = '';
        dropZone.style.borderColor = '';
        
        const files = Array.from(e.dataTransfer.files);
        handleBasicFileSelection(files);
    });
    
    // ì²« ë²ˆì§¸ ë“œë¡­ì¡´ í´ë¦­ ì´ë²¤íŠ¸ ì œê±° (ì¤‘ë³µ ë°©ì§€)
    
    if (fileSelectBtn) {
        fileSelectBtn.addEventListener('click', function(e) {
            e.preventDefault();
            imageInput.click();
        });
    }
    
    imageInput.addEventListener('change', function(e) {
        const files = Array.from(e.target.files);
        handleBasicFileSelection(files);
    });
    
    console.log('âœ… ê¸°ë³¸ ì—…ë¡œë“œ ê¸°ëŠ¥ ì´ˆê¸°í™” ì™„ë£Œ');
}

// ê¸°ë³¸ íŒŒì¼ ì„ íƒ ì²˜ë¦¬
function handleBasicFileSelection(files) {
    console.log('ğŸ“ ê¸°ë³¸ íŒŒì¼ ì„ íƒ ì²˜ë¦¬:', files.length + 'ê°œ');
    
    if (files.length === 0) return;
    
    // ê°„ë‹¨í•œ ê²€ì¦
    const validFiles = files.filter(file => file.type.startsWith('image/') && file.size <= 10 * 1024 * 1024);
    
    if (validFiles.length === 0) {
        alert('ìœ íš¨í•œ ì´ë¯¸ì§€ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš” (ìµœëŒ€ 10MB)');
        return;
    }
    
    if (validFiles.length > 5) {
        validFiles.splice(5);
        alert('ìµœëŒ€ 5ê°œ íŒŒì¼ë§Œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
    }
    
    // ë¯¸ë¦¬ë³´ê¸° ìƒì„±
    processSelectedFiles(validFiles);
}

// 1. ë“œë˜ê·¸ì•¤ë“œë¡­ íŒŒì¼ ì„ íƒ ê¸°ëŠ¥ (ì™„ì „í•œ ê¸°ëŠ¥ êµ¬í˜„)
function initializeDragAndDrop() {
    console.log('ğŸ”„ ë“œë˜ê·¸ì•¤ë“œë¡­ íŒŒì¼ ì„ íƒ ê¸°ëŠ¥ ì´ˆê¸°í™” ì‹œì‘');
    
    const dropZone = document.getElementById('dropZone');
    const imageInput = document.getElementById('imageInput');
    const fileSelectButton = document.getElementById('mainFileSelectBtn');
    
    console.log('ğŸ” DOM ìš”ì†Œ ê²€ìƒ‰ ê²°ê³¼:', {
        dropZone: !!dropZone,
        imageInput: !!imageInput,
        fileSelectButton: !!fileSelectButton,
        dropZoneExists: document.querySelector('#dropZone') !== null,
        imageInputExists: document.querySelector('#imageInput') !== null,
        mainFileSelectBtnExists: document.querySelector('#mainFileSelectBtn') !== null
    });
    
    if (!dropZone) {
        console.error('âŒ dropZone ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    if (!imageInput) {
        console.error('âŒ imageInput ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    console.log('âœ… DOM ìš”ì†Œ í™•ì¸ ì™„ë£Œ:', { dropZone: !!dropZone, imageInput: !!imageInput });
    
    // ë“œë˜ê·¸ì•¤ë“œë¡­ ì´ë²¤íŠ¸ (ê³ ì„±ëŠ¥ ì´ë²¤íŠ¸ ì²˜ë¦¬)
    dropZone.addEventListener('dragover', function(e) {
        e.preventDefault();
        e.stopPropagation();
        dropZone.classList.add('dragover');
        dropZone.style.backgroundColor = '#e8f5e8';
        dropZone.style.borderColor = '#28a745';
    });
    
    dropZone.addEventListener('dragleave', function(e) {
        e.preventDefault();
        e.stopPropagation();
        dropZone.classList.remove('dragover');
        dropZone.style.backgroundColor = '';
        dropZone.style.borderColor = '';
    });
    
    dropZone.addEventListener('drop', function(e) {
        e.preventDefault();
        e.stopPropagation();
        dropZone.classList.remove('dragover');
        dropZone.style.backgroundColor = '';
        dropZone.style.borderColor = '';
        
        const files = Array.from(e.dataTransfer.files);
        console.log('ğŸ“‚ ë“œë¡­ìœ¼ë¡œ íŒŒì¼ ì„ íƒ:', files.length + 'ê°œ');
        
        // ì´ë¯¸ì§€ íŒŒì¼ë§Œ í•„í„°ë§
        const imageFiles = files.filter(file => file.type.startsWith('image/'));
        if (imageFiles.length !== files.length) {
            console.warn('âš ï¸ ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì„ íƒ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
            alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
        }
        
        processSelectedFiles(imageFiles);
    });
    
    // í´ë¦­ìœ¼ë¡œ íŒŒì¼ ì„ íƒ (ë‹¤ì¤‘ ë°©ë²•ìœ¼ë¡œ ë³´ì¥)
    // ë‘ ë²ˆì§¸ ë“œë¡­ì¡´ í´ë¦­ ì´ë²¤íŠ¸ ì œê±° (ì¤‘ë³µ ë°©ì§€) - ë©”ì¸ í´ë¦­ í•¸ë“¤ëŸ¬ë§Œ ì‚¬ìš©
    
    // ë“œë¡­ì¡´ ì½˜í…ì¸  í´ë¦­ ì´ë²¤íŠ¸ ì œê±° (ì¤‘ë³µ ë°©ì§€)
    
    // í‚¤ì›Œë“œ ì„ íƒ í•¨ìˆ˜ ë° ìë™ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥
    window.selectKeyword = function(keyword) {
        console.log('ğŸ·ï¸ í‚¤ì›Œë“œ ì„ íƒ:', keyword);
        
        // SEO ëª¨ë“ˆì„ í†µí•´ í‚¤ì›Œë“œ ì„ íƒ
        if (window.FacilityImageSEO && window.FacilityImageSEO.selectKeyword) {
            window.FacilityImageSEO.selectKeyword(keyword);
        }
        
        // í‚¤ì›Œë“œ ë²„íŠ¼ ì‹œê°ì  í™œì„±í™”
        const keywordButtons = document.querySelectorAll('#keywordList .badge');
        keywordButtons.forEach(btn => {
            if (btn.textContent.trim() === keyword) {
                if (btn.classList.contains('bg-primary')) {
                    // ì„ íƒ í•´ì œ
                    btn.classList.remove('bg-primary');
                    btn.classList.add('bg-secondary');
                    console.log('ğŸ·ï¸ í‚¤ì›Œë“œ ì„ íƒ í•´ì œ:', keyword);
                } else {
                    // ì„ íƒ
                    btn.classList.remove('bg-secondary');
                    btn.classList.add('bg-primary');
                    console.log('ğŸ·ï¸ í‚¤ì›Œë“œ ì„ íƒ í™œì„±í™”:', keyword);
                }
            }
        });
        
        // Alt í…ìŠ¤íŠ¸ ë° íŒŒì¼ëª… ìë™ ì—…ë°ì´íŠ¸
        updateSEOFields();
    };
    
    // SEO í•„ë“œ ìë™ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateSEOFields() {
        const altTextInput = document.getElementById('altText');
        const filenameInput = document.getElementById('englishFilename');
        
        if (!altTextInput || !filenameInput) return;
        
        // ì„ íƒëœ í‚¤ì›Œë“œ ìˆ˜ì§‘
        const selectedKeywords = [];
        const keywordButtons = document.querySelectorAll('#keywordList .badge.bg-primary');
        keywordButtons.forEach(btn => {
            selectedKeywords.push(btn.textContent.trim());
        });
        
        console.log('ğŸ·ï¸ ì„ íƒëœ í‚¤ì›Œë“œ:', selectedKeywords);
        
        // SEO ëª¨ë“ˆì„ í†µí•´ íŒŒì¼ëª… ë° Alt í…ìŠ¤íŠ¸ ìƒì„±
        if (window.FacilityImageSEO) {
            const facilityName = document.querySelector('meta[name="facility-name"]')?.content || 'ì‹œì„¤';
            const currentImageIndex = 0; // í˜„ì¬ ì´ë¯¸ì§€ ì¸ë±ìŠ¤
            
            // íŒŒì¼ëª… ìƒì„±
            if (window.FacilityImageSEO.generateFileName) {
                const generatedFilename = window.FacilityImageSEO.generateFileName(
                    'facility-image.jpg',
                    selectedKeywords,
                    currentImageIndex
                );
                filenameInput.value = generatedFilename;
                console.log('ğŸ“„ íŒŒì¼ëª… ìƒì„±:', generatedFilename);
            }
            
            // Alt í…ìŠ¤íŠ¸ ìƒì„±
            if (window.FacilityImageSEO.generateAltText) {
                const generatedAltText = window.FacilityImageSEO.generateAltText(
                    facilityName,
                    selectedKeywords,
                    currentImageIndex
                );
                altTextInput.value = generatedAltText;
                console.log('ğŸ“ Alt í…ìŠ¤íŠ¸ ìƒì„±:', generatedAltText);
            }
        } else {
            // ê¸°ë³¸ ë°©ì‹ìœ¼ë¡œ ìƒì„±
            const keywordText = selectedKeywords.join(' ');
            const facilityName = document.querySelector('meta[name="facility-name"]')?.content || 'ì‹œì„¤';
            
            // ê¸°ë³¸ Alt í…ìŠ¤íŠ¸
            altTextInput.value = `${facilityName} ${keywordText} ì´ë¯¸ì§€`;
            
            // ê¸°ë³¸ íŒŒì¼ëª… (ì˜ë¬¸)
            const englishKeywords = selectedKeywords.map(keyword => {
                const translations = {
                    'ìš”ì–‘ì›': 'nursing-home',
                    'ì‹œì„¤': 'facility',
                    'ë‚´ë¶€': 'interior',
                    'ì™¸ê´€': 'exterior',
                    'ê¹¨ë—í•œ': 'clean',
                    'í˜„ëŒ€ì ': 'modern',
                    'ë°ì€': 'bright',
                    'ì¾Œì í•œ': 'comfortable'
                };
                return translations[keyword] || keyword;
            }).join('-');
            
            filenameInput.value = `${englishKeywords}-${Date.now()}.jpg`;
        }
    }
    
    // í¬ë¡­ ê¸°ëŠ¥ ê°•ì œ ì´ˆê¸°í™” í•¨ìˆ˜
    window.initializeCropperForce = function() {
        console.log('ğŸ”„ í¬ë¡­ ê¸°ëŠ¥ ê°•ì œ ì´ˆê¸°í™” ì‹œì‘');
        
        // ë¡œë”© í‘œì‹œ
        const cropLoading = document.getElementById('cropLoading');
        const cropError = document.getElementById('cropError');
        const cropImage = document.getElementById('cropImage');
        
        if (cropLoading) cropLoading.style.display = 'block';
        if (cropError) cropError.style.display = 'none';
        
        // ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•´ í¬ë¡­ ì´ˆê¸°í™” ì¬ì‹œë„
        if (window.FacilityImageMainController && window.FacilityImageMainController.workflowManager) {
            window.FacilityImageMainController.workflowManager.initializeCropStep()
                .then(() => {
                    console.log('âœ… í¬ë¡­ ê°•ì œ ì´ˆê¸°í™” ì„±ê³µ');
                    if (cropLoading) cropLoading.style.display = 'none';
                })
                .catch(error => {
                    console.error('âŒ í¬ë¡­ ê°•ì œ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                    if (cropLoading) cropLoading.style.display = 'none';
                    if (cropError) cropError.style.display = 'block';
                });
        } else {
            // ëŒ€ì²´ ë°©ë²•: ì§ì ‘ í¬ë¡­í¼ ì´ˆê¸°í™”
            setTimeout(() => {
                if (window.FacilityImageCropper && window.FacilityImageCropper.initialize) {
                    window.FacilityImageCropper.initialize()
                        .then(() => {
                            console.log('âœ… í¬ë¡­í¼ ì§ì ‘ ì´ˆê¸°í™” ì„±ê³µ');
                            if (cropLoading) cropLoading.style.display = 'none';
                        })
                        .catch(error => {
                            console.error('âŒ í¬ë¡­í¼ ì§ì ‘ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                            if (cropLoading) cropLoading.style.display = 'none';
                            if (cropError) cropError.style.display = 'block';
                        });
                } else {
                    console.error('âŒ í¬ë¡­í¼ ëª¨ë“ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŒ');
                    if (cropLoading) cropLoading.style.display = 'none';
                    if (cropError) cropError.style.display = 'block';
                }
            }, 1000);
        }
    };
    
    // ì••ì¶• í’ˆì§ˆ ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
    const qualitySlider = document.getElementById('compressionQuality');
    const qualityValue = document.getElementById('qualityValue');
    
    if (qualitySlider && qualityValue) {
        qualitySlider.addEventListener('input', function(e) {
            const quality = e.target.value;
            qualityValue.textContent = quality + '%';
            console.log('ğŸ“Š ì••ì¶• í’ˆì§ˆ ë³€ê²½:', quality + '%');
            
            // ì••ì¶• í†µê³„ ì—…ë°ì´íŠ¸
            updateCompressionStats(quality);
        });
    }
    
    // ì••ì¶• í˜•ì‹ ì„ íƒ ì´ë²¤íŠ¸
    const formatRadios = document.querySelectorAll('input[name="compressionFormat"]');
    formatRadios.forEach(radio => {
        radio.addEventListener('change', function(e) {
            const format = e.target.value;
            console.log('ğŸ“Š ì••ì¶• í˜•ì‹ ë³€ê²½:', format);
            
            // í˜„ì¬ í’ˆì§ˆë¡œ ì••ì¶• í†µê³„ ì—…ë°ì´íŠ¸
            const currentQuality = qualitySlider ? qualitySlider.value : 85;
            updateCompressionStats(currentQuality, format);
        });
    });
    
    // ì••ì¶• í†µê³„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateCompressionStats(quality, format = 'webp') {
        const originalSizeEl = document.getElementById('originalSize');
        const compressedSizeEl = document.getElementById('compressedSize');
        const savedSizeEl = document.getElementById('savedSize');
        const compressionRatioEl = document.getElementById('compressionRatio');
        const monthlySavingsEl = document.getElementById('monthlySavings');
        
        if (!originalSizeEl || !compressedSizeEl) return;
        
        // ê¸°ë³¸ ì˜ˆì‹œ í¬ê¸° (ì‹¤ì œë¡œëŠ” ì„ íƒëœ íŒŒì¼ë“¤ì˜ í¬ê¸°ë¥¼ ì‚¬ìš©)
        const originalSize = 5 * 1024 * 1024; // 5MB
        
        // í˜•ì‹ë³„ ì••ì¶•ë¥  ê³„ì‚°
        const compressionRates = {
            'webp': 0.7,
            'avif': 0.6,
            'jpeg': 0.8
        };
        
        const baseRate = compressionRates[format] || 0.7;
        const qualityFactor = quality / 100;
        const compressionRate = baseRate * qualityFactor;
        
        const compressedSize = originalSize * compressionRate;
        const savedSize = originalSize - compressedSize;
        const compressionRatio = ((savedSize / originalSize) * 100).toFixed(1);
        
        // UI ì—…ë°ì´íŠ¸
        originalSizeEl.textContent = formatFileSize(originalSize);
        compressedSizeEl.textContent = formatFileSize(compressedSize);
        savedSizeEl.textContent = formatFileSize(savedSize);
        compressionRatioEl.textContent = compressionRatio + '%';
        
        // ì›”ê°„ ì ˆì•½ ë¹„ìš© ê³„ì‚° (ì˜ˆì‹œ)
        const monthlySavings = Math.round(savedSize / 1024 / 1024 * 100); // MBë‹¹ 100ì› ê°€ì •
        if (monthlySavingsEl) {
            monthlySavingsEl.textContent = monthlySavings + 'ì›';
        }
        
        console.log('ğŸ“Š ì••ì¶• í†µê³„ ì—…ë°ì´íŠ¸:', {
            original: formatFileSize(originalSize),
            compressed: formatFileSize(compressedSize),
            saved: formatFileSize(savedSize),
            ratio: compressionRatio + '%'
        });
    }
    
    // íŒŒì¼ í¬ê¸° í¬ë§·íŒ… í•¨ìˆ˜
    function formatFileSize(bytes) {
        const sizes = ['B', 'KB', 'MB', 'GB'];
        if (bytes === 0) return '0 B';
        const i = Math.floor(Math.log(bytes) / Math.log(1024));
        return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];
    }
    
    // í¬ë¡­ ì„¹ì…˜ í‘œì‹œ ê°ì§€ ë° ìë™ ì´ˆê¸°í™” (ì¤‘ë³µ ë°©ì§€)
    const cropSection = document.getElementById('cropSection');
    if (cropSection && !cropSection.hasObserver) {
        cropSection.hasObserver = true; // ì¤‘ë³µ ë°©ì§€ í”Œë˜ê·¸
        
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                    const isVisible = cropSection.style.display !== 'none';
                    if (isVisible && !cropSection.isInitialized) {
                        cropSection.isInitialized = true; // ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€
                        console.log('ğŸ”„ í¬ë¡­ ì„¹ì…˜ í‘œì‹œë¨ - ì¦‰ì‹œ ì´ˆê¸°í™” ì‹œì‘');
                        
                        // í¬ë¡­ ì„¹ì…˜ ê°•ì œ í‘œì‹œ
                        cropSection.style.display = 'block';
                        cropSection.style.visibility = 'visible';
                        
                        // ì¦‰ì‹œ í¬ë¡­ ì´ë¯¸ì§€ ë¡œë“œ ì‹œë„
                        setTimeout(() => {
                            loadCropImageFromMainState();
                        }, 100);
                        
                        // ì••ì¶• í†µê³„ ì´ˆê¸°í™”
                        setTimeout(() => {
                            updateCompressionStats(85, 'webp');
                        }, 200);
                        
                        // SEO í•„ë“œ ì´ˆê¸°í™”
                        setTimeout(() => {
                            initializeSEOFields();
                        }, 300);
                    }
                }
            });
        });
        
        observer.observe(cropSection, {
            attributes: true,
            attributeFilter: ['style']
        });
    }
    
    // ë©”ì¸ ìƒíƒœì—ì„œ í¬ë¡­ ì´ë¯¸ì§€ ë¡œë“œ
    function loadCropImageFromMainState() {
        const cropImage = document.getElementById('cropImage');
        const cropLoading = document.getElementById('cropLoading');
        const cropError = document.getElementById('cropError');
        
        if (!cropImage) return;
        
        // ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì„ íƒëœ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
        let selectedFiles = [];
        if (window.FacilityImageMainController && window.FacilityImageMainController.selectedFiles) {
            selectedFiles = window.FacilityImageMainController.selectedFiles;
        }
        
        // ë˜ëŠ” ì „ì—­ ë³€ìˆ˜ì—ì„œ ì„ íƒëœ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
        if (selectedFiles.length === 0 && window.selectedImageFiles) {
            selectedFiles = window.selectedImageFiles;
        }
        
        if (selectedFiles.length > 0) {
            const firstFile = selectedFiles[0];
            console.log('ğŸ–¼ï¸ í¬ë¡­ì„ ìœ„í•œ ì´ë¯¸ì§€ ë¡œë“œ:', firstFile.name);
            
            // íŒŒì¼ì„ Data URLë¡œ ë³€í™˜
            const reader = new FileReader();
            reader.onload = function(e) {
                cropImage.src = e.target.result;
                cropImage.style.display = 'block';
                
                // í¬ë¡­ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
                const cropContainer = cropImage.closest('.crop-image-container');
                if (cropContainer) {
                    cropContainer.style.minHeight = '400px';
                    cropContainer.style.backgroundColor = '#f8f9fa';
                    cropContainer.style.display = 'flex';
                    cropContainer.style.alignItems = 'center';
                    cropContainer.style.justifyContent = 'center';
                }
                
                // ë¡œë”© ìˆ¨ê¸°ê¸°
                if (cropLoading) cropLoading.style.display = 'none';
                if (cropError) cropError.style.display = 'none';
                
                console.log('âœ… í¬ë¡­ ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ');
                
                // í¬ë¡­í¼ ì´ˆê¸°í™” ì‹œë„
                setTimeout(() => {
                    initializeCropperInstance();
                }, 500);
            };
            reader.onerror = function() {
                console.error('âŒ í¬ë¡­ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨');
                if (cropLoading) cropLoading.style.display = 'none';
                if (cropError) cropError.style.display = 'block';
            };
            reader.readAsDataURL(firstFile);
        } else {
            console.warn('âš ï¸ ì„ íƒëœ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.');
            if (cropLoading) cropLoading.style.display = 'none';
            if (cropError) cropError.style.display = 'block';
        }
    }
    
    // í¬ë¡­í¼ ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”
    function initializeCropperInstance() {
        const cropImage = document.getElementById('cropImage');
        if (!cropImage || !cropImage.src) {
            console.error('âŒ í¬ë¡­ ì´ë¯¸ì§€ ë˜ëŠ” ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }
        
        // ê¸°ì¡´ í¬ë¡­í¼ íŒŒê´´
        if (cropImage.cropper) {
            cropImage.cropper.destroy();
        }
        
        // ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ í™•ì¸
        if (cropImage.complete) {
            initializeCropper();
        } else {
            cropImage.onload = initializeCropper;
        }
        
        function initializeCropper() {
            console.log('ğŸ”„ í¬ë¡­í¼ ì´ˆê¸°í™” ì‹œì‘');
            
            // ìƒˆ í¬ë¡­í¼ ìƒì„±
            if (window.Cropper) {
                try {
                    cropImage.cropper = new Cropper(cropImage, {
                        aspectRatio: 16 / 9,
                        viewMode: 1,
                        dragMode: 'move',
                        autoCropArea: 1,
                        responsive: true,
                        restore: false,
                        guides: true,
                        center: true,
                        highlight: false,
                        cropBoxMovable: true,
                        cropBoxResizable: true,
                        toggleDragModeOnDblclick: false,
                        minCanvasWidth: 400,
                        minCanvasHeight: 300,
                        ready: function() {
                            console.log('âœ… í¬ë¡­í¼ ì´ˆê¸°í™” ì™„ë£Œ');
                            
                            // í¬ë¡­ ì„¹ì…˜ í‘œì‹œ
                            const cropSection = document.getElementById('cropSection');
                            if (cropSection) {
                                cropSection.style.display = 'block';
                            }
                            
                            // í¬ë¡­ ì»¨íŠ¸ë¡¤ í‘œì‹œ
                            const cropControls = document.getElementById('cropControls');
                            if (cropControls) {
                                cropControls.style.display = 'block';
                            }
                        },
                        cropstart: function() {
                            console.log('ğŸ”„ í¬ë¡­ ì‹œì‘');
                        },
                        cropmove: function() {
                            console.log('ğŸ”„ í¬ë¡­ ì´ë™');
                        },
                        cropend: function() {
                            console.log('ğŸ”„ í¬ë¡­ ì¢…ë£Œ');
                        }
                    });
                } catch (error) {
                    console.error('âŒ í¬ë¡­í¼ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                }
            } else {
                console.warn('âš ï¸ Cropper.js ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                
                // í¬ë¡­í¼ ì—†ì´ë„ ì´ë¯¸ì§€ í‘œì‹œ
                const cropSection = document.getElementById('cropSection');
                if (cropSection) {
                    cropSection.style.display = 'block';
                }
            }
        }
    }
    
    // SEO í•„ë“œ ì´ˆê¸°í™”
    function initializeSEOFields() {
        const altTextInput = document.getElementById('altText');
        const filenameInput = document.getElementById('englishFilename');
        const facilityName = document.querySelector('meta[name="facility-name"]')?.content || 'ì„œìš¸ í–‰ë³µìš”ì–‘ì›';
        
        if (altTextInput && !altTextInput.value) {
            altTextInput.value = `${facilityName} ì‹œì„¤ ì´ë¯¸ì§€`;
        }
        
        if (filenameInput && !filenameInput.value) {
            filenameInput.value = `${facilityName.replace(/\s+/g, '-').toLowerCase()}-facility-image.jpg`;
        }
    }
    
    // í¬ë¡­ ê±´ë„ˆë›°ê¸° ë²„íŠ¼ ì´ë²¤íŠ¸
    const skipCropBtn = document.getElementById('skipCrop');
    if (skipCropBtn) {
        skipCropBtn.addEventListener('click', function() {
            console.log('â­ï¸ í¬ë¡­ ê±´ë„ˆë›°ê¸° - ìµœì¢… ë‹¨ê³„ë¡œ ì´ë™');
            
            // ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•´ 3ë‹¨ê³„ë¡œ ì´ë™
            if (window.FacilityImageMainController && window.FacilityImageMainController.moveToStep) {
                window.FacilityImageMainController.moveToStep(3);
            } else {
                // ëŒ€ì²´ ë°©ë²•: ìˆ˜ë™ìœ¼ë¡œ ë‹¨ê³„ ì´ë™
                document.getElementById('cropSection').style.display = 'none';
                document.getElementById('manageSection').style.display = 'block';
                
                // ê°„ë‹¨í•œ ì•Œë¦¼
                alert('í¬ë¡­ì„ ê±´ë„ˆë›°ê³  ìµœì¢… ë‹¨ê³„ë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤.');
            }
        });
    }
    
    // íŒŒì¼ ì„ íƒ ë³€ê²½ ì´ë²¤íŠ¸
    imageInput.addEventListener('change', function(e) {
        const files = Array.from(e.target.files);
        console.log('ğŸ“‚ íŒŒì¼ ì…ë ¥ìœ¼ë¡œ íŒŒì¼ ì„ íƒ:', files.length + 'ê°œ');
        
        if (files.length > 0) {
            processSelectedFiles(files);
        }
    });
    
    // í‚¤ë³´ë“œ ì ‘ê·¼ì„± ì§€ì›
    dropZone.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            imageInput.click();
        }
    });
    
    // ì ‘ê·¼ì„± ì†ì„± ì„¤ì •
    dropZone.setAttribute('role', 'button');
    dropZone.setAttribute('tabindex', '0');
    dropZone.setAttribute('aria-label', 'ì´ë¯¸ì§€ íŒŒì¼ ì„ íƒ');
    
    // ë‹¨ìˆœí•˜ê³  ì•ˆì •ì ì¸ íŒŒì¼ ì„ íƒ ì´ë²¤íŠ¸ ì„¤ì •
    const fileSelectButtonElement = document.getElementById('mainFileSelectBtn');
    
    // ë©”ì¸ íŒŒì¼ ì„ íƒ ë²„íŠ¼ ì´ë²¤íŠ¸ (ìš°ì„  ìˆœìœ„)
    if (fileSelectButtonElement && imageInput) {
        fileSelectButtonElement.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation(); // ë²„ë¸”ë§ ë°©ì§€
            console.log('ğŸ”µ íŒŒì¼ ì„ íƒ ë²„íŠ¼ í´ë¦­');
            imageInput.value = '';
            imageInput.click();
        });
    }
    
    // ì„¸ ë²ˆì§¸ ë“œë¡­ì¡´ í´ë¦­ ì´ë²¤íŠ¸ ì œê±° (ì¤‘ë³µ ë°©ì§€)
    
    console.log('âœ… ë“œë˜ê·¸ì•¤ë“œë¡­ íŒŒì¼ ì„ íƒ ê¸°ëŠ¥ ì´ˆê¸°í™” ì™„ë£Œ');
}

// 2. ì´ë¯¸ì§€ ìˆœì„œ ë³€ê²½ ê¸°ëŠ¥
function initializeImageOrdering() {
    console.log('ğŸ”„ ì´ë¯¸ì§€ ìˆœì„œ ë³€ê²½ ê¸°ëŠ¥ ì´ˆê¸°í™”');
    
    // ìˆœì„œ ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    document.addEventListener('dragstart', function(e) {
        if (e.target.classList.contains('image-preview-item')) {
            e.target.classList.add('dragging');
        }
    });
    
    document.addEventListener('dragend', function(e) {
        if (e.target.classList.contains('image-preview-item')) {
            e.target.classList.remove('dragging');
        }
    });
    
    document.addEventListener('dragover', function(e) {
        if (e.target.closest('.image-preview-list')) {
            e.preventDefault();
        }
    });
    
    document.addEventListener('drop', function(e) {
        if (e.target.closest('.image-preview-list')) {
            e.preventDefault();
            // ìˆœì„œ ë³€ê²½ ë¡œì§
            updateImageOrder();
        }
    });
}

// 3. ë©”ì¸ ì´ë¯¸ì§€ ì§€ì • ê¸°ëŠ¥
function initializeMainImageSelection() {
    console.log('â­ ë©”ì¸ ì´ë¯¸ì§€ ì§€ì • ê¸°ëŠ¥ ì´ˆê¸°í™”');
    
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('set-main-image')) {
            const imageIndex = e.target.dataset.index;
            setMainImage(imageIndex);
        }
    });
}

// 4. ì‹¤ì‹œê°„ ì••ì¶•ë¥  ê³„ì‚° ì´ˆê¸°í™”
function initializeCompressionCalculation() {
    console.log('ğŸ“Š ì‹¤ì‹œê°„ ì••ì¶•ë¥  ê³„ì‚° ê¸°ëŠ¥ ì´ˆê¸°í™”');
    
    // ì••ì¶• í’ˆì§ˆ ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
    const compressionQuality = document.getElementById('compressionQuality');
    const qualityValue = document.getElementById('qualityValue');
    
    if (compressionQuality && qualityValue) {
        compressionQuality.addEventListener('input', function(e) {
            const quality = e.target.value;
            qualityValue.textContent = quality + '%';
            
            // ì‹¤ì‹œê°„ ì••ì¶•ë¥  ê³„ì‚°
            calculateCompressionStats(quality);
        });
    }
    
    // ì••ì¶• í˜•ì‹ ë³€ê²½ ì´ë²¤íŠ¸
    document.querySelectorAll('input[name="compressionFormat"]').forEach(radio => {
        radio.addEventListener('change', function() {
            const format = this.value;
            console.log('ì••ì¶• í˜•ì‹ ë³€ê²½:', format);
            calculateCompressionStats(compressionQuality.value, format);
        });
    });
}

// 5. SEO ìµœì í™” ê¸°ëŠ¥ ì´ˆê¸°í™”
function initializeSEOOptimization() {
    console.log('ğŸ” SEO ìµœì í™” ê¸°ëŠ¥ ì´ˆê¸°í™”');
    
    // Alt í…ìŠ¤íŠ¸ ìë™ ìƒì„±
    const altText = document.getElementById('altText');
    if (altText) {
        altText.addEventListener('input', function() {
            generateSEOFilename();
        });
    }
    
    // í‚¤ì›Œë“œ ì„ íƒ ì´ë²¤íŠ¸ëŠ” ì´ë¯¸ HTMLì— onclickìœ¼ë¡œ ì—°ê²°ë¨
    // SEO.selectKeyword í•¨ìˆ˜ í˜¸ì¶œ
}

// 6. í¬ë¡­ ê¸°ëŠ¥ ì´ˆê¸°í™”
function initializeCropFunctionality() {
    console.log('âœ‚ï¸ í¬ë¡­ ê¸°ëŠ¥ ì´ˆê¸°í™”');
    
    // í¬ë¡­ ì»¨íŠ¸ë¡¤ ì´ë²¤íŠ¸
    const prevImage = document.getElementById('prevImage');
    const nextImage = document.getElementById('nextImage');
    const resetCrop = document.getElementById('resetCrop');
    const autoFit = document.getElementById('autoFit');
    
    if (prevImage) {
        prevImage.addEventListener('click', function() {
            if (window.FacilityImageMainController) {
                window.FacilityImageMainController.proceedToPrevImage();
            }
        });
    }
    
    if (nextImage) {
        nextImage.addEventListener('click', function() {
            if (window.FacilityImageMainController) {
                window.FacilityImageMainController.proceedToNextImage();
            }
        });
    }
    
    if (resetCrop) {
        resetCrop.addEventListener('click', function() {
            if (window.FacilityImageCropper) {
                window.FacilityImageCropper.reset();
            }
        });
    }
    
    if (autoFit) {
        autoFit.addEventListener('click', function() {
            if (window.FacilityImageCropper) {
                window.FacilityImageCropper.setAspectRatio(16/9);
            }
        });
    }
}

// 7. ìµœì¢… ì—…ë¡œë“œ ê¸°ëŠ¥ ì´ˆê¸°í™”
function initializeFinalUpload() {
    console.log('ğŸš€ ìµœì¢… ì—…ë¡œë“œ ê¸°ëŠ¥ ì´ˆê¸°í™”');
    
    const uploadButton = document.getElementById('uploadOptimizedImages');
    if (uploadButton) {
        uploadButton.addEventListener('click', function() {
            if (window.FacilityImageMainController) {
                window.FacilityImageMainController.uploadImages();
            }
        });
    }
    
    const completeButton = document.getElementById('completeImageProcessing');
    if (completeButton) {
        completeButton.addEventListener('click', function() {
            if (window.FacilityImageMainController) {
                window.FacilityImageMainController.moveToStep(3);
            }
        });
    }
    
    const proceedButton = document.getElementById('proceedToStep2');
    if (proceedButton) {
        // ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
        proceedButton.removeEventListener('click', arguments.callee);
        
        // ìƒˆë¡œìš´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ (ìµœìš°ì„ ìˆœìœ„ë¡œ ì„¤ì •, ìº¡ì²˜ ë‹¨ê³„ì—ì„œ ì‹¤í–‰)
        proceedButton.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            
            // ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ë¬´ë ¥í™”
            if (window.FacilityImageMainController && window.FacilityImageMainController.moveToStep) {
                window.FacilityImageMainController.moveToStep = function() { 
                    console.log('ğŸš« ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ë‹¨ê³„ ì´ë™ ì°¨ë‹¨ë¨'); 
                    return false; 
                };
            }
            
            console.log('ğŸ”„ ìƒˆì°½ ë°©ì‹: 2ë‹¨ê³„ í¬ë¡­ í˜ì´ì§€ë¡œ ì´ë™');
            
            // ì‹œì„¤ ID ê°€ì ¸ì˜¤ê¸°
            const facilityId = document.querySelector('meta[name="facility-id"]')?.content || '1';
            
            // ì„ íƒëœ íŒŒì¼ë“¤ì„ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            if (window.selectedImageFiles && window.selectedImageFiles.length > 0) {
                const fileDataArray = [];
                let processedCount = 0;
                
                // ë¡œë”© í‘œì‹œ
                proceedButton.disabled = true;
                proceedButton.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i>íŒŒì¼ ì¤€ë¹„ ì¤‘...';
                
                // ê° íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ ì €ì¥
                window.selectedImageFiles.forEach((file, index) => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        fileDataArray[index] = {
                            name: file.name,
                            type: file.type,
                            size: file.size,
                            data: e.target.result
                        };
                        processedCount++;
                        
                        // ì§„í–‰ë¥  í‘œì‹œ
                        const progress = Math.round((processedCount / window.selectedImageFiles.length) * 100);
                        proceedButton.innerHTML = `<i class="fas fa-spinner fa-spin me-1"></i>íŒŒì¼ ì¤€ë¹„ ì¤‘... ${progress}%`;
                        
                        // ëª¨ë“  íŒŒì¼ ì²˜ë¦¬ ì™„ë£Œ ì‹œ í˜ì´ì§€ ì´ë™
                        if (processedCount === window.selectedImageFiles.length) {
                            sessionStorage.setItem('selectedImageFiles', JSON.stringify(fileDataArray));
                            console.log('âœ… íŒŒì¼ ì„¸ì…˜ ì €ì¥ ì™„ë£Œ, í¬ë¡­ í˜ì´ì§€ë¡œ ì´ë™');
                            window.location.href = `/facility/crop-images/${facilityId}`;
                        }
                    };
                    reader.readAsDataURL(file);
                });
            } else {
                // ì„ íƒëœ íŒŒì¼ì´ ì—†ìœ¼ë©´ ë°”ë¡œ ì´ë™
                console.log('âš ï¸ ì„ íƒëœ íŒŒì¼ì´ ì—†ì–´ ë¹ˆ í¬ë¡­ í˜ì´ì§€ë¡œ ì´ë™');
                window.location.href = `/facility/${facilityId}/crop-images`;
            }
        }, true); // ìº¡ì²˜ ë‹¨ê³„ì—ì„œ ì‹¤í–‰í•˜ì—¬ ë‹¤ë¥¸ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë³´ë‹¤ ë¨¼ì € ì‹¤í–‰
    }
}

// íŒŒì¼ ì„ íƒ ì²˜ë¦¬ í•¨ìˆ˜ (ì™„ì „í•œ ê¸°ëŠ¥ êµ¬í˜„ - ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°, ìˆœì„œ, ë©”ì¸ì´ë¯¸ì§€, ì••ì¶•ë¥  ê³„ì‚°)
// ì „ì—­ ë³€ìˆ˜ë¡œ ì„ íƒëœ íŒŒì¼ ì €ì¥
window.selectedImageFiles = [];

function processSelectedFiles(files) {
    if (!files || files.length === 0) {
        console.warn('âš ï¸ ì„ íƒëœ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    console.log('ğŸ“‚ íŒŒì¼ ì„ íƒ ì²˜ë¦¬ ì‹œì‘:', files.length + 'ê°œ');
    
    // ì „ì—­ ë³€ìˆ˜ì— ì €ì¥
    window.selectedImageFiles = files;
    
    // íŒŒì¼ ê°œìˆ˜ ì œí•œ í™•ì¸
    if (files.length > 5) {
        console.warn('âš ï¸ ìµœëŒ€ 5ê°œ íŒŒì¼ë§Œ ì„ íƒ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
        alert('ìµœëŒ€ 5ê°œ íŒŒì¼ë§Œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
        files = files.slice(0, 5);
    }
    
    // ì´ë¯¸ì§€ íŒŒì¼ ê²€ì¦
    const validImageFiles = [];
    const invalidFiles = [];
    
    files.forEach(file => {
        if (file.type.startsWith('image/')) {
            // íŒŒì¼ í¬ê¸° ê²€ì¦ (10MB ì œí•œ)
            if (file.size <= 10 * 1024 * 1024) {
                validImageFiles.push(file);
            } else {
                console.warn('âš ï¸ íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤:', file.name);
                invalidFiles.push(file.name + ' (í¬ê¸° ì´ˆê³¼)');
            }
        } else {
            invalidFiles.push(file.name + ' (ì´ë¯¸ì§€ íŒŒì¼ ì•„ë‹˜)');
        }
    });
    
    if (invalidFiles.length > 0) {
        const message = 'ë‹¤ìŒ íŒŒì¼ë“¤ì€ ì—…ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤:\n' + invalidFiles.join('\n');
        // UI ëª¨ë“ˆì„ ì‚¬ìš©í•œ ì•Œë¦¼ í‘œì‹œ
        if (window.FacilityImageUI && typeof window.FacilityImageUI.showNotification === 'function') {
            window.FacilityImageUI.showNotification(message, 'warning');
        } else {
            alert(message);
        }
    }
    
    if (validImageFiles.length === 0) {
        console.warn('âš ï¸ ìœ íš¨í•œ ì´ë¯¸ì§€ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.');
        // UI ëª¨ë“ˆì„ ì‚¬ìš©í•œ ì•Œë¦¼ í‘œì‹œ
        if (window.FacilityImageUI && typeof window.FacilityImageUI.showNotification === 'function') {
            window.FacilityImageUI.showNotification('ìœ íš¨í•œ ì´ë¯¸ì§€ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.', 'warning');
        }
        return;
    }
    
    console.log('âœ… ìœ íš¨í•œ ì´ë¯¸ì§€ íŒŒì¼:', validImageFiles.length + 'ê°œ');
    
    // UI ëª¨ë“ˆì„ ì‚¬ìš©í•œ ì„±ê³µ ì•Œë¦¼ í‘œì‹œ
    if (window.FacilityImageUI && typeof window.FacilityImageUI.showNotification === 'function') {
        window.FacilityImageUI.showNotification(
            `${validImageFiles.length}ê°œì˜ ì´ë¯¸ì§€ íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤.`, 
            'success'
        );
    }
    
    // 1. ëª¨ë“ˆ ì‹œìŠ¤í…œìœ¼ë¡œ íŒŒì¼ ì „ë‹¬
    if (window.FacilityImageMainController && typeof window.FacilityImageMainController.processFiles === 'function') {
        window.FacilityImageMainController.processFiles(validImageFiles);
    } else {
        // ëª¨ë“ˆ ì‹œìŠ¤í…œì´ ì—†ìœ¼ë©´ ê¸°ë³¸ ì²˜ë¦¬
        console.warn('ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì–´ ê¸°ë³¸ ì²˜ë¦¬ ì‚¬ìš©');
    }
    
    // 2. UI ëª¨ë“ˆì„ ì‚¬ìš©í•œ ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ê´€ë¦¬
    let previewContainer = null;
    
    // UI ëª¨ë“ˆ ì‚¬ìš© ì‹œë„
    if (window.FacilityImageUI && typeof window.FacilityImageUI.createPreviewContainer === 'function') {
        try {
            previewContainer = window.FacilityImageUI.createPreviewContainer();
            console.log('âœ… UI ëª¨ë“ˆë¡œ ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ìƒì„± ì„±ê³µ');
        } catch (error) {
            console.warn('UI ëª¨ë“ˆ ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ìƒì„± ì‹¤íŒ¨:', error);
        }
    }
    
    // ê¸°ë³¸ ë°©ë²•ìœ¼ë¡œ ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ì°¾ê¸°
    if (!previewContainer) {
        const previewContainerSelectors = ['#imagePreviewContainer', '.image-preview-container', '.selected-images-preview'];
        
        for (const selector of previewContainerSelectors) {
            previewContainer = document.querySelector(selector);
            if (previewContainer) {
                console.log('âœ… ê¸°ë³¸ ì„ íƒìë¡œ ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ì°¾ê¸° ì„±ê³µ:', selector);
                break;
            }
        }
    }
    
    // ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìœ¼ë©´ ìƒì„±
    if (!previewContainer) {
        console.warn('ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤.');
        
        // UI ëª¨ë“ˆì„ ì‚¬ìš©í•œ ì•Œë¦¼ í‘œì‹œ
        if (window.FacilityImageUI && typeof window.FacilityImageUI.showNotification === 'function') {
            window.FacilityImageUI.showNotification('ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì˜ì—­ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤.', 'info');
        }
        
        previewContainer = document.createElement('div');
        previewContainer.id = 'imagePreviewContainer';
        previewContainer.className = 'image-preview-container';
        previewContainer.style.display = 'block';
        
        // ì ì ˆí•œ ìœ„ì¹˜ì— ì‚½ì…
        const uploadSection = document.getElementById('uploadSection');
        if (uploadSection) {
            uploadSection.appendChild(previewContainer);
        } else {
            document.body.appendChild(previewContainer);
        }
        
        console.log('âœ… ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ìƒì„± ì™„ë£Œ');
    }
    
    if (previewContainer) {
        previewContainer.style.display = 'block';
    }
    
    // 3. íŒŒì¼ ê°œìˆ˜ ì—…ë°ì´íŠ¸ (ì—¬ëŸ¬ ì„ íƒì ì‹œë„)
    const selectedCountSelectors = ['#selectedCount', '.selected-count', '.image-count'];
    let selectedCountElement = null;
    
    for (const selector of selectedCountSelectors) {
        selectedCountElement = document.querySelector(selector);
        if (selectedCountElement) {
            selectedCountElement.textContent = validImageFiles.length;
            break;
        }
    }
    
    // 4. í†µí•© ì´ë¯¸ì§€ ëª©ë¡ì€ ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì²˜ë¦¬ë¨ (ì¤‘ë³µ ì œê±°)
    
    // 5. ë²„íŠ¼ í‘œì‹œ ë° ê¸°ëŠ¥ ì—°ê²°
    const addMoreBtnSelectors = ['#addMoreImages', '.add-more-images', '.add-more-btn'];
    const proceedBtnSelectors = ['#proceedToStep2', '.proceed-btn', '.next-step-btn'];
    
    let addMoreBtn = null;
    let proceedBtn = null;
    
    for (const selector of addMoreBtnSelectors) {
        addMoreBtn = document.querySelector(selector);
        if (addMoreBtn) break;
    }
    
    for (const selector of proceedBtnSelectors) {
        proceedBtn = document.querySelector(selector);
        if (proceedBtn) break;
    }
    
    if (addMoreBtn) {
        addMoreBtn.style.display = validImageFiles.length < 5 ? 'inline-block' : 'none';
        
        // ì¶”ê°€ íŒŒì¼ ì„ íƒ ì´ë²¤íŠ¸ - ì¤‘ë³µ í´ë¦­ ë°©ì§€
        addMoreBtn.onclick = function(e) {
            e.stopPropagation();
            console.log('ğŸ”µ ì¶”ê°€ ì´ë¯¸ì§€ ë²„íŠ¼ í´ë¦­ - íŒŒì¼ ì„ íƒì°½ ì—´ê¸°');
            const imageInput = document.getElementById('imageInput');
            if (imageInput) {
                imageInput.click();
            }
        };
    }
    
    if (proceedBtn) {
        proceedBtn.style.display = 'inline-block';
    }
    
    // 6. íŒŒì¼ ì •ë³´ í‘œì‹œ
    displayFileInformation(validImageFiles);
    
    // 7. ì „ì²´ ì••ì¶•ë¥  ê³„ì‚° í‘œì‹œ
    calculateTotalCompressionStats(validImageFiles);
    
    console.log('âœ… íŒŒì¼ ì„ íƒ ì²˜ë¦¬ ì™„ë£Œ');
}

// ì¤‘ë³µ ì´ë¯¸ì§€ ëª©ë¡ ìƒì„± í•¨ìˆ˜ ì™„ì „ ì œê±°ë¨ - ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í†µí•© ê´€ë¦¬
// ì´ í•¨ìˆ˜ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šìœ¼ë©° ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ createImageOrderItem í•¨ìˆ˜ê°€ ëª¨ë“  ê¸°ëŠ¥ì„ í†µí•© ì²˜ë¦¬í•©ë‹ˆë‹¤.

// ë™ì  ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ìƒì„±
function createImagePreviewContainer() {
    console.log('ğŸ—ï¸ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ë™ì  ìƒì„± ì‹œì‘');
    
    const container = document.createElement('div');
    container.id = 'imagePreviewContainer';
    container.className = 'image-preview-container mt-4';
    container.style.display = 'none';
    
    container.innerHTML = `
        <div class="card border-success">
            <div class="card-header bg-light">
                <div class="d-flex justify-content-between align-items-center">
                    <h6 class="mb-0 text-primary">
                        <i class="fas fa-images me-2"></i>ì„ íƒëœ ì´ë¯¸ì§€ (<span id="selectedCount">0</span>/5)
                    </h6>
                    <div class="compression-stats">
                        <small class="text-success fw-bold">
                            <i class="fas fa-save me-1"></i>ì˜ˆìƒ ì ˆì•½: <span id="totalSavings">0MB</span>
                        </small>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div id="imagePreviewList" class="image-preview-list d-flex flex-wrap gap-3 justify-content-center" style="min-height: 200px; padding: 20px;">
                    <!-- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
                <div class="text-center mt-3">
                    <button type="button" id="addMoreImages" class="btn btn-outline-success me-2" style="display: none;">
                        <i class="fas fa-plus me-1"></i>ì´ë¯¸ì§€ ì¶”ê°€
                    </button>
                    <button type="button" id="proceedToStep2" class="btn btn-success btn-lg px-4" style="display: none;">
                        <i class="fas fa-compress me-1"></i>ì••ì¶• ë° ìµœì í™” ì‹œì‘
                    </button>
                </div>
            </div>
        </div>
    `;
    
    // ì ì ˆí•œ ìœ„ì¹˜ì— ì¶”ê°€
    const uploadSection = document.getElementById('uploadSection');
    const dropZone = document.getElementById('dropZone');
    
    if (uploadSection) {
        uploadSection.appendChild(container);
    } else if (dropZone && dropZone.parentElement) {
        dropZone.parentElement.appendChild(container);
    } else {
        document.body.appendChild(container);
    }
    
    console.log('âœ… ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì»¨í…Œì´ë„ˆ ë™ì  ìƒì„± ì™„ë£Œ');
    return container;
}

// ì „ì²´ ì••ì¶•ë¥  ê³„ì‚°
function calculateTotalCompressionStats(files) {
    let totalOriginalSize = 0;
    let totalCompressedSize = 0;
    
    files.forEach(file => {
        totalOriginalSize += file.size;
        
        // ì••ì¶• í˜•ì‹ì— ë”°ë¥¸ ì˜ˆìƒ ì••ì¶•ë¥  ê³„ì‚°
        const format = document.querySelector('input[name="compressionFormat"]:checked')?.value || 'webp';
        const quality = document.getElementById('compressionQuality')?.value || 85;
        
        const compressionRatio = format === 'avif' ? 0.2 : format === 'webp' ? 0.3 : 0.5;
        const qualityFactor = quality / 100;
        
        totalCompressedSize += file.size * compressionRatio * qualityFactor;
    });
    
    const savedSize = totalOriginalSize - totalCompressedSize;
    const compressionPercentage = ((savedSize / totalOriginalSize) * 100).toFixed(1);
    
    // UI ì—…ë°ì´íŠ¸
    const totalSavings = document.getElementById('totalSavings');
    if (totalSavings) {
        totalSavings.textContent = formatFileSize(savedSize);
    }
    
    const compressionRatioEl = document.getElementById('compressionRatio');
    if (compressionRatioEl) {
        compressionRatioEl.textContent = compressionPercentage + '%';
    }
    
    const monthlySavings = document.getElementById('monthlySavings');
    if (monthlySavings) {
        const estimatedMonthlySavings = Math.round((savedSize / 1024 / 1024) * 100 * 30); // MBë‹¹ 100ì› * 30ì¼
        monthlySavings.textContent = estimatedMonthlySavings.toLocaleString();
    }
    
    console.log('ğŸ“Š ì••ì¶• í†µê³„:', {
        ì›ë³¸: formatFileSize(totalOriginalSize),
        ì••ì¶•: formatFileSize(totalCompressedSize),
        ì ˆì•½: formatFileSize(savedSize),
        ì••ì¶•ë¥ : compressionPercentage + '%'
    });
}

// íŒŒì¼ ì •ë³´ í‘œì‹œ
function displayFileInformation(files) {
    console.log('ğŸ“‹ ì„ íƒëœ íŒŒì¼ ì •ë³´:');
    files.forEach((file, index) => {
        console.log(`${index + 1}. ${file.name} (${formatFileSize(file.size)}, ${file.type})`);
    });
}

// íŒŒì¼ í¬ê¸° í¬ë§·í„°
function formatFileSize(bytes) {
    if (bytes === 0) return '0 B';
    const k = 1024;
    const sizes = ['B', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
}

// ë¯¸ë¦¬ë³´ê¸°ì—ì„œ ì´ë¯¸ì§€ ì œê±°
function removeImageFromPreview(index) {
    console.log('ğŸ—‘ï¸ ì´ë¯¸ì§€ ì œê±°:', index);
    
    // ì‹¤ì œ íŒŒì¼ ë°°ì—´ì—ì„œ ì œê±°í•˜ëŠ” ë¡œì§ êµ¬í˜„
    if (window.FacilityImageMainController && typeof window.FacilityImageMainController.removeFile === 'function') {
        window.FacilityImageMainController.removeFile(index);
    }
    
    // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
    const previewItem = document.querySelector(`[data-index="${index}"]`);
    if (previewItem) {
        previewItem.remove();
    }
}

// ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸
function updateImageOrder() {
    console.log('ğŸ”„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸');
    // ìˆœì„œ ë³€ê²½ ë¡œì§ êµ¬í˜„
}

// ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • (ì™„ì „í•œ ê¸°ëŠ¥ êµ¬í˜„)
function setMainImage(index) {
    console.log('â­ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •:', index);
    
    // ê¸°ì¡´ ë©”ì¸ ì´ë¯¸ì§€ ë§ˆí¬ ì œê±°
    document.querySelectorAll('.main-image-badge').forEach(badge => {
        badge.remove();
    });
    
    // ê¸°ì¡´ ë©”ì¸ ì´ë¯¸ì§€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³µì›
    document.querySelectorAll('.set-main-image').forEach(btn => {
        btn.classList.remove('btn-success');
        btn.classList.add('btn-warning');
        btn.querySelector('i').className = 'fas fa-star';
    });
    
    // ìƒˆ ë©”ì¸ ì´ë¯¸ì§€ ë§ˆí¬ ì¶”ê°€
    const imageItem = document.querySelector(`[data-index="${index}"]`);
    if (imageItem) {
        const badge = document.createElement('div');
        badge.className = 'main-image-badge badge bg-warning position-absolute';
        badge.style.top = '30px';
        badge.style.left = '5px';
        badge.style.zIndex = '15';
        badge.textContent = 'ë©”ì¸';
        imageItem.appendChild(badge);
        
        // ë©”ì¸ ì´ë¯¸ì§€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
        const mainBtn = imageItem.querySelector('.set-main-image');
        if (mainBtn) {
            mainBtn.classList.remove('btn-warning');
            mainBtn.classList.add('btn-success');
            mainBtn.querySelector('i').className = 'fas fa-check';
        }
    }
    
    // ë©”ì¸ ì´ë¯¸ì§€ ë°ì´í„° ì €ì¥ (ëª¨ë“ˆ ì‹œìŠ¤í…œ ì—°ë™)
    if (window.FacilityImageMainController && typeof window.FacilityImageMainController.setMainImage === 'function') {
        window.FacilityImageMainController.setMainImage(index);
    }
    
    // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
    const notification = document.createElement('div');
    notification.className = 'alert alert-success alert-dismissible fade show position-fixed';
    notification.style.top = '20px';
    notification.style.right = '20px';
    notification.style.zIndex = '9999';
    notification.innerHTML = `
        <i class="fas fa-check-circle me-2"></i>
        ë©”ì¸ ì´ë¯¸ì§€ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    document.body.appendChild(notification);
    
    // 3ì´ˆ í›„ ìë™ ì œê±°
    setTimeout(() => {
        if (notification.parentNode) {
            notification.remove();
        }
    }, 3000);
}

// ì••ì¶• í†µê³„ ê³„ì‚° (ì •êµí•œ ê³„ì‚° - ì‹¤ì œ íŒŒì¼ í¬ê¸° ê¸°ë°˜)
function calculateCompressionStats(quality, format = 'webp') {
    console.log('ğŸ“Š ì••ì¶• í†µê³„ ê³„ì‚°:', quality + '%, ' + format);
    
    // í˜„ì¬ ì„ íƒëœ íŒŒì¼ë“¤ì˜ ì‹¤ì œ í¬ê¸° ê³„ì‚°
    const selectedFiles = getCurrentSelectedFiles();
    let totalOriginalSize = 0;
    let totalCompressedSize = 0;
    
    selectedFiles.forEach(file => {
        totalOriginalSize += file.size;
        
        // ì••ì¶• í˜•ì‹ë³„ ì••ì¶•ë¥  (ì‹¤ì œ í…ŒìŠ¤íŠ¸ ê¸°ë°˜)
        let compressionRatio;
        switch (format) {
            case 'avif':
                compressionRatio = 0.15; // AVIF: 85% ì••ì¶•
                break;
            case 'webp':
                compressionRatio = 0.25; // WebP: 75% ì••ì¶•
                break;
            case 'jpeg':
            default:
                compressionRatio = 0.6; // JPEG: 40% ì••ì¶•
                break;
        }
        
        // í’ˆì§ˆ íŒ©í„° ì ìš©
        const qualityFactor = quality / 100;
        const finalCompressionRatio = compressionRatio + (1 - compressionRatio) * (1 - qualityFactor);
        
        totalCompressedSize += file.size * finalCompressionRatio;
    });
    
    if (totalOriginalSize === 0) return;
    
    const savedSize = totalOriginalSize - totalCompressedSize;
    const compressionPercentage = ((savedSize / totalOriginalSize) * 100).toFixed(1);
    
    // UI ì—…ë°ì´íŠ¸
    const originalSizeEl = document.getElementById('originalSize');
    if (originalSizeEl) {
        originalSizeEl.textContent = formatFileSize(totalOriginalSize);
    }
    
    const compressedSizeEl = document.getElementById('compressedSize');
    if (compressedSizeEl) {
        compressedSizeEl.textContent = formatFileSize(totalCompressedSize);
    }
    
    const savedSizeEl = document.getElementById('savedSize');
    if (savedSizeEl) {
        savedSizeEl.textContent = formatFileSize(savedSize);
    }
    
    const compressionRatioEl = document.getElementById('compressionRatio');
    if (compressionRatioEl) {
        compressionRatioEl.textContent = compressionPercentage + '%';
    }
    
    // ì›”ê°„ ë°ì´í„° ë¹„ìš© ì ˆì•½ ê³„ì‚° (ë” ì •êµí•œ ê³„ì‚°)
    const monthlySavings = document.getElementById('monthlySavings');
    if (monthlySavings) {
        // ì´ë¯¸ì§€ ì›”ê°„ ë¡œë”© íšŸìˆ˜ ì˜ˆìƒ (ì‹œì„¤ë‹¹ í‰ê·  1000íšŒ)
        const monthlyLoadings = 1000;
        const dataPerMB = 100; // 1MBë‹¹ ë°ì´í„° ë¹„ìš© (ì›)
        const estimatedMonthlySavings = Math.round((savedSize / 1024 / 1024) * monthlyLoadings * dataPerMB);
        
        monthlySavings.textContent = estimatedMonthlySavings.toLocaleString();
    }
    
    console.log('ğŸ“Š ìƒì„¸ ì••ì¶• í†µê³„:', {
        ì›ë³¸í¬ê¸°: formatFileSize(totalOriginalSize),
        ì••ì¶•í¬ê¸°: formatFileSize(totalCompressedSize),
        ì ˆì•½í¬ê¸°: formatFileSize(savedSize),
        ì••ì¶•ë¥ : compressionPercentage + '%',
        í˜•ì‹: format.toUpperCase(),
        í’ˆì§ˆ: quality + '%'
    });
}

// í˜„ì¬ ì„ íƒëœ íŒŒì¼ë“¤ ê°€ì ¸ì˜¤ê¸°
function getCurrentSelectedFiles() {
    if (window.FacilityImageMainController && typeof window.FacilityImageMainController.getSelectedFiles === 'function') {
        return window.FacilityImageMainController.getSelectedFiles();
    }
    
    // ëŒ€ì²´ ë°©ë²•: DOMì—ì„œ ì¶”ì¶œ
    const previewItems = document.querySelectorAll('.image-preview-item');
    return Array.from(previewItems).map(item => ({
        size: parseInt(item.dataset.size) || 1024000 // ê¸°ë³¸ 1MB
    }));
}

// SEO íŒŒì¼ëª… ìƒì„±
function generateSEOFilename() {
    const altText = document.getElementById('altText');
    const englishFilename = document.getElementById('englishFilename');
    
    if (altText && englishFilename && window.FacilityImageSEO) {
        const keywords = window.FacilityImageSEO.getKeywords();
        const filename = window.FacilityImageSEO.generateFileName(altText.value, keywords);
        englishFilename.value = filename;
    }
}

// ê¸°ì¡´ íŒŒì¼ ì…ë ¥ ì—…ë°ì´íŠ¸ (í˜¸í™˜ì„±)
function updateExistingFileInput(uploadData) {
    if (!uploadData || !uploadData.files) return;
    
    const facilityImageFile = document.getElementById('facilityImageFile');
    const facilityImageAltText = document.getElementById('facilityImageAltText');
    
    if (facilityImageFile && uploadData.files.length > 0) {
        try {
            const dataTransfer = new DataTransfer();
            
            // ì—…ë¡œë“œëœ íŒŒì¼ë“¤ì„ ê¸°ì¡´ ì…ë ¥ì— ì„¤ì •
            uploadData.files.forEach(fileData => {
                if (fileData.croppedBlob || fileData.file) {
                    const blob = fileData.croppedBlob || fileData.file;
                    const fileName = fileData.englishFilename || fileData.name || 'facility-image.jpg';
                    
                    const file = new File([blob], fileName, {
                        type: blob.type || 'image/jpeg',
                        lastModified: Date.now()
                    });
                    
                    dataTransfer.items.add(file);
                    
                    // Alt í…ìŠ¤íŠ¸ ì„¤ì • (ì²« ë²ˆì§¸ íŒŒì¼ì˜ ê²ƒ ì‚¬ìš©)
                    if (facilityImageAltText && fileData.altText) {
                        facilityImageAltText.value = fileData.altText;
                    }
                }
            });
            
            facilityImageFile.files = dataTransfer.files;
            console.log('ê¸°ì¡´ íŒŒì¼ ì…ë ¥ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            
        } catch (error) {
            console.error('ê¸°ì¡´ íŒŒì¼ ì…ë ¥ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
        }
    }
}

// í–¥ìƒëœ ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
function showSuccessMessage(message) {
    console.log('âœ… ì„±ê³µ:', message);
    
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-success alert-dismissible fade show position-relative';
    alertDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        max-width: 400px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        border: none;
        border-radius: 8px;
    `;
    alertDiv.innerHTML = `
        <div class="d-flex align-items-center">
            <i class="fas fa-check-circle me-2 text-success fa-lg"></i>
            <div class="flex-grow-1">
                <strong>ì„±ê³µ!</strong><br>
                <small>${message}</small>
            </div>
            <button type="button" class="btn-close ms-2" onclick="this.parentElement.parentElement.remove()"></button>
        </div>
    `;
    
    document.body.appendChild(alertDiv);
    
    // ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.style.opacity = '0';
            setTimeout(() => alertDiv.remove(), 300);
        }
    }, 4000);
}

// í–¥ìƒëœ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
function showErrorMessage(message) {
    console.error('âŒ ì—ëŸ¬:', message);
    
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-danger alert-dismissible fade show position-relative';
    alertDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        max-width: 400px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        border: none;
        border-radius: 8px;
    `;
    alertDiv.innerHTML = `
        <div class="d-flex align-items-center">
            <i class="fas fa-exclamation-triangle me-2 text-danger fa-lg"></i>
            <div class="flex-grow-1">
                <strong>ì˜¤ë¥˜!</strong><br>
                <small>${message}</small>
            </div>
            <button type="button" class="btn-close ms-2" onclick="this.parentElement.parentElement.remove()"></button>
        </div>
    `;
    
    document.body.appendChild(alertDiv);
    
    // ìë™ ì œê±° (ì—ëŸ¬ëŠ” ë” ì˜¤ë˜ í‘œì‹œ)
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.style.opacity = '0';
            setTimeout(() => alertDiv.remove(), 300);
        }
    }, 8000);
}

// ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
function showWarningMessage(message) {
    console.warn('âš ï¸ ê²½ê³ :', message);
    
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-warning alert-dismissible fade show position-relative';
    alertDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        max-width: 400px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        border: none;
        border-radius: 8px;
    `;
    alertDiv.innerHTML = `
        <div class="d-flex align-items-center">
            <i class="fas fa-exclamation-circle me-2 text-warning fa-lg"></i>
            <div class="flex-grow-1">
                <strong>ì£¼ì˜!</strong><br>
                <small>${message}</small>
            </div>
            <button type="button" class="btn-close ms-2" onclick="this.parentElement.parentElement.remove()"></button>
        </div>
    `;
    
    document.body.appendChild(alertDiv);
    
    // ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.style.opacity = '0';
            setTimeout(() => alertDiv.remove(), 300);
        }
    }, 6000);
}

// ì •ë³´ ë©”ì‹œì§€ í‘œì‹œ
function showInfoMessage(message) {
    console.info('â„¹ï¸ ì •ë³´:', message);
    
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-info alert-dismissible fade show position-relative';
    alertDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        max-width: 400px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        border: none;
        border-radius: 8px;
    `;
    alertDiv.innerHTML = `
        <div class="d-flex align-items-center">
            <i class="fas fa-info-circle me-2 text-info fa-lg"></i>
            <div class="flex-grow-1">
                <strong>ì •ë³´</strong><br>
                <small>${message}</small>
            </div>
            <button type="button" class="btn-close ms-2" onclick="this.parentElement.parentElement.remove()"></button>
        </div>
    `;
    
    document.body.appendChild(alertDiv);
    
    // ìë™ ì œê±°
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.style.opacity = '0';
            setTimeout(() => alertDiv.remove(), 300);
        }
    }, 5000);
}

// ê°„ë‹¨ ì—…ë¡œë“œ í† ê¸€ ê¸°ëŠ¥
document.addEventListener('DOMContentLoaded', function() {
    const useSimpleUpload = document.getElementById('useSimpleUpload');
    const simpleUploadContainer = document.getElementById('simpleUploadContainer');
    
    if (useSimpleUpload && simpleUploadContainer) {
        useSimpleUpload.addEventListener('change', function() {
            if (this.checked) {
                simpleUploadContainer.style.display = 'block';
            } else {
                simpleUploadContainer.style.display = 'none';
                // íŒŒì¼ ì…ë ¥ ì´ˆê¸°í™”
                const fileInput = document.getElementById('facilityImageFile');
                if (fileInput) fileInput.value = '';
            }
        });
    }
    
    // ë“œë˜ê·¸ì•¤ë“œë¡­ ì˜ì—­ í´ë¦­ ì´ë²¤íŠ¸ ì œê±° (ì¤‘ë³µ ë°©ì§€ - ëª¨ë“ˆ ì‹œìŠ¤í…œì—ì„œ ì²˜ë¦¬)
    
    // ğŸ”¥ 1ë‹¨ê³„ íŒŒì¼ ì••ì¶• ëª¨ë“ˆ
    function compressImageFile(file, quality = 0.8, maxWidth = 1920, maxHeight = 1080) {
        return new Promise((resolve, reject) => {
            // ì´ë¯¸ì§€ íŒŒì¼ì´ ì•„ë‹Œ ê²½ìš° ì›ë³¸ ë°˜í™˜
            if (!file.type.startsWith('image/')) {
                resolve(file);
                return;
            }
            
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const img = new Image();
            
            img.onload = function() {
                // ë¹„ìœ¨ ìœ ì§€í•˜ë©´ì„œ ë¦¬ì‚¬ì´ì¦ˆ
                let { width, height } = img;
                
                if (width > maxWidth || height > maxHeight) {
                    const ratio = Math.min(maxWidth / width, maxHeight / height);
                    width *= ratio;
                    height *= ratio;
                }
                
                canvas.width = width;
                canvas.height = height;
                
                // ì´ë¯¸ì§€ ê·¸ë¦¬ê¸°
                ctx.drawImage(img, 0, 0, width, height);
                
                // ì••ì¶•ëœ Blob ìƒì„±
                canvas.toBlob(
                    (blob) => {
                        if (blob) {
                            // ì••ì¶•ëœ File ê°ì²´ ìƒì„±
                            const compressedFile = new File([blob], file.name, {
                                type: blob.type,
                                lastModified: Date.now()
                            });
                            
                            console.log(`ğŸ“¦ ì••ì¶• ì™„ë£Œ: ${file.name}`);
                            console.log(`   ì›ë³¸: ${(file.size / 1024 / 1024).toFixed(2)}MB â†’ ì••ì¶•: ${(compressedFile.size / 1024 / 1024).toFixed(2)}MB`);
                            console.log(`   ì••ì¶•ë¥ : ${(((file.size - compressedFile.size) / file.size) * 100).toFixed(1)}%`);
                            
                            resolve(compressedFile);
                        } else {
                            reject(new Error('ì••ì¶• ì‹¤íŒ¨'));
                        }
                    },
                    'image/webp', // WebP í˜•ì‹ìœ¼ë¡œ ì••ì¶• (ìµœê³  ì••ì¶•ë¥ )
                    quality
                );
            };
            
            img.onerror = () => reject(new Error('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨'));
            
            // íŒŒì¼ì„ ì´ë¯¸ì§€ë¡œ ë¡œë“œ
            const reader = new FileReader();
            reader.onload = (e) => img.src = e.target.result;
            reader.onerror = () => reject(new Error('íŒŒì¼ ì½ê¸° ì‹¤íŒ¨'));
            reader.readAsDataURL(file);
        });
    }
    
    // ğŸ”¥ ì••ì¶• ì§„í–‰ ìƒí™© UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateCompressionUI(progress) {
        const progressSection = document.getElementById('compressionProgress');
        const progressBar = document.getElementById('compressionProgressBar');
        const statusText = document.getElementById('compressionStatus');
        const statsDiv = document.getElementById('compressionStats');
        const resultSpan = document.getElementById('compressionResult');
        
        // ì§„í–‰ ìƒí™© ì„¹ì…˜ í‘œì‹œ
        if (progressSection) {
            progressSection.style.display = 'block';
        }
        
        // ì§„í–‰ë¥  ë°” ì—…ë°ì´íŠ¸
        if (progressBar) {
            const percentage = Math.round((progress.current / progress.total) * 100);
            progressBar.style.width = percentage + '%';
            progressBar.setAttribute('aria-valuenow', percentage);
        }
        
        // ìƒíƒœ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        if (statusText) {
            if (progress.status === 'compressing') {
                statusText.innerHTML = `<i class="fas fa-compress fa-spin me-2"></i>ì••ì¶• ì¤‘... ${progress.current}/${progress.total} - ${progress.fileName}`;
            } else if (progress.status === 'completed') {
                statusText.innerHTML = `<i class="fas fa-check me-2"></i>ì••ì¶• ì™„ë£Œ: ${progress.fileName}`;
            } else if (progress.status === 'error') {
                statusText.innerHTML = `<i class="fas fa-exclamation-triangle me-2"></i>ì˜¤ë¥˜: ${progress.fileName} - ${progress.error}`;
            }
        }
        
        // ì™„ë£Œ ì‹œ í†µê³„ í‘œì‹œ
        if (progress.current === progress.total && progress.stats) {
            if (statsDiv && resultSpan) {
                const stats = progress.stats;
                resultSpan.textContent = `${(stats.originalSize / 1024 / 1024).toFixed(2)}MB â†’ ${(stats.compressedSize / 1024 / 1024).toFixed(2)}MB (${stats.compressionRatio}% ì ˆì•½)`;
                statsDiv.style.display = 'block';
            }
            
            // ìƒíƒœ í…ìŠ¤íŠ¸ë¥¼ ì™„ë£Œë¡œ ì—…ë°ì´íŠ¸
            if (statusText) {
                statusText.innerHTML = `<i class="fas fa-check text-success me-2"></i>ëª¨ë“  íŒŒì¼ ì••ì¶• ì™„ë£Œ! ì ì‹œ í›„ í¬ë¡­ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤...`;
            }
        }
    }
    
    // ğŸ”¥ ì••ì¶• ì§„í–‰ ìƒí™© ìˆ¨ê¸°ê¸° í•¨ìˆ˜
    function hideCompressionUI() {
        const progressSection = document.getElementById('compressionProgress');
        if (progressSection) {
            progressSection.style.display = 'none';
        }
    }
    
    // ğŸ”¥ ë‹¤ì¤‘ íŒŒì¼ ì••ì¶• í•¨ìˆ˜
    async function compressMultipleFiles(files, onProgress = null) {
        const compressedFiles = [];
        let totalOriginalSize = 0;
        let totalCompressedSize = 0;
        
        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            totalOriginalSize += file.size;
            
            try {
                if (onProgress) {
                    onProgress({
                        current: i + 1,
                        total: files.length,
                        fileName: file.name,
                        status: 'compressing'
                    });
                }
                
                const compressedFile = await compressImageFile(file, 0.85, 1920, 1080);
                compressedFiles.push(compressedFile);
                totalCompressedSize += compressedFile.size;
                
                if (onProgress) {
                    onProgress({
                        current: i + 1,
                        total: files.length,
                        fileName: file.name,
                        status: 'completed'
                    });
                }
                
            } catch (error) {
                console.error(`âŒ ${file.name} ì••ì¶• ì‹¤íŒ¨:`, error);
                
                if (onProgress) {
                    onProgress({
                        current: i + 1,
                        total: files.length,
                        fileName: file.name,
                        status: 'error',
                        error: error.message
                    });
                }
                
                // ì••ì¶• ì‹¤íŒ¨ ì‹œ ì›ë³¸ íŒŒì¼ ì‚¬ìš©
                compressedFiles.push(file);
                totalCompressedSize += file.size;
            }
        }
        
        const savedSize = totalOriginalSize - totalCompressedSize;
        const compressionRatio = ((savedSize / totalOriginalSize) * 100).toFixed(1);
        
        console.log('ğŸ“Š ì „ì²´ ì••ì¶• ê²°ê³¼:');
        console.log(`   ì›ë³¸ ì´ í¬ê¸°: ${(totalOriginalSize / 1024 / 1024).toFixed(2)}MB`);
        console.log(`   ì••ì¶• ì´ í¬ê¸°: ${(totalCompressedSize / 1024 / 1024).toFixed(2)}MB`);
        console.log(`   ì ˆì•½ëœ í¬ê¸°: ${(savedSize / 1024 / 1024).toFixed(2)}MB (${compressionRatio}%)`);
        
        const stats = {
            originalSize: totalOriginalSize,
            compressedSize: totalCompressedSize,
            savedSize: savedSize,
            compressionRatio: parseFloat(compressionRatio)
        };
        
        // ìµœì¢… ì™„ë£Œ ì‹œ UI ì—…ë°ì´íŠ¸
        if (onProgress) {
            onProgress({
                current: files.length,
                total: files.length,
                status: 'completed',
                stats: stats
            });
        }
        
        return {
            files: compressedFiles,
            stats: stats
        };
    }
    
    // ğŸ”¥ ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ moveToStep í•¨ìˆ˜ ì™„ì „ ë®ì–´ì“°ê¸°
    function overrideMainController() {
        if (window.FacilityImageMainController && window.FacilityImageMainController.moveToStep) {
            const originalMoveToStep = window.FacilityImageMainController.moveToStep;
            
            window.FacilityImageMainController.moveToStep = async function(step) {
                console.log(`ğŸ”„ moveToStep í˜¸ì¶œë¨: ${step}`);
                
                if (step === 2) {
                    console.log('ğŸš« 2ë‹¨ê³„ ì´ë™ ì°¨ë‹¨ - ìƒˆì°½ ë°©ì‹ìœ¼ë¡œ ì „í™˜');
                    
                    const facilityId = document.querySelector('meta[name="facility-id"]')?.content || '1';
                    
                    if (window.selectedImageFiles && window.selectedImageFiles.length > 0) {
                        console.log('ğŸ“¦ íŒŒì¼ ì••ì¶• ì‹œì‘ - 1ë‹¨ê³„ì—ì„œ ì²˜ë¦¬');
                        
                        // 1ë‹¨ê³„ ì—…ë¡œë“œ ì„¹ì…˜ ìˆ¨ê¸°ê¸°
                        const uploadSection = document.getElementById('uploadSection');
                        if (uploadSection) {
                            uploadSection.style.display = 'none';
                        }
                        
                        // ì••ì¶• ì§„í–‰ UI í‘œì‹œ
                        const compressionProgress = document.getElementById('compressionProgress');
                        if (compressionProgress) {
                            compressionProgress.style.display = 'block';
                        }
                        
                        // ì••ì¶• ì§„í–‰ í‘œì‹œë¥¼ ìœ„í•œ UI ì—…ë°ì´íŠ¸
                        const proceedBtn = document.getElementById('proceedToStep2');
                        if (proceedBtn) {
                            proceedBtn.disabled = true;
                            proceedBtn.innerHTML = '<i class="fas fa-compress fa-spin me-1"></i>íŒŒì¼ ì••ì¶• ì¤‘...';
                        }
                        
                        try {
                            // íŒŒì¼ ì••ì¶• ì‹¤í–‰ (UI ì—…ë°ì´íŠ¸ í¬í•¨)
                            const compressionResult = await compressMultipleFiles(window.selectedImageFiles, (progress) => {
                                updateCompressionUI(progress);
                                if (proceedBtn) {
                                    proceedBtn.innerHTML = `<i class="fas fa-compress fa-spin me-1"></i>ì••ì¶• ì¤‘... ${progress.current}/${progress.total}`;
                                }
                            });
                            
                            const compressedFiles = compressionResult.files;
                            const stats = compressionResult.stats;
                            
                            // ì••ì¶•ëœ íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ì—¬ ì„¸ì…˜ ì €ì¥
                            const fileDataArray = [];
                            let processedCount = 0;
                            
                            if (proceedBtn) {
                                proceedBtn.innerHTML = '<i class="fas fa-upload fa-spin me-1"></i>ì„¸ì…˜ ì €ì¥ ì¤‘...';
                            }
                            
                            for (let i = 0; i < compressedFiles.length; i++) {
                                const file = compressedFiles[i];
                                const reader = new FileReader();
                                
                                reader.onload = function(e) {
                                    fileDataArray[i] = {
                                        name: file.name,
                                        type: file.type,
                                        size: file.size,
                                        data: e.target.result,
                                        originalSize: window.selectedImageFiles[i]?.size || file.size
                                    };
                                    processedCount++;
                                    
                                    if (proceedBtn) {
                                        const progress = Math.round((processedCount / compressedFiles.length) * 100);
                                        proceedBtn.innerHTML = `<i class="fas fa-upload fa-spin me-1"></i>ì„¸ì…˜ ì €ì¥ ì¤‘... ${progress}%`;
                                    }
                                    
                                    // ëª¨ë“  íŒŒì¼ ì²˜ë¦¬ ì™„ë£Œ
                                    if (processedCount === compressedFiles.length) {
                                        try {
                                            sessionStorage.setItem('selectedImageFiles', JSON.stringify(fileDataArray));
                                            
                                            // ì••ì¶• í†µê³„ë„ í•¨ê»˜ ì €ì¥
                                            sessionStorage.setItem('compressionStats', JSON.stringify(stats));
                                            
                                            console.log('âœ… ì••ì¶• ë° ì„¸ì…˜ ì €ì¥ ì™„ë£Œ, í¬ë¡­ í˜ì´ì§€ë¡œ ì´ë™');
                                            console.log(`ğŸ“Š ì••ì¶• íš¨ê³¼: ${(stats.originalSize / 1024 / 1024).toFixed(2)}MB â†’ ${(stats.compressedSize / 1024 / 1024).toFixed(2)}MB (${stats.compressionRatio}% ì ˆì•½)`);
                                            
                                            // ì ì‹œ í›„ í˜ì´ì§€ ì´ë™
                                            setTimeout(() => {
                                                window.location.href = `/facility/crop-images/${facilityId}`;
                                            }, 1000);
                                            
                                        } catch (storageError) {
                                            console.error('âŒ ì„¸ì…˜ ì €ì¥ ì‹¤íŒ¨:', storageError);
                                            
                                            // ì„¸ì…˜ ì €ì¥ ì‹¤íŒ¨ ì‹œ ì „ì—­ ë³€ìˆ˜ ì‚¬ìš©
                                            window.transferSelectedFiles = compressedFiles;
                                            window.transferCompressionStats = stats;
                                            
                                            if (proceedBtn) {
                                                proceedBtn.innerHTML = '<i class="fas fa-exclamation-triangle me-1"></i>ì €ì¥ ì‹¤íŒ¨ - ì§ì ‘ ì´ë™';
                                            }
                                            
                                            setTimeout(() => {
                                                window.location.href = `/facility/crop-images/${facilityId}`;
                                            }, 1000);
                                        }
                                    }
                                };
                                
                                reader.onerror = function() {
                                    console.error(`âŒ íŒŒì¼ ì½ê¸° ì‹¤íŒ¨: ${file.name}`);
                                    processedCount++;
                                    
                                    if (processedCount === compressedFiles.length) {
                                        console.log('âš ï¸ ì¼ë¶€ íŒŒì¼ ì½ê¸° ì‹¤íŒ¨ - ê°€ëŠ¥í•œ íŒŒì¼ë¡œ ì§„í–‰');
                                        window.transferSelectedFiles = compressedFiles;
                                        window.location.href = `/facility/crop-images/${facilityId}`;
                                    }
                                };
                                
                                reader.readAsDataURL(file);
                            }
                            
                        } catch (compressionError) {
                            console.error('âŒ íŒŒì¼ ì••ì¶• ì‹¤íŒ¨:', compressionError);
                            
                            // ì••ì¶• ì‹¤íŒ¨ ì‹œ ì›ë³¸ íŒŒì¼ë¡œ ì§„í–‰
                            window.transferSelectedFiles = window.selectedImageFiles;
                            
                            if (proceedBtn) {
                                proceedBtn.innerHTML = '<i class="fas fa-exclamation-triangle me-1"></i>ì••ì¶• ì‹¤íŒ¨ - ì›ë³¸ìœ¼ë¡œ ì§„í–‰';
                                proceedBtn.disabled = false;
                            }
                            
                            setTimeout(() => {
                                window.location.href = `/facility/crop-images/${facilityId}`;
                            }, 1000);
                        }
                        
                    } else {
                        console.log('âš ï¸ ì„ íƒëœ íŒŒì¼ì´ ì—†ì–´ ë¹ˆ í¬ë¡­ í˜ì´ì§€ë¡œ ì´ë™');
                        window.location.href = `/facility/${facilityId}/crop-images`;
                    }
                    
                    return; // ì—¬ê¸°ì„œ í•¨ìˆ˜ ì¢…ë£Œ
                }
                
                // ë‹¤ë¥¸ ë‹¨ê³„ëŠ” ì›ë˜ í•¨ìˆ˜ ì‹¤í–‰
                return originalMoveToStep.call(this, step);
            };
            
            console.log('âœ… ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ moveToStep í•¨ìˆ˜ ë®ì–´ì“°ê¸° ì™„ë£Œ');
        }
    }
    
    // ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ê°ì‹œ ë° ë®ì–´ì“°ê¸°
    const controllerObserver = setInterval(function() {
        if (window.FacilityImageMainController && window.FacilityImageMainController.moveToStep) {
            overrideMainController();
            clearInterval(controllerObserver);
        }
    }, 100);
    
    // ì¦‰ì‹œ ì‹¤í–‰ë„ ì‹œë„
    overrideMainController();
    
    // ğŸ”¥ ìƒˆì°½ ë°©ì‹ ê°•ì œ êµ¬í˜„: ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ìš°íšŒ (ì•ˆì „ ì¥ì¹˜ í¬í•¨)
    function forceNewWindowApproach() {
        try {
            const proceedButton = document.getElementById('proceedToStep2');
            if (!proceedButton) {
                console.warn('âš ï¸ proceedToStep2 ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return false;
            }
            
            // ì´ë¯¸ ë®ì–´ì“°ê¸° ì²˜ë¦¬ëœ ë²„íŠ¼ì¸ì§€ í™•ì¸
            if (proceedButton.hasAttribute('data-overridden')) {
                console.log('ğŸ”„ ì´ë¯¸ ìƒˆì°½ ë°©ì‹ìœ¼ë¡œ ì„¤ì •ëœ ë²„íŠ¼');
                return true;
            }
            
            // ê¸°ì¡´ ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±° (ì•ˆì „í•˜ê²Œ)
            const newButton = proceedButton.cloneNode(true);
            if (proceedButton.parentNode) {
                proceedButton.parentNode.replaceChild(newButton, proceedButton);
            } else {
                console.error('âŒ ë²„íŠ¼ì˜ ë¶€ëª¨ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return false;
            }
            
            // ìƒˆë¡œìš´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
            newButton.addEventListener('click', function(e) {
                try {
                    e.preventDefault();
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    
                        console.log('ğŸ”„ ìƒˆì°½ ë°©ì‹ ê°•ì œ ì‹¤í–‰: í¬ë¡­ í˜ì´ì§€ë¡œ ì´ë™');
                    
                    const facilityId = document.querySelector('meta[name="facility-id"]')?.content || '1';
                    
                    if (window.selectedImageFiles && window.selectedImageFiles.length > 0) {
                        const fileDataArray = [];
                        let processedCount = 0;
                        
                        newButton.disabled = true;
                        newButton.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i>íŒŒì¼ ì¤€ë¹„ ì¤‘...';
                        
                        window.selectedImageFiles.forEach((file, index) => {
                            try {
                                const reader = new FileReader();
                                reader.onload = function(e) {
                                    try {
                                        fileDataArray[index] = {
                                            name: file.name,
                                            type: file.type,
                                            size: file.size,
                                            data: e.target.result
                                        };
                                        processedCount++;
                                        
                                        const progress = Math.round((processedCount / window.selectedImageFiles.length) * 100);
                                        newButton.innerHTML = `<i class="fas fa-spinner fa-spin me-1"></i>íŒŒì¼ ì¤€ë¹„ ì¤‘... ${progress}%`;
                                        
                                        if (processedCount === window.selectedImageFiles.length) {
                                            sessionStorage.setItem('selectedImageFiles', JSON.stringify(fileDataArray));
                                            console.log('âœ… íŒŒì¼ ì„¸ì…˜ ì €ì¥ ì™„ë£Œ, í¬ë¡­ í˜ì´ì§€ë¡œ ì´ë™');
                                            window.location.href = `/facility/crop-images/${facilityId}`;
                                        }
                                    } catch (error) {
                                        console.error('âŒ íŒŒì¼ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);
                                        newButton.innerHTML = '<i class="fas fa-exclamation-triangle me-1"></i>íŒŒì¼ ì²˜ë¦¬ ì˜¤ë¥˜';
                                        newButton.disabled = false;
                                    }
                                };
                                reader.onerror = function() {
                                    console.error('âŒ íŒŒì¼ ì½ê¸° ì˜¤ë¥˜:', file.name);
                                    newButton.innerHTML = '<i class="fas fa-exclamation-triangle me-1"></i>íŒŒì¼ ì½ê¸° ì˜¤ë¥˜';
                                    newButton.disabled = false;
                                };
                                reader.readAsDataURL(file);
                            } catch (error) {
                                console.error('âŒ FileReader ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                                newButton.innerHTML = '<i class="fas fa-exclamation-triangle me-1"></i>íŒŒì¼ ì²˜ë¦¬ ì˜¤ë¥˜';
                                newButton.disabled = false;
                            }
                        });
                    } else {
                        console.log('âš ï¸ ì„ íƒëœ íŒŒì¼ì´ ì—†ì–´ ë¹ˆ í¬ë¡­ í˜ì´ì§€ë¡œ ì´ë™');
                        window.location.href = `/facility/${facilityId}/crop-images`;
                    }
                } catch (error) {
                    console.error('âŒ ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);
                    // í´ë°±: ê¸°ë³¸ ì´ë™
                    const facilityId = document.querySelector('meta[name="facility-id"]')?.content || '1';
                    window.location.href = `/facility/${facilityId}/crop-images`;
                }
            }, true);
            
            // ë®ì–´ì“°ê¸° ì™„ë£Œ ë§ˆí‚¹
            newButton.setAttribute('data-overridden', 'true');
            console.log('âœ… ìƒˆì°½ ë°©ì‹ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ');
            return true;
            
        } catch (error) {
            console.error('âŒ ìƒˆì°½ ë°©ì‹ ë²„íŠ¼ ë®ì–´ì“°ê¸° ì¤‘ ì˜¤ë¥˜:', error);
            return false;
        }
    }
    
    // ë²„íŠ¼ ê°ì‹œ ë° ë®ì–´ì“°ê¸° (ì•ˆì „ ì¥ì¹˜ í¬í•¨)
    let buttonObserver = null;
    try {
        buttonObserver = new MutationObserver(function(mutations) {
            try {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'childList') {
                        const proceedButton = document.getElementById('proceedToStep2');
                        if (proceedButton && !proceedButton.hasAttribute('data-overridden')) {
                            forceNewWindowApproach();
                        }
                    }
                });
            } catch (error) {
                console.error('âŒ MutationObserver ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);
            }
        });
        
        buttonObserver.observe(document.body, {
            childList: true,
            subtree: true
        });
    } catch (error) {
        console.error('âŒ MutationObserver ì„¤ì • ì¤‘ ì˜¤ë¥˜:', error);
    }
    
    // ì¦‰ì‹œ ì‹¤í–‰ (ì•ˆì „í•˜ê²Œ)
    setTimeout(function() {
        try {
            forceNewWindowApproach();
        } catch (error) {
            console.error('âŒ ì¦‰ì‹œ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜:', error);
        }
    }, 100);
    
    // ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸ (ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ëŠ¦ê²Œ ë¡œë“œë  ìˆ˜ ìˆìŒ)
    let retryCount = 0;
    const maxRetries = 20; // ìµœëŒ€ 10ì´ˆ ë™ì•ˆ ì‹œë„
    
    const retryInterval = setInterval(function() {
        try {
            retryCount++;
            const proceedButton = document.getElementById('proceedToStep2');
            if (proceedButton && !proceedButton.hasAttribute('data-overridden')) {
                const success = forceNewWindowApproach();
                if (success) {
                    console.log('âœ… ìƒˆì°½ ë°©ì‹ ë²„íŠ¼ ì„¤ì • ì™„ë£Œ');
                    clearInterval(retryInterval);
                }
            }
            
            // ìµœëŒ€ ì¬ì‹œë„ íšŸìˆ˜ ì´ˆê³¼ì‹œ ì •ë¦¬
            if (retryCount >= maxRetries) {
                console.log('âš ï¸ ìƒˆì°½ ë°©ì‹ ë²„íŠ¼ ì„¤ì • ì¬ì‹œë„ ì™„ë£Œ');
                clearInterval(retryInterval);
            }
        } catch (error) {
            console.error('âŒ ì£¼ê¸°ì  í™•ì¸ ì¤‘ ì˜¤ë¥˜:', error);
        }
    }, 500);
    
    // ì €ì¥ëœ ì´ë¯¸ì§€ë“¤ì„ ë¡œë“œí•˜ê³  í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
    function loadSavedImages() {
        const savedImages = sessionStorage.getItem('savedImages');
        if (savedImages) {
            try {
                const images = JSON.parse(savedImages);
                displaySavedImages(images);
                
                // ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬
                sessionStorage.removeItem('savedImages');
                
                console.log('âœ… ì €ì¥ëœ ì´ë¯¸ì§€ í‘œì‹œ ì™„ë£Œ:', images.length + 'ê°œ');
                
            } catch (error) {
                console.error('âŒ ì €ì¥ëœ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }
    }
    
    // ì €ì¥ëœ ì´ë¯¸ì§€ë“¤ì„ í™”ë©´ì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜  
    function displaySavedImages(images) {
        if (!images || images.length === 0) {
            return;
        }
        
        const savedImagesSection = document.getElementById('savedImagesSection');
        const savedImagesGrid = document.getElementById('savedImagesGrid');
        const savedImageCount = document.getElementById('savedImageCount');
        
        if (!savedImagesSection || !savedImagesGrid || !savedImageCount) {
            console.error('âŒ ì €ì¥ëœ ì´ë¯¸ì§€ ì„¹ì…˜ DOM ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
            return;
        }
        
        // ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
        savedImageCount.textContent = images.length + 'ê°œ';
        
        // ì´ë¯¸ì§€ ì¹´ë“œë“¤ ìƒì„±
        let html = '';
        images.forEach((image, index) => {
            const imageUrl = image.url || image.path || '/images/default_facility.jpg';
            const imageName = image.name || `ì´ë¯¸ì§€ ${index + 1}`;
            const altText = image.altText || image.seoData?.altText || '';
            const keywords = image.keywords || image.seoData?.keywords || [];
            const isMain = image.isMain || index === 0;
            
            html += `
                <div class="col-md-6 col-lg-4">
                    <div class="card saved-image-card h-100">
                        <div class="position-relative">
                            <img src="${imageUrl}" class="card-img-top" alt="${altText}" 
                                 style="height: 200px; object-fit: cover;">
                            ${isMain ? '<span class="badge bg-warning position-absolute top-0 end-0 m-2">ë©”ì¸</span>' : ''}
                        </div>
                        <div class="card-body p-3">
                            <h6 class="card-title text-truncate">${imageName}</h6>
                            ${altText ? `<p class="card-text small text-muted mb-2">${altText}</p>` : ''}
                            ${keywords.length > 0 ? `
                                <div class="mb-2">
                                    ${keywords.map(keyword => `<span class="badge bg-light text-dark me-1">${keyword}</span>`).join('')}
                                </div>
                            ` : ''}
                            <div class="d-flex justify-content-between align-items-center">
                                <small class="text-muted">
                                    <i class="fas fa-check-circle text-success me-1"></i>ì €ì¥ë¨
                                </small>
                                <button type="button" class="btn btn-sm btn-outline-danger" 
                                        onclick="removeSavedImage(${index})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        });
        
        savedImagesGrid.innerHTML = html;
        savedImagesSection.style.display = 'block';
        
        // ì €ì¥ëœ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ ê¸°ë³¸ ì—…ë¡œë“œ ì„¹ì…˜ì„ ì¶•ì†Œ
        const uploadSection = document.getElementById('uploadSection');
        if (uploadSection) {
            uploadSection.style.opacity = '0.6';
        }
    }
    
    // ì €ì¥ëœ ì´ë¯¸ì§€ ì‚­ì œ í•¨ìˆ˜
    function removeSavedImage(index) {
        if (confirm('ì´ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            const savedImages = getCurrentSavedImages();
            if (savedImages && savedImages.length > index) {
                savedImages.splice(index, 1);
                displaySavedImages(savedImages);
                
                if (savedImages.length === 0) {
                    document.getElementById('savedImagesSection').style.display = 'none';
                    const uploadSection = document.getElementById('uploadSection');
                    if (uploadSection) {
                        uploadSection.style.opacity = '1';
                    }
                }
            }
        }
    }
    
    // í˜„ì¬ ì €ì¥ëœ ì´ë¯¸ì§€ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
    function getCurrentSavedImages() {
        const savedImagesGrid = document.getElementById('savedImagesGrid');
        if (!savedImagesGrid) return [];
        
        // DOMì—ì„œ í˜„ì¬ ì´ë¯¸ì§€ ì •ë³´ ì¶”ì¶œ (ë‹¨ìˆœí™”)
        const imageCards = savedImagesGrid.querySelectorAll('.saved-image-card');
        const images = [];
        
        imageCards.forEach((card, index) => {
            const img = card.querySelector('.card-img-top');
            const title = card.querySelector('.card-title');
            const altText = card.querySelector('.card-text');
            const keywords = Array.from(card.querySelectorAll('.badge')).map(badge => badge.textContent);
            
            if (img) {
                images.push({
                    url: img.src,
                    name: title ? title.textContent : `ì´ë¯¸ì§€ ${index + 1}`,
                    altText: altText ? altText.textContent : '',
                    keywords: keywords,
                    isMain: card.querySelector('.badge.bg-warning') !== null
                });
            }
        });
        
        return images;
    }
    
    // í¬ë¡­ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” í•¨ìˆ˜
    function openImageCropPage() {
        const facilityId = getFacilityId();
        if (!facilityId) {
            alert('ì‹œì„¤ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }
        
        console.log('ğŸ–¼ï¸ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€ë¡œ ì´ë™:', facilityId);
        window.location.href = `/facility/crop-images/${facilityId}`;
    }
    
    // ì‹œì„¤ ID ê°€ì ¸ì˜¤ê¸° í—¬í¼ í•¨ìˆ˜
    function getFacilityId() {
        // ë©”íƒ€ íƒœê·¸ì—ì„œ ì¶”ì¶œ
        const facilityIdMeta = document.querySelector('meta[name="facility-id"]');
        if (facilityIdMeta && facilityIdMeta.getAttribute('content')) {
            return facilityIdMeta.getAttribute('content');
        }
        
        // í¼ action URLì—ì„œ ì¶”ì¶œ
        const form = document.getElementById('facilityEditForm');
        if (form && form.action) {
            const match = form.action.match(/\/facility\/edit\/(\d+)/);
            if (match && match[1]) {
                return match[1];
            }
        }
        
        return null;
    }
    
    // ì „ì—­ í•¨ìˆ˜ë¡œ ë“±ë¡
    window.openImageCropPage = openImageCropPage;
    window.removeSavedImage = removeSavedImage;
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ì´ë¯¸ì§€ í™•ì¸
    setTimeout(loadSavedImages, 1000);
    
});
</script>

</body>
</html>
````

## File: src/main/java/com/example/carelink/service/MemberService.java
````java
package com.example.carelink.service;

import com.example.carelink.dao.MemberMapper;
import com.example.carelink.dao.FacilityMapper;
import com.example.carelink.dao.BoardMapper;
import com.example.carelink.dao.ReviewMapper;
import com.example.carelink.dao.JobMapper;
import com.example.carelink.dto.LoginDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.dto.FacilityDTO;
import org.springframework.web.multipart.MultipartFile;
import java.io.File;
import java.io.IOException;
import java.util.UUID;
import com.example.carelink.dto.BoardDTO;
import com.example.carelink.dto.ReviewDTO;
import com.example.carelink.dto.JobDTO;
import com.example.carelink.common.Constants;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import java.util.List; // List ìœ ì§€ (í˜ì´ì§•, ì—­í• ë³„ ì¡°íšŒ)
import java.util.Map; // Map ì¸í„°í˜ì´ìŠ¤
import java.util.HashMap; // HashMap í´ë˜ìŠ¤
import java.util.ArrayList; // ArrayList í´ë˜ìŠ¤
import java.util.UUID; // UUID ìœ ì§€ (íŒŒì¼ ì´ë¦„ ìƒì„±)

/**
 * íšŒì› ê´€ë¦¬ ì„œë¹„ìŠ¤
 * íŒ€ì› A ë‹´ë‹¹: íšŒì› ê´€ë¦¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
 */
@Slf4j
@Service
@RequiredArgsConstructor
public class MemberService {

    private final MemberMapper memberMapper;
    private final FacilityMapper facilityMapper;
    private final BoardMapper boardMapper;
    private final ReviewMapper reviewMapper;
    private final JobMapper jobMapper;
    private final PasswordEncoder passwordEncoder; // ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”ë¥¼ ìœ„í•´ ì£¼ì…


    /**
     * ë¡œê·¸ì¸ ì²˜ë¦¬
     */
    public MemberDTO login(LoginDTO loginDTO) {
        try {
            MemberDTO member = memberMapper.findByUserId(loginDTO.getUserId());

            if (member == null) {
                log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ì ID: {}", loginDTO.getUserId());
                return null;
            }

            if (member.getIsDeleted() != null && member.getIsDeleted()) {
                log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ì‚­ì œ ì²˜ë¦¬ëœ ê³„ì •ì…ë‹ˆë‹¤. ID: {}", loginDTO.getUserId());
                return null;
            }

            if (member.getIsActive() != null && !member.getIsActive()) {
                log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ë¹„í™œì„±í™”ëœ ê³„ì •: {}", loginDTO.getUserId());
                return null;
            }

            if (member.getLoginFailCount() >= Constants.MAX_LOGIN_ATTEMPTS) {
                log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ë¡œê·¸ì¸ ì‹œë„ íšŸìˆ˜ ì´ˆê³¼. ID: {}", loginDTO.getUserId());
                return null;
            }

            // ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ (ê°œë°œìš©: í‰ë¬¸ ë¹„êµ)
            log.info("=== ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ ë””ë²„ê·¸ ===");
            log.info("DB ì €ì¥ëœ ë¹„ë°€ë²ˆí˜¸: {}", member.getPassword());
            log.info("ì…ë ¥ëœ ë¹„ë°€ë²ˆí˜¸: {}", loginDTO.getPassword());
            
            // ê°œë°œìš©: í‰ë¬¸ ë¹„ë°€ë²ˆí˜¸ ë¹„êµ
            boolean passwordMatches = loginDTO.getPassword().equals(member.getPassword());
            log.info("ë¹„ë°€ë²ˆí˜¸ ë§¤ì¹­ ê²°ê³¼: {}", passwordMatches);
            
            if (passwordMatches) {
                memberMapper.updateLoginSuccess(member.getMemberId());
                log.info("ë¡œê·¸ì¸ ì„±ê³µ: {}", loginDTO.getUserId());
                return member;
            } else {
                memberMapper.updateLoginFail(member.getMemberId());
                log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜. ID: {}, DB ë¹„ë°€ë²ˆí˜¸ ì‹œì‘: {}", 
                    loginDTO.getUserId(), member.getPassword().substring(0, Math.min(10, member.getPassword().length())));
                return null;
            }

        } catch (Exception e) {
            log.error("ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", loginDTO.getUserId(), e);
            throw new RuntimeException("ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * íšŒì›ê°€ì… ì²˜ë¦¬ (ê¸°ì¡´ ë©”ì„œë“œ - íŒŒì¼ ì—†ì´)
     */
    @Transactional
    public void join(MemberDTO memberDTO) {
        join(memberDTO, null);
    }

    /**
     * íšŒì›ê°€ì… ì²˜ë¦¬ (íŒŒì¼ í¬í•¨)
     */
    @Transactional
    public void join(MemberDTO memberDTO, MultipartFile facilityImageFile) {
        try {
            log.info("íšŒì›ê°€ì… ì²˜ë¦¬ ì‹œì‘ - userId: {}, address: {}, detailAddress: {}", 
                    memberDTO.getUserId(), memberDTO.getAddress(), memberDTO.getDetailAddress());
            
            // 1. ì•„ì´ë”” ì¤‘ë³µ í™•ì¸
            if (isUserIdDuplicate(memberDTO.getUserId())) {
                throw new IllegalArgumentException("ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤.");
            }

            // 2. ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸ (ì´ë©”ì¼ì´ ì œê³µëœ ê²½ìš°ì—ë§Œ)
            if (memberDTO.getEmail() != null && !memberDTO.getEmail().trim().isEmpty()) {
                if (memberMapper.existsByEmail(memberDTO.getEmail())) {
                    throw new IllegalArgumentException("ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤.");
                }
            }

            // 3. ë¹„ë°€ë²ˆí˜¸ ì²˜ë¦¬ (ê°œë°œìš©: í‰ë¬¸ ì €ì¥)
            // ë‚˜ì¤‘ì— ë°°í¬í•  ë•Œ passwordEncoder.encode() ì‚¬ìš©
            // String encodedPassword = passwordEncoder.encode(memberDTO.getPassword());
            // memberDTO.setPassword(encodedPassword);

            // 4. ê¸°íƒ€ í•„ë“œ ê¸°ë³¸ê°’ ì„¤ì • (DDLì˜ DEFAULT ê°’ê³¼ ì¼ì¹˜í•˜ë„ë¡ ëª…ì‹œì  ì„¤ì •)
            // memberIdëŠ” AUTO_INCREMENTì´ë¯€ë¡œ nullë¡œ ì„¤ì •í•˜ì—¬ DBê°€ ìë™ ìƒì„±í•˜ë„ë¡ í•©ë‹ˆë‹¤.
            memberDTO.setMemberId(null); // ì´ ë¼ì¸ì„ ì¶”ê°€í•˜ì—¬ memberIdê°€ nullë¡œ ì‹œì‘í•˜ë„ë¡ í•©ë‹ˆë‹¤.

            if (memberDTO.getRole() == null || memberDTO.getRole().isEmpty()) {
                memberDTO.setRole(Constants.MEMBER_ROLE_USER); // Constants.MEMBER_ROLE_USERëŠ” "USER" ë¬¸ìì—´ì„ ë°˜í™˜í•œë‹¤ê³  ê°€ì •
            }
            memberDTO.setIsActive(true); // SQL DEFAULT TRUE
            memberDTO.setLoginFailCount(0); // SQL DEFAULT 0
            memberDTO.setIsDeleted(false); // SQL DEFAULT FALSE

            // DDLì— ë”°ë¼ NULLì„ í—ˆìš©í•˜ëŠ” í•„ë“œì— ê°’ì´ ì—†ìœ¼ë©´ ëª…ì‹œì ìœ¼ë¡œ null ì„¤ì •
            if (memberDTO.getPhone() != null && memberDTO.getPhone().isEmpty()) {
                memberDTO.setPhone(null);
            }
            if (memberDTO.getAddress() != null && memberDTO.getAddress().isEmpty()) {
                memberDTO.setAddress(null);
            }
            if (memberDTO.getDetailAddress() != null && memberDTO.getDetailAddress().isEmpty()) {
                memberDTO.setDetailAddress(null);
            }
            memberDTO.setProfileImage(null); // í”„ë¡œí•„ ì´ë¯¸ì§€ëŠ” í¼ì—ì„œ ì§ì ‘ ë°›ì§€ ì•ŠëŠ”ë‹¤ë©´ nullë¡œ ì„¤ì •

            // lastLoginAtì€ íšŒì›ê°€ì… ì‹œì—ëŠ” nullë¡œ ì„¤ì •
            memberDTO.setLastLoginAt(null);

            // created_at, updated_atì€ DB DEFAULT CURRENT_TIMESTAMPì´ë¯€ë¡œ DTOì— ì„¤ì •í•´ë„ DBê°€ ìš°ì„ í•©ë‹ˆë‹¤.
            // ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •í•´ë„ ë¬´ë°©í•˜ë‚˜, DBì˜ ìë™ ìƒì„± ê¸°ëŠ¥ì„ ì‹ ë¢°í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.
            // memberDTO.setCreatedAt(LocalDateTime.now());
            // memberDTO.setUpdatedAt(LocalDateTime.now());


            log.info("DB ì €ì¥ ì „ memberDTO - address: {}, detailAddress: {}", 
                    memberDTO.getAddress(), memberDTO.getDetailAddress());
            
            // 5. Mapperë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
            int result = memberMapper.insertMember(memberDTO);
            if (result == 0) { // insert ì¿¼ë¦¬ì˜ ë°˜í™˜ê°’(ì˜í–¥ë°›ì€ í–‰ ìˆ˜)ì´ 0ì´ë©´ ì‹¤íŒ¨
                throw new RuntimeException("íšŒì›ê°€ì… ë°ì´í„° ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. (ì˜í–¥ë°›ì€ í–‰ ì—†ìŒ)");
            }
            
            log.info("íšŒì›ê°€ì… DB ì €ì¥ ì„±ê³µ - memberId: {}", memberDTO.getMemberId());
            
            // 6. ì‹œì„¤íšŒì›ì¸ ê²½ìš° ì‹œì„¤ ì •ë³´ë„ ì €ì¥
            if (Constants.MEMBER_ROLE_FACILITY.equals(memberDTO.getRole()) && memberDTO.getFacilityName() != null) {
                FacilityDTO facilityDTO = new FacilityDTO();
                facilityDTO.setFacilityName(memberDTO.getFacilityName());
                facilityDTO.setFacilityType(memberDTO.getFacilityType());
                facilityDTO.setAddress(memberDTO.getAddress());
                facilityDTO.setDetailAddress(memberDTO.getDetailAddress());
                facilityDTO.setPhone(memberDTO.getFacilityPhone());
                facilityDTO.setDescription(memberDTO.getDescription());
                facilityDTO.setHomepage(memberDTO.getHomepage());
                facilityDTO.setCapacity(memberDTO.getCapacity());
                facilityDTO.setOperatingHours(memberDTO.getOperatingHours());
                facilityDTO.setFeatures(memberDTO.getFeatures());
                // ìœ„ë„/ê²½ë„ ì„¤ì • ì¶”ê°€
                facilityDTO.setLatitude(memberDTO.getLatitude());
                facilityDTO.setLongitude(memberDTO.getLongitude());
                facilityDTO.setRegisteredMemberId(memberDTO.getMemberId());
                facilityDTO.setIsApproved(false); // ê¸°ë³¸ê°’: ìŠ¹ì¸ ëŒ€ê¸°
                facilityDTO.setApprovalStatus("PENDING");
                
                // ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì²˜ë¦¬
                if (facilityImageFile != null && !facilityImageFile.isEmpty()) {
                    String imagePath = saveFacilityImage(facilityImageFile, memberDTO.getUserId());
                    facilityDTO.setFacilityImage(imagePath);
                }
                
                int facilityResult = facilityMapper.insertFacility(facilityDTO);
                if (facilityResult == 0) {
                    throw new RuntimeException("ì‹œì„¤ ì •ë³´ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                }
                log.info("ì‹œì„¤ ì •ë³´ ì €ì¥ ì„±ê³µ: {}", facilityDTO.getFacilityName());
            }
            
            log.info("íšŒì›ê°€ì… ì„±ê³µ: {}", memberDTO.getUserId());

        } catch (IllegalArgumentException e) { // ì•„ì´ë””/ì´ë©”ì¼ ì¤‘ë³µ ë“± ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜ˆì™¸
            log.warn("íšŒì›ê°€ì… ì‹¤íŒ¨ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§): {}", e.getMessage());
            throw e; // í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ì˜ˆì™¸ë¥¼ ë‹¤ì‹œ ë˜ì§
        } catch (Exception e) { // ê·¸ ì™¸ ì˜ˆìƒì¹˜ ëª»í•œ ëª¨ë“  ì˜ˆì™¸
            log.error("íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ ë°œìƒ: {}", memberDTO.getUserId(), e);
            // ë” êµ¬ì²´ì ì¸ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬í•˜ê¸° ìœ„í•´ ì˜ˆì™¸ë¥¼ ë˜í•‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            throw new RuntimeException("íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.", e);
        }
    }

    /**
     * ì‚¬ìš©ì ID ì¤‘ë³µ ì²´í¬
     */
    @Transactional(readOnly = true)
    public boolean isUserIdDuplicate(String userId) {
        try {
            // existsByUserId ë©”ì„œë“œ ì‚¬ìš©ìœ¼ë¡œ ë³€ê²½
            return memberMapper.existsByUserId(userId);
        } catch (Exception e) {
            log.error("ì‚¬ìš©ì ID ì¤‘ë³µ ì²´í¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", userId, e);
            throw new RuntimeException("ì¤‘ë³µ ì²´í¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * íšŒì› IDë¡œ íšŒì› ì •ë³´ ì¡°íšŒ (ìœ ì§€)
     */
    @Transactional(readOnly = true)
    public MemberDTO findById(Long memberId) {
        try {
            return memberMapper.findById(memberId);
        } catch (Exception e) {
            log.error("íšŒì› ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", memberId, e);
            throw new RuntimeException("íšŒì› ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ì‚¬ìš©ì IDë¡œ íšŒì› ì •ë³´ ì¡°íšŒ (ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ Principal ì‚¬ìš© ì‹œ í˜¸ì¶œ - Principal ì‚¬ìš© ì•ˆ í•˜ë©´ DTO ê·¸ëŒ€ë¡œ ë°˜í™˜)
     * Principalì„ ì‚¬ìš©í•˜ì§€ ì•Šë”ë¼ë„, userIdë¡œ ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” ë¡œì§ì´ í•„ìš”í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìœ ì§€
     */
    @Transactional(readOnly = true)
    public MemberDTO getMemberByUserId(String userId) {
        try {
            return memberMapper.findByUserId(userId);
        } catch (Exception e) {
            log.error("ì‚¬ìš©ì IDë¡œ íšŒì› ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", userId, e);
            throw new RuntimeException("íšŒì› ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * íšŒì› ì •ë³´ ìˆ˜ì • (í”„ë¡œí•„ ì´ë¯¸ì§€ íŒŒì¼ ì²˜ë¦¬ ë¡œì§ í¬í•¨) (ìœ ì§€)
     */
    public void updateMember(MemberDTO memberDTO, MultipartFile profileImageFile) throws Exception {
        log.info("íšŒì›ì •ë³´ ìˆ˜ì • ìš”ì²­: memberId={}, name={}, email={}", 
                memberDTO.getMemberId(), memberDTO.getName(), memberDTO.getEmail());
        
        MemberDTO existingMember = memberMapper.findById(memberDTO.getMemberId());
        if (existingMember == null) {
            throw new IllegalArgumentException("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì›ì…ë‹ˆë‹¤.");
        }
        
        log.info("ê¸°ì¡´ íšŒì› ì •ë³´: memberId={}, name={}, email={}", 
                existingMember.getMemberId(), existingMember.getName(), existingMember.getEmail());

        // ë¹„ë°€ë²ˆí˜¸ëŠ” ì´ ë©”ì„œë“œì—ì„œ ë³€ê²½í•˜ì§€ ì•ŠìŒ (ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸ ìœ ì§€)
        memberDTO.setPassword(existingMember.getPassword());
        
        // ê¶Œí•œê³¼ ê¸°íƒ€ ì¤‘ìš” ì •ë³´ëŠ” ê¸°ì¡´ ê°’ ìœ ì§€
        memberDTO.setRole(existingMember.getRole());
        memberDTO.setIsActive(existingMember.getIsActive());
        memberDTO.setIsDeleted(existingMember.getIsDeleted());
        memberDTO.setLoginFailCount(existingMember.getLoginFailCount());
        memberDTO.setLastLoginAt(existingMember.getLastLoginAt());
        memberDTO.setCreatedAt(existingMember.getCreatedAt());

        if (profileImageFile != null && !profileImageFile.isEmpty()) {
            // í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ (ìƒˆë¡œìš´ ë°©ì‹ ì‚¬ìš©)
            String profileImagePath = saveProfileImage(profileImageFile, existingMember.getUserId());
            memberDTO.setProfileImage(profileImagePath);
            
            // ê¸°ì¡´ í”„ë¡œí•„ ì´ë¯¸ì§€ ì‚­ì œ (ê¸°ì¡´ ì´ë¯¸ì§€ê°€ ìˆê³ , ìƒˆ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œëœ ê²½ìš°)
            if (existingMember.getProfileImage() != null && !existingMember.getProfileImage().isEmpty()) {
                try {
                    // ê¸°ì¡´ íŒŒì¼ ì‚­ì œ
                    String projectRoot = System.getProperty("user.dir");
                    String oldImagePath = existingMember.getProfileImage();
                    if (oldImagePath.startsWith("/uploads/profile/")) {
                        String oldFileName = oldImagePath.substring("/uploads/profile/".length());
                        File oldFile = new File(projectRoot + "/src/main/resources/static" + oldImagePath);
                        if (oldFile.exists() && oldFile.delete()) {
                            log.info("ê¸°ì¡´ í”„ë¡œí•„ ì´ë¯¸ì§€ ì‚­ì œ ì„±ê³µ: {}", oldFile.getAbsolutePath());
                        }
                    }
                } catch (Exception e) {
                    log.warn("ê¸°ì¡´ í”„ë¡œí•„ ì´ë¯¸ì§€ ì‚­ì œ ì‹¤íŒ¨: {}", e.getMessage());
                }
            }
        } else {
            // ìƒˆ ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ ê¸°ì¡´ ì´ë¯¸ì§€ ê²½ë¡œ ìœ ì§€
            memberDTO.setProfileImage(existingMember.getProfileImage());
            log.debug("ìƒˆë¡œìš´ í”„ë¡œí•„ ì´ë¯¸ì§€ê°€ ì—†ì–´ ê¸°ì¡´ ì´ë¯¸ì§€ ìœ ì§€: {}", existingMember.getProfileImage());
        }
        
        log.info("ì—…ë°ì´íŠ¸í•  íšŒì› ì •ë³´: memberId={}, name={}, email={}, phone={}, address={}", 
                memberDTO.getMemberId(), memberDTO.getName(), memberDTO.getEmail(), 
                memberDTO.getPhone(), memberDTO.getAddress());

        int result = memberMapper.updateMember(memberDTO);
        log.info("íšŒì›ì •ë³´ ì—…ë°ì´íŠ¸ ì¿¼ë¦¬ ì‹¤í–‰ ê²°ê³¼: {} í–‰ì´ ì˜í–¥ë°›ìŒ", result);
        
        if (result == 0) {
            throw new RuntimeException("íšŒì› ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì˜í–¥ë°›ì€ í–‰: 0");
        }
        log.info("íšŒì›ì •ë³´ ìˆ˜ì • ì™„ë£Œ: userId={}, memberId={}", memberDTO.getUserId(), memberDTO.getMemberId());
    }

    /**
     * ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì²˜ë¦¬ (ìœ ì§€)
     */
    @Transactional
    public void changePassword(String userId, String currentPassword, String newPassword, String confirmNewPassword) {
        MemberDTO member = memberMapper.findByUserId(userId);
        if (member == null) {
            throw new IllegalArgumentException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }

        // í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ (ê°œë°œ í™˜ê²½ì—ì„œëŠ” í‰ë¬¸ ë¹„êµ)
        if (!currentPassword.equals(member.getPassword())) {
            throw new IllegalArgumentException("í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }

        if (!newPassword.equals(confirmNewPassword)) {
            throw new IllegalArgumentException("ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ í™•ì¸ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }

        if (newPassword.length() < 8) {
            throw new IllegalArgumentException("ìƒˆ ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
        }

        // ê°œë°œ í™˜ê²½ì—ì„œëŠ” í‰ë¬¸ìœ¼ë¡œ ì €ì¥
        member.setPassword(newPassword);
        int result = memberMapper.updatePassword(member);
        if (result == 0) {
            throw new RuntimeException("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        }
        log.info("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì„œë¹„ìŠ¤: {} ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë¨.", userId);
    }

    /**
     * ì‚¬ìš©ìê°€ ì‘ì„±í•œ ì½˜í…ì¸  ê°œìˆ˜ ì¡°íšŒ
     */
    @Transactional(readOnly = true)
    public Map<String, Integer> getUserContentCounts(Long memberId) {
        Map<String, Integer> counts = new HashMap<>();
        try {
            // ê° ë§¤í¼ì—ì„œ ì½˜í…ì¸  ê°œìˆ˜ ì¡°íšŒ
            List<BoardDTO> boards = boardMapper.findBoardsByMemberId(memberId);
            List<ReviewDTO> reviews = reviewMapper.findReviewsByMemberId(memberId);
            List<JobDTO> jobs = jobMapper.findJobsByMemberId(memberId);
            
            int boardCount = boards != null ? boards.size() : 0;
            int reviewCount = reviews != null ? reviews.size() : 0;
            int jobCount = jobs != null ? jobs.size() : 0;
            
            counts.put("board", boardCount);
            counts.put("review", reviewCount);
            counts.put("job", jobCount);
            counts.put("total", boardCount + reviewCount + jobCount);
            
            log.info("ì‚¬ìš©ì ì½˜í…ì¸  ê°œìˆ˜ ì¡°íšŒ: memberId={}, ê²°ê³¼={}", memberId, counts);
            return counts;
            
        } catch (Exception e) {
            log.error("ì½˜í…ì¸  ê°œìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜: memberId={}", memberId, e);
            // ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ê°’ ë°˜í™˜
            counts.put("board", 0);
            counts.put("review", 0);
            counts.put("job", 0);
            counts.put("total", 0);
            return counts;
        }
    }
    
    /**
     * ë‚´ê°€ ì“´ ê¸€ ì¡°íšŒ (ìœ í˜•ë³„ í•„í„°ë§ ë° í˜ì´ì§•)
     */
    @Transactional(readOnly = true)
    public Map<String, Object> getMyPosts(Long memberId, String type, int page, int pageSize, int offset) {
        Map<String, Object> result = new HashMap<>();
        List<Map<String, Object>> posts = new ArrayList<>();
        
        try {
            // ì½˜í…ì¸  íƒ€ì…ë³„ ê°œìˆ˜ ì¡°íšŒ
            Map<String, Integer> contentCounts = getUserContentCounts(memberId);
            result.put("contentCounts", contentCounts);
            
            if ("board".equals(type)) {
                // ê²Œì‹œê¸€ë§Œ ì¡°íšŒ
                List<BoardDTO> boards = boardMapper.findBoardsByMemberId(memberId);
                for (BoardDTO board : boards) {
                    Map<String, Object> post = new HashMap<>();
                    post.put("id", board.getBoardId());
                    post.put("title", board.getTitle());
                    post.put("content", board.getContent());
                    post.put("createdAt", board.getCreatedAt());
                    post.put("viewCount", board.getViewCount() != null ? board.getViewCount() : 0);
                    post.put("likeCount", board.getLikeCount() != null ? board.getLikeCount() : 0);
                    post.put("rating", null); // ê²Œì‹œê¸€ì—ëŠ” í‰ì  ì—†ìŒ
                    post.put("salary", null); // ê²Œì‹œê¸€ì—ëŠ” ê¸‰ì—¬ ì—†ìŒ
                    post.put("type", "board");
                    post.put("category", board.getBoardType());
                    post.put("url", "/board/detail/" + board.getBoardId());
                    posts.add(post);
                }
            } else if ("review".equals(type)) {
                // ë¦¬ë·°ë§Œ ì¡°íšŒ
                List<ReviewDTO> reviews = reviewMapper.findReviewsByMemberId(memberId);
                for (ReviewDTO review : reviews) {
                    Map<String, Object> post = new HashMap<>();
                    post.put("id", review.getReviewId());
                    post.put("title", review.getTitle());
                    post.put("content", review.getContent());
                    post.put("createdAt", review.getCreatedAt());
                    post.put("viewCount", null); // ë¦¬ë·°ì—ëŠ” ì¡°íšŒìˆ˜ ì—†ìŒ
                    post.put("likeCount", review.getLikeCount() != null ? review.getLikeCount() : 0);
                    post.put("rating", review.getRating());
                    post.put("salary", null); // ë¦¬ë·°ì—ëŠ” ê¸‰ì—¬ ì—†ìŒ
                    post.put("type", "review");
                    post.put("category", "ë¦¬ë·°");
                    post.put("url", "/review/detail/" + review.getReviewId());
                    posts.add(post);
                }
            } else if ("job".equals(type)) {
                // êµ¬ì¸êµ¬ì§ë§Œ ì¡°íšŒ
                List<JobDTO> jobs = jobMapper.findJobsByMemberId(memberId);
                for (JobDTO job : jobs) {
                    Map<String, Object> post = new HashMap<>();
                    post.put("id", job.getJobId());
                    post.put("title", job.getTitle());
                    post.put("content", job.getContent());
                    post.put("createdAt", job.getCreatedAt());
                    post.put("viewCount", job.getViewCount() != null ? job.getViewCount() : 0);
                    post.put("likeCount", null); // êµ¬ì¸êµ¬ì§ì—ëŠ” ì¶”ì²œ ì—†ìŒ
                    post.put("rating", null); // êµ¬ì¸êµ¬ì§ì—ëŠ” í‰ì  ì—†ìŒ
                    post.put("salary", job.getSalaryDescription());
                    post.put("type", "job");
                    post.put("category", job.getJobType());
                    post.put("url", "/job/detail/" + job.getJobId());
                    posts.add(post);
                }
            } else {
                // ì „ì²´ ì¡°íšŒ
                List<BoardDTO> boards = boardMapper.findBoardsByMemberId(memberId);
                List<ReviewDTO> reviews = reviewMapper.findReviewsByMemberId(memberId);
                List<JobDTO> jobs = jobMapper.findJobsByMemberId(memberId);
                
                // ê²Œì‹œê¸€ ì¶”ê°€
                for (BoardDTO board : boards) {
                    Map<String, Object> post = new HashMap<>();
                    post.put("id", board.getBoardId());
                    post.put("title", board.getTitle());
                    post.put("content", board.getContent());
                    post.put("createdAt", board.getCreatedAt());
                    post.put("viewCount", board.getViewCount() != null ? board.getViewCount() : 0);
                    post.put("likeCount", board.getLikeCount() != null ? board.getLikeCount() : 0);
                    post.put("rating", null); // ê²Œì‹œê¸€ì—ëŠ” í‰ì  ì—†ìŒ
                    post.put("salary", null); // ê²Œì‹œê¸€ì—ëŠ” ê¸‰ì—¬ ì—†ìŒ
                    post.put("type", "board");
                    post.put("category", board.getBoardType());
                    post.put("url", "/board/detail/" + board.getBoardId());
                    posts.add(post);
                }
                
                // ë¦¬ë·° ì¶”ê°€
                for (ReviewDTO review : reviews) {
                    Map<String, Object> post = new HashMap<>();
                    post.put("id", review.getReviewId());
                    post.put("title", review.getTitle());
                    post.put("content", review.getContent());
                    post.put("createdAt", review.getCreatedAt());
                    post.put("viewCount", null); // ë¦¬ë·°ì—ëŠ” ì¡°íšŒìˆ˜ ì—†ìŒ
                    post.put("likeCount", review.getLikeCount() != null ? review.getLikeCount() : 0);
                    post.put("rating", review.getRating());
                    post.put("salary", null); // ë¦¬ë·°ì—ëŠ” ê¸‰ì—¬ ì—†ìŒ
                    post.put("type", "review");
                    post.put("category", "ë¦¬ë·°");
                    post.put("url", "/review/detail/" + review.getReviewId());
                    posts.add(post);
                }
                
                // êµ¬ì¸êµ¬ì§ ì¶”ê°€
                for (JobDTO job : jobs) {
                    Map<String, Object> post = new HashMap<>();
                    post.put("id", job.getJobId());
                    post.put("title", job.getTitle());
                    post.put("content", job.getContent());
                    post.put("createdAt", job.getCreatedAt());
                    post.put("viewCount", job.getViewCount() != null ? job.getViewCount() : 0);
                    post.put("likeCount", null); // êµ¬ì¸êµ¬ì§ì—ëŠ” ì¶”ì²œ ì—†ìŒ
                    post.put("rating", null); // êµ¬ì¸êµ¬ì§ì—ëŠ” í‰ì  ì—†ìŒ
                    post.put("salary", job.getSalaryDescription());
                    post.put("type", "job");
                    post.put("category", job.getJobType());
                    post.put("url", "/job/detail/" + job.getJobId());
                    posts.add(post);
                }
            }
            
            // ë‚ ì§œ ìˆœìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)
            posts.sort((a, b) -> ((java.time.LocalDateTime) b.get("createdAt")).compareTo((java.time.LocalDateTime) a.get("createdAt")));
            
            // í˜ì´ì§• ì²˜ë¦¬
            int totalCount = posts.size();
            int startIndex = Math.min(offset, totalCount);
            int endIndex = Math.min(offset + pageSize, totalCount);
            
            List<Map<String, Object>> pagedPosts = posts.subList(startIndex, endIndex);
            
            result.put("posts", pagedPosts);
            result.put("totalCount", totalCount);
            
            log.info("ë‚´ê°€ ì“´ ê¸€ ì¡°íšŒ ì™„ë£Œ: memberId={}, type={}, ì´{}\uac1c, í˜„ì¬í˜ì´ì§€ {}\uac1c", 
                    memberId, type, totalCount, pagedPosts.size());
            
            return result;
            
        } catch (Exception e) {
            log.error("ë‚´ê°€ ì“´ ê¸€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜: memberId={}, type={}", memberId, type, e);
            result.put("posts", new ArrayList<>());
            result.put("totalCount", 0);
            result.put("contentCounts", Map.of("board", 0, "review", 0, "job", 0, "total", 0));
            return result;
        }
    }
    
    /**
     * íšŒì› íƒˆí‡´ (ì˜µì…˜ì— ë”°ë¼ ì²˜ë¦¬ ë°©ì‹ ê²°ì •)
     */
    @Transactional
    public String deleteMemberWithOption(String userId, String deleteOption) {
        try {
            if ("anonymous".equals(deleteOption)) {
                // ìµëª…í™”: ê°œì¸ì •ë³´ë§Œ ì‚­ì œ, ì½˜í…ì¸ ëŠ” "íƒˆí‡´íšŒì›"ìœ¼ë¡œ í‘œì‹œ
                int result = memberMapper.anonymizeMember(userId);
                if (result == 0) {
                    throw new RuntimeException("íšŒì› ìµëª…í™” ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                }
                log.info("íšŒì› ìµëª…í™” ì²˜ë¦¬ ì™„ë£Œ: {}", userId);
                return "íšŒì› íƒˆí‡´ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‘ì„±í•˜ì‹  ê²Œì‹œê¸€ì€ 'íƒˆí‡´íšŒì›'ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.";
            } else if ("complete".equals(deleteOption)) {
                // ì™„ì „ì‚­ì œ: ëª¨ë“  ì½˜í…ì¸ ì™€ í•¨ê»˜ ë¬¼ë¦¬ ì‚­ì œ
                deleteAllUserContent(userId);
                int result = memberMapper.hardDeleteMember(userId);
                if (result == 0) {
                    throw new RuntimeException("íšŒì› ì™„ì „ì‚­ì œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                }
                log.info("íšŒì› ì™„ì „ì‚­ì œ ì²˜ë¦¬ ì™„ë£Œ: {}", userId);
                return "íšŒì› íƒˆí‡´ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ê°œì¸ì •ë³´ì™€ ì‘ì„± ì½˜í…ì¸ ê°€ ì™„ì „íˆ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.";
            } else {
                // ê¸°ë³¸: ë…¼ë¦¬ ì‚­ì œ
                int result = memberMapper.softDeleteMember(userId);
                if (result == 0) {
                    throw new RuntimeException("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                }
                log.info("íšŒì› ë…¼ë¦¬ì‚­ì œ ì²˜ë¦¬ ì™„ë£Œ: {}", userId);
                return "íšŒì› íƒˆí‡´ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.";
            }
        } catch (Exception e) {
            log.error("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: userId={}, option={}", userId, deleteOption, e);
            throw new RuntimeException("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }
    
    /**
     * ì‚¬ìš©ìì˜ ëª¨ë“  ì½˜í…ì¸  ì‚­ì œ (ì‹œì„¤íšŒì›ì¸ ê²½ìš° ê´€ë ¨ ì‹œì„¤ë„ ì‚­ì œ)
     */
    @Transactional
    public void deleteAllUserContent(String userId) {
        try {
            MemberDTO member = memberMapper.findByUserId(userId);
            if (member == null) {
                throw new RuntimeException("íšŒì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            }
            
            Long memberId = member.getMemberId();
            
            // 1. ì‹œì„¤íšŒì›ì¸ ê²½ìš° ê´€ë ¨ ì‹œì„¤ ì‚­ì œ
            if (Constants.MEMBER_ROLE_FACILITY.equals(member.getRole())) {
                // ì‹œì„¤ì˜ êµ¬ì¸ê³µê³  ë¨¼ì € ì‚­ì œ
                jobMapper.deleteByFacilityMemberId(memberId);
                log.info("ì‹œì„¤ êµ¬ì¸ê³µê³  ì‚­ì œ ì™„ë£Œ: memberId={}", memberId);
                
                // ì‹œì„¤ ë¦¬ë·° ì‚­ì œ
                reviewMapper.deleteByFacilityMemberId(memberId);
                log.info("ì‹œì„¤ ë¦¬ë·° ì‚­ì œ ì™„ë£Œ: memberId={}", memberId);
                
                // ì‹œì„¤ ì •ë³´ ì‚­ì œ
                facilityMapper.deleteByMemberId(memberId);
                log.info("ì‹œì„¤ ì •ë³´ ì‚­ì œ ì™„ë£Œ: memberId={}", memberId);
            }
            
            // 2. íšŒì›ì´ ì‘ì„±í•œ ëª¨ë“  ì½˜í…ì¸  ì‚­ì œ
            boardMapper.deleteByMemberId(memberId);
            reviewMapper.deleteByMemberId(memberId);
            jobMapper.deleteByMemberId(memberId);
            
            log.info("ì‚¬ìš©ì ì½˜í…ì¸  ì‚­ì œ ì™„ë£Œ: userId={}, memberId={}", userId, memberId);
        } catch (Exception e) {
            log.error("ì‚¬ìš©ì ì½˜í…ì¸  ì‚­ì œ ì¤‘ ì˜¤ë¥˜: userId={}", userId, e);
            throw e;
        }
    }
    
    /**
     * íšŒì› íƒˆí‡´ (ë…¼ë¦¬ ì‚­ì œ) - ì´ì „ ë²„ì „ í˜¸í™˜ì„±
     */
    @Transactional
    public void deleteMember(String userId) {
        int result = memberMapper.softDeleteMember(userId);
        if (result == 0) {
            throw new RuntimeException("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        log.info("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì™„ë£Œ: {}", userId);
    }

    /**
     * í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ë©”ì„œë“œ
     */
    private String saveProfileImage(MultipartFile file, String userId) {
        try {
            // ë¡œì»¬ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ì‚¬ìš©
            String uploadDir = Constants.PROFILE_UPLOAD_PATH;
            File uploadDirFile = new File(uploadDir);
            if (!uploadDirFile.exists()) {
                boolean created = uploadDirFile.mkdirs();
                log.info("í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} - {}", uploadDir, created ? "ì„±ê³µ" : "ì‹¤íŒ¨");
            }
            
            // íŒŒì¼ëª… ìƒì„± (userId + UUID + ì›ë³¸ í™•ì¥ì)
            String originalFilename = file.getOriginalFilename();
            String extension = "";
            if (originalFilename != null && originalFilename.contains(".")) {
                extension = originalFilename.substring(originalFilename.lastIndexOf("."));
            }
            String savedFilename = "profile_" + userId + "_" + UUID.randomUUID().toString() + extension;
            
            // íŒŒì¼ ì €ì¥
            File savedFile = new File(uploadDir + savedFilename);
            file.transferTo(savedFile);
            log.info("í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ: {}", savedFile.getAbsolutePath());
            
            // ì›¹ ê²½ë¡œ ë°˜í™˜
            return "/uploads/profile/" + savedFilename;
            
        } catch (IOException e) {
            log.error("í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: userId={}", userId, e);
            throw new RuntimeException("í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ë©”ì„œë“œ
     */
    private String saveFacilityImage(MultipartFile file, String userId) {
        try {
            // ë¡œì»¬ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ì‚¬ìš©
            String uploadDir = Constants.FACILITY_UPLOAD_PATH;
            File uploadDirFile = new File(uploadDir);
            if (!uploadDirFile.exists()) {
                boolean created = uploadDirFile.mkdirs();
                log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} - {}", uploadDir, created ? "ì„±ê³µ" : "ì‹¤íŒ¨");
            }
            
            // íŒŒì¼ëª… ìƒì„± (userId + UUID + ì›ë³¸ í™•ì¥ì)
            String originalFilename = file.getOriginalFilename();
            String extension = "";
            if (originalFilename != null && originalFilename.contains(".")) {
                extension = originalFilename.substring(originalFilename.lastIndexOf("."));
            }
            String savedFilename = "facility_" + userId + "_" + UUID.randomUUID().toString() + extension;
            
            // íŒŒì¼ ì €ì¥
            File savedFile = new File(uploadDir + savedFilename);
            file.transferTo(savedFile);
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ: {}", savedFile.getAbsolutePath());
            
            // ì›¹ ê²½ë¡œ ë°˜í™˜
            return "/uploads/facility/" + savedFilename;
            
        } catch (IOException e) {
            log.error("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: userId={}", userId, e);
            throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ì „ì²´ íšŒì› ìˆ˜ ì¡°íšŒ (ìœ ì§€)
     */
    @Transactional(readOnly = true)
    public int getTotalMembersCount() {
        try {
            return memberMapper.getTotalCount();
        } catch (Exception e) {
            log.error("ì „ì²´ íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * ì „ì²´ íšŒì› ìˆ˜ ì¡°íšŒ (í†µê³„ìš©)
     */
    @Transactional(readOnly = true)
    public int getMemberCount() {
        try {
            return memberMapper.getMemberCount();
        } catch (Exception e) {
            log.error("íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0; // ì˜¤ë¥˜ ì‹œ 0 ë°˜í™˜
        }
    }

    /**
     * í˜ì´ì§•ëœ íšŒì› ëª©ë¡ ì¡°íšŒ (ê´€ë¦¬ììš©) (ìœ ì§€)
     */
    @Transactional(readOnly = true)
    public List<MemberDTO> getMembersWithPaging(MemberDTO searchDTO) {
        try {
            return memberMapper.findMembersWithPaging(searchDTO);
        } catch (Exception e) {
            log.error("í˜ì´ì§•ëœ íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            throw new RuntimeException("íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * íŠ¹ì • ì—­í• ì˜ íšŒì› ëª©ë¡ ì¡°íšŒ (ìœ ì§€)
     */
    @Transactional(readOnly = true)
    public List<MemberDTO> getMembersByRole(String role) {
        try {
            return memberMapper.findMembersByRole(role);
        } catch (Exception e) {
            log.error("ì—­í• ë³„ íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", role, e);
            throw new RuntimeException("ì—­í• ë³„ íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    /**
     * íšŒì› ìƒíƒœ ë³€ê²½ (í™œì„±í™”/ë¹„í™œì„±í™”) (ìœ ì§€)
     */
    @Transactional
    public void updateMemberStatus(Long memberId, boolean isActive) {
        try {
            memberMapper.updateMemberStatus(memberId, isActive);
            log.info("íšŒì› ìƒíƒœ ë³€ê²½ ì™„ë£Œ: memberId={}, isActive={}", memberId, isActive);
        } catch (Exception e) {
            log.error("íšŒì› ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}", memberId, e);
            throw new RuntimeException("íšŒì› ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
        }
    }

    // ================== ê´€ë¦¬ììš© ì¶”ê°€ ë©”ì„œë“œë“¤ ==================

    /**
     * ì „ì²´ íšŒì› ìˆ˜ ì¡°íšŒ (ê´€ë¦¬ììš©)
     */
    @Transactional(readOnly = true)
    public int getTotalMemberCount() {
        try {
            return memberMapper.getTotalCount();
        } catch (Exception e) {
            log.error("ì „ì²´ íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }

    /**
     * ì‹œì„¤ íšŒì› ìˆ˜ ì¡°íšŒ (ê´€ë¦¬ììš©)
     */
    @Transactional(readOnly = true)
    public int getFacilityMemberCount() {
        try {
            return memberMapper.getFacilityMemberCount();
        } catch (Exception e) {
            log.error("ì‹œì„¤ íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            return 0;
        }
    }

    /**
     * ì—­í• ë³„ íšŒì› ëª©ë¡ ì¡°íšŒ (í˜ì´ì§• í¬í•¨, ê´€ë¦¬ììš©)
     */
    @Transactional(readOnly = true)
    public List<MemberDTO> getMembersByRole(String role, int page, int pageSize) {
        try {
            log.info("ì—­í• ë³„ íšŒì› ëª©ë¡ ì¡°íšŒ ì‹œì‘: role={}, page={}, pageSize={}", role, page, pageSize);
            
            // "ALL"ì¼ ë•ŒëŠ” nullì„ ì „ë‹¬í•˜ì—¬ ëª¨ë“  ì—­í•  ì¡°íšŒ
            String searchRole = "ALL".equals(role) ? null : role;
            List<MemberDTO> members = memberMapper.findMembersByRole(searchRole);
            
            log.info("ì—­í• ë³„ íšŒì› ì¡°íšŒ ì™„ë£Œ: role={}, count={} ëª…", role, members.size());
            return members;
        } catch (Exception e) {
            log.error("ì—­í• ë³„ íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: role={}, page={}", role, page, e);
            return new ArrayList<>();
        }
    }

    /**
     * ì—­í• ë³„ íšŒì› ìˆ˜ ì¡°íšŒ (ê´€ë¦¬ììš©)
     */
    @Transactional(readOnly = true)
    public int getMemberCountByRole(String role) {
        try {
            if ("ALL".equals(role)) {
                return memberMapper.getTotalCount();
            } else if ("FACILITY".equals(role)) {
                return memberMapper.getFacilityMemberCount();
            } else if ("USER".equals(role)) {
                return memberMapper.getUserMemberCount();
            } else {
                return memberMapper.getMemberCountByRole(role);
            }
        } catch (Exception e) {
            log.error("ì—­í• ë³„ íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: role={}", role, e);
            return 0;
        }
    }

    /**
     * íšŒì› í™œì„±í™” ìƒíƒœ í† ê¸€ (ê´€ë¦¬ììš©)
     */
    @Transactional
    public boolean toggleMemberActive(Long memberId) {
        try {
            MemberDTO member = memberMapper.findById(memberId);
            if (member == null) {
                throw new RuntimeException("íšŒì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            }
            
            boolean newStatus = !Boolean.TRUE.equals(member.getIsActive());
            memberMapper.updateMemberStatus(memberId, newStatus);
            
            log.info("íšŒì› í™œì„±í™” ìƒíƒœ í† ê¸€ ì™„ë£Œ: memberId={}, newStatus={}", memberId, newStatus);
            return true;
        } catch (Exception e) {
            log.error("íšŒì› í™œì„±í™” ìƒíƒœ í† ê¸€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}", memberId, e);
            return false;
        }
    }
}
````

## File: src/main/resources/templates/facility/search.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ì‹œì„¤ ê²€ìƒ‰</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item active" aria-current="page">ì‹œì„¤ ì°¾ê¸°</li>
            </ol>
        </nav>
        
        <!-- ìƒë‹¨ íƒ€ì´í‹€ -->
        <div class="row mb-4">
            <div class="col-12">
                <h2><i class="fas fa-map-marker-alt text-info me-2"></i> ì‹œì„¤ ê²€ìƒ‰</h2>
                <p class="text-muted">ì§€ë„ë¥¼ í†µí•´ ì£¼ë³€ ìš”ì–‘ ì‹œì„¤ì„ ì°¾ì•„ë³´ì„¸ìš”.</p>
            </div>
        </div>

        <!-- ê²€ìƒ‰ í•„í„° -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <form th:action="@{/facility/search}" method="get" class="row g-3">
                            <div class="col-md-3">
                                <label for="searchKeyword" class="form-label">ê²€ìƒ‰ì–´</label>
                                <input type="text" class="form-control" id="searchKeyword" name="facilityName" th:value="${facilityName}" placeholder="ì‹œì„¤ëª… ë˜ëŠ” ì£¼ì†Œ">
                            </div>
                            <div class="col-md-3">
                                <label for="region" class="form-label">ì§€ì—­</label>
                                <select id="region" name="region" class="form-select">
                                    <option value="">ì „ì²´</option>
                                    <option value="ì„œìš¸" th:selected="${region == 'ì„œìš¸'}">ì„œìš¸</option>
                                    <option value="ê²½ê¸°" th:selected="${region == 'ê²½ê¸°'}">ê²½ê¸°</option>
                                    <option value="ì¸ì²œ" th:selected="${region == 'ì¸ì²œ'}">ì¸ì²œ</option>
                                    <option value="ë¶€ì‚°" th:selected="${region == 'ë¶€ì‚°'}">ë¶€ì‚°</option>
                                    <option value="ëŒ€êµ¬" th:selected="${region == 'ëŒ€êµ¬'}">ëŒ€êµ¬</option>
                                    <option value="ê´‘ì£¼" th:selected="${region == 'ê´‘ì£¼'}">ê´‘ì£¼</option>
                                    <option value="ëŒ€ì „" th:selected="${region == 'ëŒ€ì „'}">ëŒ€ì „</option>
                                    <option value="ìš¸ì‚°" th:selected="${region == 'ìš¸ì‚°'}">ìš¸ì‚°</option>
                                    <option value="ì„¸ì¢…" th:selected="${region == 'ì„¸ì¢…'}">ì„¸ì¢…</option>
                                    <option value="ê°•ì›" th:selected="${region == 'ê°•ì›'}">ê°•ì›</option>
                                    <option value="ì¶©ë¶" th:selected="${region == 'ì¶©ë¶'}">ì¶©ë¶</option>
                                    <option value="ì¶©ë‚¨" th:selected="${region == 'ì¶©ë‚¨'}">ì¶©ë‚¨</option>
                                    <option value="ì „ë¶" th:selected="${region == 'ì „ë¶'}">ì „ë¶</option>
                                    <option value="ì „ë‚¨" th:selected="${region == 'ì „ë‚¨'}">ì „ë‚¨</option>
                                    <option value="ê²½ë¶" th:selected="${region == 'ê²½ë¶'}">ê²½ë¶</option>
                                    <option value="ê²½ë‚¨" th:selected="${region == 'ê²½ë‚¨'}">ê²½ë‚¨</option>
                                    <option value="ì œì£¼" th:selected="${region == 'ì œì£¼'}">ì œì£¼</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label for="facilityType" class="form-label">ìœ í˜•</label>
                                <select id="facilityType" name="facilityType" class="form-select">
                                    <option value="">ì „ì²´</option>
                                    <option value="nursing_home" th:selected="${facilityType == 'nursing_home'}">ìš”ì–‘ì›</option>
                                    <option value="day_care" th:selected="${facilityType == 'day_care'}">ì£¼ê°„/ì•¼ê°„ë³´í˜¸ì„¼í„°</option>
                                    <option value="home_care" th:selected="${facilityType == 'home_care'}">ì¬ê°€ë³µì§€ì„¼í„°</option>
                                    <option value="hospital" th:selected="${facilityType == 'hospital'}">ë³‘ì›</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="gradeRating" class="form-label">ë“±ê¸‰</label>
                                <select id="gradeRating" name="gradeRating" class="form-select" disabled title="í˜„ì¬ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤">
                                    <option value="">ì „ì²´</option>
                                    <option value="1" th:selected="${gradeRating == '1'}">1ë“±ê¸‰</option>
                                    <option value="2" th:selected="${gradeRating == '2'}">2ë“±ê¸‰</option>
                                    <option value="3" th:selected="${gradeRating == '3'}">3ë“±ê¸‰</option>
                                    <option value="4" th:selected="${gradeRating == '4'}">4ë“±ê¸‰</option>
                                    <option value="5" th:selected="${gradeRating == '5'}">5ë“±ê¸‰</option>
                                </select>
                                <div class="form-text text-muted small">í˜„ì¬ ë“±ê¸‰ ì •ë³´ê°€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤</div>
                            </div>
                            <div class="col-md-1 d-flex align-items-end">
                                <button type="submit" class="btn btn-primary w-100"><i class="fas fa-search"></i></button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- ê²€ìƒ‰ ê²°ê³¼ -->
        <div class="row">
            <!-- ì‹œì„¤ ëª©ë¡ (4) -->
            <div class="col-5">
                <div class="card shadow-sm">
                    <div class="card-header bg-white">
                        <h5 class="mb-0"><i class="fas fa-list me-2"></i> ê²€ìƒ‰ ê²°ê³¼ <span class="badge bg-info" th:text="${#lists.size(facilityList)}">0</span>ê°œ</h5>
                    </div>
                    <div class="card-body p-0">
                        <div th:if="${#lists.isEmpty(facilityList)}" class="alert alert-warning m-3" role="alert">
                            <i class="fas fa-exclamation-triangle me-2"></i> ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
                        </div>
                        <div th:unless="${#lists.isEmpty(facilityList)}" class="facility-list" style="height: 75vh; overflow-y: auto;">
                            <div th:each="facility : ${facilityList}" class="facility-item p-3 border-bottom" 
                                 th:attr="data-lat=${facility.latitude}, data-lng=${facility.longitude}">
                                <div class="row">
                                    <div class="col-12">
                                        <h5 class="mb-2 text-primary" th:text="${facility.facilityName}">ì‹œì„¤ëª…</h5>
                                        <p class="mb-2 text-muted"><i class="fas fa-map-marker-alt me-1"></i> <span th:text="${facility.address}">ì£¼ì†Œ</span></p>
                                        <div class="d-flex align-items-center mb-2">
                                            <div class="me-3">
                                                <i class="fas fa-star text-warning"></i>
                                                <span th:text="${facility.averageRating}">4.5</span>/5.0
                                            </div>
                                            <div class="me-3">
                                                <i class="fas fa-comment text-info"></i>
                                                ë¦¬ë·° <span th:text="${facility.reviewCount}">12</span>ê°œ
                                            </div>
                                            <div>
                                                <i class="fas fa-building me-1"></i>
                                                <span th:if="${facility.facilityType == 'nursing_home'}">ìš”ì–‘ì›</span>
                                                <span th:if="${facility.facilityType == 'day_care'}">ì£¼ê°„/ì•¼ê°„ë³´í˜¸ì„¼í„°</span>
                                                <span th:if="${facility.facilityType == 'home_care'}">ì¬ê°€ë³µì§€ì„¼í„°</span>
                                                <span th:if="${facility.facilityType == 'hospital'}">ë³‘ì›</span>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <a th:href="@{/facility/detail/{id}(id=${facility.facilityId})}" class="btn btn-outline-info btn-sm">
                                                <i class="fas fa-info-circle me-1"></i> ìƒì„¸ ì •ë³´
                                            </a>
                                            <span class="badge bg-success" th:if="${facility.isApproved}">ìŠ¹ì¸ë¨</span>
                                            <span class="badge bg-secondary" th:if="${!facility.isApproved}">ë¯¸ìŠ¹ì¸</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ì§€ë„ (6) -->
            <div class="col-7">
                <div class="card shadow-sm">
                    <div class="card-body p-0">
                        <div id="map" style="width:100%; height:75vh;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<div th:replace="~{layout/footer :: footer}"></div>

<!-- ê³µí†µ JavaScript -->
<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ì¹´ì¹´ì˜¤ë§µ Javascript SDK -->
<script src="/js/kakaomap.js"></script>

<!-- ë””ë²„ê¹…ìš© API í‚¤ í™•ì¸ -->
<script th:inline="javascript">
    /*<![CDATA[*/
    const API_KEY = /*[[${KAKAO_APP_KEY}]]*/ '';
    console.log('ì „ë‹¬ë°›ì€ API í‚¤:', API_KEY);
    if (!API_KEY || API_KEY === '') {
        console.error('API í‚¤ê°€ ì „ë‹¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!');
    }
    /*]]>*/
</script>

<script type="text/javascript" th:src="@{//dapi.kakao.com/v2/maps/sdk.js(appkey=${KAKAO_APP_KEY}, libraries='services,clusterer,drawing')}"></script>

<script th:inline="javascript">
    /*<![CDATA[*/
    // Thymeleaf ëª¨ë¸ì—ì„œ ìë°” ê°ì²´ë¥¼ JavaScript ë°°ì—´ë¡œ ë³€í™˜
    const facilities = /*[[${facilityList}]]*/ '[]';

    $(document).ready(function() {
        // ì¹´ì¹´ì˜¤ë§µ SDK ë¡œë“œ ëŒ€ê¸°
        setTimeout(function() {
            if (typeof kakao === 'undefined' || !kakao.maps) {
                console.error('ì¹´ì¹´ì˜¤ë§µ SDKë¥¼ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            initializeMap();
        }, 100);
    });

    function initializeMap() {
        const mapContainer = document.getElementById('map');
        let mapCenter = new kakao.maps.LatLng(37.566826, 126.9786567); // ê¸°ë³¸ê°’: ì„œìš¸ ì‹œì²­
        
        // ì‹œì„¤ ëª©ë¡ì´ ìˆë‹¤ë©´ ì²« ë²ˆì§¸ ì‹œì„¤ì„ ê¸°ë³¸ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ì •
        if (facilities.length > 0) {
            mapCenter = new kakao.maps.LatLng(facilities[0].latitude, facilities[0].longitude);
        }
        
        const mapOption = {
            center: mapCenter,
            level: 8
        };
        const map = new kakao.maps.Map(mapContainer, mapOption);
        const markers = [];
        const infowindows = [];

        // ì‹œì„¤ ëª©ë¡ í•­ëª© í˜¸ë²„ ì‹œ í•´ë‹¹ ë§ˆì»¤ ê°•ì¡°
        $('.facility-item').hover(
            function() {
                const lat = $(this).data('lat');
                const lng = $(this).data('lng');
                const index = markers.findIndex(marker => 
                    marker.getPosition().getLat() === lat && 
                    marker.getPosition().getLng() === lng
                );
                if (index > -1) {
                    markers[index].setZIndex(100);
                    infowindows[index].open(map, markers[index]);
                }
            },
            function() {
                infowindows.forEach(iw => iw.close());
            }
        );

        let currentMarker = null;
        let currentInfoWindow = null;

        // ì‹œì„¤ ëª©ë¡ í•­ëª© í´ë¦­ ì‹œ ì§€ë„ ì¤‘ì‹¬ ì´ë™ ë° ë§ˆì»¤ í‘œì‹œ
        $('.facility-item').click(function(e) {
            // ìƒì„¸ë³´ê¸° ë²„íŠ¼ì„ ì§ì ‘ í´ë¦­í•œ ê²½ìš°ëŠ” ê¸°ë³¸ ë™ì‘ ìœ ì§€
            if ($(e.target).closest('.btn').length > 0) {
                return;
            }
            
            const lat = $(this).data('lat');
            const lng = $(this).data('lng');
            if (lat && lng) {
                const position = new kakao.maps.LatLng(lat, lng);
                map.setCenter(position);
                map.setLevel(3); // í™•ëŒ€í•˜ì—¬ í•´ë‹¹ ì‹œì„¤ ìœ„ì¹˜ ìƒì„¸íˆ ë³´ê¸°
                
                // ê¸°ì¡´ ë§ˆì»¤ ì œê±°
                if (currentMarker) {
                    currentMarker.setMap(null);
                }
                if (currentInfoWindow) {
                    currentInfoWindow.close();
                }
                
                // í´ë¦­ëœ ì‹œì„¤ ì •ë³´ ì°¾ê¸°
                const facilityData = facilities.find(f => 
                    parseFloat(f.latitude) === lat && parseFloat(f.longitude) === lng
                );
                
                if (facilityData) {
                    // ìƒˆ ë§ˆì»¤ ìƒì„±
                    currentMarker = new kakao.maps.Marker({
                        position: position,
                        map: map
                    });
                    
                    // ìƒˆ ì¸í¬ìœˆë„ìš° ìƒì„±
                    currentInfoWindow = new kakao.maps.InfoWindow({
                        content: `
                            <div class="p-2" style="width:250px;">
                                <h6 class="mb-1">${facilityData.facilityName}</h6>
                                <p class="mb-1 small">${facilityData.address}</p>
                                <p class="mb-0 small">
                                    í‰ì : ${facilityData.averageRating}/5.0
                                </p>
                                <a href="/facility/detail/${facilityData.facilityId}"
                                   class="btn btn-sm btn-info mt-2 w-100">ìƒì„¸ë³´ê¸°</a>
                            </div>
                        `
                    });
                    
                    // ë§ˆì»¤ í´ë¦­ ì´ë²¤íŠ¸
                    kakao.maps.event.addListener(currentMarker, 'click', function() {
                        currentInfoWindow.open(map, currentMarker);
                    });
                    
                    // ì¸í¬ìœˆë„ìš° ìë™ ì—´ê¸°
                    currentInfoWindow.open(map, currentMarker);
                }
            }
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²« ë²ˆì§¸ ì‹œì„¤ì— ë§ˆì»¤ í‘œì‹œ
        if (facilities.length > 0) {
            const firstFacility = facilities[0];
            const position = new kakao.maps.LatLng(firstFacility.latitude, firstFacility.longitude);
            
            currentMarker = new kakao.maps.Marker({
                position: position,
                map: map
            });
            
            currentInfoWindow = new kakao.maps.InfoWindow({
                content: `
                    <div class="p-2" style="width:250px;">
                        <h6 class="mb-1">${firstFacility.facilityName}</h6>
                        <p class="mb-1 small">${firstFacility.address}</p>
                        <p class="mb-0 small">
                            í‰ì : ${firstFacility.averageRating}/5.0
                        </p>
                        <a href="/facility/detail/${firstFacility.facilityId}"
                           class="btn btn-sm btn-info mt-2 w-100">ìƒì„¸ë³´ê¸°</a>
                    </div>
                `
            });
            
            kakao.maps.event.addListener(currentMarker, 'click', function() {
                currentInfoWindow.open(map, currentMarker);
            });
        }
    }
    /*]]>*/
</script>

<style>
.facility-list::-webkit-scrollbar {
    width: 8px;
}
.facility-list::-webkit-scrollbar-track {
    background: #f1f1f1;
}
.facility-list::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 4px;
}
.facility-list::-webkit-scrollbar-thumb:hover {
    background: #555;
}
.facility-item {
    transition: background-color 0.2s;
    cursor: pointer;
}
.facility-item:hover {
    background-color: #f8f9fa;
}
</style>
</body>
</html>
````

## File: src/main/resources/templates/layout/header.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:fragment="header">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle != null ? pageTitle + ' - CareLink' : 'CareLink - ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ ì‚¬ì´íŠ¸'}">CareLink</title>
    
    <!-- ìºì‹œ ë°©ì§€ ë©”íƒ€ íƒœê·¸ -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts - í•œê¸€ í°íŠ¸ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Cropper.js CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" rel="stylesheet">
    <!-- ê³µí†µ CSS -->
    <link href="/css/common.css" rel="stylesheet">
    <!-- ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ìœ í‹¸ë¦¬í‹° -->
    <script src="/js/smart-scroll-utility.js"></script>
    <!-- ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° CSS -->
    <link href="/css/rich-text-editor.css" rel="stylesheet">
    <!-- ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° JS (ë³´ì•ˆ ê°•í™” ë²„ì „) -->
    <script src="/js/rich-text-editor-v2.js"></script>
</head>

<body class="pt-5">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” (ê³ ì •í˜•) -->
    <nav th:fragment="navbar" class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container">
            <!-- ë¡œê³  -->
            <a class="navbar-brand fw-bold" href="/">
                <i class="fas fa-heart text-danger me-2"></i>
                CareLink
            </a>
            
            <!-- ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€ ë²„íŠ¼ -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <!-- ë©”ë‰´ -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <!-- ì‹œì„¤ ê²€ìƒ‰ (íŒ€ì› B) -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-map-marker-alt me-1"></i>
                            ì‹œì„¤ ì°¾ê¸°
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="/facility/search">ì‹œì„¤ ê²€ìƒ‰</a></li>
                            <li><a class="dropdown-item" href="/review">ì‹œì„¤ ë¦¬ë·°</a></li>
                            <li><a class="dropdown-item" href="/review/write">ë¦¬ë·° ì‘ì„±</a></li>
                            <!-- ì‹œì„¤íšŒì›ë§Œ ì‹œì„¤ ê´€ë¦¬ ë©”ë‰´ í‘œì‹œ -->
                            <li th:if="${session.loginMember != null and session.loginMember.role == 'FACILITY'}"><hr class="dropdown-divider"></li>
                            <li th:if="${session.loginMember != null and session.loginMember.role == 'FACILITY'}">
                                <a class="dropdown-item" href="/facility/manage">
                                    <i class="fas fa-cogs me-1"></i>ë‚´ ì‹œì„¤ ê´€ë¦¬
                                </a>
                            </li>
                        </ul>
                    </li>
                    
                    <!-- êµ¬ì¸êµ¬ì§ (íŒ€ì› C) -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-briefcase me-1"></i>
                            êµ¬ì¸êµ¬ì§
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="/job?type=recruit">êµ¬ì¸ ì •ë³´</a></li>
                            <li><a class="dropdown-item" href="/job?type=search">êµ¬ì§ ì •ë³´</a></li>
                            <!-- ì‹œì„¤íšŒì› ë˜ëŠ” ê´€ë¦¬ìë§Œ ì±„ìš©ê³µê³  ì‘ì„± ë©”ë‰´ í‘œì‹œ -->
                            <li th:if="${session.loginMember != null and (session.loginMember.role == 'FACILITY' or session.loginMember.role == 'ADMIN')}"><hr class="dropdown-divider"></li>
                            <li th:if="${session.loginMember != null and (session.loginMember.role == 'FACILITY' or session.loginMember.role == 'ADMIN')}">
                                <a class="dropdown-item" href="/job/write">
                                    <i class="fas fa-plus me-1"></i>ì±„ìš©ê³µê³  ì‘ì„±
                                </a>
                            </li>
                        </ul>
                    </li>
                    
                    <!-- ì •ë³´ ê²Œì‹œíŒ (íŒ€ì› D) -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-clipboard-list me-1"></i>
                            ì •ë³´ë§ˆë‹¹
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="/board?type=notice">ê³µì§€ì‚¬í•­</a></li>
                            <li><a class="dropdown-item" href="/board?type=info">ì •ë³´ê³µìœ </a></li>
                            <li><a class="dropdown-item" href="/board?type=qna">Q&A</a></li>
                            <li><a class="dropdown-item" href="/board?type=faq">FAQ</a></li>
                        </ul>
                    </li>
                </ul>
                
                <!-- ì‚¬ìš©ì ë©”ë‰´ -->
                <ul class="navbar-nav">
                    <!-- ë¡œê·¸ì¸ëœ ê²½ìš° -->
                    <li class="nav-item dropdown" th:if="${session.memberId != null}">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-user-circle me-1"></i>
                            <span th:if="${session.loginMember != null}" th:text="${session.loginMember.name}">ì‚¬ìš©ìëª…</span>
                            <span th:unless="${session.loginMember != null}" th:text="'í…ŒìŠ¤íŠ¸ì‚¬ìš©ì' + ${session.memberId}">í…ŒìŠ¤íŠ¸ì‚¬ìš©ì</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="/member/myinfo" onclick="event.stopPropagation();">ë‚´ ì •ë³´</a></li>
                            <!-- ê´€ë¦¬ìì¸ ê²½ìš° ê´€ë¦¬ì í˜ì´ì§€ í‘œì‹œ -->
                            <li th:if="${session.loginMember != null and session.loginMember.role == 'ADMIN'}">
                                <a class="dropdown-item" href="/admin" onclick="event.stopPropagation();">
                                    <i class="fas fa-cog me-1"></i>ê´€ë¦¬ì í˜ì´ì§€
                                </a>
                            </li>
                            <!-- ê´€ë¦¬ìê°€ ì•„ë‹Œ ê²½ìš° ë‚´ê°€ ì“´ ê¸€ í‘œì‹œ -->
                            <li th:if="${session.loginMember == null or session.loginMember.role != 'ADMIN'}">
                                <a class="dropdown-item" href="/member/mypost" onclick="event.stopPropagation();">ë‚´ê°€ ì“´ ê¸€</a>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/member/logout" onclick="event.stopPropagation();">ë¡œê·¸ì•„ì›ƒ</a></li>
                        </ul>
                    </li>
                    
                    <!-- ë¡œê·¸ì¸ ì•ˆëœ ê²½ìš° -->
                    <li class="nav-item" th:unless="${session.memberId != null}">
                        <a class="nav-link" href="/member/login">
                            <i class="fas fa-sign-in-alt me-1"></i>
                            ë¡œê·¸ì¸
                        </a>
                    </li>
                    <li class="nav-item" th:unless="${session.memberId != null}">
                        <a class="nav-link" href="/member/join">
                            <i class="fas fa-user-plus me-1"></i>
                            íšŒì›ê°€ì…
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- ë©”ì‹œì§€ í‘œì‹œ ì˜ì—­ -->
    <div th:fragment="messages" class="container mt-3" style="position: relative; z-index: 1030;">
        <!-- ì„±ê³µ ë©”ì‹œì§€ -->
        <div class="alert alert-success alert-dismissible fade show" role="alert" th:if="${message}">
            <i class="fas fa-check-circle me-2"></i>
            <span th:text="${message}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        
        <!-- ì—ëŸ¬ ë©”ì‹œì§€ -->
        <div class="alert alert-danger alert-dismissible fade show" role="alert" th:if="${error}">
            <i class="fas fa-exclamation-triangle me-2"></i>
            <span th:text="${error}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        
        <!-- ê²½ê³  ë©”ì‹œì§€ -->
        <div class="alert alert-warning alert-dismissible fade show" role="alert" th:if="${warning}">
            <i class="fas fa-exclamation-circle me-2"></i>
            <span th:text="${warning}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    </div>
    
    <!-- ë“œë¡­ë‹¤ìš´ ë©”ë‰´ì™€ ë©”ì‹œì§€ ì¶©ëŒ ë°©ì§€ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ë“œë¡­ë‹¤ìš´ì´ ì—´ë¦´ ë•Œ ë©”ì‹œì§€ ìë™ ìˆ¨ê¹€
            var dropdownToggles = document.querySelectorAll('.dropdown-toggle');
            dropdownToggles.forEach(function(toggle) {
                toggle.addEventListener('click', function() {
                    // ë©”ì‹œì§€ ì•Œë¦¼ ì¦‰ì‹œ ìˆ¨ê¹€
                    var alerts = document.querySelectorAll('.alert');
                    alerts.forEach(function(alert) {
                        alert.style.display = 'none';
                    });
                });
            });
        });
    </script>
</body>
</html>
````

## File: src/main/resources/templates/member/join.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>íšŒì›ê°€ì… - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item active" aria-current="page">íšŒì›ê°€ì…</li>
            </ol>
        </nav>
        
        <div class="row justify-content-center">
            <div class="col-md-6 col-lg-5"> <div class="card shadow">
                <div class="card-body p-4">
                    <div class="text-center mb-4">
                        <h3 class="card-title fw-bold text-primary">
                            <i class="fas fa-user-plus me-2"></i>
                            íšŒì›ê°€ì…
                        </h3>
                        <p class="text-muted">ìƒˆë¡œìš´ CareLink ê³„ì •ì„ ë§Œë“œì„¸ìš”</p>
                    </div>

                    <form th:action="@{/member/join}" method="post" id="joinForm" th:object="${memberDTO}">
                        <!-- íšŒì› ìœ í˜• ì„ íƒ -->
                        <div class="mb-4">
                            <label class="form-label mb-3">
                                <i class="fas fa-users me-1"></i>íšŒì› ìœ í˜• <span class="text-danger">*</span>
                            </label>
                            <div class="row g-3">
                                <div class="col-6">
                                    <input type="radio" class="btn-check" name="role" id="roleUser" value="USER" th:field="*{role}" checked>
                                    <label class="btn btn-outline-primary h-100 w-100 user-type-card" for="roleUser">
                                        <div class="d-flex flex-column align-items-center justify-content-center h-100 p-3">
                                            <i class="fas fa-user-friends fa-2x mb-2 text-primary"></i>
                                            <h6 class="mb-1 fw-bold">ì¼ë°˜íšŒì›</h6>
                                            <small class="text-muted text-center">êµ¬ì§ì, ê°€ì¡±<br>ìš”ì–‘ ì„œë¹„ìŠ¤ë¥¼ ì°¾ëŠ” ë¶„</small>
                                        </div>
                                    </label>
                                </div>
                                <div class="col-6">
                                    <input type="radio" class="btn-check" name="role" id="roleFacility" value="FACILITY" th:field="*{role}">
                                    <label class="btn btn-outline-success h-100 w-100 user-type-card" for="roleFacility">
                                        <div class="d-flex flex-column align-items-center justify-content-center h-100 p-3">
                                            <i class="fas fa-building fa-2x mb-2 text-success"></i>
                                            <h6 class="mb-1 fw-bold">ì‹œì„¤íšŒì›</h6>
                                            <small class="text-muted text-center">ìš”ì–‘ì›, ë³‘ì› ìš´ì˜ì<br>ì¸ë ¥ì„ ì±„ìš©í•˜ëŠ” ì‹œì„¤</small>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="userId" class="form-label">
                                <i class="fas fa-user me-1"></i>ì•„ì´ë”” <span class="text-danger">*</span>
                            </label>
                            <input type="text"
                                   class="form-control"
                                   id="userId"
                                   th:field="*{userId}" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš” (4-20ì ì˜ë¬¸, ìˆ«ì)"
                                   required>
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('userId')}" th:text="${#fields.errors('userId')[0]}"></div>
                            <div id="userIdFeedback" class="mt-1"></div> </div>

                        <div class="mb-3">
                            <label for="password" class="form-label">
                                <i class="fas fa-lock me-1"></i>ë¹„ë°€ë²ˆí˜¸ <span class="text-danger">*</span>
                            </label>
                            <div class="input-group">
                                <input type="password"
                                       class="form-control"
                                       id="password"
                                       th:field="*{password}" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                                       required>
                                <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <small class="form-text text-muted">8-20ìì˜ ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ 1ê°œ ì´ìƒ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.</small>
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('password')}" th:text="${#fields.errors('password')[0]}"></div>
                        </div>

                        <div class="mb-3">
                            <label for="passwordConfirm" class="form-label">
                                <i class="fas fa-lock me-1"></i>ë¹„ë°€ë²ˆí˜¸ í™•ì¸ <span class="text-danger">*</span>
                            </label>
                            <input type="password"
                                   class="form-control"
                                   id="passwordConfirm"
                                   th:field="*{passwordConfirm}" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”"
                                   required>
                            <div id="passwordMismatchFeedback" class="text-danger mt-1" style="display:none;">
                                ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                            </div>
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('passwordConfirm')}" th:text="${#fields.errors('passwordConfirm')[0]}"></div>
                        </div>

                        <div class="mb-3">
                            <label for="name" class="form-label">
                                <i class="fas fa-signature me-1"></i>ì´ë¦„ <span class="text-danger">*</span>
                            </label>
                            <input type="text"
                                   class="form-control"
                                   id="name"
                                   th:field="*{name}" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
                                   required>
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('name')}" th:text="${#fields.errors('name')[0]}"></div>
                        </div>

                        <div class="mb-3">
                            <label for="email" class="form-label">
                                <i class="fas fa-envelope me-1"></i>ì´ë©”ì¼ <span class="text-danger">*</span>
                            </label>
                            <input type="email"
                                   class="form-control"
                                   id="email"
                                   th:field="*{email}" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”">
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('email')}" th:text="${#fields.errors('email')[0]}"></div>
                        </div>

                        <div class="mb-3">
                            <label for="phone" class="form-label">
                                <i class="fas fa-phone me-1"></i>íœ´ëŒ€í° ë²ˆí˜¸
                            </label>
                            <input type="tel"
                                   class="form-control"
                                   id="phone"
                                   th:field="*{phone}" placeholder="ìˆ«ìë§Œ ì…ë ¥í•˜ì„¸ìš” (ìë™ìœ¼ë¡œ í•˜ì´í”ˆ ì¶”ê°€ë¨)"
                                   pattern="^01(?:0|1|[6-9])-(?:\d{3}|\d{4})-\d{4}$">
                            <small class="form-text text-muted">ìˆ«ìë§Œ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ 010-1234-5678 í˜•íƒœë¡œ ë³€í™˜ë©ë‹ˆë‹¤</small>
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('phone')}" th:text="${#fields.errors('phone')[0]}"></div>
                        </div>

                        <div class="mb-3">
                            <label for="address" class="form-label">
                                <i class="fas fa-map-marker-alt me-1"></i>ì£¼ì†Œ
                                <span id="address-required-asterisk" class="text-danger" style="display: none;">*</span>
                            </label>
                            <div class="input-group mb-2">
                                <input type="text"
                                       class="form-control"
                                       id="address"
                                       th:field="*{address}" 
                                       placeholder="ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”"
                                       readonly>
                                <button type="button" class="btn btn-outline-primary" onclick="openAddressSearch('address')">
                                    <i class="fas fa-search me-1"></i>ì£¼ì†Œ ê²€ìƒ‰
                                </button>
                            </div>
                            <input type="text" 
                                   class="form-control" 
                                   id="detailAddress" 
                                   th:field="*{detailAddress}"
                                   placeholder="ìƒì„¸ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 101ë™ 201í˜¸, 2ì¸µ)">
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('address')}" th:text="${#fields.errors('address')[0]}"></div>
                        </div>

                        <!-- ì‹œì„¤íšŒì› ì¶”ê°€ ì •ë³´ -->
                        <div id="facilityFields" style="display: none;">
                            <hr class="my-4">
                            <h5 class="text-primary mb-3">
                                <i class="fas fa-building me-2"></i>ì‹œì„¤ ì •ë³´
                            </h5>
                            
                            <div class="mb-3">
                                <label for="facilityName" class="form-label">
                                    <i class="fas fa-home me-1"></i>ì‹œì„¤ëª… <span class="text-danger">*</span>
                                </label>
                                <input type="text" class="form-control" id="facilityName" th:field="*{facilityName}" 
                                       placeholder="ì‹œì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                            </div>

                            <div class="mb-3">
                                <label for="facilityType" class="form-label">
                                    <i class="fas fa-list me-1"></i>ì‹œì„¤ ìœ í˜• <span class="text-danger">*</span>
                                </label>
                                <select class="form-select" id="facilityType" th:field="*{facilityType}">
                                    <option value="">ì‹œì„¤ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                    <option value="NURSING_HOME">ìš”ì–‘ì›</option>
                                    <option value="HOSPITAL">ìš”ì–‘ë³‘ì›</option>
                                    <option value="DAY_CARE">ì£¼ê°„ë³´í˜¸ì„¼í„°</option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label for="facilityAddress" class="form-label">
                                    <i class="fas fa-map-marker-alt me-1"></i>ì‹œì„¤ ì£¼ì†Œ <span class="text-danger">*</span>
                                </label>
                                <div class="input-group mb-2">
                                    <input type="text" class="form-control" id="facilityAddress" th:field="*{facilityAddress}"
                                           placeholder="ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”" readonly required>
                                    <button type="button" class="btn btn-outline-primary" onclick="searchFacilityAddress()">
                                        <i class="fas fa-search me-1"></i>ì£¼ì†Œ ê²€ìƒ‰
                                    </button>
                                </div>
                                <input type="text" class="form-control" id="detailAddress" th:field="*{detailAddress}"
                                       placeholder="ìƒì„¸ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 101í˜¸, 2ì¸µ)">
                                <!-- ìœ„ë„/ê²½ë„ íˆë“  í•„ë“œ -->
                                <input type="hidden" id="latitude" th:field="*{latitude}">
                                <input type="hidden" id="longitude" th:field="*{longitude}">
                            </div>
                            
                            <!-- ìœ„ì¹˜ ë¯¸ë¦¬ë³´ê¸° ì§€ë„ -->
                            <div class="mb-3" id="mapPreviewContainer" style="display: none;">
                                <label class="form-label">
                                    <i class="fas fa-map me-1"></i>ìœ„ì¹˜ ë¯¸ë¦¬ë³´ê¸°
                                </label>
                                <div id="previewMap" style="width:100%; height:200px; border-radius: 8px; border: 1px solid #dee2e6;"></div>
                                <small class="form-text text-muted">ì„ íƒëœ ì£¼ì†Œì˜ ìœ„ì¹˜ê°€ ì§€ë„ì— í‘œì‹œë©ë‹ˆë‹¤.</small>
                            </div>

                            <div class="mb-3">
                                <label for="facilityPhone" class="form-label">
                                    <i class="fas fa-phone me-1"></i>ì‹œì„¤ ì „í™”ë²ˆí˜¸ <span class="text-danger">*</span>
                                </label>
                                <input type="tel" class="form-control" id="facilityPhone" th:field="*{facilityPhone}"
                                       placeholder="ìˆ«ìë§Œ ì…ë ¥í•˜ì„¸ìš” (ìë™ìœ¼ë¡œ í•˜ì´í”ˆ ì¶”ê°€ë¨)"
                                       pattern="^(02-\d{3,4}-\d{4}|0(3[1-3]|4[1-3]|5[1-5]|6[1-4]|70)-\d{3,4}-\d{4}|01[016-9]-\d{3,4}-\d{4})$">
                                <small class="form-text text-muted">ì¼ë°˜ ì „í™”ë²ˆí˜¸(02-1234-5678) ë˜ëŠ” íœ´ëŒ€í° ë²ˆí˜¸ ëª¨ë‘ ê°€ëŠ¥í•©ë‹ˆë‹¤</small>
                            </div>

                            <div class="mb-3">
                                <label for="facilityImage" class="form-label">
                                    <i class="fas fa-image me-1"></i>ì‹œì„¤ ëŒ€í‘œ ì‚¬ì§„
                                </label>
                                <input type="file" class="form-control" id="facilityImage" name="facilityImageFile"
                                       accept="image/*" data-image-compressor='{"quality": 0.8, "maxWidth": 1920, "maxHeight": 1080}'>
                                <small class="form-text text-muted">JPG, PNG íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥ (SEO ìµœì í™”ë¥¼ ìœ„í•´ ìë™ ì••ì¶•ë©ë‹ˆë‹¤)</small>
                            </div>

                            <div class="mb-3">
                                <label for="capacity" class="form-label">
                                    <i class="fas fa-users me-1"></i>ìˆ˜ìš© ì¸ì›
                                </label>
                                <input type="number" class="form-control" id="capacity" th:field="*{capacity}"
                                       placeholder="ìˆ˜ìš© ê°€ëŠ¥ ì¸ì›ì„ ì…ë ¥í•˜ì„¸ìš”" min="1">
                            </div>

                            <div class="mb-3">
                                <label for="operatingHours" class="form-label">
                                    <i class="fas fa-clock me-1"></i>ìš´ì˜ ì‹œê°„
                                </label>
                                <div class="row g-2">
                                    <div class="col-12">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="operatingType" id="operating24" value="24ì‹œê°„" checked>
                                            <label class="form-check-label fw-bold text-success" for="operating24">
                                                <i class="fas fa-clock me-1"></i>24ì‹œê°„ ìš´ì˜
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="operatingType" id="operatingCustom" value="custom">
                                            <label class="form-check-label" for="operatingCustom">
                                                <i class="fas fa-clock me-1"></i>ì‹œê°„ ì„ íƒ
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div id="customTimeSection" class="mt-3" style="display: none;">
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <label for="startTime" class="form-label">ì‹œì‘ ì‹œê°„</label>
                                            <select class="form-select" id="startTime">
                                                <option value="00:00">00:00</option>
                                                <option value="01:00">01:00</option>
                                                <option value="02:00">02:00</option>
                                                <option value="03:00">03:00</option>
                                                <option value="04:00">04:00</option>
                                                <option value="05:00">05:00</option>
                                                <option value="06:00">06:00</option>
                                                <option value="07:00">07:00</option>
                                                <option value="08:00">08:00</option>
                                                <option value="09:00" selected>09:00</option>
                                                <option value="10:00">10:00</option>
                                                <option value="11:00">11:00</option>
                                                <option value="12:00">12:00</option>
                                                <option value="13:00">13:00</option>
                                                <option value="14:00">14:00</option>
                                                <option value="15:00">15:00</option>
                                                <option value="16:00">16:00</option>
                                                <option value="17:00">17:00</option>
                                                <option value="18:00">18:00</option>
                                                <option value="19:00">19:00</option>
                                                <option value="20:00">20:00</option>
                                                <option value="21:00">21:00</option>
                                                <option value="22:00">22:00</option>
                                                <option value="23:00">23:00</option>
                                            </select>
                                        </div>
                                        <div class="col-6">
                                            <label for="endTime" class="form-label">ì¢…ë£Œ ì‹œê°„</label>
                                            <select class="form-select" id="endTime">
                                                <option value="00:00">00:00</option>
                                                <option value="01:00">01:00</option>
                                                <option value="02:00">02:00</option>
                                                <option value="03:00">03:00</option>
                                                <option value="04:00">04:00</option>
                                                <option value="05:00">05:00</option>
                                                <option value="06:00">06:00</option>
                                                <option value="07:00">07:00</option>
                                                <option value="08:00">08:00</option>
                                                <option value="09:00">09:00</option>
                                                <option value="10:00">10:00</option>
                                                <option value="11:00">11:00</option>
                                                <option value="12:00">12:00</option>
                                                <option value="13:00">13:00</option>
                                                <option value="14:00">14:00</option>
                                                <option value="15:00">15:00</option>
                                                <option value="16:00">16:00</option>
                                                <option value="17:00">17:00</option>
                                                <option value="18:00" selected>18:00</option>
                                                <option value="19:00">19:00</option>
                                                <option value="20:00">20:00</option>
                                                <option value="21:00">21:00</option>
                                                <option value="22:00">22:00</option>
                                                <option value="23:00">23:00</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <input type="hidden" id="operatingHours" th:field="*{operatingHours}" value="24ì‹œê°„ ìš´ì˜">
                            </div>

                            <div class="mb-3">
                                <label for="description" class="form-label">
                                    <i class="fas fa-file-text me-1"></i>ì‹œì„¤ ì†Œê°œ
                                </label>
                                <textarea class="form-control" id="description" th:field="*{description}" rows="4"
                                          placeholder="ì˜ˆì‹œ: ì €í¬ í–‰ë³µìš”ì–‘ì›ì€ ì–´ë¥´ì‹ ë“¤ì´ í¸ì•ˆí•˜ê³  ì•ˆì „í•˜ê²Œ ì§€ë‚¼ ìˆ˜ ìˆë„ë¡ ìµœì„ ì„ ë‹¤í•˜ëŠ” ì „ë¬¸ ìš”ì–‘ì‹œì„¤ì…ë‹ˆë‹¤. ìˆ™ë ¨ëœ ìš”ì–‘ë³´í˜¸ì‚¬ì™€ ê°„í˜¸ì‚¬ê°€ 24ì‹œê°„ ìƒì£¼í•˜ë©°, ê°œì¸ë³„ ë§ì¶¤ ì¼€ì–´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê¹¨ë—í•˜ê³  ì¾Œì í•œ í™˜ê²½ì—ì„œ ì–´ë¥´ì‹ ë“¤ì˜ ê±´ê°•í•˜ê³  í–‰ë³µí•œ ë…¸í›„ë¥¼ ì§€ì›í•©ë‹ˆë‹¤."></textarea>
                                <small class="form-text text-muted">
                                    <i class="fas fa-lightbulb me-1"></i>
                                    <strong>ì‘ì„± íŒ:</strong> ì‹œì„¤ì˜ ìš´ì˜ ì² í•™, ì„œë¹„ìŠ¤ íŠ¹ì§•, ì–´ë¥´ì‹ ë“¤ì— ëŒ€í•œ ë°°ë ¤ ë“±ì„ í¬í•¨í•˜ì—¬ ì‘ì„±í•´ì£¼ì„¸ìš”.
                                </small>
                            </div>

                            <div class="mb-3">
                                <label for="features" class="form-label">
                                    <i class="fas fa-star me-1"></i>ì‹œì„¤ íŠ¹ì§•
                                </label>
                                <textarea class="form-control" id="features" th:field="*{features}" rows="3"
                                          placeholder="ì˜ˆì‹œ: 24ì‹œê°„ ê°„ë³‘ì„œë¹„ìŠ¤, ë¬¼ë¦¬ì¹˜ë£Œì‹¤ ì™„ë¹„, ì¸ì§€ì¹˜ë£Œ í”„ë¡œê·¸ë¨ ìš´ì˜, ì˜ì–‘ì‚¬ê°€ ì§ì ‘ ê´€ë¦¬í•˜ëŠ” ì‹ì‚¬ ì œê³µ, ì‹¤ë‚´ ì •ì› ë° íœ´ê²Œê³µê°„, ê°€ì¡± ë©´íšŒì‹¤ ë³„ë„ ìš´ì˜, ì‘ê¸‰ì˜ë£Œ ì‹œìŠ¤í…œ êµ¬ì¶•, ê°œì¸ë³„ ë§ì¶¤ ì¼€ì–´ í”„ë¡œê·¸ë¨"></textarea>
                                <small class="form-text text-muted">
                                    <i class="fas fa-lightbulb me-1"></i>
                                    <strong>ì‘ì„± íŒ:</strong> ì½¤ë§ˆ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ì‹œì„¤ì˜ ì£¼ìš” íŠ¹ì§•, ì„œë¹„ìŠ¤, ì‹œì„¤ ë“±ì„ ë‚˜ì—´í•´ì£¼ì„¸ìš”.
                                </small>
                            </div>

                            <div class="mb-3">
                                <label for="homepage" class="form-label">
                                    <i class="fas fa-globe me-1"></i>í™ˆí˜ì´ì§€ URL
                                </label>
                                <input type="url" class="form-control" id="homepage" th:field="*{homepage}"
                                       placeholder="https://www.example.com">
                            </div>
                        </div>

                        <div class="d-grid mb-3">
                            <button type="submit" class="btn btn-primary btn-lg" id="joinSubmitButton">
                                <i class="fas fa-user-plus me-2"></i>
                                íšŒì›ê°€ì…
                            </button>
                        </div>
                    </form>

                    <div class="row text-center mt-3">
                        <div class="col">
                            <p class="text-muted mb-0">ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?</p>
                            <a th:href="@{/member/login}" class="btn btn-link">
                                <i class="fas fa-sign-in-alt me-1"></i>
                                ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
                            </a>
                        </div>
                    </div>

                </div>
            </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ API -->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<!-- ì¹´ì¹´ì˜¤ë§µ API (ì¢Œí‘œ ë³€í™˜ìš©) -->
<script type="text/javascript" th:src="@{//dapi.kakao.com/v2/maps/sdk.js(appkey=${KAKAO_APP_KEY}, libraries='services')}"></script>
<!-- ì¹´ì¹´ì˜¤ë§µ ìœ í‹¸ë¦¬í‹° -->
<script src="/js/kakaomap.js"></script>
<!-- ì´ë¯¸ì§€ ì••ì¶• ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
<link rel="stylesheet" href="/css/image-compressor.css">
<script src="/js/image-compressor.js"></script>

<style>
.user-type-card {
    min-height: 120px;
    transition: all 0.3s ease;
    border-width: 2px !important;
    background-color: #fff;
}

.user-type-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.btn-check:checked + .user-type-card.btn-outline-primary {
    background-color: #0d6efd;
    border-color: #0d6efd;
    color: white;
}

.btn-check:checked + .user-type-card.btn-outline-primary .text-primary {
    color: white !important;
}

.btn-check:checked + .user-type-card.btn-outline-primary .text-muted {
    color: rgba(255,255,255,0.8) !important;
}

.btn-check:checked + .user-type-card.btn-outline-success {
    background-color: #198754;
    border-color: #198754;
    color: white;
}

.btn-check:checked + .user-type-card.btn-outline-success .text-success {
    color: white !important;
}

.btn-check:checked + .user-type-card.btn-outline-success .text-muted {
    color: rgba(255,255,255,0.8) !important;
}

.user-type-card i {
    transition: all 0.3s ease;
}

.user-type-card:hover i {
    transform: scale(1.1);
}

.btn-check:focus + .user-type-card {
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}
</style>

<script th:inline="javascript">
    $(document).ready(function() {
        // Thymeleafì—ì„œ ì „ë‹¬ëœ ì—ëŸ¬ ë©”ì‹œì§€ ì²˜ë¦¬
        /*[CDATA[*/
        const memberDTOErrors = /*[[${#fields.hasErrors('memberDTO')} ? ${#fields.errors('memberDTO')} : null]]*/ null;
        if (memberDTOErrors) {
            memberDTOErrors.forEach(error => {
                if (error.field === 'userId') {
                    $('#userId').addClass('is-invalid');
                    $('#userIdFeedback').addClass('text-danger').text(error.defaultMessage);
                } else if (error.field === 'password') {
                    $('#password').addClass('is-invalid');
                } else if (error.field === 'passwordConfirm') {
                    $('#passwordConfirm').addClass('is-invalid');
                    $('#passwordMismatchFeedback').text(error.defaultMessage).show();
                } else if (error.field === 'name') {
                    $('#name').addClass('is-invalid');
                } else if (error.field === 'email') {
                    $('#email').addClass('is-invalid');
                } else if (error.field === 'phone') {
                    $('#phone').addClass('is-invalid');
                } else if (error.field === 'address') {
                    $('#address').addClass('is-invalid');
                }
            });
        }
        /*]]>*/


        // ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ/ìˆ¨ê¹€ í† ê¸€
        $('#togglePassword').click(function() {
            const passwordField = $('#password');
            const icon = $(this).find('i');

            if (passwordField.attr('type') === 'password') {
                passwordField.attr('type', 'text');
                icon.removeClass('fa-eye').addClass('fa-eye-slash');
            } else {
                passwordField.attr('type', 'password');
                icon.removeClass('fa-eye-slash').addClass('fa-eye');
            }
        });

        // ë¹„ë°€ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬ ë° ì¼ì¹˜ ì—¬ë¶€ ì‹¤ì‹œê°„ í™•ì¸
        const passwordInput = $('#password');
        const passwordConfirmInput = $('#passwordConfirm');
        const passwordMismatchFeedback = $('#passwordMismatchFeedback');
        
        // ë¹„ë°€ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬ ì •ê·œì‹ (8-20ìì˜ ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ì 1ê°œ ì´ìƒ)
        const passwordPattern = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,20}$/;
        
        function validatePassword() {
            const password = passwordInput.val();
            
            if (password === '') {
                passwordInput.removeClass('is-invalid').removeClass('is-valid');
                return false;
            }
            
            if (passwordPattern.test(password)) {
                passwordInput.removeClass('is-invalid').addClass('is-valid');
                return true;
            } else {
                passwordInput.removeClass('is-valid').addClass('is-invalid');
                return false;
            }
        }

        function checkPasswordMatch() {
            const isPasswordValid = validatePassword();
            
            if (passwordConfirmInput.val() === '') { // í™•ì¸ë€ì´ ë¹„ì–´ìˆìœ¼ë©´ ì˜¤ë¥˜ ë©”ì‹œì§€ ìˆ¨ê¹€
                passwordMismatchFeedback.hide();
                passwordConfirmInput.removeClass('is-invalid').removeClass('is-valid');
                return;
            }
            
            if (passwordInput.val() !== passwordConfirmInput.val()) {
                passwordMismatchFeedback.text('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.').show();
                passwordConfirmInput.addClass('is-invalid').removeClass('is-valid');
            } else if (isPasswordValid) {
                passwordMismatchFeedback.hide();
                passwordConfirmInput.removeClass('is-invalid').addClass('is-valid');
            } else {
                passwordMismatchFeedback.hide();
                passwordConfirmInput.removeClass('is-invalid').removeClass('is-valid');
            }
        }

        passwordInput.on('keyup blur', function() {
            validatePassword();
            checkPasswordMatch();
        });
        passwordConfirmInput.on('keyup blur', checkPasswordMatch);

        // íšŒì› ìœ í˜•ì— ë”°ë¥¸ ì‹œì„¤ ì •ë³´ í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€
        $('input[name="role"]').change(function() {
            if ($(this).val() === 'FACILITY') {
                $('#facilityFields').show();
                // ì‹œì„¤íšŒì› í•„ìˆ˜ í•„ë“œ required ì†ì„± ì¶”ê°€
                $('#facilityName, #facilityType, #facilityPhone, #facilityAddress').attr('required', true);
            } else {
                $('#facilityFields').hide();
                // ì¼ë°˜íšŒì›ì¼ ë•Œ ì‹œì„¤ í•„ë“œ required ì†ì„± ì œê±°
                $('#facilityName, #facilityType, #facilityPhone, #facilityAddress').removeAttr('required');
                // ì§€ë„ ë¯¸ë¦¬ë³´ê¸° ìˆ¨ê¸°ê¸°
                $('#mapPreviewContainer').hide();
            }
            updateSubmitButtonState();
        });

        // ì•„ì´ë”” ì¤‘ë³µ ì²´í¬ (Ajax)
        const userIdInput = $('#userId');
        const userIdFeedback = $('#userIdFeedback');
        const joinSubmitButton = $('#joinSubmitButton');
        let isUserIdAvailable = false; // ì•„ì´ë”” ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ í”Œë˜ê·¸

        userIdInput.on('keyup blur', function() { // í‚¤ë¥¼ ëˆ„ë¥´ê±°ë‚˜ í¬ì»¤ìŠ¤ë¥¼ ìƒì—ˆì„ ë•Œ ì²´í¬
            const userId = $(this).val();
            if (userId.length >= 4) { // ìµœì†Œ ê¸¸ì´ ì´ìƒì¼ ë•Œë§Œ ì²´í¬
                $.ajax({
                    url: '/member/checkUserId',
                    type: 'POST',
                    data: { userId: userId },
                    success: function(response) {
                        if (response.isDuplicate) {
                            userIdFeedback.removeClass('text-success').addClass('text-danger').text(response.message);
                            userIdInput.addClass('is-invalid').removeClass('is-valid');
                            isUserIdAvailable = false;
                        } else {
                            userIdFeedback.removeClass('text-danger').addClass('text-success').text(response.message);
                            userIdInput.addClass('is-valid').removeClass('is-invalid');
                            isUserIdAvailable = true;
                        }
                        updateSubmitButtonState();
                    },
                    error: function() {
                        userIdFeedback.removeClass('text-success').addClass('text-danger').text('ì•„ì´ë”” ì¤‘ë³µ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                        userIdInput.addClass('is-invalid').removeClass('is-valid');
                        isUserIdAvailable = false;
                        updateSubmitButtonState();
                    }
                });
            } else if (userId.length === 0) {
                userIdFeedback.text('');
                userIdInput.removeClass('is-invalid').removeClass('is-valid');
                isUserIdAvailable = false;
                updateSubmitButtonState();
            } else {
                userIdFeedback.removeClass('text-success').addClass('text-danger').text('ì•„ì´ë””ëŠ” 4ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
                userIdInput.addClass('is-invalid').removeClass('is-valid');
                isUserIdAvailable = false;
                updateSubmitButtonState();
            }
        });

        // í¼ ì œì¶œ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™” í•¨ìˆ˜
        function updateSubmitButtonState() {
            const password = passwordInput.val();
            const isPasswordValid = passwordPattern.test(password);
            const isPasswordMatch = (password === passwordConfirmInput.val() && password !== '');
            const isNameValid = ($('#name').val() !== '');
            
            // ì‹œì„¤íšŒì›ì¸ ê²½ìš° ì¶”ê°€ í•„ë“œ ì²´í¬
            let isFacilityFieldsValid = true;
            if ($('input[name="role"]:checked').val() === 'FACILITY') {
                const facilityName = $('#facilityName').val();
                const facilityType = $('#facilityType').val();
                const facilityPhone = $('#facilityPhone').val();
                const facilityAddress = $('#facilityAddress').val();
                const latitude = $('#latitude').val();
                const longitude = $('#longitude').val();
                isFacilityFieldsValid = facilityName !== '' && facilityType !== '' && facilityPhone !== '' && 
                                       facilityAddress !== '' && latitude !== '' && longitude !== '';
            }

            // ëª¨ë“  í•„ìˆ˜ í•„ë“œê°€ ì±„ì›Œì§€ê³ , ì•„ì´ë”” ì‚¬ìš© ê°€ëŠ¥í•˜ë©°, ë¹„ë°€ë²ˆí˜¸ê°€ ìœ íš¨í•˜ê³  ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
            if (isUserIdAvailable && isPasswordValid && isPasswordMatch && isNameValid && isFacilityFieldsValid) {
                joinSubmitButton.prop('disabled', false);
            } else {
                joinSubmitButton.prop('disabled', true);
            }
        }

        // íœ´ëŒ€í° ë²ˆí˜¸ ìë™ í¬ë§·íŒ… í•¨ìˆ˜ (010-1234-5678)
        function formatMobileNumber(phoneNumber) {
            // ìˆ«ìë§Œ ì¶”ì¶œ
            const numbers = phoneNumber.replace(/[^\d]/g, '');
            
            // ê¸¸ì´ì— ë”°ë¼ í¬ë§·íŒ…
            if (numbers.length <= 3) {
                return numbers;
            } else if (numbers.length <= 7) {
                return numbers.slice(0, 3) + '-' + numbers.slice(3);
            } else {
                return numbers.slice(0, 3) + '-' + numbers.slice(3, 7) + '-' + numbers.slice(7, 11);
            }
        }

        // ì‹œì„¤ ì „í™”ë²ˆí˜¸ ìë™ í¬ë§·íŒ… í•¨ìˆ˜ (ì¼ë°˜ì „í™” + íœ´ëŒ€í° ì§€ì›)
        function formatFacilityPhone(phoneNumber) {
            // ìˆ«ìë§Œ ì¶”ì¶œ
            const numbers = phoneNumber.replace(/[^\d]/g, '');
            
            // íœ´ëŒ€í° ë²ˆí˜¸ì¸ ê²½ìš° (01ë¡œ ì‹œì‘)
            if (numbers.startsWith('01')) {
                if (numbers.length <= 3) {
                    return numbers;
                } else if (numbers.length <= 7) {
                    return numbers.slice(0, 3) + '-' + numbers.slice(3);
                } else {
                    return numbers.slice(0, 3) + '-' + numbers.slice(3, 7) + '-' + numbers.slice(7, 11);
                }
            }
            // ì¼ë°˜ ì „í™”ë²ˆí˜¸ì¸ ê²½ìš°
            else {
                // ì„œìš¸ (02)
                if (numbers.startsWith('02')) {
                    if (numbers.length <= 2) {
                        return numbers;
                    } else if (numbers.length <= 5) {
                        return numbers.slice(0, 2) + '-' + numbers.slice(2);
                    } else if (numbers.length <= 6) {
                        return numbers.slice(0, 2) + '-' + numbers.slice(2, 5) + '-' + numbers.slice(5);
                    } else {
                        return numbers.slice(0, 2) + '-' + numbers.slice(2, 6) + '-' + numbers.slice(6, 10);
                    }
                }
                // 3ìë¦¬ êµ­ë²ˆ ì§€ì—­ (031, 032, 033, 041, 042, 043, 051, 052, 053, 054, 055, 061, 062, 063, 064)
                else if (numbers.length >= 3 && /^(03[1-3]|04[1-3]|05[1-5]|06[1-4]|070)/.test(numbers)) {
                    if (numbers.length <= 3) {
                        return numbers;
                    } else if (numbers.length <= 6) {
                        return numbers.slice(0, 3) + '-' + numbers.slice(3);
                    } else if (numbers.length <= 7) {
                        return numbers.slice(0, 3) + '-' + numbers.slice(3, 6) + '-' + numbers.slice(6);
                    } else {
                        // 3-3-4 í˜•ì‹: 031-234-5678
                        return numbers.slice(0, 3) + '-' + numbers.slice(3, 6) + '-' + numbers.slice(6, 10);
                    }
                }
                // ê¸°íƒ€ ê²½ìš° (ì¼ë°˜ì ì¸ 3-3-4 ë˜ëŠ” 3-4-4 íŒ¨í„´ìœ¼ë¡œ ì²˜ë¦¬)
                else {
                    if (numbers.length <= 3) {
                        return numbers;
                    } else if (numbers.length <= 6) {
                        return numbers.slice(0, 3) + '-' + numbers.slice(3);
                    } else if (numbers.length <= 7) {
                        return numbers.slice(0, 3) + '-' + numbers.slice(3, 6) + '-' + numbers.slice(6);
                    } else {
                        // 3-3-4 í˜•ì‹ìœ¼ë¡œ ì²˜ë¦¬ (ì§€ì—­ë²ˆí˜¸ ê¸°ë³¸ê°’)
                        return numbers.slice(0, 3) + '-' + numbers.slice(3, 6) + '-' + numbers.slice(6, 10);
                    }
                }
            }
        }

        // íœ´ëŒ€í° ë²ˆí˜¸ ì…ë ¥ ì‹œ ìë™ í¬ë§·íŒ… ì ìš©
        $('#phone').on('input', function() {
            const formattedPhone = formatMobileNumber($(this).val());
            $(this).val(formattedPhone);
        });

        // ì‹œì„¤ ì „í™”ë²ˆí˜¸ ì…ë ¥ ì‹œ ìë™ í¬ë§·íŒ… ì ìš©
        $('#facilityPhone').on('input', function() {
            const formattedPhone = formatFacilityPhone($(this).val());
            $(this).val(formattedPhone);
        });

        // ìš´ì˜ì‹œê°„ ì„ íƒ ì²˜ë¦¬
        $('input[name="operatingType"]').change(function() {
            const operatingHours = $('#operatingHours');
            if ($(this).val() === '24ì‹œê°„') {
                $('#customTimeSection').hide();
                operatingHours.val('24ì‹œê°„ ìš´ì˜');
            } else {
                $('#customTimeSection').show();
                updateOperatingHours();
            }
        });

        // ì‹œì‘/ì¢…ë£Œ ì‹œê°„ ë³€ê²½ ì‹œ ìš´ì˜ì‹œê°„ ì—…ë°ì´íŠ¸
        $('#startTime, #endTime').change(function() {
            if ($('#operatingCustom').is(':checked')) {
                updateOperatingHours();
            }
        });

        function updateOperatingHours() {
            const startTime = $('#startTime').val();
            const endTime = $('#endTime').val();
            $('#operatingHours').val(startTime + '-' + endTime);
        }

        // ì´ˆê¸° ë¡œë“œ ì‹œ ë° ëª¨ë“  ì…ë ¥ í•„ë“œ ë³€ê²½ ì‹œ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        $('input, select, textarea').on('keyup blur change', updateSubmitButtonState);
        updateSubmitButtonState(); // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ìƒíƒœ ì„¤ì •

        // í¼ ì œì¶œ ì „ ìµœì¢… ìœ íš¨ì„± ê²€ì‚¬
        $('#joinForm').submit(function(event) {
            // ë¹„ë°€ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
            const password = passwordInput.val();
            if (!passwordPattern.test(password)) {
                passwordInput.addClass('is-invalid');
                event.preventDefault();
                return false;
            }

            // ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜ ì‹œ ì œì¶œ ë°©ì§€
            if (password !== passwordConfirmInput.val()) {
                passwordMismatchFeedback.text('ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.').show();
                passwordConfirmInput.addClass('is-invalid');
                event.preventDefault();
                return false;
            }

            // ì•„ì´ë”” ì¤‘ë³µ í™•ì¸ì´ ì™„ë£Œë˜ì§€ ì•Šì•˜ê±°ë‚˜ ì¤‘ë³µì¸ ê²½ìš° ì œì¶œ ë°©ì§€
            if (!isUserIdAvailable) {
                userIdInput.addClass('is-invalid');
                userIdFeedback.removeClass('text-success').addClass('text-danger').text('ì•„ì´ë”” ì¤‘ë³µ í™•ì¸ì´ í•„ìš”í•˜ê±°ë‚˜, ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤.');
                event.preventDefault();
                return false;
            }

            // ì´ë¦„ì´ ë¹„ì–´ìˆëŠ” ê²½ìš° ì œì¶œ ë°©ì§€
            if ($('#name').val().trim() === '') {
                $('#name').addClass('is-invalid');
                event.preventDefault();
                return false;
            }

            // ëª¨ë“  ìœ íš¨ì„± ê²€ì‚¬ í†µê³¼ ì‹œ í¼ ì œì¶œ í—ˆìš©
            return true;
        });
    });

    document.addEventListener('DOMContentLoaded', function() {
        const userRoleRadio = document.getElementById('roleUser');
        const facilityRoleRadio = document.getElementById('roleFacility');
        const addressAsterisk = document.getElementById('address-required-asterisk');
        const addressInput = document.getElementById('address');

        function updateAddressField() {
            if (facilityRoleRadio.checked) {
                addressAsterisk.style.display = 'inline';
                addressInput.placeholder = 'ì‹œì„¤ì˜ ì •í™•í•œ ì£¼ì†Œë¥¼ ê²€ìƒ‰í•˜ì„¸ìš” (í•„ìˆ˜)';
            } else {
                addressAsterisk.style.display = 'none';
                addressInput.placeholder = 'ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš” (ì„ íƒì‚¬í•­)';
            }
        }

        userRoleRadio.addEventListener('change', updateAddressField);
        facilityRoleRadio.addEventListener('change', updateAddressField);

        updateAddressField();
    });

</script>
</body>
</html>
````

## File: src/main/resources/application.yml
````yaml
# ì„œë²„ ì„¤ì •
server:
  port: 8080
  servlet:
    context-path: /
    encoding:
      charset: UTF-8
      enabled: true
      force: true

# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
spring:
  jackson:
    serialization:
      write-dates-as-timestamps: false
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: ${DB_URL:jdbc:mysql://localhost:3306/carelink?useSSL=false&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=UTF-8}
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:mysql}
    hikari:
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      maximum-pool-size: 10
      minimum-idle: 5
      pool-name: CareLink-HikariCP
      auto-commit: false
      transaction-isolation: TRANSACTION_READ_COMMITTED

  # Thymeleaf ì„¤ì •
  thymeleaf:
    prefix: classpath:/templates/
    suffix: .html
    mode: HTML
    encoding: UTF-8
    cache: false  # ê°œë°œ ë‹¨ê³„ì—ì„œëŠ” ìºì‹œ ë¹„í™œì„±í™”
    
  # íŒŒì¼ ì—…ë¡œë“œ ì„¤ì •
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB

# MyBatis ì„¤ì •
mybatis:
  type-aliases-package: com.example.carelink.dto
  mapper-locations: classpath:mapper/*.xml
  configuration:
    map-underscore-to-camel-case: true
    jdbc-type-for-null: varchar
    default-fetch-size: 100
    default-statement-timeout: 30

# ë¡œê¹… ì„¤ì •
logging:
  level:
    root: INFO # ê¸°ë³¸ ë£¨íŠ¸ ë¡œê·¸ ë ˆë²¨ (í•„ìš”ì‹œ DEBUGë¡œ ë³€ê²½)
    com.example.carelink: DEBUG # ë³¸ì¸ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒ¨í‚¤ì§€ ë¡œê·¸ ë ˆë²¨ì„ DEBUGë¡œ ë†’ì…ë‹ˆë‹¤.
    com.example.carelink.dao: DEBUG
    org.springframework.web: DEBUG # ì›¹ ê´€ë ¨ ë¡œê·¸ë¥¼ ìì„¸íˆ ë´…ë‹ˆë‹¤.
    org.springframework.jdbc: DEBUG
    org.mybatis: DEBUG # MyBatis ê´€ë ¨ ë¡œê·¸ë¥¼ ìì„¸íˆ ë´…ë‹ˆë‹¤.
    org.apache.ibatis: DEBUG
    org.springframework.transaction: DEBUG
    java.sql: DEBUG # SQL ì¿¼ë¦¬ë¥¼ ì§ì ‘ì ìœ¼ë¡œ ë´…ë‹ˆë‹¤. (MyBatisê°€ SQLì„ ì½˜ì†”ì— ì¶œë ¥í•˜ë„ë¡ ì„¤ì •í–ˆë‹¤ë©´)
    jdbc.sqltiming: INFO # ì‹¤ì œ ì¿¼ë¦¬ ì‹¤í–‰ ì‹œê°„ ë“±ì„ ë³´ë ¤ë©´ INFO (í˜¹ì€ DEBUG)
    com.zaxxer.hikari: DEBUG # DB ì»¤ë„¥ì…˜ í’€ ê´€ë ¨

# íŒŒì¼ ì—…ë¡œë“œ ê²½ë¡œ ì„¤ì • (ë¡œì»¬ ë””ë ‰í† ë¦¬ - í”„ë¡œì íŠ¸ì™€ ë¶„ë¦¬)
file:
  upload-dir:
    facility: C:/carelink-uploads/facility/
    profile: C:/carelink-uploads/profile/
    temp: C:/carelink-uploads/temp/

# SpringDoc OpenAPI ì„¤ì •
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: method
  show-actuator: true
  default-consumes-media-type: application/json
  default-produces-media-type: application/json
  paths-to-match:
    - /api/**
  packages-to-scan:
    - com.lightcare.controller

# ì™¸ë¶€ API í‚¤ ì„¤ì •
api:
  kakao:
    app-key: ${KAKAO_APP_KEY:b97b58672807a40c122a5deed8a98ea4}
````

## File: src/main/resources/mapper/facilityMapper.xml
````xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.FacilityMapper">

    <resultMap id="facilityResultMap" type="com.example.carelink.dto.FacilityDTO">
        <id property="facilityId" column="facility_id"/>
        <result property="facilityName" column="facility_name"/>
        <result property="facilityType" column="facility_type"/>
        <result property="address" column="address"/>
        <result property="detailAddress" column="detail_address"/>
        <result property="phone" column="phone"/>
        <result property="latitude" column="latitude"/>
        <result property="longitude" column="longitude"/>
        <result property="description" column="description"/>
        <result property="facilityImage" column="facility_image"/>
        <result property="facilityImageAltText" column="facility_image_alt_text"/>
        <result property="homepage" column="homepage"/>
        <result property="capacity" column="capacity"/>
        <result property="currentOccupancy" column="current_occupancy"/>
        <result property="operatingHours" column="operating_hours"/>
        <result property="features" column="features"/>
        <result property="averageRating" column="average_rating"/>
        <result property="reviewCount" column="review_count"/>
        <result property="gradeRating" column="grade_rating"/>
        <result property="registeredMemberId" column="registered_member_id"/>
        <result property="registeredMemberName" column="registered_member_name"/>

        <result property="isApproved" column="is_approved"/>
        <result property="approvalStatus" column="approval_status"/>
    </resultMap>

    <select id="searchFacilities" resultMap="facilityResultMap">
        SELECT f.*, m.name as registered_member_name
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        <where>
            f.is_deleted = false
            AND f.is_approved = true
            <if test="facilityName != null and facilityName != ''">
                AND f.facility_name LIKE CONCAT('%', #{facilityName}, '%')
            </if>
            <if test="facilityType != null and facilityType != ''">
                AND f.facility_type = #{facilityType}
            </if>
            <if test="address != null and address != ''">
                AND f.address LIKE CONCAT(#{address}, '%')
            </if>

            <if test="swLat != null and swLng != null and neLat != null and neLng != null">
                AND (f.latitude BETWEEN #{swLat} AND #{neLat})
                AND (f.longitude BETWEEN #{swLng} AND #{neLng})
            </if>
        </where>
        ORDER BY f.created_at DESC
    </select>

    <select id="getFacilityById" resultType="com.example.carelink.dto.FacilityDTO">
        SELECT 
            f.facility_id,
            f.facility_name,
            f.facility_type,
            f.address,
            f.phone,
            f.latitude,
            f.longitude,
            f.description,
            f.facility_image,
            f.homepage,
            f.capacity,
            f.current_occupancy,
            f.operating_hours,
            f.features,
            f.average_rating,
            f.review_count,
            f.grade_rating,
            f.registered_member_id,
            m.name as registered_member_name,
            f.is_deleted,
            f.is_approved,
            CASE 
                WHEN f.is_deleted = true THEN 'ì‚­ì œë¨'
                WHEN f.is_approved = false THEN 'ìŠ¹ì¸ëŒ€ê¸°'
                ELSE 'ì •ìƒ'
            END as status
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        WHERE f.facility_id = #{facilityId}
    </select>

    <select id="getAllFacilities" resultMap="facilityResultMap">
        SELECT f.*, m.name as registered_member_name
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        WHERE f.is_deleted = false
        AND f.is_approved = true
        ORDER BY f.created_at DESC
    </select>

    <insert id="insertFacility" parameterType="com.example.carelink.dto.FacilityDTO" useGeneratedKeys="true" keyProperty="facilityId">
        INSERT INTO facility (
            facility_name, facility_type, address, detail_address, phone,
            latitude, longitude, description, facility_image, facility_image_alt_text, homepage,
            capacity, current_occupancy, operating_hours, features,
            average_rating, review_count, registered_member_id,
            is_approved, approval_status
        ) VALUES (
                     #{facilityName}, #{facilityType}, #{address}, #{detailAddress}, #{phone},
                     #{latitude}, #{longitude}, #{description}, #{facilityImage}, #{facilityImageAltText}, #{homepage},
                     #{capacity}, #{currentOccupancy}, #{operatingHours}, #{features},
                     #{averageRating}, #{reviewCount}, #{registeredMemberId},
                     #{isApproved}, #{approvalStatus}
                 )
    </insert>

    <update id="updateFacility" parameterType="com.example.carelink.dto.FacilityDTO">
        UPDATE facility
        SET
            facility_name = #{facilityName},
            facility_type = #{facilityType},
            address = #{address},
            detail_address = #{detailAddress},
            phone = #{phone},
            latitude = #{latitude},
            longitude = #{longitude},
            description = #{description},
            facility_image = #{facilityImage},
            facility_image_alt_text = #{facilityImageAltText},
            homepage = #{homepage},
            capacity = #{capacity},
            current_occupancy = #{currentOccupancy},
            operating_hours = #{operatingHours},
            features = #{features},
            average_rating = #{averageRating},
            review_count = #{reviewCount},
            registered_member_id = #{registeredMemberId},
            is_approved = #{isApproved},
            approval_status = #{approvalStatus},
            updated_at = NOW()
        WHERE facility_id = #{facilityId}
    </update>

    <delete id="deleteFacility">
        DELETE FROM facility WHERE facility_id = #{facilityId}
    </delete>

    <select id="countFacilitiesByRegion" resultType="int">
        SELECT COUNT(*)
        FROM facility
        WHERE address LIKE CONCAT(#{region}, '%')
    </select>

    <!-- ì „ì²´ ì‹œì„¤ ìˆ˜ ì¡°íšŒ (í†µê³„ìš©) -->
    <select id="getFacilityCount" resultType="int">
        SELECT COUNT(*) 
        FROM facility 
        WHERE is_deleted = false
        AND is_approved = true
    </select>

    <!-- í™œì„±í™”ëœ ëª¨ë“  ì‹œì„¤ ëª©ë¡ ì¡°íšŒ (ë¦¬ë·° ì‘ì„±ìš©) -->
    <select id="getAllActiveFacilities" resultType="com.example.carelink.dto.FacilityDTO">
        SELECT 
            f.facility_id,
            f.facility_name,
            f.facility_type,
            f.address,
            f.phone,
            f.average_rating,
            f.review_count,
            f.registered_member_id,
            m.name as registered_member_name,
            f.is_deleted,
            f.is_approved,
            CASE 
                WHEN f.is_deleted = true THEN 'ì‚­ì œë¨'
                WHEN f.is_approved = false THEN 'ìŠ¹ì¸ëŒ€ê¸°'
                ELSE 'ì •ìƒ'
            END as status
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        WHERE f.is_deleted = false 
        AND f.is_approved = true
        ORDER BY f.facility_name ASC
    </select>

    <!-- íšŒì› IDë¡œ ì‹œì„¤ ì‚­ì œ (íšŒì› íƒˆí‡´ ì‹œ ì‚¬ìš©) -->
    <delete id="deleteByMemberId" parameterType="long">
        DELETE FROM facility WHERE registered_member_id = #{memberId}
    </delete>

    <!-- íšŒì› IDë¡œ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ -->
    <select id="getFacilitiesByMemberId" parameterType="long" resultType="FacilityDTO">
        SELECT 
            facility_id as facilityId,
            facility_name as facilityName,
            facility_type as facilityType,
            address,
            detail_address as detailAddress,
            phone,
            latitude,
            longitude,
            description,
            facility_image as facilityImage,
            homepage,
            capacity,
            current_occupancy as currentOccupancy,
            operating_hours as operatingHours,
            features,
            average_rating as averageRating,
            review_count as reviewCount,
            grade_rating as gradeRating,
            registered_member_id as registeredMemberId,
            is_approved as isApproved,
            approval_status as approvalStatus,
            created_at as createdAt,
            updated_at as updatedAt,
            is_deleted as isDeleted
        FROM facility
        WHERE registered_member_id = #{memberId} AND is_deleted = false
        ORDER BY created_at DESC
    </select>

    <!-- íšŒì› IDë¡œ ì‹œì„¤ ì¡°íšŒ (ì²« ë²ˆì§¸ ì‹œì„¤ë§Œ) -->
    <select id="getFacilityByMemberId" parameterType="long" resultType="FacilityDTO">
        SELECT 
            facility_id as facilityId,
            facility_name as facilityName,
            facility_type as facilityType,
            address,
            detail_address as detailAddress,
            phone,
            latitude,
            longitude,
            description,
            facility_image as facilityImage,
            homepage,
            capacity,
            current_occupancy as currentOccupancy,
            operating_hours as operatingHours,
            features,
            average_rating as averageRating,
            review_count as reviewCount,
            grade_rating as gradeRating,
            registered_member_id as registeredMemberId,
            is_approved as isApproved,
            approval_status as approvalStatus,
            created_at as createdAt,
            updated_at as updatedAt,
            is_deleted as isDeleted
        FROM facility
        WHERE registered_member_id = #{memberId} AND is_deleted = false
        ORDER BY created_at DESC
        LIMIT 1
    </select>

    <!-- ================== ê´€ë¦¬ììš© ì¿¼ë¦¬ë“¤ ================== -->
    
    <!-- ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ (ê´€ë¦¬ììš©) -->
    <select id="getFacilitiesByApprovalStatus" parameterType="string" resultType="FacilityDTO">
        SELECT 
            f.facility_id,
            f.facility_name,
            f.facility_type,
            f.address,
            f.detail_address,
            f.phone,
            f.description,
            f.homepage,
            f.capacity,
            f.operating_hours,
            f.features,
            f.facility_image,
            f.latitude,
            f.longitude,
            f.approval_status,
            f.registered_member_id,
            f.created_at,
            f.updated_at,
            m.user_id as registeredUserName,
            m.name as registeredMemberName
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        WHERE f.is_deleted = false
        <if test="approvalStatus != null and approvalStatus != ''">
            AND f.approval_status = #{approvalStatus}
        </if>
        ORDER BY f.created_at DESC
    </select>

    <!-- ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ (ê´€ë¦¬ììš©) -->
    <update id="updateFacilityApprovalStatus">
        UPDATE facility 
        SET 
            approval_status = #{approvalStatus},
            is_approved = (#{approvalStatus} = 'APPROVED'),
            <if test="rejectionReason != null">
            description = CONCAT(COALESCE(description, ''), CHAR(10), 'ê±°ë¶€ì‚¬ìœ : ', #{rejectionReason}),
            </if>
            updated_at = NOW()
        WHERE facility_id = #{facilityId}
    </update>

    <!-- ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ìˆ˜ ì¡°íšŒ (ê´€ë¦¬ììš©) -->
    <select id="countFacilitiesByStatus" parameterType="string" resultType="int">
        SELECT COUNT(*) 
        FROM facility 
        WHERE is_deleted = false 
        AND approval_status = #{approvalStatus}
    </select>
    
    <!-- ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ -->
    <update id="updateFacilityMainImage">
        UPDATE facility 
        SET 
            facility_image = #{mainImagePath},
            image_count = #{imageCount},
            updated_at = NOW()
        WHERE facility_id = #{facilityId}
    </update>

</mapper>
````

## File: src/main/java/com/example/carelink/controller/FacilityController.java
````java
package com.example.carelink.controller;

import com.example.carelink.dto.FacilityDTO;
import com.example.carelink.dto.FacilityImageDTO;
import com.example.carelink.dto.ReviewDTO;
import com.example.carelink.service.FacilityService;
import com.example.carelink.service.ReviewService;
import com.example.carelink.service.FacilityImageService;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.context.annotation.Bean;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.common.Constants;
import org.springframework.beans.factory.annotation.Value;
import javax.servlet.http.HttpSession;

import java.util.List;
import java.util.ArrayList; // ArrayListë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì¶”ê°€ëœ import ë¬¸
import java.util.Map;
import java.util.HashMap;

@Controller
@RequestMapping("/facility")
@RequiredArgsConstructor
@Slf4j
public class FacilityController {

    private final FacilityService facilityService;
    private final ReviewService reviewService;
    private final FacilityImageService facilityImageService;
    
    @Value("${api.kakao.app-key}")
    private String kakaoAppKey;

    /**
     * Jackson ObjectMapperì— Java 8 ë‚ ì§œ/ì‹œê°„ ëª¨ë“ˆì„ ë“±ë¡í•©ë‹ˆë‹¤.
     * ì´ ë©”ì„œë“œëŠ” Spring ì»¨í…ìŠ¤íŠ¸ì— ObjectMapper ë¹ˆì„ ë“±ë¡í•˜ì—¬
     * LocalDateTime ì§ë ¬í™” ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤.
     */
    @Bean
    public ObjectMapper objectMapper() {
        ObjectMapper mapper = new ObjectMapper();
        mapper.registerModule(new JavaTimeModule());
        return mapper;
    }

    /**
     * ì‹œì„¤ ìƒì„¸ ì •ë³´ API (ë‚´ ì‹œì„¤ ê´€ë¦¬ìš©)
     */
    @GetMapping("/facility-info/{facilityId}")
    @ResponseBody
    public Map<String, Object> getFacilityInfo(@PathVariable Long facilityId, HttpSession session) {
        Map<String, Object> result = new HashMap<>();
        
        try {
            MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (member == null) {
                result.put("success", false);
                result.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return result;
            }
            
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                result.put("success", false);
                result.put("message", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            
            // ê¶Œí•œ í™•ì¸ (ì‹œì„¤ ì†Œìœ ì ë˜ëŠ” ê´€ë¦¬ìë§Œ)
            if (!facility.getRegisteredMemberId().equals(member.getMemberId()) 
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                result.put("success", false);
                result.put("message", "í•´ë‹¹ ì‹œì„¤ ì •ë³´ë¥¼ ì¡°íšŒí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            
            result.put("success", true);
            result.put("facility", facility);
            
            log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ API ì¡°íšŒ ì™„ë£Œ: facilityId={}, memberId={}", facilityId, member.getMemberId());
            
        } catch (Exception e) {
            log.error("ì‹œì„¤ ìƒì„¸ ì •ë³´ API ì¡°íšŒ ì¤‘ ì˜¤ë¥˜: facilityId={}", facilityId, e);
            result.put("success", false);
            result.put("message", "ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        
        return result;
    }


    /**
     * ë‚´ ì‹œì„¤ì—ì„œ ì‹œì„¤ ìˆ˜ì • í˜ì´ì§€ë¡œ ì´ë™
     */
    @GetMapping("/manage/{facilityId}/edit")
    public String redirectToEdit(@PathVariable Long facilityId) {
        log.info("ë‚´ ì‹œì„¤ì—ì„œ ì‹œì„¤ ìˆ˜ì •ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸: facilityId={}", facilityId);
        return "redirect:/facility/edit/" + facilityId;
    }

    /**
     * ì‹œì„¤ ê²€ìƒ‰ í˜ì´ì§€ ë° ê²€ìƒ‰ ê²°ê³¼ ì¡°íšŒ
     */
    @GetMapping("/search")
    public String searchFacilities(
            @RequestParam(value = "facilityName", required = false) String facilityName,
            @RequestParam(value = "region", required = false) String region,
            @RequestParam(value = "facilityType", required = false) String facilityType,
            @RequestParam(value = "gradeRating", required = false) String gradeRating,
            Model model
    ) {
        log.info("ì‹œì„¤ ê²€ìƒ‰ í˜ì´ì§€ ì ‘ì† - facilityName: {}, region: {}, facilityType: {}, gradeRating: {}",
                facilityName, region, facilityType, gradeRating);

        List<FacilityDTO> facilityList = new ArrayList<>();
        
        try {
            // ë¹ˆ ë¬¸ìì—´ì„ nullë¡œ ë³€í™˜
            facilityName = (facilityName != null && facilityName.trim().isEmpty()) ? null : facilityName;
            region = (region != null && region.trim().isEmpty()) ? null : region;
            facilityType = (facilityType != null && facilityType.trim().isEmpty()) ? null : facilityType;

            FacilityDTO searchCondition = new FacilityDTO();
            searchCondition.setFacilityName(facilityName != null ? facilityName.trim() : null);
            searchCondition.setFacilityType(facilityType);
            searchCondition.setAddress(region); // ì§€ì—­ ê²€ìƒ‰ìš©

            // DTO ê°ì²´ë¥¼ ì„œë¹„ìŠ¤ ë©”ì„œë“œë¡œ ì „ë‹¬í•˜ì—¬ ê²€ìƒ‰ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
            facilityList = facilityService.searchFacilities(searchCondition);

            // ê²€ìƒ‰ ê²°ê³¼ê°€ nullì¼ ê²½ìš° ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì´ˆê¸°í™”í•˜ì—¬ Thymeleaf ì˜¤ë¥˜ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.
            if (facilityList == null) {
                facilityList = new ArrayList<>();
            }
            
        } catch (Exception e) {
            log.error("ì‹œì„¤ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            facilityList = new ArrayList<>();
        }

        // ê²€ìƒ‰ ê²°ê³¼ë¥¼ ëª¨ë¸ì— ì¶”ê°€í•©ë‹ˆë‹¤.
        model.addAttribute("facilityList", facilityList);
        model.addAttribute("facilityName", facilityName);
        model.addAttribute("region", region);
        model.addAttribute("facilityType", facilityType);
        model.addAttribute("gradeRating", gradeRating);
        
        // ì¹´ì¹´ì˜¤ë§µ API í‚¤ë¥¼ ëª¨ë¸ì— ì¶”ê°€
        model.addAttribute("KAKAO_APP_KEY", kakaoAppKey);

        log.info("ê²€ìƒ‰ëœ ì‹œì„¤ ìˆ˜: {}", facilityList.size());

        // 'search.html' í…œí”Œë¦¿ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
        return "facility/search";
    }

    /**
     * ì‹œì„¤ ìƒì„¸ ì •ë³´ í˜ì´ì§€
     */
    @GetMapping("/detail/{facilityId}")
    public String getFacilityDetail(@PathVariable Long facilityId, Model model, HttpSession session) {
        log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ í˜ì´ì§€ ì ‘ì† - facilityId: {}", facilityId);
        
        try {
            // ì‹œì„¤ ì •ë³´ ì¡°íšŒ
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                model.addAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/search";
            }
            
            // í•´ë‹¹ ì‹œì„¤ì˜ ë¦¬ë·° ëª©ë¡ ì¡°íšŒ (ìµœê·¼ 5ê°œ)
            List<ReviewDTO> recentReviews = reviewService.getReviewsByFacilityId(facilityId);
            if (recentReviews.size() > 5) {
                recentReviews = recentReviews.subList(0, 5);
            }
            
            // ì‹œì„¤ì˜ í‰ê·  í‰ì  ì¡°íšŒ
            Double averageRating = reviewService.getAverageRating(facilityId);
            
            // ì„¸ì…˜ì—ì„œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ (ê´€ë¦¬ì ê¶Œí•œ ì²´í¬ìš©)
            MemberDTO sessionMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            boolean isAdmin = sessionMember != null && "ADMIN".equals(sessionMember.getRole());
            boolean isOwner = sessionMember != null && facility.getRegisteredMemberId() != null && 
                             facility.getRegisteredMemberId().equals(sessionMember.getMemberId());
            
            model.addAttribute("facility", facility);
            model.addAttribute("recentReviews", recentReviews);
            model.addAttribute("averageRating", averageRating);
            model.addAttribute("reviewCount", recentReviews.size());
            model.addAttribute("pageTitle", facility.getFacilityName() + " ìƒì„¸ì •ë³´");
            model.addAttribute("sessionMember", sessionMember);
            model.addAttribute("isAdmin", isAdmin);
            model.addAttribute("isOwner", isOwner);
            
            log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì™„ë£Œ - facilityId: {}, ë¦¬ë·° ìˆ˜: {}, ê´€ë¦¬ì: {}, ì†Œìœ ì: {}", 
                    facilityId, recentReviews.size(), isAdmin, isOwner);
            
            return "facility/detail";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
            model.addAttribute("error", "ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/search";
        }
    }

    /**
     * ì‹œì„¤ ê´€ë¦¬ í˜ì´ì§€
     */
    @GetMapping("/manage")
    public String manageFacility(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        
        if (member == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        
        if (!Constants.MEMBER_ROLE_FACILITY.equals(member.getRole())) {
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ íšŒì›ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            return "redirect:/";
        }
        
        try {
            // íšŒì›ì˜ ëª¨ë“  ì‹œì„¤ ì •ë³´ ì¡°íšŒ
            List<FacilityDTO> facilities = facilityService.getFacilitiesByMemberId(member.getMemberId());
            
            // ê° ì‹œì„¤ë³„ êµ¬ì¸ê³µê³  ìˆ˜ ì¡°íšŒ (TODO: í–¥í›„ JobServiceì—ì„œ ì¡°íšŒ)
            // for (FacilityDTO facility : facilities) {
            //     int jobCount = jobService.getJobCountByFacilityId(facility.getFacilityId());
            //     facility.setJobCount(jobCount);
            // }
            
            model.addAttribute("facilities", facilities);
            model.addAttribute("facilityCount", facilities.size());
            log.info("ì‹œì„¤ ê´€ë¦¬ í˜ì´ì§€ ì ‘ê·¼: memberId={}, ì‹œì„¤ ìˆ˜={}", 
                    member.getMemberId(), facilities.size());
            
            return "facility/manage";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ê´€ë¦¬ í˜ì´ì§€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}", member.getMemberId(), e);
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/";
        }
    }

    /**
     * ì‹œì„¤ ìˆ˜ì • í˜ì´ì§€
     */
    @GetMapping("/edit/{facilityId}")
    public String editFacilityForm(@PathVariable Long facilityId, HttpSession session, 
                                   Model model, RedirectAttributes redirectAttributes) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        
        if (member == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        
        try {
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            
            if (facility == null) {
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            // ê¶Œí•œ í™•ì¸ (ì‹œì„¤ ì†Œìœ ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì • ê°€ëŠ¥)
            if (!facility.getRegisteredMemberId().equals(member.getMemberId()) 
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            model.addAttribute("facility", facility);
            log.info("ì‹œì„¤ ìˆ˜ì • í˜ì´ì§€ ì ‘ê·¼: facilityId={}, memberId={}", facilityId, member.getMemberId());
            
            return "facility/edit";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ìˆ˜ì • í˜ì´ì§€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/manage";
        }
    }

    /**
     * ì‹œì„¤ ìˆ˜ì • ì²˜ë¦¬
     */
    @PostMapping("/edit/{facilityId}")
    public String updateFacility(@PathVariable Long facilityId,
                                @ModelAttribute FacilityDTO facilityDTO,
                                @RequestParam(value = "facilityImageFile", required = false) MultipartFile facilityImageFile,
                                HttpSession session,
                                RedirectAttributes redirectAttributes) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        
        if (member == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        
        try {
            FacilityDTO existingFacility = facilityService.getFacilityById(facilityId);
            
            if (existingFacility == null) {
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            // ê¶Œí•œ í™•ì¸
            if (!existingFacility.getRegisteredMemberId().equals(member.getMemberId()) 
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            // ê¸°ë³¸ ì •ë³´ ìœ ì§€
            facilityDTO.setFacilityId(facilityId);
            facilityDTO.setRegisteredMemberId(existingFacility.getRegisteredMemberId());
            facilityDTO.setIsApproved(existingFacility.getIsApproved());
            
            // approval_statusê°€ nullì¸ ê²½ìš° ê¸°ë³¸ê°’ ì„¤ì •
            String approvalStatus = existingFacility.getApprovalStatus();
            if (approvalStatus == null || approvalStatus.trim().isEmpty()) {
                // ê¸°ì¡´ ì‹œì„¤ì˜ is_approved ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì ì ˆí•œ ê°’ ì„¤ì •
                if (existingFacility.getIsApproved() != null && existingFacility.getIsApproved()) {
                    approvalStatus = "APPROVED";
                    log.info("ğŸ”§ approval_status NULL ë°©ì§€ - ìŠ¹ì¸ëœ ì‹œì„¤: APPROVED");
                } else {
                    approvalStatus = "PENDING";
                    log.info("ğŸ”§ approval_status NULL ë°©ì§€ - ë¯¸ìŠ¹ì¸ ì‹œì„¤: PENDING");
                }
            }
            facilityDTO.setApprovalStatus(approvalStatus);
            
            facilityDTO.setAverageRating(existingFacility.getAverageRating());
            facilityDTO.setReviewCount(existingFacility.getReviewCount());
            facilityDTO.setCurrentOccupancy(existingFacility.getCurrentOccupancy());
            facilityDTO.setGradeRating(existingFacility.getGradeRating());
            
            // ì‹œì„¤ ì •ë³´ ìˆ˜ì • (ì´ë¯¸ì§€ íŒŒì¼ í¬í•¨)
            facilityService.updateFacility(facilityDTO, facilityImageFile);
            
            log.info("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì™„ë£Œ: facilityId={}, memberId={}", facilityId, member.getMemberId());
            redirectAttributes.addFlashAttribute("message", "ì‹œì„¤ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
            
            return "redirect:/facility/manage";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/edit/" + facilityId;
        }
    }

    /**
     * ì‹œì„¤ ì‚­ì œ
     */
    @PostMapping("/delete/{facilityId}")
    public String deleteFacility(@PathVariable Long facilityId,
                                HttpSession session,
                                RedirectAttributes redirectAttributes) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        
        if (member == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        
        try {
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            
            if (facility == null) {
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            // ê¶Œí•œ í™•ì¸
            if (!facility.getRegisteredMemberId().equals(member.getMemberId()) 
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            // ì‹œì„¤ ì‚­ì œ
            facilityService.deleteFacility(facilityId);
            
            log.info("ì‹œì„¤ ì‚­ì œ ì™„ë£Œ: facilityId={}, memberId={}", facilityId, member.getMemberId());
            redirectAttributes.addFlashAttribute("message", "ì‹œì„¤ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
            
            return "redirect:/facility/manage";
        } catch (Exception e) {
            log.error("ì‹œì„¤ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/manage";
        }
    }

    /**
     * ì‹œì„¤ API - AJAXìš©
     */
    @GetMapping("/api/{facilityId}")
    @ResponseBody
    public FacilityDTO getFacilityApi(@PathVariable Long facilityId, HttpSession session) {
        MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        
        if (member == null) {
            throw new RuntimeException("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        }
        
        FacilityDTO facility = facilityService.getFacilityById(facilityId);
        
        if (facility == null) {
            throw new RuntimeException("ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
        
        // ê¶Œí•œ í™•ì¸ (ì‹œì„¤ ì†Œìœ ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ì¡°íšŒ ê°€ëŠ¥)
        if (!facility.getRegisteredMemberId().equals(member.getMemberId()) 
            && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
            throw new RuntimeException("í•´ë‹¹ ì‹œì„¤ì„ ì¡°íšŒí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
        }
        
        return facility;
    }

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€
     */
    @GetMapping("/crop-images/{facilityId}")
    public String cropImagePage(@PathVariable Long facilityId, 
                                HttpSession session, 
                                Model model, 
                                RedirectAttributes redirectAttributes) {
        try {
            MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            
            if (member == null) {
                redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return "redirect:/member/login";
            }
            
            // ì‹œì„¤ ì •ë³´ ì¡°íšŒ
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            // ê¶Œí•œ í™•ì¸ (ì‹œì„¤ ì†Œìœ ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥)
            if (!facility.getRegisteredMemberId().equals(member.getMemberId()) 
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì˜ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/facility/manage";
            }
            
            model.addAttribute("facility", facility);
            log.info("ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€ ì ‘ì†: facilityId={}, memberId={}", facilityId, member.getMemberId());
            
            return "facility/crop-images";
            
        } catch (Exception e) {
            log.error("ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€ ì˜¤ë¥˜: facilityId={}", facilityId, e);
            redirectAttributes.addFlashAttribute("error", "í˜ì´ì§€ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/facility/manage";
        }
    }

    /**
     * ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì²˜ë¦¬ (ë‹¤ì¤‘ ì´ë¯¸ì§€ ì§€ì›)
     */
    @PostMapping("/crop-images/save/{facilityId}")
    @ResponseBody
    public Map<String, Object> saveFacilityImage(@PathVariable Long facilityId,
                                                @RequestParam("facilityImage") MultipartFile facilityImageFile,
                                                @RequestParam(value = "altText", required = false) String altText,
                                                @RequestParam(value = "format", required = false) String format,
                                                @RequestParam(value = "imageIndex", required = false) String imageIndex,
                                                @RequestParam(value = "customFileName", required = false) String customFileName,
                                                HttpSession session) {
        Map<String, Object> result = new HashMap<>();
        
        try {
            log.info("ğŸ”¥ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì‹œì‘ - facilityId: {}, ë°›ì€ íŒŒë¼ë¯¸í„°ë“¤ í™•ì¸", facilityId);
            log.info("ğŸ“‹ altText: '{}', format: '{}', imageIndex: '{}', customFileName: '{}'", altText, format, imageIndex, customFileName);
            log.info("ğŸ“ íŒŒì¼ ì •ë³´ - ì´ë¦„: '{}', í¬ê¸°: {}bytes, íƒ€ì…: '{}'", 
                    facilityImageFile.getOriginalFilename(), facilityImageFile.getSize(), facilityImageFile.getContentType());
            
            MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (member == null) {
                log.error("âŒ ë¡œê·¸ì¸ëœ ì‚¬ìš©ìê°€ ì—†ìŒ");
                result.put("success", false);
                result.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return result;
            }
            
            log.info("ğŸ‘¤ ë¡œê·¸ì¸ ì‚¬ìš©ì: {} (role: {})", member.getUserId(), member.getRole());
            
            // ì‹œì„¤ ì •ë³´ ì¡°íšŒ ë° ê¶Œí•œ í™•ì¸
            FacilityDTO facility = facilityService.getFacilityById(facilityId);
            if (facility == null) {
                result.put("success", false);
                result.put("message", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            
            if (!facility.getRegisteredMemberId().equals(member.getMemberId()) 
                && !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
                result.put("success", false);
                result.put("message", "í•´ë‹¹ ì‹œì„¤ì˜ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            
            log.info("ğŸ–¼ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ìš”ì²­ - facilityId: {}, í˜•ì‹: {}, ì¸ë±ìŠ¤: {}, í¬ê¸°: {} bytes", 
                    facilityId, format, imageIndex, facilityImageFile.getSize());
            
            // ì—…ë¡œë“œëœ íŒŒì¼ì´ ìœ íš¨í•œì§€ í™•ì¸
            if (facilityImageFile.isEmpty()) {
                result.put("success", false);
                result.put("message", "ì—…ë¡œë“œëœ ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
                return result;
            }
            
            // Alt í…ìŠ¤íŠ¸ ì„¤ì •
            String finalAltText;
            if (altText != null && !altText.trim().isEmpty()) {
                finalAltText = altText.trim();
                log.info("ğŸ·ï¸ ì‹œì„¤ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ì„¤ì •: {}", finalAltText);
            } else {
                // ê¸°ë³¸ê°’ ì„¤ì •
                finalAltText = facility.getFacilityName() + " ì‹œì„¤ ì´ë¯¸ì§€";
                if (imageIndex != null && !imageIndex.isEmpty()) {
                    finalAltText += " " + (Integer.parseInt(imageIndex) + 1);
                }
                log.info("ğŸ·ï¸ ì‹œì„¤ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ê¸°ë³¸ê°’ ì„¤ì •: {}", finalAltText);
            }
            
            // ì´ë¯¸ì§€ í˜•ì‹ ì •ë³´ ë¡œê¹…
            String contentType = facilityImageFile.getContentType();
            if (contentType != null) {
                log.info("ğŸ“· ì—…ë¡œë“œëœ ì´ë¯¸ì§€ í˜•ì‹: {}", contentType);
                if (contentType.contains("avif")) {
                    log.info("âœ¨ AVIF í˜•ì‹ ê°ì§€ - ìµœì  ì••ì¶• ì ìš©ë¨");
                } else if (contentType.contains("webp")) {
                    log.info("ğŸš€ WebP í˜•ì‹ ê°ì§€ - íš¨ìœ¨ì  ì••ì¶• ì ìš©ë¨");
                } else if (contentType.contains("jpeg")) {
                    log.info("ğŸ“¸ JPEG í˜•ì‹ ê°ì§€ - í˜¸í™˜ì„± ìš°ì„  ì ìš©ë¨");
                }
            }
            
            // ë‹¤ì¤‘ ì´ë¯¸ì§€ ì‹œìŠ¤í…œìœ¼ë¡œ ì €ì¥ (ì‚¬ìš©ì ì§€ì • íŒŒì¼ëª… ì§€ì›)
            Integer orderIndex = imageIndex != null ? Integer.parseInt(imageIndex) : null;
            log.info("ğŸ”§ ì„œë¹„ìŠ¤ í˜¸ì¶œ ì „ - facilityId: {}, orderIndex: {}, altText: '{}', customFileName: '{}'", 
                facilityId, orderIndex, finalAltText, customFileName);
            
            FacilityImageDTO savedImage = facilityImageService.saveSingleFacilityImage(
                facilityId, facilityImageFile, finalAltText, orderIndex, customFileName);
            
            log.info("âœ… ì„œë¹„ìŠ¤ í˜¸ì¶œ ì™„ë£Œ - ì €ì¥ëœ ì´ë¯¸ì§€ID: {}, ê²½ë¡œ: {}", savedImage.getImageId(), savedImage.getImagePath());
            
            result.put("success", true);
            result.put("message", "ì‹œì„¤ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
            result.put("facilityId", facilityId);
            result.put("imageIndex", imageIndex);
            result.put("imageId", savedImage.getImageId());
            result.put("imagePath", savedImage.getImagePath());
            
            log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì„±ê³µ: facilityId={}, imageId={}", facilityId, savedImage.getImageId());
            
        } catch (Exception e) {
            log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
            result.put("success", false);
            result.put("message", "ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
        }
        
        return result;
    }
    
    // ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ APIëŠ” FacilityImageApiControllerë¡œ ì´ë™ë¨ (/api/facility/{facilityId}/images)
    // ì¤‘ë³µ API ì œê±°ë¡œ ë°ì´í„° ì •í•©ì„± ë° ì¼ê´€ì„± í™•ë³´
    
    // ì´ë¯¸ì§€ ê´€ë¦¬ APIë“¤ì€ FacilityImageApiControllerë¡œ ì´ë™ë¨
    // Thymeleaf ì¸ë¼ì¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì¶©ëŒ ë°©ì§€ë¥¼ ìœ„í•´ ë³„ë„ ì»¨íŠ¸ë¡¤ëŸ¬ ì‚¬ìš©
}
````

## File: src/main/java/com/example/carelink/controller/MemberController.java
````java
package com.example.carelink.controller;

import com.example.carelink.dto.LoginDTO;
import com.example.carelink.dto.MemberDTO;
import com.example.carelink.service.MemberService;
import com.example.carelink.common.Constants;
import com.example.carelink.validation.groups.OnFacilityJoin;
import com.example.carelink.common.CustomMultipartFile;
import org.springframework.web.multipart.MultipartFile;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile; // MultipartFile ìœ ì§€
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

import javax.servlet.http.HttpSession; // ì„¸ì…˜ ê´€ë¦¬ë¥¼ ìœ„í•´ í•„ìš”
import javax.validation.ConstraintViolation;
import javax.validation.Valid; // @Valid ì–´ë…¸í…Œì´ì…˜ì„ ìœ„í•´ í•„ìš”
// import java.security.Principal; // Principal ì œê±°
import javax.validation.Validator;

import java.util.HashMap;
import java.util.List; // List ìœ ì§€
import java.util.Map;
import java.util.Set;

/**
 * íšŒì› ê´€ë¦¬ ì»¨íŠ¸ë¡¤ëŸ¬
 * íŒ€ì› A ë‹´ë‹¹: ë¡œê·¸ì¸, íšŒì›ê°€ì…, íšŒì›ì •ë³´ ê´€ë¦¬
 */
@Slf4j
@Controller
@RequestMapping("/member")
@RequiredArgsConstructor
public class MemberController {

    private final MemberService memberService;

    @Autowired
    private Validator validator;

    /**
     * ë¡œê·¸ì¸ í˜ì´ì§€ í‘œì‹œ
     */
    @GetMapping("/login")
    public String loginForm(Model model) {
        model.addAttribute("loginDTO", new LoginDTO());
        return "member/login";
    }

    /**
     * ë¡œê·¸ì¸ ì²˜ë¦¬
     */
    @PostMapping("/login")
    public String login(@Valid @ModelAttribute LoginDTO loginDTO,
                        BindingResult bindingResult,
                        HttpSession session,
                        RedirectAttributes redirectAttributes) {

        // DTO ìœ íš¨ì„± ê²€ì¦ ì‹¤íŒ¨ ì‹œ
        if (bindingResult.hasErrors()) {
            log.warn("ë¡œê·¸ì¸ í¼ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨: {}", bindingResult.getAllErrors());
            return "member/login"; // ì—ëŸ¬ê°€ ìˆìœ¼ë©´ ë¡œê·¸ì¸ í¼ìœ¼ë¡œ ë‹¤ì‹œ ì´ë™
        }

        log.info("ë¡œê·¸ì¸ ì‹œë„: userId={}, ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´={}", loginDTO.getUserId(), loginDTO.getPassword().length());

        try {
            // MemberServiceë¥¼ í†µí•´ ë¡œê·¸ì¸ ì‹œë„
            MemberDTO loginMember = memberService.login(loginDTO);

            if (loginMember != null) {
                // ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì„¸ì…˜ì— íšŒì› ì •ë³´ ì €ì¥
                session.setAttribute(Constants.SESSION_MEMBER, loginMember);
                session.setAttribute("memberId", loginMember.getMemberId());
                log.info("ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œê·¸ì¸ ì„±ê³µ: userId={}, role={}", loginMember.getUserId(), loginMember.getRole());

                redirectAttributes.addFlashAttribute("message", "ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
                return "redirect:/"; // í™ˆ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
            } else {
                // ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ ì¶”ê°€
                log.warn("ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œê·¸ì¸ ì‹¤íŒ¨: userId={}", loginDTO.getUserId());
                redirectAttributes.addFlashAttribute("error", "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.");
                return "redirect:/member/login"; // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
            }

        } catch (Exception e) {
            log.error("ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: userId={}", loginDTO.getUserId(), e);
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
    }

    /**
     * ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
     */
    @GetMapping("/logout")
    public String logout(HttpSession session, RedirectAttributes redirectAttributes) {
        if (session != null) {
            session.invalidate(); // í˜„ì¬ ì„¸ì…˜ ë¬´íš¨í™”
        }
        redirectAttributes.addFlashAttribute("message", "ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.");
        return "redirect:/"; // í™ˆ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    }

    /**
     * íšŒì›ê°€ì… í˜ì´ì§€ í‘œì‹œ
     */
    @GetMapping("/join")
    public String joinForm(Model model) {
        model.addAttribute("memberDTO", new MemberDTO());
        return "member/join";
    }

    @PostMapping("/join")
    public String join(
            // @Validatedì—ì„œ OnFacilityJoin ê·¸ë£¹ì„ ì œê±°í•©ë‹ˆë‹¤.
            // ì´ì œ Default ê·¸ë£¹ì— ì†í•œ ìœ íš¨ì„±ë§Œ ìë™ ê²€ì‚¬ë©ë‹ˆë‹¤ (ex: email, role ë“±)
            @Validated(value = {javax.validation.groups.Default.class})
            @ModelAttribute MemberDTO memberDTO,
            BindingResult bindingResult,
            @RequestParam(value = "facilityImageFile", required = false) MultipartFile facilityImageFile,
            HttpSession session,
            RedirectAttributes redirectAttributes,
            Model model) {

        // 1. ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ê²€ì‚¬ (ê¸°ì¡´ê³¼ ë™ì¼)
        if (!memberDTO.getPassword().equals(memberDTO.getPasswordConfirm())) {
            bindingResult.rejectValue("passwordConfirm", "password.mismatch", "ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            log.warn("íšŒì›ê°€ì… ì‹¤íŒ¨: ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ë¶ˆì¼ì¹˜");
            model.addAttribute("memberDTO", memberDTO);
            return "member/join";
        }

        // 2. ì‹œì„¤ íšŒì›ì¼ ê²½ìš°ì—ë§Œ address í•„ë“œì— ëŒ€í•œ ì¶”ê°€ ìœ íš¨ì„± ê²€ì‚¬ ìˆ˜í–‰
        // ì¼ë°˜ íšŒì›('USER')ì¼ ë•ŒëŠ” ì´ ë¸”ë¡ì´ ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ address ê²€ì‚¬ê°€ ì¼ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        if ("FACILITY".equalsIgnoreCase(memberDTO.getRole())) {
            // Validatorë¥¼ ì‚¬ìš©í•˜ì—¬ MemberDTOì— ëŒ€í•´ OnFacilityJoin ê·¸ë£¹ì— ì†í•˜ëŠ” ì œì•½ ì¡°ê±´ë§Œ ìˆ˜ë™ìœ¼ë¡œ ê²€ì‚¬
            Set<ConstraintViolation<MemberDTO>> violations = validator.validate(memberDTO, OnFacilityJoin.class);
            for (ConstraintViolation<MemberDTO> violation : violations) {
                // ë°œìƒí•œ ìœ„ë°˜ ì‚¬í•­ì„ bindingResultì— ì¶”ê°€
                bindingResult.rejectValue(violation.getPropertyPath().toString(), "", violation.getMessage());
            }
        }

        // 3. ìµœì¢… ìœ íš¨ì„± ê²€ì‚¬ ê²°ê³¼ í™•ì¸ (ê¸°ë³¸ ìœ íš¨ì„± + ìˆ˜ë™ ì¶”ê°€ëœ ìœ íš¨ì„±)
        if (bindingResult.hasErrors()) {
            log.warn("íšŒì›ê°€ì… ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨: {}", bindingResult.getAllErrors());
            model.addAttribute("memberDTO", memberDTO);
            return "member/join";
        }

        try {
            // MemberServiceë¥¼ í†µí•´ íšŒì›ê°€ì… ì²˜ë¦¬ (ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ í¬í•¨)
            memberService.join(memberDTO, facilityImageFile);
            log.info("íšŒì›ê°€ì… ì„±ê³µ: {}", memberDTO.getUserId());

            // íšŒì›ê°€ì… í›„ ìë™ ë¡œê·¸ì¸ ì²˜ë¦¬
            LoginDTO loginDTO = new LoginDTO();
            loginDTO.setUserId(memberDTO.getUserId());
            loginDTO.setPassword(memberDTO.getPassword());
            
            MemberDTO loginMember = memberService.login(loginDTO);
            if (loginMember != null) {
                // ìë™ ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì„¸ì…˜ì— íšŒì› ì •ë³´ ì €ì¥
                session.setAttribute(Constants.SESSION_MEMBER, loginMember);
                session.setAttribute("memberId", loginMember.getMemberId());
                log.info("íšŒì›ê°€ì… í›„ ìë™ ë¡œê·¸ì¸ ì„±ê³µ: userId={}", loginMember.getUserId());
                
                redirectAttributes.addFlashAttribute("message", "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. í™˜ì˜í•©ë‹ˆë‹¤!");
                return "redirect:/"; // í™ˆ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
            } else {
                // ìë™ ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ
                log.warn("íšŒì›ê°€ì…ì€ ì„±ê³µí–ˆìœ¼ë‚˜ ìë™ ë¡œê·¸ì¸ ì‹¤íŒ¨: {}", memberDTO.getUserId());
                redirectAttributes.addFlashAttribute("message", "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");
                return "redirect:/member/login";
            }

        } catch (IllegalArgumentException e) {
            // ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œ ë°œìƒí•œ ì•„ì´ë”” ì¤‘ë³µ ë“±ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜ˆì™¸ ì²˜ë¦¬
            log.warn("íšŒì›ê°€ì… ì‹¤íŒ¨: {}", e.getMessage());
            bindingResult.rejectValue("userId", "duplicate.userId", e.getMessage()); // userId í•„ë“œì— ì—ëŸ¬ ì¶”ê°€
            return "member/join";
        } catch (Exception e) {
            log.error("íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ ë°œìƒ", e);
            redirectAttributes.addFlashAttribute("error", "íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "member/join";
        }

    }

    /**
     * ì•„ì´ë”” ì¤‘ë³µ ì²´í¬ (Ajax ìš”ì²­ ì²˜ë¦¬)
     */
    @PostMapping("/checkUserId")
    @ResponseBody // JSON ì‘ë‹µì„ ìœ„í•´ ì‚¬ìš©
    public Map<String, Object> checkUserId(@RequestParam String userId) {
        Map<String, Object> result = new HashMap<>();

        try {
            // boolean isDuplicate = memberService.isUserIdDuplicate(userId);
            boolean isDuplicate = memberService.isUserIdDuplicate(userId);
            result.put("isDuplicate", isDuplicate);
            result.put("message", isDuplicate ? "ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤." : "ì‚¬ìš© ê°€ëŠ¥í•œ ì•„ì´ë””ì…ë‹ˆë‹¤.");

        } catch (Exception e) {
            log.error("ì•„ì´ë”” ì¤‘ë³µ ì²´í¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            result.put("error", "ì¤‘ë³µ ì²´í¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }

        return result;
    }

    /**
     * ë””ë²„ê¹…ìš© ë¹„ë°€ë²ˆí˜¸ í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸
     */
    @GetMapping("/debug/password-test")
    @ResponseBody
    public Map<String, Object> debugPasswordTest(@RequestParam(defaultValue = "admin") String userId,
                                                 @RequestParam(defaultValue = "admin123") String password) {
        Map<String, Object> result = new HashMap<>();
        
        try {
            // 1. ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
            MemberDTO member = memberService.getMemberByUserId(userId);
            if (member == null) {
                result.put("error", "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + userId);
                return result;
            }
            
            // 2. ê¸°ë³¸ ì •ë³´ í‘œì‹œ
            result.put("userId", member.getUserId());
            result.put("dbPasswordHash", member.getPassword());
            result.put("dbPasswordLength", member.getPassword().length());
            result.put("inputPassword", password);
            result.put("inputPasswordLength", password.length());
            
            // 3. BCrypt í•´ì‹œ í˜•ì‹ ê²€ì¦
            boolean isValidBcryptFormat = member.getPassword().startsWith("$2a$") || 
                                        member.getPassword().startsWith("$2b$") || 
                                        member.getPassword().startsWith("$2y$");
            result.put("isValidBcryptFormat", isValidBcryptFormat);
            
            // 4. ì§ì ‘ ë¹„ë°€ë²ˆí˜¸ ë§¤ì¹­ í…ŒìŠ¤íŠ¸
            LoginDTO loginDTO = new LoginDTO();
            loginDTO.setUserId(userId);
            loginDTO.setPassword(password);
            
            MemberDTO loginResult = memberService.login(loginDTO);
            result.put("loginSuccess", loginResult != null);
            
            // 5. íšŒì› ìƒíƒœ ì •ë³´
            result.put("isActive", member.getIsActive());
            result.put("isDeleted", member.getIsDeleted());
            result.put("loginFailCount", member.getLoginFailCount());
            result.put("role", member.getRole());
            
            log.info("ë””ë²„ê¹… í…ŒìŠ¤íŠ¸ ê²°ê³¼: {}", result);
            
        } catch (Exception e) {
            log.error("ë””ë²„ê¹… í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            result.put("error", "í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: " + e.getMessage());
        }
        
        return result;
    }

    /**
     * ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í˜ì´ì§€ (ë‚´ ì •ë³´ ìˆ˜ì • ì „)
     */
    @GetMapping("/myinfo")
    public String verifyPasswordForm(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);

        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }

        return "member/verifyPassword";
    }
    
    /**
     * ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì²˜ë¦¬
     */
    @PostMapping("/myinfo/verify")
    public String verifyPassword(@RequestParam("password") String password,
                                HttpSession session,
                                RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);

        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }

        try {
            // ë¹„ë°€ë²ˆí˜¸ í™•ì¸
            if (!password.equals(loginMember.getPassword())) {
                redirectAttributes.addFlashAttribute("error", "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                return "redirect:/member/myinfo";
            }
            
            // ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì„±ê³µ ì‹œ ì‹¤ì œ ë‚´ì •ë³´ í˜ì´ì§€ë¡œ ì´ë™
            return "redirect:/member/myinfo/edit";
            
        } catch (Exception e) {
            log.error("ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", loginMember.getUserId(), e);
            redirectAttributes.addFlashAttribute("error", "ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/myinfo";
        }
    }

    /**
     * ë‚´ ì •ë³´ ìˆ˜ì • í˜ì´ì§€ í‘œì‹œ (ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í›„)
     */
    @GetMapping("/myinfo/edit")
    public String myInfoEdit(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);

        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }

        try {
            // memberIdë¡œ íšŒì› ì •ë³´ ì¡°íšŒ
            MemberDTO memberInfo = memberService.findById(loginMember.getMemberId());

            if (memberInfo == null) {
                redirectAttributes.addFlashAttribute("error", "ì‚¬ìš©ì ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                // ì„¸ì…˜ ì •ë³´ê°€ ìœ íš¨í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•˜ê±°ë‚˜ ì„¸ì…˜ì„ ë¬´íš¨í™”í•  ìˆ˜ ìˆìŒ
                session.invalidate();
                return "redirect:/member/login";
            }

            // í¬ë¡­ í˜ì´ì§€ ì ‘ê·¼ ê¶Œí•œ í”Œë˜ê·¸ ì„¤ì • (ë³´ì•ˆìš©)
            session.setAttribute("myinfo_verified", true);
            
            model.addAttribute("memberDTO", memberInfo);
            return "member/myinfo";

        } catch (Exception e) {
            log.error("ë§ˆì´í˜ì´ì§€ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", loginMember.getUserId(), e);
            redirectAttributes.addFlashAttribute("error", "íšŒì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/"; // ì˜¤ë¥˜ ë°œìƒ ì‹œ í™ˆìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        }
    }

    /**
     * í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€
     */
    @GetMapping("/myinfo/crop-image")
    public String cropImagePage(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        
        // ë§ˆì´í˜ì´ì§€ì—ì„œ ì˜¨ ì‚¬ìš©ìì¸ì§€ í™•ì¸ (ë³´ì•ˆ)
        Boolean myinfoVerified = (Boolean) session.getAttribute("myinfo_verified");
        if (myinfoVerified == null || !myinfoVerified) {
            redirectAttributes.addFlashAttribute("error", "ì˜¬ë°”ë¥¸ ê²½ë¡œë¡œ ì ‘ê·¼í•´ì£¼ì„¸ìš”.");
            return "redirect:/member/myinfo";
        }
        
        model.addAttribute("memberDTO", loginMember);
        return "member/crop-image";
    }

    /**
     * í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ ì²˜ë¦¬ (ì„ì‹œ ì €ì¥)
     */
    @PostMapping("/myinfo/crop-image/upload")
    @ResponseBody
    public Map<String, Object> uploadTempImage(@RequestParam("imageFile") MultipartFile imageFile,
                                               HttpSession session) {
        Map<String, Object> result = new HashMap<>();
        
        try {
            MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (loginMember == null) {
                result.put("success", false);
                result.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return result;
            }
            
            if (imageFile.isEmpty()) {
                result.put("success", false);
                result.put("message", "ì´ë¯¸ì§€ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            
            // íŒŒì¼ í¬ê¸° ê²€ì¦ (5MB)
            if (imageFile.getSize() > 5 * 1024 * 1024) {
                result.put("success", false);
                result.put("message", "íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.");
                return result;
            }
            
            // íŒŒì¼ íƒ€ì… ê²€ì¦
            String contentType = imageFile.getContentType();
            if (contentType == null || !contentType.startsWith("image/")) {
                result.put("success", false);
                result.put("message", "ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
                return result;
            }
            
            // Base64ë¡œ ì¸ì½”ë”©í•˜ì—¬ ì„ì‹œ ì €ì¥
            byte[] imageBytes = imageFile.getBytes();
            String base64Image = "data:" + contentType + ";base64," + 
                                java.util.Base64.getEncoder().encodeToString(imageBytes);
            
            // ì„¸ì…˜ì— ì„ì‹œ ì €ì¥
            session.setAttribute("tempImageData", base64Image);
            session.setAttribute("tempImageName", imageFile.getOriginalFilename());
            
            result.put("success", true);
            result.put("imageData", base64Image);
            result.put("message", "ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.");
            
        } catch (Exception e) {
            log.error("ì„ì‹œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            result.put("success", false);
            result.put("message", "ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        
        return result;
    }

    /**
     * í¬ë¡­ëœ ì´ë¯¸ì§€ ì €ì¥ ì²˜ë¦¬
     */
    @PostMapping("/myinfo/crop-image/save")
    @ResponseBody
    public Map<String, Object> saveCroppedImage(@RequestParam("croppedImage") MultipartFile croppedImageFile,
                                                @RequestParam(value = "altText", required = false) String altText,
                                                @RequestParam(value = "format", required = false) String format,
                                                @RequestParam(value = "quality", required = false) String quality,
                                                HttpSession session) {
        Map<String, Object> result = new HashMap<>();
        
        try {
            MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
            if (loginMember == null) {
                result.put("success", false);
                result.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                return result;
            }
            
            log.info("ğŸ–¼ï¸ í¬ë¡­ëœ ì´ë¯¸ì§€ ì €ì¥ ìš”ì²­ - í˜•ì‹: {}, í’ˆì§ˆ: {}, í¬ê¸°: {} bytes", 
                    format, quality, croppedImageFile.getSize());
            log.info("ğŸ“ íŒŒì¼ ì •ë³´ - ì´ë¦„: {}, ì»¨í…ì¸  íƒ€ì…: {}", 
                    croppedImageFile.getOriginalFilename(), croppedImageFile.getContentType());
            
            // ì—…ë¡œë“œëœ íŒŒì¼ì´ ìœ íš¨í•œì§€ í™•ì¸
            if (croppedImageFile.isEmpty()) {
                result.put("success", false);
                result.put("message", "ì—…ë¡œë“œëœ ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
                return result;
            }
            
            // ê¸°ì¡´ íšŒì›ì •ë³´ ì¡°íšŒ
            MemberDTO memberDTO = memberService.findById(loginMember.getMemberId());
            if (memberDTO == null) {
                result.put("success", false);
                result.put("message", "íšŒì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return result;
            }
            
            // Alt í…ìŠ¤íŠ¸ ì„¤ì • (SEO ìµœì í™”ìš©)
            log.info("ğŸ“‹ ë°›ì€ íŒŒë¼ë¯¸í„° - altText: '{}', format: '{}', quality: '{}'", altText, format, quality);
            if (altText != null && !altText.trim().isEmpty()) {
                memberDTO.setProfileImageAltText(altText.trim());
                log.info("ğŸ·ï¸ í”„ë¡œí•„ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ì„¤ì •: {}", altText.trim());
            } else {
                // ê¸°ë³¸ê°’ ì„¤ì •
                memberDTO.setProfileImageAltText("ì‚¬ìš©ì í”„ë¡œí•„ ì‚¬ì§„");
                log.info("ğŸ·ï¸ í”„ë¡œí•„ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ê¸°ë³¸ê°’ ì„¤ì •: ì‚¬ìš©ì í”„ë¡œí•„ ì‚¬ì§„");
            }
            
            // ì´ë¯¸ì§€ í˜•ì‹ ì •ë³´ ë¡œê¹…
            String contentType = croppedImageFile.getContentType();
            if (contentType != null) {
                log.info("ğŸ“· ì—…ë¡œë“œëœ ì´ë¯¸ì§€ í˜•ì‹: {}", contentType);
                if (contentType.contains("avif")) {
                    log.info("âœ¨ AVIF í˜•ì‹ ê°ì§€ - ìµœì  ì••ì¶• ì ìš©ë¨");
                } else if (contentType.contains("webp")) {
                    log.info("ğŸš€ WebP í˜•ì‹ ê°ì§€ - íš¨ìœ¨ì  ì••ì¶• ì ìš©ë¨");
                } else if (contentType.contains("jpeg")) {
                    log.info("ğŸ“¸ JPEG í˜•ì‹ ê°ì§€ - í˜¸í™˜ì„± ìš°ì„  ì ìš©ë¨");
                }
            }
            
            // í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸ (ì›ë³¸ í˜•ì‹ ìœ ì§€)
            memberService.updateMember(memberDTO, croppedImageFile);
            
            // ì„¸ì…˜ ì •ë³´ ì—…ë°ì´íŠ¸
            MemberDTO updatedMember = memberService.findById(loginMember.getMemberId());
            if (updatedMember != null) {
                session.setAttribute(Constants.SESSION_MEMBER, updatedMember);
            }
            
            // ì„ì‹œ ë°ì´í„° ì‚­ì œ
            session.removeAttribute("tempImageData");
            session.removeAttribute("tempImageName");
            
            result.put("success", true);
            result.put("message", "í”„ë¡œí•„ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
            result.put("profileImageUrl", updatedMember.getProfileImage());
            
        } catch (Exception e) {
            log.error("í¬ë¡­ëœ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            result.put("success", false);
            result.put("message", "ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        
        return result;
    }

    /**
     * íšŒì›ì •ë³´ ìˆ˜ì • ì²˜ë¦¬ (HttpSession ì‚¬ìš©ìœ¼ë¡œ ë³µì›)
     */
    @PostMapping("/myinfo/update")
    public String updateMember(@ModelAttribute MemberDTO memberDTO,
                               BindingResult bindingResult,
                               @RequestParam(value = "profileImageFile", required = false) MultipartFile profileImageFile,
                               HttpSession session,
                               Model model,
                               RedirectAttributes redirectAttributes) {

        log.info("íšŒì›ì •ë³´ ìˆ˜ì • ìš”ì²­: memberId={}, name={}, email={}", 
                memberDTO.getMemberId(), memberDTO.getName(), memberDTO.getEmail());
        
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        log.info("ì„¸ì…˜ ë¡œê·¸ì¸ ë©¤ë²„: {}", loginMember != null ? loginMember.getMemberId() : "null");
        
        if (loginMember == null) {
            log.warn("ì„¸ì…˜ì— ë¡œê·¸ì¸ ì •ë³´ê°€ ì—†ìŒ");
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        
        if (!loginMember.getMemberId().equals(memberDTO.getMemberId())) {
            log.warn("ê¶Œí•œ ì—†ìŒ: ì„¸ì…˜ memberId={}, ìš”ì²­ memberId={}", 
                    loginMember.getMemberId(), memberDTO.getMemberId());
            redirectAttributes.addFlashAttribute("error", "ê¶Œí•œì´ ì—†ê±°ë‚˜ ë¡œê·¸ì¸ ì •ë³´ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            return "redirect:/member/myinfo";
        }

        // ìˆ˜ë™ ìœ íš¨ì„± ê²€ì‚¬ (ì •ë³´ìˆ˜ì •ì— í•„ìš”í•œ í•„ë“œë§Œ)
        if (memberDTO.getName() == null || memberDTO.getName().trim().isEmpty()) {
            bindingResult.rejectValue("name", "NotBlank", "ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        if (memberDTO.getEmail() != null && !memberDTO.getEmail().trim().isEmpty()) {
            if (!memberDTO.getEmail().matches("^[A-Za-z0-9+_.-]+@(.+)$")) {
                bindingResult.rejectValue("email", "Email", "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.");
            }
        }
        if (memberDTO.getPhone() != null && !memberDTO.getPhone().trim().isEmpty()) {
            if (!memberDTO.getPhone().matches("^01(?:0|1|[6-9])-(?:\\d{3}|\\d{4})-\\d{4}$")) {
                bindingResult.rejectValue("phone", "Pattern", "ì˜¬ë°”ë¥¸ íœ´ëŒ€í° ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.");
            }
        }
        
        if (bindingResult.hasErrors()) {
            log.warn("íšŒì›ì •ë³´ ìˆ˜ì • ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨: {}", bindingResult.getAllErrors());
            model.addAttribute("memberDTO", memberDTO);
            return "member/myinfo";
        }

        try {
            log.info("íšŒì›ì •ë³´ ìˆ˜ì • ì„œë¹„ìŠ¤ í˜¸ì¶œ ì‹œì‘");
            memberService.updateMember(memberDTO, profileImageFile);
            log.info("íšŒì›ì •ë³´ ìˆ˜ì • ì„œë¹„ìŠ¤ í˜¸ì¶œ ì™„ë£Œ");

            // ì„¸ì…˜ ì •ë³´ ì—…ë°ì´íŠ¸ (ìˆ˜ì •ëœ ìµœì‹  ì •ë³´ë¡œ ê°±ì‹ )
            MemberDTO updatedMember = memberService.findById(memberDTO.getMemberId());
            if (updatedMember != null) {
                session.setAttribute(Constants.SESSION_MEMBER, updatedMember);
                log.info("ì„¸ì…˜ ì •ë³´ ì—…ë°ì´íŠ¸ ì™„ë£Œ: {}", updatedMember.getName());
            } else {
                log.warn("ì—…ë°ì´íŠ¸ëœ íšŒì› ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨");
            }

            redirectAttributes.addFlashAttribute("message", "íšŒì›ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/myinfo/edit";

        } catch (Exception e) {
            log.error("íšŒì›ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}, userId={}", 
                    memberDTO.getMemberId(), memberDTO.getUserId(), e);
            redirectAttributes.addFlashAttribute("error", "íšŒì›ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
            return "redirect:/member/myinfo/edit";
        }
    }

    /**
     * ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í˜ì´ì§€ í‘œì‹œ (HttpSession ì‚¬ìš©ìœ¼ë¡œ ë³µì›)
     */
    @GetMapping("/mypage/change-password")
    public String changePasswordForm(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        return "member/changePassword";
    }

    /**
     * ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì²˜ë¦¬ (HttpSession ì‚¬ìš©ìœ¼ë¡œ ë³µì›)
     */
    @PostMapping("/mypage/change-password")
    public String changePassword(@RequestParam("currentPassword") String currentPassword,
                                 @RequestParam("newPassword") String newPassword,
                                 @RequestParam("confirmPassword") String confirmNewPassword,
                                 HttpSession session,
                                 RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }

        String userId = loginMember.getUserId(); // ì„¸ì…˜ì—ì„œ userId ê°€ì ¸ì˜¤ê¸°
        try {
            memberService.changePassword(userId, currentPassword, newPassword, confirmNewPassword);
            redirectAttributes.addFlashAttribute("message", "ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/myinfo/edit"; // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í›„ ë‚´ ì •ë³´ í˜ì´ì§€ë¡œ
        } catch (IllegalArgumentException e) {
            redirectAttributes.addFlashAttribute("error", e.getMessage());
            return "redirect:/member/mypage/change-password";
        } catch (Exception e) {
            log.error("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", userId, e);
            redirectAttributes.addFlashAttribute("error", "ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/mypage/change-password";
        }
    }

    /**
     * íšŒì› íƒˆí‡´ í˜ì´ì§€ í‘œì‹œ
     */
    @GetMapping("/mypage/delete")
    public String deleteMemberForm(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }

        try {
            // ì‘ì„±í•œ ì½˜í…ì¸  ê°œìˆ˜ ì¡°íšŒ
            Map<String, Integer> contentCounts = memberService.getUserContentCounts(loginMember.getMemberId());
            
            model.addAttribute("member", loginMember);
            model.addAttribute("contentCounts", contentCounts);
            
            log.info("íšŒì›íƒˆí‡´ í˜ì´ì§€ ì ‘ê·¼: userId={}, ì‘ì„± ì½˜í…ì¸ ={}", 
                    loginMember.getUserId(), contentCounts);
                    
            return "member/deleteMember";
            
        } catch (Exception e) {
            log.error("íšŒì›íƒˆí‡´ í˜ì´ì§€ ë¡œë“œ ì¤‘ ì˜¤ë¥˜: {}", loginMember.getUserId(), e);
            model.addAttribute("member", loginMember);
            model.addAttribute("contentCounts", Map.of("board", 0, "review", 0, "job", 0));
            return "member/deleteMember";
        }
    }

    /**
     * íšŒì› íƒˆí‡´ ì²˜ë¦¬ (ë…¼ë¦¬ ì‚­ì œ)
     */
    @PostMapping("/mypage/delete")
    public String deleteMember(@RequestParam("password") String password,
                              @RequestParam("confirmName") String confirmName,
                              @RequestParam("deleteOption") String deleteOption,
                              HttpSession session, 
                              RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }

        String userId = loginMember.getUserId();
        log.info("íšŒì›íƒˆí‡´ ìš”ì²­: userId={}, ì…ë ¥ëœ ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´={}, ì…ë ¥ëœ ì´ë¦„={}, ì‚­ì œì˜µì…˜={}", 
                userId, password.length(), confirmName, deleteOption);
        
        try {
            // DBì—ì„œ ìµœì‹  ë¹„ë°€ë²ˆí˜¸ ì •ë³´ ì¡°íšŒ
            MemberDTO currentMember = memberService.findById(loginMember.getMemberId());
            if (currentMember == null) {
                log.warn("íšŒì›íƒˆí‡´: íšŒì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: memberId={}", loginMember.getMemberId());
                redirectAttributes.addFlashAttribute("error", "íšŒì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return "redirect:/member/mypage/delete";
            }
            
            // í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ (ê°œë°œìš©: í‰ë¬¸ ë¹„êµ)
            log.info("ë¹„ë°€ë²ˆí˜¸ ë¹„êµ: DB ë¹„ë°€ë²ˆí˜¸={}, ì…ë ¥ ë¹„ë°€ë²ˆí˜¸={}", 
                    currentMember.getPassword(), password);
            
            if (!password.equals(currentMember.getPassword())) {
                log.warn("íšŒì›íƒˆí‡´: ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜: userId={}", userId);
                redirectAttributes.addFlashAttribute("error", "í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                return "redirect:/member/mypage/delete";
            }
            
            log.info("ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì„±ê³µ: userId={}", userId);
            
            // ì´ë¦„ í™•ì¸ ê²€ì¦
            if (!confirmName.trim().equals(currentMember.getName().trim())) {
                log.warn("íšŒì›íƒˆí‡´: ì´ë¦„ ë¶ˆì¼ì¹˜: userId={}, ì…ë ¥ëœ ì´ë¦„={}, ë“±ë¡ëœ ì´ë¦„={}", 
                        userId, confirmName, currentMember.getName());
                redirectAttributes.addFlashAttribute("error", 
                        String.format("ì´ë¦„ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë“±ë¡ëœ ì´ë¦„ '%s'ë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.", currentMember.getName()));
                return "redirect:/member/mypage/delete";
            }
            
            log.info("ì´ë¦„ í™•ì¸ ì„±ê³µ: userId={}, ì´ë¦„={}", userId, confirmName);
            
            // íšŒì› íƒˆí‡´ ì²˜ë¦¬ (ì˜µì…˜ì— ë”°ë¼ ì²˜ë¦¬ ë°©ì‹ ê²°ì •)
            String resultMessage = memberService.deleteMemberWithOption(userId, deleteOption);
            log.info("íšŒì›íƒˆí‡´ ì™„ë£Œ: userId={}, ì˜µì…˜={}", userId, deleteOption);
            
            // ì„¸ì…˜ ë¬´íš¨í™”
            session.invalidate();
            
            redirectAttributes.addFlashAttribute("message", resultMessage + " ê·¸ë™ì•ˆ ì´ìš©í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.");
            return "redirect:/";
        } catch (Exception e) {
            log.error("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", userId, e);
            redirectAttributes.addFlashAttribute("error", "íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/mypage/delete";
        }
    }

    /**
     * ê´€ë¦¬ì: íšŒì› ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•, ì—­í•  í•„í„°ë§ ë“±)
     */
    @GetMapping("/admin/members")
    public String listMembers(@RequestParam(defaultValue = "1") int page,
                              @RequestParam(defaultValue = "10") int pageSize,
                              @RequestParam(required = false) String role,
                              Model model, HttpSession session, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);

        // ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ (ì—­í• ì´ ADMINì´ ì•„ë‹ˆë©´ ì ‘ê·¼ ë¶ˆí—ˆ)
        if (loginMember == null || !Constants.MEMBER_ROLE_ADMIN.equals(loginMember.getRole())) {
            redirectAttributes.addFlashAttribute("error", "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/"; // í™ˆìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë˜ëŠ” ë‹¤ë¥¸ ì—ëŸ¬ í˜ì´ì§€
        }

        try {
            MemberDTO searchDTO = new MemberDTO();
            searchDTO.setPageSize(pageSize);
            searchDTO.setOffset((page - 1) * pageSize);
            searchDTO.setRole(role); // ì—­í•  í•„í„°ë§ì„ ìœ„í•´ DTOì— role ì„¤ì •

            List<MemberDTO> members = memberService.getMembersWithPaging(searchDTO);
            int totalMembers = memberService.getTotalMembersCount(); // ì „ì²´ íšŒì› ìˆ˜

            int totalPages = (int) Math.ceil((double) totalMembers / pageSize);

            model.addAttribute("members", members);
            model.addAttribute("currentPage", page);
            model.addAttribute("totalPages", totalPages);
            model.addAttribute("pageSize", pageSize);
            model.addAttribute("currentRole", role); // í˜„ì¬ í•„í„°ë§ëœ ì—­í• 

            return "member/memberList"; // ê´€ë¦¬ì íšŒì› ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” Thymeleaf í…œí”Œë¦¿
        } catch (Exception e) {
            log.error("ê´€ë¦¬ì íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
            redirectAttributes.addFlashAttribute("error", "íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/";
        }
    }

    /**
     * ê´€ë¦¬ì: íšŒì› ìƒíƒœ ë³€ê²½ (í™œì„±í™”/ë¹„í™œì„±í™”)
     */
    @PostMapping("/admin/members/status")
    public String updateMemberStatus(@RequestParam Long memberId,
                                     @RequestParam boolean isActive,
                                     HttpSession session, RedirectAttributes redirectAttributes) {
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);

        // ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
        if (loginMember == null || !Constants.MEMBER_ROLE_ADMIN.equals(loginMember.getRole())) {
            redirectAttributes.addFlashAttribute("error", "ê´€ë¦¬ì ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
            return "redirect:/member/admin/members";
        }

        try {
            memberService.updateMemberStatus(memberId, isActive);
            redirectAttributes.addFlashAttribute("message", "íšŒì› ìƒíƒœê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
        } catch (Exception e) {
            log.error("íšŒì› ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}", memberId, e);
            redirectAttributes.addFlashAttribute("error", "íšŒì› ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        return "redirect:/member/admin/members"; // ë³€ê²½ í›„ íšŒì› ëª©ë¡ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    }
    
    /**
     * ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ í‘œì‹œ
     */
    @GetMapping("/mypost")
    public String myPosts(@RequestParam(defaultValue = "all") String type,
                         @RequestParam(defaultValue = "1") int page,
                         @RequestParam(defaultValue = "10") int pageSize,
                         HttpSession session, Model model, RedirectAttributes redirectAttributes) {
        
        MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
        if (loginMember == null) {
            redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return "redirect:/member/login";
        }
        
        try {
            Long memberId = loginMember.getMemberId();
            log.info("ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ ìš”ì²­: memberId={}, type={}, page={}", memberId, type, page);
            
            // í˜ì´ì§• ì„¤ì •
            int offset = (page - 1) * pageSize;
            
            // ì‘ì„±í•œ ì½˜í…ì¸  ì¡°íšŒ
            Map<String, Object> result = memberService.getMyPosts(memberId, type, page, pageSize, offset);
            
            // ëª¨ë¸ì— ë°ì´í„° ì¶”ê°€
            model.addAttribute("member", loginMember);
            model.addAttribute("posts", result.get("posts"));
            model.addAttribute("totalCount", result.get("totalCount"));
            model.addAttribute("currentType", type);
            model.addAttribute("currentPage", page);
            model.addAttribute("pageSize", pageSize);
            model.addAttribute("totalPages", (int) Math.ceil((double) (Integer) result.get("totalCount") / pageSize));
            
            // ì½˜í…ì¸  íƒ€ì…ë³„ ê°œìˆ˜
            Map<String, Integer> contentCounts = (Map<String, Integer>) result.get("contentCounts");
            model.addAttribute("contentCounts", contentCounts);
            
            log.info("ë‚´ê°€ ì“´ ê¸€ ì¡°íšŒ ì™„ë£Œ: ì´ {}ê°œ", result.get("totalCount"));
            
            return "member/myPosts";
            
        } catch (Exception e) {
            log.error("ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ ë¡œë“œ ì¤‘ ì˜¤ë¥˜: memberId={}", loginMember.getMemberId(), e);
            redirectAttributes.addFlashAttribute("error", "ë‚´ê°€ ì“´ ê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "redirect:/member/myinfo/edit";
        }
    }
}
````

## File: src/main/resources/templates/facility/detail.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ì‹œì„¤ ìƒì„¸ë³´ê¸°</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<div class="container mt-4">
    <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
            <li class="breadcrumb-item"><a href="/facility/search">ì‹œì„¤ ì°¾ê¸°</a></li>
            <li class="breadcrumb-item active" aria-current="page">ì‹œì„¤ ìƒì„¸</li>
        </ol>
    </nav>
    <!-- 4:6 ë¹„ìœ¨ë¡œ ë°°ì¹˜ -->
    <div class="row">
        <!-- ì™¼ìª½ 40%: ì‹œì„¤ ê¸°ë³¸ì •ë³´ + ì‹œì„¤ì •ë³´, ì‹œì„¤í˜„í™©, ì—°ë½ì²˜ì •ë³´, ê´€ë ¨ì„œë¹„ìŠ¤ -->
        <div class="col-md-5">
            <!-- ì‹œì„¤ ê¸°ë³¸ì •ë³´ -->
            <div class="card mb-3 shadow-sm" style="min-height: 500px;">
                <div class="card-header bg-light">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-building text-primary me-2"></i>
                        <h5 class="mb-0">ì‹œì„¤ ê¸°ë³¸ì •ë³´</h5>
                    </div>
                </div>
                <div class="card-body d-flex flex-column">
                    <!-- ì„¸ë¡œ ë°°ì¹˜: ì´ë¯¸ì§€ â†’ ë‚´ìš© â†’ ë²„íŠ¼ -->
                    
                    <!-- 1. ì‹œì„¤ ì´ë¯¸ì§€ -->
                    <div class="text-center mb-4 flex-grow-1" id="facilityImageContainer">
                        <div th:if="${facility.facilityImage != null and !#strings.isEmpty(facility.facilityImage)}">
                            <img th:src="${facility.facilityImage}"
                                 class="img-fluid rounded shadow-sm facility-detail-image"
                                 style="height: 250px; width: 100%; object-fit: cover;"
                                 alt="ì‹œì„¤ ì´ë¯¸ì§€"
                                 onerror="handleFacilityImageError(this)">
                        </div>
                        <div th:unless="${facility.facilityImage != null and !#strings.isEmpty(facility.facilityImage)}"
                             class="bg-light rounded d-flex align-items-center justify-content-center"
                             style="height: 250px; background-color: #f8f9fa;">
                            <div class="text-center text-muted">
                                <i class="fas fa-image fa-3x mb-2"></i>
                                <br>
                                <small>ì‹œì„¤ ì´ë¯¸ì§€ ì¤€ë¹„ ì¤‘</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 2. ì‹œì„¤ëª…, ë“±ê¸‰, ë³„ì  -->
                    <div class="text-center mb-4">
                        <h4 class="mb-3" th:text="${facility.facilityName}">ì‹œì„¤ëª…</h4>
                        <div class="d-flex flex-wrap gap-2 justify-content-center mb-3">
                            <span class="badge bg-primary fs-6" th:text="${facility.facilityType}">ì‹œì„¤ìœ í˜•</span>
                            <span th:if="${facility.gradeRating != null and facility.gradeRating > 0}" 
                                  class="badge fs-6 grade-badge"
                                  th:data-grade="${facility.gradeRating}"
                                  th:text="${facility.gradeRating} + 'ë“±ê¸‰'">1ë“±ê¸‰</span>
                            <span th:unless="${facility.gradeRating != null and facility.gradeRating > 0}" 
                                  class="badge bg-secondary fs-6">ë“±ê¸‰ ì •ë³´ ì—†ìŒ</span>
                        </div>
                        <div th:if="${facility.averageRating != null and facility.averageRating > 0}">
                            <span class="badge bg-warning text-dark fs-6">
                                <i class="fas fa-star"></i> <span th:text="${#numbers.formatDecimal(facility.averageRating, 1, 1)}">0.0</span>
                            </span>
                        </div>
                    </div>
                    
                    <!-- 3. ë²„íŠ¼ -->
                    <div class="mt-auto">
                        <!-- ê´€ë¦¬ì ë˜ëŠ” ì‹œì„¤ ì†Œìœ ìì¸ ê²½ìš° ê´€ë¦¬ ë²„íŠ¼ í‘œì‹œ -->
                        <div th:if="${isAdmin or isOwner}" class="mb-3">
                            <div class="row g-2">
                                <div class="col-6">
                                    <a th:href="@{/facility/edit/{id}(id=${facility.facilityId})}" 
                                       class="btn btn-warning w-100 btn-sm">
                                        <i class="fas fa-edit"></i><br><small>ì‹œì„¤ìˆ˜ì •</small>
                                    </a>
                                </div>
                                <div class="col-6">
                                    <button class="btn btn-danger w-100 btn-sm" 
                                            th:onclick="'deleteFacility(' + ${facility.facilityId} + ')'">
                                        <i class="fas fa-trash"></i><br><small>ì‹œì„¤ì‚­ì œ</small>
                                    </button>
                                </div>
                            </div>
                            <hr class="my-3">
                        </div>
                        
                        <!-- ì¼ë°˜ ì‚¬ìš©ì ë²„íŠ¼ -->
                        <div class="row g-2">
                            <div class="col-6">
                                <button class="btn btn-primary w-100 btn-sm" th:data-phone="${facility.phone}" onclick="callFacilityPhone(this)">
                                    <i class="fas fa-phone"></i><br><small>ì „í™”ìƒë‹´</small>
                                </button>
                            </div>
                            <div class="col-6">
                                <button class="btn btn-success w-100 btn-sm" onclick="writeReview()">
                                    <i class="fas fa-star"></i><br><small>ë¦¬ë·°ì‘ì„±</small>
                                </button>
                            </div>
                            <div class="col-6">
                                <button class="btn btn-outline-secondary w-100 btn-sm" onclick="shareToKakao()">
                                    <i class="fas fa-share"></i><br><small>ê³µìœ </small>
                                </button>
                            </div>
                            <div class="col-6">
                                <button class="btn btn-outline-primary w-100 btn-sm" onclick="searchNearbyJobs()">
                                    <i class="fas fa-briefcase"></i><br><small>ì£¼ë³€ì±„ìš©</small>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ì‹œì„¤ì •ë³´ -->
            <div class="card mb-3 shadow-sm">
                <div class="card-header bg-light">
                    <h6 class="mb-0"><i class="fas fa-info-circle text-primary me-2"></i>ì‹œì„¤ì •ë³´</h6>
                </div>
                <div class="card-body">
                    <div class="row small">
                        <div class="col-12">
                            <div class="info-item mb-2">
                                <i class="fas fa-map-marker-alt text-danger me-2"></i>
                                <span th:text="${facility.address}">ì£¼ì†Œ</span>
                            </div>
                            <div class="info-item mb-2">
                                <i class="fas fa-phone text-success me-2"></i>
                                <span th:text="${facility.phone}">ì „í™”ë²ˆí˜¸</span>
                            </div>
                            <div class="info-item mb-2">
                                <i class="fas fa-user-tie text-primary me-2"></i>
                                ì›ì¥: <span th:text="${facility.registeredMemberName}">ì›ì¥ëª…</span>
                            </div>
                            <div class="info-item mb-2">
                                <i class="fas fa-bed text-warning me-2"></i>
                                ì •ì›: <span th:text="${facility.capacity}">ì •ì›</span>ëª…
                                <span th:if="${facility.currentOccupancy != null}" class="text-muted">
                                    (í˜„ì¬: <span th:text="${facility.currentOccupancy}">0</span>ëª…)
                                </span>
                            </div>
                            <div class="info-item mb-2" th:if="${facility.homepage}">
                                <i class="fas fa-globe text-info me-2"></i>
                                <a th:href="${facility.homepage}" target="_blank" class="text-decoration-none">í™ˆí˜ì´ì§€</a>
                            </div>
                        </div>
                    </div>
                    <div th:if="${facility.description}" class="mt-3 pt-2 border-top">
                        <div class="small mb-0 rich-text-content" style="line-height: 1.4;" th:utext="${facility.description}">ì‹œì„¤ ì†Œê°œ</div>
                    </div>
                    <div th:if="${facility.features}" class="mt-2">
                        <div class="features-list">
                            <span th:each="feature : ${#strings.arraySplit(facility.features, ',')}" 
                                  class="badge bg-light text-dark me-1 mb-1" th:text="${feature}">íŠ¹ì§•</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì‹œì„¤í˜„í™© -->
            <div class="card mb-3 shadow-sm">
                <div class="card-header bg-light">
                    <h6 class="mb-0"><i class="fas fa-chart-bar text-primary me-2"></i>ì‹œì„¤í˜„í™©</h6>
                </div>
                <div class="card-body">
                    <div class="row text-center g-2">
                        <div class="col-6">
                            <div class="p-2 bg-light rounded">
                                <h5 th:if="${facility.gradeRating != null and facility.gradeRating > 0}"
                                    th:text="${facility.gradeRating} + 'ë“±ê¸‰'"
                                    class="grade-rating mb-1"
                                    th:data-grade="${facility.gradeRating}">1ë“±ê¸‰</h5>
                                <h5 th:unless="${facility.gradeRating != null and facility.gradeRating > 0}" class="text-muted mb-1">-</h5>
                                <small class="text-muted">ì‹œì„¤ë“±ê¸‰</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-2 bg-light rounded">
                                <h5 class="mb-1" th:text="${facility.capacity ?: '-'}">-</h5>
                                <small class="text-muted">ì •ì›</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-2 bg-light rounded">
                                <h5 class="mb-1" th:text="${facility.currentOccupancy ?: '0'}">0</h5>
                                <small class="text-muted">í˜„ì¬ì…ì†Œ</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-2 bg-light rounded">
                                <h5 th:if="${facility.averageRating != null and facility.averageRating > 0}"
                                    th:text="${#numbers.formatDecimal(facility.averageRating, 1, 1)}"
                                    class="text-warning mb-1">4.5</h5>
                                <h5 th:unless="${facility.averageRating != null and facility.averageRating > 0}" class="text-muted mb-1">0.0</h5>
                                <small class="text-muted">í‰ê· í‰ì </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>

        <!-- ì˜¤ë¥¸ìª½ 60%: ì§€ë„ì™€ ë¦¬ë·° -->
        <div class="col-md-7">
            <!-- ìœ„ì¹˜ ë° êµí†µì •ë³´ -->
            <div class="card mb-3 shadow-sm">
                <div class="card-header bg-light">
                    <h5 class="mb-0"><i class="fas fa-map-marker-alt text-danger me-2"></i>ìœ„ì¹˜ ë° êµí†µì •ë³´</h5>
                </div>
                <div class="card-body p-0">
                    <div id="facilityMap" style="width:100%; height:400px;">
                        <div class="d-flex align-items-center justify-content-center h-100 text-muted">
                            <div class="text-center">
                                <i class="fas fa-map fa-3x mb-3 text-primary"></i>
                                <p class="fs-6">ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                            </div>
                        </div>
                    </div>
                    <div class="p-3 bg-light border-top">
                        <div class="d-flex align-items-center mb-1">
                            <i class="fas fa-map-marker-alt text-danger me-2"></i>
                            <strong th:text="${facility.address}">ì£¼ì†Œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</strong>
                        </div>
                        <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            ì§€ë„ë¥¼ í´ë¦­í•˜ê±°ë‚˜ í™•ëŒ€/ì¶•ì†Œí•˜ì—¬ ë” ìì„¸í•œ ìœ„ì¹˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
                        </small>
                    </div>
                </div>
            </div>

            <!-- ì‹œì„¤ë¦¬ë·° -->
            <div class="card shadow-sm">
                <div class="card-header bg-light d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">
                        <i class="fas fa-comments text-primary me-2"></i>ì‹œì„¤ë¦¬ë·° 
                        <span class="badge bg-primary ms-2" th:text="${reviewCount}">0</span>
                    </h5>
                    <button class="btn btn-sm btn-primary" onclick="writeReview()">
                        <i class="fas fa-plus me-1"></i>ë¦¬ë·° ì‘ì„±
                    </button>
                </div>
                <div class="card-body">
                    <div id="reviewList">
                        <!-- ë¦¬ë·°ê°€ ìˆëŠ” ê²½ìš° -->
                        <div th:if="${not #lists.isEmpty(recentReviews)}">
                            <div th:each="review : ${recentReviews}" class="review-item border-bottom pb-3 mb-3">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1" th:text="${review.title}">ë¦¬ë·° ì œëª©</h6>
                                        <div class="mb-2">
                                            <span class="text-warning">
                                                <i th:each="i : ${#numbers.sequence(1, 5)}" 
                                                   th:class="${i <= review.rating} ? 'fas fa-star' : 'far fa-star'"></i>
                                            </span>
                                            <span class="ms-2 fw-bold" th:text="${review.rating} + '.0'">5.0</span>
                                        </div>
                                        <p class="text-muted small mb-2 rich-text-content" th:utext="${#strings.abbreviate(review.content, 100)}">ë¦¬ë·° ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°</p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <small class="text-muted">
                                                <i class="fas fa-user me-1"></i>
                                                <span th:text="${review.memberName}">ì‘ì„±ì</span>
                                                <span class="mx-2">|</span>
                                                <i class="fas fa-calendar me-1"></i>
                                                <span th:text="${#temporals.format(review.createdAt, 'yyyy-MM-dd')}">ì‘ì„±ì¼</span>
                                            </small>
                                            <a th:href="@{/review/detail/{id}(id=${review.reviewId})}" class="btn btn-sm btn-outline-secondary">
                                                <i class="fas fa-eye me-1"></i>ìƒì„¸ë³´ê¸°
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <a th:href="@{/review(facilityId=${facility.facilityId})}" class="btn btn-outline-primary me-2">
                                    <i class="fas fa-list me-1"></i>ì „ì²´ ë¦¬ë·° ë³´ê¸°
                                </a>
                                <!-- ì‹œì„¤ ì†Œìœ ìë§Œ ê´€ë¦¬ ë²„íŠ¼ í‘œì‹œ -->
                                <a th:if="${session.loginMember != null and session.loginMember.memberId == facility.registeredMemberId}" 
                                   th:href="@{/facility/manage}" class="btn btn-success">
                                    <i class="fas fa-cogs me-1"></i>ì‹œì„¤ ê´€ë¦¬
                                </a>
                            </div>
                        </div>
                        
                        <!-- ë¦¬ë·°ê°€ ì—†ëŠ” ê²½ìš° -->
                        <div th:if="${#lists.isEmpty(recentReviews)}" class="text-center text-muted py-4">
                            <i class="fas fa-comments fa-2x mb-2"></i>
                            <p>ì•„ì§ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                            <p class="small">ì²« ë²ˆì§¸ ë¦¬ë·°ë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”!</p>
                            <!-- ì‹œì„¤ ì†Œìœ ìë§Œ ê´€ë¦¬ ë²„íŠ¼ í‘œì‹œ -->
                            <div th:if="${session.loginMember != null and session.loginMember.memberId == facility.registeredMemberId}" class="mt-3">
                                <a th:href="@{/facility/manage}" class="btn btn-success">
                                    <i class="fas fa-cogs me-1"></i>ì‹œì„¤ ê´€ë¦¬
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{layout/footer :: footer}"></div>
<div th:replace="~{layout/footer :: scripts}"></div>

<!-- ì¹´ì¹´ì˜¤ë§µ JavaScript íŒŒì¼ -->
<script src="/js/kakaomap.js"></script>

<!-- ì¹´ì¹´ì˜¤ë§µ API -->
<script type="text/javascript" th:src="@{//dapi.kakao.com/v2/maps/sdk.js(appkey=${KAKAO_APP_KEY}, libraries='services,clusterer,drawing')}"></script>

<script th:inline="javascript">
    /*<![CDATA[*/
    // ì‹œì„¤ ì •ë³´ë¥¼ JavaScript ë³€ìˆ˜ë¡œ ì„ ì–¸
    const facilityData = {
        name: /*[[${facility.facilityName}]]*/ '',
        latitude: /*[[${facility.latitude}]]*/ 0,
        longitude: /*[[${facility.longitude}]]*/ 0,
        address: /*[[${facility.address}]]*/ '',
        phone: /*[[${facility.phone}]]*/ ''
    };

    $(document).ready(function() {
        // ì‹œì„¤ ë“±ê¸‰ ìƒ‰ìƒ ì ìš©
        $('.grade-badge').each(function() {
            const grade = parseInt($(this).data('grade'));
            switch(grade) {
                case 1:
                    $(this).addClass('bg-success');
                    break;
                case 2:
                    $(this).addClass('bg-info');
                    break;
                case 3:
                    $(this).addClass('bg-warning');
                    break;
                case 4:
                    $(this).addClass('bg-secondary');
                    break;
                case 5:
                    $(this).addClass('bg-danger');
                    break;
                default:
                    $(this).addClass('bg-secondary');
            }
        });
        
        $('.grade-rating').each(function() {
            const grade = parseInt($(this).data('grade'));
            switch(grade) {
                case 1:
                    $(this).addClass('text-success');
                    break;
                case 2:
                    $(this).addClass('text-info');
                    break;
                case 3:
                    $(this).addClass('text-warning');
                    break;
                case 4:
                    $(this).addClass('text-secondary');
                    break;
                case 5:
                    $(this).addClass('text-danger');
                    break;
                default:
                    $(this).addClass('text-muted');
            }
        });
        
        // ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸°í™” ëŒ€ê¸°
        setTimeout(function() {
            if (typeof kakao !== 'undefined') {
                initKakaoMap('facilityMap');
                
                // ì‹œì„¤ ìœ„ì¹˜ì— ë§ˆì»¤ ì¶”ê°€
                if (facilityData.latitude && facilityData.longitude) {
                    const infoContent = `
                        <div class="p-2" style="width:250px;">
                            <h6 class="mb-1">${facilityData.name}</h6>
                            <p class="mb-1 small">${facilityData.address}</p>
                            <p class="mb-0 small">
                                <i class="fas fa-phone me-1"></i>${facilityData.phone}
                            </p>
                        </div>
                    `;
                    
                    addMarker(
                        facilityData.latitude,
                        facilityData.longitude,
                        facilityData.name,
                        infoContent
                    );
                }
            } else {
                console.error('ì¹´ì¹´ì˜¤ë§µ SDK ë¡œë“œ ì‹¤íŒ¨');
            }
        }, 100); // 100ms í›„ ì‹¤í–‰
    });

    // ì‹œì„¤ ì´ë¯¸ì§€ ì—ëŸ¬ ì²˜ë¦¬ í•¨ìˆ˜
    function handleFacilityImageError(imgElement) {
        console.warn('âš ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:', imgElement.src);
        
        // ì´ë¯¸ ì—ëŸ¬ ì²˜ë¦¬ë˜ì—ˆëŠ”ì§€ í™•ì¸
        if (imgElement.classList.contains('error-handled')) {
            console.log('ì´ë¯¸ ì—ëŸ¬ ì²˜ë¦¬ëœ ì´ë¯¸ì§€ì…ë‹ˆë‹¤.');
            return;
        }
        
        // ì—ëŸ¬ ì²˜ë¦¬ ì™„ë£Œ í‘œì‹œ
        imgElement.classList.add('error-handled');
        
        // í”Œë ˆì´ìŠ¤í™€ë”ë¡œ êµì²´
        imgElement.style.display = 'none';
        
        const placeholder = document.createElement('div');
        placeholder.className = 'bg-light rounded d-flex align-items-center justify-content-center';
        placeholder.style.cssText = 'height: 250px; background-color: #f8f9fa;';
        placeholder.innerHTML = `
            <div class="text-center text-muted">
                <i class="fas fa-image fa-3x mb-2"></i>
                <br>
                <small>ì‹œì„¤ ì´ë¯¸ì§€ ì¤€ë¹„ ì¤‘</small>
            </div>
        `;
        
        imgElement.parentNode.insertBefore(placeholder, imgElement);
        console.log('âœ… ì‹œì„¤ ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë” ì²˜ë¦¬ ì™„ë£Œ');
    }

    // ì „í™”í•˜ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    function callFacilityPhone(button) {
        const phone = button.getAttribute('data-phone');
        if (phone) {
            window.location.href = `tel:${phone}`;
        }
    }

    // ë¦¬ë·° ì‘ì„± í˜ì´ì§€ë¡œ ì´ë™
    function writeReview() {
        window.location.href = `/review/write?facilityId=[[${facility.facilityId}]]`;
    }


    // ì£¼ë³€ êµ¬ì¸ì •ë³´ ê²€ìƒ‰
    function searchNearbyJobs() {
        const latitude = /*[[${facility.latitude}]]*/ 0;
        const longitude = /*[[${facility.longitude}]]*/ 0;
        window.location.href = `/job/list?lat=${latitude}&lng=${longitude}&radius=5`;
    }

    // ì¹´ì¹´ì˜¤í†¡ ê³µìœ í•˜ê¸°
    function shareToKakao() {
        const facilityId = /*[[${facility.facilityId}]]*/ 0;
        const facilityName = /*[[${facility.facilityName}]]*/ 'ì‹œì„¤ëª…';
        const address = /*[[${facility.address}]]*/ 'ì£¼ì†Œ';
        const logoImageUrl = /*[[${facility.facilityImage ?: 'https://via.placeholder.com/300x200?text=ì‹œì„¤ì´ë¯¸ì§€'}]]*/ 'https://via.placeholder.com/300x200?text=ì‹œì„¤ì´ë¯¸ì§€';

        if (window.Kakao) {
            Kakao.Link.sendDefault({
                objectType: 'location',
                address: address,
                addressTitle: facilityName,
                content: {
                    title: facilityName,
                    description: `${address}\nìƒì„¸ ì •ë³´ ë³´ê¸°`,
                    imageUrl: logoImageUrl,
                    link: {
                        mobileWebUrl: window.location.href,
                        webUrl: window.location.href
                    }
                },
                buttons: [
                    {
                        title: 'ìƒì„¸ ì •ë³´ ë³´ê¸°',
                        link: {
                            mobileWebUrl: window.location.href,
                            webUrl: window.location.href
                        }
                    }
                ]
            });
        } else {
            alert('ì¹´ì¹´ì˜¤í†¡ ê³µìœ í•˜ê¸°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }
    }

    // ì‹œì„¤ ì‚­ì œ í•¨ìˆ˜
    function deleteFacility(facilityId) {
        if (confirm('ì •ë§ë¡œ ì´ ì‹œì„¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ì‹œì„¤ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
            // AJAXë¡œ ì‚­ì œ ìš”ì²­
            fetch('/facility/delete/' + facilityId, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                }
            })
            .then(response => {
                if (response.ok) {
                    alert('ì‹œì„¤ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    window.location.href = '/facility/search';
                } else {
                    alert('ì‹œì„¤ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('ì‹œì„¤ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            });
        }
    }
    /*]]>*/
</script>

<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
<script>
    // ìƒˆë¡œìš´ App Keyë¡œ ì¹´ì¹´ì˜¤í†¡ SDK ì´ˆê¸°í™”
    Kakao.init(/*[[${KAKAO_APP_KEY}]]*/);
</script>
</body>
</html>
````

## File: src/main/resources/schema.sql
````sql
-- ================================================
-- ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ ì‚¬ì´íŠ¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
-- 4ì¸ íŒ€ í”„ë¡œì íŠ¸ ì „ìš© (ê°œì„  ë°˜ì˜ ë²„ì „)
-- ================================================

-- ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± (í•„ìš” ì‹œ)
CREATE DATABASE carelink DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE carelink;

-- ================================================
-- 1. íšŒì› í…Œì´ë¸” (íŒ€ì› A ë‹´ë‹¹)
-- ================================================
CREATE TABLE member (
    member_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'íšŒì› ID',
    user_id VARCHAR(20) NOT NULL UNIQUE COMMENT 'ì‚¬ìš©ì ID (ë¡œê·¸ì¸ìš©)',
    password VARCHAR(255) NOT NULL COMMENT 'ë¹„ë°€ë²ˆí˜¸',
    name VARCHAR(50) NOT NULL COMMENT 'ì´ë¦„',
    email VARCHAR(100) NOT NULL UNIQUE COMMENT 'ì´ë©”ì¼',
    phone VARCHAR(20) COMMENT 'íœ´ëŒ€í° ë²ˆí˜¸',
    role VARCHAR(20) NOT NULL DEFAULT 'USER' COMMENT 'ì—­í•  (USER, FACILITY, ADMIN)',
    address TEXT COMMENT 'ì£¼ì†Œ',
    detail_address TEXT COMMENT 'ìƒì„¸ ì£¼ì†Œ',
    profile_image VARCHAR(255) COMMENT 'í”„ë¡œí•„ ì´ë¯¸ì§€ ê²½ë¡œ',
    profile_image_alt_text VARCHAR(255) COMMENT 'í”„ë¡œí•„ ì´ë¯¸ì§€ alt í…ìŠ¤íŠ¸ (SEO ìµœì í™”ìš©)',
    is_active BOOLEAN NOT NULL DEFAULT TRUE COMMENT 'ê³„ì • í™œì„±í™” ì—¬ë¶€',
    login_fail_count INT NOT NULL DEFAULT 0 COMMENT 'ë¡œê·¸ì¸ ì‹¤íŒ¨ íšŸìˆ˜',
    last_login_at DATETIME COMMENT 'ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ìƒì„±ì¼ì‹œ',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    is_deleted BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ì‚­ì œ ì—¬ë¶€'
) COMMENT='íšŒì› ì •ë³´';

-- ================================================
-- 2. ì‹œì„¤ í…Œì´ë¸” (íŒ€ì› B ë‹´ë‹¹)
-- ================================================
CREATE TABLE facility (
    facility_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'ì‹œì„¤ ID',
    facility_name VARCHAR(100) NOT NULL COMMENT 'ì‹œì„¤ëª…',
    facility_type VARCHAR(20) NOT NULL COMMENT 'ì‹œì„¤ ìœ í˜• (NURSING_HOME, HOSPITAL, DAY_CARE)',
    address TEXT NOT NULL COMMENT 'ì£¼ì†Œ',
    detail_address TEXT COMMENT 'ìƒì„¸ ì£¼ì†Œ',
    phone VARCHAR(20) NOT NULL COMMENT 'ì „í™”ë²ˆí˜¸',
    latitude DECIMAL(10, 8) COMMENT 'ìœ„ë„',
    longitude DECIMAL(11, 8) COMMENT 'ê²½ë„',
    description TEXT COMMENT 'ì‹œì„¤ ì„¤ëª…',
    facility_image VARCHAR(255) COMMENT 'ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ê²½ë¡œ (ë ˆê±°ì‹œ í˜¸í™˜ì„±ìš©)',
    facility_image_alt_text VARCHAR(255) COMMENT 'ì‹œì„¤ ì´ë¯¸ì§€ alt í…ìŠ¤íŠ¸ (SEO ìµœì í™”ìš©)',
    homepage VARCHAR(255) COMMENT 'í™ˆí˜ì´ì§€ URL',
    capacity INT COMMENT 'ìˆ˜ìš© ì¸ì›',
    current_occupancy INT COMMENT 'í˜„ì¬ ì…ì†Œì ìˆ˜',
    operating_hours VARCHAR(100) COMMENT 'ìš´ì˜ ì‹œê°„',
    features TEXT COMMENT 'ì‹œì„¤ íŠ¹ì§•',
    average_rating FLOAT DEFAULT 0 COMMENT 'í‰ê·  í‰ì ',
    review_count INT DEFAULT 0 COMMENT 'ë¦¬ë·° ìˆ˜',
    grade_rating INT COMMENT 'ì‹œì„¤ ë“±ê¸‰ (1-5ë“±ê¸‰, 1ë“±ê¸‰ì´ ìµœê³ )',
    image_count INT DEFAULT 0 COMMENT 'ì‹œì„¤ ì´ë¯¸ì§€ ê°œìˆ˜ (facility_images í…Œì´ë¸” ê¸°ì¤€)',
    main_image_path VARCHAR(500) COMMENT 'ë©”ì¸ ì´ë¯¸ì§€ ê²½ë¡œ (ë‹¤ì¤‘ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ)',
    registered_member_id BIGINT NOT NULL COMMENT 'ë“±ë¡í•œ íšŒì› ID',
    is_approved BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ìŠ¹ì¸ ì—¬ë¶€',
    approval_status VARCHAR(20) NOT NULL DEFAULT 'PENDING' COMMENT 'ìŠ¹ì¸ ìƒíƒœ (PENDING, APPROVED, REJECTED)',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ìƒì„±ì¼ì‹œ',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    is_deleted BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ì‚­ì œ ì—¬ë¶€',
    FOREIGN KEY (registered_member_id) REFERENCES member(member_id)
) COMMENT='ì‹œì„¤ ì •ë³´';

-- ================================================
-- 3. ì‹œì„¤ ì´ë¯¸ì§€ í…Œì´ë¸” (ë‹¤ì¤‘ ì´ë¯¸ì§€ ì§€ì› - ìµœëŒ€ 5ì¥)
-- ================================================
CREATE TABLE facility_images (
    image_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'ì´ë¯¸ì§€ ID',
    facility_id BIGINT NOT NULL COMMENT 'ì‹œì„¤ ID',
    image_path VARCHAR(500) NOT NULL COMMENT 'ì´ë¯¸ì§€ ê²½ë¡œ',
    image_alt_text VARCHAR(200) COMMENT 'ì´ë¯¸ì§€ alt í…ìŠ¤íŠ¸ (SEO ìµœì í™”ìš©)',
    image_order INT DEFAULT 0 COMMENT 'ì´ë¯¸ì§€ ìˆœì„œ (0ë¶€í„° ì‹œì‘)',
    is_main_image BOOLEAN DEFAULT FALSE COMMENT 'ë©”ì¸ ì´ë¯¸ì§€ ì—¬ë¶€',
    upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'ì—…ë¡œë“œì¼ì‹œ',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    FOREIGN KEY (facility_id) REFERENCES facility(facility_id) ON DELETE CASCADE,
    INDEX idx_facility_images_facility_id (facility_id),
    INDEX idx_facility_images_main (facility_id, is_main_image),
    INDEX idx_facility_images_order (facility_id, image_order)
) COMMENT='ì‹œì„¤ ì´ë¯¸ì§€ (ìµœëŒ€ 5ì¥ ì§€ì›)';

-- ================================================
-- 4. êµ¬ì¸êµ¬ì§ ê²Œì‹œê¸€ í…Œì´ë¸” (íŒ€ì› C ë‹´ë‹¹)
-- ================================================
CREATE TABLE job_posting (
    job_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'êµ¬ì¸êµ¬ì§ ID',
    title VARCHAR(200) NOT NULL COMMENT 'ì œëª©',
    content TEXT NOT NULL COMMENT 'ë‚´ìš©',
    job_type VARCHAR(20) NOT NULL COMMENT 'êµ¬ì¸êµ¬ì§ ìœ í˜• (RECRUIT: êµ¬ì¸, SEARCH: êµ¬ì§)',
    work_type VARCHAR(20) NOT NULL COMMENT 'ê·¼ë¬´ í˜•íƒœ (FULL_TIME, PART_TIME, TEMPORARY)',
    position VARCHAR(50) COMMENT 'ëª¨ì§‘ ì§ì¢…',
    recruit_count INT COMMENT 'ëª¨ì§‘ ì¸ì›',
    salary_type VARCHAR(20) COMMENT 'ê¸‰ì—¬ ìœ í˜• (HOURLY, MONTHLY, ANNUAL)',
    salary_min DECIMAL(10, 0) COMMENT 'ìµœì†Œ ê¸‰ì—¬',
    salary_max DECIMAL(10, 0) COMMENT 'ìµœëŒ€ ê¸‰ì—¬',
    salary_description TEXT COMMENT 'ê¸‰ì—¬ ì„¤ëª…',
    work_location VARCHAR(100) COMMENT 'ê·¼ë¬´ ì§€ì—­',
    work_hours VARCHAR(100) COMMENT 'ê·¼ë¬´ ì‹œê°„',
    experience VARCHAR(50) COMMENT 'ê²½ë ¥ ì¡°ê±´',
    education VARCHAR(50) COMMENT 'í•™ë ¥ ì¡°ê±´',
    qualifications TEXT COMMENT 'ìê²© ìš”ê±´',
    benefits TEXT COMMENT 'ë³µë¦¬í›„ìƒ',
    start_date DATE COMMENT 'ëª¨ì§‘ ì‹œì‘ì¼',
    end_date DATE COMMENT 'ëª¨ì§‘ ë§ˆê°ì¼',
    contact_name VARCHAR(50) COMMENT 'ë‹´ë‹¹ì ì´ë¦„',
    contact_phone VARCHAR(20) COMMENT 'ë‹´ë‹¹ì ì—°ë½ì²˜',
    contact_email VARCHAR(100) COMMENT 'ë‹´ë‹¹ì ì´ë©”ì¼',
    status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE' COMMENT 'ê²Œì‹œê¸€ ìƒíƒœ (ACTIVE, CLOSED, DRAFT)',
    view_count INT NOT NULL DEFAULT 0 COMMENT 'ì¡°íšŒìˆ˜',
    apply_count INT NOT NULL DEFAULT 0 COMMENT 'ì§€ì›ì ìˆ˜',
    member_id BIGINT NOT NULL COMMENT 'ì‘ì„±ì ID',
    facility_id BIGINT COMMENT 'ê´€ë ¨ ì‹œì„¤ ID',
    attachment_path VARCHAR(255) COMMENT 'ì²¨ë¶€íŒŒì¼ ê²½ë¡œ',
    attachment_name VARCHAR(255) COMMENT 'ì²¨ë¶€íŒŒì¼ ì›ë³¸ëª…',
    priority INT NOT NULL DEFAULT 0 COMMENT 'ìš°ì„ ìˆœìœ„',
    is_highlight BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ê°•ì¡° í‘œì‹œ ì—¬ë¶€',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ìƒì„±ì¼ì‹œ',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    is_deleted BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ì‚­ì œ ì—¬ë¶€',
    FOREIGN KEY (member_id) REFERENCES member(member_id),
    FOREIGN KEY (facility_id) REFERENCES facility(facility_id)
) COMMENT='êµ¬ì¸êµ¬ì§ ê²Œì‹œê¸€';

-- ================================================
-- 5. ì‹œì„¤ ë¦¬ë·° í…Œì´ë¸” (íŒ€ì› D ë‹´ë‹¹)
-- ================================================
CREATE TABLE review (
    review_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'ë¦¬ë·° ID',
    facility_id BIGINT NOT NULL COMMENT 'ì‹œì„¤ ID',
    member_id BIGINT NOT NULL COMMENT 'ì‘ì„±ì ID',
    title VARCHAR(200) NOT NULL COMMENT 'ë¦¬ë·° ì œëª©',
    content TEXT NOT NULL COMMENT 'ë¦¬ë·° ë‚´ìš©',
    rating INT NOT NULL COMMENT 'í‰ì  (1-5ì )',
    service_rating INT COMMENT 'ì„œë¹„ìŠ¤ í‰ì ',
    facility_rating INT COMMENT 'ì‹œì„¤ í‰ì ',
    staff_rating INT COMMENT 'ì§ì› í‰ì ',
    price_rating INT COMMENT 'ê°€ê²© í‰ì ',
    review_image1 VARCHAR(255) COMMENT 'ë¦¬ë·° ì´ë¯¸ì§€ 1',
    review_image2 VARCHAR(255) COMMENT 'ë¦¬ë·° ì´ë¯¸ì§€ 2',
    review_image3 VARCHAR(255) COMMENT 'ë¦¬ë·° ì´ë¯¸ì§€ 3',
    like_count INT NOT NULL DEFAULT 0 COMMENT 'ì¶”ì²œ ìˆ˜',
    dislike_count INT NOT NULL DEFAULT 0 COMMENT 'ë¹„ì¶”ì²œ ìˆ˜',
    view_count INT NOT NULL DEFAULT 0 COMMENT 'ì¡°íšŒìˆ˜',
    is_visible BOOLEAN NOT NULL DEFAULT TRUE COMMENT 'í‘œì‹œ ì—¬ë¶€',
    status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE' COMMENT 'ìƒíƒœ (ACTIVE, HIDDEN, REPORTED)',
    parent_review_id BIGINT COMMENT 'ë¶€ëª¨ ë¦¬ë·° ID (ë‹µê¸€ì¸ ê²½ìš°)',
    reply_count INT NOT NULL DEFAULT 0 COMMENT 'ë‹µê¸€ ìˆ˜',
    reply_depth INT NOT NULL DEFAULT 0 COMMENT 'ë‹µê¸€ ê¹Šì´',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ìƒì„±ì¼ì‹œ',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    is_deleted BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ì‚­ì œ ì—¬ë¶€',
    FOREIGN KEY (facility_id) REFERENCES facility(facility_id),
    FOREIGN KEY (member_id) REFERENCES member(member_id),
    FOREIGN KEY (parent_review_id) REFERENCES review(review_id)
) COMMENT='ì‹œì„¤ ë¦¬ë·°';

-- ================================================
-- 6. ì •ë³´ ê²Œì‹œíŒ í…Œì´ë¸” (íŒ€ì› D ë‹´ë‹¹)
-- ================================================
CREATE TABLE board (
    board_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'ê²Œì‹œê¸€ ID',
    board_type VARCHAR(20) NOT NULL COMMENT 'ê²Œì‹œíŒ ìœ í˜• (NOTICE, INFO, QNA, FAQ)',
    title VARCHAR(200) NOT NULL COMMENT 'ì œëª©',
    content TEXT NOT NULL COMMENT 'ë‚´ìš©',
    member_id BIGINT NOT NULL COMMENT 'ì‘ì„±ì ID',
    view_count INT NOT NULL DEFAULT 0 COMMENT 'ì¡°íšŒìˆ˜',
    like_count INT NOT NULL DEFAULT 0 COMMENT 'ì¶”ì²œìˆ˜',
    comment_count INT NOT NULL DEFAULT 0 COMMENT 'ëŒ“ê¸€ìˆ˜',
    attachment_path VARCHAR(255) COMMENT 'ì²¨ë¶€íŒŒì¼ ê²½ë¡œ',
    attachment_name VARCHAR(255) COMMENT 'ì²¨ë¶€íŒŒì¼ ì›ë³¸ëª…',
    attachment_size BIGINT COMMENT 'ì²¨ë¶€íŒŒì¼ í¬ê¸°',
    is_notice BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ê³µì§€ì‚¬í•­ ì—¬ë¶€',
    is_secret BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ë¹„ë°€ê¸€ ì—¬ë¶€',
    is_active BOOLEAN NOT NULL DEFAULT TRUE COMMENT 'í™œì„± ìƒíƒœ',
    status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE' COMMENT 'ìƒíƒœ (ACTIVE, HIDDEN, DELETED)',
    category VARCHAR(50) COMMENT 'ì¹´í…Œê³ ë¦¬',
    sub_category VARCHAR(50) COMMENT 'ì„œë¸Œ ì¹´í…Œê³ ë¦¬',
    priority INT NOT NULL DEFAULT 0 COMMENT 'ìš°ì„ ìˆœìœ„',
    is_pinned BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ìƒë‹¨ ê³ ì • ì—¬ë¶€',
    parent_board_id BIGINT COMMENT 'ë¶€ëª¨ ê²Œì‹œê¸€ ID (ë‹µê¸€ì¸ ê²½ìš°)',
    reply_depth INT NOT NULL DEFAULT 0 COMMENT 'ë‹µê¸€ ê¹Šì´',
    reply_order INT NOT NULL DEFAULT 0 COMMENT 'ë‹µê¸€ ìˆœì„œ',
    tags VARCHAR(500) COMMENT 'íƒœê·¸ (ì½¤ë§ˆë¡œ êµ¬ë¶„)',
    meta_description TEXT COMMENT 'ë©”íƒ€ ì„¤ëª…',
    meta_keywords VARCHAR(500) COMMENT 'ë©”íƒ€ í‚¤ì›Œë“œ',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ìƒì„±ì¼ì‹œ',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    is_deleted BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ì‚­ì œ ì—¬ë¶€',
    FOREIGN KEY (member_id) REFERENCES member(member_id),
    FOREIGN KEY (parent_board_id) REFERENCES board(board_id)
) COMMENT='ì •ë³´ ê²Œì‹œíŒ';

-- ================================================
-- ì¸ë±ìŠ¤ ìƒì„± (ì„±ëŠ¥ ìµœì í™”)
-- ================================================

-- íšŒì› í…Œì´ë¸” ì¸ë±ìŠ¤
CREATE INDEX idx_member_user_id ON member(user_id);
CREATE INDEX idx_member_email ON member(email);
CREATE INDEX idx_member_role ON member(role);
CREATE INDEX idx_member_created_at ON member(created_at);
CREATE INDEX idx_member_is_deleted ON member(is_deleted);

-- ì‹œì„¤ í…Œì´ë¸” ì¸ë±ìŠ¤
CREATE INDEX idx_facility_type ON facility(facility_type);
CREATE INDEX idx_facility_location ON facility(latitude, longitude);
CREATE INDEX idx_facility_member_id ON facility(registered_member_id);
CREATE INDEX idx_facility_created_at ON facility(created_at);
CREATE INDEX idx_facility_approval ON facility(is_approved, approval_status);
CREATE INDEX idx_facility_rating ON facility(average_rating);
CREATE INDEX idx_facility_is_deleted ON facility(is_deleted);

-- ì‹œì„¤ ì´ë¯¸ì§€ í…Œì´ë¸” ì¸ë±ìŠ¤ (ë‹¤ì¤‘ ì´ë¯¸ì§€ ì§€ì› ê°•í™”)
-- ì£¼ì˜: facility_images í…Œì´ë¸” ìƒì„± ì‹œ ì´ë¯¸ ì •ì˜ëœ ì¸ë±ìŠ¤ëŠ” ì œì™¸
CREATE INDEX idx_facility_images_upload_date ON facility_images(upload_date);
CREATE INDEX idx_facility_images_alt_text ON facility_images(image_alt_text);

-- êµ¬ì¸êµ¬ì§ í…Œì´ë¸” ì¸ë±ìŠ¤
CREATE INDEX idx_job_type ON job_posting(job_type);
CREATE INDEX idx_job_work_type ON job_posting(work_type);
CREATE INDEX idx_job_member_id ON job_posting(member_id);
CREATE INDEX idx_job_facility_id ON job_posting(facility_id);
CREATE INDEX idx_job_created_at ON job_posting(created_at);
CREATE INDEX idx_job_status ON job_posting(status);
CREATE INDEX idx_job_location ON job_posting(work_location);
CREATE INDEX idx_job_is_deleted ON job_posting(is_deleted);

-- ë¦¬ë·° í…Œì´ë¸” ì¸ë±ìŠ¤
CREATE INDEX idx_review_facility_id ON review(facility_id);
CREATE INDEX idx_review_member_id ON review(member_id);
CREATE INDEX idx_review_created_at ON review(created_at);
CREATE INDEX idx_review_rating ON review(rating);
CREATE INDEX idx_review_status ON review(status);
CREATE INDEX idx_review_is_deleted ON review(is_deleted);

-- ê²Œì‹œíŒ í…Œì´ë¸” ì¸ë±ìŠ¤
CREATE INDEX idx_board_type ON board(board_type);
CREATE INDEX idx_board_member_id ON board(member_id);
CREATE INDEX idx_board_created_at ON board(created_at);
CREATE INDEX idx_board_category ON board(category);
CREATE INDEX idx_board_status ON board(status);
CREATE INDEX idx_board_priority ON board(priority);
CREATE INDEX idx_board_is_deleted ON board(is_deleted);

-- ================================================
-- ê¸°ë³¸ ë°ì´í„° ì‚½ì… (í…ŒìŠ¤íŠ¸ìš©) - ê°œì„  ë°˜ì˜
-- ================================================
INSERT INTO member (user_id, password, name, email, phone, role, address, is_active, login_fail_count, created_at, updated_at, is_deleted) VALUES
    ('admin', 'admin123', 'ê´€ë¦¬ì', 'admin@carelink.com', '02-1234-5678', 'ADMIN', 'ì„œìš¸ì‹œ ì¢…ë¡œêµ¬ ì„¸ì¢…ëŒ€ë¡œ 1', TRUE, 0, NOW(), NOW(), FALSE),
    ('user01', 'user123', 'ê¹€ì² ìˆ˜', 'kim.cs@example.com', '010-1111-2222', 'USER', 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123', TRUE, 0, NOW(), NOW(), FALSE),
    ('user02', 'user123', 'ì´ì˜í¬', 'lee.yh@example.com', '010-2222-3333', 'USER', 'ë¶€ì‚°ì‹œ í•´ìš´ëŒ€êµ¬ ì„¼í…€ì¤‘ì•™ë¡œ 79', TRUE, 0, NOW(), NOW(), FALSE),
    ('user03', 'user123', 'ë°•ë¯¼ìˆ˜', 'park.ms@example.com', '010-3333-4444', 'USER', 'ëŒ€êµ¬ì‹œ ì¤‘êµ¬ ë™ì„±ë¡œ 1', TRUE, 0, NOW(), NOW(), FALSE),
    ('user04', 'user123', 'ìµœì§€ì€', 'choi.je@example.com', '010-4444-5555', 'USER', 'ì¸ì²œì‹œ ë‚¨ë™êµ¬ êµ¬ì›”ë™ 1234', TRUE, 0, NOW(), NOW(), FALSE),
    ('facility01', 'facility123', 'ì„œìš¸ìš”ì–‘ì›ì¥', 'seoul.admin@example.com', '02-5555-6666', 'FACILITY', 'ì„œìš¸ì‹œ ì„œì´ˆêµ¬ ì„œì´ˆëŒ€ë¡œ 123', TRUE, 0, NOW(), NOW(), FALSE),
    ('facility02', 'facility123', 'ë¶€ì‚°ì‹¤ë²„íƒ€ìš´ì¥', 'busan.admin@example.com', '051-7777-8888', 'FACILITY', 'ë¶€ì‚°ì‹œ ë¶€ì‚°ì§„êµ¬ ì„œë©´ë¡œ 456', TRUE, 0, NOW(), NOW(), FALSE);

-- ì‹œì„¤ ë°ì´í„° (ë‹¤ì¤‘ ì´ë¯¸ì§€ ì§€ì› ë°˜ì˜)
INSERT INTO facility (facility_name, facility_type, address, detail_address, phone, latitude, longitude, description, capacity, current_occupancy, operating_hours, features, average_rating, review_count, grade_rating, image_count, main_image_path, registered_member_id, is_approved, approval_status, created_at, updated_at, is_deleted) VALUES
    ('ì„œìš¸ í–‰ë³µìš”ì–‘ì›', 'NURSING_HOME', 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123', '2ì¸µ 201í˜¸', '02-1111-2222', 37.500913, 127.037149, '24ì‹œê°„ ì „ë¬¸ ê°„ë³‘ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” í”„ë¦¬ë¯¸ì—„ ìš”ì–‘ì›ì…ë‹ˆë‹¤.', 50, 35, '24ì‹œê°„ ìš´ì˜', '24ì‹œê°„ ê°„ë³‘ì„œë¹„ìŠ¤, ë¬¼ë¦¬ì¹˜ë£Œì‹¤, ì¸ì§€ì¹˜ë£Œ í”„ë¡œê·¸ë¨', 4.5, 8, 1, 0, NULL, 6, TRUE, 'APPROVED', NOW(), NOW(), FALSE),
    ('ë¶€ì‚° ë°”ë‹¤ë·° ì‹¤ë²„íƒ€ìš´', 'NURSING_HOME', 'ë¶€ì‚°ì‹œ í•´ìš´ëŒ€êµ¬ ì„¼í…€ì¤‘ì•™ë¡œ 79', '1ì¸µ', '051-3333-4444', 35.169188, 129.132800, 'ë°”ë‹¤ê°€ ë³´ì´ëŠ” ì•„ë¦„ë‹¤ìš´ í™˜ê²½ì˜ ì‹¤ë²„íƒ€ìš´ì…ë‹ˆë‹¤.', 80, 60, '08:00-22:00', 'ë°”ë‹¤ë·°, ì‹¤ë²„ì¹´í˜, ë„ì„œê´€, ìˆ˜ì˜ì¥', 4.2, 12, 2, 0, NULL, 7, TRUE, 'APPROVED', NOW(), NOW(), FALSE),
    ('ëŒ€ì „ ê±´ê°• ë°ì´ì¼€ì–´ì„¼í„°', 'DAY_CARE', 'ëŒ€ì „ì‹œ ìœ ì„±êµ¬ ê³¼í•™ë¡œ 123', 'B1ì¸µ', '042-5555-6666', 36.350411, 127.384548, 'ì£¼ê°„ë³´í˜¸ ì „ë¬¸ ì„¼í„°ë¡œ ë‹¤ì–‘í•œ í”„ë¡œê·¸ë¨ì„ ìš´ì˜í•©ë‹ˆë‹¤.', 30, 20, '09:00-18:00', 'ì†¡ì˜ë²„ìŠ¤, ê¸‰ì‹ì„œë¹„ìŠ¤, ê±´ê°•ê´€ë¦¬ í”„ë¡œê·¸ë¨', 4.0, 6, 3, 0, NULL, 6, TRUE, 'APPROVED', NOW(), NOW(), FALSE),
    ('ì¸ì²œ í‰ì•ˆ ìš”ì–‘ë³‘ì›', 'HOSPITAL', 'ì¸ì²œì‹œ ë‚¨ë™êµ¬ êµ¬ì›”ë™ 1234', '3-5ì¸µ', '032-7777-8888', 37.456256, 126.731536, 'ì˜ë£Œì§„ì´ ìƒì£¼í•˜ëŠ” ì „ë¬¸ ìš”ì–‘ë³‘ì›ì…ë‹ˆë‹¤.', 100, 75, '24ì‹œê°„ ìš´ì˜', 'ì˜ë£Œì§„ ìƒì£¼, ì‘ê¸‰ì‹¤, ì¬í™œì¹˜ë£Œì‹¤, ê²€ì‚¬ì‹¤', 4.3, 15, 1, 0, NULL, 6, TRUE, 'APPROVED', NOW(), NOW(), FALSE),
    ('ê²½ê¸° ì‚¬ë‘ ì¬ê°€ì„¼í„°', 'DAY_CARE', 'ê²½ê¸°ë„ ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬ ì¤‘ë¶€ëŒ€ë¡œ 123', '1ì¸µ', '031-9999-0000', 37.283897, 127.009121, 'ì¬ê°€ ìš”ì–‘ ì„œë¹„ìŠ¤ ì „ë¬¸ ì„¼í„°ì…ë‹ˆë‹¤.', 25, 18, '08:00-20:00', 'ì¬ê°€ë°©ë¬¸, ëª©ìš•ì„œë¹„ìŠ¤, ê°„ë³‘ì„œë¹„ìŠ¤', 3.8, 4, 4, 0, NULL, 6, TRUE, 'APPROVED', NOW(), NOW(), FALSE);

-- êµ¬ì¸êµ¬ì§ ë°ì´í„°
INSERT INTO job_posting (title, content, job_type, work_type, position, recruit_count, salary_type, salary_min, salary_max, salary_description, work_location, work_hours, experience, education, qualifications, benefits, start_date, end_date, contact_name, contact_phone, contact_email, status, member_id, facility_id, priority, is_highlight, created_at, updated_at, is_deleted) VALUES
    ('[ì„œìš¸ í–‰ë³µìš”ì–‘ì›] ìš”ì–‘ë³´í˜¸ì‚¬ ì •ê·œì§ ëª¨ì§‘', 'ê²½ë ¥ 3ë…„ ì´ìƒ ìš”ì–‘ë³´í˜¸ì‚¬ë¥¼ ëª¨ì§‘í•©ë‹ˆë‹¤. ì„±ì‹¤í•˜ê³  ì±…ì„ê° ìˆëŠ” ë¶„ì„ ì°¾ìŠµë‹ˆë‹¤.', 'RECRUIT', 'FULL_TIME', 'ìš”ì–‘ë³´í˜¸ì‚¬', 3, 'MONTHLY', 2800000, 3200000, 'ê²½ë ¥ì— ë”°ë¼ ì°¨ë“± ì§€ê¸‰', 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬', '3êµëŒ€ (08:00-16:00, 16:00-24:00, 24:00-08:00)', '3ë…„ ì´ìƒ', 'ê³ ë“±í•™êµ ì¡¸ì—… ì´ìƒ', 'ìš”ì–‘ë³´í˜¸ì‚¬ ìê²©ì¦ í•„ìˆ˜', '4ëŒ€ë³´í—˜, í‡´ì§ê¸ˆ, ëª…ì ˆìƒì—¬ê¸ˆ, êµìœ¡ë¹„ ì§€ì›', '2024-01-15', '2024-02-15', 'ê¹€ê³¼ì¥', '02-1111-2222', 'recruit@seoul-happy.com', 'ACTIVE', 6, 1, 5, FALSE, NOW(), NOW(), FALSE),
    ('[ë¶€ì‚° ë°”ë‹¤ë·° ì‹¤ë²„íƒ€ìš´] ê°„í˜¸ì‚¬ ëª¨ì§‘', 'ì‹¤ë²„íƒ€ìš´ì—ì„œ ê·¼ë¬´í•  ê°„í˜¸ì‚¬ë¥¼ ëª¨ì§‘í•©ë‹ˆë‹¤. ë…¸ì¸ ê°„í˜¸ ê²½í—˜ì ìš°ëŒ€', 'RECRUIT', 'FULL_TIME', 'ê°„í˜¸ì‚¬', 2, 'MONTHLY', 3500000, 4000000, 'ì•¼ê°„ê·¼ë¬´ìˆ˜ë‹¹ ë³„ë„', 'ë¶€ì‚°ì‹œ í•´ìš´ëŒ€êµ¬', '2êµëŒ€ (09:00-21:00, 21:00-09:00)', '1ë…„ ì´ìƒ', 'ê°„í˜¸ëŒ€í•™ ì¡¸ì—…', 'ê°„í˜¸ì‚¬ ë©´í—ˆì¦ í•„ìˆ˜', '4ëŒ€ë³´í—˜, í‡´ì§ê¸ˆ, ì•¼ê°„ìˆ˜ë‹¹, ì£¼ë§ìˆ˜ë‹¹', '2024-01-20', '2024-02-20', 'ì´íŒ€ì¥', '051-3333-4444', 'hr@busan-silver.com', 'ACTIVE', 7, 2, 3, TRUE, NOW(), NOW(), FALSE),
    ('[ê²½ë ¥ì§ ìš”ì–‘ë³´í˜¸ì‚¬] ì¢‹ì€ ê·¼ë¬´í™˜ê²½ ì°¾ìŠµë‹ˆë‹¤', '10ë…„ ê²½ë ¥ì˜ ìš”ì–‘ë³´í˜¸ì‚¬ì…ë‹ˆë‹¤. ì•¼ê°„ê·¼ë¬´ ê°€ëŠ¥í•˜ë©° ì„±ì‹¤íˆ ê·¼ë¬´í•˜ê² ìŠµë‹ˆë‹¤.', 'SEARCH', 'FULL_TIME', 'ìš”ì–‘ë³´í˜¸ì‚¬', 1, 'MONTHLY', 2500000, 3000000, 'ì•¼ê°„ìˆ˜ë‹¹ í¬í•¨ í¬ë§', 'ì„œìš¸/ê²½ê¸° ì§€ì—­', '3êµëŒ€ ê°€ëŠ¥', '10ë…„', 'ê³ ë“±í•™êµ ì¡¸ì—…', 'ìš”ì–‘ë³´í˜¸ì‚¬ 1ê¸‰ ìê²©ì¦', '4ëŒ€ë³´í—˜, í‡´ì§ê¸ˆ', '2024-01-10', '2024-03-10', 'í™ê¸¸ë™', '010-1234-5678', 'hong@example.com', 'ACTIVE', 2, NULL, 0, FALSE, NOW(), NOW(), FALSE),
    ('ëŒ€ì „ ë°ì´ì¼€ì–´ì„¼í„° ì‚¬íšŒë³µì§€ì‚¬ ëª¨ì§‘', 'ë°ì´ì¼€ì–´ì„¼í„°ì—ì„œ ê·¼ë¬´í•  ì‚¬íšŒë³µì§€ì‚¬ë¥¼ ëª¨ì§‘í•©ë‹ˆë‹¤.', 'RECRUIT', 'FULL_TIME', 'ì‚¬íšŒë³µì§€ì‚¬', 1, 'MONTHLY', 2600000, 2800000, 'ê¸°ë³¸ê¸‰ + ìˆ˜ë‹¹', 'ëŒ€ì „ì‹œ ìœ ì„±êµ¬', '09:00-18:00 (ì›”-í† )', 'ì‹ ì… ê°€ëŠ¥', 'ì‚¬íšŒë³µì§€í•™ê³¼ ì¡¸ì—…', 'ì‚¬íšŒë³µì§€ì‚¬ 2ê¸‰ ì´ìƒ', '4ëŒ€ë³´í—˜, í‡´ì§ê¸ˆ, êµìœ¡ë¹„ ì§€ì›', '2024-01-25', '2024-02-25', 'ë°•ì‹¤ì¥', '042-5555-6666', 'welfare@daejeon.com', 'ACTIVE', 6, 3, 2, FALSE, NOW(), NOW(), FALSE),
    ('ë¬¼ë¦¬ì¹˜ë£Œì‚¬ íŒŒíŠ¸íƒ€ì„ êµ¬ì§í•©ë‹ˆë‹¤', 'ë¬¼ë¦¬ì¹˜ë£Œ ê²½ë ¥ 5ë…„ìœ¼ë¡œ íŒŒíŠ¸íƒ€ì„ìœ¼ë¡œ ê·¼ë¬´í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.', 'SEARCH', 'PART_TIME', 'ë¬¼ë¦¬ì¹˜ë£Œì‚¬', 1, 'HOURLY', 25000, 30000, 'ì‹œê°„ë‹¹ í¬ë§', 'ìˆ˜ë„ê¶Œ ì§€ì—­', 'ì£¼ 3ì¼ ì´ë‚´', '5ë…„', 'ë¬¼ë¦¬ì¹˜ë£Œí•™ê³¼ ì¡¸ì—…', 'ë¬¼ë¦¬ì¹˜ë£Œì‚¬ ë©´í—ˆì¦', '4ëŒ€ë³´í—˜', '2024-01-12', '2024-02-12', 'ê¹€ë¬¼ë¦¬', '010-9999-8888', 'pt.kim@example.com', 'ACTIVE', 3, NULL, 0, FALSE, NOW(), NOW(), FALSE);

-- ë¦¬ë·° ë°ì´í„°
INSERT INTO review (facility_id, member_id, title, content, rating, service_rating, facility_rating, staff_rating, price_rating, like_count, dislike_count, view_count, is_visible, status, parent_review_id, reply_count, reply_depth, created_at, updated_at, is_deleted) VALUES
    (1, 2, 'ì„œìš¸ í–‰ë³µìš”ì–‘ì› ì´ìš© í›„ê¸°', 'ì–´ë¨¸ë‹ˆë¥¼ ëª¨ì‹œê³  ìˆëŠ”ë° ì‹œì„¤ë„ ê¹¨ë—í•˜ê³  ì§ì›ë¶„ë“¤ì´ ì •ë§ ì¹œì ˆí•©ë‹ˆë‹¤. íŠ¹íˆ ê°„ë³‘ì„œë¹„ìŠ¤ê°€ 24ì‹œê°„ ì œê³µë˜ì–´ ì•ˆì‹¬ì´ ë©ë‹ˆë‹¤. ì¶”ì²œí•©ë‹ˆë‹¤!', 5, 5, 4, 5, 4, 8, 0, 45, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (1, 3, 'ë§Œì¡±ìŠ¤ëŸ¬ìš´ ìš”ì–‘ì›', 'ì•„ë²„ì§€ê°€ í¸ì•ˆí•˜ê²Œ ì§€ë‚´ê³  ê³„ì„¸ìš”. ë¬¼ë¦¬ì¹˜ë£Œ í”„ë¡œê·¸ë¨ë„ ì˜ ë˜ì–´ ìˆê³  ì‹ì‚¬ë„ ë§›ìˆë‹¤ê³  í•˜ì‹­ë‹ˆë‹¤.', 4, 4, 4, 4, 4, 5, 0, 32, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (1, 4, 'ì¢‹ì€ ì„ íƒì´ì—ˆìŠµë‹ˆë‹¤', 'ì²˜ìŒì—” ë§ì„¤ì˜€ëŠ”ë° ê°€ì¡± ëª¨ë‘ ë§Œì¡±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì¸ì§€ì¹˜ë£Œ í”„ë¡œê·¸ë¨ì´ íŠ¹íˆ ì¢‹ë„¤ìš”.', 4, 4, 4, 5, 3, 3, 0, 28, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (2, 2, 'ë¶€ì‚° ë°”ë‹¤ë·° ì‹¤ë²„íƒ€ìš´ ì¶”ì²œ', 'ë°”ë‹¤ê°€ ë³´ì´ëŠ” ë·°ê°€ ì •ë§ ì¢‹ì•„ìš”. í• ë¨¸ë‹ˆê°€ ë§¤ì¼ ë°”ë‹¤ë¥¼ ë³´ë©° ì‚°ì±…í•˜ì‹ ë‹¤ê³  í•˜ë‹ˆ ë§ˆìŒì´ ë†“ì…ë‹ˆë‹¤.', 5, 4, 5, 4, 4, 12, 1, 67, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (2, 3, 'ì‹œì„¤ì´ í˜„ëŒ€ì ì´ì—ìš”', 'ìµœì‹  ì‹œì„¤ë¡œ ì˜ ê°–ì¶°ì ¸ ìˆê³  ìˆ˜ì˜ì¥ë„ ìˆì–´ì„œ ì¢‹ìŠµë‹ˆë‹¤. ë‹¤ë§Œ ë¹„ìš©ì´ ì¢€ ìˆëŠ” í¸ì´ì—ìš”.', 4, 4, 5, 4, 3, 6, 0, 39, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (2, 4, 'ì‹¤ë²„ì¹´í˜ê°€ ì¸ìƒì ', 'ì‹¤ë²„ì¹´í˜ì—ì„œ ë‹¤ë¥¸ ì–´ë¥´ì‹ ë“¤ê³¼ ëŒ€í™”í•˜ë©° ì‹œê°„ì„ ë³´ë‚´ì‹ ë‹¤ê³  í•˜ë„¤ìš”. ì‚¬íšŒí™œë™ì— ë„ì›€ì´ ë©ë‹ˆë‹¤.', 4, 4, 4, 4, 4, 4, 0, 25, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (3, 2, 'ëŒ€ì „ ë°ì´ì¼€ì–´ì„¼í„° ì´ìš©ê¸°', 'ì£¼ê°„ë³´í˜¸ë¡œ ì´ìš©í•˜ê³  ìˆëŠ”ë° í”„ë¡œê·¸ë¨ì´ ë‹¤ì–‘í•´ì„œ ì¢‹ìŠµë‹ˆë‹¤. ì†¡ì˜ë²„ìŠ¤ë„ í¸ë¦¬í•˜ê³ ìš”.', 4, 4, 4, 4, 4, 7, 0, 41, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (3, 5, 'ê±´ê°•ê´€ë¦¬ í”„ë¡œê·¸ë¨ ë§Œì¡±', 'ê±´ê°•ê´€ë¦¬ í”„ë¡œê·¸ë¨ì´ ì²´ê³„ì ìœ¼ë¡œ ì˜ ë˜ì–´ ìˆì–´ìš”. í˜ˆì••, í˜ˆë‹¹ ê´€ë¦¬ë„ ê¼¼ê¼¼íˆ í•´ì£¼ì‹­ë‹ˆë‹¤.', 4, 5, 3, 4, 4, 5, 0, 33, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (4, 3, 'ì¸ì²œ í‰ì•ˆ ìš”ì–‘ë³‘ì› í›„ê¸°', 'ì˜ë£Œì§„ì´ ìƒì£¼í•´ì„œ ì•ˆì‹¬ì´ ë©ë‹ˆë‹¤. ì‘ê¸‰ìƒí™©ì—ë„ ë¹ ë¥´ê²Œ ëŒ€ì‘í•´ì£¼ì…”ì„œ ê°ì‚¬í–ˆìŠµë‹ˆë‹¤.', 5, 5, 4, 5, 4, 9, 0, 52, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (4, 4, 'ì „ë¬¸ì ì¸ ì˜ë£Œì„œë¹„ìŠ¤', 'ì¬í™œì¹˜ë£Œì‹¤ ì‹œì„¤ì´ ì¢‹ê³  ë¬¼ë¦¬ì¹˜ë£Œ ì„ ìƒë‹˜ë“¤ì´ ì „ë¬¸ì ìœ¼ë¡œ ì¹˜ë£Œí•´ì£¼ì‹­ë‹ˆë‹¤.', 4, 4, 4, 4, 4, 6, 0, 37, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (5, 2, 'ê²½ê¸° ì‚¬ë‘ ì¬ê°€ì„¼í„° ì´ìš© í›„ê¸°', 'ì¬ê°€ ì„œë¹„ìŠ¤ë¡œ ì´ìš©í•˜ê³  ìˆëŠ”ë° ë°©ë¬¸ ì‹œê°„ë„ ì •í™•í•˜ê³  ì„œë¹„ìŠ¤ í’ˆì§ˆì´ ì¢‹ìŠµë‹ˆë‹¤.', 4, 4, 4, 4, 4, 4, 0, 29, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (1, 5, 'ê°ì‚¬í•©ë‹ˆë‹¤', 'ì§ì› ë¶„ë“¤ì˜ ì„¸ì‹¬í•œ ë°°ë ¤ì— ê°ì‚¬ë“œë¦½ë‹ˆë‹¤. ì–´ë¨¸ë‹ˆê°€ ë§ì´ ì¢‹ì•„ì§€ì…¨ì–´ìš”.', 5, 5, 4, 5, 4, 2, 0, 18, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE);

-- ê²Œì‹œíŒ ë°ì´í„°
INSERT INTO board (board_type, title, content, member_id, view_count, like_count, comment_count, is_notice, is_secret, is_active, status, category, sub_category, priority, is_pinned, parent_board_id, reply_depth, reply_order, tags, meta_description, meta_keywords, created_at, updated_at, is_deleted) VALUES
    ('NOTICE', 'ë¼ì´íŠ¸ì¼€ì–´ ì„œë¹„ìŠ¤ ì˜¤í”ˆ ì•ˆë‚´', 'ì•ˆë…•í•˜ì„¸ìš”. ë¼ì´íŠ¸ì¼€ì–´ ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ í”Œë«í¼ì´ ì •ì‹ ì˜¤í”ˆë˜ì—ˆìŠµë‹ˆë‹¤. ë§ì€ ì´ìš© ë¶€íƒë“œë¦½ë‹ˆë‹¤.', 1, 125, 15, 3, TRUE, FALSE, TRUE, 'ACTIVE', 'NOTICE', 'ì„œë¹„ìŠ¤', 10, TRUE, NULL, 0, 0, 'ì˜¤í”ˆ,ì•ˆë‚´,ì„œë¹„ìŠ¤', 'ë¼ì´íŠ¸ì¼€ì–´ ì„œë¹„ìŠ¤ ì˜¤í”ˆ ì•ˆë‚´', 'ë¼ì´íŠ¸ì¼€ì–´,ì˜¤í”ˆ,ì„œë¹„ìŠ¤,ìš”ì–‘ì›', NOW(), NOW(), FALSE),
    ('INFO', 'ìš”ì–‘ì› ì„ íƒ ì‹œ ê³ ë ¤ì‚¬í•­', 'ì¢‹ì€ ìš”ì–‘ì›ì„ ì„ íƒí•˜ê¸° ìœ„í•´ ê³ ë ¤í•´ì•¼ í•  ì¤‘ìš”í•œ ì‚¬í•­ë“¤ì„ ì •ë¦¬í•´ë“œë¦½ë‹ˆë‹¤. 1. ì‹œì„¤ í™˜ê²½ 2. ì§ì›ì˜ ì „ë¬¸ì„± 3. ì˜ë£Œ ì„œë¹„ìŠ¤ 4. í”„ë¡œê·¸ë¨ ë‹¤ì–‘ì„± 5. ë¹„ìš© íˆ¬ëª…ì„±', 1, 89, 12, 5, FALSE, FALSE, TRUE, 'ACTIVE', 'INFO', 'ê°€ì´ë“œ', 5, FALSE, NULL, 0, 0, 'ìš”ì–‘ì›,ì„ íƒ,ê°€ì´ë“œ', 'ìš”ì–‘ì› ì„ íƒ ê°€ì´ë“œ', 'ìš”ì–‘ì›,ì„ íƒ,ê°€ì´ë“œ,ì‹œì„¤', NOW(), NOW(), FALSE),
    ('QNA', 'ìš”ì–‘ë³´í—˜ ì ìš© ê´€ë ¨ ë¬¸ì˜', 'êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨ì—ì„œ ì‹œí–‰í•˜ëŠ” ìš”ì–‘ë³´í—˜ì´ ì–´ë–¤ ì‹œì„¤ì— ì ìš©ë˜ëŠ”ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤.', 2, 67, 3, 2, FALSE, FALSE, TRUE, 'ACTIVE', 'QNA', 'ë³´í—˜', 0, FALSE, NULL, 0, 0, 'ìš”ì–‘ë³´í—˜,ë¬¸ì˜', 'ìš”ì–‘ë³´í—˜ ì ìš© ê´€ë ¨ ë¬¸ì˜', 'ìš”ì–‘ë³´í—˜,ê±´ê°•ë³´í—˜,ì ìš©', NOW(), NOW(), FALSE),
    ('FAQ', 'ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ ëª¨ìŒ', 'Q1. ì…ì†Œ ì ˆì°¨ëŠ” ì–´ë–»ê²Œ ë˜ë‚˜ìš”? A1. ìƒë‹´ â†’ ê²¬í•™ â†’ ì„œë¥˜ ì œì¶œ â†’ ì…ì†Œ ê³„ì•½ ìˆœìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤. Q2. ë©´íšŒ ì‹œê°„ì€ ì–¸ì œì¸ê°€ìš”? A2. í‰ì¼ ì˜¤í›„ 2ì‹œ~6ì‹œ, ì£¼ë§ ì˜¤ì „ 10ì‹œ~ì˜¤í›„ 6ì‹œì…ë‹ˆë‹¤.', 1, 156, 8, 1, FALSE, FALSE, TRUE, 'ACTIVE', 'FAQ', 'ì¼ë°˜', 3, FALSE, NULL, 0, 0, 'FAQ,ìì£¼ë¬»ëŠ”ì§ˆë¬¸', 'ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ ëª¨ìŒ', 'FAQ,ì§ˆë¬¸,ë‹µë³€,ì…ì†Œ', NOW(), NOW(), FALSE),
    ('INFO', 'ë…¸ì¸ì¥ê¸°ìš”ì–‘ë³´í—˜ ì œë„ ì•ˆë‚´', 'ë…¸ì¸ì¥ê¸°ìš”ì–‘ë³´í—˜ ì œë„ì— ëŒ€í•´ ìì„¸íˆ ì„¤ëª…ë“œë¦½ë‹ˆë‹¤. ì‹ ì²­ ë°©ë²•, ë“±ê¸‰ íŒì •, ê¸‰ì—¬ ë‚´ìš© ë“±ì„ í¬í•¨í•©ë‹ˆë‹¤.', 1, 98, 7, 4, FALSE, FALSE, TRUE, 'ACTIVE', 'INFO', 'ì œë„', 2, FALSE, NULL, 0, 0, 'ì¥ê¸°ìš”ì–‘ë³´í—˜,ì œë„,ì•ˆë‚´', 'ë…¸ì¸ì¥ê¸°ìš”ì–‘ë³´í—˜ ì œë„ ì•ˆë‚´', 'ì¥ê¸°ìš”ì–‘ë³´í—˜,ë…¸ì¸,ì œë„,ì‹ ì²­', NOW(), NOW(), FALSE),
    ('QNA', 'ì›” ì´ìš©ë£ŒëŠ” ì–¼ë§ˆì¸ê°€ìš”?', 'ë¶€ëª¨ë‹˜ ëª¨ì‹¤ ìš”ì–‘ì›ì„ ì°¾ê³  ìˆëŠ”ë° ì¼ë°˜ì ì¸ ì›” ì´ìš©ë£Œê°€ ê¶ê¸ˆí•©ë‹ˆë‹¤.', 3, 134, 2, 6, FALSE, FALSE, TRUE, 'ACTIVE', 'QNA', 'ë¹„ìš©', 0, FALSE, NULL, 0, 0, 'ì´ìš©ë£Œ,ë¹„ìš©,ë¬¸ì˜', 'ì›” ì´ìš©ë£Œ ë¬¸ì˜', 'ì´ìš©ë£Œ,ë¹„ìš©,ìš”ì–‘ì›,ì›”ë¹„ìš©', NOW(), NOW(), FALSE),
    ('INFO', 'ì–´ë¥´ì‹  ê±´ê°•ê´€ë¦¬ íŒ', 'ì–´ë¥´ì‹ ë“¤ì˜ ê±´ê°•í•œ ìƒí™œì„ ìœ„í•œ ì¼ìƒ ê´€ë¦¬ íŒì„ ê³µìœ í•©ë‹ˆë‹¤. ì‹ì‚¬, ìš´ë™, ìˆ˜ë©´, ì •ì‹ ê±´ê°• ê´€ë¦¬ ë°©ë²•ì„ í¬í•¨í•©ë‹ˆë‹¤.', 1, 76, 11, 3, FALSE, FALSE, TRUE, 'ACTIVE', 'INFO', 'ê±´ê°•', 1, FALSE, NULL, 0, 0, 'ê±´ê°•ê´€ë¦¬,ì–´ë¥´ì‹ ,íŒ', 'ì–´ë¥´ì‹  ê±´ê°•ê´€ë¦¬ íŒ', 'ê±´ê°•ê´€ë¦¬,ì–´ë¥´ì‹ ,ë…¸ì¸,ê±´ê°•,íŒ', NOW(), NOW(), FALSE),
    ('QNA', 'ë©´íšŒ ì‹œê°„ê³¼ ê·œì •ì´ ê¶ê¸ˆí•´ìš”', 'ì½”ë¡œë‚˜19 ì´í›„ ë©´íšŒ ì‹œê°„ì´ë‚˜ ê·œì •ì´ ì–´ë–»ê²Œ ë°”ë€Œì—ˆëŠ”ì§€ ì•Œê³  ì‹¶ìŠµë‹ˆë‹¤.', 4, 45, 1, 1, FALSE, FALSE, TRUE, 'ACTIVE', 'QNA', 'ë©´íšŒ', 0, FALSE, NULL, 0, 0, 'ë©´íšŒ,ì‹œê°„,ê·œì •', 'ë©´íšŒ ì‹œê°„ ê·œì • ë¬¸ì˜', 'ë©´íšŒ,ì‹œê°„,ê·œì •,ì½”ë¡œë‚˜', NOW(), NOW(), FALSE),
    ('INFO', 'ì¬í™œ í”„ë¡œê·¸ë¨ ì¢…ë¥˜ì™€ íš¨ê³¼', 'ìš”ì–‘ì›ì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ ì¬í™œ í”„ë¡œê·¸ë¨ë“¤ê³¼ ê·¸ íš¨ê³¼ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤.', 1, 63, 9, 2, FALSE, FALSE, TRUE, 'ACTIVE', 'INFO', 'ì¬í™œ', 1, FALSE, NULL, 0, 0, 'ì¬í™œ,í”„ë¡œê·¸ë¨,íš¨ê³¼', 'ì¬í™œ í”„ë¡œê·¸ë¨ ì•ˆë‚´', 'ì¬í™œ,í”„ë¡œê·¸ë¨,ë¬¼ë¦¬ì¹˜ë£Œ,ì‘ì—…ì¹˜ë£Œ', NOW(), NOW(), FALSE),
    ('QNA', 'ì‹ì‚¬ ë©”ë‰´ëŠ” ì–´ë–»ê²Œ ì œê³µë˜ë‚˜ìš”?', 'ìš”ì–‘ì›ì˜ ì‹ì‚¬ ë©”ë‰´ êµ¬ì„±ê³¼ íŠ¹ë³„ì‹ ì œê³µ ì—¬ë¶€ê°€ ê¶ê¸ˆí•©ë‹ˆë‹¤.', 5, 58, 4, 3, FALSE, FALSE, TRUE, 'ACTIVE', 'QNA', 'ì‹ì‚¬', 0, FALSE, NULL, 0, 0, 'ì‹ì‚¬,ë©”ë‰´,ê¸‰ì‹', 'ì‹ì‚¬ ë©”ë‰´ ë¬¸ì˜', 'ì‹ì‚¬,ë©”ë‰´,ê¸‰ì‹,ìš”ì–‘ì›', NOW(), NOW(), FALSE);

-- ================================================
-- ì™„ë£Œ ë©”ì‹œì§€
-- ================================================
SELECT 'ë¼ì´íŠ¸ì¼€ì–´ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!' as message;
select * from member;
select * from job_posting;
select * from facility;
select * from facility_images;
use carelink;
````

## File: src/main/resources/templates/facility/crop-images.html
````html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>ì‹œì„¤ ì´ë¯¸ì§€ ê´€ë¦¬ - CareLink</title>
    <!-- ì‹œì„¤ëª… ë©”íƒ€ íƒœê·¸ (JavaScriptì—ì„œ ì‚¬ìš©) -->
    <meta name="facility-name" th:content="${facility?.facilityName ?: 'ì‹œì„¤'}" />
    <meta name="facility-id" th:content="${facility?.facilityId ?: ''}" />
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">í™ˆ</a></li>
                <li class="breadcrumb-item"><a href="/facility/manage">ì‹œì„¤ ê´€ë¦¬</a></li>
                <li class="breadcrumb-item active" aria-current="page">ì‹œì„¤ ì´ë¯¸ì§€ ê´€ë¦¬</li>
            </ol>
        </nav>
        
        <div class="row justify-content-center">
            <div class="col-12 col-lg-11">
                <div class="card shadow">
                    <div class="card-body p-4">
                        <div class="text-center mb-4">
                            <h3 class="card-title fw-bold text-primary">
                                <i class="fas fa-images me-2"></i>
                                ì‹œì„¤ ì´ë¯¸ì§€ ê´€ë¦¬
                            </h3>
                            <p class="text-muted">ì‹œì„¤ ì‚¬ì§„ì„ 16:9 ë¹„ìœ¨ë¡œ ì¡°ì •í•˜ì—¬ ë“±ë¡í•˜ì„¸ìš” (ìµœëŒ€ 5ì¥)</p>
                        </div>

                        <!-- ë‹¨ê³„ í‘œì‹œê¸° (2ë‹¨ê³„ë¡œ ê°„ì†Œí™”) -->
                        <div class="steps-indicator mb-4">
                            <div class="step-item completed" id="step1">
                                <div class="step-circle">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="step-label">ì´ë¯¸ì§€ ì„ íƒ ì™„ë£Œ</div>
                            </div>
                            <div class="step-connector"></div>
                            <div class="step-item active" id="step2">
                                <div class="step-circle">
                                    <i class="fas fa-crop-alt"></i>
                                </div>
                                <div class="step-label">í¸ì§‘ & ìµœì í™”</div>
                            </div>
                        </div>

                        <!-- 1ë‹¨ê³„: íŒŒì¼ ì—…ë¡œë“œ (ìˆ¨ê¹€ - ì´ë¯¸ 1ë‹¨ê³„ì—ì„œ ì™„ë£Œë¨) -->
                        <div id="uploadSection" class="upload-section" style="display: none;">
                            <div class="upload-area" id="uploadArea">
                                <div class="upload-content">
                                    <div class="upload-icon">
                                        <i class="fas fa-cloud-upload-alt fa-3x text-primary"></i>
                                    </div>
                                    <h5 class="upload-title">ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ</h5>
                                    <p class="upload-description text-muted">
                                        ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œí•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”
                                    </p>
                                    <div class="upload-format-info">
                                        <small class="text-muted">
                                            <i class="fas fa-info-circle me-1"></i>
                                            JPG, PNG, WebP íŒŒì¼ ì§€ì› (í° íŒŒì¼ë„ ìë™ ì••ì¶•)
                                        </small>
                                        <br>
                                        <small class="text-info">
                                            <i class="fas fa-crop-alt me-1"></i>
                                            ì‹œì„¤ ì‚¬ì§„ ë¹„ìœ¨ (16:9) ìë™ ì¡°ì •
                                        </small>
                                        <br>
                                        <small class="text-success">
                                            <i class="fas fa-images me-1"></i>
                                            ìµœëŒ€ 5ì¥ê¹Œì§€ ë“±ë¡ ê°€ëŠ¥
                                        </small>
                                    </div>
                                    <div class="d-flex flex-column gap-3 mt-3 align-items-center">
                                        <!-- í†µí•©ëœ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸° ë²„íŠ¼ -->
                                        <div class="btn-group">
                                            <button type="button" class="btn btn-primary btn-lg" id="imageLoadBtn">
                                                <i class="fas fa-images me-2"></i>ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
                                            </button>
                                            <button type="button" class="btn btn-primary btn-lg dropdown-toggle dropdown-toggle-split" 
                                                    data-bs-toggle="dropdown" aria-expanded="false">
                                                <span class="visually-hidden">ì˜µì…˜ í† ê¸€</span>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li>
                                                    <a class="dropdown-item" href="#" id="fileSelectOption">
                                                        <i class="fas fa-file me-2"></i>íŒŒì¼ì—ì„œ ì„ íƒ
                                                        <small class="text-muted d-block">ê°œë³„ ì´ë¯¸ì§€ íŒŒì¼ë“¤ì„ ì„ íƒ</small>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a class="dropdown-item" href="#" id="folderSelectOption">
                                                        <i class="fas fa-folder-open me-2"></i>í´ë”ì—ì„œ ì„ íƒ
                                                        <small class="text-muted d-block">í´ë” ë‚´ ì´ë¯¸ì§€ë“¤ì„ ì„ íƒ</small>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                        
                                        <!-- ì„ íƒëœ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ë° ì˜¤ë” ì„¤ì • ì˜ì—­ -->
                                        <div id="selectedImagesPreview" class="selected-images-preview w-100" style="display: none;">
                                            <div class="card border-primary">
                                                <div class="card-header bg-primary text-white">
                                                    <h6 class="mb-0">
                                                        <i class="fas fa-list me-2"></i>ì„ íƒëœ ì´ë¯¸ì§€ (ìµœëŒ€ 5ì¥)
                                                        <span class="badge bg-light text-dark ms-2" id="selectedCount">0</span>
                                                    </h6>
                                                </div>
                                                <div class="card-body">
                                                    <div id="imageOrderList" class="row g-3"></div>
                                                    <div class="mt-3">
                                                        <!-- ë©”ì¸ ì´ë¯¸ì§€ ì„ íƒ -->
                                                        <div class="alert alert-info" id="mainImageInfo" style="display: none;">
                                                            <div class="d-flex align-items-center">
                                                                <i class="fas fa-star text-warning me-2"></i>
                                                                <span id="mainImageText">ë©”ì¸ ì´ë¯¸ì§€: ì—†ìŒ</span>
                                                                <small class="text-muted ms-2">(ì´ë¯¸ì§€ë¥¼ í´ë¦­í•˜ì—¬ ë©”ì¸ ì´ë¯¸ì§€ë¡œ ì„¤ì •)</small>
                                                            </div>
                                                        </div>
                                                        <!-- ë²„íŠ¼ ê·¸ë£¹ -->
                                                        <div class="text-center">
                                                            <div class="btn-group">
                                                                <button type="button" class="btn btn-outline-primary" id="addMoreImagesBtn" style="display: none;">
                                                                    <i class="fas fa-plus me-2"></i>ì´ë¯¸ì§€ ë” ì¶”ê°€
                                                                </button>
                                                                <button type="button" class="btn btn-success" id="proceedToCropBtn" style="display: none;">
                                                                    <i class="fas fa-crop-alt me-2"></i>í¬ë¡­ ì‹œì‘
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <input type="file" id="imageInput" accept="image/*" multiple style="display: none;">
                            <input type="file" id="folderInput" webkitdirectory directory multiple style="display: none;">
                        </div>


                        <!-- 2ë‹¨ê³„: í¬ë¡­ ë° ì¡°ì • (2ì¤„ ë ˆì´ì•„ì›ƒ) - ê¸°ë³¸ í‘œì‹œ -->
                        <div id="cropSection" class="crop-section" style="display: block;">
                            <!-- ì²«ì§¸ì¤„: ì´ë¯¸ì§€ í¬ë¡­ê³¼ ë¯¸ë¦¬ë³´ê¸° ì¢Œìš° ë°°ì¹˜ (6:4 ë¹„ìœ¨) -->
                            <div class="row mb-4">
                                <div class="col-lg-7 col-md-6">
                                    <div class="crop-container">
                                        <h6 class="mb-3">
                                            <i class="fas fa-crop-alt me-2"></i>
                                            ì´ë¯¸ì§€ ë¹„ìœ¨ ì¡°ì •
                                            <span class="badge bg-info ms-2" id="currentImageNumber">1/1</span>
                                        </h6>
                                        <div class="crop-image-container">
                                            <img id="cropImage" style="max-width: 100%; display: none;">
                                        </div>
                                        <div class="crop-controls mt-3 text-center">
                                            <div class="btn-group me-3" role="group">
                                                <button type="button" class="btn btn-outline-primary btn-sm" id="zoomInBtn" onclick="zoomIn()">
                                                    <i class="fas fa-search-plus"></i> í™•ëŒ€
                                                </button>
                                                <button type="button" class="btn btn-outline-primary btn-sm" id="zoomOutBtn" onclick="zoomOut()">
                                                    <i class="fas fa-search-minus"></i> ì¶•ì†Œ
                                                </button>
                                            </div>
                                            <div class="btn-group me-3" role="group">
                                                <button type="button" class="btn btn-outline-secondary btn-sm" id="rotateLeftBtn">
                                                    <i class="fas fa-undo"></i> ì¢ŒíšŒì „
                                                </button>
                                                <button type="button" class="btn btn-outline-secondary btn-sm" id="rotateRightBtn">
                                                    <i class="fas fa-redo"></i> ìš°íšŒì „
                                                </button>
                                            </div>
                                            <button type="button" class="btn btn-outline-danger btn-sm" id="resetZoomBtn" onclick="resetCrop()">
                                                <i class="fas fa-sync-alt"></i> ë¦¬ì…‹
                                            </button>
                                        </div>
                                        
                                        <!-- ì¤Œ ìƒíƒœ í‘œì‹œê¸° -->
                                        <div id="zoomIndicator" class="zoom-indicator mt-2 text-center" style="display: none;">
                                            <span class="badge bg-info">
                                                <i class="fas fa-search me-1"></i>
                                                <span id="zoomLevel">100%</span>
                                                <span id="zoomStatus" class="ms-2"></span>
                                            </span>
                                        </div>
                                        
                                        <!-- í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ê°€ì´ë“œ -->
                                        <div class="mt-3">
                                            <small class="text-muted d-block text-center mb-2">
                                                <i class="fas fa-keyboard me-1"></i>í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
                                            </small>
                                            <div class="small text-muted text-center">
                                                <div class="d-flex justify-content-center gap-3 flex-wrap">
                                                    <span><kbd>+/-</kbd> í™•ëŒ€/ì¶•ì†Œ</span>
                                                    <span><kbd>R/L</kbd> íšŒì „</span>
                                                    <span><kbd>Enter</kbd> ì™„ë£Œ</span>
                                                    <span><kbd>Esc</kbd> ë¦¬ì…‹</span>
                                                    <span><kbd>â† â†’</kbd> ì´ë¯¸ì§€ ì „í™˜</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-5 col-md-6">
                                    <div class="crop-preview-panel h-100 d-flex flex-column">
                                        <h6 class="mb-3">
                                            <i class="fas fa-eye me-2"></i>ë¯¸ë¦¬ë³´ê¸° & ì •ë³´
                                        </h6>
                                        
                                        <!-- ë¯¸ë¦¬ë³´ê¸° ì¹´ë“œ -->
                                        <div class="facility-preview text-center mb-3 flex-grow-1 d-flex align-items-center justify-content-center">
                                            <div class="facility-card-preview">
                                                <div class="card" style="max-width: 280px; margin: 0 auto;">
                                                    <div class="card-img-container">
                                                        <canvas id="previewCanvas" width="192" height="108" 
                                                                style="width: 100%; height: auto; border-radius: 8px;"></canvas>
                                                        <img id="cropPreviewImage" style="width: 100%; height: auto; border-radius: 8px; display: none;" />
                                                    </div>
                                                    <div class="card-body p-3">
                                                        <h6 class="card-title text-truncate mb-1">ì‹œì„¤ëª…</h6>
                                                        <small class="text-muted">ì‹œì„¤ ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸°</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- ì´ë¯¸ì§€ ì •ë³´ íŒ¨ë„ -->
                                        <div class="image-info-panel mt-auto">
                                            <div class="card">
                                                <div class="card-body p-3">
                                                    <h6 class="card-title mb-3">
                                                        <i class="fas fa-info-circle me-2"></i>ì´ë¯¸ì§€ ì •ë³´
                                                    </h6>
                                                    <div class="small">
                                                        <div class="d-flex justify-content-between mb-2">
                                                            <span><i class="fas fa-expand-arrows-alt me-1 text-muted"></i>ë¹„ìœ¨:</span>
                                                            <span class="text-primary fw-bold">16:9</span>
                                                        </div>
                                                        <div class="d-flex justify-content-between mb-2">
                                                            <span><i class="fas fa-rulers me-1 text-muted"></i>í¬ê¸°:</span>
                                                            <span id="imageDimensions" class="fw-medium">-</span>
                                                        </div>
                                                        <div class="d-flex justify-content-between">
                                                            <span><i class="fas fa-file me-1 text-muted"></i>íŒŒì¼ëª…:</span>
                                                            <span id="imageFileName" class="text-truncate fw-medium" style="max-width: 150px;">-</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ë‘˜ì§¸ì¤„: 3ê°œ ì¹´ë“œë¡œ ì¬êµ¬ì„± -->
                            <div class="row">
                                <!-- 1ë²ˆ ì¹´ë“œ: ì••ì¶• ì„¤ì • (ê·¸ëŒ€ë¡œ ìœ ì§€) -->
                                <div class="col-lg-4 mb-3">
                                    <div class="card h-100">
                                        <div class="card-body p-3">
                                            <h6 class="card-title text-center">
                                                <i class="fas fa-compress-alt me-2"></i>í¬ë§· & ì••ì¶•
                                            </h6>
                                            <div class="btn-group w-100 mb-3" role="group">
                                                <input type="radio" class="btn-check" name="imageFormat" id="formatAVIF" value="avif">
                                                <label class="btn btn-outline-success btn-sm" for="formatAVIF">AVIF</label>
                                                
                                                <input type="radio" class="btn-check" name="imageFormat" id="formatWebP" value="webp" checked>
                                                <label class="btn btn-outline-info btn-sm" for="formatWebP">WebP</label>
                                                
                                                <input type="radio" class="btn-check" name="imageFormat" id="formatJPEG" value="jpeg">
                                                <label class="btn btn-outline-secondary btn-sm" for="formatJPEG">JPEG</label>
                                            </div>
                                            <div id="compressionSettings">
                                                <label class="form-label small text-center d-block">
                                                    í’ˆì§ˆ: <span id="qualityValue">85%</span>
                                                </label>
                                                <input type="range" class="form-range" id="compressionQuality" 
                                                       min="30" max="100" step="5" value="85">
                                                <div class="d-flex justify-content-between small text-muted">
                                                    <span>ì••ì¶•</span>
                                                    <span>í’ˆì§ˆ</span>
                                                </div>
                                                <button type="button" class="btn btn-outline-primary btn-sm mt-2 w-100" onclick="applyCompression()">
                                                    <i class="fas fa-compress me-1"></i>ì••ì¶• ì ìš©
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 2ë²ˆ ì¹´ë“œ: Alt í…ìŠ¤íŠ¸ + íŒŒì¼ëª… (ì„¸ë¡œ ì •ë ¬) -->
                                <div class="col-lg-4 mb-3">
                                    <div class="card h-100">
                                        <div class="card-body p-3">
                                            <h6 class="card-title text-center mb-3">
                                                <i class="fas fa-search me-2"></i>SEO ìµœì í™”
                                            </h6>
                                            
                                            <div id="seoSettings">
                                                <!-- Alt í…ìŠ¤íŠ¸ -->
                                                <div class="mb-3">
                                                    <label for="altText" class="form-label small">
                                                        <i class="fas fa-font me-1"></i>Alt í…ìŠ¤íŠ¸
                                                    </label>
                                                    <input type="text" class="form-control form-control-sm" id="altText" 
                                                           placeholder="ì´ë¯¸ì§€ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                                                    <small class="text-muted">ê²€ìƒ‰ì—”ì§„ ìµœì í™”ìš©</small>
                                                </div>
                                                
                                                <!-- íŒŒì¼ëª… -->
                                                <div class="mb-2">
                                                    <label for="englishFilename" class="form-label small">
                                                        <i class="fas fa-file-signature me-1"></i>íŒŒì¼ëª…
                                                    </label>
                                                    <input type="text" class="form-control form-control-sm" id="englishFilename" 
                                                           placeholder="ì˜ˆ: facility-lobby">
                                                    <small class="text-muted">í•œê¸€â†’ì˜ë¬¸ ìë™ë³€í™˜</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 3ë²ˆ ì¹´ë“œ: í™•ì¥ëœ í‚¤ì›Œë“œ ì„ íƒ (3ì¤„ ìµœëŒ€) -->
                                <div class="col-lg-4 mb-3">
                                    <div class="card h-100">
                                        <div class="card-body p-3">
                                            <h6 class="card-title text-center mb-3">
                                                <i class="fas fa-tags me-2"></i>í‚¤ì›Œë“œ ì„ íƒ
                                            </h6>
                                            
                                            <div id="keywordList">
                                                <!-- ê¸°ë³¸ í‚¤ì›Œë“œ (1ì¤„) -->
                                                <div class="mb-2">
                                                    <small class="text-muted d-block mb-1">ê¸°ë³¸</small>
                                                    <div class="keyword-row">
                                                        <button type="button" class="btn btn-outline-primary btn-sm keyword-btn me-1 mb-1" data-keyword="ì™¸ê´€" onclick="handleKeywordClick('ì™¸ê´€')">ì™¸ê´€</button>
                                                        <button type="button" class="btn btn-outline-primary btn-sm keyword-btn me-1 mb-1" data-keyword="ë‚´ë¶€" onclick="handleKeywordClick('ë‚´ë¶€')">ë‚´ë¶€</button>
                                                        <button type="button" class="btn btn-outline-primary btn-sm keyword-btn me-1 mb-1" data-keyword="ë¡œë¹„" onclick="handleKeywordClick('ë¡œë¹„')">ë¡œë¹„</button>
                                                        <button type="button" class="btn btn-outline-primary btn-sm keyword-btn me-1 mb-1" data-keyword="ë³µë„" onclick="handleKeywordClick('ë³µë„')">ë³µë„</button>
                                                        <button type="button" class="btn btn-outline-primary btn-sm keyword-btn me-1 mb-1" data-keyword="ì…êµ¬" onclick="handleKeywordClick('ì…êµ¬')">ì…êµ¬</button>
                                                    </div>
                                                </div>
                                            
                                            <!-- ê³µê°„ í‚¤ì›Œë“œ (2ì¤„) -->
                                            <div class="mb-2">
                                                <small class="text-muted d-block mb-1">ê³µê°„</small>
                                                <div class="keyword-row">
                                                    <button type="button" class="btn btn-outline-info btn-sm keyword-btn me-1 mb-1" data-keyword="ê±°ì‹¤" onclick="handleKeywordClick('ê±°ì‹¤')">ê±°ì‹¤</button>
                                                    <button type="button" class="btn btn-outline-info btn-sm keyword-btn me-1 mb-1" data-keyword="ì¹¨ì‹¤" onclick="handleKeywordClick('ì¹¨ì‹¤')">ì¹¨ì‹¤</button>
                                                    <button type="button" class="btn btn-outline-info btn-sm keyword-btn me-1 mb-1" data-keyword="ì‹ë‹¹" onclick="handleKeywordClick('ì‹ë‹¹')">ì‹ë‹¹</button>
                                                    <button type="button" class="btn btn-outline-info btn-sm keyword-btn me-1 mb-1" data-keyword="í™”ì¥ì‹¤" onclick="handleKeywordClick('í™”ì¥ì‹¤')">í™”ì¥ì‹¤</button>
                                                    <button type="button" class="btn btn-outline-info btn-sm keyword-btn me-1 mb-1" data-keyword="ì˜ë¬´ì‹¤" onclick="handleKeywordClick('ì˜ë¬´ì‹¤')">ì˜ë¬´ì‹¤</button>
                                                </div>
                                            </div>
                                            
                                            <!-- ì‹œì„¤ í‚¤ì›Œë“œ (3ì¤„) -->
                                            <div class="mb-2">
                                                <small class="text-muted d-block mb-1">ì‹œì„¤</small>
                                                <div class="keyword-row">
                                                    <button type="button" class="btn btn-outline-success btn-sm keyword-btn me-1 mb-1" data-keyword="ì¬í™œì‹¤" onclick="handleKeywordClick('ì¬í™œì‹¤')">ì¬í™œì‹¤</button>
                                                    <button type="button" class="btn btn-outline-success btn-sm keyword-btn me-1 mb-1" data-keyword="íœ´ê²Œì‹¤" onclick="handleKeywordClick('íœ´ê²Œì‹¤')">íœ´ê²Œì‹¤</button>
                                                    <button type="button" class="btn btn-outline-success btn-sm keyword-btn me-1 mb-1" data-keyword="ì§„ë£Œì‹¤" onclick="handleKeywordClick('ì§„ë£Œì‹¤')">ì§„ë£Œì‹¤</button>
                                                    <button type="button" class="btn btn-outline-success btn-sm keyword-btn me-1 mb-1" data-keyword="í”„ë¡œê·¸ë¨ì‹¤" onclick="handleKeywordClick('í”„ë¡œê·¸ë¨ì‹¤')">í”„ë¡œê·¸ë¨ì‹¤</button>
                                                    <button type="button" class="btn btn-outline-success btn-sm keyword-btn me-1 mb-1" data-keyword="ì •ì›" onclick="handleKeywordClick('ì •ì›')">ì •ì›</button>
                                                </div>
                                            </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="crop-actions mt-4 text-center">
                                <div class="d-flex justify-content-between align-items-center">
                                    <button type="button" class="btn btn-outline-secondary" id="backToEditBtn" onclick="goBackToEdit()">
                                        <i class="fas fa-arrow-left me-2"></i>ìˆ˜ì • í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
                                    </button>
                                    
                                    <!-- ì´ë¯¸ì§€ ë²ˆí˜¸ í‘œì‹œ -->
                                    <div class="image-counter text-muted">
                                        <small class="crop-navigation-info">1 / 1</small>
                                    </div>
                                    
                                    <div class="crop-navigation d-flex gap-2">
                                        <button type="button" class="btn btn-outline-primary" id="prevImageBtn" onclick="proceedToPrevImage()">
                                            <i class="fas fa-chevron-left me-1"></i>ì´ì „
                                        </button>
                                        <button type="button" class="btn btn-primary" id="nextImageBtn" onclick="proceedToNextImage()">
                                            ë‹¤ìŒ<i class="fas fa-chevron-right ms-1"></i>
                                        </button>
                                        <button type="button" class="btn btn-success" id="saveCurrentAndGoNext" onclick="saveCropAndNext()">
                                            <i class="fas fa-save me-2"></i>ì €ì¥ í›„ ìˆ˜ì •í˜ì´ì§€ë¡œ
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 3ë‹¨ê³„: ì´ë¯¸ì§€ ê´€ë¦¬ (ìˆ¨ê¹€ - 2ë‹¨ê³„ì— í†µí•©) -->
                        <div id="manageSection" class="manage-section" style="display: none;">
                            <div class="text-center mb-4">
                                <h4 class="text-primary mb-3">
                                    <i class="fas fa-cogs me-2"></i>ì´ë¯¸ì§€ ê´€ë¦¬
                                </h4>
                                <p class="text-muted">ë©”ì¸ ì´ë¯¸ì§€ë¥¼ ì„¤ì •í•˜ê³ , ë¶ˆí•„ìš”í•œ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì„¸ìš”.</p>
                            </div>
                            
                            <div class="manage-images-grid mb-4" id="manageImagesGrid">
                                <div class="text-center">
                                    <i class="fas fa-spinner fa-spin"></i> í¬ë¡­ëœ ì´ë¯¸ì§€ë¥¼ ì„œë²„ì— ì €ì¥í•˜ëŠ” ì¤‘...
                                </div>
                            </div>
                            
                            <div class="manage-actions text-center">
                                <div class="d-flex justify-content-between">
                                    <button type="button" class="btn btn-outline-secondary" id="backToCropBtn">
                                        <i class="fas fa-arrow-left me-2"></i>í¬ë¡­ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                                    </button>
                                    <button type="button" class="btn btn-success" id="finalCompleteBtn">
                                        <i class="fas fa-check me-2"></i>ìµœì¢… ì™„ë£Œ
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 4ë‹¨ê³„: ìµœì¢… ì™„ë£Œ -->
                        <div id="completeSection" class="complete-section text-center" style="display: none;">
                            <div class="completion-icon mb-3">
                                <i class="fas fa-check-circle fa-5x text-success"></i>
                            </div>
                            <h4 class="text-success mb-3">ì‹œì„¤ ì´ë¯¸ì§€ ë“±ë¡ ì™„ë£Œ!</h4>
                            <p class="text-muted mb-4">ì‹œì„¤ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                            
                            <div class="final-summary mb-4" id="finalSummary">
                                <!-- ìµœì¢… ìš”ì•½ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                            </div>
                            
                            <div class="final-actions">
                                <a href="/facility/manage" class="btn btn-primary me-2">
                                    <i class="fas fa-building me-2"></i>ì‹œì„¤ ê´€ë¦¬ë¡œ ëŒì•„ê°€ê¸°
                                </a>
                                <button type="button" class="btn btn-outline-primary" id="addMoreImagesBtn">
                                    <i class="fas fa-plus me-2"></i>ì´ë¯¸ì§€ ë” ì¶”ê°€
                                </button>
                            </div>
                        </div>

                        <!-- ì¤Œ í‘œì‹œê¸° -->
                            <i class="fas fa-search-plus me-2"></i>
                            <span id="zoomLevel">100%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- ì´ë¯¸ì§€ ì„ íƒ ëª¨ë‹¬ (í´ë”ì—ì„œ ì„ íƒ ì‹œ ì‚¬ìš©) -->
<div class="modal fade" id="imageSelectionModal" tabindex="-1" aria-labelledby="imageSelectionModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="imageSelectionModalLabel">
                    <i class="fas fa-images me-2"></i>ì´ë¯¸ì§€ ì„ íƒ (ìµœëŒ€ 5ì¥)
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row mb-3">
                    <div class="col-md-8">
                        <p class="text-muted mb-0">
                            <i class="fas fa-info-circle me-1"></i>
                            ì„ íƒí•œ í´ë”ì—ì„œ ì´ë¯¸ì§€ íŒŒì¼ì„ ê³¨ë¼ì£¼ì„¸ìš”. ì´ë¯¸ì§€ë¥¼ í´ë¦­í•˜ë©´ ì„ íƒë©ë‹ˆë‹¤.
                        </p>
                    </div>
                    <div class="col-md-4 text-end">
                        <span class="badge bg-primary fs-6" id="selectedImageCount">0/5 ì„ íƒë¨</span>
                    </div>
                </div>
                
                <!-- ë¡œë”© ìƒíƒœ -->
                <div id="modalLoadingState" class="text-center py-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">ë¡œë”© ì¤‘...</span>
                    </div>
                    <p class="text-muted mt-3">í´ë”ì˜ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                </div>
                
                <!-- ì´ë¯¸ì§€ ê·¸ë¦¬ë“œ -->
                <div id="modalImageGrid" class="row g-3" style="display: none;">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ì´ë¯¸ì§€ ì¹´ë“œë“¤ -->
                </div>
                
                <!-- ì´ë¯¸ì§€ê°€ ì—†ëŠ” ê²½ìš° -->
                <div id="modalEmptyState" class="text-center py-5" style="display: none;">
                    <i class="fas fa-folder-open fa-3x text-muted mb-3"></i>
                    <h5 class="text-muted">ì„ íƒí•œ í´ë”ì— ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤</h5>
                    <p class="text-muted">JPG, PNG, WebP í˜•ì‹ì˜ ì´ë¯¸ì§€ íŒŒì¼ì´ ìˆëŠ” í´ë”ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>ì·¨ì†Œ
                </button>
                <button type="button" class="btn btn-primary" id="confirmImageSelection" disabled>
                    <i class="fas fa-check me-2"></i>ì„ íƒ ì™„ë£Œ
                </button>
            </div>
        </div>
    </div>
</div>

<footer th:replace="~{layout/footer :: footer}"></footer>

<!-- í•„ìˆ˜ JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ (Bootstrap í¬í•¨) -->
<div th:replace="~{layout/footer :: scripts}"></div>

<!-- Cropper.js CDN (ì¶”ê°€) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">

<!-- ê³ ê¸‰ ì´ë¯¸ì§€ í¬ë¡­í¼ CSS -->
<link th:href="@{/css/advanced-image-cropper.css}" rel="stylesheet">

<!-- ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ë“¤ì€ ëª¨ë“ˆí™”ëœ ì‹œìŠ¤í…œìœ¼ë¡œ ëŒ€ì²´ë¨ -->

<style>
/* ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­í¼ ì „ìš© ìŠ¤íƒ€ì¼ */
.facility-preview .card {
    transition: transform 0.3s ease;
    border: none;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.facility-preview .card:hover {
    transform: translateY(-2px);
}

.image-item {
    cursor: pointer;
    transition: transform 0.2s ease;
}

.image-item:hover {
    transform: scale(1.02);
}

.image-item.active {
    border-color: #007bff;
    box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
}

.crop-navigation .btn {
    min-width: 80px;
}

.final-images-grid {
    max-height: 300px;
    overflow-y: auto;
}

.completion-icon {
    animation: bounceIn 0.8s ease;
}

@keyframes bounceIn {
    0% {
        opacity: 0;
        transform: scale(0.3);
    }
    50% {
        opacity: 1;
        transform: scale(1.05);
    }
    70% {
        transform: scale(0.9);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

/* SEO ìµœì í™” ê¸°ëŠ¥ ìŠ¤íƒ€ì¼ */
.keyword-suggestions {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
}

.keyword-group {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 5px;
}

.keyword-btn {
    font-size: 0.875rem;
    padding: 5px 10px;
    border-radius: 15px;
    transition: all 0.2s ease;
    cursor: pointer;
}

.keyword-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

.keyword-btn.btn-success {
    animation: keywordClick 0.5s ease;
}

@keyframes keywordClick {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.seo-optimization-section {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 10px;
    padding: 20px;
    border: 1px solid #dee2e6;
}

.seo-tips {
    border-left: 4px solid #17a2b8;
    background: rgba(23, 162, 184, 0.1);
}

#imageNameInput {
    border-radius: 8px;
}

#previewFileName {
    color: #17a2b8;
    background: rgba(23, 162, 184, 0.1);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
}

/* ì´ë¯¸ì§€ ì„ íƒ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
.image-selection-card {
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.image-selection-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.image-selection-card.selected {
    border-color: #007bff;
    box-shadow: 0 4px 20px rgba(0,123,255,0.3);
}

.image-selection-card .selection-overlay {
    border-radius: 0.375rem 0.375rem 0 0;
}

#imageSelectionModal .modal-body {
    max-height: 70vh;
    overflow-y: auto;
}

#modalImageGrid {
    max-height: 60vh;
    overflow-y: auto;
}

.input-group .btn {
    border-radius: 0 8px 8px 0;
}

.form-label {
    font-weight: 600;
    color: #495057;
}

/* ì´ë¯¸ì§€ ìˆœì„œ ì§€ì • ì• ë‹ˆë©”ì´ì…˜ */
.image-order-item .card {
    transition: all 0.3s ease;
}

.image-order-item .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.image-order-item .card.order-added {
    animation: orderAdded 0.5s ease;
    transform: scale(1.05);
    box-shadow: 0 6px 20px rgba(40, 167, 69, 0.3);
}

.image-order-item .card.order-removed {
    animation: orderRemoved 0.5s ease;
    transform: scale(0.95);
    box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3);
}

@keyframes orderAdded {
    0% { 
        transform: scale(1);
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    50% { 
        transform: scale(1.1);
        box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
    }
    100% { 
        transform: scale(1.05);
        box-shadow: 0 6px 20px rgba(40, 167, 69, 0.3);
    }
}

@keyframes orderRemoved {
    0% { 
        transform: scale(1);
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    50% { 
        transform: scale(0.9);
        box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4);
    }
    100% { 
        transform: scale(0.95);
        box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3);
    }
}

/* ìˆœì„œ ë°°ì§€ ì• ë‹ˆë©”ì´ì…˜ */
.order-badge {
    transition: all 0.3s ease;
}

.order-badge.bg-success {
    animation: badgeSuccess 0.5s ease;
}

.order-badge.bg-secondary {
    animation: badgeSecondary 0.3s ease;
}

@keyframes badgeSuccess {
    0% { 
        transform: scale(1);
        background-color: #6c757d;
    }
    50% { 
        transform: scale(1.2);
        background-color: #28a745;
    }
    100% { 
        transform: scale(1);
        background-color: #28a745;
    }
}

@keyframes badgeSecondary {
    0% { 
        transform: scale(1);
        background-color: #28a745;
    }
    50% { 
        transform: scale(0.8);
        background-color: #6c757d;
    }
    100% { 
        transform: scale(1);
        background-color: #6c757d;
    }
}
</style>

<!-- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">

<!-- ëª¨ë“ˆí™”ëœ ì‹œì„¤ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ CSS -->
<link rel="stylesheet" href="/css/facility-image-uploader.css">
<link rel="stylesheet" href="/css/advanced-image-cropper.css">
<link rel="stylesheet" href="/css/image-compressor.css">

<!-- ëª¨ë“ˆí™”ëœ ì‹œì„¤ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ JavaScript -->
<!-- 1. Core Module (ë°˜ë“œì‹œ ì²« ë²ˆì§¸ë¡œ ë¡œë“œ) -->
<script th:src="@{/js/facility-image-core.js}"></script>

<!-- 2. ê¸°ëŠ¥ë³„ ëª¨ë“ˆë“¤ (Core ëª¨ë“ˆ ì´í›„ì— ë¡œë“œ) -->
<script th:src="@{/js/facility-image-utils-module.js}"></script>
<script th:src="@{/js/facility-image-ui-module.js}"></script>
<script th:src="@{/js/facility-image-upload-module.js}"></script>
<script th:src="@{/js/facility-image-cropper-module.js}"></script>
<script th:src="@{/js/facility-image-data-module.js}"></script>
<script th:src="@{/js/facility-image-seo-module.js}"></script>

<!-- 3. Main Controller (ëª¨ë“  ëª¨ë“ˆ ì´í›„ì— ë¡œë“œ) -->
<script th:src="@{/js/facility-image-main-controller.js}"></script>

<!-- 4. ì§€ì› ìœ í‹¸ë¦¬í‹° -->
<script th:src="@{/js/smart-scroll-utility.js}"></script>

<script>
    // ì‹œì„¤ ì •ë³´ ì „ì—­ ë³€ìˆ˜
    window.facilityInfo = {
        facilityId: /*[[${facility?.facilityId}]]*/ 0,
        facilityName: /*[[${facility?.facilityName}]]*/ 'ì‹œì„¤ëª…'
    };
    
    // ê¸°ì¡´ ì´ë¯¸ì§€ ì •ë³´ (ì„œë²„ì—ì„œ ì „ë‹¬)
    window.existingImages = /*[[${existingImages}]]*/ [];
    
    // ğŸ”¥ ìƒˆë¡œìš´ ë°©ì‹: ì „ì—­ ë³€ìˆ˜ì™€ ë©”íƒ€ë°ì´í„°ì—ì„œ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
    function loadSelectedFilesFromSession() {
        // 1. ë¨¼ì € ì „ì—­ ë³€ìˆ˜ì—ì„œ íŒŒì¼ í™•ì¸ (í˜ì´ì§€ ê°„ ì´ë™ ì‹œ)
        if (window.transferSelectedFiles && window.transferSelectedFiles.length > 0) {
            console.log('ğŸ“‚ ì „ì—­ ë³€ìˆ˜ì—ì„œ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°:', window.transferSelectedFiles.length + 'ê°œ');
            
            // ì „ì—­ ë³€ìˆ˜ì— ì €ì¥
            window.selectedImageFiles = window.transferSelectedFiles;
            
            // ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ì— íŒŒì¼ ì „ë‹¬
            if (window.FacilityImageMainController && window.FacilityImageMainController.processFiles) {
                window.FacilityImageMainController.processFiles(window.transferSelectedFiles);
            }
            
            console.log('âœ… ì „ì—­ ë³€ìˆ˜ì—ì„œ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ');
            return;
        }
        
        // 2. ì••ì¶• í†µê³„ ë¶ˆëŸ¬ì˜¤ê¸°
        const storedStats = sessionStorage.getItem('compressionStats');
        if (storedStats) {
            try {
                const stats = JSON.parse(storedStats);
                console.log('ğŸ“Š ì••ì¶• í†µê³„ ë¶ˆëŸ¬ì˜¤ê¸°:');
                console.log(`   ì›ë³¸: ${(stats.originalSize / 1024 / 1024).toFixed(2)}MB`);
                console.log(`   ì••ì¶•: ${(stats.compressedSize / 1024 / 1024).toFixed(2)}MB`);
                console.log(`   ì ˆì•½: ${(stats.savedSize / 1024 / 1024).toFixed(2)}MB (${stats.compressionRatio}%)`);
                
                // ì „ì—­ ë³€ìˆ˜ì— ì €ì¥í•˜ì—¬ UIì—ì„œ í‘œì‹œ
                window.compressionStats = stats;
                
                // ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬
                sessionStorage.removeItem('compressionStats');
                
            } catch (error) {
                console.error('âŒ ì••ì¶• í†µê³„ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', error);
            }
        }
        
        // 3. ê¸°ì¡´ ë°©ì‹ (Base64 ë°ì´í„°) - í˜¸í™˜ì„± ìœ ì§€
        const storedFiles = sessionStorage.getItem('selectedImageFiles');
        if (storedFiles) {
            try {
                const fileDataArray = JSON.parse(storedFiles);
                console.log('ğŸ“‚ ì„¸ì…˜ì—ì„œ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° (ê¸°ì¡´ ë°©ì‹):', fileDataArray.length + 'ê°œ');
                
                // File ê°ì²´ë¡œ ë³€í™˜
                const fileObjects = fileDataArray.map(fileData => {
                    // Base64ë¥¼ Blobìœ¼ë¡œ ë³€í™˜
                    const byteCharacters = atob(fileData.data.split(',')[1]);
                    const byteNumbers = new Array(byteCharacters.length);
                    for (let i = 0; i < byteCharacters.length; i++) {
                        byteNumbers[i] = byteCharacters.charCodeAt(i);
                    }
                    const byteArray = new Uint8Array(byteNumbers);
                    const blob = new Blob([byteArray], {type: fileData.type});
                    
                    // File ê°ì²´ ìƒì„±
                    return new File([blob], fileData.name, {
                        type: fileData.type,
                        lastModified: Date.now()
                    });
                });
                
                // ì „ì—­ ë³€ìˆ˜ì— ì €ì¥
                window.selectedImageFiles = fileObjects;
                
                // ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ì— íŒŒì¼ ì „ë‹¬
                if (window.FacilityImageMainController && window.FacilityImageMainController.processFiles) {
                    window.FacilityImageMainController.processFiles(fileObjects);
                }
                
                console.log('âœ… ì„¸ì…˜ì—ì„œ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ');
                
                // ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬
                sessionStorage.removeItem('selectedImageFiles');
                
            } catch (error) {
                console.error('âŒ ì„¸ì…˜ì—ì„œ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', error);
            }
        }
    }
    
    // ë©”íƒ€ë°ì´í„° í‘œì‹œ í•¨ìˆ˜
    function displayFileMetadata(metadata) {
        console.log('ğŸ“‹ íŒŒì¼ ë©”íƒ€ë°ì´í„°:');
        metadata.forEach((file, index) => {
            console.log(`${index + 1}. ${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB, ${file.type})`);
        });
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì„¸ì…˜ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
    document.addEventListener('DOMContentLoaded', function() {
        // ì•½ê°„ì˜ ì§€ì—°ì„ ë‘ì–´ ëª¨ë“  ëª¨ë“ˆì´ ë¡œë“œëœ í›„ ì‹¤í–‰
        setTimeout(loadSelectedFilesFromSession, 1000);
    });
    
    // ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ìë™ìœ¼ë¡œ ì´ˆê¸°í™”ë¥¼ ìˆ˜í–‰í•˜ë¯€ë¡œ ë³„ë„ì˜ ì´ˆê¸°í™” ì½”ë“œ ë¶ˆí•„ìš”
    // DOMContentLoaded ì´ë²¤íŠ¸ì—ì„œ ìë™ìœ¼ë¡œ ì´ˆê¸°í™”ë¨
    
    // ë””ë²„ê¹…ì„ ìœ„í•œ ì „ì—­ ì°¸ì¡°
    window.FacilityImageDebug = {
        facilityInfo: window.facilityInfo,
        existingImages: window.existingImages,
        getSystemState: function() {
            return window.FacilityImageMainController ? 
                window.FacilityImageMainController.getCurrentState() : 
                'System not initialized';
        },
        getModuleInfo: function() {
            if (!window.FacilityImageSystem) return 'System not loaded';
            
            return {
                Core: window.FacilityImageCore?.getInfo(),
                Cropper: window.FacilityImageCropper?.getInfo(),
                Upload: window.FacilityImageUpload?.getInfo(),
                UI: window.FacilityImageUI?.getInfo(),
                Data: window.FacilityImageData?.getInfo(),
                SEO: window.FacilityImageSEO?.getInfo(),
                Utils: window.FacilityImageUtils?.getInfo(),
                Main: window.FacilityImageMainController?.getInfo()
            };
        }
    };
    
    // 2ë‹¨ê³„ ì›Œí¬í”Œë¡œìš° ë„¤ë¹„ê²Œì´ì…˜ í•¨ìˆ˜ë“¤
    
    // ìˆ˜ì • í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸° (ì €ì¥í•˜ì§€ ì•Šê³ )
    function goBackToEdit() {
        const facilityId = window.facilityInfo?.facilityId || '';
        if (!facilityId) {
            console.error('âŒ ì‹œì„¤ IDê°€ ì—†ìŠµë‹ˆë‹¤');
            alert('ì‹œì„¤ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }
        
        console.log('ğŸ”™ ìˆ˜ì • í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸° (ì €ì¥í•˜ì§€ ì•ŠìŒ)');
        
        // ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬
        sessionStorage.removeItem('selectedImageFiles');
        sessionStorage.removeItem('compressionStats');
        
        // ìˆ˜ì • í˜ì´ì§€ë¡œ ì´ë™
        window.location.href = `/facility/edit/${facilityId}`;
    }
    
    // í¬ë¡­ëœ ì´ë¯¸ì§€ ì €ì¥í•˜ê³  ìˆ˜ì • í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
    async function saveCropAndNext() {
        try {
            const facilityId = window.facilityInfo?.facilityId || '';
            if (!facilityId) {
                console.error('âŒ ì‹œì„¤ IDê°€ ì—†ìŠµë‹ˆë‹¤');
                alert('ì‹œì„¤ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            console.log('ğŸ’¾ ì´ë¯¸ì§€ ì €ì¥ ì‹œì‘...');
            
            // ë¡œë”© ìƒíƒœ í‘œì‹œ
            const saveBtn = document.getElementById('saveCurrentAndGoNext');
            const originalText = saveBtn.innerHTML;
            saveBtn.disabled = true;
            saveBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>ì €ì¥ ì¤‘...';
            
            // ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í˜„ì¬ í¬ë¡­ëœ ì´ë¯¸ì§€ë“¤ ê°€ì ¸ì˜¤ê¸°
            let croppedImages = [];
            if (window.FacilityImageMainController && window.FacilityImageMainController.getCroppedImages) {
                croppedImages = window.FacilityImageMainController.getCroppedImages();
            }
            
            if (croppedImages.length === 0) {
                // í¬ë¡­ëœ ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ ì›ë³¸ íŒŒì¼ë“¤ë¡œ ëŒ€ì²´
                console.log('âš ï¸ í¬ë¡­ëœ ì´ë¯¸ì§€ê°€ ì—†ìŒ, ì›ë³¸ íŒŒì¼ ì‚¬ìš©');
                if (window.selectedImageFiles && window.selectedImageFiles.length > 0) {
                    croppedImages = window.selectedImageFiles;
                }
            }
            
            if (croppedImages.length === 0) {
                console.error('âŒ ì €ì¥í•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤');
                alert('ì €ì¥í•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ê³  í¬ë¡­í•´ì£¼ì„¸ìš”.');
                saveBtn.disabled = false;
                saveBtn.innerHTML = originalText;
                return;
            }
            
            console.log(`ğŸ“ ì €ì¥í•  ì´ë¯¸ì§€ ${croppedImages.length}ê°œ`);
            
            // FormData ìƒì„±
            const formData = new FormData();
            formData.append('facilityId', facilityId);
            
            // ì´ë¯¸ì§€ íŒŒì¼ë“¤ ì¶”ê°€
            croppedImages.forEach((imageData, index) => {
                if (imageData instanceof File) {
                    formData.append('images', imageData);
                } else if (imageData.file) {
                    formData.append('images', imageData.file);
                } else if (imageData.blob) {
                    // Blobì„ Fileë¡œ ë³€í™˜
                    const file = new File([imageData.blob], `image_${index + 1}.webp`, { type: 'image/webp' });
                    formData.append('images', file);
                }
                
                // SEO ì •ë³´ ì¶”ê°€
                if (imageData.seoData) {
                    formData.append(`seoData[${index}]`, JSON.stringify(imageData.seoData));
                }
            });
            
            // ì„œë²„ë¡œ ì´ë¯¸ì§€ ì €ì¥ ìš”ì²­
            const response = await fetch(`/api/facility/${facilityId}/images`, {
                method: 'POST',
                body: formData
            });
            
            if (response.ok) {
                const result = await response.json();
                console.log('âœ… ì´ë¯¸ì§€ ì €ì¥ ì„±ê³µ:', result);
                
                // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
                if (result.message) {
                    alert(result.message);
                }
                
                // ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬
                sessionStorage.removeItem('selectedImageFiles');
                sessionStorage.removeItem('compressionStats');
                
                // ì €ì¥ëœ ì´ë¯¸ì§€ ì •ë³´ë¥¼ ì„¸ì…˜ì— ì €ì¥ (ìˆ˜ì • í˜ì´ì§€ì—ì„œ í‘œì‹œìš©)
                if (result.savedImages) {
                    sessionStorage.setItem('savedImages', JSON.stringify(result.savedImages));
                }
                
                // ìˆ˜ì • í˜ì´ì§€ë¡œ ì´ë™
                window.location.href = `/facility/edit/${facilityId}`;
                
            } else {
                const errorData = await response.json();
                console.error('âŒ ì´ë¯¸ì§€ ì €ì¥ ì‹¤íŒ¨:', errorData);
                alert(errorData.message || 'ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                
                saveBtn.disabled = false;
                saveBtn.innerHTML = originalText;
            }
            
        } catch (error) {
            console.error('âŒ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
            alert('ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            
            const saveBtn = document.getElementById('saveCurrentAndGoNext');
            saveBtn.disabled = false;
            saveBtn.innerHTML = '<i class="fas fa-save me-2"></i>ì €ì¥ í›„ ìˆ˜ì •í˜ì´ì§€ë¡œ';
        }
    }
    
    // ì „ì—­ í•¨ìˆ˜ë¡œ ë“±ë¡
    window.goBackToEdit = goBackToEdit;
    window.saveCropAndNext = saveCropAndNext;
    
    // ê°œë°œ ëª¨ë“œì—ì„œë§Œ ë””ë²„ê¹… ì •ë³´ ì¶œë ¥
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        console.log('ğŸš€ ì‹œì„¤ ì´ë¯¸ì§€ ëª¨ë“ˆí™” ì‹œìŠ¤í…œ v1.0.0');
        console.log('ğŸ“‹ ì‹œì„¤ ì •ë³´:', window.facilityInfo);
        console.log('ğŸ–¼ï¸ ê¸°ì¡´ ì´ë¯¸ì§€:', window.existingImages);
        console.log('ğŸ”§ ë””ë²„ê¹… ë„êµ¬: window.FacilityImageDebug');
        console.log('ğŸ’¡ ì‚¬ìš©ë²•: FacilityImageDebug.getSystemState(), FacilityImageDebug.getModuleInfo()');
    }
</script>

</body>
</html>
````
`````

## File: schema-postgresql.sql
`````sql
CREATE TABLE IF NOT EXISTS member (
    member_id SERIAL PRIMARY KEY,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    name VARCHAR(50) NOT NULL,
    phone VARCHAR(15),
    role VARCHAR(20) DEFAULT 'USER',
    is_approved BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE IF NOT EXISTS facility (
    facility_id SERIAL PRIMARY KEY,
    facility_name VARCHAR(100) NOT NULL,
    address VARCHAR(200) NOT NULL,
    detail_address VARCHAR(100),
    phone VARCHAR(15),
    facility_type VARCHAR(50),
    description TEXT,
    latitude DECIMAL(10, 8),
    longitude DECIMAL(11, 8),
    is_approved BOOLEAN DEFAULT false,
    registered_member_id INTEGER REFERENCES member(member_id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE IF NOT EXISTS facility_image (
    image_id SERIAL PRIMARY KEY,
    facility_id INTEGER REFERENCES facility(facility_id) ON DELETE CASCADE,
    image_path VARCHAR(500) NOT NULL,
    is_main BOOLEAN DEFAULT false,
    display_order INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE IF NOT EXISTS review (
    review_id SERIAL PRIMARY KEY,
    facility_id INTEGER REFERENCES facility(facility_id) ON DELETE CASCADE,
    member_id INTEGER REFERENCES member(member_id) ON DELETE CASCADE,
    rating INTEGER CHECK (rating >= 1 AND rating <= 5),
    content TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE IF NOT EXISTS board (
    board_id SERIAL PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    content TEXT,
    board_type VARCHAR(50) DEFAULT 'info',
    member_id INTEGER REFERENCES member(member_id) ON DELETE CASCADE,
    view_count INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE IF NOT EXISTS job_posting (
    job_id SERIAL PRIMARY KEY,
    facility_id INTEGER REFERENCES facility(facility_id) ON DELETE CASCADE,
    title VARCHAR(200) NOT NULL,
    content TEXT,
    job_type VARCHAR(50),
    salary VARCHAR(100),
    working_hours VARCHAR(100),
    requirements TEXT,
    benefits TEXT,
    is_active BOOLEAN DEFAULT true,
    deadline TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE IF NOT EXISTS job_application (
    application_id SERIAL PRIMARY KEY,
    job_id INTEGER REFERENCES job_posting(job_id) ON DELETE CASCADE,
    member_id INTEGER REFERENCES member(member_id) ON DELETE CASCADE,
    cover_letter TEXT,
    resume_path VARCHAR(500),
    status VARCHAR(20) DEFAULT 'PENDING',
    applied_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE INDEX IF NOT EXISTS idx_facility_location ON facility(latitude, longitude);
CREATE INDEX IF NOT EXISTS idx_facility_type ON facility(facility_type);
CREATE INDEX IF NOT EXISTS idx_review_facility ON review(facility_id);
CREATE INDEX IF NOT EXISTS idx_board_type ON board(board_type);
CREATE INDEX IF NOT EXISTS idx_job_active ON job_posting(is_active);
`````

## File: SECURITY_NOTICE.md
`````markdown
# ğŸš¨ ì¤‘ìš” ë³´ì•ˆ ê³µì§€

## âš ï¸ íŒ€ì› í•„ë… ì‚¬í•­

### ğŸ“‹ ì‹¤ì œ API í‚¤ ì •ë³´
- **ì‹¤ì œ ìƒˆë¡œìš´ ì¹´ì¹´ì˜¤ API í‚¤**: 
- **ì´ í‚¤ëŠ” íŒ€ì›ë“¤ë§Œ ì‚¬ìš©í•˜ê³  ì™¸ë¶€ì— ë…¸ì¶œí•˜ì§€ ë§ˆì„¸ìš”!**

### ğŸ” ë³´ì•ˆ ì£¼ì˜ì‚¬í•­

#### 1. ë¬¸ì„œ íŒŒì¼ ë³´ì•ˆ
- ëª¨ë“  MD íŒŒì¼ì—ì„œëŠ” ì‹¤ì œ API í‚¤ë¥¼ `ìƒˆë¡œ_ë°œê¸‰ë°›ì€_í‚¤`ë¡œ í‘œì‹œ
- ì‹¤ì œ í‚¤ëŠ” ì´ ë¬¸ì„œì™€ .env íŒŒì¼ì—ì„œë§Œ ê´€ë¦¬
- **ì´ íŒŒì¼(SECURITY_NOTICE.md)ì€ ì ˆëŒ€ Gitì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”!**

#### 2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •ì‹œ ì£¼ì˜
```env
# .env íŒŒì¼ì— ì‹¤ì œ í‚¤ ì…ë ¥
KAKAO_APP_KEY=
KAKAO_REST_API_KEY=
```

#### 3. íŒ€ ë‚´ë¶€ ê³µìœ  ë°©ë²•
- ìŠ¬ë™/ë””ìŠ¤ì½”ë“œ DMìœ¼ë¡œë§Œ ê³µìœ 
- ê³µê°œ ì±„ë„ì— í‚¤ ì •ë³´ ì ˆëŒ€ ê¸ˆì§€
- ìŠ¤í¬ë¦°ìƒ· ì‹œ í‚¤ ì •ë³´ ëª¨ìì´í¬ ì²˜ë¦¬

### ğŸš« ì ˆëŒ€ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ
- ì‹¤ì œ API í‚¤ë¥¼ MD íŒŒì¼ì— ì‘ì„±
- ê³µê°œ ì±„ë„ì— í‚¤ ì •ë³´ ê³µìœ 
- ì†ŒìŠ¤ì½”ë“œì— í‚¤ í•˜ë“œì½”ë”©
- ì´ íŒŒì¼ì„ Gitì— ì»¤ë°‹

### âœ… ì˜¬ë°”ë¥¸ ì‘ì—… ë°©ë²•
1. ì´ ë¬¸ì„œì—ì„œ ì‹¤ì œ í‚¤ í™•ì¸
2. ê°œì¸ .env íŒŒì¼ì—ë§Œ ì‹¤ì œ í‚¤ ì…ë ¥
3. ë¬¸ì„œ ì‘ì„±ì‹œ `ìƒˆë¡œ_ë°œê¸‰ë°›ì€_í‚¤` í”Œë ˆì´ìŠ¤í™€ë” ì‚¬ìš©
4. íŒ€ì› ë¬¸ì˜ì‹œ DMìœ¼ë¡œ í‚¤ ì •ë³´ ê³µìœ 

---

**ğŸ”’ ì´ íŒŒì¼ì€ ë¡œì»¬ì—ì„œë§Œ ë³´ê´€í•˜ê³  Gitì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”!**
`````

## File: SETUP_GUIDE.md
`````markdown
# ğŸš€ LightCare ê°œë°œ í™˜ê²½ ì„¤ì • ê°€ì´ë“œ

## ğŸ“Œ í˜„ì¬ ìƒí™©
ì´ë¯¸ì§€ ì²¨ë¶€ ê¸°ëŠ¥ì´ ì™„ì „íˆ êµ¬í˜„ë˜ì—ˆìœ¼ë‚˜, WSL í™˜ê²½ì— Javaì™€ MySQLì´ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šì•„ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì…ë‹ˆë‹¤.

## ğŸ”§ í•´ê²° ë°©ë²• (ê¶Œì¥ ìˆœì„œ)

### **ë°©ë²• 1: Windows í™˜ê²½ì—ì„œ ì‹¤í–‰ (ê°€ì¥ ë¹ ë¦„)**

1. **Windows PowerShell ë˜ëŠ” CMD ì—´ê¸°**
   ```cmd
   cd C:\Users\human-07\LightCare
   ```

2. **MySQL ì„œë¹„ìŠ¤ ì‹¤í–‰ í™•ì¸**
   - Windows ì„œë¹„ìŠ¤ì—ì„œ MySQL80 ì‹¤í–‰ ìƒíƒœ í™•ì¸
   - ë˜ëŠ” XAMPP ì œì–´íŒì—ì„œ MySQL ì‹œì‘

3. **ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰**
   ```cmd
   .\gradlew.bat bootRun
   ```

4. **ë¸Œë¼ìš°ì €ì—ì„œ í…ŒìŠ¤íŠ¸**
   - http://localhost:8080 ì ‘ì†
   - http://localhost:8080/board/write (ê²Œì‹œê¸€ ì´ë¯¸ì§€ ì—…ë¡œë“œ)
   - http://localhost:8080/review/write (ë¦¬ë·° ì´ë¯¸ì§€ ì—…ë¡œë“œ)

### **ë°©ë²• 2: WSLì— ê°œë°œ í™˜ê²½ êµ¬ì¶•**

1. **Java 11 ì„¤ì¹˜**
   ```bash
   sudo apt update
   sudo apt install openjdk-11-jdk
   export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64
   export PATH=$PATH:$JAVA_HOME/bin
   ```

2. **MySQL í´ë¼ì´ì–¸íŠ¸ ì„¤ì¹˜**
   ```bash
   sudo apt install mysql-client-core-8.0
   ```

3. **í™˜ê²½ë³€ìˆ˜ ì˜êµ¬ ì„¤ì •**
   ```bash
   echo 'export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64' >> ~/.bashrc
   echo 'export PATH=$PATH:$JAVA_HOME/bin' >> ~/.bashrc
   source ~/.bashrc
   ```

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì ìš©

### **MySQL Workbench ë˜ëŠ” phpMyAdmin ì‚¬ìš©**

1. **ìŠ¤í‚¤ë§ˆ íŒŒì¼ ìœ„ì¹˜**
   ```
   src/main/resources/schema-image-attachments.sql
   ```

2. **ì‹¤í–‰í•´ì•¼ í•  SQL**
   - ê²Œì‹œíŒ ì´ë¯¸ì§€ í…Œì´ë¸”: `board_images`
   - ë¦¬ë·° ì´ë¯¸ì§€ í…Œì´ë¸”: `review_images`
   - ê¸°ì¡´ í…Œì´ë¸” ì»¬ëŸ¼ ì¶”ê°€: `image_count`, `has_images`
   - ìë™ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°

### **ëª…ë ¹ì¤„ì—ì„œ ì§ì ‘ ì‹¤í–‰**
```bash
mysql -u root -p carelink < src/main/resources/schema-image-attachments.sql
```

## ğŸ¯ í…ŒìŠ¤íŠ¸í•´ì•¼ í•  ê¸°ëŠ¥ë“¤

### **1. ê²Œì‹œê¸€ ì´ë¯¸ì§€ ì—…ë¡œë“œ**
- ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ ì´ë¯¸ì§€ ì—…ë¡œë“œ
- ìµœëŒ€ 10ê°œ ì´ë¯¸ì§€ ì œí•œ í™•ì¸
- íŒŒì¼ í¬ê¸° ê²€ì¦ (5MB ì œí•œ)
- ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°
- alt text ì…ë ¥
- ê°œë³„ ì´ë¯¸ì§€ ì‚­ì œ

### **2. ë¦¬ë·° ì´ë¯¸ì§€ ì—…ë¡œë“œ**
- ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ ì´ë¯¸ì§€ ì—…ë¡œë“œ
- ìµœëŒ€ 5ê°œ ì´ë¯¸ì§€ ì œí•œ í™•ì¸
- WebP ìë™ ë³€í™˜ í™•ì¸
- ì¸ë„¤ì¼ ìƒì„± í™•ì¸

### **3. ë°±ì—”ë“œ API í…ŒìŠ¤íŠ¸**
- POST `/board/api/upload-images/{boardId}`
- DELETE `/board/api/delete-image/{imageId}`
- POST `/review/api/upload-images/{reviewId}`
- DELETE `/review/api/delete-image/{imageId}`

## ğŸ› ë¬¸ì œ í•´ê²°

### **Java ê´€ë ¨ ì˜¤ë¥˜**
- `JAVA_HOME is not set`: Java í™˜ê²½ë³€ìˆ˜ ì„¤ì • í•„ìš”
- `java: command not found`: Java ì„¤ì¹˜ ë˜ëŠ” PATH ì„¤ì • í•„ìš”

### **MySQL ê´€ë ¨ ì˜¤ë¥˜**
- `Access denied`: MySQL ì‚¬ìš©ì ê¶Œí•œ í™•ì¸
- `Unknown database`: carelink ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± í™•ì¸
- `Table doesn't exist`: schema-image-attachments.sql ì‹¤í–‰ í•„ìš”

### **ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜¤ë¥˜**
- `ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ì—†ìŒ`: C:/carelink-uploads/ ë””ë ‰í† ë¦¬ ìƒì„±
- `WebP ë³€í™˜ ì‹¤íŒ¨`: thumbnailator, imageio-webp ë¼ì´ë¸ŒëŸ¬ë¦¬ í™•ì¸
- `íŒŒì¼ í¬ê¸° ì´ˆê³¼`: 5MB ì œí•œ í™•ì¸

## ğŸ“ ì¶”ê°€ ì§€ì›ì´ í•„ìš”í•œ ê²½ìš°

1. **í™˜ê²½ ì„¤ì • ê´€ë ¨**: SETUP_GUIDE.md ì°¸ì¡°
2. **ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •**: schema-image-attachments.sql ì‹¤í–‰
3. **ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸**: ìœ„ í…ŒìŠ¤íŠ¸ í•­ëª©ë“¤ ìˆœì°¨ì  í™•ì¸

## ğŸ‰ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê²ƒë“¤

- âœ… ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì´ë¯¸ì§€ ì—…ë¡œë“œ UI
- âœ… ì‹¤ì‹œê°„ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
- âœ… WebP ìë™ ë³€í™˜ ë° ìš©ëŸ‰ ì ˆì•½
- âœ… ë‹¤ì¤‘ ì¸ë„¤ì¼ ìƒì„±
- âœ… SEO ìµœì í™”ë¥¼ ìœ„í•œ alt text
- âœ… ë°˜ì‘í˜• ì—…ë¡œë“œ ì¸í„°í˜ì´ìŠ¤

---

**ğŸ’¡ íŒ**: Windows í™˜ê²½ì—ì„œ ë¨¼ì € í…ŒìŠ¤íŠ¸í•œ í›„, í•„ìš”ì‹œ WSL í™˜ê²½ êµ¬ì¶•ì„ ì§„í–‰í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.
`````

## File: system.properties
`````
java.runtime.version=11
`````

## File: tomorrow-checklist.md
`````markdown
# ğŸ“‹ ë‚´ì¼ Oracle Cloud ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

## 1. Oracle Cloud ê°€ì… ì¬ì‹œë„
- [ ] 24ì‹œê°„ í›„ ì¬ì‹œë„
- [ ] ì‹œí¬ë¦¿ ëª¨ë“œ ë¸Œë¼ìš°ì € ì‚¬ìš©
- [ ] ë‹¤ë¥¸ ì¹´ë“œ ì¤€ë¹„ (í•„ìš”ì‹œ)

## 2. ê°€ì… ì„±ê³µ í›„ ìˆœì„œ

### Step 1: VM ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
```
ì´ë¦„: lightcare-server
Shape: VM.Standard.E2.1.Micro (Always Free)
OS: Ubuntu 20.04
Region: Korea Central (ì¶˜ì²œ)
```

### Step 2: SSH í‚¤ ë‹¤ìš´ë¡œë“œ
- Private Key ì•ˆì „í•œ ê³³ì— ì €ì¥
- ê¶Œí•œ ì„¤ì •: chmod 400 ssh-key.key

### Step 3: Security List ì„¤ì •
```
í¬íŠ¸ 22, 80, 443, 8080 ì˜¤í”ˆ
```

### Step 4: ì„œë²„ ì ‘ì† í›„ ì‹¤í–‰
```bash
# 1. ì„œë²„ ì ‘ì†
ssh -i ssh-key.key ubuntu@<public-ip>

# 2. ê¸°ë³¸ íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸
sudo apt update && sudo apt upgrade -y

# 3. Java 11 ì„¤ì¹˜
sudo apt install openjdk-11-jdk -y

# 4. MySQL ì„¤ì¹˜
sudo apt install mysql-server -y

# 5. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ìƒì„±
mkdir /home/ubuntu/lightcare
```

## 3. ë¡œì»¬ì—ì„œ ì¤€ë¹„í•  ê²ƒ

### JAR íŒŒì¼ ë¹Œë“œ
```bash
# Windows í™˜ê²½
./gradlew.bat clean build -x test

# ë¹Œë“œëœ íŒŒì¼ ìœ„ì¹˜
build/libs/carelink-0.0.1-SNAPSHOT.jar
```

### í™˜ê²½ë³€ìˆ˜ ì¤€ë¹„
```
DB_PASSWORD=ì„¤ì •í• ë¹„ë°€ë²ˆí˜¸
KAKAO_APP_KEY=b97b58672807a40c122a5deed8a98ea4
```

## 4. ë°°í¬ ëª…ë ¹ì–´

### JAR íŒŒì¼ ì—…ë¡œë“œ
```bash
scp -i ssh-key.key build/libs/*.jar ubuntu@<ip>:/home/ubuntu/lightcare/
```

### ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
```bash
# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
java -jar carelink-0.0.1-SNAPSHOT.jar

# ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
nohup java -jar carelink-0.0.1-SNAPSHOT.jar &
```

## 5. í™•ì¸ì‚¬í•­
- [ ] http://<public-ip>:8080 ì ‘ì† í…ŒìŠ¤íŠ¸
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
- [ ] ë¡œê·¸ íŒŒì¼ í™•ì¸

## ğŸ’¡ Tips
- Oracle CloudëŠ” í•œë²ˆ ì„¤ì •í•˜ë©´ ì˜êµ¬ ë¬´ë£Œ
- ì£¼ê¸°ì ìœ¼ë¡œ ì ‘ì†í•´ì„œ ê³„ì • í™œì„± ìœ ì§€
- ë¬¸ì œ ë°œìƒì‹œ ë‹¤ì‹œ ì—°ë½ì£¼ì„¸ìš”!
`````

## File: src/main/java/com/example/carelink/common/CustomMultipartFile.java
`````java
public class CustomMultipartFile implements MultipartFile {
â‹®----
public String getName() {
â‹®----
public String getOriginalFilename() {
â‹®----
public String getContentType() {
â‹®----
public boolean isEmpty() {
â‹®----
public long getSize() {
â‹®----
public byte[] getBytes() throws IOException {
â‹®----
public InputStream getInputStream() throws IOException {
return new ByteArrayInputStream(content);
â‹®----
public void transferTo(File dest) throws IOException, IllegalStateException {
try (FileOutputStream fos = new FileOutputStream(dest)) {
fos.write(content);
`````

## File: src/main/java/com/example/carelink/common/PageInfo.java
`````java
public class PageInfo<T> {
â‹®----
this.totalPages = (int) Math.ceil((double) totalCount / pageSize);
this.startPage = Math.max(1, currentPage - 4);
this.endPage = Math.min(totalPages, currentPage + 4);
â‹®----
public int getOffset() {
â‹®----
public boolean isFirstPage() {
â‹®----
public boolean isLastPage() {
`````

## File: src/main/java/com/example/carelink/config/DevSecurityConfig.java
`````java
public class DevSecurityConfig {
â‹®----
public SecurityFilterChain devFilterChain(HttpSecurity http) throws Exception {
â‹®----
.csrf(csrf -> csrf.disable())
.authorizeHttpRequests(auth -> auth
.anyRequest().permitAll()
â‹®----
.formLogin(formLogin -> formLogin.disable())
.httpBasic(httpBasic -> httpBasic.disable());
return http.build();
`````

## File: src/main/java/com/example/carelink/config/ProdSecurityConfig.java
`````java
public class ProdSecurityConfig {
â‹®----
public SecurityFilterChain prodFilterChain(HttpSecurity http) throws Exception {
â‹®----
.csrf(csrf -> csrf
.csrfTokenRepository(org.springframework.security.web.csrf.CookieCsrfTokenRepository.withHttpOnlyFalse())
â‹®----
.authorizeHttpRequests(auth -> auth
.requestMatchers(
new AntPathRequestMatcher("/css/**"),
new AntPathRequestMatcher("/js/**"),
new AntPathRequestMatcher("/images/**"),
new AntPathRequestMatcher("/favicon.ico")
).permitAll()
â‹®----
new AntPathRequestMatcher("/"),
new AntPathRequestMatcher("/member/login"),
new AntPathRequestMatcher("/member/join"),
new AntPathRequestMatcher("/member/checkUserId"),
new AntPathRequestMatcher("/facility/**"),
new AntPathRequestMatcher("/board/**"),
new AntPathRequestMatcher("/review/**"),
new AntPathRequestMatcher("/job/**"),
new AntPathRequestMatcher("/api/**"),
new AntPathRequestMatcher("/error")
â‹®----
.requestMatchers(new AntPathRequestMatcher("/admin/**")).hasRole("ADMIN")
.anyRequest().authenticated()
â‹®----
.formLogin(formLogin -> formLogin
.loginPage("/member/login")
.defaultSuccessUrl("/")
.failureUrl("/member/login?error=true")
.permitAll()
â‹®----
.logout(logout -> logout
.logoutRequestMatcher(new AntPathRequestMatcher("/member/logout"))
.logoutSuccessUrl("/")
.invalidateHttpSession(true)
.deleteCookies("JSESSIONID")
â‹®----
.sessionManagement(session -> session
.maximumSessions(1)
.maxSessionsPreventsLogin(false)
â‹®----
return http.build();
`````

## File: src/main/java/com/example/carelink/controller/HomeController.java
`````java
public class HomeController {
â‹®----
public String home(Model model) {
model.addAttribute("pageTitle", "ë©”ì¸");
â‹®----
int facilityCount = facilityService.getFacilityCount();
int jobCount = jobService.getJobCount();
int reviewCount = reviewService.getReviewCount();
int memberCount = memberService.getMemberCount();
int boardCount = boardService.getBoardCount();
model.addAttribute("facilityCount", facilityCount);
model.addAttribute("jobCount", jobCount);
model.addAttribute("reviewCount", reviewCount);
model.addAttribute("memberCount", memberCount);
model.addAttribute("boardCount", boardCount);
log.info("í†µê³„ ë°ì´í„° - ì‹œì„¤: {}, êµ¬ì¸êµ¬ì§: {}, ë¦¬ë·°: {}, íšŒì›: {}, ê²Œì‹œê¸€: {}",
â‹®----
log.error("í†µê³„ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨", e);
model.addAttribute("facilityCount", 0);
model.addAttribute("jobCount", 0);
model.addAttribute("reviewCount", 0);
model.addAttribute("memberCount", 0);
model.addAttribute("boardCount", 0);
â‹®----
log.info("ë©”ì¸ í˜ì´ì§€ ì ‘ì†");
â‹®----
public String about(Model model) {
model.addAttribute("pageTitle", "ì†Œê°œ");
â‹®----
public String error() {
`````

## File: src/main/java/com/example/carelink/dao/JobApplicationMapper.java
`````java
public interface JobApplicationMapper {
int insertJobApplication(JobApplicationDTO jobApplication);
int countByJobIdAndApplicantMemberId(@Param("jobId") Long jobId, @Param("applicantMemberId") Long applicantMemberId);
`````

## File: src/main/java/com/example/carelink/dto/FacilityImageDTO.java
`````java
public class FacilityImageDTO {
`````

## File: src/main/java/com/example/carelink/dto/JobApplicationDTO.java
`````java
public class JobApplicationDTO {
`````

## File: src/main/java/com/example/carelink/service/ImageOptimizationService.java
`````java
public class ImageOptimizationService {
private static final Logger log = LoggerFactory.getLogger(ImageOptimizationService.class);
â‹®----
THUMBNAIL_SIZES.put("small", new int[]{300, 200});
THUMBNAIL_SIZES.put("medium", new int[]{600, 400});
THUMBNAIL_SIZES.put("large", new int[]{1200, 800});
â‹®----
public ImageConversionResult processImage(MultipartFile originalFile, String baseFileName, String uploadDir) {
ImageConversionResult result = new ImageConversionResult();
â‹®----
if (!isValidImageMimeType(originalFile.getContentType())) {
log.error("ì§€ì›í•˜ì§€ ì•ŠëŠ” MIME íƒ€ì…: {}", originalFile.getContentType());
throw new IllegalArgumentException("ì§€ì›í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ í˜•ì‹ì…ë‹ˆë‹¤. (JPG, PNG, GIF, WebPë§Œ ê°€ëŠ¥)");
â‹®----
if (originalFile.getSize() > maxSize) {
throw new IllegalArgumentException("íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤. (ìµœëŒ€ 10MB)");
â‹®----
ensureDirectoryExists(uploadDir);
â‹®----
originalImage = ImageIO.read(originalFile.getInputStream());
â‹®----
log.error("ì´ë¯¸ì§€ ì½ê¸° ì‹¤íŒ¨: {}", originalFile.getOriginalFilename(), e);
throw new IllegalArgumentException("ì†ìƒëœ ì´ë¯¸ì§€ íŒŒì¼ì´ê±°ë‚˜ ì½ì„ ìˆ˜ ì—†ëŠ” í˜•ì‹ì…ë‹ˆë‹¤.");
â‹®----
throw new IllegalArgumentException("ì´ë¯¸ì§€ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
â‹®----
log.info("ì´ë¯¸ì§€ ì²˜ë¦¬ ì‹œì‘ (ì›ë³¸ ì €ì¥ X): {} ({}x{})", baseFileName,
originalImage.getWidth(), originalImage.getHeight());
String optimizedPath = processImageByFormat(originalFile, originalImage, uploadDir, baseFileName + "_optimized");
result.setOriginalWebPPath(optimizedPath);
String thumbnailFormat = "image/webp".equals(originalFile.getContentType()) ? "webp" : "jpg";
Map<String, String> thumbnails = generateThumbnails(originalImage, uploadDir, baseFileName, thumbnailFormat);
result.setThumbnails(thumbnails);
result.setOriginalWidth(originalImage.getWidth());
result.setOriginalHeight(originalImage.getHeight());
result.setOriginalSize(originalFile.getSize());
â‹®----
result.setWebpSize(getFileSize(fullPath));
result.setFallbackJpgPath(optimizedPath);
log.info("ì´ë¯¸ì§€ ì²˜ë¦¬ ì™„ë£Œ - ì›ë³¸ í¬ê¸°: {}KB, ë³€í™˜ í¬ê¸°: {}KB ({}% ì ˆê°)",
originalFile.getSize() / 1024,
result.getWebpSize() / 1024,
(int)((1 - (double)result.getWebpSize() / originalFile.getSize()) * 100));
â‹®----
log.error("ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", baseFileName, e);
throw new RuntimeException("ì´ë¯¸ì§€ ì²˜ë¦¬ ì‹¤íŒ¨", e);
â‹®----
private String processImageByFormat(MultipartFile originalFile, BufferedImage image,
â‹®----
String contentType = originalFile.getContentType();
String originalFileName = originalFile.getOriginalFilename();
if ("image/webp".equals(contentType)) {
return saveWebPDirectly(originalFile, uploadDir, fileName);
} else if ("image/jpeg".equals(contentType) || "image/jpg".equals(contentType)) {
return optimizeJPG(originalFile, image, uploadDir, fileName);
â‹®----
log.info("PNG/GIF/BMP/TIFFë¥¼ JPGë¡œ ë³€í™˜: {}", originalFileName);
return convertToJPG(resizeImage(image, MAX_WIDTH, MAX_HEIGHT), uploadDir, fileName);
â‹®----
private String saveWebPDirectly(MultipartFile originalFile, String uploadDir, String fileName) throws IOException {
â‹®----
BufferedImage image = ImageIO.read(originalFile.getInputStream());
BufferedImage resizedImage = resizeImage(image, MAX_WIDTH, MAX_HEIGHT);
â‹®----
if (ImageIO.write(resizedImage, "webp", new File(fullPath))) {
log.info("WebP ì§ì ‘ ì €ì¥ ì„±ê³µ: {} ({}KB)", webpFileName,
getFileSize(fullPath) / 1024);
â‹®----
log.warn("WebP ì €ì¥ ì‹¤íŒ¨, JPGë¡œ ë³€í™˜: {}", fileName);
return convertToJPG(resizedImage, uploadDir, fileName);
â‹®----
log.error("WebP ì²˜ë¦¬ ì‹¤íŒ¨, JPGë¡œ ë³€í™˜: {}", fileName, e);
â‹®----
private String optimizeJPG(MultipartFile originalFile, BufferedImage image,
â‹®----
long originalSize = originalFile.getSize();
â‹®----
Thumbnails.of(resizedImage)
.size(resizedImage.getWidth(), resizedImage.getHeight())
.outputQuality(1.0f)
.outputFormat("jpg")
.toFile(fullPath);
log.info("JPG ì›ë³¸ í’ˆì§ˆ ìœ ì§€: {} ({}KB)", jpgFileName, getFileSize(fullPath) / 1024);
â‹®----
log.info("JPG ì¬ì••ì¶• ìˆ˜í–‰: {} (ì›ë³¸: {}KB)", fileName, originalSize / 1024);
â‹®----
private String convertToJPG(BufferedImage image, String uploadDir, String fileName) throws IOException {
â‹®----
Thumbnails.of(image)
.size(image.getWidth(), image.getHeight())
.outputQuality(0.9f)
â‹®----
log.info("JPG ë³€í™˜ ì™„ë£Œ: {} ({}KB)", jpgFileName, getFileSize(fullPath) / 1024);
â‹®----
private Map<String, String> generateThumbnails(BufferedImage originalImage, String uploadDir,
â‹®----
for (Map.Entry<String, int[]> entry : THUMBNAIL_SIZES.entrySet()) {
String sizeName = entry.getKey();
int[] dimensions = entry.getValue();
â‹®----
if ("webp".equals(format)) {
if (ImageIO.write(
Thumbnails.of(originalImage)
.size(dimensions[0], dimensions[1])
.asBufferedImage(),
â‹®----
new File(fullPath))) {
thumbnails.put(sizeName, thumbnailFileName);
log.info("WebP ì¸ë„¤ì¼ ìƒì„± ì™„ë£Œ: {} ({}x{})", thumbnailFileName, dimensions[0], dimensions[1]);
â‹®----
log.info("JPG ì¸ë„¤ì¼ ìƒì„± ì™„ë£Œ: {} ({}x{})", thumbnailFileName, dimensions[0], dimensions[1]);
â‹®----
log.error("ì¸ë„¤ì¼ ìƒì„± ì‹¤íŒ¨: {} - {}", sizeName, e.getMessage());
â‹®----
private BufferedImage resizeImage(BufferedImage originalImage, int maxWidth, int maxHeight) throws IOException {
int originalWidth = originalImage.getWidth();
int originalHeight = originalImage.getHeight();
â‹®----
double ratio = Math.min(widthRatio, heightRatio);
â‹®----
return Thumbnails.of(originalImage)
.size(newWidth, newHeight)
.asBufferedImage();
â‹®----
private void ensureDirectoryExists(String dirPath) throws IOException {
Path path = Paths.get(dirPath);
if (!Files.exists(path)) {
Files.createDirectories(path);
log.info("ë””ë ‰í† ë¦¬ ìƒì„±: {}", dirPath);
â‹®----
private long getFileSize(String filePath) {
â‹®----
return Files.size(Paths.get(filePath));
â‹®----
public boolean isSupportedImageFormat(String filename) {
â‹®----
String extension = getFileExtension(filename).toLowerCase();
return extension.equals("jpg") || extension.equals("jpeg") ||
extension.equals("png") || extension.equals("gif") ||
extension.equals("webp") || extension.equals("bmp") ||
extension.equals("tiff") || extension.equals("tif");
â‹®----
public boolean isValidImageMimeType(String mimeType) {
â‹®----
return mimeType.startsWith("image/") && (
mimeType.equals("image/jpeg") ||
mimeType.equals("image/jpg") ||
mimeType.equals("image/png") ||
mimeType.equals("image/gif") ||
mimeType.equals("image/webp") ||
mimeType.equals("image/bmp") ||
mimeType.equals("image/tiff")
â‹®----
private String getFileExtension(String filename) {
int lastDot = filename.lastIndexOf('.');
return lastDot > 0 ? filename.substring(lastDot + 1) : "";
â‹®----
public static class ImageConversionResult {
â‹®----
public String getOriginalWebPPath() { return originalWebPPath; }
public void setOriginalWebPPath(String originalWebPPath) { this.originalWebPPath = originalWebPPath; }
public String getFallbackJpgPath() { return fallbackJpgPath; }
public void setFallbackJpgPath(String fallbackJpgPath) { this.fallbackJpgPath = fallbackJpgPath; }
public Map<String, String> getThumbnails() { return thumbnails; }
public void setThumbnails(Map<String, String> thumbnails) { this.thumbnails = thumbnails; }
public int getOriginalWidth() { return originalWidth; }
public void setOriginalWidth(int originalWidth) { this.originalWidth = originalWidth; }
public int getOriginalHeight() { return originalHeight; }
public void setOriginalHeight(int originalHeight) { this.originalHeight = originalHeight; }
public long getOriginalSize() { return originalSize; }
public void setOriginalSize(long originalSize) { this.originalSize = originalSize; }
public long getWebpSize() { return webpSize; }
public void setWebpSize(long webpSize) { this.webpSize = webpSize; }
`````

## File: src/main/java/com/example/carelink/validation/groups/OnFacilityJoin.java
`````java
public interface OnFacilityJoin {
`````

## File: src/main/resources/mapper/JobApplicationMapper.xml
`````xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.JobApplicationMapper">
    <insert id="insertJobApplication" parameterType="com.example.carelink.dto.JobApplicationDTO"
            useGeneratedKeys="true" keyProperty="id">
        INSERT INTO job_application (
            job_id,
            applicant_member_id,
            application_date,
            status
        ) VALUES (
            #{jobId},
            #{applicantMemberId},
            #{applicationDate},
            #{status}
        )
    </insert>
    <select id="countByJobIdAndApplicantMemberId" resultType="int">
        SELECT COUNT(*)
        FROM job_application
        WHERE job_id = #{jobId} AND applicant_member_id = #{applicantMemberId}
    </select>
    </mapper>
`````

## File: src/main/resources/static/css/facility-image-uploader.css
`````css
.facility-image-uploader {
.upload-area {
.upload-area::before {
.upload-area:hover {
.upload-area:hover::before {
.upload-area.drag-over {
.upload-content {
.upload-icon {
.upload-icon i {
â‹®----
.upload-title {
.upload-description {
.upload-format-info {
/* ë¯¸ë¦¬ë³´ê¸° ì˜ì—­ */
.preview-area {
.preview-header {
.preview-header h6 {
.preview-image-container {
.preview-image {
.image-overlay {
.preview-image-container:hover .image-overlay {
.image-info {
.image-size, .image-dimensions {
/* ì••ì¶• ì„¤ì • */
.compression-settings {
.compression-savings {
â‹®----
.form-range {
.form-range::-webkit-slider-track {
.form-range::-webkit-slider-thumb {
.form-range::-moz-range-track {
.form-range::-moz-range-thumb {
/* Alt í…ìŠ¤íŠ¸ ì„¹ì…˜ */
.alt-text-section {
.alt-text-section .form-label {
/* ì§„í–‰ë¥  ì˜ì—­ */
.progress-area {
.progress {
.progress-bar {
.progress-text {
/* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.btn {
.btn::before {
.btn:hover::before {
.btn-lg {
.btn-primary {
.btn-primary:hover {
.btn-outline-danger {
.btn-outline-danger:hover {
.btn-outline-secondary {
.btn-outline-secondary:hover {
/* ì—ëŸ¬ ë©”ì‹œì§€ */
.error-message {
â‹®----
/* ë°˜ì‘í˜• ë””ìì¸ */
â‹®----
.compression-settings .row {
.compression-settings .col-md-6 {
â‹®----
/* ë‹¤í¬ ëª¨ë“œ ì§€ì› */
â‹®----
.upload-title, .upload-description {
â‹®----
/* ì• ë‹ˆë©”ì´ì…˜ í–¥ìƒ */
.facility-image-uploader * {
/* í¬ì»¤ìŠ¤ ìƒíƒœ */
.btn:focus,
/* ë¡œë”© ìƒíƒœ */
.loading {
.loading::after {
`````

## File: src/main/resources/static/css/image-compressor.css
`````css
.image-compressor-wrapper {
.image-upload-area {
.image-upload-area:hover {
.image-upload-area.drag-over {
.upload-icon svg {
.image-upload-area:hover .upload-icon svg {
.compression-settings {
.compression-settings h4 {
.quality-slider {
.max-width-input {
.compress-btn {
.compress-btn:hover {
.file-preview {
.preview-item {
.preview-item:hover {
.preview-item img {
.compression-result {
.compression-result .text-green-600 {
.compression-progress {
.progress-bar {
.progress-fill {
.progress-fill::after {
â‹®----
.compression-summary {
â‹®----
.compression-summary h4 {
.compression-summary .text-green-700 {
/* ë°˜ì‘í˜• ë””ìì¸ */
â‹®----
.compression-settings .grid-cols-2 {
â‹®----
.preview-item .flex {
â‹®----
/* ë“œë˜ê·¸ ì•¤ ë“œë¡­ ìƒíƒœ */
.image-upload-area.border-blue-400 {
.image-upload-area.bg-blue-50 {
/* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
.loading-spinner {
â‹®----
/* ì••ì¶• í’ˆì§ˆ í‘œì‹œ */
.quality-indicator {
.quality-indicator::before {
.quality-indicator[data-quality="0.1"]::before { width: 10%; }
.quality-indicator[data-quality="0.2"]::before { width: 20%; }
.quality-indicator[data-quality="0.3"]::before { width: 30%; }
.quality-indicator[data-quality="0.4"]::before { width: 40%; }
.quality-indicator[data-quality="0.5"]::before { width: 50%; }
.quality-indicator[data-quality="0.6"]::before { width: 60%; }
.quality-indicator[data-quality="0.7"]::before { width: 70%; }
.quality-indicator[data-quality="0.8"]::before { width: 80%; }
.quality-indicator[data-quality="0.9"]::before { width: 90%; }
.quality-indicator[data-quality="1"]::before { width: 100%; }
/* íˆ´íŒ ìŠ¤íƒ€ì¼ */
.tooltip-text {
.tooltip-text::after {
.tooltip-text:hover::after {
/* ì„±ê³µ ë©”ì‹œì§€ */
.success-message {
â‹®----
/* íŒŒì¼ í¬ê¸° í‘œì‹œ */
.file-size {
.file-size.original {
.file-size.compressed {
.compression-badge {
.compression-badge.high {
.compression-badge.medium {
.compression-badge.low {
.alt-tags-section {
.alt-tags-section h4 {
.alt-tag-item {
.alt-tag-item:hover {
.file-icon {
.alt-text-input {
.alt-text-input:focus {
.char-count {
.auto-suggestion {
.auto-suggestion .auto-alt-text {
.use-suggestion {
.use-suggestion:hover {
.use-suggestion:disabled {
.seo-help {
.seo-help::before {
.seo-help::after {
.seo-help:hover::before,
.form-check-input:checked {
.form-check-label {
â‹®----
.alt-tag-item .d-flex {
â‹®----
.alt-input-success {
.alt-input-success:focus {
.alt-input-warning {
.alt-input-warning:focus {
`````

## File: src/main/resources/static/js/board-detail.js
`````javascript
console.log('board-detail.js ë¡œë“œë¨');
function deleteBoard(event) {
console.log('ì‚­ì œ í•¨ìˆ˜ ì‹¤í–‰');
â‹®----
event.preventDefault();
event.stopPropagation();
â‹®----
var button = event ? event.target.closest('button') : document.querySelector('button[data-board-id]');
console.log('ë²„íŠ¼:', button);
â‹®----
alert('ì‚­ì œ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
â‹®----
var boardId = parseInt(button.getAttribute('data-board-id'));
var type = button.getAttribute('data-type') || 'all';
console.log('boardId:', boardId, 'type:', type);
if (!boardId || isNaN(boardId)) {
alert('ê²Œì‹œê¸€ IDê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
â‹®----
if (!confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
â‹®----
var formData = new FormData();
formData.append('type', type);
fetch('/board/delete/' + boardId, {
â‹®----
.then(function(response) {
console.log('ì‘ë‹µ ìƒíƒœ:', response.status);
â‹®----
alert('ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
â‹®----
.catch(function(error) {
console.error('ì—ëŸ¬:', error);
alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
â‹®----
function likeBoard() {
var deleteButton = document.querySelector('button[data-board-id]');
var boardId = deleteButton ? parseInt(deleteButton.getAttribute('data-board-id')) : 0;
â‹®----
alert('ê²Œì‹œê¸€ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
â‹®----
fetch('/board/like/' + boardId, {
â‹®----
.then(function(response) { return response.json(); })
.then(function(data) {
â‹®----
var likeCount = document.getElementById('likeCount');
â‹®----
likeCount.textContent = parseInt(likeCount.textContent) + 1;
â‹®----
alert(data.message || 'ì¶”ì²œë˜ì—ˆìŠµë‹ˆë‹¤.');
â‹®----
alert(data.message || 'ì¶”ì²œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
â‹®----
function shareBoard() {
var title = document.title.replace(' - CareLink', '') || 'ê²Œì‹œê¸€';
â‹®----
navigator.clipboard.writeText(url).then(function() {
alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
}).catch(function() {
prompt('ë§í¬ë¥¼ ë³µì‚¬í•˜ì„¸ìš”:', url);
â‹®----
function reportBoard() {
if (confirm('ì´ ê²Œì‹œê¸€ì„ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
alert('ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.');
â‹®----
console.log('board-detail.js ë¡œë“œ ì™„ë£Œ');
`````

## File: src/main/resources/static/js/board-navigation.js
`````javascript
$(document).ready(function() {
console.log('ê²Œì‹œíŒ ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œë¨');
$('.board-type-link, .btn-group a[href*="/board"]').on('click', function(e) {
const url = $(this).attr('href');
if (url && window.location.pathname.includes('/board')) {
e.preventDefault();
â‹®----
history.replaceState(null, null, url);
console.log('íˆìŠ¤í† ë¦¬ êµì²´ë¨:', url);
â‹®----
$(document).on('click', '.pagination .page-link', function(e) {
â‹®----
if (url && url !== '#' && url !== 'javascript:void(0)' && window.location.pathname.includes('/board')) {
â‹®----
$(document).on('submit', 'form[action*="/board"]', function(e) {
if (window.location.pathname.includes('/board')) {
â‹®----
const form = $(this);
const url = form.attr('action') || '/board';
const formData = form.serialize();
â‹®----
history.replaceState(null, null, fullUrl);
`````

## File: src/main/resources/static/js/change-password.js
`````javascript
document.addEventListener('DOMContentLoaded', function() {
â‹®----
form: document.getElementById('changePasswordForm'),
currentPassword: document.getElementById('currentPassword'),
newPassword: document.getElementById('newPassword'),
confirmPassword: document.getElementById('confirmPassword'),
submitButton: document.getElementById('submitButton'),
â‹®----
current: document.getElementById('toggleCurrentPassword'),
new: document.getElementById('toggleNewPassword'),
confirm: document.getElementById('toggleConfirmPassword')
â‹®----
current: document.getElementById('currentPasswordFeedback'),
new: document.getElementById('newPasswordFeedback'),
confirm: document.getElementById('confirmPasswordFeedback')
â‹®----
console.log('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í˜ì´ì§€ DOM ìš”ì†Œ:', elements);
function setupPasswordToggle(inputElement, toggleButton) {
â‹®----
console.warn('ë¹„ë°€ë²ˆí˜¸ í† ê¸€ ìš”ì†Œê°€ ì—†ìŠµë‹ˆë‹¤.');
â‹®----
toggleButton.addEventListener('click', function() {
const icon = this.querySelector('i');
â‹®----
icon.classList.remove('fa-eye');
icon.classList.add('fa-eye-slash');
â‹®----
icon.classList.remove('fa-eye-slash');
icon.classList.add('fa-eye');
â‹®----
setupPasswordToggle(elements.currentPassword, elements.toggleButtons.current);
setupPasswordToggle(elements.newPassword, elements.toggleButtons.new);
setupPasswordToggle(elements.confirmPassword, elements.toggleButtons.confirm);
function clearValidationState(inputElement) {
â‹®----
inputElement.classList.remove('is-valid', 'is-invalid');
â‹®----
function setFeedback(feedbackElement, message, isValid) {
â‹®----
feedbackElement.classList.remove('invalid-feedback');
feedbackElement.classList.add('valid-feedback');
â‹®----
feedbackElement.classList.remove('valid-feedback');
feedbackElement.classList.add('invalid-feedback');
â‹®----
function setValidationState(inputElement, isValid) {
â‹®----
inputElement.classList.remove('is-invalid');
inputElement.classList.add('is-valid');
â‹®----
inputElement.classList.remove('is-valid');
inputElement.classList.add('is-invalid');
â‹®----
function validateCurrentPassword() {
const value = elements.currentPassword.value.trim();
â‹®----
clearValidationState(elements.currentPassword);
setFeedback(elements.feedbacks.current, '', true);
â‹®----
setValidationState(elements.currentPassword, isValid);
â‹®----
setFeedback(elements.feedbacks.current, 'í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.', false);
â‹®----
// ìƒˆ ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
function validateNewPassword() {
â‹®----
const isValid = PASSWORD_PATTERN.test(value);
â‹®----
clearValidationState(elements.newPassword);
setFeedback(elements.feedbacks.new, '', true);
â‹®----
setValidationState(elements.newPassword, isValid);
â‹®----
setFeedback(elements.feedbacks.new, '8-20ìì˜ ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ 1ê°œ ì´ìƒ í¬í•¨í•´ì£¼ì„¸ìš”.', false);
â‹®----
// í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ì™€ ê°™ì€ì§€ í™•ì¸
â‹®----
setValidationState(elements.newPassword, false);
setFeedback(elements.feedbacks.new, 'í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ì™€ ë‹¤ë¥¸ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', false);
â‹®----
setFeedback(elements.feedbacks.new, 'ì‚¬ìš© ê°€ëŠ¥í•œ ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤.', true);
â‹®----
// ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ê²€ì¦
function validateConfirmPassword() {
â‹®----
clearValidationState(elements.confirmPassword);
setFeedback(elements.feedbacks.confirm, '', true);
â‹®----
setValidationState(elements.confirmPassword, isValid);
â‹®----
setFeedback(elements.feedbacks.confirm, 'ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.', false);
â‹®----
setFeedback(elements.feedbacks.confirm, 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•©ë‹ˆë‹¤.', true);
â‹®----
// í¼ ì œì¶œ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
function updateSubmitButton() {
const isCurrentValid = validateCurrentPassword();
const isNewValid = validateNewPassword();
const isConfirmValid = validateConfirmPassword();
â‹®----
// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
â‹®----
elements.currentPassword.addEventListener('input', function() {
validateCurrentPassword();
â‹®----
validateNewPassword();
â‹®----
updateSubmitButton();
â‹®----
elements.currentPassword.addEventListener('blur', function() {
â‹®----
elements.newPassword.addEventListener('input', function() {
â‹®----
validateConfirmPassword();
â‹®----
elements.newPassword.addEventListener('blur', function() {
â‹®----
elements.confirmPassword.addEventListener('input', function() {
â‹®----
elements.confirmPassword.addEventListener('blur', function() {
â‹®----
elements.form.addEventListener('submit', function(event) {
const isFormValid = updateSubmitButton();
â‹®----
event.preventDefault();
console.log('í¼ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨');
if (!validateCurrentPassword() && elements.currentPassword) {
elements.currentPassword.focus();
} else if (!validateNewPassword() && elements.newPassword) {
elements.newPassword.focus();
} else if (!validateConfirmPassword() && elements.confirmPassword) {
elements.confirmPassword.focus();
â‹®----
console.log('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í¼ ì œì¶œ');
â‹®----
console.log('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í˜ì´ì§€ JavaScript ì´ˆê¸°í™” ì™„ë£Œ');
`````

## File: src/main/resources/static/js/facility-edit.js
`````javascript
function searchFacilityAddress() {
new daum.Postcode({
â‹®----
document.getElementById('facilityAddress').value = fullAddr;
updateMapAndCoordinates(fullAddr);
â‹®----
}).open();
â‹®----
function updateMapAndCoordinates(address) {
const geocoder = new kakao.maps.services.Geocoder();
geocoder.addressSearch(address, function(result, status) {
â‹®----
const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
document.getElementById('latitude').value = result[0].y;
document.getElementById('longitude').value = result[0].x;
const mapContainer = document.getElementById('mapPreviewContainer');
â‹®----
const map = new kakao.maps.Map(document.getElementById('previewMap'), mapOption);
const marker = new kakao.maps.Marker({
â‹®----
marker.setMap(map);
const infowindow = new kakao.maps.InfoWindow({
â‹®----
infowindow.open(map, marker);
â‹®----
function handleOperatingHours() {
const radio24 = document.getElementById('operating24');
const radioCustom = document.getElementById('operatingCustom');
const customInput = document.getElementById('customOperatingHours');
const hiddenInput = document.getElementById('operatingHours');
function updateOperatingHours() {
â‹®----
radio24.addEventListener('change', updateOperatingHours);
radioCustom.addEventListener('change', updateOperatingHours);
customInput.addEventListener('input', function() {
â‹®----
updateOperatingHours();
â‹®----
function formatPhoneNumber(input) {
let value = input.value.replace(/\D/g, '');
â‹®----
if (value.startsWith('02')) {
â‹®----
formattedValue = value.slice(0, 2) + '-' + value.slice(2);
â‹®----
formattedValue = value.slice(0, 2) + '-' + value.slice(2, 6) + '-' + value.slice(6);
â‹®----
formattedValue = value.slice(0, 2) + '-' + value.slice(2, 6) + '-' + value.slice(6, 10);
â‹®----
} else if (value.startsWith('01')) {
â‹®----
formattedValue = value.slice(0, 3) + '-' + value.slice(3);
â‹®----
formattedValue = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7);
â‹®----
formattedValue = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7, 11);
â‹®----
function validateForm() {
â‹®----
const element = document.getElementById(field.id);
if (!element.value.trim()) {
alert(`${field.name}ì„(ë¥¼) ì…ë ¥í•´ì£¼ì„¸ìš”.`);
element.focus();
â‹®----
const phone = document.getElementById('phone').value;
if (!phonePattern.test(phone)) {
alert('ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.');
document.getElementById('phone').focus();
â‹®----
document.addEventListener('DOMContentLoaded', function() {
handleOperatingHours();
const phoneInput = document.getElementById('phone');
â‹®----
phoneInput.addEventListener('input', function() {
formatPhoneNumber(this);
â‹®----
const existingAddress = document.getElementById('facilityAddress').value;
â‹®----
updateMapAndCoordinates(existingAddress);
â‹®----
const form = document.getElementById('facilityEditForm');
â‹®----
form.addEventListener('submit', function(e) {
if (!validateForm()) {
e.preventDefault();
`````

## File: src/main/resources/static/js/image-compressor.js
`````javascript
class ImageCompressor {
â‹®----
async compressFile(file, customOptions = {}) {
â‹®----
if (!this.isValidImageFile(file)) {
throw new Error('ì§€ì›ë˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ íŒŒì¼ì…ë‹ˆë‹¤.');
â‹®----
const compressedFile = await this.compress(file, options);
â‹®----
const compressionRatio = Math.round((1 - compressedSize / originalSize) * 100);
â‹®----
console.error('ì´ë¯¸ì§€ ì••ì¶• ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
â‹®----
async compressFiles(files, customOptions = {}) {
const fileArray = Array.from(files);
â‹®----
const result = await this.compressFile(file, customOptions);
results.push(result);
â‹®----
this.onProgress(i + 1, fileArray.length, result);
â‹®----
console.error(`íŒŒì¼ ${file.name} ì••ì¶• ì‹¤íŒ¨:`, error);
results.push({ error: error.message, file });
â‹®----
async compress(file, options) {
return new Promise((resolve, reject) => {
const canvas = document.createElement('canvas');
const ctx = canvas.getContext('2d');
const img = new Image();
img.onload = () => {
â‹®----
const { width, height } = this.calculateDimensions(
â‹®----
ctx.drawImage(img, 0, 0, width, height);
canvas.toBlob((blob) => {
â‹®----
const compressedFile = new File([blob], file.name, {
â‹®----
lastModified: Date.now()
â‹®----
resolve(compressedFile);
â‹®----
reject(new Error('ì••ì¶• ì‹¤íŒ¨'));
â‹®----
reject(error);
â‹®----
img.onerror = () => reject(new Error('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨'));
img.src = URL.createObjectURL(file);
â‹®----
calculateDimensions(originalWidth, originalHeight, maxWidth, maxHeight, enableResize) {
â‹®----
return { width: Math.round(width), height: Math.round(height) };
â‹®----
isValidImageFile(file) {
â‹®----
return validTypes.includes(file.type);
â‹®----
static formatFileSize(bytes) {
â‹®----
const i = Math.floor(Math.log(bytes) / Math.log(k));
return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
â‹®----
setProgressCallback(callback) {
â‹®----
class ImageCompressorUI {
â‹®----
this.input = document.querySelector(inputSelector);
this.compressor = new ImageCompressor(options);
â‹®----
this.init();
â‹®----
init() {
â‹®----
console.error('ì´ë¯¸ì§€ ì…ë ¥ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
â‹®----
this.createUI();
this.bindEvents();
â‹®----
createUI() {
â‹®----
const wrapper = document.createElement('div');
â‹®----
<label class="block text-xs text-gray-700 mb-1">í’ˆì§ˆ (${Math.round(this.compressor.options.quality * 100)}%)</label>
â‹®----
this.input.parentNode.insertBefore(wrapper, this.input);
â‹®----
this.fileInput = wrapper.querySelector('input[type="file"]');
this.uploadArea = wrapper.querySelector('.image-upload-area');
this.settingsArea = wrapper.querySelector('.compression-settings');
this.previewArea = wrapper.querySelector('.file-preview');
this.altTagsSection = wrapper.querySelector('.alt-tags-section');
this.progressArea = wrapper.querySelector('.compression-progress');
â‹®----
bindEvents() {
this.fileInput.addEventListener('change', (e) => {
this.handleFiles(e.target.files);
â‹®----
this.uploadArea.addEventListener('click', () => {
this.fileInput.click();
â‹®----
this.uploadArea.addEventListener('dragover', (e) => {
e.preventDefault();
this.uploadArea.classList.add('border-blue-400', 'bg-blue-50');
â‹®----
this.uploadArea.addEventListener('dragleave', (e) => {
â‹®----
this.uploadArea.classList.remove('border-blue-400', 'bg-blue-50');
â‹®----
this.uploadArea.addEventListener('drop', (e) => {
â‹®----
this.handleFiles(e.dataTransfer.files);
â‹®----
this.wrapper.querySelector('.quality-slider').addEventListener('input', (e) => {
const quality = parseFloat(e.target.value);
â‹®----
e.target.previousElementSibling.textContent = `í’ˆì§ˆ (${Math.round(quality * 100)}%)`;
â‹®----
this.wrapper.querySelector('.max-width-input').addEventListener('input', (e) => {
this.compressor.options.maxWidth = parseInt(e.target.value);
â‹®----
this.wrapper.querySelector('.compress-btn').addEventListener('click', () => {
this.compressImages();
â‹®----
handleFiles(files) {
â‹®----
this.originalFiles = Array.from(files);
this.showPreview(files);
this.showAltTagInputs(files);
this.settingsArea.classList.remove('hidden');
this.previewArea.classList.remove('hidden');
this.altTagsSection.classList.remove('hidden');
â‹®----
showPreview(files) {
const previewList = this.wrapper.querySelector('.preview-list');
â‹®----
Array.from(files).forEach((file, index) => {
const previewItem = document.createElement('div');
â‹®----
const reader = new FileReader();
reader.onload = (e) => {
â‹®----
<p class="text-xs text-gray-500">ì›ë³¸: ${ImageCompressor.formatFileSize(file.size)}</p>
â‹®----
reader.readAsDataURL(file);
previewList.appendChild(previewItem);
â‹®----
async compressImages() {
â‹®----
this.progressArea.classList.remove('hidden');
const progressFill = this.wrapper.querySelector('.progress-fill');
const progressText = this.wrapper.querySelector('.compression-progress p');
this.compressor.setProgressCallback((current, total, result) => {
const percentage = Math.round((current / total) * 100);
â‹®----
this.updatePreviewResult(current - 1, result);
â‹®----
const results = await this.compressor.compressFiles(this.originalFiles);
this.compressedFiles = results.map(result => result.file).filter(file => file);
this.updateOriginalInput();
â‹®----
this.showCompressionSummary(results);
â‹®----
console.error('ì••ì¶• ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
â‹®----
updatePreviewResult(index, result) {
const previewItems = this.wrapper.querySelectorAll('.preview-item');
â‹®----
const resultDiv = previewItems[index].querySelector('.compression-result');
â‹®----
resultDiv.querySelector('.compressed-size').textContent = ImageCompressor.formatFileSize(result.compressedSize);
resultDiv.querySelector('.compression-ratio').textContent = result.compressionRatio;
resultDiv.classList.remove('hidden');
â‹®----
updateOriginalInput() {
const dt = new DataTransfer();
this.compressedFiles.forEach(file => {
dt.items.add(file);
â‹®----
this.input.dispatchEvent(new Event('change', { bubbles: true }));
â‹®----
showCompressionSummary(results) {
const totalOriginal = results.reduce((sum, result) => sum + (result.originalSize || 0), 0);
const totalCompressed = results.reduce((sum, result) => sum + (result.compressedSize || 0), 0);
const totalRatio = Math.round((1 - totalCompressed / totalOriginal) * 100);
const summary = document.createElement('div');
â‹®----
<p>ì›ë³¸ ìš©ëŸ‰: ${ImageCompressor.formatFileSize(totalOriginal)}</p>
<p>ì••ì¶• í›„ ìš©ëŸ‰: ${ImageCompressor.formatFileSize(totalCompressed)}</p>
â‹®----
<p class="mt-1 font-medium">SEO ìµœì í™”ë¥¼ ìœ„í•´ ìš©ëŸ‰ì´ ${ImageCompressor.formatFileSize(totalOriginal - totalCompressed)} ì¤„ì–´ë“¤ì—ˆìŠµë‹ˆë‹¤!</p>
â‹®----
this.wrapper.appendChild(summary);
â‹®----
showAltTagInputs(files) {
const altTagsList = this.wrapper.querySelector('.alt-tags-list');
â‹®----
const altTagItem = document.createElement('div');
â‹®----
const autoGeneratedAlt = this.generateAutoAltText(fileName);
â‹®----
altTagsList.appendChild(altTagItem);
â‹®----
this.bindAltTagEvents();
â‹®----
bindAltTagEvents() {
this.wrapper.querySelectorAll('.alt-text-input').forEach(input => {
const charCount = input.closest('.alt-tag-item').querySelector('.char-count');
input.addEventListener('input', () => {
â‹®----
this.wrapper.querySelectorAll('.use-suggestion').forEach(button => {
button.addEventListener('click', () => {
â‹®----
const altInput = this.wrapper.querySelector(`.alt-text-input[data-file-index="${fileIndex}"]`);
const suggestedText = button.closest('.auto-suggestion').querySelector('.auto-alt-text').textContent;
â‹®----
altInput.dispatchEvent(new Event('input'));
â‹®----
generateAutoAltText(fileName) {
â‹®----
.replace(/\.[^/.]+$/, '') // í™•ì¥ì ì œê±°
.replace(/[_-]/g, ' ')    // ì–¸ë”ìŠ¤ì½”ì–´, í•˜ì´í”ˆì„ ê³µë°±ìœ¼ë¡œ
.replace(/\d+/g, '')      // ìˆ«ì ì œê±°
.trim();
â‹®----
// í•œê¸€ì¸ì§€ í™•ì¸
const isKorean = /[ã„±-ã…|ã…-ã…£|ê°€-í£]/.test(cleanName);
â‹®----
// í•œê¸€ íŒŒì¼ëª… ì²˜ë¦¬
if (cleanName.includes('ì‹œì„¤') || cleanName.includes('ìš”ì–‘ì›')) {
â‹®----
} else if (cleanName.includes('í”„ë¡œí•„') || cleanName.includes('ì¦ëª…')) {
â‹®----
// ì˜ë¬¸ íŒŒì¼ëª… ì²˜ë¦¬
const words = cleanName.toLowerCase().split(/\s+/).filter(word => word.length > 0);
â‹®----
// ì‹œì„¤ ê´€ë ¨ í‚¤ì›Œë“œ
if (words.some(word => ['facility', 'nursing', 'care', 'hospital'].includes(word))) {
return `${this.capitalizeWords(cleanName)} facility image`;
â‹®----
else if (words.some(word => ['profile', 'avatar', 'user', 'member'].includes(word))) {
return `${this.capitalizeWords(cleanName)} profile picture`;
â‹®----
return `${this.capitalizeWords(cleanName)} image`;
â‹®----
capitalizeWords(str) {
return str.replace(/\b\w/g, l => l.toUpperCase());
â‹®----
getAltTexts() {
â‹®----
const inputs = this.wrapper.querySelectorAll('.alt-text-input');
const autoGenerate = this.wrapper.querySelector('#autoGenerateAlt').checked;
inputs.forEach((input, index) => {
let altText = input.value.trim();
â‹®----
altText = this.generateAutoAltText(this.originalFiles[index].name);
â‹®----
altTexts.push(altText);
â‹®----
const altTexts = this.getAltTexts();
â‹®----
this.compressedFiles.forEach((file, index) => {
â‹®----
this.updateAltTextHiddenFields(altTexts);
â‹®----
updateAltTextHiddenFields(altTexts) {
this.wrapper.querySelectorAll('input[name*="altText"]').forEach(input => input.remove());
altTexts.forEach((altText, index) => {
â‹®----
const hiddenInput = document.createElement('input');
â‹®----
this.wrapper.appendChild(hiddenInput);
â‹®----
hiddenInput.name = `${this.input.name.replace('File', 'AltText')}`;
â‹®----
document.addEventListener('DOMContentLoaded', () => {
const inputs = document.querySelectorAll('input[type="file"][data-image-compressor]');
inputs.forEach(input => {
const options = input.dataset.imageCompressor ? JSON.parse(input.dataset.imageCompressor) : {};
new ImageCompressorUI(`#${input.id}`, options);
`````

## File: src/main/resources/static/js/job-detail.js
`````javascript
document.addEventListener('DOMContentLoaded', function() {
console.log('êµ¬ì¸êµ¬ì§ ìƒì„¸ë³´ê¸° í˜ì´ì§€ JavaScript ë¡œë“œë¨');
currentJobId = extractJobIdFromUrl();
â‹®----
currentJobId = document.getElementById('jobId')?.value;
â‹®----
console.log('í˜„ì¬ êµ¬ì¸êµ¬ì§ ID:', currentJobId);
initializeEventListeners();
â‹®----
function extractJobIdFromUrl() {
â‹®----
const segments = path.split('/');
const detailIndex = segments.findIndex(segment => segment === 'detail');
â‹®----
console.warn('URLì—ì„œ êµ¬ì¸êµ¬ì§ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', path);
â‹®----
function initializeEventListeners() {
const applyBtn = document.querySelector('[onclick="applyJob()"]');
â‹®----
applyBtn.removeAttribute('onclick');
applyBtn.addEventListener('click', applyJob);
â‹®----
const contactBtn = document.querySelector('[onclick="contactJob()"]');
â‹®----
contactBtn.removeAttribute('onclick');
contactBtn.addEventListener('click', contactJob);
â‹®----
const bookmarkBtn = document.querySelector('[onclick="bookmarkJob()"]');
â‹®----
bookmarkBtn.removeAttribute('onclick');
bookmarkBtn.addEventListener('click', bookmarkJob);
â‹®----
const shareBtn = document.querySelector('[onclick="shareJob()"]');
â‹®----
shareBtn.removeAttribute('onclick');
shareBtn.addEventListener('click', shareJob);
â‹®----
const deleteBtn = document.querySelector('[onclick="deleteJob()"]');
â‹®----
deleteBtn.removeAttribute('onclick');
deleteBtn.addEventListener('click', deleteJob);
â‹®----
const messageBtn = document.querySelector('[onclick="sendMessage()"]');
â‹®----
messageBtn.removeAttribute('onclick');
messageBtn.addEventListener('click', sendMessage);
â‹®----
const reportBtn = document.querySelector('[onclick="reportJob()"]');
â‹®----
reportBtn.removeAttribute('onclick');
reportBtn.addEventListener('click', reportJob);
â‹®----
function applyJob() {
â‹®----
alert('ì˜¤ë¥˜: êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
â‹®----
if (confirm('ì´ êµ¬ì¸ì— ì§€ì›í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
fetch(`/job/${currentJobId}/apply`, {
â‹®----
body: JSON.stringify({
â‹®----
.then(response => {
â‹®----
alert('ì§€ì›ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹´ë‹¹ìê°€ ì—°ë½ë“œë¦´ ì˜ˆì •ì…ë‹ˆë‹¤.');
location.reload();
â‹®----
throw new Error('ì§€ì› ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
â‹®----
.catch(error => {
console.error('ì§€ì› ì˜¤ë¥˜:', error);
alert('ì§€ì› ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
â‹®----
function contactJob() {
const contactPhone = document.querySelector('#contactPhone')?.value;
const contactEmail = document.querySelector('#contactEmail')?.value;
â‹®----
if (confirm('ë‹´ë‹¹ìì—ê²Œ ì—°ë½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì—°ë½ì²˜: ' + contactPhone)) {
â‹®----
if (confirm('ë‹´ë‹¹ìì—ê²Œ ì´ë©”ì¼ì„ ë³´ë‚´ì‹œê² ìŠµë‹ˆê¹Œ?\nì´ë©”ì¼: ' + contactEmail)) {
â‹®----
alert('ì—°ë½ì²˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
â‹®----
function bookmarkJob() {
â‹®----
alert('ê´€ì‹¬ë“±ë¡ ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.');
â‹®----
function shareJob() {
â‹®----
const title = document.querySelector('h3')?.textContent || 'êµ¬ì¸êµ¬ì§';
â‹®----
navigator.share({
â‹®----
}).catch(error => {
console.log('ê³µìœ  ì‹¤íŒ¨:', error);
fallbackShare(url);
â‹®----
function fallbackShare(url) {
â‹®----
navigator.clipboard.writeText(url).then(() => {
alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
}).catch(() => {
promptShare(url);
â‹®----
function promptShare(url) {
const textArea = document.createElement('textarea');
â‹®----
document.body.appendChild(textArea);
textArea.select();
â‹®----
document.execCommand('copy');
â‹®----
alert('ë§í¬ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”:\n' + url);
â‹®----
document.body.removeChild(textArea);
â‹®----
function deleteJob() {
â‹®----
if (confirm('ì •ë§ë¡œ ì´ êµ¬ì¸êµ¬ì§ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ë°ì´í„°ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
const form = document.createElement('form');
â‹®----
const csrfToken = document.querySelector('meta[name="_csrf"]');
â‹®----
const csrfInput = document.createElement('input');
â‹®----
csrfInput.value = csrfToken.getAttribute('content');
form.appendChild(csrfInput);
â‹®----
document.body.appendChild(form);
form.submit();
â‹®----
function sendMessage() {
alert('ìª½ì§€ ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.');
â‹®----
function reportJob() {
â‹®----
const reason = prompt('ì‹ ê³  ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”:');
if (reason && reason.trim()) {
if (confirm('ì´ êµ¬ì¸êµ¬ì§ì„ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚¬ìœ : ' + reason)) {
fetch(`/job/${currentJobId}/report`, {
â‹®----
reason: reason.trim()
â‹®----
alert('ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ê²€í†  í›„ ì¡°ì¹˜í•˜ê² ìŠµë‹ˆë‹¤.');
â‹®----
throw new Error('ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
â‹®----
console.error('ì‹ ê³  ì˜¤ë¥˜:', error);
alert('ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
`````

## File: src/main/resources/static/js/my-posts.js
`````javascript
document.addEventListener('DOMContentLoaded', function() {
â‹®----
filterButtons: document.querySelectorAll('.filter-btn'),
sortSelect: document.getElementById('sortSelect'),
postsContainer: document.getElementById('postsContainer'),
postItems: document.querySelectorAll('.post-item'),
tableBody: document.querySelector('#postsContainer tbody')
â‹®----
console.log('ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ DOM ìš”ì†Œ:', {
â‹®----
const urlParams = new URLSearchParams(window.location.search);
const currentType = urlParams.get('type') || 'all';
const currentPage = parseInt(urlParams.get('page')) || 1;
const currentPageSize = parseInt(urlParams.get('pageSize')) || 10;
function setupFilterButtons() {
elements.filterButtons.forEach(button => {
button.addEventListener('click', function() {
const selectedType = this.getAttribute('data-type');
â‹®----
const newUrl = new URL(window.location.href);
newUrl.searchParams.set('type', selectedType);
newUrl.searchParams.set('page', '1');
console.log('í•„í„° ë³€ê²½:', selectedType);
window.location.href = newUrl.toString();
â‹®----
function setupSorting() {
â‹®----
elements.sortSelect.addEventListener('change', function() {
â‹®----
console.log('ì •ë ¬ ë³€ê²½:', sortType);
const rows = Array.from(elements.tableBody.querySelectorAll('.post-item'));
rows.sort((a, b) => {
â‹®----
const dateA = new Date(a.getAttribute('data-created'));
const dateB = new Date(b.getAttribute('data-created'));
â‹®----
const oldDateA = new Date(a.getAttribute('data-created'));
const oldDateB = new Date(b.getAttribute('data-created'));
â‹®----
const viewsA = parseInt(a.getAttribute('data-views')) || 0;
const viewsB = parseInt(b.getAttribute('data-views')) || 0;
â‹®----
const likesA = parseInt(a.getAttribute('data-likes')) || 0;
const likesB = parseInt(b.getAttribute('data-likes')) || 0;
â‹®----
rows.forEach(row => {
elements.tableBody.appendChild(row);
â‹®----
rows.forEach((row, index) => {
â‹®----
setTimeout(() => {
â‹®----
function setupRowEffects() {
const postRows = document.querySelectorAll('.post-item');
postRows.forEach(row => {
row.addEventListener('mouseenter', function() {
â‹®----
row.addEventListener('mouseleave', function() {
â‹®----
// í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ë©”ì‹œì§€
function showLoadedMessage() {
â‹®----
console.log(`ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ: ${totalPosts}ê°œ ê²Œì‹œê¸€`);
â‹®----
// ì´ˆê¸°í™” í•¨ìˆ˜
function init() {
setupFilterButtons();
setupSorting();
setupRowEffects();
showLoadedMessage();
console.log('ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ JavaScript ì´ˆê¸°í™” ì™„ë£Œ');
â‹®----
init();
`````

## File: src/main/resources/static/js/phone-formatter.js
`````javascript
class PhoneFormatter {
â‹®----
format(phone) {
â‹®----
// ìˆ«ìë§Œ ì¶”ì¶œ
const cleaned = phone.replace(/\D/g, '');
// ë¹ˆ ë¬¸ìì—´ì´ê±°ë‚˜ ë„ˆë¬´ ì§§ìœ¼ë©´ ê·¸ëŒ€ë¡œ ë°˜í™˜
â‹®----
// ê° íŒ¨í„´ì— ëŒ€í•´ ë§¤ì¹­ ì‹œë„
for (const [areaCodePattern, formatRules] of Object.entries(this.patterns)) {
const areaRegex = new RegExp(areaCodePattern);
if (areaRegex.test(cleaned)) {
// í•´ë‹¹ ì§€ì—­ë²ˆí˜¸ì˜ í¬ë§· ê·œì¹™ë“¤ì„ ì‹œë„
â‹®----
if (rule.pattern.test(cleaned)) {
return cleaned.replace(rule.pattern, rule.format);
â‹®----
// ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš° ê¸°ë³¸ í¬ë§· ì ìš©
return this.applyDefaultFormat(cleaned);
â‹®----
/**
     * ê¸°ë³¸ í¬ë§· ì ìš© (ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ë²ˆí˜¸ìš©)
     * @param {string} cleaned - ìˆ«ìë§Œ ìˆëŠ” ì „í™”ë²ˆí˜¸
     * @returns {string} ê¸°ë³¸ í¬ë§·íŒ…ëœ ì „í™”ë²ˆí˜¸
     */
applyDefaultFormat(cleaned) {
â‹®----
// 10ìë¦¬: 3-3-4
return cleaned.replace(/^(\d{3})(\d{3})(\d{4})$/, '$1-$2-$3');
â‹®----
if (cleaned.startsWith('010') || cleaned.startsWith('070')) {
return cleaned.replace(/^(\d{3})(\d{4})(\d{4})$/, '$1-$2-$3');
â‹®----
return cleaned.replace(/^(\d{4})(\d{3})(\d{4})$/, '$1-$2-$3');
â‹®----
return cleaned.replace(/^(\d{2})(\d{3})(\d{4})$/, '$1-$2-$3');
â‹®----
validate(phone) {
â‹®----
// íœ´ëŒ€í° ë²ˆí˜¸ ê²€ì‚¬
if (/^(010|011|016|017|018|019)\d{8}$/.test(cleaned)) {
â‹®----
result.formatted = this.format(cleaned);
â‹®----
// ì¸í„°ë„· ì „í™” ê²€ì‚¬
if (/^070\d{8}$/.test(cleaned)) {
â‹®----
// ì¼ë°˜ ì „í™” ê²€ì‚¬
â‹®----
/**
     * ì‹¤ì‹œê°„ í¬ë§·íŒ…ì„ ìœ„í•œ ì…ë ¥ í•¸ë“¤ëŸ¬
     * @param {HTMLElement} input - ì…ë ¥ í•„ë“œ
     */
attachToInput(input) {
â‹®----
// ì…ë ¥ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
input.addEventListener('input', function(e) {
â‹®----
const formatted = self.format(currentValue);
â‹®----
e.target.setSelectionRange(cursorPosition + diff, cursorPosition + diff);
â‹®----
input.addEventListener('blur', function(e) {
const validation = self.validate(e.target.value);
const feedbackElement = input.parentNode.querySelector('.phone-feedback');
â‹®----
feedbackElement.remove();
â‹®----
if (e.target.value.trim() !== '') {
const feedback = document.createElement('div');
â‹®----
input.parentNode.appendChild(feedback);
â‹®----
input.classList.remove('is-invalid');
input.classList.add('is-valid');
â‹®----
input.classList.remove('is-valid');
input.classList.add('is-invalid');
â‹®----
input.classList.remove('is-valid', 'is-invalid');
â‹®----
input.addEventListener('keypress', function(e) {
â‹®----
if (!allowedKeys.includes(e.key) && !e.ctrlKey && !e.metaKey) {
e.preventDefault();
â‹®----
window.phoneFormatter = new PhoneFormatter();
document.addEventListener('DOMContentLoaded', function() {
const phoneInputs = document.querySelectorAll('input[type="tel"], input[name*="phone"], input[id*="phone"]');
phoneInputs.forEach(input => {
window.phoneFormatter.attachToInput(input);
`````

## File: src/main/resources/static/js/rich-text-editor.js
`````javascript
class RichTextEditor {
â‹®----
this.element = document.querySelector(selector);
â‹®----
console.error('RichTextEditor: Element not found:', selector);
â‹®----
this.init();
â‹®----
init() {
this.createEditor();
this.bindEvents();
this.initializeContent();
â‹®----
createEditor() {
â‹®----
this.container = document.createElement('div');
â‹®----
${this.generateToolbar()}
â‹®----
this.element.parentNode.insertBefore(this.container, this.element.nextSibling);
this.toolbar = this.container.querySelector('.rte-toolbar');
this.content = this.container.querySelector('.rte-content');
this.statusbar = this.container.querySelector('.rte-statusbar');
this.fileInput = document.createElement('input');
â‹®----
this.fileInput.accept = this.options.allowedImageTypes.join(',');
â‹®----
this.container.appendChild(this.fileInput);
â‹®----
generateToolbar() {
â‹®----
this.options.toolbar.forEach(tool => {
â‹®----
toolbarGroups.push(currentGroup);
â‹®----
currentGroup.push(tool);
â‹®----
return toolbarGroups.map(group =>
â‹®----
${group.map(tool => this.generateToolButton(tool)).join('')}
â‹®----
).join('');
â‹®----
generateToolButton(tool) {
â‹®----
bindEvents() {
// íˆ´ë°” ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
this.toolbar.addEventListener('click', (e) => {
const button = e.target.closest('.rte-btn');
â‹®----
e.preventDefault();
this.executeCommand(button.dataset.command);
â‹®----
this.toolbar.addEventListener('change', (e) => {
if (e.target.classList.contains('rte-select')) {
this.executeCommand(e.target.dataset.command, e.target.value);
â‹®----
this.toolbar.addEventListener('input', (e) => {
if (e.target.classList.contains('rte-color')) {
â‹®----
this.content.addEventListener('input', () => {
this.updateOriginalTextarea();
this.updateStatusBar();
this.handlePlaceholder();
â‹®----
this.content.addEventListener('focus', () => {
â‹®----
this.content.addEventListener('blur', () => {
â‹®----
this.content.addEventListener('keydown', (e) => {
this.handleKeyboardShortcuts(e);
â‹®----
this.fileInput.addEventListener('change', (e) => {
this.handleImageUpload(e.target.files[0]);
â‹®----
this.content.addEventListener('dragover', (e) => {
â‹®----
this.content.classList.add('rte-dragover');
â‹®----
this.content.addEventListener('dragleave', (e) => {
â‹®----
this.content.classList.remove('rte-dragover');
â‹®----
this.content.addEventListener('drop', (e) => {
â‹®----
const files = Array.from(e.dataTransfer.files);
const imageFile = files.find(file => this.options.allowedImageTypes.includes(file.type));
â‹®----
this.handleImageUpload(imageFile);
â‹®----
executeCommand(command, value = null) {
this.content.focus();
â‹®----
this.insertLink();
â‹®----
this.insertImage();
â‹®----
this.insertTable();
â‹®----
this.insertBlockquote();
â‹®----
this.insertCodeBlock();
â‹®----
this.toggleFullscreen();
â‹®----
this.toggleSourceCode();
â‹®----
document.execCommand('fontSize', false, value);
â‹®----
document.execCommand(command, false, value);
â‹®----
insertLink() {
const selection = window.getSelection();
const selectedText = selection.toString();
const url = prompt('ë§í¬ URLì„ ì…ë ¥í•˜ì„¸ìš”:', 'https://');
â‹®----
const linkText = selectedText || prompt('ë§í¬ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:', url);
â‹®----
this.insertHTML(link);
â‹®----
insertImage() {
this.fileInput.click();
â‹®----
async handleImageUpload(file) {
â‹®----
if (!this.options.allowedImageTypes.includes(file.type)) {
alert('ì§€ì›ë˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ í˜•ì‹ì…ë‹ˆë‹¤.');
â‹®----
alert(`ì´ë¯¸ì§€ í¬ê¸°ëŠ” ${this.formatFileSize(this.options.maxImageSize)} ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.`);
â‹®----
this.insertHTML(loadingImg);
â‹®----
const compressor = new ImageCompressor({
â‹®----
const result = await compressor.compressFile(file);
â‹®----
const reader = new FileReader();
reader.onload = (e) => {
â‹®----
const loadingSpan = this.content.querySelector('.rte-loading');
â‹®----
this.insertHTML(img);
â‹®----
reader.readAsDataURL(file);
â‹®----
console.error('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨:', error);
alert('ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
â‹®----
loadingSpan.remove();
â‹®----
insertTable() {
const rows = prompt('í–‰ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”:', '3');
const cols = prompt('ì—´ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”:', '3');
if (rows && cols && !isNaN(rows) && !isNaN(cols)) {
â‹®----
for (let i = 0; i < parseInt(rows); i++) {
â‹®----
for (let j = 0; j < parseInt(cols); j++) {
â‹®----
this.insertHTML(table);
â‹®----
insertBlockquote() {
â‹®----
this.insertHTML(blockquote);
â‹®----
insertCodeBlock() {
â‹®----
this.insertHTML(code);
â‹®----
insertHTML(html) {
if (document.queryCommandSupported('insertHTML')) {
document.execCommand('insertHTML', false, html);
â‹®----
const range = selection.getRangeAt(0);
range.deleteContents();
const div = document.createElement('div');
â‹®----
const fragment = document.createDocumentFragment();
â‹®----
fragment.appendChild(div.firstChild);
â‹®----
range.insertNode(fragment);
â‹®----
toggleFullscreen() {
this.container.classList.toggle('rte-fullscreen');
const btn = this.toolbar.querySelector('[data-command="fullscreen"] i');
btn.className = this.container.classList.contains('rte-fullscreen')
â‹®----
toggleSourceCode() {
const isSourceMode = this.container.classList.contains('rte-source-mode');
â‹®----
const sourceTextarea = this.container.querySelector('.rte-source-textarea');
â‹®----
sourceTextarea.remove();
this.container.classList.remove('rte-source-mode');
â‹®----
const sourceTextarea = document.createElement('textarea');
â‹®----
this.content.parentNode.appendChild(sourceTextarea);
this.container.classList.add('rte-source-mode');
â‹®----
handleKeyboardShortcuts(e) {
â‹®----
switch (e.key.toLowerCase()) {
â‹®----
this.executeCommand('bold');
â‹®----
this.executeCommand('italic');
â‹®----
this.executeCommand('underline');
â‹®----
this.executeCommand('undo');
â‹®----
this.executeCommand('redo');
â‹®----
handlePlaceholder() {
const placeholder = this.content.querySelector('.rte-placeholder');
const isEmpty = this.content.textContent.trim() === '' ||
(this.content.innerHTML.trim() === '<p class="rte-placeholder">' + this.options.placeholder + '</p>');
â‹®----
placeholder.remove();
â‹®----
updateOriginalTextarea() {
â‹®----
// placeholder ì œê±°
if (content.includes('rte-placeholder')) {
â‹®----
// ë³€ê²½ ì´ë²¤íŠ¸ ë°œìƒ
this.element.dispatchEvent(new Event('input', { bubbles: true }));
this.element.dispatchEvent(new Event('change', { bubbles: true }));
â‹®----
updateStatusBar() {
â‹®----
const words = text.trim() ? text.trim().split(/\s+/).length : 0;
â‹®----
this.statusbar.querySelector('.rte-word-count').textContent = `ë‹¨ì–´ ìˆ˜: ${words}`;
this.statusbar.querySelector('.rte-char-count').textContent = `ê¸€ì ìˆ˜: ${chars}`;
â‹®----
initializeContent() {
â‹®----
formatFileSize(bytes) {
â‹®----
const i = Math.floor(Math.log(bytes) / Math.log(k));
return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
â‹®----
getContent() {
â‹®----
setContent(html) {
â‹®----
focus() {
â‹®----
destroy() {
â‹®----
this.container.remove();
â‹®----
// ì „ì—­ ì‚¬ìš©ì„ ìœ„í•œ í•¨ìˆ˜
â‹®----
// ìë™ ì´ˆê¸°í™” (data-rich-editor ì†ì„±ì´ ìˆëŠ” textareaë“¤ì— ëŒ€í•´)
document.addEventListener('DOMContentLoaded', () => {
const textareas = document.querySelectorAll('textarea[data-rich-editor]');
textareas.forEach(textarea => {
const options = textarea.dataset.richEditor ? JSON.parse(textarea.dataset.richEditor) : {};
new RichTextEditor(`#${textarea.id}`, options);
`````

## File: src/main/resources/db_performance_indexes.sql
`````sql
CREATE INDEX IF NOT EXISTS idx_reviews_title ON reviews(title);
CREATE INDEX IF NOT EXISTS idx_reviews_created_at ON reviews(created_at DESC);
CREATE INDEX IF NOT EXISTS idx_reviews_rating ON reviews(rating);
CREATE INDEX IF NOT EXISTS idx_reviews_facility_id ON reviews(facility_id);
CREATE INDEX IF NOT EXISTS idx_boards_category ON boards(category);
CREATE INDEX IF NOT EXISTS idx_boards_created_at ON boards(created_at DESC);
CREATE INDEX IF NOT EXISTS idx_boards_title ON boards(title);
CREATE INDEX IF NOT EXISTS idx_boards_status ON boards(is_active, is_deleted);
CREATE INDEX IF NOT EXISTS idx_jobs_type ON job_postings(job_type);
CREATE INDEX IF NOT EXISTS idx_jobs_status ON job_postings(status);
CREATE INDEX IF NOT EXISTS idx_jobs_created_at ON job_postings(created_at DESC);
CREATE INDEX IF NOT EXISTS idx_jobs_salary ON job_postings(salary);
CREATE INDEX IF NOT EXISTS idx_facilities_name ON facilities(facility_name);
CREATE INDEX IF NOT EXISTS idx_facilities_location ON facilities(latitude, longitude);
CREATE INDEX IF NOT EXISTS idx_facilities_type ON facilities(facility_type);
CREATE INDEX IF NOT EXISTS idx_members_email ON members(email);
CREATE INDEX IF NOT EXISTS idx_members_role ON members(role);
CREATE INDEX IF NOT EXISTS idx_reviews_facility_rating ON reviews(facility_id, rating);
CREATE INDEX IF NOT EXISTS idx_boards_category_active ON boards(category, is_active, is_deleted);
CREATE INDEX IF NOT EXISTS idx_jobs_type_status ON job_postings(job_type, status);
`````

## File: README.md
`````markdown
# LightCare (ë¼ì´íŠ¸ì¼€ì–´) - ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ í”Œë«í¼

![Spring Boot](https://img.shields.io/badge/Spring%20Boot-2.7.18-brightgreen.svg)
![Java](https://img.shields.io/badge/Java-11-orange.svg)
![MySQL](https://img.shields.io/badge/MySQL-8.0-blue.svg)
![MyBatis](https://img.shields.io/badge/MyBatis-2.3.1-red.svg)
![Build Status](https://img.shields.io/badge/Build-Passing-success.svg)

## ğŸ“– í”„ë¡œì íŠ¸ ê°œìš”

LightCareëŠ” í•œêµ­ì˜ ìš”ì–‘ì› ë° ë…¸ì¸ìš”ì–‘ì‹œì„¤ê³¼ êµ¬ì§ìë¥¼ ì—°ê²°í•˜ëŠ” ì „ë¬¸ êµ¬ì¸êµ¬ì§ í”Œë«í¼ì…ë‹ˆë‹¤. ê³ ë ¹í™” ì‚¬íšŒì— í•„ìš”í•œ ìš”ì–‘ ì„œë¹„ìŠ¤ ì¸ë ¥ì„ íš¨ìœ¨ì ìœ¼ë¡œ ë§¤ì¹­í•˜ê³ , ì‹œì„¤ê³¼ ê·¼ë¡œì ëª¨ë‘ì—ê²Œ ìµœì í™”ëœ í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤.

### ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

- **ğŸ‘¥ íšŒì› ê´€ë¦¬**: êµ¬ì§ì ë° ì‹œì„¤ ê´€ë¦¬ì íšŒì›ê°€ì…/ë¡œê·¸ì¸
- **ğŸ¥ ì‹œì„¤ ê²€ìƒ‰**: ì¹´ì¹´ì˜¤ë§µ ì—°ë™ ì‹œì„¤ ìœ„ì¹˜ ê²€ìƒ‰ ë° ìƒì„¸ ì •ë³´
- **ğŸ’¼ êµ¬ì¸êµ¬ì§**: ì±„ìš©ê³µê³  ë“±ë¡/ê²€ìƒ‰, ì§€ì› ì‹œìŠ¤í…œ
- **â­ ë¦¬ë·° ì‹œìŠ¤í…œ**: ì‹œì„¤ í‰ê°€ ë° í›„ê¸° ê³µìœ 
- **ğŸ“‹ ì •ë³´ ê²Œì‹œíŒ**: ì—…ê³„ ì •ë³´ ë° ê³µì§€ì‚¬í•­

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Framework**: Spring Boot 2.7.18
- **Language**: Java 11
- **Database**: MySQL 8.0
- **ORM**: MyBatis 2.3.1
- **Build Tool**: Gradle
- **Template Engine**: Thymeleaf

### Frontend
- **Template**: Thymeleaf
- **Styling**: Bootstrap 5, CSS3
- **JavaScript**: Vanilla JS
- **Maps**: Kakao Maps API

### Development Tools
- **IDE**: IntelliJ IDEA
- **Version Control**: Git/GitHub
- **Database Tool**: MySQL Workbench

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Java 11 ì´ìƒ
- MySQL 8.0 ì´ìƒ
- Git

### ì„¤ì¹˜ ë° ì‹¤í–‰

1. **ë ˆí¬ì§€í† ë¦¬ í´ë¡ **
   ```bash
   git clone https://github.com/dooseob/lightcare.git
   cd lightcare
   ```

2. **ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •**
   ```sql
   CREATE DATABASE carelink CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```

3. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •** (`src/main/resources/application.yml`)
   ```yaml
   spring:
     datasource:
       url: jdbc:mysql://localhost:3306/carelink
       username: root
       password: mysql
   ```

4. **ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™”**
   ```bash
   # MySQLì—ì„œ schema.sql ì‹¤í–‰
   mysql -u root -p carelink < src/main/resources/schema.sql
   ```

5. **ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰**
   ```bash
   ./gradlew bootRun
   ```

6. **ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†**
   ```
   http://localhost:8080
   ```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/com/example/carelink/
â”‚   â”‚   â”œâ”€â”€ controller/          # ì›¹ ìš”ì²­ ì²˜ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ HomeController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ FacilityController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ JobController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewController.java
â”‚   â”‚   â”‚   â””â”€â”€ BoardController.java
â”‚   â”‚   â”œâ”€â”€ service/             # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ FacilityService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ JobService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewService.java
â”‚   â”‚   â”‚   â””â”€â”€ BoardService.java
â”‚   â”‚   â”œâ”€â”€ dao/                 # ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberMapper.java
â”‚   â”‚   â”‚   â”œâ”€â”€ FacilityMapper.java
â”‚   â”‚   â”‚   â”œâ”€â”€ JobMapper.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewMapper.java
â”‚   â”‚   â”‚   â””â”€â”€ BoardMapper.java
â”‚   â”‚   â”œâ”€â”€ dto/                 # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberDTO.java
â”‚   â”‚   â”‚   â”œâ”€â”€ FacilityDTO.java
â”‚   â”‚   â”‚   â”œâ”€â”€ JobDTO.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewDTO.java
â”‚   â”‚   â”‚   â””â”€â”€ BoardDTO.java
â”‚   â”‚   â””â”€â”€ common/              # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚       â”œâ”€â”€ BaseDTO.java
â”‚   â”‚       â”œâ”€â”€ PageInfo.java
â”‚   â”‚       â””â”€â”€ Constants.java
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ static/              # ì •ì  ë¦¬ì†ŒìŠ¤
â”‚       â”‚   â”œâ”€â”€ css/
â”‚       â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ templates/           # Thymeleaf í…œí”Œë¦¿
â”‚       â”‚   â”œâ”€â”€ layout/
â”‚       â”‚   â”œâ”€â”€ member/
â”‚       â”‚   â”œâ”€â”€ facility/
â”‚       â”‚   â”œâ”€â”€ job/
â”‚       â”‚   â”œâ”€â”€ review/
â”‚       â”‚   â””â”€â”€ board/
â”‚       â”œâ”€â”€ mapper/              # MyBatis SQL ë§¤í¼
â”‚       â”‚   â”œâ”€â”€ memberMapper.xml
â”‚       â”‚   â”œâ”€â”€ facilityMapper.xml
â”‚       â”‚   â”œâ”€â”€ jobMapper.xml
â”‚       â”‚   â”œâ”€â”€ reviewMapper.xml
â”‚       â”‚   â””â”€â”€ boardMapper.xml
â”‚       â”œâ”€â”€ application.yml      # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
â”‚       â”œâ”€â”€ mybatis-config.xml   # MyBatis ì„¤ì •
â”‚       â””â”€â”€ schema.sql          # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
```

## ğŸ‘¥ íŒ€ êµ¬ì„± ë° ì—­í• 

| íŒ€ì› | ë‹´ë‹¹ ê¸°ëŠ¥ | ì£¼ìš” êµ¬í˜„ ì‚¬í•­ |
|------|----------|---------------|
| **íŒ€ì› A** | íšŒì› ê´€ë¦¬ | ë¡œê·¸ì¸, íšŒì›ê°€ì…, í”„ë¡œí•„ ê´€ë¦¬, ì„¸ì…˜ ê´€ë¦¬ |
| **íŒ€ì› B** | ì‹œì„¤ ê²€ìƒ‰ | ì¹´ì¹´ì˜¤ë§µ ì—°ë™, ì‹œì„¤ ì •ë³´ ê´€ë¦¬, ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ |
| **íŒ€ì› C** | êµ¬ì¸êµ¬ì§ | ì±„ìš©ê³µê³  ê²Œì‹œíŒ, ì§€ì› ì‹œìŠ¤í…œ, ì±„ìš© ê´€ë¦¬ |
| **íŒ€ì› D** | ë¦¬ë·° & ê²Œì‹œíŒ | ì‹œì„¤ ë¦¬ë·°, í‰ì  ì‹œìŠ¤í…œ, ì •ë³´ ê²Œì‹œíŒ |

## ğŸ—„ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ì£¼ìš” í…Œì´ë¸”

- **member**: íšŒì› ì •ë³´ (êµ¬ì§ì, ì‹œì„¤ ê´€ë¦¬ì)
- **facility**: ìš”ì–‘ì‹œì„¤ ì •ë³´ ë° ìœ„ì¹˜ ë°ì´í„°
- **job_posting**: ì±„ìš©ê³µê³  ì •ë³´
- **review**: ì‹œì„¤ ë¦¬ë·° ë° í‰ì 
- **board**: ì •ë³´ ê²Œì‹œíŒ

### ERD
```sql
-- ì£¼ìš” í…Œì´ë¸” ê´€ê³„
-- member (1) â†â†’ (N) job_posting
-- member (1) â†â†’ (N) review
-- facility (1) â†â†’ (N) job_posting
-- facility (1) â†â†’ (N) review
```

## ğŸ”§ ê°œë°œ ê°€ì´ë“œ

### ì½”ë”© ì»¨ë²¤ì…˜

- **í´ë˜ìŠ¤ëª…**: PascalCase (`MemberController`)
- **ë©”ì„œë“œëª…**: camelCase (`getMemberInfo`)
- **ìƒìˆ˜**: UPPER_SNAKE_CASE (`DEFAULT_PAGE_SIZE`)
- **íŒ¨í‚¤ì§€ëª…**: ì†Œë¬¸ì (`com.example.carelink`)

### Git ë¸Œëœì¹˜ ì „ëµ

```
main                 # ë©”ì¸ ë¸Œëœì¹˜
â”œâ”€â”€ feature/member   # íŒ€ì› A - íšŒì› ê´€ë¦¬
â”œâ”€â”€ feature/facility # íŒ€ì› B - ì‹œì„¤ ê²€ìƒ‰
â”œâ”€â”€ feature/job      # íŒ€ì› C - êµ¬ì¸êµ¬ì§
â””â”€â”€ feature/review   # íŒ€ì› D - ë¦¬ë·° ì‹œìŠ¤í…œ
```

### ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹

```
[feat] ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
[fix] ë²„ê·¸ ìˆ˜ì •
[docs] ë¬¸ì„œ ìˆ˜ì •
[style] ì½”ë“œ ìŠ¤íƒ€ì¼ ìˆ˜ì •
[refactor] ì½”ë“œ ë¦¬íŒ©í† ë§
[test] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test

# ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸
./gradlew build

# ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
./gradlew check
```

## ğŸ“ API ë¬¸ì„œ

### ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸

| Method | URL | ì„¤ëª… |
|--------|-----|------|
| GET | `/` | ë©”ì¸ í˜ì´ì§€ |
| GET/POST | `/member/login` | ë¡œê·¸ì¸ |
| GET/POST | `/member/join` | íšŒì›ê°€ì… |
| GET | `/facility/search` | ì‹œì„¤ ê²€ìƒ‰ |
| GET | `/job/list` | ì±„ìš©ê³µê³  ëª©ë¡ |
| GET | `/review/list` | ë¦¬ë·° ëª©ë¡ |
| GET | `/board/list` | ê²Œì‹œíŒ ëª©ë¡ |

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ

1. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜**
   ```
   í•´ê²°: application.ymlì˜ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • í™•ì¸
   ```

2. **MyBatis ë§¤í¼ ì˜¤ë¥˜**
   ```
   í•´ê²°: mapper XMLì˜ namespaceì™€ ì¸í„°í˜ì´ìŠ¤ ê²½ë¡œ ì¼ì¹˜ í™•ì¸
   ```

3. **Thymeleaf í…œí”Œë¦¿ ì˜¤ë¥˜**
   ```
   í•´ê²°: templates í´ë” ê²½ë¡œì™€ ì»¨íŠ¸ë¡¤ëŸ¬ ë°˜í™˜ê°’ ì¼ì¹˜ í™•ì¸
   ```

## ğŸ”„ ìµœê·¼ ì—…ë°ì´íŠ¸

### v1.0.0 (2025-06-22)
- âœ… í”„ë¡œì íŠ¸ ê¸°ë³¸ êµ¬ì¡° ì™„ì„±
- âœ… ì „ì²´ íŒŒì¼ ì—ëŸ¬ ë””ë²„ê¹… ì™„ë£Œ
- âœ… í˜ì´ì§• ë¡œì§ ì˜¤ë¥˜ ìˆ˜ì •
- âœ… Gradle ë¹Œë“œ ì„¤ì • ê°œì„ 
- âœ… ì½”ë“œ í’ˆì§ˆ ê°œì„  (NPE ë°©ì§€, ì¤‘ë³µ ì½”ë“œ ì œê±°)

## ğŸš€ í–¥í›„ ê°œë°œ ê³„íš

- [ ] **v1.1**: ë³´ì•ˆ ê°•í™” (ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”, CSRF ë³´í˜¸)
- [ ] **v1.2**: ì¹´ì¹´ì˜¤ë§µ API ì—°ë™ ì™„ì„±
- [ ] **v1.3**: ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ
- [ ] **v1.4**: ëª¨ë°”ì¼ ë°˜ì‘í˜• UI ê°œì„ 
- [ ] **v2.0**: AI ê¸°ë°˜ ë§¤ì¹­ ì‹œìŠ¤í…œ

## ğŸ¤ ê¸°ì—¬ ë°©ë²•

1. Fork í”„ë¡œì íŠ¸
2. Feature ë¸Œëœì¹˜ ìƒì„± (`git checkout -b feature/ìƒˆê¸°ëŠ¥`)
3. ë³€ê²½ì‚¬í•­ ì»¤ë°‹ (`git commit -m '[feat] ìƒˆê¸°ëŠ¥ ì¶”ê°€'`)
4. ë¸Œëœì¹˜ì— Push (`git push origin feature/ìƒˆê¸°ëŠ¥`)
5. Pull Request ìƒì„±

## ğŸ“ ì§€ì›

- **íŒ€ ì´ë©”ì¼**: lightcare-team@gmail.com
- **ì´ìŠˆ íŠ¸ë˜í‚¹**: [GitHub Issues](https://github.com/dooseob/lightcare/issues)
- **ìœ„í‚¤**: [í”„ë¡œì íŠ¸ ìœ„í‚¤](https://github.com/dooseob/lightcare/wiki)

## ğŸ“„ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„¼ìŠ¤ í•˜ì— ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

---

**LightCare íŒ€** - ìš”ì–‘ ì„œë¹„ìŠ¤ì˜ ë¯¸ë˜ë¥¼ ë°íˆëŠ” í”Œë«í¼ ğŸ’¡

### ğŸŸ¢ íŒ€ì› D (ë¦¬ë·°/ê²Œì‹œíŒ) - ì§„í–‰ë¥ : 100%

#### âœ… **ì™„ë£Œëœ ì‘ì—…**
**ë°±ì—”ë“œ ì™„ì „ êµ¬í˜„**:
- âœ… `ReviewService.java` (238ì¤„) - **ì™„ì „ êµ¬í˜„**
  - ë¦¬ë·° CRUD ë¡œì§
  - íŠ¸ëœì­ì…˜ ì²˜ë¦¬
  - ë¡œê¹… ì¶”ê°€
  - ìœ íš¨ì„± ê²€ì¦
  - í‰ì  ì‹œìŠ¤í…œ
  - ì¶”ì²œ/ë¹„ì¶”ì²œ ê¸°ëŠ¥

- âœ… `BoardService.java` (253ì¤„) - **ì™„ì „ êµ¬í˜„**
  - ê²Œì‹œê¸€ CRUD ë¡œì§
  - í˜ì´ì§• ì²˜ë¦¬
  - ê²€ìƒ‰ ë° ì¹´í…Œê³ ë¦¬ í•„í„°ë§
  - ì¸ê¸° ê²Œì‹œê¸€ ê¸°ëŠ¥
  - ì¡°íšŒìˆ˜ ì¦ê°€ ë¡œì§

- âœ… `ReviewMapper.java` & `reviewMapper.xml` - **ì™„ì „ êµ¬í˜„**
  - ëª¨ë“  í•„ìš” ë©”ì„œë“œ ì •ì˜
  - XML ì¿¼ë¦¬ ë§¤í•‘ ì™„ë£Œ

- âœ… `BoardMapper.java` & `boardMapper.xml` - **ì™„ì „ êµ¬í˜„**
  - ëª¨ë“  í•„ìš” ë©”ì„œë“œ ì •ì˜
  - XML ì¿¼ë¦¬ ë§¤í•‘ ì™„ë£Œ

**í”„ë¡ íŠ¸ì—”ë“œ ì™„ì„±**:
- âœ… `templates/review/list.html` (108ì¤„) - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/review/write.html` (122ì¤„) - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/list.html` - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/write.html` - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/detail.html` - **ì™„ì „ êµ¬í˜„**

#### ğŸ“Š **ì‹¤ì œ Story Point ë‹¬ì„±ë¥ **
- **ì™„ë£Œ**: LC-010 (ë¦¬ë·° ì‘ì„±) - 13/13 SP âœ…
- **ì™„ë£Œ**: LC-011 (ë¦¬ë·° ëª©ë¡ ê´€ë¦¬) - 13/13 SP âœ…
- **ì™„ë£Œ**: LC-012 (ì •ë³´ ê²Œì‹œíŒ) - 13/13 SP âœ…

**ì´ ë‹¬ì„±**: 39/39 SP (100%)

#### ğŸš€ **ë‹¤ìŒ ë‹¨ê³„**
1. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±**
   - ReviewService í…ŒìŠ¤íŠ¸
   - BoardService í…ŒìŠ¤íŠ¸
   - í†µí•© í…ŒìŠ¤íŠ¸

2. **ì„±ëŠ¥ ìµœì í™”**
   - ì¿¼ë¦¬ ìµœì í™”
   - ìºì‹± ì ìš©
   - N+1 ë¬¸ì œ í•´ê²°

3. **ì¶”ê°€ ê¸°ëŠ¥ ê°œë°œ**
   - ëŒ“ê¸€ ì‹œìŠ¤í…œ ê³ ë„í™”
   - íŒŒì¼ ì²¨ë¶€ ê¸°ëŠ¥
   - ì—ë””í„° ê¸°ëŠ¥ ê°•í™”
`````

## File: src/main/java/com/example/carelink/common/Constants.java
`````java
public class Constants {
`````

## File: src/main/java/com/example/carelink/config/KakaoApiConfig.java
`````java
public class KakaoApiConfig implements WebMvcConfigurer {
â‹®----
private String getKakaoAppKey() {
â‹®----
if (key == null || key.isEmpty()) {
key = System.getenv("KAKAO_APP_KEY");
System.out.println("í™˜ê²½ë³€ìˆ˜ì—ì„œ ì§ì ‘ ì½ì€ API í‚¤: " + (key != null ? "ì¡´ì¬í•¨" : "ì—†ìŒ"));
â‹®----
public void addInterceptors(InterceptorRegistry registry) {
registry.addInterceptor(new KakaoApiInterceptor());
â‹®----
public class KakaoApiInterceptor implements HandlerInterceptor {
â‹®----
public void postHandle(HttpServletRequest request, HttpServletResponse response,
â‹®----
if (modelAndView != null && !modelAndView.getViewName().startsWith("redirect:")) {
String apiKey = getKakaoAppKey();
System.out.println("ë·°ì— ì „ë‹¬í•  API í‚¤: " + (apiKey != null && !apiKey.isEmpty() ? "ì¡´ì¬í•¨" : "ì—†ìŒ"));
modelAndView.addObject("KAKAO_APP_KEY", apiKey);
`````

## File: src/main/java/com/example/carelink/controller/AdminController.java
`````java
public class AdminController {
â‹®----
private boolean isAdmin(HttpSession session) {
MemberDTO sessionMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
return sessionMember != null && "ADMIN".equals(sessionMember.getRole());
â‹®----
public String adminDashboard(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
if (!isAdmin(session)) {
redirectAttributes.addFlashAttribute("errorMessage", "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.");
â‹®----
int pendingFacilities = facilityService.countPendingFacilities();
int totalMembers = memberService.getTotalMemberCount();
int facilityMembers = memberService.getFacilityMemberCount();
â‹®----
model.addAttribute("pendingFacilities", pendingFacilities);
model.addAttribute("totalMembers", totalMembers);
model.addAttribute("facilityMembers", facilityMembers);
model.addAttribute("userMembers", userMembers);
log.info("ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ - ìŠ¹ì¸ëŒ€ê¸°: {}, ì „ì²´íšŒì›: {}", pendingFacilities, totalMembers);
â‹®----
log.error("ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
redirectAttributes.addFlashAttribute("errorMessage", "ëŒ€ì‹œë³´ë“œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String facilityManagement(@RequestParam(defaultValue = "PENDING") String status,
â‹®----
log.info("ì‹œì„¤ ìŠ¹ì¸ ê´€ë¦¬ í˜ì´ì§€ ì ‘ê·¼ ì‹œë„ - ìƒíƒœ: {}", status);
List<FacilityDTO> facilities = facilityService.getFacilitiesByApprovalStatus(status);
log.info("ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ìƒíƒœ: {}, ê°œìˆ˜: {}", status, facilities != null ? facilities.size() : "null");
â‹®----
log.warn("ì‹œì„¤ ëª©ë¡ì´ nullì´ì–´ì„œ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì´ˆê¸°í™”í–ˆìŠµë‹ˆë‹¤.");
â‹®----
model.addAttribute("facilities", facilities);
model.addAttribute("currentStatus", status);
â‹®----
log.error("ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - ìƒíƒœ: {}", status, e);
model.addAttribute("facilities", new ArrayList<>());
â‹®----
redirectAttributes.addFlashAttribute("errorMessage", "ì‹œì„¤ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public String approveFacility(@PathVariable Long facilityId,
â‹®----
if ("approve".equals(action)) {
â‹®----
facilityService.updateFacilityApprovalStatus(facilityId, newStatus, null);
log.info("ì‹œì„¤ ìŠ¹ì¸ ì™„ë£Œ - ID: {}", facilityId);
} else if ("reject".equals(action)) {
â‹®----
facilityService.updateFacilityApprovalStatus(facilityId, newStatus, reason);
log.info("ì‹œì„¤ ìŠ¹ì¸ ê±°ë¶€ - ID: {}, ì‚¬ìœ : {}", facilityId, reason);
â‹®----
log.error("ì‹œì„¤ ìŠ¹ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - ID: {}", facilityId, e);
â‹®----
public String memberManagement(@RequestParam(defaultValue = "ALL") String role,
â‹®----
List<MemberDTO> members = memberService.getMembersByRole(role, page, 20);
int totalCount = memberService.getMemberCountByRole(role);
int totalPages = (int) Math.ceil((double) totalCount / 20);
model.addAttribute("members", members);
model.addAttribute("currentRole", role);
model.addAttribute("currentPage", page);
model.addAttribute("totalPages", totalPages);
model.addAttribute("totalCount", totalCount);
log.info("íšŒì› ê´€ë¦¬ í˜ì´ì§€ ì ‘ê·¼ - ì—­í• : {}, í˜ì´ì§€: {}, ì´ ê°œìˆ˜: {}", role, page, totalCount);
â‹®----
log.error("íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
redirectAttributes.addFlashAttribute("errorMessage", "íšŒì› ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String toggleMemberActive(@PathVariable Long memberId, HttpSession session) {
â‹®----
boolean result = memberService.toggleMemberActive(memberId);
log.info("íšŒì› í™œì„±í™” ìƒíƒœ ë³€ê²½ - ID: {}, ê²°ê³¼: {}", memberId, result);
â‹®----
log.error("íšŒì› í™œì„±í™” ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - ID: {}", memberId, e);
â‹®----
public FacilityDTO getFacilityDetail(@PathVariable Long facilityId, HttpSession session) {
â‹®----
return facilityService.getFacilityById(facilityId);
â‹®----
log.error("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - ID: {}", facilityId, e);
â‹®----
public String statistics(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
â‹®----
model.addAttribute("totalMembers", memberService.getTotalMemberCount());
model.addAttribute("facilityMembers", memberService.getFacilityMemberCount());
model.addAttribute("approvedFacilities", facilityService.countApprovedFacilities());
model.addAttribute("pendingFacilities", facilityService.countPendingFacilities());
model.addAttribute("rejectedFacilities", facilityService.countRejectedFacilities());
log.info("ê´€ë¦¬ì í†µê³„ í˜ì´ì§€ ì ‘ê·¼");
â‹®----
log.error("í†µê³„ ë°ì´í„° ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
redirectAttributes.addFlashAttribute("errorMessage", "í†µê³„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
`````

## File: src/main/java/com/example/carelink/dto/JobDTO.java
`````java
public class JobDTO extends BaseDTO {
`````

## File: src/main/java/com/example/carelink/dto/ReviewDTO.java
`````java
public class ReviewDTO extends BaseDTO {
`````

## File: src/main/java/com/example/carelink/CarelinkApplication.java
`````java
public class CarelinkApplication {
public static void main(String[] args) {
SpringApplication.run(CarelinkApplication.class, args);
System.out.println("========================================");
System.out.println("    ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ ì‚¬ì´íŠ¸ ì‹œì‘ë¨!        ");
System.out.println("    í¬íŠ¸: http://localhost:8080         ");
`````

## File: src/main/resources/mapper/jobMapper.xml
`````xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.JobMapper">
    <resultMap id="jobResultMap" type="com.example.carelink.dto.JobDTO">
        <id property="jobId" column="job_id"/>
        <result property="title" column="title"/>
        <result property="content" column="content"/>
        <result property="jobType" column="job_type"/>
        <result property="workType" column="work_type"/>
        <result property="position" column="position"/>
        <result property="recruitCount" column="recruit_count"/>
        <result property="salaryType" column="salary_type"/>
        <result property="salaryMin" column="salary_min"/>
        <result property="salaryMax" column="salary_max"/>
        <result property="salaryDescription" column="salary_description"/>
        <result property="workLocation" column="work_location"/>
        <result property="workHours" column="work_hours"/>
        <result property="experience" column="experience"/>
        <result property="education" column="education"/>
        <result property="qualifications" column="qualifications"/>
        <result property="benefits" column="benefits"/>
        <result property="startDate" column="start_date"/>
        <result property="endDate" column="end_date"/>
        <result property="contactName" column="contact_name"/>
        <result property="contactPhone" column="contact_phone"/>
        <result property="contactEmail" column="contact_email"/>
        <result property="status" column="status"/>
        <result property="viewCount" column="view_count"/>
        <result property="applyCount" column="apply_count"/>
        <result property="memberId" column="member_id"/>
        <result property="memberName" column="member_name"/>
        <result property="facilityId" column="facility_id"/>
        <result property="facilityName" column="facility_name"/>
        <result property="attachmentPath" column="attachment_path"/>
        <result property="attachmentName" column="attachment_name"/>
        <result property="priority" column="priority"/>
        <result property="isHighlight" column="is_highlight"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
        <result property="isDeleted" column="is_deleted"/>
    </resultMap>
    <select id="findJobsWithSearch" parameterType="com.example.carelink.dto.JobDTO" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.is_deleted = false
        <if test="searchKeyword != null and searchKeyword != ''">
            AND (j.title LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR j.content LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR j.position LIKE CONCAT('%', #{searchKeyword}, '%'))
        </if>
        <if test="searchJobType != null and searchJobType != ''">
            AND j.job_type = #{searchJobType}
        </if>
        <if test="searchWorkType != null and searchWorkType != ''">
            AND j.work_type = #{searchWorkType}
        </if>
        <if test="searchLocation != null and searchLocation != ''">
            AND j.work_location LIKE CONCAT('%', #{searchLocation}, '%')
        </if>
        <if test="searchPosition != null and searchPosition != ''">
            AND j.position LIKE CONCAT('%', #{searchPosition}, '%')
        </if>
        ORDER BY j.priority DESC, j.created_at DESC
        <if test="size != null and size > 0">
            LIMIT #{size}
        </if>
        <if test="offset != null and offset >= 0">
            OFFSET #{offset}
        </if>
    </select>
    <select id="countJobsWithSearch" parameterType="com.example.carelink.dto.JobDTO" resultType="int">
        SELECT COUNT(*)
        FROM job_posting j
        WHERE j.is_deleted = false
        <if test="searchKeyword != null and searchKeyword != ''">
            AND (j.title LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR j.content LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR j.position LIKE CONCAT('%', #{searchKeyword}, '%'))
        </if>
        <if test="searchJobType != null and searchJobType != ''">
            AND j.job_type = #{searchJobType}
        </if>
        <if test="searchWorkType != null and searchWorkType != ''">
            AND j.work_type = #{searchWorkType}
        </if>
        <if test="searchLocation != null and searchLocation != ''">
            AND j.work_location LIKE CONCAT('%', #{searchLocation}, '%')
        </if>
        <if test="searchPosition != null and searchPosition != ''">
            AND j.position LIKE CONCAT('%', #{searchPosition}, '%')
        </if>
    </select>
    <select id="findJobById" parameterType="long" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.job_id = #{jobId} AND j.is_deleted = false
    </select>
    <insert id="insertJob" parameterType="com.example.carelink.dto.JobDTO" useGeneratedKeys="true" keyProperty="jobId">
        INSERT INTO job_posting (
            title, content, job_type, work_type, position, recruit_count,
            salary_type, salary_min, salary_max, salary_description,
            work_location, work_hours, experience, education, qualifications, benefits,
            start_date, end_date, contact_name, contact_phone, contact_email,
            status, member_id, facility_id, attachment_path, attachment_name,
            priority, is_highlight, created_at
        ) VALUES (
            #{title}, #{content}, #{jobType}, #{workType}, #{position}, #{recruitCount},
            #{salaryType}, #{salaryMin}, #{salaryMax}, #{salaryDescription},
            #{workLocation}, #{workHours}, #{experience}, #{education}, #{qualifications}, #{benefits},
            #{startDate}, #{endDate}, #{contactName}, #{contactPhone}, #{contactEmail},
            #{status}, #{memberId}, #{facilityId}, #{attachmentPath}, #{attachmentName},
            #{priority}, #{isHighlight}, NOW()
        )
    </insert>
    <update id="updateJob" parameterType="com.example.carelink.dto.JobDTO">
        UPDATE job_posting SET
            title = #{title},
            content = #{content},
            job_type = #{jobType},
            work_type = #{workType},
            position = #{position},
            recruit_count = #{recruitCount},
            salary_type = #{salaryType},
            salary_min = #{salaryMin},
            salary_max = #{salaryMax},
            salary_description = #{salaryDescription},
            work_location = #{workLocation},
            work_hours = #{workHours},
            experience = #{experience},
            education = #{education},
            qualifications = #{qualifications},
            benefits = #{benefits},
            start_date = #{startDate},
            end_date = #{endDate},
            contact_name = #{contactName},
            contact_phone = #{contactPhone},
            contact_email = #{contactEmail},
            status = #{status},
            facility_id = #{facilityId},
            attachment_path = #{attachmentPath},
            attachment_name = #{attachmentName},
            priority = #{priority},
            is_highlight = #{isHighlight},
            updated_at = NOW()
        WHERE job_id = #{jobId}
    </update>
    <update id="deleteJob" parameterType="long">
        UPDATE job_posting SET
            is_deleted = true,
            updated_at = NOW()
        WHERE job_id = #{jobId}
    </update>
    <update id="incrementViewCount" parameterType="long">
        UPDATE job_posting SET
            view_count = view_count + 1,
            updated_at = NOW()
        WHERE job_id = #{jobId}
    </update>
    <update id="incrementApplyCount" parameterType="long">
        UPDATE job_posting SET
            apply_count = apply_count + 1,
            updated_at = NOW()
        WHERE job_id = #{jobId}
    </update>
    <select id="findJobsByMemberId" parameterType="long" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.member_id = #{memberId} AND j.is_deleted = false
        ORDER BY j.created_at DESC
    </select>
    <select id="findJobsByFacilityId" parameterType="long" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.facility_id = #{facilityId} AND j.is_deleted = false
        ORDER BY j.created_at DESC
    </select>
    <select id="getJobList" parameterType="com.example.carelink.dto.JobDTO" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.is_deleted = false
        ORDER BY j.priority DESC, j.created_at DESC
        <if test="size != null and size > 0">
            LIMIT #{size}
        </if>
        <if test="page != null and page >= 0">
            OFFSET #{page}
        </if>
    </select>
    <select id="getJobById" parameterType="long" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.job_id = #{jobId} AND j.is_deleted = false
    </select>
    <select id="getPopularJobs" resultMap="jobResultMap">
        SELECT
            j.*,
            m.name as member_name,
            f.facility_name
        FROM job_posting j
        LEFT JOIN member m ON j.member_id = m.member_id
        LEFT JOIN facility f ON j.facility_id = f.facility_id
        WHERE j.is_deleted = false AND j.status = 'ACTIVE'
        ORDER BY j.view_count DESC, j.apply_count DESC
        LIMIT 10
    </select>
    <select id="getJobCount" resultType="int">
        SELECT COUNT(*)
        FROM job_posting
        WHERE is_deleted = false AND status = 'ACTIVE'
    </select>
    <delete id="deleteByMemberId" parameterType="long">
        DELETE FROM job_posting WHERE member_id = #{memberId}
    </delete>
    <delete id="deleteByFacilityMemberId" parameterType="long">
        DELETE FROM job_posting
        WHERE facility_id IN (
            SELECT facility_id FROM facility WHERE registered_member_id = #{memberId}
        )
    </delete>
</mapper>
`````

## File: src/main/resources/static/css/advanced-image-cropper.css
`````css
.advanced-image-cropper {
.steps-indicator {
.step-item {
.step-circle {
.step-item.active .step-circle {
.step-item.completed .step-circle {
.step-label {
.step-item.active .step-label {
.step-item.completed .step-label {
.step-connector {
.step-item.completed + .step-connector {
.cropper-center {
.cropper-center:before,
.cropper-line {
.cropper-dashed {
.cropper-point {
.cropper-point.point-se {
.upload-area {
.upload-area::before {
.upload-area:hover {
.upload-area:hover::before {
.upload-area.drag-over {
.upload-content {
.upload-icon {
.upload-icon i {
â‹®----
.upload-title {
.upload-description {
.upload-format-info {
/* í¬ë¡­ ì˜ì—­ */
.crop-container {
.crop-image-container {
.crop-controls {
.crop-preview-panel {
/* í”„ë¡œí•„ ë¯¸ë¦¬ë³´ê¸° */
.profile-preview {
.profile-card {
.profile-card:hover {
/* ì‹œì„¤ ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸° */
.facility-card-preview .card {
.facility-card-preview .card:hover {
.card-img-container {
/* ì¤Œ í‘œì‹œê¸° */
.zoom-indicator {
â‹®----
/* ì´ë¯¸ì§€ ì •ë³´ íŒ¨ë„ */
.image-info-panel {
/* ìµœì¢… ë¯¸ë¦¬ë³´ê¸° */
.final-preview {
.final-image-container {
.final-image {
/* ì••ì¶• ì„¤ì • */
.compression-settings {
.compression-info {
.compression-savings {
â‹®----
/* Alt í…ìŠ¤íŠ¸ ì„¹ì…˜ */
.alt-text-section {
.alt-text-section .form-label {
/* ìŠ¬ë¼ì´ë” ìŠ¤íƒ€ì¼ */
.form-range {
.form-range::-webkit-slider-track {
.form-range::-webkit-slider-thumb {
.form-range::-webkit-slider-thumb:hover {
.form-range::-moz-range-track {
.form-range::-moz-range-thumb {
/* ì§„í–‰ë¥  ì˜ì—­ */
.progress-area {
.progress {
.progress-bar {
.progress-text {
/* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.btn {
.btn::before {
.btn:hover::before {
.btn-lg {
.btn-primary {
.btn-primary:hover {
.btn-success {
.btn-success:hover {
.btn-outline-secondary:hover {
.btn-outline-danger:hover {
/* ì•¡ì…˜ ë²„íŠ¼ ê·¸ë£¹ */
.crop-actions, .final-actions {
/* ì—ëŸ¬ ë©”ì‹œì§€ */
.error-message {
â‹®----
/* ë°˜ì‘í˜• ë””ìì¸ */
â‹®----
.crop-container, .crop-preview-panel, .compression-settings {
.crop-actions .d-flex, .final-actions .d-flex {
â‹®----
.crop-controls .btn-group {
.crop-controls .btn {
â‹®----
/* ë‹¤í¬ ëª¨ë“œ ì§€ì› */
â‹®----
.crop-container, .crop-preview-panel, .compression-settings, .final-preview {
.image-info-panel, .compression-info {
â‹®----
/* í¬ì»¤ìŠ¤ ìƒíƒœ */
.btn:focus,
/* ë¡œë”© ìƒíƒœ */
.loading {
.loading::after {
â‹®----
.cropper-container {
.cropper-container img {
.cropper-wrap-box,
.cropper-view-box {
`````

## File: src/main/resources/static/js/common.js
`````javascript
$(document).ready(function() {
initCommonFeatures();
autoHideAlerts();
initFormValidation();
initFileUpload();
initLoadingState();
refreshBoardList();
â‹®----
function initCommonFeatures() {
var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
return new bootstrap.Tooltip(tooltipTriggerEl);
â‹®----
var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));
var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
return new bootstrap.Popover(popoverTriggerEl);
â‹®----
function autoHideAlerts() {
$('.alert').each(function() {
var alert = $(this);
if (!alert.hasClass('alert-permanent')) {
setTimeout(function() {
alert.fadeOut('slow');
â‹®----
function initFormValidation() {
$('form').each(function() {
$(this).addClass('needs-validation');
â‹®----
$('.form-control').on('blur', function() {
validateField($(this));
â‹®----
$('form').on('submit', function(e) {
var form = $(this);
â‹®----
form.find('.form-control[required]').each(function() {
if (!validateField($(this))) {
â‹®----
e.preventDefault();
e.stopPropagation();
â‹®----
form.addClass('was-validated');
â‹®----
function validateField(field) {
var value = field.val().trim();
â‹®----
// í•„ìˆ˜ ì…ë ¥ ê²€ì‚¬
if (field.prop('required') && value === '') {
â‹®----
// ì´ë©”ì¼ í˜•ì‹ ê²€ì‚¬
if (field.attr('type') === 'email' && value !== '') {
â‹®----
if (!emailRegex.test(value)) {
â‹®----
// ì „í™”ë²ˆí˜¸ í˜•ì‹ ê²€ì‚¬
if (field.hasClass('phone-field') && value !== '') {
â‹®----
if (!phoneRegex.test(value)) {
â‹®----
// ê²°ê³¼ í‘œì‹œ
â‹®----
field.removeClass('is-invalid').addClass('is-valid');
field.siblings('.invalid-feedback').hide();
â‹®----
field.removeClass('is-valid').addClass('is-invalid');
field.siblings('.invalid-feedback').text(errorMessage).show();
â‹®----
function initFileUpload() {
$('.file-upload-area').on('dragover', function(e) {
â‹®----
$(this).addClass('dragover');
â‹®----
$('.file-upload-area').on('dragleave', function(e) {
â‹®----
$(this).removeClass('dragover');
â‹®----
$('.file-upload-area').on('drop', function(e) {
â‹®----
handleFileSelect(files, $(this));
â‹®----
$('.file-upload-area input[type="file"]').on('change', function() {
â‹®----
handleFileSelect(files, $(this).closest('.file-upload-area'));
â‹®----
function handleFileSelect(files, uploadArea) {
â‹®----
showAlert('íŒŒì¼ í¬ê¸°ëŠ” 10MBë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'warning');
â‹®----
if (file.type.startsWith('image/')) {
var reader = new FileReader();
â‹®----
var preview = $('<img>').attr('src', e.target.result)
.css({'max-width': '200px', 'max-height': '200px', 'margin': '10px'});
uploadArea.find('.file-preview').html(preview);
â‹®----
reader.readAsDataURL(file);
â‹®----
var fileInfo = $('<div class="file-info mt-2"></div>')
.html('<i class="fas fa-file me-2"></i>' + file.name + ' (' + formatFileSize(file.size) + ')');
uploadArea.find('.file-list').append(fileInfo);
â‹®----
function initLoadingState() {
$('form').on('submit', function() {
var submitBtn = $(this).find('button[type="submit"]');
var originalText = submitBtn.html();
submitBtn.prop('disabled', true)
.html('<span class="loading-spinner me-2"></span>ì²˜ë¦¬ì¤‘...');
â‹®----
submitBtn.prop('disabled', false).html(originalText);
â‹®----
$(document).ajaxStart(function() {
showLoading();
}).ajaxStop(function() {
hideLoading();
â‹®----
function showLoading() {
if ($('#loadingOverlay').length === 0) {
var overlay = $('<div id="loadingOverlay" class="position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center" style="background-color: rgba(0,0,0,0.5); z-index: 9999;"></div>');
var spinner = $('<div class="text-center text-white"></div>')
.html('<div class="spinner-border mb-3" role="status"></div><br>ë¡œë”©ì¤‘...');
overlay.append(spinner);
$('body').append(overlay);
â‹®----
function hideLoading() {
$('#loadingOverlay').remove();
â‹®----
function showAlert(message, type = 'info', autoHide = true) {
â‹®----
var alert = $('<div class="alert alert-dismissible fade show" role="alert"></div>')
.addClass(alertClass)
.html('<i class="fas ' + iconClass + ' me-2"></i>' + message +
â‹®----
$('.container').first().prepend(alert);
â‹®----
alert.fadeOut('slow', function() {
$(this).remove();
â‹®----
function showConfirm(message, callback) {
if (confirm(message)) {
â‹®----
callback();
â‹®----
function ajaxRequest(url, method, data, successCallback, errorCallback) {
$.ajax({
â‹®----
successCallback(response);
â‹®----
console.error('AJAX ìš”ì²­ ì‹¤íŒ¨:', error);
showAlert('ìš”ì²­ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'danger');
â‹®----
errorCallback(xhr, status, error);
â‹®----
function handlePagination(currentPage, totalPages, baseUrl) {
var pagination = $('.pagination');
pagination.empty();
â‹®----
pagination.append('<li class="page-item"><a class="page-link" href="' + baseUrl + '?page=' + (currentPage - 1) + '">&laquo;</a></li>');
â‹®----
var startPage = Math.max(1, currentPage - 2);
var endPage = Math.min(totalPages, currentPage + 2);
â‹®----
pagination.append('<li class="page-item' + activeClass + '"><a class="page-link" href="' + baseUrl + '?page=' + i + '">' + i + '</a></li>');
â‹®----
// ë‹¤ìŒ ë²„íŠ¼
â‹®----
pagination.append('<li class="page-item"><a class="page-link" href="' + baseUrl + '?page=' + (currentPage + 1) + '">&raquo;</a></li>');
â‹®----
/**
 * íŒŒì¼ í¬ê¸° í¬ë§·íŒ…
 */
function formatFileSize(bytes) {
â‹®----
var i = Math.floor(Math.log(bytes) / Math.log(k));
return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
â‹®----
function formatDate(date, format = 'YYYY-MM-DD') {
â‹®----
var d = new Date(date);
var year = d.getFullYear();
var month = String(d.getMonth() + 1).padStart(2, '0');
var day = String(d.getDate()).padStart(2, '0');
var hour = String(d.getHours()).padStart(2, '0');
var minute = String(d.getMinutes()).padStart(2, '0');
â‹®----
.replace('YYYY', year)
.replace('MM', month)
.replace('DD', day)
.replace('HH', hour)
.replace('mm', minute);
â‹®----
function truncateString(str, length) {
â‹®----
return str.length > length ? str.substring(0, length) + '...' : str;
â‹®----
/**
 * ìˆ«ì í¬ë§·íŒ… (ì½¤ë§ˆ ì¶”ê°€)
 */
function formatNumber(num) {
return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
â‹®----
/**
 * URL íŒŒë¼ë¯¸í„° ê°€ì ¸ì˜¤ê¸°
 */
function getUrlParameter(name) {
var url = new URL(window.location.href);
return url.searchParams.get(name);
â‹®----
/**
 * í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ê°•ì œ (ìºì‹œ ë¬´íš¨í™”)
 */
function forceRefresh() {
// ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ë¬´ì‹œí•˜ê³  ê°•ì œ ìƒˆë¡œê³ ì¹¨
window.location.reload(true);
â‹®----
/**
 * ê²Œì‹œê¸€ ì‚­ì œ í›„ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
 */
function refreshBoardList() {
// refresh íŒŒë¼ë¯¸í„°ê°€ ìˆìœ¼ë©´ ìºì‹œ ë¬´íš¨í™” í›„ URLì—ì„œ ì œê±°
var refreshParam = getUrlParameter('refresh');
â‹®----
url.searchParams.delete('refresh');
window.history.replaceState({}, document.title, url.pathname + url.search);
â‹®----
forceRefresh();
â‹®----
localStorage.setItem(key, JSON.stringify(value));
â‹®----
var item = localStorage.getItem(key);
return item ? JSON.parse(item) : null;
â‹®----
localStorage.removeItem(key);
â‹®----
localStorage.clear();
`````

## File: src/main/resources/static/js/facility-manage.js
`````javascript
function deleteFacility() {
â‹®----
alert('ì‹œì„¤ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
â‹®----
if (confirm('ì •ë§ë¡œ ì‹œì„¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ì‹œì„¤ ì •ë³´ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
const form = document.createElement('form');
â‹®----
const csrfToken = document.querySelector('meta[name="_csrf"]');
const csrfHeader = document.querySelector('meta[name="_csrf_header"]');
â‹®----
const hiddenField = document.createElement('input');
â‹®----
hiddenField.name = csrfToken.getAttribute('content');
hiddenField.value = csrfHeader.getAttribute('content');
form.appendChild(hiddenField);
â‹®----
document.body.appendChild(form);
form.submit();
â‹®----
document.addEventListener('DOMContentLoaded', function() {
const facilityImages = document.querySelectorAll('img[alt="ì‹œì„¤ ì‚¬ì§„"], .facility-detail-image');
facilityImages.forEach(function(facilityImage) {
if (facilityImage && !facilityImage.classList.contains('error-handler-attached')) {
facilityImage.classList.add('error-handler-attached');
â‹®----
if (this.classList.contains('error-handled')) {
â‹®----
this.classList.add('error-handled');
â‹®----
const placeholder = document.createElement('div');
â‹®----
this.parentNode.replaceChild(placeholder, this);
console.log('âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì—ëŸ¬ ì²˜ë¦¬ ì™„ë£Œ (ë¬´í•œ ìš”ì²­ ë°©ì§€)');
â‹®----
const externalLinks = document.querySelectorAll('a[target="_blank"]');
externalLinks.forEach(link => {
`````

## File: src/main/resources/static/js/job-edit.js
`````javascript
document.addEventListener('DOMContentLoaded', function() {
console.log('êµ¬ì¸êµ¬ì§ ìˆ˜ì • í˜ì´ì§€ JavaScript ë¡œë“œë¨');
â‹®----
console.log('ì´ë¯¸ ì´ˆê¸°í™”ë¨ - ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€');
â‹®----
initFormValidation();
initCancelButton();
initInputFieldHandlers();
initSafeRichTextEditor();
â‹®----
console.log('í¼ ì´ˆê¸°í™” ì™„ë£Œ');
â‹®----
function initFormValidation() {
const form = document.querySelector('form');
â‹®----
const newForm = form.cloneNode(true);
form.parentNode.replaceChild(newForm, form);
newForm.addEventListener('submit', function(e) {
console.log('í¼ ì œì¶œ ì‹œì‘ - ê²€ì¦ ì¤‘...');
â‹®----
console.log('ì´ë¯¸ ì œì¶œ ì¤‘ - ì¤‘ë³µ ì œì¶œ ë°©ì§€');
e.preventDefault();
â‹®----
cleanFormValues();
if (!validateForm()) {
console.log('í¼ ê²€ì¦ ì‹¤íŒ¨ - ì œì¶œ ì¤‘ë‹¨');
â‹®----
const submitBtn = newForm.querySelector('button[type="submit"]');
â‹®----
console.log('í¼ ê²€ì¦ ì„±ê³µ - ì œì¶œ ê³„ì†');
â‹®----
function cleanFormValues() {
console.log('í¼ ê°’ ì •ë¦¬ ì‹œì‘');
const salaryDescription = document.querySelector('[name="salaryDescription"]');
â‹®----
const cleanValue = salaryDescription.value.trim();
const uniqueValues = [...new Set(cleanValue.split(',').map(v => v.trim()).filter(v => v))];
salaryDescription.value = uniqueValues.join(', ');
console.log('ê¸‰ì—¬ ì„¤ëª… ì •ë¦¬ë¨:', salaryDescription.value);
â‹®----
const workHours = document.querySelector('[name="workHours"]');
â‹®----
const cleanValue = workHours.value.trim();
â‹®----
workHours.value = uniqueValues.join(', ');
console.log('ê·¼ë¬´ì‹œê°„ ì •ë¦¬ë¨:', workHours.value);
â‹®----
textFields.forEach(fieldName => {
const field = document.querySelector(`[name="${fieldName}"]`);
â‹®----
field.value = field.value.trim();
â‹®----
console.log('í¼ ê°’ ì •ë¦¬ ì™„ë£Œ');
â‹®----
function validateForm() {
const jobTypeInput = document.querySelector('[name="jobType"]');
â‹®----
console.log('ê²€ì¦ ì‹œì‘ - jobType:', jobType);
// ê³µí†µ í•„ìˆ˜ í•„ë“œ ê²€ì‚¬
const title = document.querySelector('[name="title"]')?.value?.trim() || '';
const content = document.querySelector('[name="content"]')?.value?.trim() || '';
const workType = document.querySelector('[name="workType"]')?.value || '';
const status = document.querySelector('[name="status"]')?.value || '';
â‹®----
alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
document.querySelector('[name="title"]')?.focus();
â‹®----
alert('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
document.querySelector('[name="content"]')?.focus();
â‹®----
alert('ê³ ìš©í˜•íƒœë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
document.querySelector('[name="workType"]')?.focus();
â‹®----
alert('ê²Œì‹œê¸€ ìƒíƒœë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
document.querySelector('[name="status"]')?.focus();
â‹®----
// êµ¬ì¸ê¸€ ì „ìš© í•„ìˆ˜ í•„ë“œ ê²€ì‚¬
â‹®----
console.log('êµ¬ì¸ê¸€ ê²€ì¦ ì¤‘...');
const facilityName = document.querySelector('[name="facilityName"]')?.value?.trim() || '';
const position = document.querySelector('[name="position"]')?.value || '';
â‹®----
alert('íšŒì‚¬ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
document.querySelector('[name="facilityName"]')?.focus();
â‹®----
alert('ì§ì¢…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
document.querySelector('[name="position"]')?.focus();
â‹®----
// êµ¬ì§ê¸€ ì „ìš© í•„ìˆ˜ í•„ë“œ ê²€ì‚¬
â‹®----
console.log('êµ¬ì§ê¸€ ê²€ì¦ ì¤‘...');
const workLocation = document.querySelector('[name="workLocation"]')?.value?.trim() || '';
const contactPhone = document.querySelector('[name="contactPhone"]')?.value?.trim() || '';
â‹®----
alert('í¬ë§ ê·¼ë¬´ì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
document.querySelector('[name="workLocation"]')?.focus();
â‹®----
alert('ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
document.querySelector('[name="contactPhone"]')?.focus();
â‹®----
// ì œëª© ê¸¸ì´ ê²€ì‚¬
â‹®----
alert('ì œëª©ì€ 100ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
â‹®----
// ë‚´ìš© ê¸¸ì´ ê²€ì‚¬
â‹®----
alert('ë‚´ìš©ì€ 2000ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
â‹®----
console.log('ëª¨ë“  ê²€ì¦ í†µê³¼');
â‹®----
/**
 * ì…ë ¥ í•„ë“œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì´ˆê¸°í™”
 */
function initInputFieldHandlers() {
// ê¸‰ì—¬ ì…ë ¥ í•„ë“œ í•¸ë“¤ëŸ¬
const salaryInputs = document.querySelectorAll('[name="salaryMin"], [name="salaryMax"]');
salaryInputs.forEach(input => {
â‹®----
input.removeEventListener('blur', handleSalaryFormat);
input.addEventListener('blur', handleSalaryFormat);
â‹®----
const textInputs = document.querySelectorAll('[name="salaryDescription"], [name="workHours"]');
textInputs.forEach(input => {
â‹®----
input.removeEventListener('blur', handleTextFieldClean);
input.addEventListener('blur', handleTextFieldClean);
â‹®----
function handleSalaryFormat(event) {
â‹®----
let value = input.value.replace(/,/g, '');
if (value && !isNaN(value)) {
input.value = Number(value).toLocaleString();
â‹®----
/**
 * í…ìŠ¤íŠ¸ í•„ë“œ ì •ë¦¬ í•¸ë“¤ëŸ¬ (ì¤‘ë³µ ì œê±°)
 */
function handleTextFieldClean(event) {
â‹®----
const cleanValue = input.value.trim();
// ì¤‘ë³µëœ ê°’ ì œê±° (ì½¤ë§ˆë¡œ ë¶„ë¦¬ëœ ê²½ìš°)
â‹®----
input.value = uniqueValues.join(', ');
â‹®----
/**
 * ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° ì•ˆì „ ì´ˆê¸°í™”
 */
function initSafeRichTextEditor() {
const contentTextarea = document.getElementById('contentTextarea');
if (contentTextarea && contentTextarea.hasAttribute('data-rich-editor')) {
â‹®----
window.richTextEditorInstance.destroy();
console.log('ê¸°ì¡´ ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° ì œê±°ë¨');
â‹®----
console.log('ì—ë””í„° ì œê±° ì¤‘ ì˜¤ë¥˜ (ë¬´ì‹œ):', e.message);
â‹®----
setTimeout(() => {
â‹®----
window.richTextEditorInstance = new window.RichTextEditorV2(contentTextarea);
console.log('ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° ì•ˆì „ ì´ˆê¸°í™” ì™„ë£Œ');
â‹®----
console.log('ì—ë””í„° ì´ˆê¸°í™” ì˜¤ë¥˜:', e.message);
â‹®----
function initCancelButton() {
const cancelBtn = document.querySelector('.btn-secondary');
â‹®----
cancelBtn.addEventListener('click', function(e) {
if (confirm('ìˆ˜ì •ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\në³€ê²½ì‚¬í•­ì´ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')) {
`````

## File: src/main/resources/static/js/myinfo.js
`````javascript
document.addEventListener('DOMContentLoaded', function() {
â‹®----
form: document.getElementById('mypageForm'),
phone: document.getElementById('phone'),
name: document.getElementById('name'),
email: document.getElementById('email')
â‹®----
setupPhoneFormatting();
setupFormValidation();
console.log('ë‚´ì •ë³´ìˆ˜ì • í˜ì´ì§€ JavaScript ì´ˆê¸°í™” ì™„ë£Œ (ë‹¨ìˆœí™”)');
function setupPhoneFormatting() {
â‹®----
elements.phone.addEventListener('input', function(event) {
autoFormatPhone(event.target);
â‹®----
elements.phone.addEventListener('paste', function(event) {
setTimeout(() => autoFormatPhone(event.target), 10);
â‹®----
function autoFormatPhone(input) {
â‹®----
const numbersBeforeCursor = oldValue.substring(0, cursorPos).replace(/[^\d]/g, '').length;
// ìˆ«ìë§Œ ì¶”ì¶œ
const numbers = input.value.replace(/[^\d]/g, '');
// ìµœëŒ€ 11ìë¦¬ ì œí•œ
const limitedNumbers = numbers.substring(0, 11);
// í¬ë§·íŒ… ì ìš©
let formatted = formatPhoneNumber(limitedNumbers);
// ê°’ ì—…ë°ì´íŠ¸
â‹®----
// ìƒˆë¡œìš´ ì»¤ì„œ ìœ„ì¹˜ ê³„ì‚°
â‹®----
if (/\d/.test(formatted[i])) {
â‹®----
// ìˆ«ìê°€ ì¶”ê°€ëœ ê²½ìš° ë§ˆì§€ë§‰ ìˆ«ì ë’¤ë¡œ ì»¤ì„œ ì´ë™
â‹®----
// ì»¤ì„œê°€ í•˜ì´í”ˆ ìœ„ì— ìˆìœ¼ë©´ ë‹¤ìŒ ìœ„ì¹˜ë¡œ ì´ë™
â‹®----
// ì»¤ì„œ ìœ„ì¹˜ ì„¤ì • (ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬)
setTimeout(() => {
input.setSelectionRange(newCursorPos, newCursorPos);
â‹®----
// íœ´ëŒ€í° ë²ˆí˜¸ í¬ë§·íŒ… (010ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ë²ˆí˜¸ë§Œ)
function formatPhoneNumber(numbers) {
â‹®----
// íœ´ëŒ€í° ë²ˆí˜¸ë§Œ í—ˆìš© (010, 011, 016, 017, 018, 019)
if (numbers.startsWith('01')) {
â‹®----
return numbers.substring(0, 3) + '-' + numbers.substring(3);
â‹®----
return numbers.substring(0, 3) + '-' + numbers.substring(3, 7) + '-' + numbers.substring(7);
â‹®----
return numbers.startsWith('0') ? numbers.substring(0, 1) : numbers;
â‹®----
function setupFormValidation() {
â‹®----
elements.form.addEventListener('submit', function(event) {
â‹®----
if (elements.name && elements.name.value.trim().length < 2) {
â‹®----
errors.push('ì´ë¦„ì€ 2ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.');
elements.name.classList.add('is-invalid');
â‹®----
if (elements.email && elements.email.value.trim()) {
â‹®----
if (!emailPattern.test(elements.email.value.trim())) {
â‹®----
errors.push('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.');
elements.email.classList.add('is-invalid');
â‹®----
if (elements.phone && elements.phone.value.trim()) {
â‹®----
if (!phonePattern.test(elements.phone.value.trim())) {
â‹®----
errors.push('ì˜¬ë°”ë¥¸ íœ´ëŒ€í° ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.');
elements.phone.classList.add('is-invalid');
â‹®----
event.preventDefault();
alert('ì…ë ¥ ì˜¤ë¥˜:\n' + errors.join('\n'));
â‹®----
const submitButton = elements.form.querySelector('button[type="submit"]');
â‹®----
[elements.name, elements.email, elements.phone].forEach(field => {
â‹®----
field.addEventListener('focus', function() {
this.classList.remove('is-invalid');
`````

## File: src/main/resources/static/js/review-detail.js
`````javascript
document.addEventListener('DOMContentLoaded', function() {
console.log('ë¦¬ë·° ìƒì„¸ë³´ê¸° í˜ì´ì§€ JavaScript ë¡œë“œë¨');
currentReviewId = extractReviewIdFromUrl();
console.log('í˜„ì¬ ë¦¬ë·° ID:', currentReviewId);
initializeEventListeners();
initializeImageModal();
â‹®----
function extractReviewIdFromUrl() {
â‹®----
const segments = path.split('/');
const detailIndex = segments.findIndex(segment => segment === 'detail');
â‹®----
console.warn('URLì—ì„œ ë¦¬ë·° IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', path);
â‹®----
function initializeEventListeners() {
const actionButtons = document.querySelectorAll('[data-action]');
actionButtons.forEach(button => {
const action = button.getAttribute('data-action');
console.log('ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡:', action);
â‹®----
button.addEventListener('click', handleLikeReview);
â‹®----
button.addEventListener('click', handleDeleteReview);
â‹®----
button.addEventListener('click', handleShareReview);
â‹®----
button.addEventListener('click', handleReportReview);
â‹®----
console.warn('ì•Œ ìˆ˜ ì—†ëŠ” ì•¡ì…˜:', action);
â‹®----
console.log('ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™” ì™„ë£Œ, ë“±ë¡ëœ ë²„íŠ¼ ìˆ˜:', actionButtons.length);
â‹®----
function initializeImageModal() {
const modal = document.getElementById('imageModal');
const modalImage = document.getElementById('modalImage');
const reviewImages = document.querySelectorAll('.review-image');
const closeBtn = document.querySelector('.close-modal');
â‹®----
console.log('ì´ë¯¸ì§€ ëª¨ë‹¬ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
â‹®----
reviewImages.forEach(img => {
â‹®----
img.addEventListener('click', function() {
â‹®----
closeBtn.addEventListener('click', function() {
â‹®----
modal.addEventListener('click', function(e) {
â‹®----
document.addEventListener('keydown', function(e) {
â‹®----
console.log('ì´ë¯¸ì§€ ëª¨ë‹¬ ì´ˆê¸°í™” ì™„ë£Œ, ì´ë¯¸ì§€ ìˆ˜:', reviewImages.length);
â‹®----
function handleLikeReview(event) {
event.preventDefault();
event.stopPropagation();
â‹®----
showAlert('error', 'ë¦¬ë·° ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
â‹®----
console.log('ì¶”ì²œ ìš”ì²­ ì‹œì‘:', currentReviewId);
const button = event.target.closest('button');
â‹®----
fetch(`/review/like/${currentReviewId}`, {
â‹®----
.then(response => {
console.log('ì¶”ì²œ ì‘ë‹µ:', response.status);
return response.json();
â‹®----
.then(data => {
console.log('ì¶”ì²œ ì‘ë‹µ ë°ì´í„°:', data);
â‹®----
const likeCountElement = document.getElementById('likeCount');
â‹®----
showAlert('success', data.message || 'ì¶”ì²œí•˜ì˜€ìŠµë‹ˆë‹¤.');
â‹®----
showAlert('error', data.message || 'ì¶”ì²œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
â‹®----
.catch(error => {
console.error('ì¶”ì²œ ì²˜ë¦¬ ì˜¤ë¥˜:', error);
showAlert('error', 'ì¶”ì²œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
â‹®----
.finally(() => {
â‹®----
function handleDeleteReview(event) {
â‹®----
if (!confirm('ì •ë§ ì´ ë¦¬ë·°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ë¦¬ë·°ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
â‹®----
console.log('ì‚­ì œ ìš”ì²­ ì‹œì‘:', currentReviewId);
â‹®----
fetch(`/review/delete/${currentReviewId}`, {
â‹®----
console.log('ì‚­ì œ ì‘ë‹µ:', response.status);
â‹®----
showAlert('success', 'ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
setTimeout(() => {
â‹®----
throw new Error('ì‚­ì œ ìš”ì²­ì´ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
â‹®----
console.error('ì‚­ì œ ì²˜ë¦¬ ì˜¤ë¥˜:', error);
showAlert('error', 'ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
â‹®----
function handleShareReview(event) {
â‹®----
const reviewTitle = document.querySelector('h1, .card-title')?.textContent || 'ë¦¬ë·°';
console.log('ê³µìœ  ìš”ì²­:', { url: currentUrl, title: reviewTitle });
â‹®----
navigator.share({
â‹®----
}).then(() => {
console.log('ê³µìœ  ì„±ê³µ');
showAlert('success', 'ê³µìœ ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
}).catch(error => {
console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì‹¤íŒ¨:', error);
â‹®----
navigator.clipboard.writeText(currentUrl).then(() => {
showAlert('success', 'ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
â‹®----
console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', error);
fallbackCopyToClipboard(currentUrl);
â‹®----
function fallbackCopyToClipboard(text) {
const textArea = document.createElement('textarea');
â‹®----
document.body.appendChild(textArea);
textArea.focus();
textArea.select();
â‹®----
const successful = document.execCommand('copy');
â‹®----
showAlert('success', 'ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
â‹®----
showAlert('error', 'ë§í¬ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
â‹®----
console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
â‹®----
document.body.removeChild(textArea);
â‹®----
function handleReportReview(event) {
â‹®----
const reportReason = prompt(
â‹®----
if (!reportReason || reportReason.trim() === '') {
return; // ì‚¬ìš©ìê°€ ì·¨ì†Œí•˜ê±°ë‚˜ ë¹ˆ ë‚´ìš©
â‹®----
if (!confirm('ì´ ë¦¬ë·°ë¥¼ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
â‹®----
console.log('ì‹ ê³  ìš”ì²­:', { reviewId: currentReviewId, reason: reportReason });
// ë²„íŠ¼ ë¹„í™œì„±í™”
â‹®----
fetch(`/review/report/${currentReviewId}`, {
â‹®----
body: JSON.stringify({
reason: reportReason.trim()
â‹®----
.then(response => response.json())
â‹®----
console.log('ì‹ ê³  ì‘ë‹µ:', data);
â‹®----
showAlert('success', data.message || 'ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ê²€í†  í›„ ì ì ˆí•œ ì¡°ì¹˜ë¥¼ ì·¨í•˜ê² ìŠµë‹ˆë‹¤.');
â‹®----
showAlert('error', data.message || 'ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
â‹®----
console.error('ì‹ ê³  ì²˜ë¦¬ ì˜¤ë¥˜:', error);
showAlert('error', 'ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
â‹®----
function showAlert(type, message) {
const existingAlert = document.querySelector('.dynamic-alert');
â‹®----
existingAlert.remove();
â‹®----
const alertDiv = document.createElement('div');
â‹®----
document.body.appendChild(alertDiv);
â‹®----
alertDiv.remove();
â‹®----
console.log('ì•Œë¦¼ í‘œì‹œ:', type, message);
`````

## File: src/main/resources/static/js/review-write.js
`````javascript
document.addEventListener('DOMContentLoaded', function() {
â‹®----
// DOM ìš”ì†Œ ì„ íƒ
â‹®----
form: document.getElementById('reviewForm'),
facilitySelect: document.getElementById('facilitySelect'),
facilityId: document.getElementById('facilityId'),
title: document.getElementById('title'),
content: document.getElementById('content'),
contentLength: document.getElementById('contentLength'),
overallRating: document.getElementById('overallRating'),
ratingValue: document.getElementById('ratingValue'),
ratingText: document.getElementById('ratingText'),
submitButton: document.getElementById('submitButton'),
detailedRatings: document.querySelectorAll('.detailed-rating')
â‹®----
console.log('ë³„ì  ê´€ë ¨ DOM ìš”ì†Œ:', {
â‹®----
elements.detailedRatings.forEach((container, index) => {
console.log(`ì„¸ë¶€ í‰ì  ì»¨í…Œì´ë„ˆ ${index + 1}:`, {
â‹®----
stars: container.querySelectorAll('.star').length,
ratingGroup: container.closest('.rating-group'),
inputElement: container.closest('.rating-group')?.querySelector('.detailed-rating-input')
â‹®----
function updateStars(container, rating) {
â‹®----
console.warn('ë³„ì  ì»¨í…Œì´ë„ˆê°€ ì—†ìŠµë‹ˆë‹¤.');
â‹®----
console.log('ë³„ì  ì—…ë°ì´íŠ¸:', { container, rating });
const stars = container.querySelectorAll('.star');
stars.forEach((star, index) => {
â‹®----
star.classList.add('active');
â‹®----
star.classList.remove('active');
â‹®----
elements.facilitySelect.addEventListener('change', function() {
â‹®----
console.log('ì‹œì„¤ ì„ íƒ:', { facilityId, status });
â‹®----
alert('ì„ íƒí•  ìˆ˜ ì—†ëŠ” ì‹œì„¤ì…ë‹ˆë‹¤: ' + status);
â‹®----
// ë‚´ìš© ê¸¸ì´ ì²´í¬ ë° í‘œì‹œ
â‹®----
elements.content.addEventListener('input', function() {
const length = this.value.trim().length;
â‹®----
elements.contentLength.classList.remove('text-success');
elements.contentLength.classList.add('text-danger');
â‹®----
elements.contentLength.classList.remove('text-danger');
elements.contentLength.classList.add('text-success');
â‹®----
elements.content.dispatchEvent(new Event('input'));
â‹®----
const stars = elements.overallRating.querySelectorAll('.star');
stars.forEach(star => {
star.addEventListener('click', function() {
const rating = parseInt(this.dataset.rating);
console.log('ì „ì²´ í‰ì  í´ë¦­:', { rating, target: this });
â‹®----
updateStars(elements.overallRating, rating);
â‹®----
console.log('ì „ì²´ í‰ì  ì—…ë°ì´íŠ¸ ì™„ë£Œ:', {
â‹®----
star.addEventListener('mouseover', function() {
â‹®----
star.addEventListener('mouseout', function() {
const rating = parseInt(elements.ratingValue.value) || 0;
â‹®----
const initialRating = parseInt(elements.ratingValue.value);
if (!isNaN(initialRating) && initialRating >= 1 && initialRating <= 5) {
console.log('ì´ˆê¸° í‰ì  ì„¤ì •:', initialRating);
updateStars(elements.overallRating, initialRating);
â‹®----
elements.detailedRatings.forEach(container => {
â‹®----
const ratingGroup = container.closest('.rating-group');
const input = ratingGroup ? ratingGroup.querySelector('.detailed-rating-input') : null;
console.log('ì„¸ë¶€ í‰ì  ì´ˆê¸°í™”:', {
â‹®----
star.addEventListener('click', function(e) {
e.preventDefault();
e.stopPropagation();
â‹®----
console.log('ì„¸ë¶€ í‰ì  í´ë¦­:', {
â‹®----
console.log('ì„¸ë¶€ í‰ì  ì…ë ¥ê°’ ì—…ë°ì´íŠ¸:', {
â‹®----
console.error('ì„¸ë¶€ í‰ì  inputì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', container.dataset.field);
â‹®----
updateStars(container, rating);
â‹®----
const rating = parseInt(input?.value) || 0;
â‹®----
const initialRating = parseInt(input.value);
â‹®----
console.log('ì´ˆê¸° ì„¸ë¶€ í‰ì  ì„¤ì •:', {
â‹®----
updateStars(container, initialRating);
â‹®----
elements.form.addEventListener('submit', function(e) {
â‹®----
alert('ì‹œì„¤ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
â‹®----
elements.facilitySelect.focus();
â‹®----
if (!elements.title.value.trim()) {
alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
elements.title.focus();
â‹®----
alert('ì „ì²´ í‰ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
elements.overallRating.scrollIntoView({ behavior: 'smooth' });
â‹®----
const contentLength = elements.content.value.trim().length;
â‹®----
alert(`ë‚´ìš©ì„ ${MIN_CONTENT_LENGTH}ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.`);
elements.content.focus();
â‹®----
alert(`ë‚´ìš©ì€ ${MAX_CONTENT_LENGTH}ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
â‹®----
this.submit();
`````

## File: src/main/resources/static/js/rich-text-editor-v2.js
`````javascript
class RichTextEditorV2 {
â‹®----
this.element = document.querySelector(selector);
â‹®----
console.error('RichTextEditorV2: Element not found:', selector);
â‹®----
this.init();
â‹®----
init() {
this.createEditor();
this.bindEvents();
this.initializeContent();
this.setupAccessibility();
â‹®----
createEditor() {
â‹®----
this.container = document.createElement('div');
â‹®----
this.container.setAttribute('role', 'textbox');
this.container.setAttribute('aria-label', 'ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„°');
â‹®----
${this.generateToolbar()}
â‹®----
this.element.parentNode.insertBefore(this.container, this.element.nextSibling);
this.toolbar = this.container.querySelector('.rte-toolbar');
this.content = this.container.querySelector('.rte-content');
this.statusbar = this.container.querySelector('.rte-statusbar');
â‹®----
generateToolbar() {
â‹®----
this.options.toolbar.forEach(tool => {
â‹®----
toolbarGroups.push(currentGroup);
â‹®----
currentGroup.push(tool);
â‹®----
return toolbarGroups.map(group =>
â‹®----
${group.map(tool => this.generateToolButton(tool)).join('')}
â‹®----
).join('');
â‹®----
generateToolButton(tool) {
â‹®----
bindEvents() {
// íˆ´ë°” ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
this.toolbar.addEventListener('click', (e) => {
const button = e.target.closest('.rte-btn');
â‹®----
e.preventDefault();
this.executeCommand(button.dataset.command);
â‹®----
this.toolbar.addEventListener('change', (e) => {
if (e.target.classList.contains('rte-select')) {
this.executeCommand(e.target.dataset.command, e.target.value);
â‹®----
this.toolbar.addEventListener('input', (e) => {
if (e.target.classList.contains('rte-color')) {
â‹®----
this.content.addEventListener('input', () => {
this.updateOriginalTextarea();
this.updateStatusBar();
this.handlePlaceholder();
this.validateLength();
â‹®----
this.content.addEventListener('focus', () => {
â‹®----
this.content.addEventListener('blur', () => {
â‹®----
this.content.addEventListener('keydown', (e) => {
this.handleKeyboardShortcuts(e);
â‹®----
this.content.addEventListener('paste', (e) => {
this.handlePaste(e);
â‹®----
executeCommand(command, value = null) {
this.content.focus();
â‹®----
this.insertLink();
â‹®----
this.insertTable();
â‹®----
this.insertBlockquote();
â‹®----
document.execCommand('fontSize', false, value);
â‹®----
document.execCommand(command, false, value);
â‹®----
insertLink() {
const selection = window.getSelection();
const selectedText = selection.toString().trim();
const url = prompt('ë§í¬ URLì„ ì…ë ¥í•˜ì„¸ìš”:', 'https://');
â‹®----
if (!this.isValidUrl(url)) {
alert('ì˜¬ë°”ë¥¸ URL í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.');
â‹®----
const linkText = selectedText || prompt('ë§í¬ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:', url);
â‹®----
const cleanUrl = url.replace(/"/g, '&quot;').replace(/'/g, '&#39;');
const cleanText = linkText.replace(/</g, '&lt;').replace(/>/g, '&gt;');
â‹®----
this.insertHTML(link);
â‹®----
insertTable() {
const rows = prompt('í–‰ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”:', '3');
const cols = prompt('ì—´ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”:', '3');
if (rows && cols && !isNaN(rows) && !isNaN(cols)) {
const numRows = Math.min(parseInt(rows), 20); // ìµœëŒ€ 20í–‰ìœ¼ë¡œ ì œí•œ
const numCols = Math.min(parseInt(cols), 10); // ìµœëŒ€ 10ì—´ë¡œ ì œí•œ
â‹®----
this.insertHTML(table);
â‹®----
insertBlockquote() {
â‹®----
const safeText = this.escapeHtml(selectedText);
â‹®----
this.insertHTML(blockquote);
â‹®----
insertHTML(html) {
if (document.queryCommandSupported('insertHTML')) {
document.execCommand('insertHTML', false, html);
â‹®----
// IE í˜¸í™˜ì„±ì„ ìœ„í•œ ëŒ€ì•ˆ
â‹®----
const range = selection.getRangeAt(0);
range.deleteContents();
const div = document.createElement('div');
â‹®----
const frag = document.createDocumentFragment();
â‹®----
frag.appendChild(div.firstChild);
â‹®----
range.insertNode(frag);
â‹®----
handleKeyboardShortcuts(e) {
â‹®----
switch (e.key.toLowerCase()) {
â‹®----
this.executeCommand('bold');
â‹®----
this.executeCommand('italic');
â‹®----
this.executeCommand('underline');
â‹®----
this.executeCommand('redo');
â‹®----
this.executeCommand('undo');
â‹®----
handlePaste(e) {
â‹®----
const pastedData = clipboardData.getData('text/plain');
// í…ìŠ¤íŠ¸ë§Œ í—ˆìš©í•˜ê³  HTML íƒœê·¸ ì œê±° (ë³´ì•ˆ ê°•í™”)
const cleanText = this.stripHtml(pastedData);
const safeText = this.escapeHtml(cleanText);
this.insertHTML(safeText);
â‹®----
updateOriginalTextarea() {
// HTML ë‚´ìš©ì„ ì›ë³¸ textareaì— ì—…ë°ì´íŠ¸
â‹®----
// í”Œë ˆì´ìŠ¤í™€ë” ì œê±°
â‹®----
// change ì´ë²¤íŠ¸ ë°œìƒ
const event = new Event('change', { bubbles: true });
this.element.dispatchEvent(event);
â‹®----
updateStatusBar() {
â‹®----
const wordCount = text.trim() ? text.trim().split(/\s+/).length : 0;
const charCountElement = this.statusbar.querySelector('.rte-char-count');
const wordCountElement = this.statusbar.querySelector('.rte-word-count');
â‹®----
// ê¸€ì ìˆ˜ ì´ˆê³¼ ì‹œ ê²½ê³  í‘œì‹œ
â‹®----
charCountElement.classList.add('text-danger');
â‹®----
charCountElement.classList.remove('text-danger');
â‹®----
handlePlaceholder() {
â‹®----
const hasPlaceholder = this.content.querySelector('.rte-placeholder');
if (text.trim() === '' && !hasPlaceholder) {
â‹®----
} else if (text.trim() !== '' && hasPlaceholder) {
hasPlaceholder.remove();
â‹®----
validateLength() {
â‹®----
// ê¸€ì ìˆ˜ ì´ˆê³¼ ì‹œ ë‚´ìš© ìë¥´ê¸°
const truncatedText = text.substring(0, this.options.maxLength);
â‹®----
// ì»¤ì„œë¥¼ ë§ˆì§€ë§‰ìœ¼ë¡œ ì´ë™
const range = document.createRange();
â‹®----
range.selectNodeContents(this.content);
range.collapse(false);
selection.removeAllRanges();
selection.addRange(range);
// ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
this.showWarning(`ìµœëŒ€ ${this.options.maxLength}ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.`);
â‹®----
setupAccessibility() {
// ì—ë””í„°ì— ARIA ì†ì„± ì¶”ê°€
this.content.setAttribute('aria-label', 'ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° ë‚´ìš© ì˜ì—­');
this.content.setAttribute('aria-describedby', 'rte-help-text');
// ë„ì›€ë§ í…ìŠ¤íŠ¸ ì¶”ê°€
const helpText = document.createElement('div');
â‹®----
this.container.appendChild(helpText);
â‹®----
initializeContent() {
â‹®----
// ê¸°ì¡´ ê°’ì´ ìˆìœ¼ë©´ ì—ë””í„°ì— ì„¤ì •
const safeContent = this.sanitizeContent(this.element.value);
â‹®----
// ë³´ì•ˆ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œë“¤
isValidUrl(url) {
â‹®----
const urlObject = new URL(url);
return ['http:', 'https:', 'mailto:'].includes(urlObject.protocol);
â‹®----
escapeHtml(text) {
â‹®----
stripHtml(html) {
â‹®----
sanitizeContent(content) {
// í—ˆìš©ëœ íƒœê·¸ë§Œ ë‚¨ê¸°ê³  ë‚˜ë¨¸ì§€ ì œê±°
â‹®----
// í—ˆìš©ë˜ì§€ ì•Šì€ íƒœê·¸ ì œê±°
const allElements = div.querySelectorAll('*');
allElements.forEach(el => {
if (!allowedTags.includes(el.tagName.toLowerCase())) {
el.remove();
} else if (el.tagName.toLowerCase() === 'a') {
// ë§í¬ íƒœê·¸ì˜ ë³´ì•ˆ ì†ì„± í™•ì¸
const href = el.getAttribute('href');
if (href && !this.isValidUrl(href)) {
â‹®----
// ì•ˆì „í•œ ë§í¬ ì†ì„± ì„¤ì •
el.setAttribute('target', '_blank');
el.setAttribute('rel', 'noopener noreferrer');
â‹®----
showWarning(message) {
// ê°„ë‹¨í•œ ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
const warning = document.createElement('div');
â‹®----
document.body.appendChild(warning);
// 3ì´ˆ í›„ ìë™ ì œê±°
setTimeout(() => {
â‹®----
warning.remove();
â‹®----
// ê³µê°œ API ë©”ì„œë“œë“¤
getContent() {
â‹®----
setContent(html) {
const safeContent = this.sanitizeContent(html);
â‹®----
getTextContent() {
â‹®----
focus() {
â‹®----
destroy() {
â‹®----
this.container.remove();
â‹®----
// ì „ì—­ ì‚¬ìš©ì„ ìœ„í•œ í•¨ìˆ˜
â‹®----
// ìë™ ì´ˆê¸°í™” (data-rich-editor ì†ì„±ì´ ìˆëŠ” textareaë“¤ì— ëŒ€í•´)
document.addEventListener('DOMContentLoaded', () => {
const textareas = document.querySelectorAll('textarea[data-rich-editor]');
textareas.forEach(textarea => {
â‹®----
const options = textarea.dataset.richEditor ? JSON.parse(textarea.dataset.richEditor) : {};
// ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ ê°•ì œ ë¹„í™œì„±í™”
â‹®----
// ìµœëŒ€ ê¸¸ì´ ì„¤ì •
â‹®----
new RichTextEditorV2(`#${textarea.id}`, options);
â‹®----
console.error('RichTextEditorV2 ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
â‹®----
console.log('âœ… RichTextEditorV2 ë¡œë“œ ì™„ë£Œ - ë³´ì•ˆ ê°•í™” ë²„ì „');
`````

## File: src/main/resources/static/js/smart-scroll-utility.js
`````javascript
class SmartScrollUtility {
â‹®----
this.init();
â‹®----
init() {
â‹®----
console.error('âŒ SmartScrollUtility: cropper ê°ì²´ê°€ í•„ìš”í•©ë‹ˆë‹¤.');
â‹®----
this.findContainer();
this.findZoomElements();
this.setupEventListener();
console.log('ğŸ–±ï¸ SmartScrollUtility ì´ˆê¸°í™” ì™„ë£Œ');
console.log('ğŸ“Š ì„¤ì •:', this.options);
â‹®----
findContainer() {
â‹®----
const element = document.querySelector(selector);
â‹®----
this.container = element.closest('.crop-image-container') ||
â‹®----
console.warn('âš ï¸ SmartScrollUtility: í¬ë¡­ ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
â‹®----
findZoomElements() {
this.elements.zoomIndicator = document.getElementById('zoomIndicator');
this.elements.zoomLevel = document.getElementById('zoomLevel');
this.elements.zoomStatus = document.getElementById('zoomStatus');
â‹®----
console.log('ğŸ’¡ SmartScrollUtility: ì¤Œ í‘œì‹œê¸°ê°€ ì—†ì–´ ë™ì ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.');
this.createZoomIndicator();
â‹®----
createZoomIndicator() {
const indicator = document.createElement('div');
â‹®----
document.body.appendChild(indicator);
â‹®----
console.log('âœ… ì¤Œ í‘œì‹œê¸° ë™ì  ìƒì„± ì™„ë£Œ');
â‹®----
setupEventListener() {
â‹®----
console.error('âŒ SmartScrollUtility: ì»¨í…Œì´ë„ˆê°€ ì—†ì–´ ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
â‹®----
this.container.removeEventListener('wheel', this.handleWheel.bind(this));
this.container.addEventListener('wheel', this.handleWheel.bind(this), {
â‹®----
console.log('ğŸ”§ íœ  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ:', this.container);
â‹®----
handleWheel(event) {
â‹®----
const canvasData = this.cropper.getCanvasData();
â‹®----
console.log(`ğŸ” ì¤Œ ìƒíƒœ: ${currentZoom.toFixed(2)} (${isZoomingIn ? 'í™•ëŒ€' : 'ì¶•ì†Œ'})`);
â‹®----
this.updateZoomIndicator(currentZoom, 'ìµœëŒ€ í™•ëŒ€');
this.scrollPage(event.deltaY * this.options.scrollMultiplier);
console.log('ğŸ“ˆ ìµœëŒ€ í™•ëŒ€ -> í˜ì´ì§€ ìŠ¤í¬ë¡¤');
â‹®----
this.updateZoomIndicator(currentZoom, 'ìµœì†Œ ì¶•ì†Œ');
â‹®----
console.log('ğŸ“‰ ìµœì†Œ ì¶•ì†Œ -> í˜ì´ì§€ ìŠ¤í¬ë¡¤');
â‹®----
event.preventDefault();
event.stopPropagation();
â‹®----
this.cropper.zoom(zoomDelta);
const newZoom = Math.max(
â‹®----
Math.min(this.options.maxZoom, currentZoom + zoomDelta)
â‹®----
this.updateZoomIndicator(newZoom, isZoomingIn ? 'í™•ëŒ€' : 'ì¶•ì†Œ');
â‹®----
scrollPage(scrollAmount) {
window.scrollBy({
â‹®----
updateZoomIndicator(zoomLevel, status) {
â‹®----
const zoomPercent = Math.round(zoomLevel * 100);
â‹®----
clearTimeout(this.zoomIndicatorTimeout);
this.zoomIndicatorTimeout = setTimeout(() => {
â‹®----
updateOptions(newOptions) {
â‹®----
console.log('ğŸ”§ SmartScrollUtility ì„¤ì • ì—…ë°ì´íŠ¸:', this.options);
â‹®----
updateCropper(newCropper) {
â‹®----
console.log('ğŸ”„ SmartScrollUtility í¬ë¡­í¼ ì—…ë°ì´íŠ¸');
â‹®----
destroy() {
â‹®----
const dynamicIndicator = document.getElementById('zoomIndicator');
â‹®----
dynamicIndicator.remove();
â‹®----
console.log('ğŸ§¹ SmartScrollUtility ì •ë¦¬ ì™„ë£Œ');
â‹®----
return new SmartScrollUtility(cropper, options);
â‹®----
console.log('ğŸ“¦ SmartScrollUtility ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');
`````

## File: CLAUDE.md
`````markdown
# CLAUDE.md

ì´ ë¬¸ì„œëŠ” ì´ ì €ì¥ì†Œì—ì„œ Claude Code (claude.ai/code)ê°€ ì½”ë“œë¥¼ ë‹¤ë£° ë•Œ ì°¸ê³ í•  ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” í•œêµ­ íŒ€ì› 4ëª…ì´ ê°œë°œí•˜ëŠ” \*\*ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ ì›¹ì‚¬ì´íŠ¸ "ë¼ì´íŠ¸ì¼€ì–´(LightCare)"\*\*ì…ë‹ˆë‹¤. ì´ í”Œë«í¼ì€ ìš”ì–‘ ì‹œì„¤ê³¼ ìš”ì–‘ì—…ê³„ êµ¬ì§ìë¥¼ ì—°ê²°í•´ì£¼ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

* **ë°±ì—”ë“œ**: Spring Boot 2.7.18, MyBatis, MySQL
* **í”„ë¡ íŠ¸ì—”ë“œ**: Thymeleaf í…œí”Œë¦¿, Bootstrap 5, JavaScript
* **ë¹Œë“œ ë„êµ¬**: Gradle (Java 11 ì‚¬ìš©)
* **ë°ì´í„°ë² ì´ìŠ¤**: MySQL (ë¬¸ì ì¸ì½”ë”© utf8mb4)

---

## âš™ï¸ ê³µí†µ ê°œë°œ ëª…ë ¹ì–´

### ë¹Œë“œ ë° ì‹¤í–‰

```bash
# í”„ë¡œì íŠ¸ ë¹Œë“œ
./gradlew build

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
./gradlew bootRun

# ë¹Œë“œ ê²°ê³¼ë¬¼ ì •ë¦¬
./gradlew clean

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test

# ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
./gradlew check
```

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

```bash
# MySQL ì ‘ì† ë° DB ìƒì„±
mysql -u root -p
CREATE DATABASE carelink CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™”
# src/main/resources/schema.sql íŒŒì¼ì„ MySQLì—ì„œ ì‹¤í–‰
```

### ê°œë°œ ì„œë²„ ì •ë³´

* ì‹¤í–‰ ì£¼ì†Œ: `http://localhost:8080`
* DB ì—°ê²° ì£¼ì†Œ: `jdbc:mysql://localhost:3306/carelink`
* DevToolsë¥¼ í†µí•œ í•« ë¦¬ë¡œë“œ(Hot Reload) ì ìš©ë¨

---

## ğŸ§± ì•„í‚¤í…ì²˜ ê°œìš”

### íŒ€ êµ¬ì¡° (4ì¸ í˜‘ì—…)

ê¸°ëŠ¥ ì¤‘ì‹¬ì˜ ë¶„ì—… êµ¬ì¡°ë¡œ ìš´ì˜ë©ë‹ˆë‹¤:

* **íŒ€ì› A**: íšŒì› ê´€ë¦¬ (ë¡œê·¸ì¸, íšŒì›ê°€ì…, ë‚´ ì •ë³´)
* **íŒ€ì› B**: ì‹œì„¤ ê²€ìƒ‰ ë° ì§€ë„ ì—°ë™ (ì¹´ì¹´ì˜¤ë§µ)
* **íŒ€ì› C**: êµ¬ì¸êµ¬ì§ ê²Œì‹œíŒ (ê³µê³  ì‘ì„±, ì§€ì›)
* **íŒ€ì› D**: ë¦¬ë·° ì‹œìŠ¤í…œ ë° ì •ë³´ ê²Œì‹œíŒ

### íŒ¨í‚¤ì§€ êµ¬ì¡°

```
com.example.carelink/
â”œâ”€â”€ controller/          # ì»¨íŠ¸ë¡¤ëŸ¬ ê³„ì¸µ
â”œâ”€â”€ service/            # ì„œë¹„ìŠ¤ ê³„ì¸µ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
â”œâ”€â”€ dao/               # DAO ê³„ì¸µ (MyBatis ë§¤í¼)
â”œâ”€â”€ dto/               # DTO ê°ì²´
â””â”€â”€ common/            # ê³µí†µ ìœ í‹¸ ë° ìƒìˆ˜
```

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

ê´€ê³„í˜• í…Œì´ë¸” ê¸°ë°˜ìœ¼ë¡œ ì™¸ë˜í‚¤(FK)ë¥¼ ì ì ˆíˆ ì‚¬ìš©:

* **member**: ì‚¬ìš©ì ê³„ì • ë° ì¸ì¦ ì •ë³´
* **facility**: ìš”ì–‘ì‹œì„¤ ì •ë³´ (ìœ„ì¹˜ ì¢Œí‘œ í¬í•¨)
* **job\_posting**: êµ¬ì¸ê³µê³  ì •ë³´
* **review**: ì‹œì„¤ ë¦¬ë·° ë° í‰ì 
* **board**: ì»¤ë®¤ë‹ˆí‹°/ì •ë³´ ê²Œì‹œíŒ

### MyBatis êµ¬ì„±

* ì„¤ì • íŒŒì¼: `src/main/resources/mybatis-config.xml`
* ë§¤í¼ XML: `src/main/resources/mapper/*.xml`
* camelCase â†’ underscore ìë™ ë§¤í•‘ ì„¤ì •
* DTOìš© typeAlias ì‚¬ìš©

---

## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

* **Thymeleaf**: Spring Boot ì—°ë™ ì„œë²„ì‚¬ì´ë“œ í…œí”Œë¦¿
* **ë ˆì´ì•„ì›ƒ ì‹œìŠ¤í…œ**: `templates/layout/` í´ë”ì— header/footer ë¶„ë¦¬
* **ì •ì  ë¦¬ì†ŒìŠ¤**: `src/main/resources/static/` í´ë”ì— CSS/JS ì €ì¥
* **Bootstrap 5**: ë°˜ì‘í˜• UI í”„ë ˆì„ì›Œí¬ ì ìš©

---

## ğŸ§¾ ì£¼ìš” ì„¤ì • íŒŒì¼

### application.yml

* ì„œë²„ í¬íŠ¸: 8080
* ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´
* ê°œë°œ ì‹œ Thymeleaf ìºì‹œ ë¹„í™œì„±í™”
* íŒŒì¼ ì—…ë¡œë“œ ìµœëŒ€ ìš©ëŸ‰ 10MB
* MyBatis ë§¤í¼ ìœ„ì¹˜ ì§€ì •

### ê¸°íƒ€ ì„¤ì • ì‚¬í•­

* UTF-8 í•œê¸€ ì§€ì› í™œì„±í™”
* MyBatis ë° Spring Web ë¡œê·¸ ì¶œë ¥ ì„¤ì •
* DB íƒ€ì„ì¡´: Asia/Seoul

---

## ğŸ”„ ê°œë°œ íŒ¨í„´

### ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´

Spring MVC êµ¬ì¡°ë¥¼ ë”°ë¦„:

* `@Controller` ì‚¬ìš©
* Modelë¡œ View ë°ì´í„° ì „ë‹¬
* HTTP Method (@GetMapping, @PostMapping ë“±) ëª…í™•íˆ êµ¬ë¶„
* `@Slf4j`ë¡œ ë¡œê¹…

### ì„œë¹„ìŠ¤ ê³„ì¸µ

ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë¡œì§ ë¶„ë¦¬:

* íŠ¸ëœì­ì…˜ ì²˜ë¦¬
* ì…ë ¥ ê²€ì¦
* íš¡ë‹¨ ê´€ì‹¬ì‚¬ ê´€ë¦¬

### MyBatis ë§¤í¼

XML ê¸°ë°˜ SQL ì •ì˜:

* `#{}` ì‚¬ìš©í•œ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
* DTO ë§¤í•‘ ì„¤ì •
* JOIN í™œìš©í•œ ë³µí•© ì¡°íšŒ ì²˜ë¦¬

---

## âœ… í…ŒìŠ¤íŠ¸

### í…ŒìŠ¤íŠ¸ êµ¬ì¡°

* ë‹¨ìœ„ í…ŒìŠ¤íŠ¸: JUnit 5
* í†µí•© í…ŒìŠ¤íŠ¸: Spring Boot Test
* í…ŒìŠ¤íŠ¸ ì„¤ì •ì€ ìš´ì˜ê³¼ ë³„ë„ êµ¬ì„±

### í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test

# íŠ¹ì • í´ë˜ìŠ¤ë§Œ ì‹¤í–‰
./gradlew test --tests "ClassName"
```

---

## ğŸ¤ íŒ€ í˜‘ì—… ê·œì¹™

### Git ì›Œí¬í”Œë¡œìš°

* ê¸°ëŠ¥ ë¸Œëœì¹˜ ëª…: `feature/member-ê¸°ëŠ¥ëª…`
* ì»¤ë°‹ ë©”ì‹œì§€: `[feat] ê¸°ëŠ¥ ì„¤ëª…`
* PRì„ í†µí•œ ì½”ë“œ ë¦¬ë·° ì§„í–‰

### ì½”ë“œ ì»¨ë²¤ì…˜

* í´ë˜ìŠ¤ëª…: PascalCase
* ë©”ì„œë“œëª…: camelCase
* ìƒìˆ˜ëª…: UPPER\_SNAKE\_CASE
* íŒ¨í‚¤ì§€ëª…: ëª¨ë‘ ì†Œë¬¸ì

---

## âš ï¸ íŠ¹ì´ ì‚¬í•­

### í•œê¸€ ì§€ì›

* ëª¨ë“  í…ìŠ¤íŠ¸ ì½˜í…ì¸ ëŠ” í•œê¸€ë¡œ ì‘ì„±
* UTF-8 ì¸ì½”ë”© ìœ ì§€
* ì£¼ì„/ë¬¸ì„œë„ í•œê¸€ ê¸°ë°˜

### ì§€ë„ ì—°ë™

* ì¹´ì¹´ì˜¤ë§µ API ì—°ë™ ì˜ˆì •
* ìœ„ë„/ê²½ë„ ê¸°ë°˜ ì‹œì„¤ ê²€ìƒ‰ ê¸°ëŠ¥ í¬í•¨

### ì‚¬ìš©ì ì—­í• 

* `USER`: ì¼ë°˜ êµ¬ì§ì
* `FACILITY`: ìš”ì–‘ì‹œì„¤ ê´€ë¦¬ì
* `ADMIN`: ì‹œìŠ¤í…œ ê´€ë¦¬ì

---

## ğŸŒ í™˜ê²½ ë³€ìˆ˜

í™˜ê²½ ì„¤ì • ì‹œ ì•„ë˜ í•­ëª© í•„ìš”:

* `spring.datasource.password`: MySQL ë¹„ë°€ë²ˆí˜¸
* DB ì£¼ì†Œê°€ ë‹¤ë¥¼ ê²½ìš° `spring.datasource.url` ìˆ˜ì •
* ì¶”í›„ ì§€ë„ API í‚¤ ë“±ë¡ í•„ìš” (ì˜ˆì •)

### ğŸŸ¢ íŒ€ì› D (ë¦¬ë·°/ê²Œì‹œíŒ) - ì§„í–‰ë¥ : 100%

#### âœ… **ì™„ë£Œëœ ì‘ì—…**
**ë°±ì—”ë“œ ì™„ì „ êµ¬í˜„**:
- âœ… `ReviewService.java` (238ì¤„) - **ì™„ì „ êµ¬í˜„**
  - ë¦¬ë·° CRUD ë¡œì§
  - íŠ¸ëœì­ì…˜ ì²˜ë¦¬
  - ë¡œê¹… ì¶”ê°€
  - ìœ íš¨ì„± ê²€ì¦
  - í‰ì  ì‹œìŠ¤í…œ
  - ì¶”ì²œ/ë¹„ì¶”ì²œ ê¸°ëŠ¥

- âœ… `BoardService.java` (253ì¤„) - **ì™„ì „ êµ¬í˜„**
  - ê²Œì‹œê¸€ CRUD ë¡œì§
  - í˜ì´ì§• ì²˜ë¦¬
  - ê²€ìƒ‰ ë° ì¹´í…Œê³ ë¦¬ í•„í„°ë§
  - ì¸ê¸° ê²Œì‹œê¸€ ê¸°ëŠ¥
  - ì¡°íšŒìˆ˜ ì¦ê°€ ë¡œì§

- âœ… `ReviewMapper.java` & `reviewMapper.xml` - **ì™„ì „ êµ¬í˜„**
  - ëª¨ë“  í•„ìš” ë©”ì„œë“œ ì •ì˜
  - XML ì¿¼ë¦¬ ë§¤í•‘ ì™„ë£Œ

- âœ… `BoardMapper.java` & `boardMapper.xml` - **ì™„ì „ êµ¬í˜„**
  - ëª¨ë“  í•„ìš” ë©”ì„œë“œ ì •ì˜
  - XML ì¿¼ë¦¬ ë§¤í•‘ ì™„ë£Œ

**í”„ë¡ íŠ¸ì—”ë“œ ì™„ì„±**:
- âœ… `templates/review/list.html` (108ì¤„) - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/review/write.html` (122ì¤„) - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/list.html` - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/write.html` - **ì™„ì „ êµ¬í˜„**
- âœ… `templates/board/detail.html` - **ì™„ì „ êµ¬í˜„**

#### ğŸ“Š **ì‹¤ì œ Story Point ë‹¬ì„±ë¥ **
- **ì™„ë£Œ**: LC-010 (ë¦¬ë·° ì‘ì„±) - 13/13 SP âœ…
- **ì™„ë£Œ**: LC-011 (ë¦¬ë·° ëª©ë¡ ê´€ë¦¬) - 13/13 SP âœ…
- **ì™„ë£Œ**: LC-012 (ì •ë³´ ê²Œì‹œíŒ) - 13/13 SP âœ…

**ì´ ë‹¬ì„±**: 39/39 SP (100%)

#### ğŸš€ **ë‹¤ìŒ ë‹¨ê³„**
1. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±**
   - ReviewService í…ŒìŠ¤íŠ¸
   - BoardService í…ŒìŠ¤íŠ¸
   - í†µí•© í…ŒìŠ¤íŠ¸

2. **ì„±ëŠ¥ ìµœì í™”**
   - ì¿¼ë¦¬ ìµœì í™”
   - ìºì‹± ì ìš©
   - N+1 ë¬¸ì œ í•´ê²°

3. **ì¶”ê°€ ê¸°ëŠ¥ ê°œë°œ**
   - ëŒ“ê¸€ ì‹œìŠ¤í…œ ê³ ë„í™”
   - íŒŒì¼ ì²¨ë¶€ ê¸°ëŠ¥
   - ì—ë””í„° ê¸°ëŠ¥ ê°•í™”
`````

## File: docker-compose.yml
`````yaml
version: '3.8'
services:
  app:
    build: .
    container_name: carelink-app
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - DB_URL=${DB_URL:-jdbc:mysql://db:3306/carelink?useSSL=false&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=UTF-8}
      - DB_USERNAME=${DB_USERNAME:-root}
      - DB_PASSWORD=${DB_PASSWORD:-mysql}
      - KAKAO_APP_KEY=${KAKAO_APP_KEY:-0948e3e4faa457fb6083f68e1ce10458}
      - KAKAO_REST_API_KEY=${KAKAO_REST_API_KEY:-0948e3e4faa457fb6083f68e1ce10458}
      - UPLOAD_BASE_PATH=${UPLOAD_BASE_PATH:-/carelink-uploads/}
    volumes:
      - carelink-uploads:/carelink-uploads
    depends_on:
      - db
    restart: unless-stopped
    networks:
      - carelink-network
  db:
    image: mysql:8.0
    container_name: carelink-db
    ports:
      - "3306:3306"
    environment:
      - MYSQL_DATABASE=${MYSQL_DATABASE:-carelink}
      - MYSQL_ROOT_PASSWORD=${DB_PASSWORD:-mysql}
      - TZ=Asia/Seoul
    volumes:
      - carelink-db-data:/var/lib/mysql
      - ./src/main/resources/schema.sql:/docker-entrypoint-initdb.d/1.schema.sql
    command:
      - --character-set-server=utf8mb4
      - --collation-server=utf8mb4_unicode_ci
      - --skip-character-set-client-handshake
      - --default-authentication-plugin=mysql_native_password
    restart: unless-stopped
    networks:
      - carelink-network
volumes:
  carelink-uploads:
    name: carelink-uploads
  carelink-db-data:
    name: carelink-db-data
networks:
  carelink-network:
    name: carelink-network
`````

## File: reset_all_data.sql
`````sql
USE carelink;
SET FOREIGN_KEY_CHECKS = 0;
DELETE FROM facility_images;
DELETE FROM review;
DELETE FROM board;
DELETE FROM job_posting;
DELETE FROM facility;
DELETE FROM member WHERE user_id != 'admin';
ALTER TABLE facility_images AUTO_INCREMENT = 1;
ALTER TABLE review AUTO_INCREMENT = 1;
ALTER TABLE board AUTO_INCREMENT = 1;
ALTER TABLE job_posting AUTO_INCREMENT = 1;
ALTER TABLE facility AUTO_INCREMENT = 1;
SET FOREIGN_KEY_CHECKS = 1;
SELECT 'Database reset completed' AS status;
SELECT TABLE_NAME, TABLE_ROWS
FROM information_schema.TABLES
WHERE TABLE_SCHEMA = 'carelink'
  AND TABLE_TYPE = 'BASE TABLE';
COMMIT;
`````

## File: reset_facility_images.sql
`````sql
USE carelink;
DELETE FROM facility_images;
ALTER TABLE facility_images AUTO_INCREMENT = 1;
UPDATE facility
SET facility_image = NULL,
    facility_image_alt_text = NULL,
    image_count = 0;
SELECT 'facility_images í…Œì´ë¸” ì´ˆê¸°í™” ì™„ë£Œ' AS status;
SELECT COUNT(*) AS remaining_images FROM facility_images;
SELECT facility_id, facility_name, facility_image, image_count FROM facility;
COMMIT;
`````

## File: src/main/java/com/example/carelink/common/BaseDTO.java
`````java
public class BaseDTO {
`````

## File: src/main/java/com/example/carelink/config/SecurityConfig.java
`````java
public class SecurityConfig {
â‹®----
public PasswordEncoder passwordEncoder() {
return new BCryptPasswordEncoder();
â‹®----
public HttpFirewall httpFirewall() {
StrictHttpFirewall firewall = new StrictHttpFirewall();
firewall.setAllowUrlEncodedDoubleSlash(true);
â‹®----
public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
â‹®----
.csrf(csrf -> csrf.disable())
.authorizeHttpRequests(authorize -> authorize
.requestMatchers(
new AntPathRequestMatcher("/css/**"),
new AntPathRequestMatcher("/js/**"),
new AntPathRequestMatcher("/images/**"),
new AntPathRequestMatcher("/favicon.ico")
).permitAll()
â‹®----
new AntPathRequestMatcher("/"),
new AntPathRequestMatcher("/member/login"),
new AntPathRequestMatcher("/member/join"),
new AntPathRequestMatcher("/member/checkUserId"),
new AntPathRequestMatcher("/facility/**"),
new AntPathRequestMatcher("/board/**"),
new AntPathRequestMatcher("/review/**"),
new AntPathRequestMatcher("/job/**"),
new AntPathRequestMatcher("/api/**"),
new AntPathRequestMatcher("/error")
â‹®----
.anyRequest().permitAll()
â‹®----
.formLogin(formLogin -> formLogin.disable())
.logout(logout -> logout
.logoutRequestMatcher(new AntPathRequestMatcher("/member/logout"))
.logoutSuccessUrl("/")
.invalidateHttpSession(true)
.deleteCookies("JSESSIONID")
.permitAll()
â‹®----
return http.build();
`````

## File: src/main/java/com/example/carelink/config/WebConfig.java
`````java
public class WebConfig implements WebMvcConfigurer {
â‹®----
public void addResourceHandlers(ResourceHandlerRegistry registry) {
registry.addResourceHandler("/uploads/facility/**")
.addResourceLocations("file:" + facilityUploadDir);
registry.addResourceHandler("/uploads/profile/**")
.addResourceLocations("file:" + profileUploadDir);
registry.addResourceHandler("/uploads/board/**")
.addResourceLocations("file:" + boardUploadDir);
String projectRoot = System.getProperty("user.dir");
registry.addResourceHandler("/test-images/facilities/**")
.addResourceLocations("file:" + projectRoot + "/images/facilities/");
registry.addResourceHandler("/test-images/profiles/**")
.addResourceLocations("file:" + projectRoot + "/images/profiles/");
`````

## File: src/main/java/com/example/carelink/controller/FacilityImageApiController.java
`````java
public class FacilityImageApiController {
â‹®----
public ResponseEntity<Map<String, Object>> reorderImages(
â‹®----
log.info("ğŸ”„ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ API ìš”ì²­ - facilityId: {}, imageIds: {}", facilityId, imageIds);
boolean success = facilityImageService.updateImageOrdersBatch(facilityId, imageIds);
â‹®----
response.put("success", true);
response.put("message", "ì´ë¯¸ì§€ ìˆœì„œê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
List<FacilityImageDTO> updatedImages = facilityImageService.getImagesByFacilityId(facilityId);
response.put("images", updatedImages);
log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ API ì„±ê³µ - facilityId: {}", facilityId);
return ResponseEntity.ok(response);
â‹®----
response.put("success", false);
response.put("message", "ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
log.warn("âš ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ API ì‹¤íŒ¨ - facilityId: {}", facilityId);
return ResponseEntity.badRequest().body(response);
â‹®----
log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ API ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
â‹®----
response.put("message", "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
return ResponseEntity.internalServerError().body(response);
â‹®----
public ResponseEntity<Map<String, Object>> autoReorderImages(@PathVariable Long facilityId) {
â‹®----
log.info("ğŸ”„ ì‹œì„¤ ì´ë¯¸ì§€ ìë™ ìˆœì„œ ì¬ì •ë ¬ API ìš”ì²­ - facilityId: {}", facilityId);
boolean success = facilityImageService.reorderAllFacilityImages(facilityId);
â‹®----
response.put("message", "ì´ë¯¸ì§€ ìˆœì„œê°€ ìë™ìœ¼ë¡œ ì¬ì •ë ¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
List<FacilityImageDTO> reorderedImages = facilityImageService.getImagesByFacilityId(facilityId);
response.put("images", reorderedImages);
response.put("imageCount", reorderedImages.size());
log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ìë™ ìˆœì„œ ì¬ì •ë ¬ API ì„±ê³µ - facilityId: {}, ì´ {}ì¥", facilityId, reorderedImages.size());
â‹®----
response.put("message", "ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
log.warn("âš ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ìë™ ìˆœì„œ ì¬ì •ë ¬ API ì‹¤íŒ¨ - facilityId: {}", facilityId);
â‹®----
log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ìë™ ìˆœì„œ ì¬ì •ë ¬ API ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
â‹®----
public ResponseEntity<Map<String, Object>> getFacilityImages(@PathVariable Long facilityId, HttpSession session) {
â‹®----
log.info("ğŸ“‹ ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ API ìš”ì²­ - facilityId: {}", facilityId);
MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
â‹®----
response.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
return ResponseEntity.status(401).body(response);
â‹®----
FacilityDTO facility = facilityService.getFacilityById(facilityId);
â‹®----
response.put("message", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
if (!facility.getRegisteredMemberId().equals(member.getMemberId())
&& !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
â‹®----
response.put("message", "í•´ë‹¹ ì‹œì„¤ ì´ë¯¸ì§€ë¥¼ ì¡°íšŒí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
return ResponseEntity.status(403).body(response);
â‹®----
List<FacilityImageDTO> images = facilityImageService.getImagesByFacilityId(facilityId);
FacilityImageDTO mainImage = facilityImageService.getMainImageByFacilityId(facilityId);
â‹®----
response.put("images", images);
response.put("mainImage", mainImage);
response.put("imageCount", images.size());
response.put("maxImages", 5);
log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ API ì„±ê³µ - facilityId: {}, ì´ {}ì¥, memberId: {}", facilityId, images.size(), member.getMemberId());
â‹®----
log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ API ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
â‹®----
public ResponseEntity<Map<String, Object>> updateImageOrder(
â‹®----
log.info("ğŸ”¢ ê°œë³„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ API ìš”ì²­ - imageId: {}, order: {}", imageId, order);
boolean success = facilityImageService.updateImageOrder(imageId, order);
â‹®----
response.put("message", "ì´ë¯¸ì§€ ìˆœì„œê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
log.info("âœ… ê°œë³„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ API ì„±ê³µ - imageId: {}, order: {}", imageId, order);
â‹®----
log.warn("âš ï¸ ê°œë³„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ API ì‹¤íŒ¨ - imageId: {}, order: {}", imageId, order);
â‹®----
log.error("âŒ ê°œë³„ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ API ì˜¤ë¥˜ - imageId: {}, order: {}", imageId, order, e);
â‹®----
public ResponseEntity<Map<String, Object>> deleteImage(@PathVariable Long imageId) {
â‹®----
log.info("ğŸ—‘ï¸ ì´ë¯¸ì§€ ì‚­ì œ API ìš”ì²­ - imageId: {}", imageId);
boolean success = facilityImageService.deleteFacilityImage(imageId);
â‹®----
response.put("message", "ì´ë¯¸ì§€ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
log.info("âœ… ì´ë¯¸ì§€ ì‚­ì œ API ì„±ê³µ - imageId: {}", imageId);
â‹®----
response.put("message", "ì´ë¯¸ì§€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
â‹®----
log.error("âŒ ì´ë¯¸ì§€ ì‚­ì œ API ì˜¤ë¥˜ - imageId: {}", imageId, e);
â‹®----
public ResponseEntity<Map<String, Object>> setMainImage(@PathVariable Long imageId) {
â‹®----
log.info("â­ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • API ìš”ì²­ - imageId: {}", imageId);
FacilityImageDTO imageInfo = facilityImageService.getImageById(imageId);
â‹®----
response.put("message", "ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
boolean success = facilityImageService.setMainImage(imageInfo.getFacilityId(), imageId);
â‹®----
response.put("message", "ë©”ì¸ ì´ë¯¸ì§€ê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
log.info("âœ… ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • API ì„±ê³µ - imageId: {}", imageId);
â‹®----
response.put("message", "ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
â‹®----
log.error("âŒ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • API ì˜¤ë¥˜ - imageId: {}", imageId, e);
â‹®----
public ResponseEntity<Map<String, Object>> uploadImages(
â‹®----
log.info("ğŸ“¤ ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ API ìš”ì²­ - facilityId: {}, ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, images.size());
â‹®----
response.put("message", "í•´ë‹¹ ì‹œì„¤ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
if (images == null || images.isEmpty()) {
â‹®----
response.put("message", "ì—…ë¡œë“œí•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
if (images.size() > MAX_FILES) {
â‹®----
response.put("message", "ìµœëŒ€ " + MAX_FILES + "ì¥ê¹Œì§€ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
â‹®----
if (image.getSize() > MAX_FILE_SIZE) {
â‹®----
response.put("message", "íŒŒì¼ í¬ê¸°ê°€ 10MBë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + image.getOriginalFilename());
â‹®----
String contentType = image.getContentType();
if (contentType == null || !contentType.startsWith("image/")) {
â‹®----
response.put("message", "ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: " + image.getOriginalFilename());
â‹®----
List<FacilityImageDTO> uploadedImages = facilityImageService.uploadMultipleImages(facilityId, images);
â‹®----
response.put("message", images.size() + "ê°œì˜ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.");
response.put("uploadedImages", uploadedImages);
response.put("uploadCount", uploadedImages.size());
log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ API ì„±ê³µ - facilityId: {}, ì—…ë¡œë“œ ìˆ˜: {}, memberId: {}",
facilityId, uploadedImages.size(), member.getMemberId());
â‹®----
log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ API ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
`````

## File: src/main/java/com/example/carelink/dao/FacilityImageMapper.java
`````java
public interface FacilityImageMapper {
List<FacilityImageDTO> getImagesByFacilityId(@Param("facilityId") Long facilityId);
FacilityImageDTO getMainImageByFacilityId(@Param("facilityId") Long facilityId);
int insertFacilityImage(FacilityImageDTO facilityImageDTO);
int updateFacilityImage(FacilityImageDTO facilityImageDTO);
int deleteFacilityImage(@Param("imageId") Long imageId);
int deleteAllImagesByFacilityId(@Param("facilityId") Long facilityId);
int countImagesByFacilityId(@Param("facilityId") Long facilityId);
int updateMainImage(@Param("facilityId") Long facilityId, @Param("imageId") Long imageId);
int clearMainImages(@Param("facilityId") Long facilityId);
FacilityImageDTO getImageById(@Param("imageId") Long imageId);
int updateImageOrder(@Param("imageId") Long imageId, @Param("imageOrder") Integer imageOrder);
`````

## File: src/main/java/com/example/carelink/dao/ReviewMapper.java
`````java
public interface ReviewMapper {
List<ReviewDTO> getReviewList(ReviewDTO searchDTO);
List<ReviewDTO> findReviewsWithSearch(ReviewDTO searchDTO);
int countReviewsWithSearch(ReviewDTO searchDTO);
ReviewDTO getReviewById(@Param("reviewId") Long reviewId);
ReviewDTO findReviewById(@Param("reviewId") Long reviewId);
int insertReview(ReviewDTO reviewDTO);
int updateReview(ReviewDTO reviewDTO);
int deleteReview(@Param("reviewId") Long reviewId);
int incrementViewCount(@Param("reviewId") Long reviewId);
int incrementLikeCount(@Param("reviewId") Long reviewId);
int incrementDislikeCount(@Param("reviewId") Long reviewId);
List<ReviewDTO> getReviewsByFacilityId(@Param("facilityId") Long facilityId);
List<ReviewDTO> findReviewsByFacilityId(@Param("facilityId") Long facilityId);
List<ReviewDTO> findReviewsByMemberId(@Param("memberId") Long memberId);
Double getAverageRating(@Param("facilityId") Long facilityId);
List<ReviewDTO> getRecentReviews();
int getReviewCount(ReviewDTO searchDTO);
int getReviewCount();
int deleteByMemberId(@Param("memberId") Long memberId);
int deleteByFacilityMemberId(@Param("memberId") Long memberId);
`````

## File: src/main/java/Crolling.java
`````java
public class Crolling {
public static void main(String[] args) {
â‹®----
try (BufferedWriter writer = new BufferedWriter(new FileWriter(outputFilePath))) {
List<File> files = getAllFilesWithExtensions(rootDirectory, Arrays.asList(".java", ".jsp", ".xml", ".js", ".html", ".css"));
â‹®----
System.out.println("íŒŒì¼ ì½ê¸°: " + file.getAbsolutePath());
writeFileContentToFile(file, writer);
â‹®----
System.out.println("ëª¨ë“  íŒŒì¼ì„ í¬ë¡¤ë§í•˜ì—¬ " + outputFilePath + "ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.");
â‹®----
e.printStackTrace();
â‹®----
public static List<File> getAllFilesWithExtensions(String directoryPath, List<String> extensions) {
â‹®----
File rootDirectory = new File(directoryPath);
File[] files = rootDirectory.listFiles();
â‹®----
if (file.isDirectory()) {
matchedFiles.addAll(getAllFilesWithExtensions(file.getAbsolutePath(), extensions));
â‹®----
if (file.getName().toLowerCase().endsWith(ext)) {
matchedFiles.add(file);
â‹®----
public static void writeFileContentToFile(File file, BufferedWriter writer) throws IOException {
try (BufferedReader reader = new BufferedReader(new FileReader(file))) {
writer.write("íŒŒì¼ëª…: " + file.getName() + "\n");
writer.write("ê²½ë¡œ: " + file.getAbsolutePath() + "\n");
writer.write("----------------------------------------------------\n");
â‹®----
while ((line = reader.readLine()) != null) {
writer.write(line + "\n");
â‹®----
writer.write("\n\n");
`````

## File: src/main/resources/mapper/facilityImageMapper.xml
`````xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.FacilityImageMapper">
    <resultMap id="FacilityImageResultMap" type="com.example.carelink.dto.FacilityImageDTO">
        <id property="imageId" column="image_id"/>
        <result property="facilityId" column="facility_id"/>
        <result property="imagePath" column="image_path"/>
        <result property="imageAltText" column="image_alt_text"/>
        <result property="imageOrder" column="image_order"/>
        <result property="isMainImage" column="is_main_image"/>
        <result property="uploadDate" column="upload_date"/>
        <result property="updatedAt" column="updated_at"/>
    </resultMap>
    <select id="getImagesByFacilityId" resultMap="FacilityImageResultMap">
        SELECT
            image_id,
            facility_id,
            image_path,
            image_alt_text,
            image_order,
            is_main_image,
            upload_date,
            updated_at
        FROM facility_images
        WHERE facility_id = #{facilityId}
        ORDER BY image_order ASC, upload_date ASC
    </select>
    <select id="getMainImageByFacilityId" resultMap="FacilityImageResultMap">
        SELECT
            image_id,
            facility_id,
            image_path,
            image_alt_text,
            image_order,
            is_main_image,
            upload_date,
            updated_at
        FROM facility_images
        WHERE facility_id = #{facilityId}
        AND is_main_image = TRUE
        LIMIT 1
    </select>
    <insert id="insertFacilityImage" useGeneratedKeys="true" keyProperty="imageId">
        INSERT INTO facility_images (
            facility_id,
            image_path,
            image_alt_text,
            image_order,
            is_main_image,
            upload_date
        ) VALUES (
            #{facilityId},
            #{imagePath},
            #{imageAltText},
            #{imageOrder},
            #{isMainImage},
            NOW()
        )
    </insert>
    <update id="updateFacilityImage">
        UPDATE facility_images
        SET
            image_path = #{imagePath},
            image_alt_text = #{imageAltText},
            image_order = #{imageOrder},
            is_main_image = #{isMainImage},
            updated_at = NOW()
        WHERE image_id = #{imageId}
    </update>
    <delete id="deleteFacilityImage">
        DELETE FROM facility_images
        WHERE image_id = #{imageId}
    </delete>
    <delete id="deleteAllImagesByFacilityId">
        DELETE FROM facility_images
        WHERE facility_id = #{facilityId}
    </delete>
    <select id="countImagesByFacilityId" resultType="int">
        SELECT COUNT(*)
        FROM facility_images
        WHERE facility_id = #{facilityId}
    </select>
    <update id="clearMainImages">
        UPDATE facility_images
        SET is_main_image = FALSE, updated_at = NOW()
        WHERE facility_id = #{facilityId}
    </update>
    <update id="updateMainImage">
        UPDATE facility_images
        SET is_main_image = TRUE, updated_at = NOW()
        WHERE facility_id = #{facilityId} AND image_id = #{imageId}
    </update>
    <select id="getImageById" resultMap="FacilityImageResultMap">
        SELECT
            image_id,
            facility_id,
            image_path,
            image_alt_text,
            image_order,
            is_main_image,
            upload_date,
            updated_at
        FROM facility_images
        WHERE image_id = #{imageId}
    </select>
    <update id="updateImageOrder">
        UPDATE facility_images
        SET image_order = #{imageOrder}, updated_at = NOW()
        WHERE image_id = #{imageId}
    </update>
</mapper>
`````

## File: src/main/resources/mapper/reviewMapper.xml
`````xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.ReviewMapper">
    <resultMap id="reviewResultMap" type="com.example.carelink.dto.ReviewDTO">
        <id property="reviewId" column="review_id"/>
        <result property="facilityId" column="facility_id"/>
        <result property="facilityName" column="facility_name"/>
        <result property="memberId" column="member_id"/>
        <result property="memberName" column="member_name"/>
        <result property="title" column="title"/>
        <result property="content" column="content"/>
        <result property="rating" column="rating"/>
        <result property="serviceRating" column="service_rating"/>
        <result property="facilityRating" column="facility_rating"/>
        <result property="staffRating" column="staff_rating"/>
        <result property="priceRating" column="price_rating"/>
        <result property="reviewImage1" column="review_image1"/>
        <result property="reviewImage2" column="review_image2"/>
        <result property="reviewImage3" column="review_image3"/>
        <result property="likeCount" column="like_count"/>
        <result property="dislikeCount" column="dislike_count"/>
        <result property="viewCount" column="view_count"/>
        <result property="isVisible" column="is_visible"/>
        <result property="status" column="status"/>
        <result property="parentReviewId" column="parent_review_id"/>
        <result property="replyCount" column="reply_count"/>
        <result property="replyDepth" column="reply_depth"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
        <result property="isDeleted" column="is_deleted"/>
    </resultMap>
    <select id="findReviewsWithSearch" parameterType="com.example.carelink.dto.ReviewDTO" resultMap="reviewResultMap">
        SELECT
            r.*,
            m.name as member_name,
            f.facility_name
        FROM review r
        LEFT JOIN member m ON r.member_id = m.member_id
        LEFT JOIN facility f ON r.facility_id = f.facility_id
        WHERE r.is_deleted = false AND r.is_visible = true
        <if test="facilityId != null">
            AND r.facility_id = #{facilityId}
        </if>
        <if test="searchKeyword != null and searchKeyword != ''">
            AND (r.title LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR r.content LIKE CONCAT('%', #{searchKeyword}, '%'))
        </if>
        <if test="minRating != null">
            AND r.rating >= #{minRating}
        </if>
        <if test="maxRating != null">
            AND r.rating &lt;= #{maxRating}
        </if>
        <choose>
            <when test="sortBy != null and sortBy == 'RATING_HIGH'">
                ORDER BY r.rating DESC, r.created_at DESC
            </when>
            <when test="sortBy != null and sortBy == 'RATING_LOW'">
                ORDER BY r.rating ASC, r.created_at DESC
            </when>
            <when test="sortBy != null and sortBy == 'LIKE_COUNT'">
                ORDER BY r.like_count DESC, r.created_at DESC
            </when>
            <otherwise>
                ORDER BY r.created_at DESC
            </otherwise>
        </choose>
        <if test="size != null and size > 0 and offset != null and offset >= 0">
            LIMIT #{size} OFFSET #{offset}
        </if>
    </select>
    <select id="countReviewsWithSearch" parameterType="com.example.carelink.dto.ReviewDTO" resultType="int">
        SELECT COUNT(*)
        FROM review r
        WHERE r.is_deleted = false AND r.is_visible = true
        <if test="facilityId != null">
            AND r.facility_id = #{facilityId}
        </if>
        <if test="searchKeyword != null and searchKeyword != ''">
            AND (r.title LIKE CONCAT('%', #{searchKeyword}, '%')
                 OR r.content LIKE CONCAT('%', #{searchKeyword}, '%'))
        </if>
        <if test="minRating != null">
            AND r.rating >= #{minRating}
        </if>
        <if test="maxRating != null">
            AND r.rating &lt;= #{maxRating}
        </if>
    </select>
    <select id="findReviewById" parameterType="long" resultMap="reviewResultMap">
        SELECT
            r.*,
            m.name as member_name,
            f.facility_name
        FROM review r
        LEFT JOIN member m ON r.member_id = m.member_id
        LEFT JOIN facility f ON r.facility_id = f.facility_id
        WHERE r.review_id = #{reviewId} AND r.is_deleted = false
    </select>
    <insert id="insertReview" parameterType="com.example.carelink.dto.ReviewDTO" useGeneratedKeys="true" keyProperty="reviewId">
        INSERT INTO review (
            facility_id, member_id, title, content, rating,
            service_rating, facility_rating, staff_rating, price_rating,
            review_image1, review_image2, review_image3,
            is_visible, status, parent_review_id, reply_depth,
            is_deleted, created_at
        ) VALUES (
            #{facilityId}, #{memberId}, #{title}, #{content}, #{rating},
            #{serviceRating}, #{facilityRating}, #{staffRating}, #{priceRating},
            #{reviewImage1}, #{reviewImage2}, #{reviewImage3},
            #{isVisible}, #{status}, #{parentReviewId}, #{replyDepth},
            #{isDeleted}, NOW()
        )
    </insert>
    <update id="updateReview" parameterType="com.example.carelink.dto.ReviewDTO">
        UPDATE review SET
            title = #{title},
            content = #{content},
            rating = #{rating},
            service_rating = #{serviceRating},
            facility_rating = #{facilityRating},
            staff_rating = #{staffRating},
            price_rating = #{priceRating},
            review_image1 = #{reviewImage1},
            review_image2 = #{reviewImage2},
            review_image3 = #{reviewImage3},
            is_visible = #{isVisible},
            status = #{status},
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>
    <update id="deleteReview" parameterType="long">
        UPDATE review SET
            is_deleted = true,
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>
    <update id="incrementViewCount" parameterType="long">
        UPDATE review SET
            view_count = view_count + 1,
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>
    <update id="incrementLikeCount" parameterType="long">
        UPDATE review SET
            like_count = like_count + 1,
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>
    <update id="incrementDislikeCount" parameterType="long">
        UPDATE review SET
            dislike_count = dislike_count + 1,
            updated_at = NOW()
        WHERE review_id = #{reviewId}
    </update>
    <select id="findReviewsByMemberId" parameterType="long" resultMap="reviewResultMap">
        SELECT
            r.*,
            m.name as member_name,
            f.facility_name
        FROM review r
        LEFT JOIN member m ON r.member_id = m.member_id
        LEFT JOIN facility f ON r.facility_id = f.facility_id
        WHERE r.member_id = #{memberId} AND r.is_deleted = false
        ORDER BY r.created_at DESC
    </select>
    <select id="findReviewsByFacilityId" parameterType="long" resultMap="reviewResultMap">
        SELECT
            r.*,
            m.name as member_name,
            f.facility_name
        FROM review r
        LEFT JOIN member m ON r.member_id = m.member_id
        LEFT JOIN facility f ON r.facility_id = f.facility_id
        WHERE r.facility_id = #{facilityId} AND r.is_deleted = false AND r.is_visible = true
        ORDER BY r.created_at DESC
    </select>
    <select id="getAverageRatingByFacilityId" parameterType="long" resultType="float">
        SELECT ROUND(AVG(rating), 1)
        FROM review
        WHERE facility_id = #{facilityId} AND is_deleted = false AND is_visible = true
    </select>
    <select id="getReviewCountByFacilityId" parameterType="long" resultType="int">
        SELECT COUNT(*)
        FROM review
        WHERE facility_id = #{facilityId} AND is_deleted = false AND is_visible = true
    </select>
    <select id="getReviewCount" resultType="int">
        SELECT COUNT(*)
        FROM review
        WHERE is_deleted = false AND is_visible = true
    </select>
    <select id="getAverageRating" parameterType="long" resultType="double">
        SELECT AVG(rating)
        FROM review
        WHERE facility_id = #{facilityId}
          AND is_deleted = false
          AND is_visible = true
    </select>
    <delete id="deleteByMemberId" parameterType="long">
        DELETE FROM review WHERE member_id = #{memberId}
    </delete>
    <delete id="deleteByFacilityMemberId" parameterType="long">
        DELETE FROM review
        WHERE facility_id IN (
            SELECT facility_id FROM facility WHERE registered_member_id = #{memberId}
        )
    </delete>
</mapper>
`````

## File: src/main/resources/static/css/rich-text-editor.css
`````css
.rich-text-editor-v2 {
.rich-text-editor-v2:focus-within {
.rte-toolbar {
.rte-toolbar-group {
.rte-toolbar-group:not(:last-child)::after {
.rte-btn {
.rte-btn:hover {
.rte-btn:active,
.rte-btn:focus {
.rte-btn:disabled {
.rte-select {
.rte-select:focus {
.rte-color {
.rte-color:focus {
.rte-content {
.rte-content:focus {
.rte-content a {
.rte-content a:hover {
.rte-content a:visited {
.rich-text-content a {
.rich-text-content a:hover {
.rich-text-content a:visited {
.rte-placeholder {
.rte-statusbar {
.rte-char-count.text-danger {
.rte-content p {
.rte-content ul,
.rte-content li {
.rte-content blockquote {
â‹®----
.rte-table {
.rte-table th,
.rte-table th {
.rte-table tr:nth-child(even) {
.rte-warning {
â‹®----
.sr-only {
`````

## File: src/main/resources/static/js/delete-member.js
`````javascript
document.addEventListener('DOMContentLoaded', function() {
â‹®----
form: document.getElementById('deleteMemberForm'),
password: document.getElementById('password'),
confirmName: document.getElementById('confirmName'),
confirmDelete: document.getElementById('confirmDelete'),
submitButton: document.getElementById('submitButton'),
togglePassword: document.getElementById('togglePassword'),
passwordFeedback: document.getElementById('passwordFeedback'),
nameValidationFeedback: document.getElementById('nameValidationFeedback')
â‹®----
const memberName = document.querySelector('.form-text strong').textContent.trim();
console.log('íšŒì›íƒˆí‡´ í˜ì´ì§€ DOM ìš”ì†Œ:', elements);
function setupPasswordToggle() {
â‹®----
console.warn('ë¹„ë°€ë²ˆí˜¸ í† ê¸€ ìš”ì†Œê°€ ì—†ìŠµë‹ˆë‹¤.');
â‹®----
elements.togglePassword.addEventListener('click', function() {
const icon = this.querySelector('i');
â‹®----
icon.classList.remove('fa-eye');
icon.classList.add('fa-eye-slash');
â‹®----
icon.classList.remove('fa-eye-slash');
icon.classList.add('fa-eye');
â‹®----
function clearValidationState(inputElement) {
â‹®----
inputElement.classList.remove('is-valid', 'is-invalid');
â‹®----
function setFeedback(feedbackElement, message, isValid) {
â‹®----
function setValidationState(inputElement, isValid) {
â‹®----
inputElement.classList.remove('is-invalid');
inputElement.classList.add('is-valid');
â‹®----
inputElement.classList.remove('is-valid');
inputElement.classList.add('is-invalid');
â‹®----
function validatePassword() {
const value = elements.password.value.trim();
â‹®----
clearValidationState(elements.password);
setFeedback(elements.passwordFeedback, '', true);
â‹®----
setValidationState(elements.password, isValid);
â‹®----
setFeedback(elements.passwordFeedback, 'ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.', false);
â‹®----
setFeedback(elements.passwordFeedback, 'ë¹„ë°€ë²ˆí˜¸ í˜•ì‹ì´ ìœ íš¨í•©ë‹ˆë‹¤. (ì‹¤ì œ ì¼ì¹˜ ì—¬ë¶€ëŠ” ì œì¶œ ì‹œ í™•ì¸)', true);
â‹®----
// ì´ë¦„ ê²€ì¦
function validateName() {
const value = elements.confirmName.value.trim();
â‹®----
clearValidationState(elements.confirmName);
setFeedback(elements.nameValidationFeedback, '', true);
â‹®----
setValidationState(elements.confirmName, isValid);
â‹®----
setFeedback(elements.nameValidationFeedback, `ì´ë¦„ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 'ì…ë ¥ê°’: ${value}' â‰  'ë“±ë¡ëœ ì´ë¦„: ${memberName}'`, false);
â‹®----
setFeedback(elements.nameValidationFeedback, 'ì´ë¦„ì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.', true);
â‹®----
// ë™ì˜ ì²´í¬ë°•ìŠ¤ ê²€ì¦
function validateConfirmDelete() {
â‹®----
// ì œì¶œ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
function updateSubmitButton() {
const isPasswordValid = validatePassword();
const isNameValid = validateName();
const isConfirmChecked = validateConfirmDelete();
â‹®----
// íƒˆí‡´ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
function showConfirmDialog() {
â‹®----
return confirm(confirmMessage);
â‹®----
// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
function setupEventListeners() {
// ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì´ë²¤íŠ¸
â‹®----
elements.password.addEventListener('input', function() {
updateSubmitButton();
â‹®----
elements.password.addEventListener('blur', function() {
validatePassword();
â‹®----
elements.password.addEventListener('focus', function() {
clearValidationState(this);
â‹®----
// ì´ë¦„ ì…ë ¥ ì´ë²¤íŠ¸
â‹®----
elements.confirmName.addEventListener('input', function() {
â‹®----
elements.confirmName.addEventListener('blur', function() {
validateName();
â‹®----
elements.confirmName.addEventListener('focus', function() {
â‹®----
// ë™ì˜ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸
â‹®----
elements.confirmDelete.addEventListener('change', function() {
â‹®----
this.classList.remove('is-invalid');
this.classList.add('is-valid');
â‹®----
this.classList.remove('is-valid');
this.classList.add('is-invalid');
â‹®----
elements.form.addEventListener('submit', function(event) {
event.preventDefault();
const isFormValid = updateSubmitButton();
â‹®----
console.log('í¼ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨');
if (!validatePassword() && elements.password) {
elements.password.focus();
alert('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
} else if (!validateName() && elements.confirmName) {
elements.confirmName.focus();
alert(`ì´ë¦„ì„ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”. ë“±ë¡ëœ ì´ë¦„: '${memberName}'`);
} else if (!validateConfirmDelete() && elements.confirmDelete) {
elements.confirmDelete.focus();
elements.confirmDelete.classList.add('is-invalid');
alert('íƒˆí‡´ ë™ì˜ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
â‹®----
if (!showConfirmDialog()) {
console.log('ì‚¬ìš©ìê°€ íƒˆí‡´ë¥¼ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤.');
â‹®----
elements.submitButton.classList.remove('btn-danger');
elements.submitButton.classList.add('btn-warning');
â‹®----
console.log('íšŒì›íƒˆí‡´ í¼ ì œì¶œ');
this.submit();
â‹®----
function showInitialWarning() {
if (!sessionStorage.getItem('deletePageWarningShown')) {
setTimeout(() => {
alert('âš ï¸ íšŒì›íƒˆí‡´ í˜ì´ì§€ì…ë‹ˆë‹¤.\nì‹ ì¤‘íˆ ê²°ì •í•´ì£¼ì„¸ìš”.');
sessionStorage.setItem('deletePageWarningShown', 'true');
â‹®----
function setupBeforeUnloadWarning() {
â‹®----
elements.password.addEventListener('input', () => {
â‹®----
elements.confirmName.addEventListener('input', () => {
â‹®----
elements.confirmDelete.addEventListener('change', () => {
â‹®----
elements.form.addEventListener('submit', function() {
â‹®----
window.addEventListener('beforeunload', function(event) {
â‹®----
function init() {
setupPasswordToggle();
setupEventListeners();
â‹®----
showInitialWarning();
console.log('íšŒì›íƒˆí‡´ í˜ì´ì§€ JavaScript ì´ˆê¸°í™” ì™„ë£Œ');
â‹®----
init();
`````

## File: src/main/resources/static/js/kakaomap.js
`````javascript
function previewFacilityImage(input) {
const preview = document.getElementById('facilityImagePreview');
const previewImg = document.getElementById('facilityImagePreviewImg');
â‹®----
alert('íŒŒì¼ í¬ê¸°ê°€ 5MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤. ë” ì‘ì€ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
â‹®----
if (!file.type.match('image.*')) {
alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
â‹®----
const reader = new FileReader();
â‹®----
reader.readAsDataURL(file);
â‹®----
function initKakaoMap(mapId) {
const mapContainer = document.getElementById(mapId);
â‹®----
console.error("Error: Map container not found with ID:", mapId);
â‹®----
center: new kakao.maps.LatLng(37.566826, 126.9786567),
â‹®----
map = new kakao.maps.Map(mapContainer, mapOption);
infoWindow = new kakao.maps.InfoWindow({zIndex:1});
const zoomControl = new kakao.maps.ZoomControl();
map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
console.log("Kakao Map initialized successfully on element:", mapId);
â‹®----
function addMarker(lat, lng, title, content) {
â‹®----
console.error("Error: Map object is not initialized. Cannot add marker for:", title);
â‹®----
const position = new kakao.maps.LatLng(lat, lng);
const marker = new kakao.maps.Marker({
â‹®----
markers.push(marker);
kakao.maps.event.addListener(marker, 'click', function() {
infoWindow.setContent('<div style="padding:5px;font-size:12px;">' + content + '</div>');
infoWindow.open(map, marker);
map.panTo(position);
â‹®----
function clearMarkers() {
â‹®----
markers[i].setMap(null);
â‹®----
infoWindow.close();
â‹®----
console.log("All markers cleared.");
â‹®----
function searchFacilitiesInBounds() {
â‹®----
console.error("Error: Map object is not initialized. Cannot search facilities in bounds.");
â‹®----
const bounds = map.getBounds();
const swLat = bounds.getSouthWest().getLat();
const swLng = bounds.getSouthWest().getLng();
const neLat = bounds.getNorthEast().getLat();
const neLng = bounds.getNorthEast().getLng();
const facilityName = document.getElementById('facilityName')?.value || '';
const region = document.getElementById('region')?.value || '';
const facilityType = document.getElementById('facilityType')?.value || '';
const gradeRating = document.getElementById('gradeRating')?.value || '';
// ì„œë²„ì˜ /facility/api/list APIë¥¼ í˜¸ì¶œí•˜ì—¬ í•´ë‹¹ ì˜ì—­ ë‚´ ì‹œì„¤ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
â‹®----
`&facilityName=${encodeURIComponent(facilityName)}` +
`&region=${encodeURIComponent(region)}` +
`&facilityType=${encodeURIComponent(facilityType)}` +
`&gradeRating=${encodeURIComponent(gradeRating)}`;
console.log("Fetching facilities for map bounds and filters:", url);
fetch(url)
.then(response => {
â‹®----
throw new Error(`HTTP error! status: ${response.status}`);
â‹®----
return response.json();
â‹®----
.then(data => {
clearMarkers(); // ê¸°ì¡´ ë§ˆì»¤ ì§€ìš°ê¸°
â‹®----
data.forEach(facility => {
addMarker(
parseFloat(facility.latitude),
parseFloat(facility.longitude),
â‹®----
console.log(`Updated map with ${data.length} facilities from AJAX.`);
â‹®----
console.log("No facilities found in current map bounds with applied filters.");
â‹®----
.catch(error => {
console.error("Error fetching facilities for map API:", error);
â‹®----
// searchWithFilters í•¨ìˆ˜ëŠ” ë” ì´ìƒ HTML í¼ ì œì¶œì—ì„œ ì§ì ‘ í˜¸ì¶œë˜ì§€ ì•Šìœ¼ë¯€ë¡œ,
// ë§Œì•½ ì´ í•¨ìˆ˜ê°€ ë‹¤ë¥¸ ëª©ì ìœ¼ë¡œ (ì˜ˆ: íŠ¹ì • í•„í„° ë²„íŠ¼ í´ë¦­ ì‹œ ì§€ë„ ì—…ë°ì´íŠ¸) ì‚¬ìš©ëœë‹¤ë©´
// ê·¸ì— ë§ëŠ” ë¡œì§ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ëŠ” í•„ìš” ì—†ìœ¼ë¯€ë¡œ ì œê±°í•˜ê±°ë‚˜ ì£¼ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
/*
function searchWithFilters(filters) {
    console.warn("searchWithFilters is called. This function is likely deprecated for main form submission.");
    // ë§Œì•½ AJAX ë°©ì‹ìœ¼ë¡œ í•„í„°ë§ëœ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ê°€ì ¸ì™€ ì§€ë„ë‚˜ ëª©ë¡ì„ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´ ì´ê³³ì— ë¡œì§ êµ¬í˜„
    // ì˜ˆ: const queryString = new URLSearchParams(filters).toString();
    // fetch(`/facility/api/list?${queryString}`)
    // ...
}
*/
// ===============================
// ì£¼ì†Œ ê²€ìƒ‰ ê´€ë ¨ í•¨ìˆ˜ë“¤
â‹®----
/**
 * ì¹´ì¹´ì˜¤ ìš°í¸ë²ˆí˜¸ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•œ ì£¼ì†Œ ê²€ìƒ‰ íŒì—…ì„ ë„ìš°ëŠ” í•¨ìˆ˜
 * @param {string} addressInputId - ì£¼ì†Œë¥¼ ì…ë ¥ë°›ì„ input ìš”ì†Œì˜ ID
 * @param {string} detailAddressInputId - ìƒì„¸ì£¼ì†Œë¥¼ ì…ë ¥ë°›ì„ input ìš”ì†Œì˜ ID (ì„ íƒì‚¬í•­)
 * @param {function} callback - ì£¼ì†Œ ì„ íƒ ì™„ë£Œ í›„ ì‹¤í–‰ë  ì½œë°± í•¨ìˆ˜ (ì„ íƒì‚¬í•­)
 */
function openAddressSearch(addressInputId, detailAddressInputId = null, callback = null) {
new daum.Postcode({
â‹®----
// íŒì—…ì—ì„œ ê²€ìƒ‰ê²°ê³¼ í•­ëª©ì„ í´ë¦­í–ˆì„ë•Œ ì‹¤í–‰í•  ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë¶€ë¶„.
// ê° ì£¼ì†Œì˜ ë…¸ì¶œ ê·œì¹™ì— ë”°ë¼ ì£¼ì†Œë¥¼ ì¡°í•©í•œë‹¤.
let addr = ''; // ì£¼ì†Œ ë³€ìˆ˜
let extraAddr = ''; // ì°¸ê³ í•­ëª© ë³€ìˆ˜
// ì‚¬ìš©ìê°€ ì„ íƒí•œ ì£¼ì†Œ íƒ€ì…ì— ë”°ë¼ í•´ë‹¹ ì£¼ì†Œ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
â‹®----
if(data.bname !== '' && /[ë™|ë¡œ|ê°€]$/g.test(data.bname)){
â‹®----
// ê±´ë¬¼ëª…ì´ ìˆê³ , ê³µë™ì£¼íƒì¼ ê²½ìš° ì¶”ê°€í•œë‹¤.
â‹®----
// í‘œì‹œí•  ì°¸ê³ í•­ëª©ì´ ìˆì„ ê²½ìš°, ê´„í˜¸ê¹Œì§€ ì¶”ê°€í•œ ìµœì¢… ë¬¸ìì—´ì„ ë§Œë“ ë‹¤.
â‹®----
// ìš°í¸ë²ˆí˜¸ì™€ ì£¼ì†Œ ì •ë³´ë¥¼ í•´ë‹¹ í•„ë“œì— ë„£ëŠ”ë‹¤.
const addressInput = document.getElementById(addressInputId);
â‹®----
// ìƒì„¸ì£¼ì†Œ ì…ë ¥ë€ì´ ìˆìœ¼ë©´ í¬ì»¤ìŠ¤ë¥¼ ì´ë™í•œë‹¤.
â‹®----
const detailAddressInput = document.getElementById(detailAddressInputId);
â‹®----
detailAddressInput.focus();
â‹®----
// ì£¼ì†Œë¡œë¶€í„° ìœ„ë„/ê²½ë„ë¥¼ ê°€ì ¸ì™€ì„œ ì½œë°± í•¨ìˆ˜ ì‹¤í–‰
â‹®----
getCoordinatesFromAddress(addr, callback);
â‹®----
console.log('ì£¼ì†Œ ê²€ìƒ‰ ì™„ë£Œ:', {
â‹®----
}).open();
â‹®----
function getCoordinatesFromAddress(address, callback) {
const geocoder = new kakao.maps.services.Geocoder();
geocoder.addressSearch(address, function(result, status) {
â‹®----
const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
console.log('ì£¼ì†Œë¡œë¶€í„° ì¢Œí‘œ ë³€í™˜ ì„±ê³µ:', {
â‹®----
callback(parseFloat(result[0].y), parseFloat(result[0].x));
â‹®----
console.error('ì£¼ì†Œë¡œë¶€í„° ì¢Œí‘œ ë³€í™˜ ì‹¤íŒ¨:', status);
alert('ì£¼ì†Œë¡œë¶€í„° ì¢Œí‘œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
â‹®----
function searchFacilityAddress() {
console.log('searchFacilityAddress í•¨ìˆ˜ í˜¸ì¶œë¨');
const currentAddress = document.getElementById('facilityAddress').value;
if (currentAddress && currentAddress.trim() !== '') {
const confirmChange = confirm('ê¸°ì¡´ ì£¼ì†Œê°€ ìˆìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ì£¼ì†Œë¡œ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\ní˜„ì¬ ì£¼ì†Œ: ' + currentAddress);
â‹®----
console.log('ì£¼ì†Œ ë³€ê²½ ì·¨ì†Œë¨');
â‹®----
// Daum ìš°í¸ë²ˆí˜¸ ì„œë¹„ìŠ¤ ì§ì ‘ ì‚¬ìš©
â‹®----
console.log('ì£¼ì†Œ ì„ íƒ ì™„ë£Œ:', data);
// ì£¼ì†Œ ì¡°í•©
â‹®----
// ì£¼ì†Œ í•„ë“œì— ì„¤ì •
const addressInput = document.getElementById('facilityAddress');
â‹®----
addressInput.removeAttribute('readonly');
â‹®----
addressInput.setAttribute('readonly', 'readonly');
console.log('ì£¼ì†Œ ì„¤ì • ì™„ë£Œ:', finalAddress);
â‹®----
setTimeout(function() {
â‹®----
console.error('facilityAddress í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
â‹®----
// ìƒì„¸ì£¼ì†Œ ì…ë ¥ë€ì— í¬ì»¤ìŠ¤
const detailAddressInput = document.getElementById('detailAddress');
â‹®----
getCoordinatesFromAddress(addr, function(latitude, longitude) {
const latitudeInput = document.getElementById('latitude');
const longitudeInput = document.getElementById('longitude');
â‹®----
console.log('ìœ„ë„ ì„¤ì •:', latitude);
â‹®----
console.error('latitude í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
â‹®----
console.log('ê²½ë„ ì„¤ì •:', longitude);
â‹®----
console.error('longitude í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
â‹®----
const notification = document.createElement('div');
â‹®----
document.body.appendChild(notification);
â‹®----
notification.parentNode.removeChild(notification);
â‹®----
console.log('ì‹œì„¤ ìœ„ì¹˜ ì¢Œí‘œ ì„¤ì • ì™„ë£Œ:', { latitude, longitude });
const mapPreviewContainer = document.getElementById('mapPreviewContainer');
â‹®----
updatePreviewMap(latitude, longitude);
â‹®----
console.log('ì£¼ì†Œ ê²€ìƒ‰ ì°½ ë‹«í˜. ìƒíƒœ:', state);
â‹®----
function updatePreviewMap(latitude, longitude) {
const previewMapContainer = document.getElementById('previewMap');
â‹®----
const coords = new kakao.maps.LatLng(latitude, longitude);
â‹®----
window.previewMap = new kakao.maps.Map(previewMapContainer, mapOption);
â‹®----
window.previewMap.setCenter(coords);
â‹®----
window.previewMarker.setMap(null);
â‹®----
window.previewMarker = new kakao.maps.Marker({
â‹®----
console.log('ë¯¸ë¦¬ë³´ê¸° ì§€ë„ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
`````

## File: src/main/java/com/example/carelink/dao/JobMapper.java
`````java
public interface JobMapper {
List<JobDTO> findJobsWithSearch(JobDTO searchDTO);
List<JobDTO> getJobList(JobDTO searchDTO);
JobDTO findJobById(@Param("jobId") Long jobId);
int insertJob(JobDTO jobDTO);
int updateJob(JobDTO jobDTO);
int deleteJob(@Param("jobId") Long jobId);
List<JobDTO> getPopularJobs();
List<JobDTO> searchJobs(JobDTO searchDTO);
int countJobsWithSearch(JobDTO searchDTO);
int getJobCount();
void incrementApplyCount(@Param("jobId") Long jobId);
List<JobDTO> findJobsByMemberId(@Param("memberId") Long memberId);
int deleteByMemberId(@Param("memberId") Long memberId);
int deleteByFacilityMemberId(@Param("memberId") Long memberId);
`````

## File: src/main/java/com/example/carelink/dao/MemberMapper.java
`````java
public interface MemberMapper {
MemberDTO findByUserId(@Param("userId") String userId);
MemberDTO findById(@Param("memberId") Long memberId);
MemberDTO findByEmail(@Param("email") String email);
int insertMember(MemberDTO memberDTO);
int updateMember(MemberDTO memberDTO);
int softDeleteMember(@Param("userId") String userId);
int updatePassword(MemberDTO memberDTO);
int updateLoginSuccess(@Param("memberId") Long memberId);
int updateLoginFail(@Param("memberId") Long memberId);
int getTotalCount();
List<MemberDTO> findMembersWithPaging(MemberDTO searchDTO);
List<MemberDTO> findMembersByRole(@Param("role") String role);
void updateMemberStatus(@Param("memberId") Long memberId, @Param("isActive") boolean isActive);
int getMemberCount();
boolean existsByUserId(@Param("userId") String userId);
boolean existsByEmail(@Param("email") String email);
int anonymizeMember(@Param("userId") String userId);
int hardDeleteMember(@Param("userId") String userId);
int getFacilityMemberCount();
int getUserMemberCount();
int getMemberCountByRole(@Param("role") String role);
`````

## File: src/main/java/com/example/carelink/service/BoardService.java
`````java
public class BoardService {
â‹®----
public PageInfo<BoardDTO> getBoardList(int page, String keyword, String category) {
log.info("ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - page: {}, keyword: {}, category: {}", page, keyword, category);
â‹®----
BoardDTO searchDTO = new BoardDTO();
searchDTO.setPage(page);
searchDTO.setSize(DEFAULT_PAGE_SIZE);
searchDTO.setOffset((page - 1) * DEFAULT_PAGE_SIZE);
if (keyword != null && !keyword.trim().isEmpty()) {
searchDTO.setSearchKeyword(keyword.trim());
â‹®----
if (category != null && !category.trim().isEmpty() && !"all".equals(category)) {
searchDTO.setCategory(category.trim());
â‹®----
log.info("ê²€ìƒ‰ ì¡°ê±´ - searchDTO: page={}, size={}, offset={}, keyword={}, category={}",
searchDTO.getPage(), searchDTO.getSize(), searchDTO.getOffset(),
searchDTO.getSearchKeyword(), searchDTO.getCategory());
int totalCount = boardMapper.getBoardCount(searchDTO);
log.info("ì „ì²´ ê²Œì‹œê¸€ ìˆ˜: {}", totalCount);
List<BoardDTO> boardList = boardMapper.getBoardList(searchDTO);
log.info("ì¡°íšŒëœ ê²Œì‹œê¸€ ìˆ˜: {}", boardList != null ? boardList.size() : 0);
if (boardList != null && !boardList.isEmpty()) {
log.info("ì²« ë²ˆì§¸ ê²Œì‹œê¸€ ì •ë³´ - ID: {}, ì œëª©: {}, ì‘ì„±ì: {}, is_active: {}, is_deleted: {}",
boardList.get(0).getBoardId(),
boardList.get(0).getTitle(),
boardList.get(0).getMemberName(),
boardList.get(0).getIsActive(),
boardList.get(0).getIsDeleted());
â‹®----
log.warn("ì¡°íšŒëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
log.info("í˜ì´ì§• ì •ë³´ - í˜„ì¬í˜ì´ì§€: {}, ì „ì²´í˜ì´ì§€: {}, ì „ì²´ê±´ìˆ˜: {}",
pageInfo.getCurrentPage(), pageInfo.getTotalPages(), pageInfo.getTotalCount());
â‹®----
log.error("ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
throw new RuntimeException("ê²Œì‹œê¸€ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public BoardDTO getBoardById(Long id) {
log.info("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ ì‹œì‘ - boardId: {}", id);
â‹®----
BoardDTO board = boardMapper.getBoardById(id);
â‹®----
throw new RuntimeException("í•´ë‹¹ ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + id);
â‹®----
log.info("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ ì™„ë£Œ - boardId: {}, title: {}", id, board.getTitle());
â‹®----
log.error("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
throw new RuntimeException("ê²Œì‹œê¸€ ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public BoardDTO getBoardByIdIncludeDeleted(Long id) {
log.info("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ (ì‚­ì œ í¬í•¨) ì‹œì‘ - boardId: {}", id);
â‹®----
BoardDTO board = boardMapper.getBoardByIdIncludeDeleted(id);
â‹®----
log.info("ğŸ“„ ê²Œì‹œê¸€ ì¡°íšŒ ì„±ê³µ (ì‚­ì œ í¬í•¨) - boardId: {}, title: {}", id, board.getTitle());
log.info("   ğŸ” DBì—ì„œ ì¡°íšŒëœ isDeleted ì›ë³¸ê°’: {}", board.getIsDeleted());
log.info("   ğŸ” isDeleted null ì²´í¬: {}", board.getIsDeleted() == null ? "NULL" : "NOT NULL");
if (board.getIsDeleted() != null) {
log.info("   ğŸ” isDeleted boolean ê°’: {} ({})", board.getIsDeleted(),
board.getIsDeleted() ? "ì‚­ì œë¨" : "ì •ìƒ");
â‹®----
log.warn("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²Œì‹œê¸€ ì¡°íšŒ ì‹œë„ (ì‚­ì œ í¬í•¨) - boardId: {}", id);
â‹®----
log.error("ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ (ì‚­ì œ í¬í•¨) ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
throw new RuntimeException("ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int insertBoard(BoardDTO boardDTO) {
log.info("ê²Œì‹œê¸€ ë“±ë¡ ì‹œì‘ - title: {}, memberId: {}", boardDTO.getTitle(), boardDTO.getMemberId());
â‹®----
validateBoardData(boardDTO);
if (boardDTO.getStatus() == null) {
boardDTO.setStatus("ACTIVE");
â‹®----
if (boardDTO.getPriority() == null) {
boardDTO.setPriority(0);
â‹®----
if (boardDTO.getReplyDepth() == null) {
boardDTO.setReplyDepth(0);
â‹®----
if (boardDTO.getReplyOrder() == null) {
boardDTO.setReplyOrder(0);
â‹®----
if (boardDTO.getIsNotice() == null) {
boardDTO.setIsNotice(false);
â‹®----
if (boardDTO.getIsSecret() == null) {
boardDTO.setIsSecret(false);
â‹®----
if (boardDTO.getIsActive() == null) {
boardDTO.setIsActive(true);
â‹®----
if (boardDTO.getIsDeleted() == null) {
boardDTO.setIsDeleted(false);
â‹®----
if (boardDTO.getIsPinned() == null) {
boardDTO.setIsPinned(false);
â‹®----
if (boardDTO.getCategory() != null && "NOTICE".equals(boardDTO.getCategory())) {
boardDTO.setIsNotice(true);
â‹®----
if (boardDTO.getBoardType() == null) {
String category = boardDTO.getCategory();
if ("NOTICE".equals(category)) {
boardDTO.setBoardType("NOTICE");
} else if ("INFO".equals(category)) {
boardDTO.setBoardType("INFO");
} else if ("QNA".equals(category)) {
boardDTO.setBoardType("QNA");
} else if ("FAQ".equals(category)) {
boardDTO.setBoardType("FAQ");
â‹®----
boardDTO.setBoardType("GENERAL");
â‹®----
log.info("ğŸ“ ë“±ë¡ ì „ ìƒíƒœ í™•ì¸ - isDeleted: {}, isActive: {}",
boardDTO.getIsDeleted(), boardDTO.getIsActive());
int result = boardMapper.insertBoard(boardDTO);
log.info("âœ… ê²Œì‹œê¸€ ë“±ë¡ ì™„ë£Œ - boardId: {}", boardDTO.getBoardId());
if (boardDTO.getBoardId() != null) {
BoardDTO savedBoard = boardMapper.getBoardByIdIncludeDeleted(boardDTO.getBoardId());
â‹®----
log.info("ğŸ” ë“±ë¡ ì§í›„ DB ìƒíƒœ í™•ì¸ - boardId: {}, isDeleted: {}, isActive: {}",
savedBoard.getBoardId(), savedBoard.getIsDeleted(), savedBoard.getIsActive());
â‹®----
log.warn("âš ï¸ ë“±ë¡ ì§í›„ ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. boardId: {}", boardDTO.getBoardId());
â‹®----
log.error("ê²Œì‹œê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
throw new RuntimeException("ê²Œì‹œê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int updateBoard(BoardDTO boardDTO) {
log.info("ê²Œì‹œê¸€ ìˆ˜ì • ì‹œì‘ - boardId: {}, title: {}", boardDTO.getBoardId(), boardDTO.getTitle());
â‹®----
BoardDTO existingBoard = boardMapper.getBoardByIdIncludeDeleted(boardDTO.getBoardId());
â‹®----
throw new RuntimeException("ìˆ˜ì •í•  ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + boardDTO.getBoardId());
â‹®----
boardDTO.setPriority(1);
â‹®----
int result = boardMapper.updateBoard(boardDTO);
log.info("ê²Œì‹œê¸€ ìˆ˜ì • ì™„ë£Œ - boardId: {}", boardDTO.getBoardId());
â‹®----
log.error("ê²Œì‹œê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", boardDTO.getBoardId(), e);
throw new RuntimeException("ê²Œì‹œê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public Map<String, Object> deleteBoard(Long id) {
log.info("ê²Œì‹œê¸€ ì‚­ì œ ì‹œì‘ - boardId: {}", id);
â‹®----
BoardDTO existingBoard = boardMapper.getBoardByIdIncludeDeleted(id);
â‹®----
log.warn("ì‚­ì œ ìš”ì²­ëœ ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: {}", id);
result.put("success", false);
result.put("code", "NOT_FOUND");
result.put("message", "ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
log.info("ğŸ” ê²Œì‹œê¸€ ìƒíƒœ í™•ì¸ - boardId: {}", id);
log.info("   - title: {}", existingBoard.getTitle());
log.info("   - isDeleted ê°’: {}", existingBoard.getIsDeleted());
log.info("   - isDeleted íƒ€ì…: {}", existingBoard.getIsDeleted() != null ? existingBoard.getIsDeleted().getClass().getSimpleName() : "null");
log.info("ğŸ” ì‚­ì œ ìƒíƒœ ìƒì„¸ ë¶„ì„:");
log.info("   - isDeleted ì›ë³¸ê°’: {}", existingBoard.getIsDeleted());
log.info("   - isDeleted == null: {}", existingBoard.getIsDeleted() == null);
log.info("   - isDeleted != null: {}", existingBoard.getIsDeleted() != null);
if (existingBoard.getIsDeleted() != null) {
log.info("   - isDeleted.booleanValue(): {}", existingBoard.getIsDeleted().booleanValue());
log.info("   - Boolean.TRUE.equals(isDeleted): {}", Boolean.TRUE.equals(existingBoard.getIsDeleted()));
â‹®----
boolean isAlreadyDeleted = existingBoard.getIsDeleted() != null && existingBoard.getIsDeleted();
log.info("ğŸ” ìµœì¢… ì‚­ì œ íŒì •: {}", isAlreadyDeleted);
â‹®----
log.info("âŒ ì´ë¯¸ ì‚­ì œëœ ê²Œì‹œê¸€ì…ë‹ˆë‹¤. boardId: {}, isDeleted: {}", id, existingBoard.getIsDeleted());
â‹®----
result.put("code", "ALREADY_DELETED");
result.put("message", "ì´ë¯¸ ì‚­ì œëœ ê²Œì‹œê¸€ì…ë‹ˆë‹¤.");
â‹®----
log.info("âœ… ì‚­ì œ ê°€ëŠ¥í•œ ê²Œì‹œê¸€ì…ë‹ˆë‹¤. boardId: {}, isDeleted: {}", id, existingBoard.getIsDeleted());
int deleteResult = boardMapper.deleteBoard(id);
â‹®----
log.info("ê²Œì‹œê¸€ ì‚­ì œ ì™„ë£Œ - boardId: {}, ì˜í–¥ë°›ì€ í–‰: {}", id, deleteResult);
result.put("success", true);
result.put("code", "DELETED");
result.put("message", "ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
log.warn("ê²Œì‹œê¸€ ì‚­ì œ ì‹¤íŒ¨ - boardId: {}, ì˜í–¥ë°›ì€ í–‰: {}", id, deleteResult);
â‹®----
result.put("code", "DELETE_FAILED");
result.put("message", "ê²Œì‹œê¸€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
â‹®----
log.error("ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
â‹®----
result.put("code", "ERROR");
result.put("message", "ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public void incrementViewCount(Long id) {
log.info("ì¡°íšŒìˆ˜ ì¦ê°€ ì‹œì‘ - boardId: {}", id);
â‹®----
boardMapper.incrementViewCount(id);
log.info("ì¡°íšŒìˆ˜ ì¦ê°€ ì™„ë£Œ - boardId: {}", id);
â‹®----
log.warn("ì¡°íšŒìˆ˜ ì¦ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {} (ë¬´ì‹œí•˜ê³  ì§„í–‰)", id, e);
â‹®----
public List<BoardDTO> getPopularBoards() {
log.info("ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹œì‘");
â‹®----
List<BoardDTO> popularBoards = boardMapper.getPopularBoards();
log.info("ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", popularBoards.size());
â‹®----
log.error("ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
throw new RuntimeException("ì¸ê¸° ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public List<BoardDTO> getBoardsByCategory(String category) {
log.info("ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - category: {}", category);
â‹®----
List<BoardDTO> boards = boardMapper.getBoardsByCategory(category);
log.info("ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - category: {}, ì¡°íšŒëœ ê±´ìˆ˜: {}", category, boards.size());
â‹®----
log.error("ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - category: {}", category, e);
throw new RuntimeException("ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public List<BoardDTO> getNoticeBoards() {
log.info("ê³µì§€ì‚¬í•­ ëª©ë¡ ì¡°íšŒ ì‹œì‘");
â‹®----
searchDTO.setCategory("NOTICE");
searchDTO.setSize(5);
searchDTO.setPage(1);
List<BoardDTO> notices = boardMapper.getBoardList(searchDTO);
log.info("ê³µì§€ì‚¬í•­ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", notices.size());
â‹®----
log.error("ê³µì§€ì‚¬í•­ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
throw new RuntimeException("ê³µì§€ì‚¬í•­ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
private void validateBoardData(BoardDTO boardDTO) {
if (boardDTO.getMemberId() == null) {
throw new IllegalArgumentException("ì‘ì„±ì IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
â‹®----
if (boardDTO.getTitle() == null || boardDTO.getTitle().trim().isEmpty()) {
throw new IllegalArgumentException("ê²Œì‹œê¸€ ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
â‹®----
if (boardDTO.getContent() == null || boardDTO.getContent().trim().isEmpty()) {
throw new IllegalArgumentException("ê²Œì‹œê¸€ ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
â‹®----
if (boardDTO.getTitle().length() > 200) {
throw new IllegalArgumentException("ê²Œì‹œê¸€ ì œëª©ì€ 200ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
public List<BoardDTO> getPopularBoardsByCategory(String category) {
log.info("ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - category: {}", category);
â‹®----
if (category == null || category.trim().isEmpty()) {
popularBoards = boardMapper.getPopularBoards();
â‹®----
popularBoards = boardMapper.getPopularBoardsByCategory(category);
â‹®----
log.info("ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", popularBoards.size());
â‹®----
log.error("ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
public BoardDTO getPreviousBoard(Long currentId) {
log.info("ì´ì „ ê²Œì‹œê¸€ ì¡°íšŒ ì‹œì‘ - currentId: {}", currentId);
â‹®----
BoardDTO prevBoard = boardMapper.getPreviousBoard(currentId);
log.info("ì´ì „ ê²Œì‹œê¸€ ì¡°íšŒ ì™„ë£Œ - prevBoardId: {}", prevBoard != null ? prevBoard.getBoardId() : "ì—†ìŒ");
â‹®----
log.error("ì´ì „ ê²Œì‹œê¸€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
public BoardDTO getNextBoard(Long currentId) {
log.info("ë‹¤ìŒ ê²Œì‹œê¸€ ì¡°íšŒ ì‹œì‘ - currentId: {}", currentId);
â‹®----
BoardDTO nextBoard = boardMapper.getNextBoard(currentId);
log.info("ë‹¤ìŒ ê²Œì‹œê¸€ ì¡°íšŒ ì™„ë£Œ - nextBoardId: {}", nextBoard != null ? nextBoard.getBoardId() : "ì—†ìŒ");
â‹®----
log.error("ë‹¤ìŒ ê²Œì‹œê¸€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
public void incrementLikeCount(Long id) {
log.info("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ì¦ê°€ ì‹œì‘ - boardId: {}", id);
â‹®----
boardMapper.incrementLikeCount(id);
log.info("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ì¦ê°€ ì™„ë£Œ - boardId: {}", id);
â‹®----
log.error("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ì¦ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
throw new RuntimeException("ì¶”ì²œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public void decrementLikeCount(Long id) {
log.info("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ê°ì†Œ ì‹œì‘ - boardId: {}", id);
â‹®----
boardMapper.decrementLikeCount(id);
log.info("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ê°ì†Œ ì™„ë£Œ - boardId: {}", id);
â‹®----
log.error("ê²Œì‹œê¸€ ì¶”ì²œìˆ˜ ê°ì†Œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
throw new RuntimeException("ì¶”ì²œ ì·¨ì†Œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int getBoardCount() {
log.info("ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ ì¡°íšŒ ì‹œì‘");
â‹®----
int count = boardMapper.getBoardCount(searchDTO);
log.info("ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ ì¡°íšŒ ì™„ë£Œ - ì´ {}ê±´", count);
â‹®----
log.error("ì „ì²´ ê²Œì‹œê¸€ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
`````

## File: src/main/resources/mapper/MemberMapper.xml
`````xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.MemberMapper">
    <resultMap id="memberResultMap" type="com.example.carelink.dto.MemberDTO">
        <id property="memberId" column="member_id"/>
        <result property="userId" column="user_id"/>
        <result property="password" column="password"/>
        <result property="name" column="name"/>
        <result property="email" column="email"/>
        <result property="phone" column="phone"/>
        <result property="role" column="role"/>
        <result property="address" column="address"/>
        <result property="detailAddress" column="detail_address"/>
        <result property="profileImage" column="profile_image"/>
        <result property="profileImageAltText" column="profile_image_alt_text"/>
        <result property="isActive" column="is_active"/>
        <result property="loginFailCount" column="login_fail_count"/>
        <result property="lastLoginAt" column="last_login_at"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
        <result property="isDeleted" column="is_deleted"/>
    </resultMap>
    <select id="findByUserId" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE user_id = #{userId}
          AND is_deleted = false
    </select>
    <select id="findById" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE member_id = #{memberId}
          AND is_deleted = false
    </select>
    <select id="findByEmail" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE email = #{email}
          AND is_deleted = false
    </select>
    <insert id="insertMember" parameterType="com.example.carelink.dto.MemberDTO" useGeneratedKeys="true" keyProperty="memberId">
        INSERT INTO member (
        member_id,
        user_id,
        password,
        name,
        email,
        phone,
        role,
        address,
        detail_address,
        profile_image,
        is_active,
        login_fail_count,
        last_login_at,
        is_deleted
        ) VALUES (
        #{memberId},
        #{userId, jdbcType=VARCHAR},
        #{password, jdbcType=VARCHAR},
        #{name, jdbcType=VARCHAR},
        #{email, jdbcType=VARCHAR},
        #{phone, jdbcType=VARCHAR},
        #{role, jdbcType=VARCHAR},
        #{address, jdbcType=VARCHAR},
        #{detailAddress, jdbcType=VARCHAR},
        #{profileImage, jdbcType=VARCHAR},
        #{isActive, jdbcType=BOOLEAN},
        #{loginFailCount, jdbcType=INTEGER},
        #{lastLoginAt, jdbcType=TIMESTAMP},
        #{isDeleted, jdbcType=BOOLEAN}
        )
    </insert>
    <select id="existsByUserId" resultType="boolean">
        SELECT COUNT(*) > 0 FROM member WHERE user_id = #{userId}
    </select>
    <select id="existsByEmail" resultType="boolean">
        SELECT COUNT(*) > 0 FROM member WHERE email = #{email}
    </select>
    <update id="updateMember" parameterType="MemberDTO">
        UPDATE member
        SET
            name = #{name},
            email = #{email},
            phone = #{phone},
            address = #{address},
            detail_address = #{detailAddress},
            profile_image = #{profileImage},
            profile_image_alt_text = #{profileImageAltText},
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>
    <update id="softDeleteMember">
        UPDATE member
        SET
            is_deleted = TRUE,
            is_active = FALSE,
            updated_at = NOW()
        WHERE user_id = #{userId}
    </update>
    <update id="anonymizeMember">
        UPDATE member
        SET
            name = 'íƒˆí‡´íšŒì›',
            email = NULL,
            phone = NULL,
            address = NULL,
            profile_image = NULL,
            password = 'DELETED',
            is_deleted = TRUE,
            is_active = FALSE,
            updated_at = NOW()
        WHERE user_id = #{userId}
    </update>
    <delete id="hardDeleteMember">
        DELETE FROM member WHERE user_id = #{userId}
    </delete>
    <update id="updatePassword" parameterType="MemberDTO">
        UPDATE member
        SET
            password = #{password},
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>
    <update id="updateLoginSuccess">
        UPDATE member
        SET login_fail_count = 0,
            last_login_at = NOW(),
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>
    <update id="updateLoginFail">
        UPDATE member
        SET login_fail_count = login_fail_count + 1,
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>
    <select id="getTotalCount" resultType="int">
        SELECT COUNT(*)
        FROM member
        WHERE is_deleted = FALSE
    </select>
    <select id="findMembersWithPaging" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE is_deleted = FALSE
        <if test="role != null and !role.isEmpty()">
            AND role = #{role}
        </if>
        ORDER BY created_at DESC
        LIMIT #{pageSize} OFFSET #{offset}
    </select>
    <select id="findMembersByRole" resultMap="memberResultMap">
        SELECT *
        FROM member
        WHERE is_deleted = FALSE
        <if test="role != null and role != ''">
            AND role = #{role}
        </if>
        ORDER BY created_at DESC
    </select>
    <update id="updateMemberStatus">
        UPDATE member
        SET is_active = #{isActive},
            updated_at = NOW()
        WHERE member_id = #{memberId}
    </update>
    <select id="getMemberCount" resultType="int">
        SELECT COUNT(*)
        FROM member
        WHERE is_deleted = false AND is_active = true
    </select>
    <select id="getFacilityMemberCount" resultType="int">
        SELECT COUNT(*)
        FROM member
        WHERE is_deleted = false
        AND role = 'FACILITY'
    </select>
    <select id="getUserMemberCount" resultType="int">
        SELECT COUNT(*)
        FROM member
        WHERE is_deleted = false
        AND role = 'USER'
    </select>
    <select id="getMemberCountByRole" resultType="int">
        SELECT COUNT(*)
        FROM member
        WHERE is_deleted = false
        <if test="role != null and role != ''">
            AND role = #{role}
        </if>
    </select>
</mapper>
`````

## File: src/main/resources/static/css/common.css
`````css
:root {
body {
body.pt-5 {
.navbar.fixed-top {
.min-vh-100 {
.card {
.card:hover {
.card-header {
.card-header.bg-primary {
.btn {
.btn:hover {
.form-control {
.form-control:focus {
.navbar-brand {
.navbar-nav .nav-link {
.navbar-nav .nav-link:hover {
.dropdown-menu {
.dropdown-item {
.dropdown-item:hover {
footer {
footer a {
footer a:hover {
.alert {
.alert-success {
.alert-danger {
.alert-warning {
.alert-info {
.table {
.table thead th {
.table-primary th {
.table tbody tr {
.table tbody tr:hover {
.list-group-item {
.list-group-item:hover {
.list-group-item-action:hover {
.pagination .page-link {
.pagination .page-item.active .page-link {
.pagination .page-link:hover {
.badge {
.badge.bg-danger {
.badge.bg-secondary {
.search-filters {
.stats-card {
.stats-card:hover {
.stats-card h3 {
.stats-card p {
.rating .fa-star {
.rating .fa-star.text-warning {
.rating .fa-star.text-muted {
.loading-spinner {
â‹®----
.input-group-text {
.file-upload-area {
.file-upload-area:hover {
.file-upload-area.dragover {
.tag {
.tag-secondary {
.tag-success {
.tag-warning {
â‹®----
.card-body {
â‹®----
.text-hover:hover {
.bg-gradient-primary {
.border-primary-soft {
.shadow-soft {
.fade-in {
â‹®----
#map {
.info-window {
.info-window h5 {
.info-window p {
.facility-item {
.facility-item:hover {
.facility-item.active {
.custom-control {
.custom-control:hover {
.rating-stars {
.rating-stars .star {
.rating-stars .star:hover,
.rating-group {
.rating-group label {
.detailed-rating .star {
#ratingText {
.rating-input-group {
â‹®----
.rating-stars .star:hover ~ .star {
.rating-stars:hover .star {
â‹®----
.rating-stars .star.active {
.modal {
.modal-content {
.close-modal {
.close-modal:hover,
.review-image {
.review-image:hover {
.rating-detail {
.rating-detail .fas.fa-star {
.rating-detail .far.fa-star {
.content-area {
â‹®----
.list-group-item-action .rating-stars {
`````

## File: src/main/java/com/example/carelink/dao/BoardMapper.java
`````java
public interface BoardMapper {
List<BoardDTO> getBoardList(BoardDTO searchDTO);
BoardDTO getBoardById(@Param("boardId") Long boardId);
BoardDTO getBoardByIdIncludeDeleted(@Param("boardId") Long boardId);
int insertBoard(BoardDTO boardDTO);
int updateBoard(BoardDTO boardDTO);
int deleteBoard(@Param("boardId") Long boardId);
void increaseViewCount(@Param("boardId") Long boardId);
void incrementViewCount(@Param("boardId") Long boardId);
List<BoardDTO> getPopularBoards();
List<BoardDTO> getBoardsByCategory(@Param("category") String category);
int getBoardCount(BoardDTO searchDTO);
List<BoardDTO> getPopularBoardsByCategory(@Param("category") String category);
void incrementLikeCount(@Param("boardId") Long boardId);
void decrementLikeCount(@Param("boardId") Long boardId);
BoardDTO getPreviousBoard(@Param("boardId") Long boardId);
BoardDTO getNextBoard(@Param("boardId") Long boardId);
List<BoardDTO> findBoardsByMemberId(@Param("memberId") Long memberId);
int deleteByMemberId(@Param("memberId") Long memberId);
`````

## File: src/main/java/com/example/carelink/dao/FacilityMapper.java
`````java
public interface FacilityMapper {
List<FacilityDTO> searchFacilities(FacilityDTO searchDTO);
FacilityDTO getFacilityById(@Param("facilityId") Long facilityId);
List<FacilityDTO> getAllFacilities();
List<FacilityDTO> getAllActiveFacilities();
int insertFacility(FacilityDTO facilityDTO);
int updateFacility(FacilityDTO facilityDTO);
int deleteFacility(@Param("facilityId") Long facilityId);
int countFacilitiesByRegion(@Param("region") String region);
int getFacilityCount();
int deleteByMemberId(@Param("memberId") Long memberId);
List<FacilityDTO> getFacilitiesByMemberId(@Param("memberId") Long memberId);
FacilityDTO getFacilityByMemberId(@Param("memberId") Long memberId);
int updateFacilityMainImage(@Param("facilityId") Long facilityId,
â‹®----
List<FacilityDTO> getFacilitiesByApprovalStatus(@Param("approvalStatus") String approvalStatus);
int updateFacilityApprovalStatus(@Param("facilityId") Long facilityId,
â‹®----
int countFacilitiesByStatus(@Param("approvalStatus") String approvalStatus);
`````

## File: src/main/java/com/example/carelink/dto/BoardDTO.java
`````java
public class BoardDTO extends BaseDTO {
â‹®----
public void setAuthor(String author) {
this.author = (this.memberName != null && !this.memberName.isEmpty()) ? this.memberName : author;
â‹®----
public String getAuthor() {
return (this.memberName != null && !this.memberName.isEmpty()) ? this.memberName : this.author;
â‹®----
public boolean getIsNew() {
if (this.getCreatedAt() == null) return false;
return this.getCreatedAt().isAfter(java.time.LocalDateTime.now().minusDays(1));
â‹®----
public boolean getIsHot() {
â‹®----
public boolean getHasComments() {
`````

## File: src/main/java/com/example/carelink/service/ReviewService.java
`````java
public class ReviewService {
â‹®----
public PageInfo<ReviewDTO> getReviewList(int page, String keyword) {
return getReviewList(page, keyword, null, null);
â‹®----
public PageInfo<ReviewDTO> getReviewList(int page, String keyword, Integer minRating) {
return getReviewList(page, keyword, minRating, null);
â‹®----
public PageInfo<ReviewDTO> getReviewList(int page, String keyword, Integer minRating, Long facilityId) {
log.info("ë¦¬ë·° ëª©ë¡ ì¡°íšŒ ì‹œì‘ - page: {}, keyword: {}, minRating: {}, facilityId: {}", page, keyword, minRating, facilityId);
â‹®----
ReviewDTO searchDTO = new ReviewDTO();
searchDTO.setPage(page);
searchDTO.setSize(DEFAULT_PAGE_SIZE);
if (keyword != null && !keyword.trim().isEmpty()) {
searchDTO.setSearchKeyword(keyword.trim());
â‹®----
searchDTO.setMinRating(minRating);
â‹®----
searchDTO.setFacilityId(facilityId);
â‹®----
int totalCount = reviewMapper.countReviewsWithSearch(searchDTO);
List<ReviewDTO> reviewList = reviewMapper.findReviewsWithSearch(searchDTO);
log.info("ë¦¬ë·° ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}, ì „ì²´: {}", reviewList.size(), totalCount);
â‹®----
log.error("ë¦¬ë·° ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
throw new RuntimeException("ë¦¬ë·° ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public ReviewDTO getReviewById(Long id) {
log.info("ë¦¬ë·° ìƒì„¸ ì¡°íšŒ ì‹œì‘ - reviewId: {}", id);
â‹®----
ReviewDTO review = reviewMapper.findReviewById(id);
â‹®----
throw new RuntimeException("í•´ë‹¹ ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + id);
â‹®----
reviewMapper.incrementViewCount(id);
log.info("ë¦¬ë·° ìƒì„¸ ì¡°íšŒ ì™„ë£Œ - reviewId: {}, title: {}", id, review.getTitle());
â‹®----
log.error("ë¦¬ë·° ìƒì„¸ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
throw new RuntimeException("ë¦¬ë·° ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int insertReview(ReviewDTO reviewDTO) {
log.info("ë¦¬ë·° ë“±ë¡ ì‹œì‘ - title: {}, facilityId: {}", reviewDTO.getTitle(), reviewDTO.getFacilityId());
â‹®----
validateReviewData(reviewDTO);
if (reviewDTO.getStatus() == null) {
reviewDTO.setStatus("ACTIVE");
â‹®----
if (reviewDTO.getReplyDepth() == null) {
reviewDTO.setReplyDepth(0);
â‹®----
reviewDTO.setVisible(true);
reviewDTO.setDeleted(false);
int result = reviewMapper.insertReview(reviewDTO);
log.info("ë¦¬ë·° ë“±ë¡ ì™„ë£Œ - reviewId: {}", reviewDTO.getReviewId());
â‹®----
log.error("ë¦¬ë·° ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
throw new RuntimeException("ë¦¬ë·° ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public List<ReviewDTO> getReviewsByFacilityId(Long facilityId) {
log.info("ì‹œì„¤ë³„ ë¦¬ë·° ì¡°íšŒ ì‹œì‘ - facilityId: {}", facilityId);
â‹®----
List<ReviewDTO> reviews = reviewMapper.findReviewsByFacilityId(facilityId);
log.info("ì‹œì„¤ë³„ ë¦¬ë·° ì¡°íšŒ ì™„ë£Œ - facilityId: {}, ì¡°íšŒëœ ê±´ìˆ˜: {}", facilityId, reviews.size());
â‹®----
log.error("ì‹œì„¤ë³„ ë¦¬ë·° ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
throw new RuntimeException("ì‹œì„¤ë³„ ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int deleteReview(Long id) {
log.info("ë¦¬ë·° ì‚­ì œ ì‹œì‘ - reviewId: {}", id);
â‹®----
ReviewDTO existingReview = reviewMapper.findReviewById(id);
â‹®----
throw new RuntimeException("ì‚­ì œí•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + id);
â‹®----
int result = reviewMapper.deleteReview(id);
log.info("ë¦¬ë·° ì‚­ì œ ì™„ë£Œ - reviewId: {}", id);
â‹®----
log.error("ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
throw new RuntimeException("ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public Double getAverageRating(Long facilityId) {
log.info("í‰ê·  í‰ì  ì¡°íšŒ ì‹œì‘ - facilityId: {}", facilityId);
â‹®----
Double averageRating = reviewMapper.getAverageRating(facilityId);
â‹®----
log.info("í‰ê·  í‰ì  ì¡°íšŒ ì™„ë£Œ - facilityId: {}, í‰ê·  í‰ì : {}", facilityId, averageRating);
â‹®----
log.error("í‰ê·  í‰ì  ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
â‹®----
public int likeReview(Long reviewId) {
log.info("ë¦¬ë·° ì¶”ì²œ ì‹œì‘ - reviewId: {}", reviewId);
â‹®----
int result = reviewMapper.incrementLikeCount(reviewId);
log.info("ë¦¬ë·° ì¶”ì²œ ì™„ë£Œ - reviewId: {}", reviewId);
â‹®----
log.error("ë¦¬ë·° ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", reviewId, e);
throw new RuntimeException("ë¦¬ë·° ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int dislikeReview(Long reviewId) {
log.info("ë¦¬ë·° ë¹„ì¶”ì²œ ì‹œì‘ - reviewId: {}", reviewId);
â‹®----
int result = reviewMapper.incrementDislikeCount(reviewId);
log.info("ë¦¬ë·° ë¹„ì¶”ì²œ ì™„ë£Œ - reviewId: {}", reviewId);
â‹®----
log.error("ë¦¬ë·° ë¹„ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", reviewId, e);
throw new RuntimeException("ë¦¬ë·° ë¹„ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public List<ReviewDTO> getReviewsByMemberId(Long memberId) {
log.info("íšŒì›ë³„ ë¦¬ë·° ì¡°íšŒ ì‹œì‘ - memberId: {}", memberId);
â‹®----
List<ReviewDTO> reviews = reviewMapper.findReviewsByMemberId(memberId);
log.info("íšŒì›ë³„ ë¦¬ë·° ì¡°íšŒ ì™„ë£Œ - memberId: {}, ì¡°íšŒëœ ê±´ìˆ˜: {}", memberId, reviews.size());
â‹®----
log.error("íšŒì›ë³„ ë¦¬ë·° ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - memberId: {}", memberId, e);
throw new RuntimeException("íšŒì›ë³„ ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
private void validateReviewData(ReviewDTO reviewDTO) {
if (reviewDTO.getFacilityId() == null) {
throw new IllegalArgumentException("ì‹œì„¤ IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
â‹®----
if (reviewDTO.getMemberId() == null) {
throw new IllegalArgumentException("íšŒì› IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
â‹®----
if (reviewDTO.getTitle() == null || reviewDTO.getTitle().trim().isEmpty()) {
throw new IllegalArgumentException("ë¦¬ë·° ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
â‹®----
if (reviewDTO.getContent() == null || reviewDTO.getContent().trim().isEmpty()) {
throw new IllegalArgumentException("ë¦¬ë·° ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
â‹®----
if (reviewDTO.getRating() == null || reviewDTO.getRating() < 1 || reviewDTO.getRating() > 5) {
throw new IllegalArgumentException("í‰ì ì€ 1~5 ì‚¬ì´ì˜ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
â‹®----
public int getReviewCount() {
â‹®----
return reviewMapper.getReviewCount();
â‹®----
log.error("ë¦¬ë·° ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
public int updateReview(ReviewDTO reviewDTO) {
log.info("ë¦¬ë·° ìˆ˜ì • ì‹œì‘ - reviewId: {}, title: {}", reviewDTO.getReviewId(), reviewDTO.getTitle());
â‹®----
ReviewDTO existingReview = reviewMapper.findReviewById(reviewDTO.getReviewId());
â‹®----
throw new RuntimeException("ìˆ˜ì •í•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + reviewDTO.getReviewId());
â‹®----
if (reviewDTO.getStatus() == null || reviewDTO.getStatus().isEmpty()) {
â‹®----
int result = reviewMapper.updateReview(reviewDTO);
log.info("ë¦¬ë·° ìˆ˜ì • ì™„ë£Œ - reviewId: {}", reviewDTO.getReviewId());
â‹®----
log.error("ë¦¬ë·° ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", reviewDTO.getReviewId(), e);
throw new RuntimeException("ë¦¬ë·° ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int incrementViewCount(Long id) {
log.info("ì¡°íšŒìˆ˜ ì¦ê°€ ì‹œì‘ - reviewId: {}", id);
â‹®----
int result = reviewMapper.incrementViewCount(id);
log.info("ì¡°íšŒìˆ˜ ì¦ê°€ ì™„ë£Œ - reviewId: {}", id);
â‹®----
log.error("ì¡°íšŒìˆ˜ ì¦ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
`````

## File: src/main/resources/mapper/boardMapper.xml
`````xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.BoardMapper">
    <resultMap id="boardResultMap" type="com.example.carelink.dto.BoardDTO">
        <id property="boardId" column="board_id"/>
        <result property="boardType" column="board_type"/>
        <result property="title" column="title"/>
        <result property="content" column="content"/>
        <result property="memberId" column="member_id"/>
        <result property="memberName" column="member_name"/>
        <result property="viewCount" column="view_count"/>
        <result property="likeCount" column="like_count"/>
        <result property="commentCount" column="comment_count"/>
        <result property="attachmentPath" column="attachment_path"/>
        <result property="attachmentName" column="attachment_name"/>
        <result property="attachmentSize" column="attachment_size"/>
        <result property="isNotice" column="is_notice"/>
        <result property="isSecret" column="is_secret"/>
        <result property="isDeleted" column="is_deleted"/>
        <result property="status" column="status"/>
        <result property="category" column="category"/>
        <result property="subCategory" column="sub_category"/>
        <result property="priority" column="priority"/>
        <result property="isPinned" column="is_pinned"/>
        <result property="parentBoardId" column="parent_board_id"/>
        <result property="replyDepth" column="reply_depth"/>
        <result property="replyOrder" column="reply_order"/>
        <result property="tags" column="tags"/>
        <result property="metaDescription" column="meta_description"/>
        <result property="metaKeywords" column="meta_keywords"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
    </resultMap>
    <select id="getBoardList" parameterType="com.example.carelink.dto.BoardDTO" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.board_type,
            b.title,
            b.content,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.is_notice,
            b.is_secret,
            COALESCE(b.is_active, true) as is_active,
            COALESCE(b.is_deleted, false) as is_deleted,
            b.status,
            b.category,
            b.sub_category,
            b.priority,
            b.is_pinned,
            b.tags,
            b.created_at,
            b.updated_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            <if test="searchKeyword != null and searchKeyword != ''">
                AND (b.title LIKE CONCAT('%', #{searchKeyword}, '%') OR b.content LIKE CONCAT('%', #{searchKeyword}, '%'))
            </if>
            <if test="category != null and category != ''">
                AND b.category = #{category}
            </if>
        ORDER BY
            b.is_notice DESC,
            b.created_at DESC
        LIMIT #{size} OFFSET #{offset}
    </select>
    <select id="getBoardCount" parameterType="com.example.carelink.dto.BoardDTO" resultType="int">
        SELECT COUNT(*)
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            <if test="searchKeyword != null and searchKeyword != ''">
                AND (b.title LIKE CONCAT('%', #{searchKeyword}, '%') OR b.content LIKE CONCAT('%', #{searchKeyword}, '%'))
            </if>
            <if test="category != null and category != ''">
                AND b.category = #{category}
            </if>
    </select>
    <select id="getBoardById" parameterType="long" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.board_type,
            b.title,
            b.content,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.attachment_path,
            b.attachment_name,
            b.attachment_size,
            b.is_notice,
            b.is_secret,
            COALESCE(b.is_active, true) as is_active,
            COALESCE(b.is_deleted, false) as is_deleted,
            b.status,
            b.category,
            b.sub_category,
            b.priority,
            b.is_pinned,
            b.parent_board_id,
            b.reply_depth,
            b.reply_order,
            b.tags,
            b.meta_description,
            b.meta_keywords,
            b.created_at,
            b.updated_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            b.board_id = #{boardId}
            AND COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
    </select>
    <select id="getBoardByIdIncludeDeleted" parameterType="long" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.board_type,
            b.title,
            b.content,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.attachment_path,
            b.attachment_name,
            b.attachment_size,
            b.is_notice,
            b.is_secret,
            COALESCE(b.is_active, true) as is_active,
            COALESCE(b.is_deleted, false) as is_deleted,
            b.status,
            b.category,
            b.sub_category,
            b.priority,
            b.is_pinned,
            b.parent_board_id,
            b.reply_depth,
            b.reply_order,
            b.tags,
            b.meta_description,
            b.meta_keywords,
            b.created_at,
            b.updated_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            b.board_id = #{boardId}
    </select>
    <insert id="insertBoard" parameterType="com.example.carelink.dto.BoardDTO" useGeneratedKeys="true" keyProperty="boardId">
        INSERT INTO board (
            board_type,
            title,
            content,
            member_id,
            attachment_path,
            attachment_name,
            attachment_size,
            is_notice,
            is_secret,
            is_active,
            is_deleted,
            category,
            sub_category,
            priority,
            is_pinned,
            parent_board_id,
            reply_depth,
            reply_order,
            tags,
            meta_description,
            meta_keywords,
            created_at,
            updated_at
        ) VALUES (
            #{boardType},
            #{title},
            #{content},
            #{memberId},
            #{attachmentPath},
            #{attachmentName},
            #{attachmentSize},
            #{isNotice},
            #{isSecret},
            #{isActive},
            #{isDeleted},
            #{category},
            #{subCategory},
            COALESCE(#{priority}, 1),
            #{isPinned},
            #{parentBoardId},
            #{replyDepth},
            #{replyOrder},
            #{tags},
            #{metaDescription},
            #{metaKeywords},
            NOW(),
            NOW()
        )
    </insert>
    <update id="updateBoard" parameterType="com.example.carelink.dto.BoardDTO">
        UPDATE board
        SET
            board_type = #{boardType},
            title = #{title},
            content = #{content},
            attachment_path = #{attachmentPath},
            attachment_name = #{attachmentName},
            attachment_size = #{attachmentSize},
            is_notice = #{isNotice},
            is_secret = #{isSecret},
            category = #{category},
            sub_category = #{subCategory},
            priority = COALESCE(#{priority}, 1),
            is_pinned = #{isPinned},
            tags = #{tags},
            meta_description = #{metaDescription},
            meta_keywords = #{metaKeywords},
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
    </update>
    <update id="deleteBoard" parameterType="long">
        UPDATE board
        SET
            is_deleted = true,
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_deleted, false) = false
    </update>
    <update id="incrementViewCount" parameterType="long">
        UPDATE board
        SET
            view_count = view_count + 1,
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_active, true) = true
            AND COALESCE(is_deleted, false) = false
    </update>
    <update id="increaseViewCount" parameterType="long">
        UPDATE board
        SET
            view_count = view_count + 1,
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_active, true) = true
            AND COALESCE(is_deleted, false) = false
    </update>
    <select id="getPopularBoards" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.category,
            b.is_notice,
            b.is_pinned,
            b.created_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.created_at >= DATE_SUB(NOW(), INTERVAL 7 DAY)
        ORDER BY
            (b.view_count * 0.4 + b.like_count * 0.4 + b.comment_count * 0.2) DESC
        LIMIT 5
    </select>
    <select id="getBoardsByCategory" parameterType="string" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.category,
            b.is_notice,
            b.is_pinned,
            b.created_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.category = #{category}
        ORDER BY
            b.created_at DESC
        LIMIT 10
    </select>
    <select id="getPopularBoardsByCategory" parameterType="string" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title,
            b.member_id,
            m.name as member_name,
            b.view_count,
            b.like_count,
            b.comment_count,
            b.category,
            b.is_notice,
            b.is_pinned,
            b.created_at
        FROM
            board b
            LEFT JOIN member m ON b.member_id = m.member_id
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.created_at >= DATE_SUB(NOW(), INTERVAL 7 DAY)
            <if test="category != null and category != ''">
                AND b.category = #{category}
            </if>
        ORDER BY
            (b.view_count * 0.4 + b.like_count * 0.4 + b.comment_count * 0.2) DESC
        LIMIT 5
    </select>
    <select id="getPreviousBoard" parameterType="long" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title
        FROM
            board b
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.board_id &lt; #{boardId}
        ORDER BY
            b.board_id DESC
        LIMIT 1
    </select>
    <select id="getNextBoard" parameterType="long" resultType="com.example.carelink.dto.BoardDTO">
        SELECT
            b.board_id,
            b.title
        FROM
            board b
        WHERE
            COALESCE(b.is_active, true) = true
            AND COALESCE(b.is_deleted, false) = false
            AND b.board_id &gt; #{boardId}
        ORDER BY
            b.board_id ASC
        LIMIT 1
    </select>
    <update id="incrementLikeCount" parameterType="long">
        UPDATE board
        SET
            like_count = like_count + 1,
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_active, true) = true
            AND COALESCE(is_deleted, false) = false
    </update>
    <update id="decrementLikeCount" parameterType="long">
        UPDATE board
        SET
            like_count = GREATEST(0, like_count - 1),
            updated_at = NOW()
        WHERE
            board_id = #{boardId}
            AND COALESCE(is_active, true) = true
            AND COALESCE(is_deleted, false) = false
    </update>
    <select id="findBoardsByMemberId" resultMap="boardResultMap">
        SELECT b.*, m.name as author_name
        FROM board b
        LEFT JOIN member m ON b.member_id = m.member_id
        WHERE b.member_id = #{memberId}
          AND b.is_deleted = false
        ORDER BY b.created_at DESC
    </select>
    <delete id="deleteByMemberId" parameterType="long">
        DELETE FROM board WHERE member_id = #{memberId}
    </delete>
</mapper>
`````

## File: src/main/java/com/example/carelink/dto/FacilityDTO.java
`````java
public class FacilityDTO extends BaseDTO {
â‹®----
public boolean isNormalStatus() {
return "ì •ìƒ".equals(status);
â‹®----
public boolean isDeletedStatus() {
return "ì‚­ì œë¨".equals(status);
â‹®----
public boolean isPendingStatus() {
return "ìŠ¹ì¸ëŒ€ê¸°".equals(status);
â‹®----
public String getStatusMessage() {
if (isDeletedStatus()) {
â‹®----
} else if (isPendingStatus()) {
`````

## File: src/main/java/com/example/carelink/dto/MemberDTO.java
`````java
public class MemberDTO extends BaseDTO {
`````

## File: src/main/java/com/example/carelink/service/JobService.java
`````java
public class JobService {
â‹®----
public List<JobDTO> getJobList(int currentPage, String keyword, String jobType) {
log.info("êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - page: {}, keyword: {}, jobType: {}", currentPage, keyword, jobType);
â‹®----
JobDTO searchDTO = new JobDTO();
â‹®----
searchDTO.setSize(pageSize);
searchDTO.setPage((currentPage - 1) * pageSize);
if (keyword != null && !keyword.trim().isEmpty()) {
searchDTO.setSearchKeyword(keyword.trim());
â‹®----
if (jobType != null && !jobType.trim().isEmpty()) {
searchDTO.setJobType(jobType.trim());
â‹®----
List<JobDTO> jobList = jobMapper.getJobList(searchDTO);
log.info("êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", jobList.size());
â‹®----
log.error("êµ¬ì¸êµ¬ì§ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
public JobDTO getJobById(Long id) {
log.info("êµ¬ì¸êµ¬ì§ ìƒì„¸ ì¡°íšŒ ì‹œì‘ - jobId: {}", id);
â‹®----
JobDTO job = jobMapper.findJobById(id);
â‹®----
log.warn("êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ - jobId: {}", id);
throw new RuntimeException("í•´ë‹¹ êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + id);
â‹®----
log.info("êµ¬ì¸êµ¬ì§ ìƒì„¸ ì¡°íšŒ ì™„ë£Œ - jobId: {}, title: {}", id, job.getTitle());
â‹®----
log.error("êµ¬ì¸êµ¬ì§ ìƒì„¸ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - jobId: {}", id, e);
JobDTO job = new JobDTO();
job.setJobId(id);
job.setTitle("êµ¬ì¸êµ¬ì§ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
job.setContent("ì‹œìŠ¤í…œ ì˜¤ë¥˜ë¡œ ì¸í•´ ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
job.setJobType("RECRUIT");
job.setWorkType("FULL_TIME");
job.setPosition("ë¯¸ì •");
job.setSalaryMin(java.math.BigDecimal.ZERO);
job.setSalaryMax(java.math.BigDecimal.ZERO);
job.setWorkLocation("ë¯¸ì •");
job.setStatus("ACTIVE");
job.setMemberId(1L);
job.setViewCount(0);
â‹®----
public int insertJob(JobDTO jobDTO) {
log.info("êµ¬ì¸êµ¬ì§ ë“±ë¡ ì‹œì‘ - title: {}, jobType: {}", jobDTO.getTitle(), jobDTO.getJobType());
â‹®----
validateJobData(jobDTO);
cleanAndValidateJobData(jobDTO);
if (jobDTO.getStatus() == null) {
jobDTO.setStatus("ACTIVE");
â‹®----
if (jobDTO.getPriority() == null) {
jobDTO.setPriority(0);
â‹®----
int result = jobMapper.insertJob(jobDTO);
log.info("êµ¬ì¸êµ¬ì§ ë“±ë¡ ì™„ë£Œ - jobId: {}", jobDTO.getJobId());
â‹®----
log.error("êµ¬ì¸êµ¬ì§ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
throw new RuntimeException("êµ¬ì¸êµ¬ì§ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int updateJob(JobDTO jobDTO) {
log.info("êµ¬ì¸êµ¬ì§ ìˆ˜ì • ì‹œì‘ - jobId: {}, title: {}", jobDTO.getJobId(), jobDTO.getTitle());
â‹®----
JobDTO existingJob = jobMapper.findJobById(jobDTO.getJobId());
â‹®----
throw new RuntimeException("ìˆ˜ì •í•  êµ¬ì¸êµ¬ì§ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + jobDTO.getJobId());
â‹®----
log.warn("priority ê°’ì´ nullì´ì–´ì„œ 0ìœ¼ë¡œ ìë™ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. jobId: {}", jobDTO.getJobId());
â‹®----
int result = jobMapper.updateJob(jobDTO);
log.info("êµ¬ì¸êµ¬ì§ ìˆ˜ì • ì™„ë£Œ - jobId: {}", jobDTO.getJobId());
â‹®----
log.error("êµ¬ì¸êµ¬ì§ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - jobId: {}", jobDTO.getJobId(), e);
throw new RuntimeException("êµ¬ì¸êµ¬ì§ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int deleteJob(Long id) {
log.info("êµ¬ì¸êµ¬ì§ ì‚­ì œ ì‹œì‘ - jobId: {}", id);
â‹®----
int result = jobMapper.deleteJob(id);
log.info("êµ¬ì¸êµ¬ì§ ì‚­ì œ ì™„ë£Œ - jobId: {}", id);
â‹®----
log.error("êµ¬ì¸êµ¬ì§ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - jobId: {}", id, e);
throw new RuntimeException("êµ¬ì¸êµ¬ì§ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public List<JobDTO> getPopularJobs() {
â‹®----
return jobMapper.getPopularJobs();
â‹®----
log.error("ì¸ê¸° êµ¬ì¸êµ¬ì§ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
public int getJobCount() {
â‹®----
return jobMapper.getJobCount();
â‹®----
log.error("êµ¬ì¸êµ¬ì§ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
private void validateJobData(JobDTO jobDTO) {
if (jobDTO.getTitle() == null || jobDTO.getTitle().trim().isEmpty()) {
throw new IllegalArgumentException("ì œëª©ì€ í•„ìˆ˜ ì…ë ¥ê°’ì…ë‹ˆë‹¤.");
â‹®----
if (jobDTO.getContent() == null || jobDTO.getContent().trim().isEmpty()) {
throw new IllegalArgumentException("ë‚´ìš©ì€ í•„ìˆ˜ ì…ë ¥ê°’ì…ë‹ˆë‹¤.");
â‹®----
if (jobDTO.getJobType() == null || jobDTO.getJobType().trim().isEmpty()) {
throw new IllegalArgumentException("êµ¬ì¸êµ¬ì§ ìœ í˜•ì€ í•„ìˆ˜ ì…ë ¥ê°’ì…ë‹ˆë‹¤.");
â‹®----
if (jobDTO.getMemberId() == null) {
throw new IllegalArgumentException("ì‘ì„±ì ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.");
â‹®----
private void cleanAndValidateJobData(JobDTO jobDTO) {
log.info("ë°ì´í„° ì •ë¦¬ ì‹œì‘ - jobId: {}", jobDTO.getJobId());
if (jobDTO.getTitle() != null) {
jobDTO.setTitle(jobDTO.getTitle().trim());
â‹®----
if (jobDTO.getContent() != null) {
jobDTO.setContent(jobDTO.getContent().trim());
â‹®----
if (jobDTO.getSalaryDescription() != null && !jobDTO.getSalaryDescription().trim().isEmpty()) {
String cleanSalaryDesc = cleanDuplicateValues(jobDTO.getSalaryDescription());
jobDTO.setSalaryDescription(cleanSalaryDesc);
log.debug("ê¸‰ì—¬ ì„¤ëª… ì •ë¦¬ë¨: {} -> {}", jobDTO.getSalaryDescription(), cleanSalaryDesc);
â‹®----
if (jobDTO.getWorkHours() != null && !jobDTO.getWorkHours().trim().isEmpty()) {
String cleanWorkHours = cleanDuplicateValues(jobDTO.getWorkHours());
jobDTO.setWorkHours(cleanWorkHours);
log.debug("ê·¼ë¬´ì‹œê°„ ì •ë¦¬ë¨: {} -> {}", jobDTO.getWorkHours(), cleanWorkHours);
â‹®----
if (jobDTO.getFacilityName() != null) {
jobDTO.setFacilityName(jobDTO.getFacilityName().trim());
â‹®----
if (jobDTO.getWorkLocation() != null) {
jobDTO.setWorkLocation(jobDTO.getWorkLocation().trim());
â‹®----
if (jobDTO.getContactPhone() != null) {
jobDTO.setContactPhone(jobDTO.getContactPhone().trim());
â‹®----
if (jobDTO.getQualifications() != null && !jobDTO.getQualifications().trim().isEmpty()) {
String cleanQualifications = cleanDuplicateValues(jobDTO.getQualifications());
jobDTO.setQualifications(cleanQualifications);
â‹®----
log.info("ë°ì´í„° ì •ë¦¬ ì™„ë£Œ - jobId: {}", jobDTO.getJobId());
â‹®----
private String cleanDuplicateValues(String input) {
if (input == null || input.trim().isEmpty()) {
â‹®----
String[] values = input.split(",");
return java.util.Arrays.stream(values)
.map(String::trim)
.filter(s -> !s.isEmpty())
.distinct()
.collect(java.util.stream.Collectors.joining(", "));
â‹®----
log.warn("ê°’ ì •ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ, ì›ë³¸ ê°’ ë°˜í™˜: {}", input, e);
return input.trim();
â‹®----
public void applyForJob(Long jobId, Long applicantMemberId) {
log.info("êµ¬ì¸ê³µê³  ì§€ì› ë¡œì§ ì‹œì‘ - jobId: {}, applicantMemberId: {}", jobId, applicantMemberId);
JobDTO jobDTO = jobMapper.findJobById(jobId);
â‹®----
log.warn("ì§€ì›í•  êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ - jobId: {}", jobId);
throw new IllegalArgumentException("ì§€ì›í•  êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
int existingApplications = jobApplicationMapper.countByJobIdAndApplicantMemberId(jobId, applicantMemberId);
â‹®----
log.warn("ì´ë¯¸ ì§€ì›í•œ êµ¬ì¸ê³µê³ ì…ë‹ˆë‹¤ - jobId: {}, applicantMemberId: {}", jobId, applicantMemberId);
throw new IllegalArgumentException("ì´ë¯¸ ì§€ì›í•œ êµ¬ì¸ê³µê³ ì…ë‹ˆë‹¤.");
â‹®----
JobApplicationDTO jobApplication = new JobApplicationDTO();
jobApplication.setJobId(jobId);
jobApplication.setApplicantMemberId(applicantMemberId);
jobApplication.setApplicationDate(LocalDateTime.now());
jobApplication.setStatus("PENDING");
jobApplicationMapper.insertJobApplication(jobApplication);
jobMapper.incrementApplyCount(jobId);
log.info("êµ¬ì¸ê³µê³  ì§€ì› ë¡œì§ ì™„ë£Œ - jobId: {}, applicantMemberId: {}, ìƒì„±ëœ ì§€ì› ID: {}",
jobId, applicantMemberId, jobApplication.getId());
`````

## File: src/main/java/com/example/carelink/controller/BoardController.java
`````java
public class BoardController {
â‹®----
private final Map<String, Map<String, String>> boardTypeInfo = Map.of(
"notice", Map.of("title", "ê³µì§€ì‚¬í•­", "description", "ì¤‘ìš”í•œ ê³µì§€ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”", "category", "NOTICE"),
"info", Map.of("title", "ì •ë³´ê³µìœ ", "description", "ìœ ìš©í•œ ì •ë³´ë¥¼ ê³µìœ í•˜ê³  í•¨ê»˜ ë‚˜ëˆ„ì„¸ìš”", "category", "INFO"),
"qna", Map.of("title", "Q&A", "description", "ê¶ê¸ˆí•œ ì ì„ ì§ˆë¬¸í•˜ê³  ë‹µë³€ì„ ë°›ì•„ë³´ì„¸ìš”", "category", "QNA"),
"faq", Map.of("title", "ìì£¼ë¬»ëŠ”ì§ˆë¬¸", "description", "ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ê³¼ ë‹µë³€ì„ í™•ì¸í•˜ì„¸ìš”", "category", "FAQ"),
"all", Map.of("title", "ì „ì²´ ê²Œì‹œíŒ", "description", "ëª¨ë“  ê²Œì‹œíŒì˜ ê¸€ì„ í•œë²ˆì— í™•ì¸í•˜ì„¸ìš”", "category", "")
â‹®----
/**
     * ê²Œì‹œíŒ ëª©ë¡ í˜ì´ì§€ (íƒ€ì…ë³„ êµ¬ë¶„ ì§€ì›)
     */
â‹®----
public String listPage(Model model,
â‹®----
response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
response.setHeader("Pragma", "no-cache");
response.setDateHeader("Expires", 0);
Map<String, String> currentBoardInfo = boardTypeInfo.getOrDefault(type, boardTypeInfo.get("all"));
String actualCategory = currentBoardInfo.get("category");
if (category.isEmpty() && !actualCategory.isEmpty()) {
â‹®----
PageInfo<BoardDTO> pageInfo = boardService.getBoardList(page, keyword, category);
List<BoardDTO> popularBoards = boardService.getPopularBoardsByCategory(category);
model.addAttribute("pageInfo", pageInfo);
model.addAttribute("boardList", pageInfo.getList());
model.addAttribute("popularBoards", popularBoards != null ? popularBoards : List.of());
model.addAttribute("keyword", keyword != null ? keyword : "");
model.addAttribute("category", category != null ? category : "");
model.addAttribute("type", type);
model.addAttribute("currentPage", page);
â‹®----
model.addAttribute("pageInfo", new PageInfo<>(List.of(), page, 10, 0));
model.addAttribute("boardList", List.of());
model.addAttribute("popularBoards", List.of());
â‹®----
model.addAttribute("error", "ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
model.addAttribute("boardTitle", currentBoardInfo.get("title"));
model.addAttribute("boardDescription", currentBoardInfo.get("description"));
model.addAttribute("pageTitle", currentBoardInfo.get("title"));
if ("faq".equals(type)) {
â‹®----
} else if ("notice".equals(type)) {
â‹®----
} else if ("qna".equals(type)) {
â‹®----
public String writePage(Model model,
â‹®----
Long memberId = (Long) session.getAttribute("memberId");
â‹®----
redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
â‹®----
MemberDTO loginMember = (MemberDTO) session.getAttribute("loginMember");
if (("notice".equals(type) || "faq".equals(type)) &&
(loginMember == null || !"ADMIN".equals(loginMember.getRole()))) {
redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ê²Œì‹œíŒì— ê¸€ì„ ì‘ì„±í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
if ("qna".equals(type) && "ANSWER".equals(qaType) &&
â‹®----
redirectAttributes.addFlashAttribute("error", "ë‹µë³€í•˜ê¸°ëŠ” ê´€ë¦¬ìë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
â‹®----
BoardDTO boardDTO = new BoardDTO();
boardDTO.setMemberId(memberId);
â‹®----
String defaultCategory = currentBoardInfo.get("category");
if (!defaultCategory.isEmpty()) {
boardDTO.setCategory(defaultCategory);
â‹®----
if ("qna".equals(type) && qaType != null) {
boardDTO.setQaType(qaType);
if ("QUESTION".equals(qaType)) {
boardDTO.setIsAnswered(false);
boardDTO.setAnswerCount(0);
â‹®----
model.addAttribute("boardDTO", boardDTO);
â‹®----
model.addAttribute("qaType", qaType);
â‹®----
String pageTitle = currentBoardInfo.get("title");
â‹®----
pageTitle += ("QUESTION".equals(qaType) ? " - ì§ˆë¬¸í•˜ê¸°" : " - ë‹µë³€í•˜ê¸°");
â‹®----
model.addAttribute("pageTitle", pageTitle);
â‹®----
} else if ("info".equals(type)) {
â‹®----
public String writeBoard(@ModelAttribute BoardDTO boardDTO,
â‹®----
} else if ("ANSWER".equals(qaType)) {
boardDTO.setIsAnswered(null);
boardDTO.setAnswerCount(null);
â‹®----
if (boardDTO.getIsNotice() == null) {
boardDTO.setIsNotice(false);
â‹®----
if (boardDTO.getIsSecret() == null) {
boardDTO.setIsSecret(false);
â‹®----
if (boardDTO.getIsActive() == null) {
boardDTO.setIsActive(true);
â‹®----
if (boardDTO.getIsDeleted() == null) {
boardDTO.setIsDeleted(false);
â‹®----
boardService.insertBoard(boardDTO);
if (imageFiles != null && !imageFiles.isEmpty()) {
imageFiles.removeIf(file -> file.isEmpty());
if (!imageFiles.isEmpty()) {
â‹®----
List<BoardImageDTO> uploadedImages = boardImageService.uploadImages(
boardDTO.getBoardId(), imageFiles, imageAltTexts);
log.info("ê²Œì‹œê¸€ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì„±ê³µ: boardId={}, imageCount={}",
boardDTO.getBoardId(), uploadedImages.size());
â‹®----
log.error("ê²Œì‹œê¸€ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨: boardId={}", boardDTO.getBoardId(), e);
â‹®----
successMessage = "QUESTION".equals(qaType) ? "ì§ˆë¬¸ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤." : "ë‹µë³€ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.";
â‹®----
redirectAttributes.addFlashAttribute("message", successMessage);
if ("all".equals(type)) {
â‹®----
redirectAttributes.addFlashAttribute("error", "ê²Œì‹œê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public String detailPage(@PathVariable Long id,
â‹®----
BoardDTO board = boardService.getBoardById(id);
boardService.incrementViewCount(id);
BoardDTO prevBoard = boardService.getPreviousBoard(id);
BoardDTO nextBoard = boardService.getNextBoard(id);
List<BoardImageDTO> boardImages = boardImageService.getImagesByBoardId(id);
model.addAttribute("board", board);
model.addAttribute("boardImages", boardImages);
model.addAttribute("prevBoard", prevBoard);
model.addAttribute("nextBoard", nextBoard);
â‹®----
model.addAttribute("page", page);
model.addAttribute("pageTitle", board.getTitle());
â‹®----
log.error("ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸° ì˜¤ë¥˜ - boardId: {}", id, e);
redirectAttributes.addFlashAttribute("error", "ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public String editPage(@PathVariable Long id,
â‹®----
BoardDTO board = boardService.getBoardByIdIncludeDeleted(id);
â‹®----
redirectAttributes.addFlashAttribute("error", "ìˆ˜ì •í•  ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
if (board.getIsDeleted() != null && board.getIsDeleted()) {
redirectAttributes.addFlashAttribute("error", "ì‚­ì œëœ ê²Œì‹œê¸€ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
log.info("ìˆ˜ì • í˜ì´ì§€ ì ‘ê·¼ - ê²Œì‹œê¸€ ID: {}, ì‘ì„±ì ID: {}, ìš”ì²­ì ID: {}", id, board.getMemberId(), memberId);
â‹®----
boolean isAdmin = loginMember != null && "ADMIN".equals(loginMember.getRole());
boolean isAuthor = board.getMemberId().equals(memberId);
if (("NOTICE".equals(board.getCategory()) || "FAQ".equals(board.getCategory())) && !isAdmin) {
log.warn("ê¶Œí•œ ì—†ëŠ” ìˆ˜ì • ì‹œë„ - ê³µì§€ì‚¬í•­/FAQ ìˆ˜ì • ê¶Œí•œ ì—†ìŒ. ìš”ì²­ì: {}", memberId);
redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
log.warn("ê¶Œí•œ ì—†ëŠ” ìˆ˜ì • ì‹œë„ - ê²Œì‹œê¸€ ì‘ì„±ì: {}, ìš”ì²­ì: {}", board.getMemberId(), memberId);
redirectAttributes.addFlashAttribute("error", "ì‘ì„±ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
â‹®----
Map<String, String> currentBoardInfo = boardTypeInfo.getOrDefault(type != null ? type : "all", boardTypeInfo.get("all"));
model.addAttribute("boardDTO", board);
model.addAttribute("type", type != null ? type : "all");
â‹®----
model.addAttribute("pageTitle", currentBoardInfo.get("title") + " ìˆ˜ì •");
â‹®----
log.error("ìˆ˜ì • í˜ì´ì§€ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
redirectAttributes.addFlashAttribute("error", "ìˆ˜ì • í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public String editBoard(@PathVariable Long id,
â‹®----
BoardDTO existingBoard = boardService.getBoardByIdIncludeDeleted(id);
â‹®----
return getRedirectUrl(type);
â‹®----
if (existingBoard.getIsDeleted() != null && existingBoard.getIsDeleted()) {
â‹®----
log.info("ìˆ˜ì • ìš”ì²­ - ê²Œì‹œê¸€ ID: {}, ì‘ì„±ì ID: {}, ìš”ì²­ì ID: {}", id, existingBoard.getMemberId(), memberId);
â‹®----
boolean isAuthor = existingBoard.getMemberId().equals(memberId);
if (("NOTICE".equals(existingBoard.getCategory()) || "FAQ".equals(existingBoard.getCategory())) && !isAdmin) {
â‹®----
log.warn("ê¶Œí•œ ì—†ëŠ” ìˆ˜ì • ì‹œë„ - ê²Œì‹œê¸€ ì‘ì„±ì: {}, ìš”ì²­ì: {}", existingBoard.getMemberId(), memberId);
â‹®----
boardDTO.setBoardId(id);
â‹®----
boardService.updateBoard(boardDTO);
log.info("ìˆ˜ì • ì™„ë£Œ - ê²Œì‹œê¸€ ID: {}", id);
redirectAttributes.addFlashAttribute("message", "âœ… ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
log.error("ìˆ˜ì • ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
redirectAttributes.addFlashAttribute("error", "âŒ ê²Œì‹œê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public String deleteBoard(@PathVariable Long id,
â‹®----
log.info("ğŸš€ ì‚­ì œ ìš”ì²­ ì‹œì‘ - ê²Œì‹œê¸€ ID: {}", id);
â‹®----
log.info("ğŸ” ì„¸ì…˜ í™•ì¸ - memberId: {}", memberId);
â‹®----
log.warn("âŒ ë¡œê·¸ì¸ ì•ˆë¨ - ì‚­ì œ ì‹¤íŒ¨");
â‹®----
log.info("ğŸ” ê²Œì‹œê¸€ ì¡°íšŒ ê²°ê³¼ - board: {}", board != null ? "ì¡´ì¬í•¨" : "ì—†ìŒ");
â‹®----
log.warn("âŒ ê²Œì‹œê¸€ ì—†ìŒ - ì‚­ì œ ì‹¤íŒ¨");
redirectAttributes.addFlashAttribute("error", "ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
log.info("ğŸ” ê¶Œí•œ ì²´í¬ - ê²Œì‹œê¸€ ì‘ì„±ì: {}, ìš”ì²­ì: {}", board.getMemberId(), memberId);
log.info("ì‚­ì œ ìš”ì²­ - ê²Œì‹œê¸€ ID: {}, ì‘ì„±ì ID: {}, ìš”ì²­ì ID: {}", id, board.getMemberId(), memberId);
â‹®----
log.warn("âŒ ê¶Œí•œ ì—†ëŠ” ì‚­ì œ ì‹œë„ - ê³µì§€ì‚¬í•­/FAQ ì‚­ì œ ê¶Œí•œ ì—†ìŒ. ìš”ì²­ì: {}", memberId);
redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ê²Œì‹œê¸€ì„ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
log.warn("âŒ ê¶Œí•œ ì—†ëŠ” ì‚­ì œ ì‹œë„ - ê²Œì‹œê¸€ ì‘ì„±ì: {}, ìš”ì²­ì: {}", board.getMemberId(), memberId);
redirectAttributes.addFlashAttribute("error", "ì‘ì„±ìë§Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
â‹®----
log.info("âœ… ê¶Œí•œ ì²´í¬ í†µê³¼ - ì‚­ì œ ì§„í–‰");
Map<String, Object> deleteResult = boardService.deleteBoard(id);
Boolean success = (Boolean) deleteResult.get("success");
String message = (String) deleteResult.get("message");
log.info("ì‚­ì œ ê²°ê³¼ - ì„±ê³µ: {}, ë©”ì‹œì§€: {}", success, message);
â‹®----
redirectAttributes.addFlashAttribute("message", "âœ… " + message);
â‹®----
redirectAttributes.addFlashAttribute("error", "âŒ " + message);
â‹®----
log.error("ê²Œì‹œê¸€ ì‚­ì œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - boardId: {}", id, e);
redirectAttributes.addFlashAttribute("error", "âŒ ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
private String getRedirectUrl(String type) {
â‹®----
public Map<String, Object> toggleLike(@PathVariable Long id,
â‹®----
if ("like".equals(action)) {
boardService.incrementLikeCount(id);
result.put("success", true);
result.put("message", "ì¶”ì²œë˜ì—ˆìŠµë‹ˆë‹¤.");
} else if ("dislike".equals(action)) {
boardService.decrementLikeCount(id);
â‹®----
result.put("message", "ì¶”ì²œì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
result.put("success", false);
result.put("message", "ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public Map<String, Object> debugBoardStatus(@PathVariable Long id) {
â‹®----
log.info("ğŸ”§ ë””ë²„ê·¸ API í˜¸ì¶œ - boardId: {}", id);
â‹®----
result.put("error", "ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
log.warn("ğŸ”§ ë””ë²„ê·¸ - ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ: {}", id);
â‹®----
result.put("boardId", board.getBoardId());
result.put("title", board.getTitle());
result.put("isDeleted", board.getIsDeleted());
result.put("isDeletedType", board.getIsDeleted() != null ? board.getIsDeleted().getClass().getSimpleName() : "null");
result.put("isDeletedValue", board.getIsDeleted() != null ? board.getIsDeleted().toString() : "null");
result.put("isActive", board.getIsActive());
result.put("isActiveType", board.getIsActive() != null ? board.getIsActive().getClass().getSimpleName() : "null");
result.put("createdAt", board.getCreatedAt());
boolean wouldBeDeleted = board.getIsDeleted() != null && board.getIsDeleted();
result.put("wouldBeConsideredDeleted", wouldBeDeleted);
log.info("ğŸ”§ ë””ë²„ê·¸ ê²°ê³¼ - boardId: {}, isDeleted: {}, wouldBeDeleted: {}",
id, board.getIsDeleted(), wouldBeDeleted);
â‹®----
log.error("ğŸ”§ ë””ë²„ê·¸ API ì˜¤ë¥˜ - boardId: {}", id, e);
result.put("error", "ì˜¤ë¥˜ ë°œìƒ: " + e.getMessage());
â‹®----
private MemberDTO getCurrentMember(HttpSession session) {
return (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
â‹®----
private Long getCurrentMemberId(HttpSession session) {
return (Long) session.getAttribute("memberId");
â‹®----
private boolean isAdmin(HttpSession session) {
MemberDTO loginMember = getCurrentMember(session);
return loginMember != null && "ADMIN".equals(loginMember.getRole());
â‹®----
private boolean hasEditPermission(HttpSession session, Long authorMemberId) {
Long currentMemberId = getCurrentMemberId(session);
return (currentMemberId != null && currentMemberId.equals(authorMemberId)) || isAdmin(session);
â‹®----
public ResponseEntity<?> uploadImages(@PathVariable Long boardId,
â‹®----
Long memberId = getCurrentMemberId(session);
â‹®----
return ResponseEntity.status(HttpStatus.UNAUTHORIZED)
.body(Map.of("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."));
â‹®----
BoardDTO board = boardService.getBoardById(boardId);
â‹®----
return ResponseEntity.status(HttpStatus.NOT_FOUND)
.body(Map.of("error", "ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
â‹®----
if (!hasEditPermission(session, board.getMemberId())) {
return ResponseEntity.status(HttpStatus.FORBIDDEN)
.body(Map.of("error", "í•´ë‹¹ ê²Œì‹œê¸€ì˜ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."));
â‹®----
imageFiles.removeIf(MultipartFile::isEmpty);
if (imageFiles.isEmpty()) {
return ResponseEntity.badRequest()
.body(Map.of("error", "ì—…ë¡œë“œí•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤."));
â‹®----
data.put("imageId", image.getImageId());
data.put("webpPath", image.getWebpPath());
data.put("fallbackPath", image.getFallbackJpgPath());
data.put("thumbnailSmall", image.getThumbnailSmall());
data.put("thumbnailMedium", image.getThumbnailMedium());
data.put("altText", image.getAltText());
data.put("fileSize", image.getReadableFileSize());
data.put("compressionRate", String.format("%.1f%%", image.getCompressionRate()));
imageData.add(data);
â‹®----
return ResponseEntity.ok(Map.of(
â‹®----
"message", uploadedImages.size() + "ê°œ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.",
â‹®----
.body(Map.of("error", e.getMessage()));
â‹®----
log.error("ì´ë¯¸ì§€ ì—…ë¡œë“œ API ì˜¤ë¥˜: boardId={}", boardId, e);
return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)
.body(Map.of("error", "ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."));
â‹®----
public ResponseEntity<?> deleteImage(@PathVariable Long imageId,
â‹®----
BoardImageDTO image = boardImageService.getImagesByBoardId(null).stream()
.filter(img -> img.getImageId().equals(imageId))
.findFirst()
.orElse(null);
â‹®----
.body(Map.of("error", "ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
â‹®----
BoardDTO board = boardService.getBoardById(image.getBoardId());
â‹®----
.body(Map.of("error", "í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."));
â‹®----
boardImageService.deleteImage(imageId);
â‹®----
log.error("ì´ë¯¸ì§€ ì‚­ì œ API ì˜¤ë¥˜: imageId={}", imageId, e);
â‹®----
.body(Map.of("error", "ì´ë¯¸ì§€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."));
`````

## File: src/main/java/com/example/carelink/controller/JobController.java
`````java
public class JobController {
â‹®----
public String listPage(Model model,
â‹®----
List<JobDTO> jobList = jobService.getJobList(page, keyword, jobType);
model.addAttribute("jobList", jobList);
model.addAttribute("keyword", keyword);
model.addAttribute("jobType", jobType);
model.addAttribute("currentPage", page);
â‹®----
public String writePage(@RequestParam(defaultValue = "RECRUIT") String type, Model model, HttpSession session) {
MemberDTO loggedInMember = getCurrentMember(session);
â‹®----
session.setAttribute("errorMessage", "ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”.");
â‹®----
if ("FACILITY".equals(loggedInMember.getRole())) {
â‹®----
} else if ("USER".equals(loggedInMember.getRole())) {
â‹®----
JobDTO jobDTO = new JobDTO();
jobDTO.setJobType(defaultType);
model.addAttribute("jobDTO", jobDTO);
model.addAttribute("selectedType", defaultType);
model.addAttribute("currentMember", loggedInMember);
â‹®----
public String writeJob(@ModelAttribute JobDTO jobDTO, HttpSession session) {
â‹®----
String jobType = jobDTO.getJobType();
String userRole = loggedInMember.getRole();
if ("FACILITY".equals(userRole) && "SEARCH".equals(jobType)) {
session.setAttribute("errorMessage", "ì‹œì„¤íšŒì›ì€ êµ¬ì¸ê³µê³ ë§Œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
â‹®----
if ("USER".equals(userRole) && "RECRUIT".equals(jobType)) {
session.setAttribute("errorMessage", "ì¼ë°˜íšŒì›ì€ êµ¬ì§ê³µê³ ë§Œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
â‹®----
if (jobDTO.getStatus() == null || jobDTO.getStatus().isEmpty()) {
jobDTO.setStatus("ACTIVE");
â‹®----
jobDTO.setMemberId(loggedInMember.getMemberId());
if (jobDTO.getPriority() == null) {
jobDTO.setPriority(0);
â‹®----
jobService.insertJob(jobDTO);
session.setAttribute("successMessage", "ê³µê³ ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
session.setAttribute("errorMessage", "ê³µê³  ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
â‹®----
public String detailPage(@PathVariable Long id, Model model, HttpSession session) {
â‹®----
JobDTO job = jobService.getJobById(id);
â‹®----
session.setAttribute("errorMessage", "í•´ë‹¹ êµ¬ì¸ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
if (job.getContent() != null) {
formattedContent = job.getContent().replace(System.lineSeparator(), "<br>");
formattedContent = formattedContent.replace("\n", "<br>");
â‹®----
model.addAttribute("formattedJobContent", formattedContent);
MemberDTO loggedInMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
if (loggedInMember == null || !job.getMemberId().equals(loggedInMember.getMemberId())) {
â‹®----
model.addAttribute("job", job);
â‹®----
e.printStackTrace();
session.setAttribute("errorMessage", "êµ¬ì¸ê³µê³  ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String editPage(@PathVariable Long id, Model model, HttpSession session) {
â‹®----
if (!canEditJob(loggedInMember, job.getMemberId())) {
session.setAttribute("errorMessage", "ìˆ˜ì • ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
â‹®----
model.addAttribute("jobDTO", job);
â‹®----
public String editJob(@PathVariable Long id, @ModelAttribute JobDTO jobDTO, HttpSession session) {
â‹®----
JobDTO existingJob = jobService.getJobById(id);
â‹®----
if (!canEditJob(loggedInMember, existingJob.getMemberId())) {
â‹®----
jobDTO.setJobId(id);
â‹®----
jobService.updateJob(jobDTO);
â‹®----
public String deleteJob(@PathVariable Long id, HttpSession session) {
â‹®----
boolean isOwner = existingJob.getMemberId().equals(loggedInMember.getMemberId());
boolean isAdmin = "ADMIN".equals(loggedInMember.getRole());
â‹®----
session.setAttribute("errorMessage", "ì‚­ì œ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ì‘ì„±ìë§Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
â‹®----
jobService.deleteJob(id);
session.setAttribute("successMessage", "êµ¬ì¸ê³µê³ ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
public String applyForJob(@PathVariable Long id, HttpSession session, RedirectAttributes redirectAttributes) {
â‹®----
redirectAttributes.addFlashAttribute("errorMessage", "ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”.");
â‹®----
if (!"USER".equals(loggedInMember.getRole())) {
redirectAttributes.addFlashAttribute("errorMessage", "ê°œì¸ íšŒì›ë§Œ êµ¬ì¸ê³µê³ ì— ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
â‹®----
jobService.applyForJob(id, loggedInMember.getMemberId());
redirectAttributes.addFlashAttribute("successMessage", "êµ¬ì¸ê³µê³  ì§€ì›ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
â‹®----
redirectAttributes.addFlashAttribute("errorMessage", e.getMessage());
â‹®----
redirectAttributes.addFlashAttribute("errorMessage", "êµ¬ì¸ê³µê³  ì§€ì› ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
â‹®----
private MemberDTO getCurrentMember(HttpSession session) {
return (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
â‹®----
private boolean canWriteRecruit(MemberDTO member) {
return member != null && ("FACILITY".equals(member.getRole()) || "ADMIN".equals(member.getRole()));
â‹®----
private boolean canWriteSearch(MemberDTO member) {
return member != null && ("USER".equals(member.getRole()) || "ADMIN".equals(member.getRole()));
â‹®----
private boolean canEditJob(MemberDTO member, Long authorId) {
return member != null && (member.getMemberId().equals(authorId) || "ADMIN".equals(member.getRole()));
â‹®----
private boolean canApplyOrContact(MemberDTO member, Long authorId) {
return member != null && !member.getMemberId().equals(authorId);
â‹®----
private boolean isAdmin(MemberDTO member) {
return member != null && "ADMIN".equals(member.getRole());
`````

## File: src/main/java/com/example/carelink/controller/ReviewController.java
`````java
public class ReviewController {
â‹®----
public String listPage(Model model,
â‹®----
log.info("ë¦¬ë·° ëª©ë¡ í˜ì´ì§€ ì ‘ì† - page: {}, keyword: {}, minRating: {}, facilityId: {}",
â‹®----
PageInfo<ReviewDTO> pageInfo = reviewService.getReviewList(page, keyword, minRating, facilityId);
model.addAttribute("pageInfo", pageInfo);
model.addAttribute("reviewList", pageInfo.getList());
model.addAttribute("keyword", keyword != null ? keyword : "");
model.addAttribute("minRating", minRating);
model.addAttribute("facilityId", facilityId);
model.addAttribute("currentPage", page);
model.addAttribute("pageTitle", "ì‹œì„¤ ë¦¬ë·°");
â‹®----
FacilityDTO facility = facilityService.getFacilityById(facilityId);
model.addAttribute("selectedFacility", facility);
model.addAttribute("pageTitle", facility.getFacilityName() + " ë¦¬ë·°");
â‹®----
log.warn("ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨ - facilityId: {}", facilityId, e);
â‹®----
log.error("ë¦¬ë·° ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
model.addAttribute("pageInfo", new PageInfo<>(List.of(), page, 10, 0));
model.addAttribute("reviewList", List.of());
â‹®----
model.addAttribute("error", "ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public String writePage(Model model,
â‹®----
MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
â‹®----
log.warn("ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìì˜ ë¦¬ë·° ì‘ì„± í˜ì´ì§€ ì ‘ì† ì‹œë„");
redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
â‹®----
log.info("ë¦¬ë·° ì‘ì„± í˜ì´ì§€ ì ‘ì† - facilityId: {}", facilityId);
ReviewDTO reviewDTO = new ReviewDTO();
List<FacilityDTO> facilityList = facilityService.getAllActiveFacilities();
log.info("í™œì„±í™”ëœ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", facilityList.size());
â‹®----
FacilityDTO selectedFacility = facilityService.getFacilityById(facilityId);
â‹®----
log.info("ì„ íƒëœ ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì„±ê³µ - facilityId: {}, facilityName: {}, status: {}",
facilityId, selectedFacility.getFacilityName(), selectedFacility.getStatus());
if ("ì‚­ì œë¨".equals(selectedFacility.getStatus())) {
model.addAttribute("error", "ì„ íƒí•˜ì‹  ì‹œì„¤ì€ ì‚­ì œë˜ì–´ ë¦¬ë·°ë¥¼ ì‘ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
} else if ("ìŠ¹ì¸ëŒ€ê¸°".equals(selectedFacility.getStatus())) {
model.addAttribute("error", "ì„ íƒí•˜ì‹  ì‹œì„¤ì€ ì•„ì§ ìŠ¹ì¸ë˜ì§€ ì•Šì•„ ë¦¬ë·°ë¥¼ ì‘ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
reviewDTO.setFacilityId(facilityId);
model.addAttribute("selectedFacility", selectedFacility);
â‹®----
log.warn("ì„ íƒëœ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ - facilityId: {}", facilityId);
model.addAttribute("error", "ì„ íƒí•˜ì‹  ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
model.addAttribute("reviewDTO", reviewDTO);
model.addAttribute("facilityList", facilityList);
model.addAttribute("pageTitle", "ë¦¬ë·° ì‘ì„±");
â‹®----
log.error("ë¦¬ë·° ì‘ì„± í˜ì´ì§€ ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
model.addAttribute("error", "ë¦¬ë·° ì‘ì„± í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public String writeReview(@ModelAttribute ReviewDTO reviewDTO,
â‹®----
log.info("ë¦¬ë·° ë“±ë¡ ìš”ì²­ - title: {}, facilityId: {}", reviewDTO.getTitle(), reviewDTO.getFacilityId());
â‹®----
log.warn("ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìì˜ ë¦¬ë·° ì‘ì„± ì‹œë„");
â‹®----
reviewDTO.setMemberId(loginMember.getMemberId());
log.info("ë¦¬ë·° ì‘ì„±ì ì„¤ì • - memberId: {}, userId: {}", loginMember.getMemberId(), loginMember.getUserId());
if (reviewDTO.getFacilityId() == null) {
log.warn("ì‹œì„¤ì´ ì„ íƒë˜ì§€ ì•ŠìŒ");
redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
redirectAttributes.addFlashAttribute("reviewDTO", reviewDTO);
â‹®----
FacilityDTO facility = facilityService.getFacilityById(reviewDTO.getFacilityId());
â‹®----
log.warn("ì„ íƒëœ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ - facilityId: {}", reviewDTO.getFacilityId());
redirectAttributes.addFlashAttribute("error", "ì„ íƒí•œ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
if (!facilityService.validateFacilityStatus(facility)) {
log.warn("ìœ íš¨í•˜ì§€ ì•Šì€ ì‹œì„¤ ìƒíƒœ - facilityId: {}, status: {}",
facility.getFacilityId(), facility.getStatus());
redirectAttributes.addFlashAttribute("error", facility.getStatusMessage());
â‹®----
log.info("ì‹œì„¤ ì •ë³´ í™•ì¸ ì™„ë£Œ - facilityId: {}, facilityName: {}, status: {}",
facility.getFacilityId(), facility.getFacilityName(), facility.getStatus());
if (reviewDTO.getTitle() == null || reviewDTO.getTitle().trim().isEmpty()) {
log.warn("ì œëª©ì´ ì…ë ¥ë˜ì§€ ì•ŠìŒ");
redirectAttributes.addFlashAttribute("error", "ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
â‹®----
return "redirect:/review/write?facilityId=" + reviewDTO.getFacilityId();
â‹®----
if (reviewDTO.getContent() == null || reviewDTO.getContent().trim().length() < 10) {
log.warn("ë‚´ìš©ì´ 10ì ë¯¸ë§Œì„");
redirectAttributes.addFlashAttribute("error", "ë‚´ìš©ì„ 10ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.");
â‹®----
if (reviewDTO.getRating() == null || reviewDTO.getRating() < 1 || reviewDTO.getRating() > 5) {
log.warn("í‰ì ì´ ìœ íš¨í•˜ì§€ ì•ŠìŒ - rating: {}", reviewDTO.getRating());
redirectAttributes.addFlashAttribute("error", "í‰ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
â‹®----
reviewService.insertReview(reviewDTO);
log.info("ë¦¬ë·° ë“±ë¡ ì„±ê³µ - reviewId: {}", reviewDTO.getReviewId());
if (imageFiles != null && !imageFiles.isEmpty()) {
imageFiles.removeIf(file -> file.isEmpty());
if (!imageFiles.isEmpty()) {
â‹®----
List<ReviewImageDTO> uploadedImages = reviewImageService.uploadImages(
reviewDTO.getReviewId(), imageFiles, imageAltTexts);
log.info("ë¦¬ë·° ì´ë¯¸ì§€ ì—…ë¡œë“œ ì„±ê³µ: reviewId={}, imageCount={}",
reviewDTO.getReviewId(), uploadedImages.size());
â‹®----
log.error("ë¦¬ë·° ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨: reviewId={}", reviewDTO.getReviewId(), e);
â‹®----
redirectAttributes.addFlashAttribute("message", "ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
log.error("ë¦¬ë·° ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
redirectAttributes.addFlashAttribute("error", "ë¦¬ë·° ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public String detailPage(@PathVariable Long id, Model model, HttpSession session) {
â‹®----
ReviewDTO review = reviewService.getReviewById(id);
â‹®----
model.addAttribute("error", "ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
reviewService.incrementViewCount(id);
List<ReviewDTO> otherReviews = reviewService.getReviewsByFacilityId(review.getFacilityId())
.stream()
.filter(r -> !r.getReviewId().equals(id))
.limit(5)
.collect(java.util.stream.Collectors.toList());
model.addAttribute("review", review);
model.addAttribute("otherReviews", otherReviews);
model.addAttribute("pageTitle", review.getTitle());
model.addAttribute("currentMemberId", getCurrentMemberId(session));
â‹®----
log.error("ë¦¬ë·° ìƒì„¸ë³´ê¸° ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
model.addAttribute("error", "ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public String editPage(@PathVariable Long id, Model model, HttpSession session, RedirectAttributes redirectAttributes) {
â‹®----
redirectAttributes.addFlashAttribute("error", "ìˆ˜ì •í•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
if (!hasEditPermission(session, review.getMemberId())) {
redirectAttributes.addFlashAttribute("error", "ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
â‹®----
model.addAttribute("reviewDTO", review);
model.addAttribute("pageTitle", "ë¦¬ë·° ìˆ˜ì •");
â‹®----
log.error("ë¦¬ë·° ìˆ˜ì • í˜ì´ì§€ ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
redirectAttributes.addFlashAttribute("error", "ìˆ˜ì • í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public String updateReview(@ModelAttribute ReviewDTO reviewDTO, HttpSession session, RedirectAttributes redirectAttributes) {
â‹®----
log.info("ë¦¬ë·° ìˆ˜ì • ìš”ì²­ - reviewId: {}, title: {}", reviewDTO.getReviewId(), reviewDTO.getTitle());
ReviewDTO existingReview = reviewService.getReviewById(reviewDTO.getReviewId());
â‹®----
if (!hasEditPermission(session, existingReview.getMemberId())) {
â‹®----
return "redirect:/review/detail/" + reviewDTO.getReviewId();
â‹®----
return "redirect:/review/edit/" + reviewDTO.getReviewId();
â‹®----
reviewDTO.setFacilityId(existingReview.getFacilityId());
reviewDTO.setMemberId(existingReview.getMemberId());
reviewDTO.setViewCount(existingReview.getViewCount());
reviewDTO.setLikeCount(existingReview.getLikeCount());
reviewDTO.setDislikeCount(existingReview.getDislikeCount());
reviewDTO.setCreatedAt(existingReview.getCreatedAt());
reviewService.updateReview(reviewDTO);
log.info("ë¦¬ë·° ìˆ˜ì • ì„±ê³µ - reviewId: {}", reviewDTO.getReviewId());
redirectAttributes.addFlashAttribute("message", "ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
log.error("ë¦¬ë·° ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", reviewDTO.getReviewId(), e);
redirectAttributes.addFlashAttribute("error", "ë¦¬ë·° ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public String deleteReview(@PathVariable Long id, HttpSession session, RedirectAttributes redirectAttributes) {
â‹®----
ReviewDTO existingReview = reviewService.getReviewById(id);
â‹®----
redirectAttributes.addFlashAttribute("error", "ì‚­ì œí•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
redirectAttributes.addFlashAttribute("error", "ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
â‹®----
reviewService.deleteReview(id);
redirectAttributes.addFlashAttribute("message", "ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
log.error("ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
redirectAttributes.addFlashAttribute("error", "ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public Map<String, Object> reportReview(@PathVariable Long id, @RequestBody Map<String, String> request, HttpSession session) {
â‹®----
String reason = request.get("reason");
if (reason == null || reason.trim().isEmpty()) {
result.put("success", false);
result.put("message", "ì‹ ê³  ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
â‹®----
result.put("message", "ì‹ ê³ í•  ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
Long currentMemberId = getCurrentMemberId(session);
if (review.getMemberId().equals(currentMemberId)) {
â‹®----
result.put("message", "ë³¸ì¸ì´ ì‘ì„±í•œ ë¦¬ë·°ëŠ” ì‹ ê³ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
log.info("ë¦¬ë·° ì‹ ê³  ì ‘ìˆ˜ - reviewId: {}, reason: {}, reporter: {}", id, reason, currentMemberId);
result.put("success", true);
result.put("message", "ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ê²€í†  í›„ ì ì ˆí•œ ì¡°ì¹˜ë¥¼ ì·¨í•˜ê² ìŠµë‹ˆë‹¤.");
â‹®----
log.error("ë¦¬ë·° ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
â‹®----
result.put("message", "ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public Map<String, Object> incrementViewCount(@PathVariable Long id) {
â‹®----
log.error("ì¡°íšŒìˆ˜ ì¦ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - reviewId: {}", id, e);
â‹®----
result.put("message", "ì¡°íšŒìˆ˜ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public Map<String, Object> getReviewsByFacility(@PathVariable Long facilityId,
â‹®----
List<ReviewDTO> reviews = reviewService.getReviewsByFacilityId(facilityId);
Double averageRating = reviewService.getAverageRating(facilityId);
â‹®----
result.put("reviews", reviews);
result.put("averageRating", averageRating);
result.put("reviewCount", reviews.size());
â‹®----
result.put("message", "ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public Map<String, Object> likeReview(@PathVariable Long id) {
â‹®----
reviewService.likeReview(id);
â‹®----
result.put("likeCount", review.getLikeCount());
result.put("message", "ì¶”ì²œí•˜ì˜€ìŠµë‹ˆë‹¤.");
â‹®----
result.put("message", "ì¶”ì²œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public Map<String, Object> dislikeReview(@PathVariable Long id) {
â‹®----
reviewService.dislikeReview(id);
â‹®----
result.put("dislikeCount", review.getDislikeCount());
result.put("message", "ë¹„ì¶”ì²œí•˜ì˜€ìŠµë‹ˆë‹¤.");
â‹®----
result.put("message", "ë¹„ì¶”ì²œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
private Long getCurrentMemberId(HttpSession session) {
return (Long) session.getAttribute("memberId");
â‹®----
private boolean isAdmin(HttpSession session) {
â‹®----
return loginMember != null && "ADMIN".equals(loginMember.getRole());
â‹®----
private boolean hasEditPermission(HttpSession session, Long authorMemberId) {
â‹®----
return (currentMemberId != null && currentMemberId.equals(authorMemberId)) || isAdmin(session);
â‹®----
public ResponseEntity<?> uploadReviewImages(@PathVariable Long reviewId,
â‹®----
Long memberId = getCurrentMemberId(session);
â‹®----
return ResponseEntity.status(HttpStatus.UNAUTHORIZED)
.body(Map.of("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."));
â‹®----
ReviewDTO review = reviewService.getReviewById(reviewId);
â‹®----
return ResponseEntity.status(HttpStatus.NOT_FOUND)
.body(Map.of("error", "ë¦¬ë·°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
â‹®----
return ResponseEntity.status(HttpStatus.FORBIDDEN)
.body(Map.of("error", "í•´ë‹¹ ë¦¬ë·°ì˜ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."));
â‹®----
imageFiles.removeIf(MultipartFile::isEmpty);
if (imageFiles.isEmpty()) {
return ResponseEntity.badRequest()
.body(Map.of("error", "ì—…ë¡œë“œí•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤."));
â‹®----
data.put("imageId", image.getImageId());
data.put("webpPath", image.getWebpPath());
data.put("fallbackPath", image.getFallbackJpgPath());
data.put("thumbnailSmall", image.getThumbnailSmall());
data.put("thumbnailMedium", image.getThumbnailMedium());
data.put("altText", image.getAltText());
data.put("fileSize", image.getReadableFileSize());
data.put("compressionRate", String.format("%.1f%%", image.getCompressionRate()));
imageData.add(data);
â‹®----
return ResponseEntity.ok(Map.of(
â‹®----
"message", uploadedImages.size() + "ê°œ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.",
â‹®----
.body(Map.of("error", e.getMessage()));
â‹®----
log.error("ë¦¬ë·° ì´ë¯¸ì§€ ì—…ë¡œë“œ API ì˜¤ë¥˜: reviewId={}", reviewId, e);
return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)
.body(Map.of("error", "ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."));
â‹®----
public ResponseEntity<?> deleteReviewImage(@PathVariable Long imageId,
â‹®----
List<ReviewImageDTO> images = reviewImageService.getImagesByReviewId(null);
ReviewImageDTO image = images.stream()
.filter(img -> img.getImageId().equals(imageId))
.findFirst()
.orElse(null);
â‹®----
.body(Map.of("error", "ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
â‹®----
ReviewDTO review = reviewService.getReviewById(image.getReviewId());
â‹®----
.body(Map.of("error", "í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."));
â‹®----
reviewImageService.deleteImage(imageId);
â‹®----
log.error("ë¦¬ë·° ì´ë¯¸ì§€ ì‚­ì œ API ì˜¤ë¥˜: imageId={}", imageId, e);
â‹®----
.body(Map.of("error", "ì´ë¯¸ì§€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."));
â‹®----
public ResponseEntity<?> getFacilityReviewImages(@PathVariable Long facilityId) {
â‹®----
List<ReviewImageDTO> images = reviewImageService.getImagesByFacilityId(facilityId);
â‹®----
data.put("reviewId", image.getReviewId());
â‹®----
"count", images.size()
â‹®----
log.error("ì‹œì„¤ ë¦¬ë·° ì´ë¯¸ì§€ ì¡°íšŒ API ì˜¤ë¥˜: facilityId={}", facilityId, e);
â‹®----
.body(Map.of("error", "ì´ë¯¸ì§€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."));
`````

## File: src/main/java/com/example/carelink/service/FacilityImageService.java
`````java
public class FacilityImageService {
â‹®----
private static final Logger log = LoggerFactory.getLogger(FacilityImageService.class);
â‹®----
public List<FacilityImageDTO> getImagesByFacilityId(Long facilityId) {
log.info("ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - facilityId: {}", facilityId);
List<FacilityImageDTO> images = facilityImageMapper.getImagesByFacilityId(facilityId);
log.info("ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - facilityId: {}, ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, images.size());
â‹®----
public FacilityImageDTO getMainImageByFacilityId(Long facilityId) {
log.info("ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ - facilityId: {}", facilityId);
return facilityImageMapper.getMainImageByFacilityId(facilityId);
â‹®----
public void saveFacilityImages(Long facilityId, List<MultipartFile> imageFiles, List<String> altTexts) {
â‹®----
log.info("ğŸ“¸ ë‹¤ì¤‘ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì‹œì‘ - facilityId: {}, ìš”ì²­ ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, imageFiles.size());
int existingImageCount = facilityImageMapper.countImagesByFacilityId(facilityId);
â‹®----
if (!file.isEmpty() && validFiles.size() + existingImageCount < Constants.MAX_FACILITY_IMAGES) {
validateImageFile(file);
validFiles.add(file);
â‹®----
if (validFiles.isEmpty()) {
throw new IllegalArgumentException("ì €ì¥í•  ìœ íš¨í•œ ì´ë¯¸ì§€ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
if (existingImageCount + validFiles.size() > Constants.MAX_FACILITY_IMAGES) {
log.warn("âš ï¸ ì¼ë¶€ ì´ë¯¸ì§€ëŠ” 5ì¥ ì œí•œìœ¼ë¡œ ì¸í•´ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê¸°ì¡´: {}ì¥, ìš”ì²­: {}ì¥, ì €ì¥ ê°€ëŠ¥: {}ì¥",
existingImageCount, imageFiles.size(), validFiles.size());
â‹®----
log.info("ğŸ“Š ì´ë¯¸ì§€ ì €ì¥ ê³„íš - ê¸°ì¡´: {}ì¥, ìƒˆë¡œ ì €ì¥: {}ì¥, ì´: {}ì¥",
existingImageCount, validFiles.size(), existingImageCount + validFiles.size());
for (int i = 0; i < validFiles.size(); i++) {
MultipartFile file = validFiles.get(i);
String altText = (altTexts != null && i < altTexts.size()) ? altTexts.get(i) : null;
String imagePath = saveImageFile(file, facilityId.toString(), existingImageCount + i);
FacilityImageDTO imageDTO = new FacilityImageDTO();
imageDTO.setFacilityId(facilityId);
imageDTO.setImagePath(imagePath);
imageDTO.setImageAltText(altText);
imageDTO.setImageOrder(existingImageCount + i);
imageDTO.setIsMainImage(existingImageCount == 0 && i == 0);
facilityImageMapper.insertFacilityImage(imageDTO);
log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ - order: {}, path: {}", existingImageCount + i, imagePath);
â‹®----
updateFacilityMainImageInfo(facilityId);
log.info("ğŸ‰ ë‹¤ì¤‘ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ - facilityId: {}, ì´ {}ì¥ ì €ì¥", facilityId, validFiles.size());
â‹®----
log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public FacilityImageDTO saveSingleFacilityImage(Long facilityId, MultipartFile imageFile, String altText, Integer imageOrder) {
return saveSingleFacilityImage(facilityId, imageFile, altText, imageOrder, null);
â‹®----
public FacilityImageDTO saveSingleFacilityImage(Long facilityId, MultipartFile imageFile, String altText, Integer imageOrder, String customFileName) {
â‹®----
log.info("ğŸ“¸ ë‹¨ì¼ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì‹œì‘ - facilityId: {}, order: {}, customFileName: '{}'", facilityId, imageOrder, customFileName);
if (imageFile.isEmpty()) {
throw new IllegalArgumentException("ì—…ë¡œë“œëœ ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
â‹®----
throw new IllegalArgumentException(String.format("ì‹œì„¤ ì´ë¯¸ì§€ëŠ” ìµœëŒ€ %dì¥ê¹Œì§€ë§Œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì¬ %dì¥ ë“±ë¡ë¨",
â‹®----
validateImageFile(imageFile);
String imagePath = saveImageFileWithCustomName(imageFile, facilityId.toString(),
â‹®----
imageDTO.setImageOrder(imageOrder != null ? imageOrder : existingImageCount);
imageDTO.setIsMainImage(existingImageCount == 0);
â‹®----
log.info("âœ… facility_images í…Œì´ë¸”ì— ì €ì¥ ì™„ë£Œ - imageId: {}, path: {}, í˜„ì¬ ì´ {}ì¥",
imageDTO.getImageId(), imagePath, existingImageCount + 1);
â‹®----
log.error("âŒ ë‹¨ì¼ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
â‹®----
private void updateFacilityMainImageInfo(Long facilityId) {
â‹®----
int imageCount = facilityImageMapper.countImagesByFacilityId(facilityId);
FacilityImageDTO mainImage = facilityImageMapper.getMainImageByFacilityId(facilityId);
String mainImagePath = mainImage != null ? mainImage.getImagePath() : null;
log.info("ğŸ”„ ì‹œì„¤ í…Œì´ë¸” ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ ì‹œì‘ - facilityId: {}, imageCount: {}, mainImagePath: {}",
â‹®----
int updateResult = facilityMapper.updateFacilityMainImage(facilityId, mainImagePath, imageCount);
â‹®----
log.info("âœ… ì‹œì„¤ í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì„±ê³µ - facilityId: {}, ì—…ë°ì´íŠ¸ëœ í–‰: {}", facilityId, updateResult);
â‹®----
log.warn("âš ï¸ ì‹œì„¤ í…Œì´ë¸” ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ - facilityId: {}, ì—…ë°ì´íŠ¸ëœ í–‰: {}", facilityId, updateResult);
â‹®----
log.error("âŒ ì‹œì„¤ í…Œì´ë¸” ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ - facilityId: {}", facilityId, e);
throw new RuntimeException("ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì •ë³´ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
private String saveImageFileWithCustomName(MultipartFile file, String facilityId, int index, String customFileName) {
â‹®----
File uploadDirFile = new File(uploadDir);
if (!uploadDirFile.exists()) {
boolean created = uploadDirFile.mkdirs();
log.info("ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} - {}", uploadDir, created ? "ì„±ê³µ" : "ì‹¤íŒ¨");
â‹®----
String originalFilename = file.getOriginalFilename();
â‹®----
if (originalFilename != null && originalFilename.contains(".")) {
extension = originalFilename.substring(originalFilename.lastIndexOf("."));
baseName = originalFilename.substring(0, originalFilename.lastIndexOf("."));
â‹®----
if (customFileName != null && !customFileName.trim().isEmpty()) {
String userFileName = customFileName.trim();
â‹®----
if (userFileName.contains(".")) {
userBaseName = userFileName.substring(0, userFileName.lastIndexOf("."));
userExtension = userFileName.substring(userFileName.lastIndexOf("."));
â‹®----
String englishBaseName = convertKoreanToEnglish(userBaseName);
String cleanBaseName = sanitizeFilename(englishBaseName);
finalFileName = String.format("facility_%s_%d_%s_%s%s",
â‹®----
UUID.randomUUID().toString().substring(0, 8), userExtension);
log.info("ğŸ“ ì‚¬ìš©ì ì§€ì • íŒŒì¼ëª… ì ìš©: '{}' â†’ '{}'", customFileName, finalFileName);
â‹®----
return saveImageFile(file, facilityId, index);
â‹®----
File savedFile = new File(uploadDir + finalFileName);
file.transferTo(savedFile);
log.info("ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì™„ë£Œ: {}", savedFile.getAbsolutePath());
â‹®----
log.error("ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}, index={}, customFileName={}", facilityId, index, customFileName, e);
throw new RuntimeException("ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
private String saveImageFile(MultipartFile file, String facilityId, int index) {
â‹®----
// í•œê¸€ íŒŒì¼ëª…ì„ ì˜ë¬¸ìœ¼ë¡œ ë³€í™˜
String englishBaseName = convertKoreanToEnglish(baseName);
â‹®----
// ìµœì¢… íŒŒì¼ëª… ìƒì„±
â‹®----
if (!cleanBaseName.isEmpty() && !cleanBaseName.equals("facility_image")) {
savedFilename = String.format("facility_%s_%d_%s_%s%s",
facilityId, index, cleanBaseName, UUID.randomUUID().toString().substring(0, 8), extension);
â‹®----
savedFilename = String.format("facility_%s_%d_%s%s",
facilityId, index, UUID.randomUUID().toString(), extension);
â‹®----
log.info("ğŸ“ íŒŒì¼ëª… ë³€í™˜: '{}' â†’ '{}'", originalFilename, savedFilename);
File savedFile = new File(uploadDir + savedFilename);
â‹®----
log.error("ì‹œì„¤ ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}, index={}", facilityId, index, e);
â‹®----
public void updateMainImage(Long facilityId, Long imageId) {
â‹®----
log.info("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ ì‹œì‘ - facilityId: {}, imageId: {}", facilityId, imageId);
facilityImageMapper.clearMainImages(facilityId);
int result = facilityImageMapper.updateMainImage(facilityId, imageId);
â‹®----
throw new RuntimeException("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
â‹®----
log.info("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ ì™„ë£Œ - facilityId: {}, imageId: {}", facilityId, imageId);
â‹®----
log.error("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}, imageId: {}", facilityId, imageId, e);
throw new RuntimeException("ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public boolean deleteFacilityImage(Long imageId) {
â‹®----
log.info("ğŸ—‘ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ì™„ì „ ì‚­ì œ ì‹œì‘ - imageId: {}", imageId);
FacilityImageDTO imageToDelete = facilityImageMapper.getImageById(imageId);
â‹®----
log.warn("âš ï¸ ì‚­ì œí•  ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ - imageId: {}", imageId);
â‹®----
String imagePath = imageToDelete.getImagePath();
log.info("ğŸ“ ì‚­ì œ ëŒ€ìƒ íŒŒì¼: {}", imagePath);
int result = facilityImageMapper.deleteFacilityImage(imageId);
â‹®----
log.info("âœ… DBì—ì„œ ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - imageId: {}", imageId);
boolean fileDeleteSuccess = deleteImageFile(imagePath);
â‹®----
log.info("âœ… íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - path: {}", imagePath);
â‹®----
log.warn("âš ï¸ íŒŒì¼ ì‚­ì œ ì‹¤íŒ¨í•˜ì˜€ì§€ë§Œ DB ì‚­ì œëŠ” ì„±ê³µ - path: {}", imagePath);
â‹®----
log.warn("âŒ DBì—ì„œ ì´ë¯¸ì§€ ì‚­ì œ ì‹¤íŒ¨ - imageId: {} (ê²°ê³¼: {})", imageId, result);
â‹®----
log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - imageId: {}", imageId, e);
â‹®----
private boolean deleteImageFile(String imagePath) {
â‹®----
if (imagePath == null || imagePath.trim().isEmpty()) {
log.warn("âš ï¸ ì‚­ì œí•  íŒŒì¼ ê²½ë¡œê°€ ë¹„ì–´ìˆìŒ");
â‹®----
if (imagePath.startsWith("/uploads/facility/")) {
String filename = imagePath.substring("/uploads/facility/".length());
â‹®----
log.warn("âš ï¸ ì˜ˆìƒì¹˜ ëª»í•œ íŒŒì¼ ê²½ë¡œ í˜•ì‹: {}", imagePath);
â‹®----
log.info("ğŸ” ì‹¤ì œ íŒŒì¼ ê²½ë¡œ: {}", actualFilePath);
File fileToDelete = new File(actualFilePath);
if (fileToDelete.exists()) {
boolean deleted = fileToDelete.delete();
â‹®----
log.info("âœ… íŒŒì¼ ì‚­ì œ ì„±ê³µ: {}", actualFilePath);
â‹®----
log.error("âŒ íŒŒì¼ ì‚­ì œ ì‹¤íŒ¨: {}", actualFilePath);
â‹®----
log.warn("âš ï¸ ì‚­ì œí•  íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ: {}", actualFilePath);
â‹®----
log.error("âŒ íŒŒì¼ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - imagePath: {}", imagePath, e);
â‹®----
public int getImageCountByFacilityId(Long facilityId) {
return facilityImageMapper.countImagesByFacilityId(facilityId);
â‹®----
public boolean setMainImage(Long facilityId, Long imageId) {
â‹®----
log.info("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì‹œì‘ - facilityId: {}, imageId: {}", facilityId, imageId);
â‹®----
log.info("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì™„ë£Œ - facilityId: {}, imageId: {}", facilityId, imageId);
â‹®----
log.warn("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì‹¤íŒ¨ - facilityId: {}, imageId: {} (ê²°ê³¼: {})", facilityId, imageId, result);
â‹®----
log.error("ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}, imageId: {}", facilityId, imageId, e);
â‹®----
public FacilityImageDTO getImageById(Long imageId) {
log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì¡°íšŒ - imageId: {}", imageId);
return facilityImageMapper.getImageById(imageId);
â‹®----
public List<FacilityImageDTO> getAllImages() {
log.info("ëª¨ë“  ì‹œì„¤ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ (ì„ì‹œ)");
return java.util.Collections.emptyList();
â‹®----
private String convertKoreanToEnglish(String korean) {
if (korean == null || korean.trim().isEmpty()) {
â‹®----
String input = korean.toLowerCase().trim();
â‹®----
java.util.Map<String, String> koreanToEnglish = java.util.Map.ofEntries(
java.util.Map.entry("ì‹œì„¤", "facility"),
java.util.Map.entry("ìš”ì–‘ì›", "nursing_home"),
java.util.Map.entry("ìš”ì–‘ë³‘ì›", "nursing_hospital"),
java.util.Map.entry("ë³‘ì›", "hospital"),
java.util.Map.entry("ì˜ì›", "clinic"),
java.util.Map.entry("ë°ì´ì¼€ì–´", "daycare"),
java.util.Map.entry("ì„¼í„°", "center"),
java.util.Map.entry("í™ˆ", "home"),
java.util.Map.entry("ì¼€ì–´", "care"),
java.util.Map.entry("ì™¸ê´€", "exterior"),
java.util.Map.entry("ì™¸ë¶€", "exterior"),
java.util.Map.entry("ê±´ë¬¼", "building"),
java.util.Map.entry("ì…êµ¬", "entrance"),
java.util.Map.entry("í˜„ê´€", "entrance"),
java.util.Map.entry("ë‚´ë¶€", "interior"),
java.util.Map.entry("ë¡œë¹„", "lobby"),
java.util.Map.entry("ë³µë„", "corridor"),
java.util.Map.entry("í™€", "hall"),
java.util.Map.entry("ë°©", "room"),
java.util.Map.entry("ê°ì‹¤", "room"),
java.util.Map.entry("ì¹¨ì‹¤", "bedroom"),
java.util.Map.entry("ìƒí™œì‹¤", "living_room"),
java.util.Map.entry("íœ´ê²Œì‹¤", "rest_room"),
java.util.Map.entry("ì‹ë‹¹", "dining_room"),
java.util.Map.entry("ì£¼ë°©", "kitchen"),
java.util.Map.entry("ì¹´í˜", "cafe"),
java.util.Map.entry("í™”ì¥ì‹¤", "restroom"),
java.util.Map.entry("ìš•ì‹¤", "bathroom"),
java.util.Map.entry("ì„¸íƒì‹¤", "laundry"),
java.util.Map.entry("ì¹˜ë£Œì‹¤", "treatment_room"),
java.util.Map.entry("ì˜ë¬´ì‹¤", "medical_room"),
java.util.Map.entry("ìƒë‹´ì‹¤", "consultation_room"),
java.util.Map.entry("ê°„í˜¸ì‚¬ì‹¤", "nurses_station"),
java.util.Map.entry("ì¬í™œì‹¤", "rehabilitation_room"),
java.util.Map.entry("ë¬¼ë¦¬ì¹˜ë£Œì‹¤", "physical_therapy_room"),
java.util.Map.entry("ìš´ë™ì‹¤", "exercise_room"),
java.util.Map.entry("í—¬ìŠ¤ì¥", "gym"),
java.util.Map.entry("í”„ë¡œê·¸ë¨ì‹¤", "program_room"),
java.util.Map.entry("ê°•ë‹¹", "auditorium"),
java.util.Map.entry("ë„ì„œì‹¤", "library"),
java.util.Map.entry("ì˜¤ë½ì‹¤", "recreation_room"),
java.util.Map.entry("ì •ì›", "garden"),
java.util.Map.entry("ë§ˆë‹¹", "yard"),
java.util.Map.entry("í…Œë¼ìŠ¤", "terrace"),
java.util.Map.entry("ë°œì½”ë‹ˆ", "balcony"),
java.util.Map.entry("ì£¼ì°¨ì¥", "parking_lot"),
java.util.Map.entry("ì‚°ì±…ë¡œ", "walking_path"),
java.util.Map.entry("ì—˜ë¦¬ë² ì´í„°", "elevator"),
java.util.Map.entry("ê³„ë‹¨", "stairs"),
java.util.Map.entry("ì‚¬ë¬´ì‹¤", "office"),
java.util.Map.entry("ì ‘ìˆ˜ì²˜", "reception"),
java.util.Map.entry("ê°„í˜¸", "nursing"),
java.util.Map.entry("ê°„ë³‘", "care"),
java.util.Map.entry("ì¹˜ë£Œ", "treatment"),
java.util.Map.entry("ì¬í™œ", "rehabilitation"),
java.util.Map.entry("ë¬¼ë¦¬ì¹˜ë£Œ", "physical_therapy"),
java.util.Map.entry("ê±´ê°•ê´€ë¦¬", "health_care"),
java.util.Map.entry("ê¹¨ë—í•œ", "clean"),
java.util.Map.entry("ë°ì€", "bright"),
java.util.Map.entry("ë„“ì€", "spacious"),
java.util.Map.entry("ì•ˆì „í•œ", "safe"),
java.util.Map.entry("í¸ì•ˆí•œ", "comfortable"),
java.util.Map.entry("í˜„ëŒ€ì ", "modern"),
java.util.Map.entry("ê³ ê¸‰", "premium"),
java.util.Map.entry("ì•„ì¹¨", "morning"),
java.util.Map.entry("ì ì‹¬", "lunch"),
java.util.Map.entry("ì €ë…", "evening"),
java.util.Map.entry("ì•", "front"),
java.util.Map.entry("ë’¤", "back"),
java.util.Map.entry("ì¸µ", "floor"),
java.util.Map.entry("1ì¸µ", "first_floor"),
java.util.Map.entry("2ì¸µ", "second_floor"),
java.util.Map.entry("1", "one"),
java.util.Map.entry("2", "two"),
java.util.Map.entry("3", "three"),
java.util.Map.entry("4", "four"),
java.util.Map.entry("5", "five"),
java.util.Map.entry("ì²«ë²ˆì§¸", "first"),
java.util.Map.entry("ë‘ë²ˆì§¸", "second"),
java.util.Map.entry("ì„¸ë²ˆì§¸", "third")
â‹®----
for (java.util.Map.Entry<String, String> entry : koreanToEnglish.entrySet()) {
result = result.replace(entry.getKey(), entry.getValue());
â‹®----
if (containsKorean(result)) {
result = convertKoreanToRomanization(result);
â‹®----
private String convertKoreanToRomanization(String korean) {
â‹®----
java.util.Map<String, String> koreanRomanization = java.util.Map.ofEntries(
java.util.Map.entry("ã„±", "g"), java.util.Map.entry("ã„´", "n"), java.util.Map.entry("ã„·", "d"),
java.util.Map.entry("ã„¹", "r"), java.util.Map.entry("ã…", "m"), java.util.Map.entry("ã…‚", "b"),
java.util.Map.entry("ã……", "s"), java.util.Map.entry("ã…‡", ""), java.util.Map.entry("ã…ˆ", "j"),
java.util.Map.entry("ã…Š", "ch"), java.util.Map.entry("ã…‹", "k"), java.util.Map.entry("ã…Œ", "t"),
java.util.Map.entry("ã…", "p"), java.util.Map.entry("ã…", "h"),
java.util.Map.entry("ã…", "a"), java.util.Map.entry("ã…‘", "ya"), java.util.Map.entry("ã…“", "eo"),
java.util.Map.entry("ã…•", "yeo"), java.util.Map.entry("ã…—", "o"), java.util.Map.entry("ã…›", "yo"),
java.util.Map.entry("ã…œ", "u"), java.util.Map.entry("ã… ", "yu"), java.util.Map.entry("ã…¡", "eu"),
java.util.Map.entry("ã…£", "i"), java.util.Map.entry("ã…", "ae"), java.util.Map.entry("ã…”", "e"),
java.util.Map.entry("ê°€", "ga"), java.util.Map.entry("ë‚˜", "na"), java.util.Map.entry("ë‹¤", "da"),
java.util.Map.entry("ë¼", "ra"), java.util.Map.entry("ë§ˆ", "ma"), java.util.Map.entry("ë°”", "ba"),
java.util.Map.entry("ì‚¬", "sa"), java.util.Map.entry("ì", "ja"), java.util.Map.entry("ì°¨", "cha"),
java.util.Map.entry("ì¹´", "ka"), java.util.Map.entry("íƒ€", "ta"), java.util.Map.entry("íŒŒ", "pa"),
java.util.Map.entry("í•˜", "ha"),
java.util.Map.entry("ê¹€", "kim"), java.util.Map.entry("ì´", "lee"), java.util.Map.entry("ë°•", "park"),
java.util.Map.entry("ìµœ", "choi"), java.util.Map.entry("ì •", "jung"), java.util.Map.entry("ê°•", "kang"),
java.util.Map.entry("ì¡°", "cho"), java.util.Map.entry("ìœ¤", "yoon"), java.util.Map.entry("ì¥", "jang"),
java.util.Map.entry("ì„", "lim"), java.util.Map.entry("í•œ", "han"), java.util.Map.entry("ì˜¤", "oh"),
java.util.Map.entry("ì„œ", "seo"), java.util.Map.entry("ì‹ ", "shin"), java.util.Map.entry("ê¶Œ", "kwon"),
java.util.Map.entry("í™©", "hwang"), java.util.Map.entry("ì•ˆ", "ahn"), java.util.Map.entry("ì†¡", "song"),
java.util.Map.entry("ë¥˜", "ryu"), java.util.Map.entry("ì „", "jeon"), java.util.Map.entry("í™", "hong")
â‹®----
for (java.util.Map.Entry<String, String> entry : koreanRomanization.entrySet()) {
â‹®----
result = "korean_" + System.currentTimeMillis() % 10000;
â‹®----
private String sanitizeFilename(String filename) {
if (filename == null || filename.trim().isEmpty()) {
â‹®----
String sanitized = filename.replaceAll("[^a-zA-Z0-9_-]", "_")
.replaceAll("_{2,}", "_")
.replaceAll("^_+|_+$", ""); // ì•ë’¤ ì–¸ë”ìŠ¤ì½”ì–´ ì œê±°
// ë„ˆë¬´ ê¸¸ë©´ ìë¥´ê¸° (ìµœëŒ€ 30ì)
if (sanitized.length() > 30) {
sanitized = sanitized.substring(0, 30);
â‹®----
// ë¹„ì–´ìˆìœ¼ë©´ ê¸°ë³¸ê°’
if (sanitized.isEmpty()) {
â‹®----
private boolean containsKorean(String text) {
â‹®----
return text.matches(".*[ã„±-ã…ã…-ã…£ê°€-í£]+.*");
â‹®----
private void validateImageFile(MultipartFile file) {
if (file == null || file.isEmpty()) {
throw new IllegalArgumentException("ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
â‹®----
if (file.getSize() > Constants.MAX_FILE_SIZE) {
throw new IllegalArgumentException(String.format("íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤. ìµœëŒ€ %dMBê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.",
â‹®----
if (originalFilename == null || !originalFilename.contains(".")) {
throw new IllegalArgumentException("ìœ íš¨í•˜ì§€ ì•Šì€ íŒŒì¼ì…ë‹ˆë‹¤.");
â‹®----
String extension = originalFilename.substring(originalFilename.lastIndexOf(".") + 1).toLowerCase();
â‹®----
if (allowedExt.equals(extension)) {
â‹®----
throw new IllegalArgumentException(String.format("ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤. ì§€ì› í˜•ì‹: %s",
String.join(", ", Constants.ALLOWED_IMAGE_EXTENSIONS)));
â‹®----
String contentType = file.getContentType();
if (contentType == null || !contentType.startsWith("image/")) {
throw new IllegalArgumentException("ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
â‹®----
log.debug("âœ… ì´ë¯¸ì§€ íŒŒì¼ ê²€ì¦ í†µê³¼ - íŒŒì¼ëª…: {}, í¬ê¸°: {}KB, íƒ€ì…: {}",
originalFilename, file.getSize() / 1024, contentType);
â‹®----
public boolean updateImageOrder(Long imageId, Integer imageOrder) {
â‹®----
log.info("ğŸ”¢ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ - imageId: {}, newOrder: {}", imageId, imageOrder);
int result = facilityImageMapper.updateImageOrder(imageId, imageOrder);
â‹®----
log.info("âœ… ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì„±ê³µ - imageId: {}, newOrder: {}", imageId, imageOrder);
â‹®----
log.warn("âš ï¸ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ - imageId: {}, newOrder: {}", imageId, imageOrder);
â‹®----
log.error("âŒ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - imageId: {}, newOrder: {}", imageId, imageOrder, e);
â‹®----
public boolean reorderAllFacilityImages(Long facilityId) {
â‹®----
log.info("ğŸ”„ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ ì‹œì‘ - facilityId: {}", facilityId);
â‹®----
if (images.isEmpty()) {
log.info("â„¹ï¸ ì¬ì •ë ¬í•  ì´ë¯¸ì§€ê°€ ì—†ìŒ - facilityId: {}", facilityId);
â‹®----
log.info("ğŸ“Š ì¬ì •ë ¬í•  ì´ë¯¸ì§€ ìˆ˜: {} - facilityId: {}", images.size(), facilityId);
for (int i = 0; i < images.size(); i++) {
FacilityImageDTO image = images.get(i);
â‹®----
if (image.getImageOrder() == null || !image.getImageOrder().equals(newOrder)) {
int updateResult = facilityImageMapper.updateImageOrder(image.getImageId(), newOrder);
â‹®----
log.debug("âœ… ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ - imageId: {}, ê¸°ì¡´: {} â†’ ìƒˆë¡œìš´: {}",
image.getImageId(), image.getImageOrder(), newOrder);
â‹®----
log.warn("âš ï¸ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ ì‹¤íŒ¨ - imageId: {}, ìƒˆë¡œìš´ ìˆœì„œ: {}",
image.getImageId(), newOrder);
â‹®----
log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ ì™„ë£Œ - facilityId: {}", facilityId);
â‹®----
log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ìˆœì„œ ì¬ì •ë ¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
â‹®----
public boolean updateImageOrdersBatch(Long facilityId, List<Long> imageIds) {
â‹®----
log.info("ğŸ”¢ ë°°ì¹˜ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì‹œì‘ - facilityId: {}, imageIds: {}", facilityId, imageIds);
if (imageIds == null || imageIds.isEmpty()) {
log.warn("âš ï¸ ì—…ë°ì´íŠ¸í•  ì´ë¯¸ì§€ ID ëª©ë¡ì´ ë¹„ì–´ìˆìŒ - facilityId: {}", facilityId);
â‹®----
if (imageIds.size() > existingImageCount) {
log.warn("âš ï¸ ì „ë‹¬ë°›ì€ ì´ë¯¸ì§€ ID ìˆ˜ê°€ ê¸°ì¡´ ì´ë¯¸ì§€ ìˆ˜ë³´ë‹¤ ë§ìŒ - facilityId: {}, ì „ë‹¬ë°›ì€: {}, ê¸°ì¡´: {}",
facilityId, imageIds.size(), existingImageCount);
â‹®----
for (int i = 0; i < imageIds.size(); i++) {
Long imageId = imageIds.get(i);
â‹®----
FacilityImageDTO existingImage = facilityImageMapper.getImageById(imageId);
if (existingImage == null || !existingImage.getFacilityId().equals(facilityId)) {
log.warn("âš ï¸ ì˜ëª»ëœ ì´ë¯¸ì§€ ID ë˜ëŠ” ì‹œì„¤ ë¶ˆì¼ì¹˜ - imageId: {}, facilityId: {}",
â‹®----
int updateResult = facilityImageMapper.updateImageOrder(imageId, newOrder);
â‹®----
log.debug("âœ… ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ - imageId: {}, ìƒˆë¡œìš´ ìˆœì„œ: {}", imageId, newOrder);
â‹®----
log.warn("âš ï¸ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ - imageId: {}, ìƒˆë¡œìš´ ìˆœì„œ: {}", imageId, newOrder);
â‹®----
boolean success = successCount == imageIds.size();
â‹®----
log.info("âœ… ë°°ì¹˜ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ - facilityId: {}, ì„±ê³µ: {}/{}",
facilityId, successCount, imageIds.size());
â‹®----
log.warn("âš ï¸ ë°°ì¹˜ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ë¶€ë¶„ ì‹¤íŒ¨ - facilityId: {}, ì„±ê³µ: {}/{}",
â‹®----
log.error("âŒ ë°°ì¹˜ ì´ë¯¸ì§€ ìˆœì„œ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
â‹®----
public boolean deleteAllFacilityImages(Long facilityId) {
â‹®----
log.info("ğŸ—‘ï¸ ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì™„ì „ ì‚­ì œ ì‹œì‘ - facilityId: {}", facilityId);
List<FacilityImageDTO> imagesToDelete = facilityImageMapper.getImagesByFacilityId(facilityId);
if (imagesToDelete.isEmpty()) {
log.info("â„¹ï¸ ì‚­ì œí•  ì´ë¯¸ì§€ê°€ ì—†ìŒ - facilityId: {}", facilityId);
â‹®----
log.info("ğŸ“Š ì‚­ì œí•  ì´ë¯¸ì§€ ìˆ˜: {}", imagesToDelete.size());
â‹®----
if (image.getImagePath() != null && !image.getImagePath().trim().isEmpty()) {
imagePaths.add(image.getImagePath());
â‹®----
int deletedCount = facilityImageMapper.deleteAllImagesByFacilityId(facilityId);
log.info("âœ… DBì—ì„œ {} ê°œ ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - facilityId: {}", deletedCount, facilityId);
â‹®----
if (deleteImageFile(imagePath)) {
â‹®----
log.info("âœ… íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ {}/{} ê°œ íŒŒì¼ ì‚­ì œ ì™„ë£Œ", fileDeletedCount, imagePaths.size());
â‹®----
log.error("âŒ ì‹œì„¤ì˜ ëª¨ë“  ì´ë¯¸ì§€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
â‹®----
public List<FacilityImageDTO> uploadMultipleImages(Long facilityId, List<MultipartFile> images) {
â‹®----
log.info("ğŸ“¤ ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œì‘ - facilityId: {}, ì´ë¯¸ì§€ ìˆ˜: {}", facilityId, images.size());
List<FacilityImageDTO> existingImages = facilityImageMapper.getImagesByFacilityId(facilityId);
int currentCount = existingImages.size();
â‹®----
log.info("ê¸°ì¡´ ì´ë¯¸ì§€ ìˆ˜: {}, ì‹œì‘ ìˆœì„œ ë²ˆí˜¸: {}", currentCount, nextOrderNum);
â‹®----
File directory = new File(uploadDir);
if (!directory.exists()) {
boolean created = directory.mkdirs();
log.info("ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} (ì„±ê³µ: {})", uploadDir, created);
â‹®----
MultipartFile image = images.get(i);
â‹®----
String originalFilename = image.getOriginalFilename();
â‹®----
String uniqueFilename = UUID.randomUUID().toString() + extension;
â‹®----
// íŒŒì¼ ì €ì¥
File destinationFile = new File(filePath);
image.transferTo(destinationFile);
log.info("íŒŒì¼ ì €ì¥ ì™„ë£Œ: {} -> {}", originalFilename, uniqueFilename);
// DTO ìƒì„±
â‹®----
imageDTO.setImagePath("/uploads/facility/" + uniqueFilename);
imageDTO.setImageAltText(originalFilename); // ALT í…ìŠ¤íŠ¸ì— ì›ë³¸ íŒŒì¼ëª… ì €ì¥
imageDTO.setImageOrder(nextOrderNum + i);
imageDTO.setIsMainImage(currentCount == 0 && i == 0); // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ê°€ ë©”ì¸
// DB ì €ì¥
int result = facilityImageMapper.insertFacilityImage(imageDTO);
â‹®----
uploadedImages.add(imageDTO);
log.info("ì´ë¯¸ì§€ DB ì €ì¥ ì™„ë£Œ: {} (ìˆœì„œ: {})", uniqueFilename, imageDTO.getImageOrder());
â‹®----
log.warn("ì´ë¯¸ì§€ DB ì €ì¥ ì‹¤íŒ¨: {}", uniqueFilename);
// ì‹¤íŒ¨í•œ íŒŒì¼ ì‚­ì œ
destinationFile.delete();
â‹®----
log.error("ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ì‹¤íŒ¨: {}", image.getOriginalFilename(), e);
â‹®----
log.error("ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜: {}", image.getOriginalFilename(), e);
â‹®----
log.info("âœ… ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ - facilityId: {}, ì„±ê³µ: {}/{}",
facilityId, uploadedImages.size(), images.size());
â‹®----
log.error("âŒ ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
// ì‹¤íŒ¨ ì‹œ ì—…ë¡œë“œëœ íŒŒì¼ë“¤ ë¡¤ë°±
â‹®----
if (uploadedImage.getImageId() != null) {
facilityImageMapper.deleteFacilityImage(uploadedImage.getImageId());
â‹®----
deleteImageFile(uploadedImage.getImagePath());
â‹®----
log.error("ë¡¤ë°± ì¤‘ ì˜¤ë¥˜:", rollbackException);
â‹®----
throw new RuntimeException("ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
`````

## File: src/main/java/com/example/carelink/service/FacilityService.java
`````java
public class FacilityService {
â‹®----
private static final Logger log = LoggerFactory.getLogger(FacilityService.class);
â‹®----
public List<FacilityDTO> searchFacilities(FacilityDTO searchDTO) {
log.info("ì‹œì„¤ ê²€ìƒ‰ ì„œë¹„ìŠ¤ í˜¸ì¶œ - facilityName: {}, address: {}, facilityType: {}",
searchDTO.getFacilityName(), searchDTO.getAddress(), searchDTO.getFacilityType());
List<FacilityDTO> results = facilityMapper.searchFacilities(searchDTO);
log.info("ì‹œì„¤ ê²€ìƒ‰ ê²°ê³¼ - ì´ {}ê°œ ì‹œì„¤ ë°œê²¬", results.size());
â‹®----
FacilityImageDTO mainImage = facilityImageService.getMainImageByFacilityId(facility.getFacilityId());
if (mainImage != null && mainImage.getImagePath() != null) {
facility.setFacilityImage(mainImage.getImagePath());
â‹®----
log.warn("ì‹œì„¤ ê²€ìƒ‰ ì¤‘ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ ì‹¤íŒ¨ - facilityId: {}", facility.getFacilityId(), e);
facility.setFacilityImage(null);
â‹®----
public FacilityDTO getFacilityById(Long facilityId) {
â‹®----
log.warn("ì‹œì„¤ IDê°€ nullì…ë‹ˆë‹¤.");
â‹®----
log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì‹œì‘ - facilityId: {}", facilityId);
FacilityDTO facility = facilityMapper.getFacilityById(facilityId);
â‹®----
log.warn("ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ - facilityId: {}", facilityId);
â‹®----
FacilityImageDTO mainImage = facilityImageService.getMainImageByFacilityId(facilityId);
â‹®----
log.info("âœ… ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì„¤ì • ì™„ë£Œ - imagePath: {}", mainImage.getImagePath());
â‹®----
log.info("âš ï¸ ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì—†ìŒ - facilityId: {}", facilityId);
â‹®----
log.error("âŒ ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
â‹®----
log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì™„ë£Œ - facilityName: {}, status: {}, mainImage: {}",
facility.getFacilityName(), facility.getStatus(), facility.getFacilityImage());
â‹®----
public List<FacilityDTO> getAllFacilities() {
â‹®----
log.info("ì „ì²´ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì‹œì‘");
List<FacilityDTO> facilities = facilityMapper.getAllFacilities();
log.info("ì „ì²´ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", facilities.size());
â‹®----
log.error("ì „ì²´ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
throw new RuntimeException("ì‹œì„¤ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int insertFacility(FacilityDTO facilityDTO) {
return facilityMapper.insertFacility(facilityDTO);
â‹®----
public int updateFacility(FacilityDTO facilityDTO) {
return facilityMapper.updateFacility(facilityDTO);
â‹®----
public int deleteFacility(Long facilityId) {
return facilityMapper.deleteFacility(facilityId);
â‹®----
public int countFacilitiesByRegion(String region) {
return facilityMapper.countFacilitiesByRegion(region);
â‹®----
public int getFacilityCount() {
â‹®----
return facilityMapper.getFacilityCount();
â‹®----
public List<FacilityDTO> getAllActiveFacilities() {
log.info("í™œì„±í™”ëœ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì‹œì‘");
List<FacilityDTO> facilities = facilityMapper.getAllActiveFacilities();
if (!facilities.isEmpty()) {
FacilityDTO firstFacility = facilities.get(0);
log.info("ì²« ë²ˆì§¸ ì‹œì„¤ ì •ë³´ - ID: {}, ì´ë¦„: {}, ìŠ¹ì¸ìƒíƒœ: {}",
firstFacility.getFacilityId(),
firstFacility.getFacilityName(),
firstFacility.getStatus());
â‹®----
log.info("í™œì„±í™”ëœ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - ì¡°íšŒëœ ê±´ìˆ˜: {}", facilities.size());
â‹®----
public boolean validateFacilityStatus(FacilityDTO facility) {
â‹®----
log.warn("ì‹œì„¤ ì •ë³´ê°€ nullì…ë‹ˆë‹¤.");
â‹®----
if (facility.isDeletedStatus()) {
log.warn("ì‚­ì œëœ ì‹œì„¤ì…ë‹ˆë‹¤ - facilityId: {}", facility.getFacilityId());
â‹®----
if (facility.isPendingStatus()) {
log.warn("ìŠ¹ì¸ë˜ì§€ ì•Šì€ ì‹œì„¤ì…ë‹ˆë‹¤ - facilityId: {}", facility.getFacilityId());
â‹®----
public List<FacilityDTO> getFacilitiesByMemberId(Long memberId) {
â‹®----
log.info("íšŒì›ì˜ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì‹œì‘ - memberId: {}", memberId);
List<FacilityDTO> facilities = facilityMapper.getFacilitiesByMemberId(memberId);
â‹®----
log.info("íšŒì›ì˜ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - memberId: {}, ì‹œì„¤ ìˆ˜: {}",
memberId, facilities.size());
â‹®----
log.info("íšŒì›ì˜ ì‹œì„¤ ì •ë³´ ì—†ìŒ - memberId: {}", memberId);
â‹®----
log.error("íšŒì›ì˜ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - memberId: {}", memberId, e);
throw new RuntimeException("ì‹œì„¤ ì •ë³´ ì¡°íšŒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public FacilityDTO getFacilityByMemberId(Long memberId) {
â‹®----
log.info("íšŒì›ì˜ ì²« ë²ˆì§¸ ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì‹œì‘ - memberId: {}", memberId);
â‹®----
FacilityDTO facility = facilities.get(0);
log.info("íšŒì›ì˜ ì²« ë²ˆì§¸ ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì™„ë£Œ - memberId: {}, facilityId: {}, facilityName: {}",
memberId, facility.getFacilityId(), facility.getFacilityName());
â‹®----
log.error("íšŒì›ì˜ ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - memberId: {}", memberId, e);
â‹®----
public void updateFacility(FacilityDTO facilityDTO, MultipartFile facilityImageFile) {
â‹®----
log.info("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì‹œì‘ - facilityId: {}, facilityName: {}",
facilityDTO.getFacilityId(), facilityDTO.getFacilityName());
if (facilityImageFile != null && !facilityImageFile.isEmpty()) {
String imagePath = saveFacilityImage(facilityImageFile, facilityDTO.getFacilityId().toString());
facilityDTO.setFacilityImage(imagePath);
log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸ - facilityId: {}, imagePath: {}",
facilityDTO.getFacilityId(), imagePath);
â‹®----
int result = facilityMapper.updateFacility(facilityDTO);
â‹®----
throw new RuntimeException("ì‹œì„¤ ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
â‹®----
log.info("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì™„ë£Œ - facilityId: {}", facilityDTO.getFacilityId());
â‹®----
log.error("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityDTO.getFacilityId(), e);
throw new RuntimeException("ì‹œì„¤ ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
private String saveFacilityImage(MultipartFile file, String facilityId) {
â‹®----
File uploadDirFile = new File(uploadDir);
if (!uploadDirFile.exists()) {
boolean created = uploadDirFile.mkdirs();
log.info("ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±: {} - {}", uploadDir, created ? "ì„±ê³µ" : "ì‹¤íŒ¨");
â‹®----
String originalFilename = file.getOriginalFilename();
â‹®----
if (originalFilename != null && originalFilename.contains(".")) {
extension = originalFilename.substring(originalFilename.lastIndexOf("."));
â‹®----
String savedFilename = "facility_" + facilityId + "_" + UUID.randomUUID().toString() + extension;
File savedFile = new File(uploadDir + savedFilename);
file.transferTo(savedFile);
log.info("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ: {}", savedFile.getAbsolutePath());
â‹®----
log.error("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
throw new RuntimeException("ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public List<FacilityDTO> getFacilitiesByApprovalStatus(String status) {
â‹®----
log.info("ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ - status: {}", status);
List<FacilityDTO> facilities = facilityMapper.getFacilitiesByApprovalStatus(status);
log.info("ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ - status: {}, count: {}", status, facilities.size());
â‹®----
log.error("ìŠ¹ì¸ ìƒíƒœë³„ ì‹œì„¤ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - status: {}", status, e);
throw new RuntimeException("ì‹œì„¤ ëª©ë¡ ì¡°íšŒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public void updateFacilityApprovalStatus(Long facilityId, String newStatus, String reason) {
â‹®----
log.info("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ - facilityId: {}, newStatus: {}, reason: {}",
â‹®----
int result = facilityMapper.updateFacilityApprovalStatus(facilityId, newStatus, reason);
â‹®----
throw new RuntimeException("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
â‹®----
log.info("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ ì™„ë£Œ - facilityId: {}, newStatus: {}", facilityId, newStatus);
â‹®----
log.error("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
throw new RuntimeException("ì‹œì„¤ ìŠ¹ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int countPendingFacilities() {
â‹®----
int count = facilityMapper.countFacilitiesByStatus("PENDING");
log.info("ìŠ¹ì¸ ëŒ€ê¸° ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì™„ë£Œ - count: {}", count);
â‹®----
log.error("ìŠ¹ì¸ ëŒ€ê¸° ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
public int countApprovedFacilities() {
â‹®----
int count = facilityMapper.countFacilitiesByStatus("APPROVED");
log.info("ìŠ¹ì¸ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì™„ë£Œ - count: {}", count);
â‹®----
log.error("ìŠ¹ì¸ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
public int countRejectedFacilities() {
â‹®----
int count = facilityMapper.countFacilitiesByStatus("REJECTED");
log.info("ê±°ë¶€ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì™„ë£Œ - count: {}", count);
â‹®----
log.error("ê±°ë¶€ëœ ì‹œì„¤ ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
`````

## File: build.gradle
`````
plugins {
    id 'org.springframework.boot' version '2.7.18'
    id 'io.spring.dependency-management' version '1.0.15.RELEASE'
    id 'java'
}

group = 'com.example'
version = '0.0.1-SNAPSHOT'

java {
    sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11
}

repositories {
    mavenCentral()
    maven { url 'https://jitpack.io' }
}

dependencies {
    // Spring Boot ê¸°ë³¸ ì˜ì¡´ì„±
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-actuator'
    developmentOnly 'org.springframework.boot:spring-boot-devtools'

    // Thymeleaf í…œí”Œë¦¿ ì—”ì§„
    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'

    // MySQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° (ë¡œì»¬ ê°œë°œìš©)
    runtimeOnly 'com.mysql:mysql-connector-j'
    
    // PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° (Herokuìš©)
    runtimeOnly 'org.postgresql:postgresql'

    // MyBatis ì—°ë™
    implementation 'org.mybatis.spring.boot:mybatis-spring-boot-starter:2.3.1'

    // Lombok (ì½”ë“œ ìë™ ìƒì„±)
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'

    // ìœ íš¨ì„± ê²€ì¦
    implementation 'org.springframework.boot:spring-boot-starter-validation'

    // JSON ì²˜ë¦¬
    implementation 'com.fasterxml.jackson.core:jackson-databind'
    implementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310'

    // í…ŒìŠ¤íŠ¸ ì˜ì¡´ì„±
    testImplementation 'org.springframework.boot:spring-boot-starter-test'

    // Spring Security
    implementation 'org.springframework.boot:spring-boot-starter-security'

    // Thymeleafì™€ Spring Security ì—°ë™ì„ ìœ„í•œ í™•ì¥ ë¼ì´ë¸ŒëŸ¬ë¦¬
    implementation 'org.thymeleaf.extras:thymeleaf-extras-springsecurity5'

    // SpringDoc OpenAPI ì˜ì¡´ì„± ì¶”ê°€ (ì„ì‹œ ë¹„í™œì„±í™” - ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ í›„ í™œì„±í™” ì˜ˆì •)
    // implementation 'org.springdoc:springdoc-openapi-ui:1.7.0'
    // implementation 'org.springdoc:springdoc-openapi-security:1.7.0'

    // ì´ë¯¸ì§€ ì²˜ë¦¬
    implementation 'net.coobird:thumbnailator:0.4.19'
    // WebP ì§€ì›ì„ ìœ„í•œ ImageIO í™•ì¥ (ì„ì‹œ ë¹„í™œì„±í™” - ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„± ë¬¸ì œ)
    // implementation 'com.github.gotson:webp-imageio:0.2.2'

}

tasks.named('test') {
    useJUnitPlatform()
}
`````

## File: src/main/java/com/example/carelink/service/MemberService.java
`````java
public class MemberService {
â‹®----
public MemberDTO login(LoginDTO loginDTO) {
â‹®----
MemberDTO member = memberMapper.findByUserId(loginDTO.getUserId());
â‹®----
log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ì ID: {}", loginDTO.getUserId());
â‹®----
if (member.getIsDeleted() != null && member.getIsDeleted()) {
log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ì‚­ì œ ì²˜ë¦¬ëœ ê³„ì •ì…ë‹ˆë‹¤. ID: {}", loginDTO.getUserId());
â‹®----
if (member.getIsActive() != null && !member.getIsActive()) {
log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ë¹„í™œì„±í™”ëœ ê³„ì •: {}", loginDTO.getUserId());
â‹®----
if (member.getLoginFailCount() >= Constants.MAX_LOGIN_ATTEMPTS) {
log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ë¡œê·¸ì¸ ì‹œë„ íšŸìˆ˜ ì´ˆê³¼. ID: {}", loginDTO.getUserId());
â‹®----
log.info("=== ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ ë””ë²„ê·¸ ===");
log.info("DB ì €ì¥ëœ ë¹„ë°€ë²ˆí˜¸: {}", member.getPassword());
log.info("ì…ë ¥ëœ ë¹„ë°€ë²ˆí˜¸: {}", loginDTO.getPassword());
boolean passwordMatches = loginDTO.getPassword().equals(member.getPassword());
log.info("ë¹„ë°€ë²ˆí˜¸ ë§¤ì¹­ ê²°ê³¼: {}", passwordMatches);
â‹®----
memberMapper.updateLoginSuccess(member.getMemberId());
log.info("ë¡œê·¸ì¸ ì„±ê³µ: {}", loginDTO.getUserId());
â‹®----
memberMapper.updateLoginFail(member.getMemberId());
log.warn("ë¡œê·¸ì¸ ì‹¤íŒ¨: ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜. ID: {}, DB ë¹„ë°€ë²ˆí˜¸ ì‹œì‘: {}",
loginDTO.getUserId(), member.getPassword().substring(0, Math.min(10, member.getPassword().length())));
â‹®----
log.error("ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", loginDTO.getUserId(), e);
throw new RuntimeException("ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public void join(MemberDTO memberDTO) {
join(memberDTO, null);
â‹®----
public void join(MemberDTO memberDTO, MultipartFile facilityImageFile) {
â‹®----
log.info("íšŒì›ê°€ì… ì²˜ë¦¬ ì‹œì‘ - userId: {}, address: {}, detailAddress: {}",
memberDTO.getUserId(), memberDTO.getAddress(), memberDTO.getDetailAddress());
if (isUserIdDuplicate(memberDTO.getUserId())) {
throw new IllegalArgumentException("ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤.");
â‹®----
if (memberDTO.getEmail() != null && !memberDTO.getEmail().trim().isEmpty()) {
if (memberMapper.existsByEmail(memberDTO.getEmail())) {
throw new IllegalArgumentException("ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤.");
â‹®----
memberDTO.setMemberId(null);
if (memberDTO.getRole() == null || memberDTO.getRole().isEmpty()) {
memberDTO.setRole(Constants.MEMBER_ROLE_USER);
â‹®----
memberDTO.setIsActive(true);
memberDTO.setLoginFailCount(0);
memberDTO.setIsDeleted(false);
if (memberDTO.getPhone() != null && memberDTO.getPhone().isEmpty()) {
memberDTO.setPhone(null);
â‹®----
if (memberDTO.getAddress() != null && memberDTO.getAddress().isEmpty()) {
memberDTO.setAddress(null);
â‹®----
if (memberDTO.getDetailAddress() != null && memberDTO.getDetailAddress().isEmpty()) {
memberDTO.setDetailAddress(null);
â‹®----
memberDTO.setProfileImage(null);
memberDTO.setLastLoginAt(null);
log.info("DB ì €ì¥ ì „ memberDTO - address: {}, detailAddress: {}",
memberDTO.getAddress(), memberDTO.getDetailAddress());
int result = memberMapper.insertMember(memberDTO);
â‹®----
throw new RuntimeException("íšŒì›ê°€ì… ë°ì´í„° ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. (ì˜í–¥ë°›ì€ í–‰ ì—†ìŒ)");
â‹®----
log.info("íšŒì›ê°€ì… DB ì €ì¥ ì„±ê³µ - memberId: {}", memberDTO.getMemberId());
if (Constants.MEMBER_ROLE_FACILITY.equals(memberDTO.getRole()) && memberDTO.getFacilityName() != null) {
FacilityDTO facilityDTO = new FacilityDTO();
facilityDTO.setFacilityName(memberDTO.getFacilityName());
facilityDTO.setFacilityType(memberDTO.getFacilityType());
facilityDTO.setAddress(memberDTO.getAddress());
facilityDTO.setDetailAddress(memberDTO.getDetailAddress());
facilityDTO.setPhone(memberDTO.getFacilityPhone());
facilityDTO.setDescription(memberDTO.getDescription());
facilityDTO.setHomepage(memberDTO.getHomepage());
facilityDTO.setCapacity(memberDTO.getCapacity());
facilityDTO.setOperatingHours(memberDTO.getOperatingHours());
facilityDTO.setFeatures(memberDTO.getFeatures());
facilityDTO.setLatitude(memberDTO.getLatitude());
facilityDTO.setLongitude(memberDTO.getLongitude());
facilityDTO.setRegisteredMemberId(memberDTO.getMemberId());
facilityDTO.setIsApproved(false);
facilityDTO.setApprovalStatus("PENDING");
if (facilityImageFile != null && !facilityImageFile.isEmpty()) {
String imagePath = saveFacilityImage(facilityImageFile, memberDTO.getUserId());
facilityDTO.setFacilityImage(imagePath);
â‹®----
int facilityResult = facilityMapper.insertFacility(facilityDTO);
â‹®----
throw new RuntimeException("ì‹œì„¤ ì •ë³´ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
â‹®----
log.info("ì‹œì„¤ ì •ë³´ ì €ì¥ ì„±ê³µ: {}", facilityDTO.getFacilityName());
â‹®----
log.info("íšŒì›ê°€ì… ì„±ê³µ: {}", memberDTO.getUserId());
â‹®----
log.warn("íšŒì›ê°€ì… ì‹¤íŒ¨ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§): {}", e.getMessage());
â‹®----
log.error("íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ ë°œìƒ: {}", memberDTO.getUserId(), e);
throw new RuntimeException("íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.", e);
â‹®----
public boolean isUserIdDuplicate(String userId) {
â‹®----
return memberMapper.existsByUserId(userId);
â‹®----
log.error("ì‚¬ìš©ì ID ì¤‘ë³µ ì²´í¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", userId, e);
throw new RuntimeException("ì¤‘ë³µ ì²´í¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public MemberDTO findById(Long memberId) {
â‹®----
return memberMapper.findById(memberId);
â‹®----
log.error("íšŒì› ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", memberId, e);
throw new RuntimeException("íšŒì› ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public MemberDTO getMemberByUserId(String userId) {
â‹®----
return memberMapper.findByUserId(userId);
â‹®----
log.error("ì‚¬ìš©ì IDë¡œ íšŒì› ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", userId, e);
â‹®----
public void updateMember(MemberDTO memberDTO, MultipartFile profileImageFile) throws Exception {
log.info("íšŒì›ì •ë³´ ìˆ˜ì • ìš”ì²­: memberId={}, name={}, email={}",
memberDTO.getMemberId(), memberDTO.getName(), memberDTO.getEmail());
MemberDTO existingMember = memberMapper.findById(memberDTO.getMemberId());
â‹®----
throw new IllegalArgumentException("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì›ì…ë‹ˆë‹¤.");
â‹®----
log.info("ê¸°ì¡´ íšŒì› ì •ë³´: memberId={}, name={}, email={}",
existingMember.getMemberId(), existingMember.getName(), existingMember.getEmail());
memberDTO.setPassword(existingMember.getPassword());
memberDTO.setRole(existingMember.getRole());
memberDTO.setIsActive(existingMember.getIsActive());
memberDTO.setIsDeleted(existingMember.getIsDeleted());
memberDTO.setLoginFailCount(existingMember.getLoginFailCount());
memberDTO.setLastLoginAt(existingMember.getLastLoginAt());
memberDTO.setCreatedAt(existingMember.getCreatedAt());
if (profileImageFile != null && !profileImageFile.isEmpty()) {
String profileImagePath = saveProfileImage(profileImageFile, existingMember.getUserId());
memberDTO.setProfileImage(profileImagePath);
if (existingMember.getProfileImage() != null && !existingMember.getProfileImage().isEmpty()) {
â‹®----
String projectRoot = System.getProperty("user.dir");
String oldImagePath = existingMember.getProfileImage();
if (oldImagePath.startsWith("/uploads/profile/")) {
String oldFileName = oldImagePath.substring("/uploads/profile/".length());
File oldFile = new File(projectRoot + "/src/main/resources/static" + oldImagePath);
if (oldFile.exists() && oldFile.delete()) {
log.info("ê¸°ì¡´ í”„ë¡œí•„ ì´ë¯¸ì§€ ì‚­ì œ ì„±ê³µ: {}", oldFile.getAbsolutePath());
â‹®----
log.warn("ê¸°ì¡´ í”„ë¡œí•„ ì´ë¯¸ì§€ ì‚­ì œ ì‹¤íŒ¨: {}", e.getMessage());
â‹®----
memberDTO.setProfileImage(existingMember.getProfileImage());
log.debug("ìƒˆë¡œìš´ í”„ë¡œí•„ ì´ë¯¸ì§€ê°€ ì—†ì–´ ê¸°ì¡´ ì´ë¯¸ì§€ ìœ ì§€: {}", existingMember.getProfileImage());
â‹®----
log.info("ì—…ë°ì´íŠ¸í•  íšŒì› ì •ë³´: memberId={}, name={}, email={}, phone={}, address={}",
memberDTO.getMemberId(), memberDTO.getName(), memberDTO.getEmail(),
memberDTO.getPhone(), memberDTO.getAddress());
int result = memberMapper.updateMember(memberDTO);
log.info("íšŒì›ì •ë³´ ì—…ë°ì´íŠ¸ ì¿¼ë¦¬ ì‹¤í–‰ ê²°ê³¼: {} í–‰ì´ ì˜í–¥ë°›ìŒ", result);
â‹®----
throw new RuntimeException("íšŒì› ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì˜í–¥ë°›ì€ í–‰: 0");
â‹®----
log.info("íšŒì›ì •ë³´ ìˆ˜ì • ì™„ë£Œ: userId={}, memberId={}", memberDTO.getUserId(), memberDTO.getMemberId());
â‹®----
public void changePassword(String userId, String currentPassword, String newPassword, String confirmNewPassword) {
MemberDTO member = memberMapper.findByUserId(userId);
â‹®----
throw new IllegalArgumentException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
if (!currentPassword.equals(member.getPassword())) {
throw new IllegalArgumentException("í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
â‹®----
if (!newPassword.equals(confirmNewPassword)) {
throw new IllegalArgumentException("ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ í™•ì¸ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
â‹®----
if (newPassword.length() < 8) {
throw new IllegalArgumentException("ìƒˆ ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
â‹®----
member.setPassword(newPassword);
int result = memberMapper.updatePassword(member);
â‹®----
throw new RuntimeException("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
â‹®----
log.info("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì„œë¹„ìŠ¤: {} ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë¨.", userId);
â‹®----
public Map<String, Integer> getUserContentCounts(Long memberId) {
â‹®----
List<BoardDTO> boards = boardMapper.findBoardsByMemberId(memberId);
List<ReviewDTO> reviews = reviewMapper.findReviewsByMemberId(memberId);
List<JobDTO> jobs = jobMapper.findJobsByMemberId(memberId);
int boardCount = boards != null ? boards.size() : 0;
int reviewCount = reviews != null ? reviews.size() : 0;
int jobCount = jobs != null ? jobs.size() : 0;
counts.put("board", boardCount);
counts.put("review", reviewCount);
counts.put("job", jobCount);
counts.put("total", boardCount + reviewCount + jobCount);
log.info("ì‚¬ìš©ì ì½˜í…ì¸  ê°œìˆ˜ ì¡°íšŒ: memberId={}, ê²°ê³¼={}", memberId, counts);
â‹®----
log.error("ì½˜í…ì¸  ê°œìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜: memberId={}", memberId, e);
counts.put("board", 0);
counts.put("review", 0);
counts.put("job", 0);
counts.put("total", 0);
â‹®----
public Map<String, Object> getMyPosts(Long memberId, String type, int page, int pageSize, int offset) {
â‹®----
Map<String, Integer> contentCounts = getUserContentCounts(memberId);
result.put("contentCounts", contentCounts);
if ("board".equals(type)) {
â‹®----
post.put("id", board.getBoardId());
post.put("title", board.getTitle());
post.put("content", board.getContent());
post.put("createdAt", board.getCreatedAt());
post.put("viewCount", board.getViewCount() != null ? board.getViewCount() : 0);
post.put("likeCount", board.getLikeCount() != null ? board.getLikeCount() : 0);
post.put("rating", null);
post.put("salary", null);
post.put("type", "board");
post.put("category", board.getBoardType());
post.put("url", "/board/detail/" + board.getBoardId());
posts.add(post);
â‹®----
} else if ("review".equals(type)) {
â‹®----
post.put("id", review.getReviewId());
post.put("title", review.getTitle());
post.put("content", review.getContent());
post.put("createdAt", review.getCreatedAt());
post.put("viewCount", null);
post.put("likeCount", review.getLikeCount() != null ? review.getLikeCount() : 0);
post.put("rating", review.getRating());
â‹®----
post.put("type", "review");
post.put("category", "ë¦¬ë·°");
post.put("url", "/review/detail/" + review.getReviewId());
â‹®----
} else if ("job".equals(type)) {
â‹®----
post.put("id", job.getJobId());
post.put("title", job.getTitle());
post.put("content", job.getContent());
post.put("createdAt", job.getCreatedAt());
post.put("viewCount", job.getViewCount() != null ? job.getViewCount() : 0);
post.put("likeCount", null);
â‹®----
post.put("salary", job.getSalaryDescription());
post.put("type", "job");
post.put("category", job.getJobType());
post.put("url", "/job/detail/" + job.getJobId());
â‹®----
posts.sort((a, b) -> ((java.time.LocalDateTime) b.get("createdAt")).compareTo((java.time.LocalDateTime) a.get("createdAt")));
int totalCount = posts.size();
int startIndex = Math.min(offset, totalCount);
int endIndex = Math.min(offset + pageSize, totalCount);
List<Map<String, Object>> pagedPosts = posts.subList(startIndex, endIndex);
result.put("posts", pagedPosts);
result.put("totalCount", totalCount);
log.info("ë‚´ê°€ ì“´ ê¸€ ì¡°íšŒ ì™„ë£Œ: memberId={}, type={}, ì´{}\uac1c, í˜„ì¬í˜ì´ì§€ {}\uac1c",
memberId, type, totalCount, pagedPosts.size());
â‹®----
log.error("ë‚´ê°€ ì“´ ê¸€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜: memberId={}, type={}", memberId, type, e);
result.put("posts", new ArrayList<>());
result.put("totalCount", 0);
result.put("contentCounts", Map.of("board", 0, "review", 0, "job", 0, "total", 0));
â‹®----
public String deleteMemberWithOption(String userId, String deleteOption) {
â‹®----
if ("anonymous".equals(deleteOption)) {
int result = memberMapper.anonymizeMember(userId);
â‹®----
throw new RuntimeException("íšŒì› ìµëª…í™” ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
log.info("íšŒì› ìµëª…í™” ì²˜ë¦¬ ì™„ë£Œ: {}", userId);
â‹®----
} else if ("complete".equals(deleteOption)) {
deleteAllUserContent(userId);
int result = memberMapper.hardDeleteMember(userId);
â‹®----
throw new RuntimeException("íšŒì› ì™„ì „ì‚­ì œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
log.info("íšŒì› ì™„ì „ì‚­ì œ ì²˜ë¦¬ ì™„ë£Œ: {}", userId);
â‹®----
int result = memberMapper.softDeleteMember(userId);
â‹®----
throw new RuntimeException("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
log.info("íšŒì› ë…¼ë¦¬ì‚­ì œ ì²˜ë¦¬ ì™„ë£Œ: {}", userId);
â‹®----
log.error("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: userId={}, option={}", userId, deleteOption, e);
throw new RuntimeException("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public void deleteAllUserContent(String userId) {
â‹®----
throw new RuntimeException("íšŒì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
Long memberId = member.getMemberId();
if (Constants.MEMBER_ROLE_FACILITY.equals(member.getRole())) {
jobMapper.deleteByFacilityMemberId(memberId);
log.info("ì‹œì„¤ êµ¬ì¸ê³µê³  ì‚­ì œ ì™„ë£Œ: memberId={}", memberId);
reviewMapper.deleteByFacilityMemberId(memberId);
log.info("ì‹œì„¤ ë¦¬ë·° ì‚­ì œ ì™„ë£Œ: memberId={}", memberId);
facilityMapper.deleteByMemberId(memberId);
log.info("ì‹œì„¤ ì •ë³´ ì‚­ì œ ì™„ë£Œ: memberId={}", memberId);
â‹®----
boardMapper.deleteByMemberId(memberId);
reviewMapper.deleteByMemberId(memberId);
jobMapper.deleteByMemberId(memberId);
log.info("ì‚¬ìš©ì ì½˜í…ì¸  ì‚­ì œ ì™„ë£Œ: userId={}, memberId={}", userId, memberId);
â‹®----
log.error("ì‚¬ìš©ì ì½˜í…ì¸  ì‚­ì œ ì¤‘ ì˜¤ë¥˜: userId={}", userId, e);
â‹®----
public void deleteMember(String userId) {
â‹®----
log.info("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì™„ë£Œ: {}", userId);
â‹®----
private String saveProfileImage(MultipartFile file, String userId) {
â‹®----
if (!imageOptimizationService.isSupportedImageFormat(file.getOriginalFilename())) {
throw new IllegalArgumentException("ì§€ì›í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ í˜•ì‹ì…ë‹ˆë‹¤. JPG, PNG, GIFë§Œ ì§€ì›ë©ë‹ˆë‹¤.");
â‹®----
String baseFileName = "profile_" + userId + "_" + UUID.randomUUID().toString();
log.info("í”„ë¡œí•„ ì´ë¯¸ì§€ WebP ë³€í™˜ ì‹œì‘: userId={}, originalFile={}",
userId, file.getOriginalFilename());
â‹®----
imageOptimizationService.processImage(file, baseFileName, uploadDir);
log.info("í”„ë¡œí•„ ì´ë¯¸ì§€ WebP ë³€í™˜ ì™„ë£Œ: userId={}, webpPath={}",
userId, result.getOriginalWebPPath());
return "/uploads/profile/" + result.getOriginalWebPPath();
â‹®----
log.error("í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: userId={}", userId, e);
throw new RuntimeException("í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
private String saveFacilityImage(MultipartFile file, String userId) {
â‹®----
String baseFileName = "facility_" + userId + "_" + UUID.randomUUID().toString();
log.info("ì‹œì„¤ ì´ë¯¸ì§€ WebP ë³€í™˜ ì‹œì‘: userId={}, originalFile={}",
â‹®----
log.info("ì‹œì„¤ ì´ë¯¸ì§€ WebP ë³€í™˜ ì™„ë£Œ: userId={}, webpPath={}",
â‹®----
return "/uploads/facility/" + result.getOriginalWebPPath();
â‹®----
log.error("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: userId={}", userId, e);
throw new RuntimeException("ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int getTotalMembersCount() {
â‹®----
return memberMapper.getTotalCount();
â‹®----
log.error("ì „ì²´ íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
throw new RuntimeException("íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int getMemberCount() {
â‹®----
return memberMapper.getMemberCount();
â‹®----
log.error("íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
public List<MemberDTO> getMembersWithPaging(MemberDTO searchDTO) {
â‹®----
return memberMapper.findMembersWithPaging(searchDTO);
â‹®----
log.error("í˜ì´ì§•ëœ íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
throw new RuntimeException("íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public List<MemberDTO> getMembersByRole(String role) {
â‹®----
return memberMapper.findMembersByRole(role);
â‹®----
log.error("ì—­í• ë³„ íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", role, e);
throw new RuntimeException("ì—­í• ë³„ íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public void updateMemberStatus(Long memberId, boolean isActive) {
â‹®----
memberMapper.updateMemberStatus(memberId, isActive);
log.info("íšŒì› ìƒíƒœ ë³€ê²½ ì™„ë£Œ: memberId={}, isActive={}", memberId, isActive);
â‹®----
log.error("íšŒì› ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}", memberId, e);
throw new RuntimeException("íšŒì› ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
â‹®----
public int getTotalMemberCount() {
â‹®----
public int getFacilityMemberCount() {
â‹®----
return memberMapper.getFacilityMemberCount();
â‹®----
log.error("ì‹œì„¤ íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
public List<MemberDTO> getMembersByRole(String role, int page, int pageSize) {
â‹®----
log.info("ì—­í• ë³„ íšŒì› ëª©ë¡ ì¡°íšŒ ì‹œì‘: role={}, page={}, pageSize={}", role, page, pageSize);
String searchRole = "ALL".equals(role) ? null : role;
List<MemberDTO> members = memberMapper.findMembersByRole(searchRole);
log.info("ì—­í• ë³„ íšŒì› ì¡°íšŒ ì™„ë£Œ: role={}, count={} ëª…", role, members.size());
â‹®----
log.error("ì—­í• ë³„ íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: role={}, page={}", role, page, e);
â‹®----
public int getMemberCountByRole(String role) {
â‹®----
if ("ALL".equals(role)) {
â‹®----
} else if ("FACILITY".equals(role)) {
â‹®----
} else if ("USER".equals(role)) {
return memberMapper.getUserMemberCount();
â‹®----
return memberMapper.getMemberCountByRole(role);
â‹®----
log.error("ì—­í• ë³„ íšŒì› ìˆ˜ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: role={}", role, e);
â‹®----
public boolean toggleMemberActive(Long memberId) {
â‹®----
MemberDTO member = memberMapper.findById(memberId);
â‹®----
throw new RuntimeException("íšŒì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
boolean newStatus = !Boolean.TRUE.equals(member.getIsActive());
memberMapper.updateMemberStatus(memberId, newStatus);
log.info("íšŒì› í™œì„±í™” ìƒíƒœ í† ê¸€ ì™„ë£Œ: memberId={}, newStatus={}", memberId, newStatus);
â‹®----
log.error("íšŒì› í™œì„±í™” ìƒíƒœ í† ê¸€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}", memberId, e);
`````

## File: src/main/resources/application.yml
`````yaml
server:
  port: 8080
  servlet:
    context-path: /
    encoding:
      charset: UTF-8
      enabled: true
      force: true
spring:
  jackson:
    serialization:
      write-dates-as-timestamps: false
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: ${DB_URL:jdbc:mysql://localhost:3306/carelink?useSSL=false&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=UTF-8}
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:mysql}
    hikari:
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      maximum-pool-size: 10
      minimum-idle: 5
      pool-name: CareLink-HikariCP
      auto-commit: false
      transaction-isolation: TRANSACTION_READ_COMMITTED
  thymeleaf:
    prefix: classpath:/templates/
    suffix: .html
    mode: HTML
    encoding: UTF-8
    cache: false
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB
mybatis:
  type-aliases-package: com.example.carelink.dto
  mapper-locations: classpath:mapper/*.xml
  configuration:
    map-underscore-to-camel-case: true
    jdbc-type-for-null: varchar
    default-fetch-size: 100
    default-statement-timeout: 30
logging:
  level:
    root: INFO
    com.example.carelink: DEBUG
    com.example.carelink.dao: DEBUG
    org.springframework.web: DEBUG
    org.springframework.jdbc: DEBUG
    org.mybatis: DEBUG
    org.apache.ibatis: DEBUG
    org.springframework.transaction: DEBUG
    java.sql: DEBUG
    jdbc.sqltiming: INFO
    com.zaxxer.hikari: DEBUG
file:
  upload-dir:
    facility: C:/carelink-uploads/facility/
    profile: C:/carelink-uploads/profile/
    board: C:/carelink-uploads/board/
    temp: C:/carelink-uploads/temp/
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: method
  show-actuator: true
  default-consumes-media-type: application/json
  default-produces-media-type: application/json
  paths-to-match:
    - /api/**
  packages-to-scan:
    - com.lightcare.controller
api:
  kakao:
    app-key: ${KAKAO_APP_KEY:b97b58672807a40c122a5deed8a98ea4}
`````

## File: src/main/resources/mapper/facilityMapper.xml
`````xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.carelink.dao.FacilityMapper">
    <resultMap id="facilityResultMap" type="com.example.carelink.dto.FacilityDTO">
        <id property="facilityId" column="facility_id"/>
        <result property="facilityName" column="facility_name"/>
        <result property="facilityType" column="facility_type"/>
        <result property="address" column="address"/>
        <result property="detailAddress" column="detail_address"/>
        <result property="phone" column="phone"/>
        <result property="latitude" column="latitude"/>
        <result property="longitude" column="longitude"/>
        <result property="description" column="description"/>
        <result property="facilityImage" column="facility_image"/>
        <result property="facilityImageAltText" column="facility_image_alt_text"/>
        <result property="homepage" column="homepage"/>
        <result property="capacity" column="capacity"/>
        <result property="currentOccupancy" column="current_occupancy"/>
        <result property="operatingHours" column="operating_hours"/>
        <result property="features" column="features"/>
        <result property="averageRating" column="average_rating"/>
        <result property="reviewCount" column="review_count"/>
        <result property="gradeRating" column="grade_rating"/>
        <result property="registeredMemberId" column="registered_member_id"/>
        <result property="registeredMemberName" column="registered_member_name"/>
        <result property="isApproved" column="is_approved"/>
        <result property="approvalStatus" column="approval_status"/>
    </resultMap>
    <select id="searchFacilities" resultMap="facilityResultMap">
        SELECT f.*, m.name as registered_member_name
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        <where>
            f.is_deleted = false
            AND f.is_approved = true
            <if test="facilityName != null and facilityName != ''">
                AND f.facility_name LIKE CONCAT('%', #{facilityName}, '%')
            </if>
            <if test="facilityType != null and facilityType != ''">
                AND f.facility_type = #{facilityType}
            </if>
            <if test="address != null and address != ''">
                AND f.address LIKE CONCAT(#{address}, '%')
            </if>
            <if test="swLat != null and swLng != null and neLat != null and neLng != null">
                AND (f.latitude BETWEEN #{swLat} AND #{neLat})
                AND (f.longitude BETWEEN #{swLng} AND #{neLng})
            </if>
        </where>
        ORDER BY f.created_at DESC
    </select>
    <select id="getFacilityById" resultType="com.example.carelink.dto.FacilityDTO">
        SELECT
            f.facility_id,
            f.facility_name,
            f.facility_type,
            f.address,
            f.phone,
            f.latitude,
            f.longitude,
            f.description,
            f.facility_image,
            f.homepage,
            f.capacity,
            f.current_occupancy,
            f.operating_hours,
            f.features,
            f.average_rating,
            f.review_count,
            f.grade_rating,
            f.registered_member_id,
            m.name as registered_member_name,
            f.is_deleted,
            f.is_approved,
            CASE
                WHEN f.is_deleted = true THEN 'ì‚­ì œë¨'
                WHEN f.is_approved = false THEN 'ìŠ¹ì¸ëŒ€ê¸°'
                ELSE 'ì •ìƒ'
            END as status
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        WHERE f.facility_id = #{facilityId}
    </select>
    <select id="getAllFacilities" resultMap="facilityResultMap">
        SELECT f.*, m.name as registered_member_name
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        WHERE f.is_deleted = false
        AND f.is_approved = true
        ORDER BY f.created_at DESC
    </select>
    <insert id="insertFacility" parameterType="com.example.carelink.dto.FacilityDTO" useGeneratedKeys="true" keyProperty="facilityId">
        INSERT INTO facility (
            facility_name, facility_type, address, detail_address, phone,
            latitude, longitude, description, facility_image, facility_image_alt_text, homepage,
            capacity, current_occupancy, operating_hours, features,
            average_rating, review_count, registered_member_id,
            is_approved, approval_status
        ) VALUES (
                     #{facilityName}, #{facilityType}, #{address}, #{detailAddress}, #{phone},
                     #{latitude}, #{longitude}, #{description}, #{facilityImage}, #{facilityImageAltText}, #{homepage},
                     #{capacity}, #{currentOccupancy}, #{operatingHours}, #{features},
                     #{averageRating}, #{reviewCount}, #{registeredMemberId},
                     #{isApproved}, #{approvalStatus}
                 )
    </insert>
    <update id="updateFacility" parameterType="com.example.carelink.dto.FacilityDTO">
        UPDATE facility
        SET
            facility_name = #{facilityName},
            facility_type = #{facilityType},
            address = #{address},
            detail_address = #{detailAddress},
            phone = #{phone},
            latitude = #{latitude},
            longitude = #{longitude},
            description = #{description},
            facility_image = #{facilityImage},
            facility_image_alt_text = #{facilityImageAltText},
            homepage = #{homepage},
            capacity = #{capacity},
            current_occupancy = #{currentOccupancy},
            operating_hours = #{operatingHours},
            features = #{features},
            average_rating = #{averageRating},
            review_count = #{reviewCount},
            registered_member_id = #{registeredMemberId},
            is_approved = #{isApproved},
            approval_status = #{approvalStatus},
            updated_at = NOW()
        WHERE facility_id = #{facilityId}
    </update>
    <delete id="deleteFacility">
        DELETE FROM facility WHERE facility_id = #{facilityId}
    </delete>
    <select id="countFacilitiesByRegion" resultType="int">
        SELECT COUNT(*)
        FROM facility
        WHERE address LIKE CONCAT(#{region}, '%')
    </select>
    <select id="getFacilityCount" resultType="int">
        SELECT COUNT(*)
        FROM facility
        WHERE is_deleted = false
        AND is_approved = true
    </select>
    <select id="getAllActiveFacilities" resultType="com.example.carelink.dto.FacilityDTO">
        SELECT
            f.facility_id,
            f.facility_name,
            f.facility_type,
            f.address,
            f.phone,
            f.average_rating,
            f.review_count,
            f.registered_member_id,
            m.name as registered_member_name,
            f.is_deleted,
            f.is_approved,
            CASE
                WHEN f.is_deleted = true THEN 'ì‚­ì œë¨'
                WHEN f.is_approved = false THEN 'ìŠ¹ì¸ëŒ€ê¸°'
                ELSE 'ì •ìƒ'
            END as status
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        WHERE f.is_deleted = false
        AND f.is_approved = true
        ORDER BY f.facility_name ASC
    </select>
    <delete id="deleteByMemberId" parameterType="long">
        DELETE FROM facility WHERE registered_member_id = #{memberId}
    </delete>
    <select id="getFacilitiesByMemberId" parameterType="long" resultType="FacilityDTO">
        SELECT
            facility_id as facilityId,
            facility_name as facilityName,
            facility_type as facilityType,
            address,
            detail_address as detailAddress,
            phone,
            latitude,
            longitude,
            description,
            facility_image as facilityImage,
            homepage,
            capacity,
            current_occupancy as currentOccupancy,
            operating_hours as operatingHours,
            features,
            average_rating as averageRating,
            review_count as reviewCount,
            grade_rating as gradeRating,
            registered_member_id as registeredMemberId,
            is_approved as isApproved,
            approval_status as approvalStatus,
            created_at as createdAt,
            updated_at as updatedAt,
            is_deleted as isDeleted
        FROM facility
        WHERE registered_member_id = #{memberId} AND is_deleted = false
        ORDER BY created_at DESC
    </select>
    <select id="getFacilityByMemberId" parameterType="long" resultType="FacilityDTO">
        SELECT
            facility_id as facilityId,
            facility_name as facilityName,
            facility_type as facilityType,
            address,
            detail_address as detailAddress,
            phone,
            latitude,
            longitude,
            description,
            facility_image as facilityImage,
            homepage,
            capacity,
            current_occupancy as currentOccupancy,
            operating_hours as operatingHours,
            features,
            average_rating as averageRating,
            review_count as reviewCount,
            grade_rating as gradeRating,
            registered_member_id as registeredMemberId,
            is_approved as isApproved,
            approval_status as approvalStatus,
            created_at as createdAt,
            updated_at as updatedAt,
            is_deleted as isDeleted
        FROM facility
        WHERE registered_member_id = #{memberId} AND is_deleted = false
        ORDER BY created_at DESC
        LIMIT 1
    </select>
    <select id="getFacilitiesByApprovalStatus" parameterType="string" resultType="FacilityDTO">
        SELECT
            f.facility_id,
            f.facility_name,
            f.facility_type,
            f.address,
            f.detail_address,
            f.phone,
            f.description,
            f.homepage,
            f.capacity,
            f.operating_hours,
            f.features,
            f.facility_image,
            f.latitude,
            f.longitude,
            f.approval_status,
            f.registered_member_id,
            f.created_at,
            f.updated_at,
            m.user_id as registeredUserName,
            m.name as registeredMemberName
        FROM facility f
        LEFT JOIN member m ON f.registered_member_id = m.member_id
        WHERE f.is_deleted = false
        <if test="approvalStatus != null and approvalStatus != ''">
            AND f.approval_status = #{approvalStatus}
        </if>
        ORDER BY f.created_at DESC
    </select>
    <update id="updateFacilityApprovalStatus">
        UPDATE facility
        SET
            approval_status = #{approvalStatus},
            is_approved = (#{approvalStatus} = 'APPROVED'),
            <if test="rejectionReason != null">
            description = CONCAT(COALESCE(description, ''), CHAR(10), 'ê±°ë¶€ì‚¬ìœ : ', #{rejectionReason}),
            </if>
            updated_at = NOW()
        WHERE facility_id = #{facilityId}
    </update>
    <select id="countFacilitiesByStatus" parameterType="string" resultType="int">
        SELECT COUNT(*)
        FROM facility
        WHERE is_deleted = false
        AND approval_status = #{approvalStatus}
    </select>
    <update id="updateFacilityMainImage">
        UPDATE facility
        SET
            facility_image = #{mainImagePath},
            image_count = #{imageCount},
            updated_at = NOW()
        WHERE facility_id = #{facilityId}
    </update>
</mapper>
`````

## File: src/main/java/com/example/carelink/controller/MemberController.java
`````java
public class MemberController {
â‹®----
public String loginForm(Model model) {
model.addAttribute("loginDTO", new LoginDTO());
â‹®----
public String login(@Valid @ModelAttribute LoginDTO loginDTO,
â‹®----
if (bindingResult.hasErrors()) {
log.warn("ë¡œê·¸ì¸ í¼ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨: {}", bindingResult.getAllErrors());
â‹®----
log.info("ë¡œê·¸ì¸ ì‹œë„: userId={}, ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´={}", loginDTO.getUserId(), loginDTO.getPassword().length());
â‹®----
MemberDTO loginMember = memberService.login(loginDTO);
â‹®----
session.setAttribute(Constants.SESSION_MEMBER, loginMember);
session.setAttribute("memberId", loginMember.getMemberId());
log.info("ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œê·¸ì¸ ì„±ê³µ: userId={}, role={}", loginMember.getUserId(), loginMember.getRole());
redirectAttributes.addFlashAttribute("message", "ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
log.warn("ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œê·¸ì¸ ì‹¤íŒ¨: userId={}", loginDTO.getUserId());
redirectAttributes.addFlashAttribute("error", "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
log.error("ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: userId={}", loginDTO.getUserId(), e);
redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String logout(HttpSession session, RedirectAttributes redirectAttributes) {
â‹®----
session.invalidate();
â‹®----
redirectAttributes.addFlashAttribute("message", "ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
public String joinForm(Model model) {
model.addAttribute("memberDTO", new MemberDTO());
â‹®----
public String join(
â‹®----
if (!memberDTO.getPassword().equals(memberDTO.getPasswordConfirm())) {
bindingResult.rejectValue("passwordConfirm", "password.mismatch", "ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
log.warn("íšŒì›ê°€ì… ì‹¤íŒ¨: ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ë¶ˆì¼ì¹˜");
model.addAttribute("memberDTO", memberDTO);
â‹®----
if ("FACILITY".equalsIgnoreCase(memberDTO.getRole())) {
Set<ConstraintViolation<MemberDTO>> violations = validator.validate(memberDTO, OnFacilityJoin.class);
â‹®----
bindingResult.rejectValue(violation.getPropertyPath().toString(), "", violation.getMessage());
â‹®----
// 3. ìµœì¢… ìœ íš¨ì„± ê²€ì‚¬ ê²°ê³¼ í™•ì¸ (ê¸°ë³¸ ìœ íš¨ì„± + ìˆ˜ë™ ì¶”ê°€ëœ ìœ íš¨ì„±)
â‹®----
log.warn("íšŒì›ê°€ì… ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨: {}", bindingResult.getAllErrors());
â‹®----
memberService.join(memberDTO, facilityImageFile);
log.info("íšŒì›ê°€ì… ì„±ê³µ: {}", memberDTO.getUserId());
LoginDTO loginDTO = new LoginDTO();
loginDTO.setUserId(memberDTO.getUserId());
loginDTO.setPassword(memberDTO.getPassword());
â‹®----
log.info("íšŒì›ê°€ì… í›„ ìë™ ë¡œê·¸ì¸ ì„±ê³µ: userId={}", loginMember.getUserId());
redirectAttributes.addFlashAttribute("message", "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. í™˜ì˜í•©ë‹ˆë‹¤!");
â‹®----
log.warn("íšŒì›ê°€ì…ì€ ì„±ê³µí–ˆìœ¼ë‚˜ ìë™ ë¡œê·¸ì¸ ì‹¤íŒ¨: {}", memberDTO.getUserId());
redirectAttributes.addFlashAttribute("message", "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");
â‹®----
log.warn("íšŒì›ê°€ì… ì‹¤íŒ¨: {}", e.getMessage());
bindingResult.rejectValue("userId", "duplicate.userId", e.getMessage());
â‹®----
log.error("íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ ë°œìƒ", e);
redirectAttributes.addFlashAttribute("error", "íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public Map<String, Object> checkUserId(@RequestParam String userId) {
â‹®----
boolean isDuplicate = memberService.isUserIdDuplicate(userId);
result.put("isDuplicate", isDuplicate);
result.put("message", isDuplicate ? "ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤." : "ì‚¬ìš© ê°€ëŠ¥í•œ ì•„ì´ë””ì…ë‹ˆë‹¤.");
â‹®----
log.error("ì•„ì´ë”” ì¤‘ë³µ ì²´í¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
result.put("error", "ì¤‘ë³µ ì²´í¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public Map<String, Object> debugPasswordTest(@RequestParam(defaultValue = "admin") String userId,
â‹®----
MemberDTO member = memberService.getMemberByUserId(userId);
â‹®----
result.put("error", "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + userId);
â‹®----
result.put("userId", member.getUserId());
result.put("dbPasswordHash", member.getPassword());
result.put("dbPasswordLength", member.getPassword().length());
result.put("inputPassword", password);
result.put("inputPasswordLength", password.length());
boolean isValidBcryptFormat = member.getPassword().startsWith("$2a$") ||
member.getPassword().startsWith("$2b$") ||
member.getPassword().startsWith("$2y$");
result.put("isValidBcryptFormat", isValidBcryptFormat);
â‹®----
loginDTO.setUserId(userId);
loginDTO.setPassword(password);
MemberDTO loginResult = memberService.login(loginDTO);
result.put("loginSuccess", loginResult != null);
result.put("isActive", member.getIsActive());
result.put("isDeleted", member.getIsDeleted());
result.put("loginFailCount", member.getLoginFailCount());
result.put("role", member.getRole());
log.info("ë””ë²„ê¹… í…ŒìŠ¤íŠ¸ ê²°ê³¼: {}", result);
â‹®----
log.error("ë””ë²„ê¹… í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
result.put("error", "í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: " + e.getMessage());
â‹®----
public String verifyPasswordForm(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
MemberDTO loginMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
â‹®----
redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
â‹®----
public String verifyPassword(@RequestParam("password") String password,
â‹®----
if (!password.equals(loginMember.getPassword())) {
redirectAttributes.addFlashAttribute("error", "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
â‹®----
log.error("ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", loginMember.getUserId(), e);
redirectAttributes.addFlashAttribute("error", "ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String myInfoEdit(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
â‹®----
MemberDTO memberInfo = memberService.findById(loginMember.getMemberId());
â‹®----
redirectAttributes.addFlashAttribute("error", "ì‚¬ìš©ì ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
session.setAttribute("myinfo_verified", true);
model.addAttribute("memberDTO", memberInfo);
â‹®----
log.error("ë§ˆì´í˜ì´ì§€ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", loginMember.getUserId(), e);
redirectAttributes.addFlashAttribute("error", "íšŒì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String cropImagePage(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
â‹®----
Boolean myinfoVerified = (Boolean) session.getAttribute("myinfo_verified");
â‹®----
redirectAttributes.addFlashAttribute("error", "ì˜¬ë°”ë¥¸ ê²½ë¡œë¡œ ì ‘ê·¼í•´ì£¼ì„¸ìš”.");
â‹®----
model.addAttribute("memberDTO", loginMember);
â‹®----
public Map<String, Object> uploadTempImage(@RequestParam("imageFile") MultipartFile imageFile,
â‹®----
result.put("success", false);
result.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
â‹®----
if (imageFile.isEmpty()) {
â‹®----
result.put("message", "ì´ë¯¸ì§€ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
if (imageFile.getSize() > 5 * 1024 * 1024) {
â‹®----
result.put("message", "íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.");
â‹®----
String contentType = imageFile.getContentType();
if (contentType == null || !contentType.startsWith("image/")) {
â‹®----
result.put("message", "ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
â‹®----
byte[] imageBytes = imageFile.getBytes();
â‹®----
java.util.Base64.getEncoder().encodeToString(imageBytes);
session.setAttribute("tempImageData", base64Image);
session.setAttribute("tempImageName", imageFile.getOriginalFilename());
result.put("success", true);
result.put("imageData", base64Image);
result.put("message", "ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
log.error("ì„ì‹œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
result.put("message", "ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public Map<String, Object> saveCroppedImage(@RequestParam("croppedImage") MultipartFile croppedImageFile,
â‹®----
log.info("ğŸ–¼ï¸ í¬ë¡­ëœ ì´ë¯¸ì§€ ì €ì¥ ìš”ì²­ - í˜•ì‹: {}, í’ˆì§ˆ: {}, í¬ê¸°: {} bytes",
format, quality, croppedImageFile.getSize());
log.info("ğŸ“ íŒŒì¼ ì •ë³´ - ì´ë¦„: {}, ì»¨í…ì¸  íƒ€ì…: {}",
croppedImageFile.getOriginalFilename(), croppedImageFile.getContentType());
if (croppedImageFile.isEmpty()) {
â‹®----
result.put("message", "ì—…ë¡œë“œëœ ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
â‹®----
MemberDTO memberDTO = memberService.findById(loginMember.getMemberId());
â‹®----
result.put("message", "íšŒì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
log.info("ğŸ“‹ ë°›ì€ íŒŒë¼ë¯¸í„° - altText: '{}', format: '{}', quality: '{}'", altText, format, quality);
if (altText != null && !altText.trim().isEmpty()) {
memberDTO.setProfileImageAltText(altText.trim());
log.info("ğŸ·ï¸ í”„ë¡œí•„ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ì„¤ì •: {}", altText.trim());
â‹®----
memberDTO.setProfileImageAltText("ì‚¬ìš©ì í”„ë¡œí•„ ì‚¬ì§„");
log.info("ğŸ·ï¸ í”„ë¡œí•„ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ê¸°ë³¸ê°’ ì„¤ì •: ì‚¬ìš©ì í”„ë¡œí•„ ì‚¬ì§„");
â‹®----
String contentType = croppedImageFile.getContentType();
â‹®----
log.info("ğŸ“· ì—…ë¡œë“œëœ ì´ë¯¸ì§€ í˜•ì‹: {}", contentType);
if (contentType.contains("avif")) {
log.info("âœ¨ AVIF í˜•ì‹ ê°ì§€ - ìµœì  ì••ì¶• ì ìš©ë¨");
} else if (contentType.contains("webp")) {
log.info("ğŸš€ WebP í˜•ì‹ ê°ì§€ - íš¨ìœ¨ì  ì••ì¶• ì ìš©ë¨");
} else if (contentType.contains("jpeg")) {
log.info("ğŸ“¸ JPEG í˜•ì‹ ê°ì§€ - í˜¸í™˜ì„± ìš°ì„  ì ìš©ë¨");
â‹®----
memberService.updateMember(memberDTO, croppedImageFile);
MemberDTO updatedMember = memberService.findById(loginMember.getMemberId());
â‹®----
session.setAttribute(Constants.SESSION_MEMBER, updatedMember);
â‹®----
session.removeAttribute("tempImageData");
session.removeAttribute("tempImageName");
â‹®----
result.put("message", "í”„ë¡œí•„ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
result.put("profileImageUrl", updatedMember.getProfileImage());
â‹®----
log.error("í¬ë¡­ëœ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
result.put("message", "ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String updateMember(@ModelAttribute MemberDTO memberDTO,
â‹®----
log.info("íšŒì›ì •ë³´ ìˆ˜ì • ìš”ì²­: memberId={}, name={}, email={}",
memberDTO.getMemberId(), memberDTO.getName(), memberDTO.getEmail());
â‹®----
log.info("ì„¸ì…˜ ë¡œê·¸ì¸ ë©¤ë²„: {}", loginMember != null ? loginMember.getMemberId() : "null");
â‹®----
log.warn("ì„¸ì…˜ì— ë¡œê·¸ì¸ ì •ë³´ê°€ ì—†ìŒ");
â‹®----
if (!loginMember.getMemberId().equals(memberDTO.getMemberId())) {
log.warn("ê¶Œí•œ ì—†ìŒ: ì„¸ì…˜ memberId={}, ìš”ì²­ memberId={}",
loginMember.getMemberId(), memberDTO.getMemberId());
redirectAttributes.addFlashAttribute("error", "ê¶Œí•œì´ ì—†ê±°ë‚˜ ë¡œê·¸ì¸ ì •ë³´ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
â‹®----
if (memberDTO.getName() == null || memberDTO.getName().trim().isEmpty()) {
bindingResult.rejectValue("name", "NotBlank", "ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
â‹®----
if (memberDTO.getEmail() != null && !memberDTO.getEmail().trim().isEmpty()) {
if (!memberDTO.getEmail().matches("^[A-Za-z0-9+_.-]+@(.+)$")) {
bindingResult.rejectValue("email", "Email", "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.");
â‹®----
if (memberDTO.getPhone() != null && !memberDTO.getPhone().trim().isEmpty()) {
if (!memberDTO.getPhone().matches("^01(?:0|1|[6-9])-(?:\\d{3}|\\d{4})-\\d{4}$")) {
bindingResult.rejectValue("phone", "Pattern", "ì˜¬ë°”ë¥¸ íœ´ëŒ€í° ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.");
â‹®----
log.warn("íšŒì›ì •ë³´ ìˆ˜ì • ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨: {}", bindingResult.getAllErrors());
â‹®----
log.info("íšŒì›ì •ë³´ ìˆ˜ì • ì„œë¹„ìŠ¤ í˜¸ì¶œ ì‹œì‘");
memberService.updateMember(memberDTO, profileImageFile);
log.info("íšŒì›ì •ë³´ ìˆ˜ì • ì„œë¹„ìŠ¤ í˜¸ì¶œ ì™„ë£Œ");
MemberDTO updatedMember = memberService.findById(memberDTO.getMemberId());
â‹®----
log.info("ì„¸ì…˜ ì •ë³´ ì—…ë°ì´íŠ¸ ì™„ë£Œ: {}", updatedMember.getName());
â‹®----
log.warn("ì—…ë°ì´íŠ¸ëœ íšŒì› ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨");
â‹®----
redirectAttributes.addFlashAttribute("message", "íšŒì›ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
log.error("íšŒì›ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}, userId={}",
memberDTO.getMemberId(), memberDTO.getUserId(), e);
redirectAttributes.addFlashAttribute("error", "íšŒì›ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
â‹®----
public String changePasswordForm(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
â‹®----
public String changePassword(@RequestParam("currentPassword") String currentPassword,
â‹®----
String userId = loginMember.getUserId();
â‹®----
memberService.changePassword(userId, currentPassword, newPassword, confirmNewPassword);
redirectAttributes.addFlashAttribute("message", "ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
redirectAttributes.addFlashAttribute("error", e.getMessage());
â‹®----
log.error("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", userId, e);
redirectAttributes.addFlashAttribute("error", "ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String deleteMemberForm(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
â‹®----
Map<String, Integer> contentCounts = memberService.getUserContentCounts(loginMember.getMemberId());
model.addAttribute("member", loginMember);
model.addAttribute("contentCounts", contentCounts);
log.info("íšŒì›íƒˆí‡´ í˜ì´ì§€ ì ‘ê·¼: userId={}, ì‘ì„± ì½˜í…ì¸ ={}",
loginMember.getUserId(), contentCounts);
â‹®----
log.error("íšŒì›íƒˆí‡´ í˜ì´ì§€ ë¡œë“œ ì¤‘ ì˜¤ë¥˜: {}", loginMember.getUserId(), e);
â‹®----
model.addAttribute("contentCounts", Map.of("board", 0, "review", 0, "job", 0));
â‹®----
public String deleteMember(@RequestParam("password") String password,
â‹®----
log.info("íšŒì›íƒˆí‡´ ìš”ì²­: userId={}, ì…ë ¥ëœ ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´={}, ì…ë ¥ëœ ì´ë¦„={}, ì‚­ì œì˜µì…˜={}",
userId, password.length(), confirmName, deleteOption);
â‹®----
MemberDTO currentMember = memberService.findById(loginMember.getMemberId());
â‹®----
log.warn("íšŒì›íƒˆí‡´: íšŒì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: memberId={}", loginMember.getMemberId());
redirectAttributes.addFlashAttribute("error", "íšŒì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
log.info("ë¹„ë°€ë²ˆí˜¸ ë¹„êµ: DB ë¹„ë°€ë²ˆí˜¸={}, ì…ë ¥ ë¹„ë°€ë²ˆí˜¸={}",
currentMember.getPassword(), password);
if (!password.equals(currentMember.getPassword())) {
log.warn("íšŒì›íƒˆí‡´: ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜: userId={}", userId);
redirectAttributes.addFlashAttribute("error", "í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
â‹®----
log.info("ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì„±ê³µ: userId={}", userId);
if (!confirmName.trim().equals(currentMember.getName().trim())) {
log.warn("íšŒì›íƒˆí‡´: ì´ë¦„ ë¶ˆì¼ì¹˜: userId={}, ì…ë ¥ëœ ì´ë¦„={}, ë“±ë¡ëœ ì´ë¦„={}",
userId, confirmName, currentMember.getName());
redirectAttributes.addFlashAttribute("error",
String.format("ì´ë¦„ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë“±ë¡ëœ ì´ë¦„ '%s'ë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.", currentMember.getName()));
â‹®----
log.info("ì´ë¦„ í™•ì¸ ì„±ê³µ: userId={}, ì´ë¦„={}", userId, confirmName);
String resultMessage = memberService.deleteMemberWithOption(userId, deleteOption);
log.info("íšŒì›íƒˆí‡´ ì™„ë£Œ: userId={}, ì˜µì…˜={}", userId, deleteOption);
â‹®----
redirectAttributes.addFlashAttribute("message", resultMessage + " ê·¸ë™ì•ˆ ì´ìš©í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.");
â‹®----
log.error("íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {}", userId, e);
redirectAttributes.addFlashAttribute("error", "íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String listMembers(@RequestParam(defaultValue = "1") int page,
â‹®----
if (loginMember == null || !Constants.MEMBER_ROLE_ADMIN.equals(loginMember.getRole())) {
redirectAttributes.addFlashAttribute("error", "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.");
â‹®----
MemberDTO searchDTO = new MemberDTO();
searchDTO.setPageSize(pageSize);
searchDTO.setOffset((page - 1) * pageSize);
searchDTO.setRole(role);
List<MemberDTO> members = memberService.getMembersWithPaging(searchDTO);
int totalMembers = memberService.getTotalMembersCount();
int totalPages = (int) Math.ceil((double) totalMembers / pageSize);
model.addAttribute("members", members);
model.addAttribute("currentPage", page);
model.addAttribute("totalPages", totalPages);
model.addAttribute("pageSize", pageSize);
model.addAttribute("currentRole", role);
â‹®----
log.error("ê´€ë¦¬ì íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
redirectAttributes.addFlashAttribute("error", "íšŒì› ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String updateMemberStatus(@RequestParam Long memberId,
â‹®----
redirectAttributes.addFlashAttribute("error", "ê´€ë¦¬ì ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
memberService.updateMemberStatus(memberId, isActive);
redirectAttributes.addFlashAttribute("message", "íšŒì› ìƒíƒœê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
log.error("íšŒì› ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}", memberId, e);
redirectAttributes.addFlashAttribute("error", "íšŒì› ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String myPosts(@RequestParam(defaultValue = "all") String type,
â‹®----
Long memberId = loginMember.getMemberId();
log.info("ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ ìš”ì²­: memberId={}, type={}, page={}", memberId, type, page);
â‹®----
Map<String, Object> result = memberService.getMyPosts(memberId, type, page, pageSize, offset);
â‹®----
model.addAttribute("posts", result.get("posts"));
model.addAttribute("totalCount", result.get("totalCount"));
model.addAttribute("currentType", type);
â‹®----
model.addAttribute("totalPages", (int) Math.ceil((double) (Integer) result.get("totalCount") / pageSize));
Map<String, Integer> contentCounts = (Map<String, Integer>) result.get("contentCounts");
â‹®----
log.info("ë‚´ê°€ ì“´ ê¸€ ì¡°íšŒ ì™„ë£Œ: ì´ {}ê°œ", result.get("totalCount"));
â‹®----
log.error("ë‚´ê°€ ì“´ ê¸€ í˜ì´ì§€ ë¡œë“œ ì¤‘ ì˜¤ë¥˜: memberId={}", loginMember.getMemberId(), e);
redirectAttributes.addFlashAttribute("error", "ë‚´ê°€ ì“´ ê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
`````

## File: src/main/java/com/example/carelink/controller/FacilityController.java
`````java
public class FacilityController {
â‹®----
public ObjectMapper objectMapper() {
ObjectMapper mapper = new ObjectMapper();
mapper.registerModule(new JavaTimeModule());
â‹®----
public Map<String, Object> getFacilityInfo(@PathVariable Long facilityId, HttpSession session) {
â‹®----
MemberDTO member = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
â‹®----
result.put("success", false);
result.put("message", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
â‹®----
FacilityDTO facility = facilityService.getFacilityById(facilityId);
â‹®----
result.put("message", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
if (!facility.getRegisteredMemberId().equals(member.getMemberId())
&& !Constants.MEMBER_ROLE_ADMIN.equals(member.getRole())) {
â‹®----
result.put("message", "í•´ë‹¹ ì‹œì„¤ ì •ë³´ë¥¼ ì¡°íšŒí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
result.put("success", true);
result.put("facility", facility);
log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ API ì¡°íšŒ ì™„ë£Œ: facilityId={}, memberId={}", facilityId, member.getMemberId());
â‹®----
log.error("ì‹œì„¤ ìƒì„¸ ì •ë³´ API ì¡°íšŒ ì¤‘ ì˜¤ë¥˜: facilityId={}", facilityId, e);
â‹®----
result.put("message", "ì‹œì„¤ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String redirectToEdit(@PathVariable Long facilityId) {
log.info("ë‚´ ì‹œì„¤ì—ì„œ ì‹œì„¤ ìˆ˜ì •ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸: facilityId={}", facilityId);
â‹®----
public String searchFacilities(
â‹®----
log.info("ì‹œì„¤ ê²€ìƒ‰ í˜ì´ì§€ ì ‘ì† - facilityName: {}, region: {}, facilityType: {}, gradeRating: {}",
â‹®----
facilityName = (facilityName != null && facilityName.trim().isEmpty()) ? null : facilityName;
region = (region != null && region.trim().isEmpty()) ? null : region;
facilityType = (facilityType != null && facilityType.trim().isEmpty()) ? null : facilityType;
FacilityDTO searchCondition = new FacilityDTO();
searchCondition.setFacilityName(facilityName != null ? facilityName.trim() : null);
searchCondition.setFacilityType(facilityType);
searchCondition.setAddress(region);
facilityList = facilityService.searchFacilities(searchCondition);
â‹®----
log.error("ì‹œì„¤ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ", e);
â‹®----
model.addAttribute("facilityList", facilityList);
model.addAttribute("facilityName", facilityName);
model.addAttribute("region", region);
model.addAttribute("facilityType", facilityType);
model.addAttribute("gradeRating", gradeRating);
model.addAttribute("KAKAO_APP_KEY", kakaoAppKey);
log.info("ê²€ìƒ‰ëœ ì‹œì„¤ ìˆ˜: {}", facilityList.size());
â‹®----
public String getFacilityDetail(@PathVariable Long facilityId, Model model, HttpSession session) {
log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ í˜ì´ì§€ ì ‘ì† - facilityId: {}", facilityId);
â‹®----
model.addAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
List<ReviewDTO> recentReviews = reviewService.getReviewsByFacilityId(facilityId);
if (recentReviews.size() > 5) {
recentReviews = recentReviews.subList(0, 5);
â‹®----
Double averageRating = reviewService.getAverageRating(facilityId);
MemberDTO sessionMember = (MemberDTO) session.getAttribute(Constants.SESSION_MEMBER);
boolean isAdmin = sessionMember != null && "ADMIN".equals(sessionMember.getRole());
boolean isOwner = sessionMember != null && facility.getRegisteredMemberId() != null &&
facility.getRegisteredMemberId().equals(sessionMember.getMemberId());
model.addAttribute("facility", facility);
model.addAttribute("recentReviews", recentReviews);
model.addAttribute("averageRating", averageRating);
model.addAttribute("reviewCount", recentReviews.size());
model.addAttribute("pageTitle", facility.getFacilityName() + " ìƒì„¸ì •ë³´");
model.addAttribute("sessionMember", sessionMember);
model.addAttribute("isAdmin", isAdmin);
model.addAttribute("isOwner", isOwner);
log.info("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì™„ë£Œ - facilityId: {}, ë¦¬ë·° ìˆ˜: {}, ê´€ë¦¬ì: {}, ì†Œìœ ì: {}",
facilityId, recentReviews.size(), isAdmin, isOwner);
â‹®----
log.error("ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ - facilityId: {}", facilityId, e);
model.addAttribute("error", "ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String manageFacility(HttpSession session, Model model, RedirectAttributes redirectAttributes) {
â‹®----
redirectAttributes.addFlashAttribute("error", "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
â‹®----
if (!Constants.MEMBER_ROLE_FACILITY.equals(member.getRole())) {
redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ íšŒì›ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
â‹®----
List<FacilityDTO> facilities = facilityService.getFacilitiesByMemberId(member.getMemberId());
model.addAttribute("facilities", facilities);
model.addAttribute("facilityCount", facilities.size());
log.info("ì‹œì„¤ ê´€ë¦¬ í˜ì´ì§€ ì ‘ê·¼: memberId={}, ì‹œì„¤ ìˆ˜={}",
member.getMemberId(), facilities.size());
â‹®----
log.error("ì‹œì„¤ ê´€ë¦¬ í˜ì´ì§€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: memberId={}", member.getMemberId(), e);
redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String editFacilityForm(@PathVariable Long facilityId, HttpSession session,
â‹®----
redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
log.info("ì‹œì„¤ ìˆ˜ì • í˜ì´ì§€ ì ‘ê·¼: facilityId={}, memberId={}", facilityId, member.getMemberId());
â‹®----
log.error("ì‹œì„¤ ìˆ˜ì • í˜ì´ì§€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
â‹®----
public String updateFacility(@PathVariable Long facilityId,
â‹®----
FacilityDTO existingFacility = facilityService.getFacilityById(facilityId);
â‹®----
if (!existingFacility.getRegisteredMemberId().equals(member.getMemberId())
â‹®----
facilityDTO.setFacilityId(facilityId);
facilityDTO.setRegisteredMemberId(existingFacility.getRegisteredMemberId());
facilityDTO.setIsApproved(existingFacility.getIsApproved());
String approvalStatus = existingFacility.getApprovalStatus();
if (approvalStatus == null || approvalStatus.trim().isEmpty()) {
if (existingFacility.getIsApproved() != null && existingFacility.getIsApproved()) {
â‹®----
log.info("ğŸ”§ approval_status NULL ë°©ì§€ - ìŠ¹ì¸ëœ ì‹œì„¤: APPROVED");
â‹®----
log.info("ğŸ”§ approval_status NULL ë°©ì§€ - ë¯¸ìŠ¹ì¸ ì‹œì„¤: PENDING");
â‹®----
facilityDTO.setApprovalStatus(approvalStatus);
facilityDTO.setAverageRating(existingFacility.getAverageRating());
facilityDTO.setReviewCount(existingFacility.getReviewCount());
facilityDTO.setCurrentOccupancy(existingFacility.getCurrentOccupancy());
facilityDTO.setGradeRating(existingFacility.getGradeRating());
facilityService.updateFacility(facilityDTO, facilityImageFile);
log.info("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì™„ë£Œ: facilityId={}, memberId={}", facilityId, member.getMemberId());
redirectAttributes.addFlashAttribute("message", "ì‹œì„¤ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
log.error("ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public String deleteFacility(@PathVariable Long facilityId,
â‹®----
redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì„ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
facilityService.deleteFacility(facilityId);
log.info("ì‹œì„¤ ì‚­ì œ ì™„ë£Œ: facilityId={}, memberId={}", facilityId, member.getMemberId());
redirectAttributes.addFlashAttribute("message", "ì‹œì„¤ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
â‹®----
log.error("ì‹œì„¤ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
redirectAttributes.addFlashAttribute("error", "ì‹œì„¤ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public FacilityDTO getFacilityApi(@PathVariable Long facilityId, HttpSession session) {
â‹®----
throw new RuntimeException("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
â‹®----
throw new RuntimeException("ì‹œì„¤ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
throw new RuntimeException("í•´ë‹¹ ì‹œì„¤ì„ ì¡°íšŒí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
public String cropImagePage(@PathVariable Long facilityId,
â‹®----
redirectAttributes.addFlashAttribute("error", "í•´ë‹¹ ì‹œì„¤ì˜ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
log.info("ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€ ì ‘ì†: facilityId={}, memberId={}", facilityId, member.getMemberId());
â‹®----
log.error("ì‹œì„¤ ì´ë¯¸ì§€ í¬ë¡­ í˜ì´ì§€ ì˜¤ë¥˜: facilityId={}", facilityId, e);
redirectAttributes.addFlashAttribute("error", "í˜ì´ì§€ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
â‹®----
public Map<String, Object> saveFacilityImage(@PathVariable Long facilityId,
â‹®----
log.info("ğŸ”¥ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì‹œì‘ - facilityId: {}, ë°›ì€ íŒŒë¼ë¯¸í„°ë“¤ í™•ì¸", facilityId);
log.info("ğŸ“‹ altText: '{}', format: '{}', imageIndex: '{}', customFileName: '{}'", altText, format, imageIndex, customFileName);
log.info("ğŸ“ íŒŒì¼ ì •ë³´ - ì´ë¦„: '{}', í¬ê¸°: {}bytes, íƒ€ì…: '{}'",
facilityImageFile.getOriginalFilename(), facilityImageFile.getSize(), facilityImageFile.getContentType());
â‹®----
log.error("âŒ ë¡œê·¸ì¸ëœ ì‚¬ìš©ìê°€ ì—†ìŒ");
â‹®----
log.info("ğŸ‘¤ ë¡œê·¸ì¸ ì‚¬ìš©ì: {} (role: {})", member.getUserId(), member.getRole());
â‹®----
result.put("message", "í•´ë‹¹ ì‹œì„¤ì˜ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
â‹®----
log.info("ğŸ–¼ï¸ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ìš”ì²­ - facilityId: {}, í˜•ì‹: {}, ì¸ë±ìŠ¤: {}, í¬ê¸°: {} bytes",
facilityId, format, imageIndex, facilityImageFile.getSize());
if (facilityImageFile.isEmpty()) {
â‹®----
result.put("message", "ì—…ë¡œë“œëœ ì´ë¯¸ì§€ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.");
â‹®----
if (altText != null && !altText.trim().isEmpty()) {
finalAltText = altText.trim();
log.info("ğŸ·ï¸ ì‹œì„¤ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ì„¤ì •: {}", finalAltText);
â‹®----
finalAltText = facility.getFacilityName() + " ì‹œì„¤ ì´ë¯¸ì§€";
if (imageIndex != null && !imageIndex.isEmpty()) {
finalAltText += " " + (Integer.parseInt(imageIndex) + 1);
â‹®----
log.info("ğŸ·ï¸ ì‹œì„¤ ì´ë¯¸ì§€ Alt í…ìŠ¤íŠ¸ ê¸°ë³¸ê°’ ì„¤ì •: {}", finalAltText);
â‹®----
String contentType = facilityImageFile.getContentType();
â‹®----
log.info("ğŸ“· ì—…ë¡œë“œëœ ì´ë¯¸ì§€ í˜•ì‹: {}", contentType);
if (contentType.contains("avif")) {
log.info("âœ¨ AVIF í˜•ì‹ ê°ì§€ - ìµœì  ì••ì¶• ì ìš©ë¨");
} else if (contentType.contains("webp")) {
log.info("ğŸš€ WebP í˜•ì‹ ê°ì§€ - íš¨ìœ¨ì  ì••ì¶• ì ìš©ë¨");
} else if (contentType.contains("jpeg")) {
log.info("ğŸ“¸ JPEG í˜•ì‹ ê°ì§€ - í˜¸í™˜ì„± ìš°ì„  ì ìš©ë¨");
â‹®----
Integer orderIndex = imageIndex != null ? Integer.parseInt(imageIndex) : null;
log.info("ğŸ”§ ì„œë¹„ìŠ¤ í˜¸ì¶œ ì „ - facilityId: {}, orderIndex: {}, altText: '{}', customFileName: '{}'",
â‹®----
FacilityImageDTO savedImage = facilityImageService.saveSingleFacilityImage(
â‹®----
log.info("âœ… ì„œë¹„ìŠ¤ í˜¸ì¶œ ì™„ë£Œ - ì €ì¥ëœ ì´ë¯¸ì§€ID: {}, ê²½ë¡œ: {}", savedImage.getImageId(), savedImage.getImagePath());
â‹®----
result.put("message", "ì‹œì„¤ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
result.put("facilityId", facilityId);
result.put("imageIndex", imageIndex);
result.put("imageId", savedImage.getImageId());
result.put("imagePath", savedImage.getImagePath());
log.info("âœ… ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì„±ê³µ: facilityId={}, imageId={}", facilityId, savedImage.getImageId());
â‹®----
log.error("âŒ ì‹œì„¤ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: facilityId={}", facilityId, e);
â‹®----
result.put("message", "ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
`````

## File: src/main/resources/schema.sql
`````sql
CREATE DATABASE carelink DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE carelink;
CREATE TABLE member (
    member_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'íšŒì› ID',
    user_id VARCHAR(20) NOT NULL UNIQUE COMMENT 'ì‚¬ìš©ì ID (ë¡œê·¸ì¸ìš©)',
    password VARCHAR(255) NOT NULL COMMENT 'ë¹„ë°€ë²ˆí˜¸',
    name VARCHAR(50) NOT NULL COMMENT 'ì´ë¦„',
    email VARCHAR(100) NOT NULL UNIQUE COMMENT 'ì´ë©”ì¼',
    phone VARCHAR(20) COMMENT 'íœ´ëŒ€í° ë²ˆí˜¸',
    role VARCHAR(20) NOT NULL DEFAULT 'USER' COMMENT 'ì—­í•  (USER, FACILITY, ADMIN)',
    address TEXT COMMENT 'ì£¼ì†Œ',
    detail_address TEXT COMMENT 'ìƒì„¸ ì£¼ì†Œ',
    profile_image VARCHAR(255) COMMENT 'í”„ë¡œí•„ ì´ë¯¸ì§€ ê²½ë¡œ',
    profile_image_alt_text VARCHAR(255) COMMENT 'í”„ë¡œí•„ ì´ë¯¸ì§€ alt í…ìŠ¤íŠ¸ (SEO ìµœì í™”ìš©)',
    is_active BOOLEAN NOT NULL DEFAULT TRUE COMMENT 'ê³„ì • í™œì„±í™” ì—¬ë¶€',
    login_fail_count INT NOT NULL DEFAULT 0 COMMENT 'ë¡œê·¸ì¸ ì‹¤íŒ¨ íšŸìˆ˜',
    last_login_at DATETIME COMMENT 'ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ìƒì„±ì¼ì‹œ',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    is_deleted BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ì‚­ì œ ì—¬ë¶€'
) COMMENT='íšŒì› ì •ë³´';
CREATE TABLE facility (
    facility_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'ì‹œì„¤ ID',
    facility_name VARCHAR(100) NOT NULL COMMENT 'ì‹œì„¤ëª…',
    facility_type VARCHAR(20) NOT NULL COMMENT 'ì‹œì„¤ ìœ í˜• (NURSING_HOME, HOSPITAL, DAY_CARE)',
    address TEXT NOT NULL COMMENT 'ì£¼ì†Œ',
    detail_address TEXT COMMENT 'ìƒì„¸ ì£¼ì†Œ',
    phone VARCHAR(20) NOT NULL COMMENT 'ì „í™”ë²ˆí˜¸',
    latitude DECIMAL(10, 8) COMMENT 'ìœ„ë„',
    longitude DECIMAL(11, 8) COMMENT 'ê²½ë„',
    description TEXT COMMENT 'ì‹œì„¤ ì„¤ëª…',
    facility_image VARCHAR(255) COMMENT 'ì‹œì„¤ ë©”ì¸ ì´ë¯¸ì§€ ê²½ë¡œ (ë ˆê±°ì‹œ í˜¸í™˜ì„±ìš©)',
    facility_image_alt_text VARCHAR(255) COMMENT 'ì‹œì„¤ ì´ë¯¸ì§€ alt í…ìŠ¤íŠ¸ (SEO ìµœì í™”ìš©)',
    homepage VARCHAR(255) COMMENT 'í™ˆí˜ì´ì§€ URL',
    capacity INT COMMENT 'ìˆ˜ìš© ì¸ì›',
    current_occupancy INT COMMENT 'í˜„ì¬ ì…ì†Œì ìˆ˜',
    operating_hours VARCHAR(100) COMMENT 'ìš´ì˜ ì‹œê°„',
    features TEXT COMMENT 'ì‹œì„¤ íŠ¹ì§•',
    average_rating FLOAT DEFAULT 0 COMMENT 'í‰ê·  í‰ì ',
    review_count INT DEFAULT 0 COMMENT 'ë¦¬ë·° ìˆ˜',
    grade_rating INT COMMENT 'ì‹œì„¤ ë“±ê¸‰ (1-5ë“±ê¸‰, 1ë“±ê¸‰ì´ ìµœê³ )',
    image_count INT DEFAULT 0 COMMENT 'ì‹œì„¤ ì´ë¯¸ì§€ ê°œìˆ˜ (facility_images í…Œì´ë¸” ê¸°ì¤€)',
    main_image_path VARCHAR(500) COMMENT 'ë©”ì¸ ì´ë¯¸ì§€ ê²½ë¡œ (ë‹¤ì¤‘ ì´ë¯¸ì§€ ì‹œìŠ¤í…œ)',
    registered_member_id BIGINT NOT NULL COMMENT 'ë“±ë¡í•œ íšŒì› ID',
    is_approved BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ìŠ¹ì¸ ì—¬ë¶€',
    approval_status VARCHAR(20) NOT NULL DEFAULT 'PENDING' COMMENT 'ìŠ¹ì¸ ìƒíƒœ (PENDING, APPROVED, REJECTED)',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ìƒì„±ì¼ì‹œ',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    is_deleted BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ì‚­ì œ ì—¬ë¶€',
    FOREIGN KEY (registered_member_id) REFERENCES member(member_id)
) COMMENT='ì‹œì„¤ ì •ë³´';
CREATE TABLE facility_images (
    image_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'ì´ë¯¸ì§€ ID',
    facility_id BIGINT NOT NULL COMMENT 'ì‹œì„¤ ID',
    image_path VARCHAR(500) NOT NULL COMMENT 'ì´ë¯¸ì§€ ê²½ë¡œ',
    image_alt_text VARCHAR(200) COMMENT 'ì´ë¯¸ì§€ alt í…ìŠ¤íŠ¸ (SEO ìµœì í™”ìš©)',
    image_order INT DEFAULT 0 COMMENT 'ì´ë¯¸ì§€ ìˆœì„œ (0ë¶€í„° ì‹œì‘)',
    is_main_image BOOLEAN DEFAULT FALSE COMMENT 'ë©”ì¸ ì´ë¯¸ì§€ ì—¬ë¶€',
    upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'ì—…ë¡œë“œì¼ì‹œ',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    FOREIGN KEY (facility_id) REFERENCES facility(facility_id) ON DELETE CASCADE,
    INDEX idx_facility_images_facility_id (facility_id),
    INDEX idx_facility_images_main (facility_id, is_main_image),
    INDEX idx_facility_images_order (facility_id, image_order)
) COMMENT='ì‹œì„¤ ì´ë¯¸ì§€ (ìµœëŒ€ 5ì¥ ì§€ì›)';
CREATE TABLE job_posting (
    job_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'êµ¬ì¸êµ¬ì§ ID',
    title VARCHAR(200) NOT NULL COMMENT 'ì œëª©',
    content TEXT NOT NULL COMMENT 'ë‚´ìš©',
    job_type VARCHAR(20) NOT NULL COMMENT 'êµ¬ì¸êµ¬ì§ ìœ í˜• (RECRUIT: êµ¬ì¸, SEARCH: êµ¬ì§)',
    work_type VARCHAR(20) NOT NULL COMMENT 'ê·¼ë¬´ í˜•íƒœ (FULL_TIME, PART_TIME, TEMPORARY)',
    position VARCHAR(50) COMMENT 'ëª¨ì§‘ ì§ì¢…',
    recruit_count INT COMMENT 'ëª¨ì§‘ ì¸ì›',
    salary_type VARCHAR(20) COMMENT 'ê¸‰ì—¬ ìœ í˜• (HOURLY, MONTHLY, ANNUAL)',
    salary_min DECIMAL(10, 0) COMMENT 'ìµœì†Œ ê¸‰ì—¬',
    salary_max DECIMAL(10, 0) COMMENT 'ìµœëŒ€ ê¸‰ì—¬',
    salary_description TEXT COMMENT 'ê¸‰ì—¬ ì„¤ëª…',
    work_location VARCHAR(100) COMMENT 'ê·¼ë¬´ ì§€ì—­',
    work_hours VARCHAR(100) COMMENT 'ê·¼ë¬´ ì‹œê°„',
    experience VARCHAR(50) COMMENT 'ê²½ë ¥ ì¡°ê±´',
    education VARCHAR(50) COMMENT 'í•™ë ¥ ì¡°ê±´',
    qualifications TEXT COMMENT 'ìê²© ìš”ê±´',
    benefits TEXT COMMENT 'ë³µë¦¬í›„ìƒ',
    start_date DATE COMMENT 'ëª¨ì§‘ ì‹œì‘ì¼',
    end_date DATE COMMENT 'ëª¨ì§‘ ë§ˆê°ì¼',
    contact_name VARCHAR(50) COMMENT 'ë‹´ë‹¹ì ì´ë¦„',
    contact_phone VARCHAR(20) COMMENT 'ë‹´ë‹¹ì ì—°ë½ì²˜',
    contact_email VARCHAR(100) COMMENT 'ë‹´ë‹¹ì ì´ë©”ì¼',
    status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE' COMMENT 'ê²Œì‹œê¸€ ìƒíƒœ (ACTIVE, CLOSED, DRAFT)',
    view_count INT NOT NULL DEFAULT 0 COMMENT 'ì¡°íšŒìˆ˜',
    apply_count INT NOT NULL DEFAULT 0 COMMENT 'ì§€ì›ì ìˆ˜',
    member_id BIGINT NOT NULL COMMENT 'ì‘ì„±ì ID',
    facility_id BIGINT COMMENT 'ê´€ë ¨ ì‹œì„¤ ID',
    attachment_path VARCHAR(255) COMMENT 'ì²¨ë¶€íŒŒì¼ ê²½ë¡œ',
    attachment_name VARCHAR(255) COMMENT 'ì²¨ë¶€íŒŒì¼ ì›ë³¸ëª…',
    priority INT NOT NULL DEFAULT 0 COMMENT 'ìš°ì„ ìˆœìœ„',
    is_highlight BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ê°•ì¡° í‘œì‹œ ì—¬ë¶€',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ìƒì„±ì¼ì‹œ',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    is_deleted BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ì‚­ì œ ì—¬ë¶€',
    FOREIGN KEY (member_id) REFERENCES member(member_id),
    FOREIGN KEY (facility_id) REFERENCES facility(facility_id)
) COMMENT='êµ¬ì¸êµ¬ì§ ê²Œì‹œê¸€';
CREATE TABLE review (
    review_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'ë¦¬ë·° ID',
    facility_id BIGINT NOT NULL COMMENT 'ì‹œì„¤ ID',
    member_id BIGINT NOT NULL COMMENT 'ì‘ì„±ì ID',
    title VARCHAR(200) NOT NULL COMMENT 'ë¦¬ë·° ì œëª©',
    content TEXT NOT NULL COMMENT 'ë¦¬ë·° ë‚´ìš©',
    rating INT NOT NULL COMMENT 'í‰ì  (1-5ì )',
    service_rating INT COMMENT 'ì„œë¹„ìŠ¤ í‰ì ',
    facility_rating INT COMMENT 'ì‹œì„¤ í‰ì ',
    staff_rating INT COMMENT 'ì§ì› í‰ì ',
    price_rating INT COMMENT 'ê°€ê²© í‰ì ',
    review_image1 VARCHAR(255) COMMENT 'ë¦¬ë·° ì´ë¯¸ì§€ 1',
    review_image2 VARCHAR(255) COMMENT 'ë¦¬ë·° ì´ë¯¸ì§€ 2',
    review_image3 VARCHAR(255) COMMENT 'ë¦¬ë·° ì´ë¯¸ì§€ 3',
    like_count INT NOT NULL DEFAULT 0 COMMENT 'ì¶”ì²œ ìˆ˜',
    dislike_count INT NOT NULL DEFAULT 0 COMMENT 'ë¹„ì¶”ì²œ ìˆ˜',
    view_count INT NOT NULL DEFAULT 0 COMMENT 'ì¡°íšŒìˆ˜',
    is_visible BOOLEAN NOT NULL DEFAULT TRUE COMMENT 'í‘œì‹œ ì—¬ë¶€',
    status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE' COMMENT 'ìƒíƒœ (ACTIVE, HIDDEN, REPORTED)',
    parent_review_id BIGINT COMMENT 'ë¶€ëª¨ ë¦¬ë·° ID (ë‹µê¸€ì¸ ê²½ìš°)',
    reply_count INT NOT NULL DEFAULT 0 COMMENT 'ë‹µê¸€ ìˆ˜',
    reply_depth INT NOT NULL DEFAULT 0 COMMENT 'ë‹µê¸€ ê¹Šì´',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ìƒì„±ì¼ì‹œ',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    is_deleted BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ì‚­ì œ ì—¬ë¶€',
    FOREIGN KEY (facility_id) REFERENCES facility(facility_id),
    FOREIGN KEY (member_id) REFERENCES member(member_id),
    FOREIGN KEY (parent_review_id) REFERENCES review(review_id)
) COMMENT='ì‹œì„¤ ë¦¬ë·°';
CREATE TABLE board (
    board_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'ê²Œì‹œê¸€ ID',
    board_type VARCHAR(20) NOT NULL COMMENT 'ê²Œì‹œíŒ ìœ í˜• (NOTICE, INFO, QNA, FAQ)',
    title VARCHAR(200) NOT NULL COMMENT 'ì œëª©',
    content TEXT NOT NULL COMMENT 'ë‚´ìš©',
    member_id BIGINT NOT NULL COMMENT 'ì‘ì„±ì ID',
    view_count INT NOT NULL DEFAULT 0 COMMENT 'ì¡°íšŒìˆ˜',
    like_count INT NOT NULL DEFAULT 0 COMMENT 'ì¶”ì²œìˆ˜',
    comment_count INT NOT NULL DEFAULT 0 COMMENT 'ëŒ“ê¸€ìˆ˜',
    attachment_path VARCHAR(255) COMMENT 'ì²¨ë¶€íŒŒì¼ ê²½ë¡œ',
    attachment_name VARCHAR(255) COMMENT 'ì²¨ë¶€íŒŒì¼ ì›ë³¸ëª…',
    attachment_size BIGINT COMMENT 'ì²¨ë¶€íŒŒì¼ í¬ê¸°',
    is_notice BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ê³µì§€ì‚¬í•­ ì—¬ë¶€',
    is_secret BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ë¹„ë°€ê¸€ ì—¬ë¶€',
    is_active BOOLEAN NOT NULL DEFAULT TRUE COMMENT 'í™œì„± ìƒíƒœ',
    status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE' COMMENT 'ìƒíƒœ (ACTIVE, HIDDEN, DELETED)',
    category VARCHAR(50) COMMENT 'ì¹´í…Œê³ ë¦¬',
    sub_category VARCHAR(50) COMMENT 'ì„œë¸Œ ì¹´í…Œê³ ë¦¬',
    priority INT NOT NULL DEFAULT 0 COMMENT 'ìš°ì„ ìˆœìœ„',
    is_pinned BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ìƒë‹¨ ê³ ì • ì—¬ë¶€',
    parent_board_id BIGINT COMMENT 'ë¶€ëª¨ ê²Œì‹œê¸€ ID (ë‹µê¸€ì¸ ê²½ìš°)',
    reply_depth INT NOT NULL DEFAULT 0 COMMENT 'ë‹µê¸€ ê¹Šì´',
    reply_order INT NOT NULL DEFAULT 0 COMMENT 'ë‹µê¸€ ìˆœì„œ',
    tags VARCHAR(500) COMMENT 'íƒœê·¸ (ì½¤ë§ˆë¡œ êµ¬ë¶„)',
    meta_description TEXT COMMENT 'ë©”íƒ€ ì„¤ëª…',
    meta_keywords VARCHAR(500) COMMENT 'ë©”íƒ€ í‚¤ì›Œë“œ',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ìƒì„±ì¼ì‹œ',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
    is_deleted BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'ì‚­ì œ ì—¬ë¶€',
    FOREIGN KEY (member_id) REFERENCES member(member_id),
    FOREIGN KEY (parent_board_id) REFERENCES board(board_id)
) COMMENT='ì •ë³´ ê²Œì‹œíŒ';
DROP TABLE IF EXISTS board_images;
CREATE TABLE board_images (
    image_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'ì´ë¯¸ì§€ ID',
    board_id BIGINT NOT NULL COMMENT 'ê²Œì‹œê¸€ ID',
    image_path VARCHAR(500) NOT NULL COMMENT 'ì›ë³¸ ì´ë¯¸ì§€ ê²½ë¡œ',
    webp_path VARCHAR(500) COMMENT 'WebP ë³€í™˜ ì´ë¯¸ì§€ ê²½ë¡œ',
    thumbnail_small VARCHAR(500) COMMENT 'ì‘ì€ ì¸ë„¤ì¼ ê²½ë¡œ (300x200)',
    thumbnail_medium VARCHAR(500) COMMENT 'ì¤‘ê°„ ì¸ë„¤ì¼ ê²½ë¡œ (600x400)',
    thumbnail_large VARCHAR(500) COMMENT 'í° ì¸ë„¤ì¼ ê²½ë¡œ (1200x800)',
    fallback_jpg_path VARCHAR(500) COMMENT 'JPG fallback ê²½ë¡œ',
    original_filename VARCHAR(255) COMMENT 'ì›ë³¸ íŒŒì¼ëª…',
    file_size BIGINT COMMENT 'íŒŒì¼ í¬ê¸° (bytes)',
    file_size_webp BIGINT COMMENT 'WebP íŒŒì¼ í¬ê¸° (bytes)',
    width INT COMMENT 'ì´ë¯¸ì§€ ë„ˆë¹„',
    height INT COMMENT 'ì´ë¯¸ì§€ ë†’ì´',
    alt_text VARCHAR(255) COMMENT 'ì´ë¯¸ì§€ ëŒ€ì²´ í…ìŠ¤íŠ¸ (SEO/ì ‘ê·¼ì„±)',
    caption VARCHAR(500) COMMENT 'ì´ë¯¸ì§€ ì„¤ëª…',
    image_order INT DEFAULT 0 COMMENT 'ì´ë¯¸ì§€ ìˆœì„œ',
    is_active BOOLEAN DEFAULT TRUE COMMENT 'í™œì„± ìƒíƒœ',
    upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'ì—…ë¡œë“œ ì¼ì‹œ',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì • ì¼ì‹œ',
    FOREIGN KEY (board_id) REFERENCES board(board_id) ON DELETE CASCADE,
    INDEX idx_board_images_board_id (board_id),
    INDEX idx_board_images_order (board_id, image_order)
) COMMENT='ê²Œì‹œíŒ ì´ë¯¸ì§€ ì²¨ë¶€íŒŒì¼ (WebP ì§€ì›)';
DROP TABLE IF EXISTS review_images;
CREATE TABLE review_images (
    image_id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'ì´ë¯¸ì§€ ID',
    review_id BIGINT NOT NULL COMMENT 'ë¦¬ë·° ID',
    image_path VARCHAR(500) NOT NULL COMMENT 'ì›ë³¸ ì´ë¯¸ì§€ ê²½ë¡œ',
    webp_path VARCHAR(500) COMMENT 'WebP ë³€í™˜ ì´ë¯¸ì§€ ê²½ë¡œ',
    thumbnail_small VARCHAR(500) COMMENT 'ì‘ì€ ì¸ë„¤ì¼ ê²½ë¡œ (300x200)',
    thumbnail_medium VARCHAR(500) COMMENT 'ì¤‘ê°„ ì¸ë„¤ì¼ ê²½ë¡œ (600x400)',
    thumbnail_large VARCHAR(500) COMMENT 'í° ì¸ë„¤ì¼ ê²½ë¡œ (1200x800)',
    fallback_jpg_path VARCHAR(500) COMMENT 'JPG fallback ê²½ë¡œ',
    original_filename VARCHAR(255) COMMENT 'ì›ë³¸ íŒŒì¼ëª…',
    file_size BIGINT COMMENT 'íŒŒì¼ í¬ê¸° (bytes)',
    file_size_webp BIGINT COMMENT 'WebP íŒŒì¼ í¬ê¸° (bytes)',
    width INT COMMENT 'ì´ë¯¸ì§€ ë„ˆë¹„',
    height INT COMMENT 'ì´ë¯¸ì§€ ë†’ì´',
    alt_text VARCHAR(255) COMMENT 'ì´ë¯¸ì§€ ëŒ€ì²´ í…ìŠ¤íŠ¸ (SEO/ì ‘ê·¼ì„±)',
    caption VARCHAR(500) COMMENT 'ì´ë¯¸ì§€ ì„¤ëª…',
    image_order INT DEFAULT 0 COMMENT 'ì´ë¯¸ì§€ ìˆœì„œ',
    is_active BOOLEAN DEFAULT TRUE COMMENT 'í™œì„± ìƒíƒœ',
    upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'ì—…ë¡œë“œ ì¼ì‹œ',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì • ì¼ì‹œ',
    FOREIGN KEY (review_id) REFERENCES review(review_id) ON DELETE CASCADE,
    INDEX idx_review_images_review_id (review_id),
    INDEX idx_review_images_order (review_id, image_order)
) COMMENT='ë¦¬ë·° ì´ë¯¸ì§€ ì²¨ë¶€íŒŒì¼ (WebP ì§€ì›)';
ALTER TABLE board
ADD COLUMN image_count INT DEFAULT 0 COMMENT 'ì²¨ë¶€ ì´ë¯¸ì§€ ê°œìˆ˜',
ADD COLUMN has_images BOOLEAN DEFAULT FALSE COMMENT 'ì´ë¯¸ì§€ í¬í•¨ ì—¬ë¶€';
ALTER TABLE review
ADD COLUMN image_count INT DEFAULT 0 COMMENT 'ì²¨ë¶€ ì´ë¯¸ì§€ ê°œìˆ˜',
ADD COLUMN has_images BOOLEAN DEFAULT FALSE COMMENT 'ì´ë¯¸ì§€ í¬í•¨ ì—¬ë¶€';
DROP TRIGGER IF EXISTS update_board_image_count_insert;
DROP TRIGGER IF EXISTS update_board_image_count_delete;
DROP TRIGGER IF EXISTS update_review_image_count_insert;
DROP TRIGGER IF EXISTS update_review_image_count_delete;
DELIMITER $$
CREATE TRIGGER update_board_image_count_insert
AFTER INSERT ON board_images
FOR EACH ROW
BEGIN
    UPDATE board
    SET image_count = (
        SELECT COUNT(*) FROM board_images
        WHERE board_id = NEW.board_id AND is_active = TRUE
    ),
    has_images = (
        SELECT COUNT(*) FROM board_images
        WHERE board_id = NEW.board_id AND is_active = TRUE
    ) > 0
    WHERE board_id = NEW.board_id;
END$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER update_board_image_count_delete
AFTER DELETE ON board_images
FOR EACH ROW
BEGIN
    UPDATE board
    SET image_count = (
        SELECT COUNT(*) FROM board_images
        WHERE board_id = OLD.board_id AND is_active = TRUE
    ),
    has_images = (
        SELECT COUNT(*) FROM board_images
        WHERE board_id = OLD.board_id AND is_active = TRUE
    ) > 0
    WHERE board_id = OLD.board_id;
END$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER update_review_image_count_insert
AFTER INSERT ON review_images
FOR EACH ROW
BEGIN
    UPDATE review
    SET image_count = (
        SELECT COUNT(*) FROM review_images
        WHERE review_id = NEW.review_id AND is_active = TRUE
    ),
    has_images = (
        SELECT COUNT(*) FROM review_images
        WHERE review_id = NEW.review_id AND is_active = TRUE
    ) > 0
    WHERE review_id = NEW.review_id;
END$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER update_review_image_count_delete
AFTER DELETE ON review_images
FOR EACH ROW
BEGIN
    UPDATE review
    SET image_count = (
        SELECT COUNT(*) FROM review_images
        WHERE review_id = OLD.review_id AND is_active = TRUE
    ),
    has_images = (
        SELECT COUNT(*) FROM review_images
        WHERE review_id = OLD.review_id AND is_active = TRUE
    ) > 0
    WHERE review_id = OLD.review_id;
END$$
DELIMITER ;
CREATE INDEX idx_member_user_id ON member(user_id);
CREATE INDEX idx_member_email ON member(email);
CREATE INDEX idx_member_role ON member(role);
CREATE INDEX idx_member_created_at ON member(created_at);
CREATE INDEX idx_member_is_deleted ON member(is_deleted);
CREATE INDEX idx_facility_type ON facility(facility_type);
CREATE INDEX idx_facility_location ON facility(latitude, longitude);
CREATE INDEX idx_facility_member_id ON facility(registered_member_id);
CREATE INDEX idx_facility_created_at ON facility(created_at);
CREATE INDEX idx_facility_approval ON facility(is_approved, approval_status);
CREATE INDEX idx_facility_rating ON facility(average_rating);
CREATE INDEX idx_facility_is_deleted ON facility(is_deleted);
CREATE INDEX idx_facility_images_upload_date ON facility_images(upload_date);
CREATE INDEX idx_facility_images_alt_text ON facility_images(image_alt_text);
CREATE INDEX idx_job_type ON job_posting(job_type);
CREATE INDEX idx_job_work_type ON job_posting(work_type);
CREATE INDEX idx_job_member_id ON job_posting(member_id);
CREATE INDEX idx_job_facility_id ON job_posting(facility_id);
CREATE INDEX idx_job_created_at ON job_posting(created_at);
CREATE INDEX idx_job_status ON job_posting(status);
CREATE INDEX idx_job_location ON job_posting(work_location);
CREATE INDEX idx_job_is_deleted ON job_posting(is_deleted);
CREATE INDEX idx_review_facility_id ON review(facility_id);
CREATE INDEX idx_review_member_id ON review(member_id);
CREATE INDEX idx_review_created_at ON review(created_at);
CREATE INDEX idx_review_rating ON review(rating);
CREATE INDEX idx_review_status ON review(status);
CREATE INDEX idx_review_is_deleted ON review(is_deleted);
CREATE INDEX idx_board_type ON board(board_type);
CREATE INDEX idx_board_member_id ON board(member_id);
CREATE INDEX idx_board_created_at ON board(created_at);
CREATE INDEX idx_board_category ON board(category);
CREATE INDEX idx_board_status ON board(status);
CREATE INDEX idx_board_priority ON board(priority);
CREATE INDEX idx_board_is_deleted ON board(is_deleted);
CREATE INDEX idx_board_images_upload_date ON board_images(upload_date);
CREATE INDEX idx_board_images_active ON board_images(is_active);
CREATE INDEX idx_board_images_filename ON board_images(original_filename);
CREATE INDEX idx_review_images_upload_date ON review_images(upload_date);
CREATE INDEX idx_review_images_active ON review_images(is_active);
CREATE INDEX idx_review_images_filename ON review_images(original_filename);
INSERT INTO member (user_id, password, name, email, phone, role, address, is_active, login_fail_count, created_at, updated_at, is_deleted) VALUES
    ('admin', 'admin123', 'ê´€ë¦¬ì', 'admin@carelink.com', '02-1234-5678', 'ADMIN', 'ì„œìš¸ì‹œ ì¢…ë¡œêµ¬ ì„¸ì¢…ëŒ€ë¡œ 1', TRUE, 0, NOW(), NOW(), FALSE),
    ('user01', 'user123', 'ê¹€ì² ìˆ˜', 'kim.cs@example.com', '010-1111-2222', 'USER', 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123', TRUE, 0, NOW(), NOW(), FALSE),
    ('user02', 'user123', 'ì´ì˜í¬', 'lee.yh@example.com', '010-2222-3333', 'USER', 'ë¶€ì‚°ì‹œ í•´ìš´ëŒ€êµ¬ ì„¼í…€ì¤‘ì•™ë¡œ 79', TRUE, 0, NOW(), NOW(), FALSE),
    ('user03', 'user123', 'ë°•ë¯¼ìˆ˜', 'park.ms@example.com', '010-3333-4444', 'USER', 'ëŒ€êµ¬ì‹œ ì¤‘êµ¬ ë™ì„±ë¡œ 1', TRUE, 0, NOW(), NOW(), FALSE),
    ('user04', 'user123', 'ìµœì§€ì€', 'choi.je@example.com', '010-4444-5555', 'USER', 'ì¸ì²œì‹œ ë‚¨ë™êµ¬ êµ¬ì›”ë™ 1234', TRUE, 0, NOW(), NOW(), FALSE),
    ('facility01', 'facility123', 'ì„œìš¸ìš”ì–‘ì›ì¥', 'seoul.admin@example.com', '02-5555-6666', 'FACILITY', 'ì„œìš¸ì‹œ ì„œì´ˆêµ¬ ì„œì´ˆëŒ€ë¡œ 123', TRUE, 0, NOW(), NOW(), FALSE),
    ('facility02', 'facility123', 'ë¶€ì‚°ì‹¤ë²„íƒ€ìš´ì¥', 'busan.admin@example.com', '051-7777-8888', 'FACILITY', 'ë¶€ì‚°ì‹œ ë¶€ì‚°ì§„êµ¬ ì„œë©´ë¡œ 456', TRUE, 0, NOW(), NOW(), FALSE);
INSERT INTO facility (facility_name, facility_type, address, detail_address, phone, latitude, longitude, description, capacity, current_occupancy, operating_hours, features, average_rating, review_count, grade_rating, image_count, main_image_path, registered_member_id, is_approved, approval_status, created_at, updated_at, is_deleted) VALUES
    ('ì„œìš¸ í–‰ë³µìš”ì–‘ì›', 'NURSING_HOME', 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123', '2ì¸µ 201í˜¸', '02-1111-2222', 37.500913, 127.037149, '24ì‹œê°„ ì „ë¬¸ ê°„ë³‘ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” í”„ë¦¬ë¯¸ì—„ ìš”ì–‘ì›ì…ë‹ˆë‹¤.', 50, 35, '24ì‹œê°„ ìš´ì˜', '24ì‹œê°„ ê°„ë³‘ì„œë¹„ìŠ¤, ë¬¼ë¦¬ì¹˜ë£Œì‹¤, ì¸ì§€ì¹˜ë£Œ í”„ë¡œê·¸ë¨', 4.5, 8, 1, 0, NULL, 6, TRUE, 'APPROVED', NOW(), NOW(), FALSE),
    ('ë¶€ì‚° ë°”ë‹¤ë·° ì‹¤ë²„íƒ€ìš´', 'NURSING_HOME', 'ë¶€ì‚°ì‹œ í•´ìš´ëŒ€êµ¬ ì„¼í…€ì¤‘ì•™ë¡œ 79', '1ì¸µ', '051-3333-4444', 35.169188, 129.132800, 'ë°”ë‹¤ê°€ ë³´ì´ëŠ” ì•„ë¦„ë‹¤ìš´ í™˜ê²½ì˜ ì‹¤ë²„íƒ€ìš´ì…ë‹ˆë‹¤.', 80, 60, '08:00-22:00', 'ë°”ë‹¤ë·°, ì‹¤ë²„ì¹´í˜, ë„ì„œê´€, ìˆ˜ì˜ì¥', 4.2, 12, 2, 0, NULL, 7, TRUE, 'APPROVED', NOW(), NOW(), FALSE),
    ('ëŒ€ì „ ê±´ê°• ë°ì´ì¼€ì–´ì„¼í„°', 'DAY_CARE', 'ëŒ€ì „ì‹œ ìœ ì„±êµ¬ ê³¼í•™ë¡œ 123', 'B1ì¸µ', '042-5555-6666', 36.350411, 127.384548, 'ì£¼ê°„ë³´í˜¸ ì „ë¬¸ ì„¼í„°ë¡œ ë‹¤ì–‘í•œ í”„ë¡œê·¸ë¨ì„ ìš´ì˜í•©ë‹ˆë‹¤.', 30, 20, '09:00-18:00', 'ì†¡ì˜ë²„ìŠ¤, ê¸‰ì‹ì„œë¹„ìŠ¤, ê±´ê°•ê´€ë¦¬ í”„ë¡œê·¸ë¨', 4.0, 6, 3, 0, NULL, 6, TRUE, 'APPROVED', NOW(), NOW(), FALSE),
    ('ì¸ì²œ í‰ì•ˆ ìš”ì–‘ë³‘ì›', 'HOSPITAL', 'ì¸ì²œì‹œ ë‚¨ë™êµ¬ êµ¬ì›”ë™ 1234', '3-5ì¸µ', '032-7777-8888', 37.456256, 126.731536, 'ì˜ë£Œì§„ì´ ìƒì£¼í•˜ëŠ” ì „ë¬¸ ìš”ì–‘ë³‘ì›ì…ë‹ˆë‹¤.', 100, 75, '24ì‹œê°„ ìš´ì˜', 'ì˜ë£Œì§„ ìƒì£¼, ì‘ê¸‰ì‹¤, ì¬í™œì¹˜ë£Œì‹¤, ê²€ì‚¬ì‹¤', 4.3, 15, 1, 0, NULL, 6, TRUE, 'APPROVED', NOW(), NOW(), FALSE),
    ('ê²½ê¸° ì‚¬ë‘ ì¬ê°€ì„¼í„°', 'DAY_CARE', 'ê²½ê¸°ë„ ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬ ì¤‘ë¶€ëŒ€ë¡œ 123', '1ì¸µ', '031-9999-0000', 37.283897, 127.009121, 'ì¬ê°€ ìš”ì–‘ ì„œë¹„ìŠ¤ ì „ë¬¸ ì„¼í„°ì…ë‹ˆë‹¤.', 25, 18, '08:00-20:00', 'ì¬ê°€ë°©ë¬¸, ëª©ìš•ì„œë¹„ìŠ¤, ê°„ë³‘ì„œë¹„ìŠ¤', 3.8, 4, 4, 0, NULL, 6, TRUE, 'APPROVED', NOW(), NOW(), FALSE);
INSERT INTO job_posting (title, content, job_type, work_type, position, recruit_count, salary_type, salary_min, salary_max, salary_description, work_location, work_hours, experience, education, qualifications, benefits, start_date, end_date, contact_name, contact_phone, contact_email, status, member_id, facility_id, priority, is_highlight, created_at, updated_at, is_deleted) VALUES
    ('[ì„œìš¸ í–‰ë³µìš”ì–‘ì›] ìš”ì–‘ë³´í˜¸ì‚¬ ì •ê·œì§ ëª¨ì§‘', 'ê²½ë ¥ 3ë…„ ì´ìƒ ìš”ì–‘ë³´í˜¸ì‚¬ë¥¼ ëª¨ì§‘í•©ë‹ˆë‹¤. ì„±ì‹¤í•˜ê³  ì±…ì„ê° ìˆëŠ” ë¶„ì„ ì°¾ìŠµë‹ˆë‹¤.', 'RECRUIT', 'FULL_TIME', 'ìš”ì–‘ë³´í˜¸ì‚¬', 3, 'MONTHLY', 2800000, 3200000, 'ê²½ë ¥ì— ë”°ë¼ ì°¨ë“± ì§€ê¸‰', 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬', '3êµëŒ€ (08:00-16:00, 16:00-24:00, 24:00-08:00)', '3ë…„ ì´ìƒ', 'ê³ ë“±í•™êµ ì¡¸ì—… ì´ìƒ', 'ìš”ì–‘ë³´í˜¸ì‚¬ ìê²©ì¦ í•„ìˆ˜', '4ëŒ€ë³´í—˜, í‡´ì§ê¸ˆ, ëª…ì ˆìƒì—¬ê¸ˆ, êµìœ¡ë¹„ ì§€ì›', '2024-01-15', '2024-02-15', 'ê¹€ê³¼ì¥', '02-1111-2222', 'recruit@seoul-happy.com', 'ACTIVE', 6, 1, 5, FALSE, NOW(), NOW(), FALSE),
    ('[ë¶€ì‚° ë°”ë‹¤ë·° ì‹¤ë²„íƒ€ìš´] ê°„í˜¸ì‚¬ ëª¨ì§‘', 'ì‹¤ë²„íƒ€ìš´ì—ì„œ ê·¼ë¬´í•  ê°„í˜¸ì‚¬ë¥¼ ëª¨ì§‘í•©ë‹ˆë‹¤. ë…¸ì¸ ê°„í˜¸ ê²½í—˜ì ìš°ëŒ€', 'RECRUIT', 'FULL_TIME', 'ê°„í˜¸ì‚¬', 2, 'MONTHLY', 3500000, 4000000, 'ì•¼ê°„ê·¼ë¬´ìˆ˜ë‹¹ ë³„ë„', 'ë¶€ì‚°ì‹œ í•´ìš´ëŒ€êµ¬', '2êµëŒ€ (09:00-21:00, 21:00-09:00)', '1ë…„ ì´ìƒ', 'ê°„í˜¸ëŒ€í•™ ì¡¸ì—…', 'ê°„í˜¸ì‚¬ ë©´í—ˆì¦ í•„ìˆ˜', '4ëŒ€ë³´í—˜, í‡´ì§ê¸ˆ, ì•¼ê°„ìˆ˜ë‹¹, ì£¼ë§ìˆ˜ë‹¹', '2024-01-20', '2024-02-20', 'ì´íŒ€ì¥', '051-3333-4444', 'hr@busan-silver.com', 'ACTIVE', 7, 2, 3, TRUE, NOW(), NOW(), FALSE),
    ('[ê²½ë ¥ì§ ìš”ì–‘ë³´í˜¸ì‚¬] ì¢‹ì€ ê·¼ë¬´í™˜ê²½ ì°¾ìŠµë‹ˆë‹¤', '10ë…„ ê²½ë ¥ì˜ ìš”ì–‘ë³´í˜¸ì‚¬ì…ë‹ˆë‹¤. ì•¼ê°„ê·¼ë¬´ ê°€ëŠ¥í•˜ë©° ì„±ì‹¤íˆ ê·¼ë¬´í•˜ê² ìŠµë‹ˆë‹¤.', 'SEARCH', 'FULL_TIME', 'ìš”ì–‘ë³´í˜¸ì‚¬', 1, 'MONTHLY', 2500000, 3000000, 'ì•¼ê°„ìˆ˜ë‹¹ í¬í•¨ í¬ë§', 'ì„œìš¸/ê²½ê¸° ì§€ì—­', '3êµëŒ€ ê°€ëŠ¥', '10ë…„', 'ê³ ë“±í•™êµ ì¡¸ì—…', 'ìš”ì–‘ë³´í˜¸ì‚¬ 1ê¸‰ ìê²©ì¦', '4ëŒ€ë³´í—˜, í‡´ì§ê¸ˆ', '2024-01-10', '2024-03-10', 'í™ê¸¸ë™', '010-1234-5678', 'hong@example.com', 'ACTIVE', 2, NULL, 0, FALSE, NOW(), NOW(), FALSE),
    ('ëŒ€ì „ ë°ì´ì¼€ì–´ì„¼í„° ì‚¬íšŒë³µì§€ì‚¬ ëª¨ì§‘', 'ë°ì´ì¼€ì–´ì„¼í„°ì—ì„œ ê·¼ë¬´í•  ì‚¬íšŒë³µì§€ì‚¬ë¥¼ ëª¨ì§‘í•©ë‹ˆë‹¤.', 'RECRUIT', 'FULL_TIME', 'ì‚¬íšŒë³µì§€ì‚¬', 1, 'MONTHLY', 2600000, 2800000, 'ê¸°ë³¸ê¸‰ + ìˆ˜ë‹¹', 'ëŒ€ì „ì‹œ ìœ ì„±êµ¬', '09:00-18:00 (ì›”-í† )', 'ì‹ ì… ê°€ëŠ¥', 'ì‚¬íšŒë³µì§€í•™ê³¼ ì¡¸ì—…', 'ì‚¬íšŒë³µì§€ì‚¬ 2ê¸‰ ì´ìƒ', '4ëŒ€ë³´í—˜, í‡´ì§ê¸ˆ, êµìœ¡ë¹„ ì§€ì›', '2024-01-25', '2024-02-25', 'ë°•ì‹¤ì¥', '042-5555-6666', 'welfare@daejeon.com', 'ACTIVE', 6, 3, 2, FALSE, NOW(), NOW(), FALSE),
    ('ë¬¼ë¦¬ì¹˜ë£Œì‚¬ íŒŒíŠ¸íƒ€ì„ êµ¬ì§í•©ë‹ˆë‹¤', 'ë¬¼ë¦¬ì¹˜ë£Œ ê²½ë ¥ 5ë…„ìœ¼ë¡œ íŒŒíŠ¸íƒ€ì„ìœ¼ë¡œ ê·¼ë¬´í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.', 'SEARCH', 'PART_TIME', 'ë¬¼ë¦¬ì¹˜ë£Œì‚¬', 1, 'HOURLY', 25000, 30000, 'ì‹œê°„ë‹¹ í¬ë§', 'ìˆ˜ë„ê¶Œ ì§€ì—­', 'ì£¼ 3ì¼ ì´ë‚´', '5ë…„', 'ë¬¼ë¦¬ì¹˜ë£Œí•™ê³¼ ì¡¸ì—…', 'ë¬¼ë¦¬ì¹˜ë£Œì‚¬ ë©´í—ˆì¦', '4ëŒ€ë³´í—˜', '2024-01-12', '2024-02-12', 'ê¹€ë¬¼ë¦¬', '010-9999-8888', 'pt.kim@example.com', 'ACTIVE', 3, NULL, 0, FALSE, NOW(), NOW(), FALSE);
INSERT INTO review (facility_id, member_id, title, content, rating, service_rating, facility_rating, staff_rating, price_rating, like_count, dislike_count, view_count, is_visible, status, parent_review_id, reply_count, reply_depth, created_at, updated_at, is_deleted) VALUES
    (1, 2, 'ì„œìš¸ í–‰ë³µìš”ì–‘ì› ì´ìš© í›„ê¸°', 'ì–´ë¨¸ë‹ˆë¥¼ ëª¨ì‹œê³  ìˆëŠ”ë° ì‹œì„¤ë„ ê¹¨ë—í•˜ê³  ì§ì›ë¶„ë“¤ì´ ì •ë§ ì¹œì ˆí•©ë‹ˆë‹¤. íŠ¹íˆ ê°„ë³‘ì„œë¹„ìŠ¤ê°€ 24ì‹œê°„ ì œê³µë˜ì–´ ì•ˆì‹¬ì´ ë©ë‹ˆë‹¤. ì¶”ì²œí•©ë‹ˆë‹¤!', 5, 5, 4, 5, 4, 8, 0, 45, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (1, 3, 'ë§Œì¡±ìŠ¤ëŸ¬ìš´ ìš”ì–‘ì›', 'ì•„ë²„ì§€ê°€ í¸ì•ˆí•˜ê²Œ ì§€ë‚´ê³  ê³„ì„¸ìš”. ë¬¼ë¦¬ì¹˜ë£Œ í”„ë¡œê·¸ë¨ë„ ì˜ ë˜ì–´ ìˆê³  ì‹ì‚¬ë„ ë§›ìˆë‹¤ê³  í•˜ì‹­ë‹ˆë‹¤.', 4, 4, 4, 4, 4, 5, 0, 32, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (1, 4, 'ì¢‹ì€ ì„ íƒì´ì—ˆìŠµë‹ˆë‹¤', 'ì²˜ìŒì—” ë§ì„¤ì˜€ëŠ”ë° ê°€ì¡± ëª¨ë‘ ë§Œì¡±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì¸ì§€ì¹˜ë£Œ í”„ë¡œê·¸ë¨ì´ íŠ¹íˆ ì¢‹ë„¤ìš”.', 4, 4, 4, 5, 3, 3, 0, 28, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (2, 2, 'ë¶€ì‚° ë°”ë‹¤ë·° ì‹¤ë²„íƒ€ìš´ ì¶”ì²œ', 'ë°”ë‹¤ê°€ ë³´ì´ëŠ” ë·°ê°€ ì •ë§ ì¢‹ì•„ìš”. í• ë¨¸ë‹ˆê°€ ë§¤ì¼ ë°”ë‹¤ë¥¼ ë³´ë©° ì‚°ì±…í•˜ì‹ ë‹¤ê³  í•˜ë‹ˆ ë§ˆìŒì´ ë†“ì…ë‹ˆë‹¤.', 5, 4, 5, 4, 4, 12, 1, 67, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (2, 3, 'ì‹œì„¤ì´ í˜„ëŒ€ì ì´ì—ìš”', 'ìµœì‹  ì‹œì„¤ë¡œ ì˜ ê°–ì¶°ì ¸ ìˆê³  ìˆ˜ì˜ì¥ë„ ìˆì–´ì„œ ì¢‹ìŠµë‹ˆë‹¤. ë‹¤ë§Œ ë¹„ìš©ì´ ì¢€ ìˆëŠ” í¸ì´ì—ìš”.', 4, 4, 5, 4, 3, 6, 0, 39, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (2, 4, 'ì‹¤ë²„ì¹´í˜ê°€ ì¸ìƒì ', 'ì‹¤ë²„ì¹´í˜ì—ì„œ ë‹¤ë¥¸ ì–´ë¥´ì‹ ë“¤ê³¼ ëŒ€í™”í•˜ë©° ì‹œê°„ì„ ë³´ë‚´ì‹ ë‹¤ê³  í•˜ë„¤ìš”. ì‚¬íšŒí™œë™ì— ë„ì›€ì´ ë©ë‹ˆë‹¤.', 4, 4, 4, 4, 4, 4, 0, 25, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (3, 2, 'ëŒ€ì „ ë°ì´ì¼€ì–´ì„¼í„° ì´ìš©ê¸°', 'ì£¼ê°„ë³´í˜¸ë¡œ ì´ìš©í•˜ê³  ìˆëŠ”ë° í”„ë¡œê·¸ë¨ì´ ë‹¤ì–‘í•´ì„œ ì¢‹ìŠµë‹ˆë‹¤. ì†¡ì˜ë²„ìŠ¤ë„ í¸ë¦¬í•˜ê³ ìš”.', 4, 4, 4, 4, 4, 7, 0, 41, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (3, 5, 'ê±´ê°•ê´€ë¦¬ í”„ë¡œê·¸ë¨ ë§Œì¡±', 'ê±´ê°•ê´€ë¦¬ í”„ë¡œê·¸ë¨ì´ ì²´ê³„ì ìœ¼ë¡œ ì˜ ë˜ì–´ ìˆì–´ìš”. í˜ˆì••, í˜ˆë‹¹ ê´€ë¦¬ë„ ê¼¼ê¼¼íˆ í•´ì£¼ì‹­ë‹ˆë‹¤.', 4, 5, 3, 4, 4, 5, 0, 33, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (4, 3, 'ì¸ì²œ í‰ì•ˆ ìš”ì–‘ë³‘ì› í›„ê¸°', 'ì˜ë£Œì§„ì´ ìƒì£¼í•´ì„œ ì•ˆì‹¬ì´ ë©ë‹ˆë‹¤. ì‘ê¸‰ìƒí™©ì—ë„ ë¹ ë¥´ê²Œ ëŒ€ì‘í•´ì£¼ì…”ì„œ ê°ì‚¬í–ˆìŠµë‹ˆë‹¤.', 5, 5, 4, 5, 4, 9, 0, 52, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (4, 4, 'ì „ë¬¸ì ì¸ ì˜ë£Œì„œë¹„ìŠ¤', 'ì¬í™œì¹˜ë£Œì‹¤ ì‹œì„¤ì´ ì¢‹ê³  ë¬¼ë¦¬ì¹˜ë£Œ ì„ ìƒë‹˜ë“¤ì´ ì „ë¬¸ì ìœ¼ë¡œ ì¹˜ë£Œí•´ì£¼ì‹­ë‹ˆë‹¤.', 4, 4, 4, 4, 4, 6, 0, 37, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (5, 2, 'ê²½ê¸° ì‚¬ë‘ ì¬ê°€ì„¼í„° ì´ìš© í›„ê¸°', 'ì¬ê°€ ì„œë¹„ìŠ¤ë¡œ ì´ìš©í•˜ê³  ìˆëŠ”ë° ë°©ë¬¸ ì‹œê°„ë„ ì •í™•í•˜ê³  ì„œë¹„ìŠ¤ í’ˆì§ˆì´ ì¢‹ìŠµë‹ˆë‹¤.', 4, 4, 4, 4, 4, 4, 0, 29, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE),
    (1, 5, 'ê°ì‚¬í•©ë‹ˆë‹¤', 'ì§ì› ë¶„ë“¤ì˜ ì„¸ì‹¬í•œ ë°°ë ¤ì— ê°ì‚¬ë“œë¦½ë‹ˆë‹¤. ì–´ë¨¸ë‹ˆê°€ ë§ì´ ì¢‹ì•„ì§€ì…¨ì–´ìš”.', 5, 5, 4, 5, 4, 2, 0, 18, TRUE, 'ACTIVE', NULL, 0, 0, NOW(), NOW(), FALSE);
INSERT INTO board (board_type, title, content, member_id, view_count, like_count, comment_count, is_notice, is_secret, is_active, status, category, sub_category, priority, is_pinned, parent_board_id, reply_depth, reply_order, tags, meta_description, meta_keywords, created_at, updated_at, is_deleted) VALUES
    ('NOTICE', 'ë¼ì´íŠ¸ì¼€ì–´ ì„œë¹„ìŠ¤ ì˜¤í”ˆ ì•ˆë‚´', 'ì•ˆë…•í•˜ì„¸ìš”. ë¼ì´íŠ¸ì¼€ì–´ ìš”ì–‘ì› êµ¬ì¸êµ¬ì§ í”Œë«í¼ì´ ì •ì‹ ì˜¤í”ˆë˜ì—ˆìŠµë‹ˆë‹¤. ë§ì€ ì´ìš© ë¶€íƒë“œë¦½ë‹ˆë‹¤.', 1, 125, 15, 3, TRUE, FALSE, TRUE, 'ACTIVE', 'NOTICE', 'ì„œë¹„ìŠ¤', 10, TRUE, NULL, 0, 0, 'ì˜¤í”ˆ,ì•ˆë‚´,ì„œë¹„ìŠ¤', 'ë¼ì´íŠ¸ì¼€ì–´ ì„œë¹„ìŠ¤ ì˜¤í”ˆ ì•ˆë‚´', 'ë¼ì´íŠ¸ì¼€ì–´,ì˜¤í”ˆ,ì„œë¹„ìŠ¤,ìš”ì–‘ì›', NOW(), NOW(), FALSE),
    ('INFO', 'ìš”ì–‘ì› ì„ íƒ ì‹œ ê³ ë ¤ì‚¬í•­', 'ì¢‹ì€ ìš”ì–‘ì›ì„ ì„ íƒí•˜ê¸° ìœ„í•´ ê³ ë ¤í•´ì•¼ í•  ì¤‘ìš”í•œ ì‚¬í•­ë“¤ì„ ì •ë¦¬í•´ë“œë¦½ë‹ˆë‹¤. 1. ì‹œì„¤ í™˜ê²½ 2. ì§ì›ì˜ ì „ë¬¸ì„± 3. ì˜ë£Œ ì„œë¹„ìŠ¤ 4. í”„ë¡œê·¸ë¨ ë‹¤ì–‘ì„± 5. ë¹„ìš© íˆ¬ëª…ì„±', 1, 89, 12, 5, FALSE, FALSE, TRUE, 'ACTIVE', 'INFO', 'ê°€ì´ë“œ', 5, FALSE, NULL, 0, 0, 'ìš”ì–‘ì›,ì„ íƒ,ê°€ì´ë“œ', 'ìš”ì–‘ì› ì„ íƒ ê°€ì´ë“œ', 'ìš”ì–‘ì›,ì„ íƒ,ê°€ì´ë“œ,ì‹œì„¤', NOW(), NOW(), FALSE),
    ('QNA', 'ìš”ì–‘ë³´í—˜ ì ìš© ê´€ë ¨ ë¬¸ì˜', 'êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨ì—ì„œ ì‹œí–‰í•˜ëŠ” ìš”ì–‘ë³´í—˜ì´ ì–´ë–¤ ì‹œì„¤ì— ì ìš©ë˜ëŠ”ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤.', 2, 67, 3, 2, FALSE, FALSE, TRUE, 'ACTIVE', 'QNA', 'ë³´í—˜', 0, FALSE, NULL, 0, 0, 'ìš”ì–‘ë³´í—˜,ë¬¸ì˜', 'ìš”ì–‘ë³´í—˜ ì ìš© ê´€ë ¨ ë¬¸ì˜', 'ìš”ì–‘ë³´í—˜,ê±´ê°•ë³´í—˜,ì ìš©', NOW(), NOW(), FALSE),
    ('FAQ', 'ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ ëª¨ìŒ', 'Q1. ì…ì†Œ ì ˆì°¨ëŠ” ì–´ë–»ê²Œ ë˜ë‚˜ìš”? A1. ìƒë‹´ â†’ ê²¬í•™ â†’ ì„œë¥˜ ì œì¶œ â†’ ì…ì†Œ ê³„ì•½ ìˆœìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤. Q2. ë©´íšŒ ì‹œê°„ì€ ì–¸ì œì¸ê°€ìš”? A2. í‰ì¼ ì˜¤í›„ 2ì‹œ~6ì‹œ, ì£¼ë§ ì˜¤ì „ 10ì‹œ~ì˜¤í›„ 6ì‹œì…ë‹ˆë‹¤.', 1, 156, 8, 1, FALSE, FALSE, TRUE, 'ACTIVE', 'FAQ', 'ì¼ë°˜', 3, FALSE, NULL, 0, 0, 'FAQ,ìì£¼ë¬»ëŠ”ì§ˆë¬¸', 'ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ ëª¨ìŒ', 'FAQ,ì§ˆë¬¸,ë‹µë³€,ì…ì†Œ', NOW(), NOW(), FALSE),
    ('INFO', 'ë…¸ì¸ì¥ê¸°ìš”ì–‘ë³´í—˜ ì œë„ ì•ˆë‚´', 'ë…¸ì¸ì¥ê¸°ìš”ì–‘ë³´í—˜ ì œë„ì— ëŒ€í•´ ìì„¸íˆ ì„¤ëª…ë“œë¦½ë‹ˆë‹¤. ì‹ ì²­ ë°©ë²•, ë“±ê¸‰ íŒì •, ê¸‰ì—¬ ë‚´ìš© ë“±ì„ í¬í•¨í•©ë‹ˆë‹¤.', 1, 98, 7, 4, FALSE, FALSE, TRUE, 'ACTIVE', 'INFO', 'ì œë„', 2, FALSE, NULL, 0, 0, 'ì¥ê¸°ìš”ì–‘ë³´í—˜,ì œë„,ì•ˆë‚´', 'ë…¸ì¸ì¥ê¸°ìš”ì–‘ë³´í—˜ ì œë„ ì•ˆë‚´', 'ì¥ê¸°ìš”ì–‘ë³´í—˜,ë…¸ì¸,ì œë„,ì‹ ì²­', NOW(), NOW(), FALSE),
    ('QNA', 'ì›” ì´ìš©ë£ŒëŠ” ì–¼ë§ˆì¸ê°€ìš”?', 'ë¶€ëª¨ë‹˜ ëª¨ì‹¤ ìš”ì–‘ì›ì„ ì°¾ê³  ìˆëŠ”ë° ì¼ë°˜ì ì¸ ì›” ì´ìš©ë£Œê°€ ê¶ê¸ˆí•©ë‹ˆë‹¤.', 3, 134, 2, 6, FALSE, FALSE, TRUE, 'ACTIVE', 'QNA', 'ë¹„ìš©', 0, FALSE, NULL, 0, 0, 'ì´ìš©ë£Œ,ë¹„ìš©,ë¬¸ì˜', 'ì›” ì´ìš©ë£Œ ë¬¸ì˜', 'ì´ìš©ë£Œ,ë¹„ìš©,ìš”ì–‘ì›,ì›”ë¹„ìš©', NOW(), NOW(), FALSE),
    ('INFO', 'ì–´ë¥´ì‹  ê±´ê°•ê´€ë¦¬ íŒ', 'ì–´ë¥´ì‹ ë“¤ì˜ ê±´ê°•í•œ ìƒí™œì„ ìœ„í•œ ì¼ìƒ ê´€ë¦¬ íŒì„ ê³µìœ í•©ë‹ˆë‹¤. ì‹ì‚¬, ìš´ë™, ìˆ˜ë©´, ì •ì‹ ê±´ê°• ê´€ë¦¬ ë°©ë²•ì„ í¬í•¨í•©ë‹ˆë‹¤.', 1, 76, 11, 3, FALSE, FALSE, TRUE, 'ACTIVE', 'INFO', 'ê±´ê°•', 1, FALSE, NULL, 0, 0, 'ê±´ê°•ê´€ë¦¬,ì–´ë¥´ì‹ ,íŒ', 'ì–´ë¥´ì‹  ê±´ê°•ê´€ë¦¬ íŒ', 'ê±´ê°•ê´€ë¦¬,ì–´ë¥´ì‹ ,ë…¸ì¸,ê±´ê°•,íŒ', NOW(), NOW(), FALSE),
    ('QNA', 'ë©´íšŒ ì‹œê°„ê³¼ ê·œì •ì´ ê¶ê¸ˆí•´ìš”', 'ì½”ë¡œë‚˜19 ì´í›„ ë©´íšŒ ì‹œê°„ì´ë‚˜ ê·œì •ì´ ì–´ë–»ê²Œ ë°”ë€Œì—ˆëŠ”ì§€ ì•Œê³  ì‹¶ìŠµë‹ˆë‹¤.', 4, 45, 1, 1, FALSE, FALSE, TRUE, 'ACTIVE', 'QNA', 'ë©´íšŒ', 0, FALSE, NULL, 0, 0, 'ë©´íšŒ,ì‹œê°„,ê·œì •', 'ë©´íšŒ ì‹œê°„ ê·œì • ë¬¸ì˜', 'ë©´íšŒ,ì‹œê°„,ê·œì •,ì½”ë¡œë‚˜', NOW(), NOW(), FALSE),
    ('INFO', 'ì¬í™œ í”„ë¡œê·¸ë¨ ì¢…ë¥˜ì™€ íš¨ê³¼', 'ìš”ì–‘ì›ì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ ì¬í™œ í”„ë¡œê·¸ë¨ë“¤ê³¼ ê·¸ íš¨ê³¼ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤.', 1, 63, 9, 2, FALSE, FALSE, TRUE, 'ACTIVE', 'INFO', 'ì¬í™œ', 1, FALSE, NULL, 0, 0, 'ì¬í™œ,í”„ë¡œê·¸ë¨,íš¨ê³¼', 'ì¬í™œ í”„ë¡œê·¸ë¨ ì•ˆë‚´', 'ì¬í™œ,í”„ë¡œê·¸ë¨,ë¬¼ë¦¬ì¹˜ë£Œ,ì‘ì—…ì¹˜ë£Œ', NOW(), NOW(), FALSE),
    ('QNA', 'ì‹ì‚¬ ë©”ë‰´ëŠ” ì–´ë–»ê²Œ ì œê³µë˜ë‚˜ìš”?', 'ìš”ì–‘ì›ì˜ ì‹ì‚¬ ë©”ë‰´ êµ¬ì„±ê³¼ íŠ¹ë³„ì‹ ì œê³µ ì—¬ë¶€ê°€ ê¶ê¸ˆí•©ë‹ˆë‹¤.', 5, 58, 4, 3, FALSE, FALSE, TRUE, 'ACTIVE', 'QNA', 'ì‹ì‚¬', 0, FALSE, NULL, 0, 0, 'ì‹ì‚¬,ë©”ë‰´,ê¸‰ì‹', 'ì‹ì‚¬ ë©”ë‰´ ë¬¸ì˜', 'ì‹ì‚¬,ë©”ë‰´,ê¸‰ì‹,ìš”ì–‘ì›', NOW(), NOW(), FALSE);
SELECT 'ë¼ì´íŠ¸ì¼€ì–´ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!' as message;
select * from member;
select * from job_posting;
select * from facility;
select * from facility_images;
use carelink;
`````
