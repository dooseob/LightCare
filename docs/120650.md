2025-07-06 12:06:50.263 DEBUG 9448 --- [nio-8080-exec-6] c.e.c.d.FacilityMapper.getFacilityById   : ==>  Preparing: SELECT f.facility_id, f.facility_name, f.facility_type, f.address, f.phone, f.latitude, f.longitude, f.description, f.facility_image, f.homepage, f.capacity, f.current_occupancy, f.operating_hours, f.features, f.average_rating, f.review_count, f.grade_rating, f.registered_member_id, m.name as registered_member_name, f.is_deleted, f.is_approved, CASE WHEN f.is_deleted = true THEN '삭제됨' WHEN f.is_approved = false THEN '승인대기' ELSE '정상' END as status FROM facility f LEFT JOIN member m ON f.registered_member_id = m.member_id WHERE f.facility_id = ?
2025-07-06 12:06:50.264 DEBUG 9448 --- [nio-8080-exec-6] c.e.c.d.FacilityMapper.getFacilityById   : ==> Parameters: 1(Long)
2025-07-06 12:06:50.266 DEBUG 9448 --- [nio-8080-exec-6] c.e.c.d.FacilityMapper.getFacilityById   : <==      Total: 1
2025-07-06 12:06:50.266 DEBUG 9448 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21009a24]
2025-07-06 12:06:50.266  INFO 9448 --- [nio-8080-exec-6] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 완료 - facilityName: 서울 행복요양원, status: 정상
2025-07-06 12:06:50.266 DEBUG 9448 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21009a24]
2025-07-06 12:06:50.266 DEBUG 9448 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21009a24]
2025-07-06 12:06:50.266 DEBUG 9448 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21009a24]
2025-07-06 12:06:50.266 DEBUG 9448 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-06 12:06:50.266 DEBUG 9448 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1887766276 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361]
2025-07-06 12:06:50.267 DEBUG 9448 --- [nio-8080-exec-6] o.s.jdbc.datasource.DataSourceUtils      : Resetting read-only flag of JDBC Connection [HikariProxyConnection@1887766276 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361]
2025-07-06 12:06:50.267 DEBUG 9448 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1887766276 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] after transaction
2025-07-06 12:06:50.267 DEBUG 9448 --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-07-06 12:06:50.267 DEBUG 9448 --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [FacilityDTO(facilityId=1, facilityName=서울 행복요양원, facilityType=NURSING_HOME, address=서울시 강남구 테헤란로 123 (truncated)...]
2025-07-06 12:06:50.268 DEBUG 9448 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:51.778 DEBUG 9448 --- [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/facility/edit/1", parameters={}
2025-07-06 12:06:51.778 DEBUG 9448 --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.example.carelink.controller.FacilityController#editFacilityForm(Long, HttpSession, Model, RedirectAttributes)
2025-07-06 12:06:51.778 DEBUG 9448 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.example.carelink.service.FacilityService.getFacilityById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-07-06 12:06:51.779 DEBUG 9448 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1813453249 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] for JDBC transaction
2025-07-06 12:06:51.779 DEBUG 9448 --- [nio-8080-exec-8] o.s.jdbc.datasource.DataSourceUtils      : Setting JDBC Connection [HikariProxyConnection@1813453249 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] read-only
2025-07-06 12:06:51.779  INFO 9448 --- [nio-8080-exec-8] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 시작 - facilityId: 1
2025-07-06 12:06:51.779 DEBUG 9448 --- [nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-07-06 12:06:51.779 DEBUG 9448 --- [nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aec13fa]
2025-07-06 12:06:51.779 DEBUG 9448 --- [nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1813453249 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] will be managed by Spring
2025-07-06 12:06:51.779 DEBUG 9448 --- [nio-8080-exec-8] c.e.c.d.FacilityMapper.getFacilityById   : ==>  Preparing: SELECT f.facility_id, f.facility_name, f.facility_type, f.address, f.phone, f.latitude, f.longitude, f.description, f.facility_image, f.homepage, f.capacity, f.current_occupancy, f.operating_hours, f.features, f.average_rating, f.review_count, f.grade_rating, f.registered_member_id, m.name as registered_member_name, f.is_deleted, f.is_approved, CASE WHEN f.is_deleted = true THEN '삭제됨' WHEN f.is_approved = false THEN '승인대기' ELSE '정상' END as status FROM facility f LEFT JOIN member m ON f.registered_member_id = m.member_id WHERE f.facility_id = ?
2025-07-06 12:06:51.780 DEBUG 9448 --- [nio-8080-exec-8] c.e.c.d.FacilityMapper.getFacilityById   : ==> Parameters: 1(Long)
2025-07-06 12:06:51.781 DEBUG 9448 --- [nio-8080-exec-8] c.e.c.d.FacilityMapper.getFacilityById   : <==      Total: 1
2025-07-06 12:06:51.781 DEBUG 9448 --- [nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aec13fa]
2025-07-06 12:06:51.781  INFO 9448 --- [nio-8080-exec-8] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 완료 - facilityName: 서울 행복요양원, status: 정상
2025-07-06 12:06:51.781 DEBUG 9448 --- [nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aec13fa]
2025-07-06 12:06:51.781 DEBUG 9448 --- [nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aec13fa]
2025-07-06 12:06:51.781 DEBUG 9448 --- [nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aec13fa]
2025-07-06 12:06:51.781 DEBUG 9448 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-06 12:06:51.781 DEBUG 9448 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1813453249 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361]
2025-07-06 12:06:51.781 DEBUG 9448 --- [nio-8080-exec-8] o.s.jdbc.datasource.DataSourceUtils      : Resetting read-only flag of JDBC Connection [HikariProxyConnection@1813453249 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361]
2025-07-06 12:06:51.782 DEBUG 9448 --- [nio-8080-exec-8] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1813453249 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] after transaction
2025-07-06 12:06:51.782  INFO 9448 --- [nio-8080-exec-8] c.e.c.controller.FacilityController      : 시설 수정 페이지 접근: facilityId=1, memberId=6
2025-07-06 12:06:51.782 DEBUG 9448 --- [nio-8080-exec-8] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, application/signed-exchange;v=b3;q=0.7, */*;q=0.8]
2025-07-06 12:06:51.801 DEBUG 9448 --- [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:51.811 DEBUG 9448 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/css/common.css", parameters={}
2025-07-06 12:06:51.811 DEBUG 9448 --- [nio-8080-exec-7] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:51.815 DEBUG 9448 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/js/smart-scroll-utility.js", parameters={}
2025-07-06 12:06:51.815 DEBUG 9448 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_4_7ca60785-ad60-401e-9039-4c46a7493707.webp", parameters={}
2025-07-06 12:06:51.816 DEBUG 9448 --- [nio-8080-exec-3] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:51.816 DEBUG 9448 --- [io-8080-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:06:51.819 DEBUG 9448 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:51.820 DEBUG 9448 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:51.822 DEBUG 9448 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/js/common.js", parameters={}
2025-07-06 12:06:51.823 DEBUG 9448 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:51.824 DEBUG 9448 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:51.828 DEBUG 9448 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/js/kakaomap.js", parameters={}
2025-07-06 12:06:51.828 DEBUG 9448 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/js/facility-edit.js", parameters={}
2025-07-06 12:06:51.829 DEBUG 9448 --- [nio-8080-exec-9] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:51.829 DEBUG 9448 --- [nio-8080-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:51.829 DEBUG 9448 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:51.830 DEBUG 9448 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/css/advanced-image-cropper.css", parameters={}
2025-07-06 12:06:51.830 DEBUG 9448 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/js/phone-formatter.js", parameters={}
2025-07-06 12:06:51.830 DEBUG 9448 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/js/advanced-image-cropper.js", parameters={}
2025-07-06 12:06:51.830 DEBUG 9448 --- [nio-8080-exec-4] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:51.830 DEBUG 9448 --- [nio-8080-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:51.830 DEBUG 9448 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:51.832 DEBUG 9448 --- [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/css/rich-text-editor.css", parameters={}
2025-07-06 12:06:51.832 DEBUG 9448 --- [nio-8080-exec-8] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:51.837 DEBUG 9448 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:51.839 DEBUG 9448 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:51.839 DEBUG 9448 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:51.839 DEBUG 9448 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/js/rich-text-editor.js", parameters={}
2025-07-06 12:06:51.840 DEBUG 9448 --- [nio-8080-exec-7] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:51.839 DEBUG 9448 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:51.841 DEBUG 9448 --- [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:51.841 DEBUG 9448 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:51.846 DEBUG 9448 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:55.307 DEBUG 9448 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/facility/crop-images/1", parameters={}
2025-07-06 12:06:55.307 DEBUG 9448 --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.example.carelink.controller.FacilityController#cropImagePage(Long, HttpSession, Model, RedirectAttributes)
2025-07-06 12:06:55.308 DEBUG 9448 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.example.carelink.service.FacilityService.getFacilityById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-07-06 12:06:55.308 DEBUG 9448 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@936752327 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] for JDBC transaction
2025-07-06 12:06:55.308 DEBUG 9448 --- [io-8080-exec-10] o.s.jdbc.datasource.DataSourceUtils      : Setting JDBC Connection [HikariProxyConnection@936752327 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] read-only
2025-07-06 12:06:55.308  INFO 9448 --- [io-8080-exec-10] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 시작 - facilityId: 1
2025-07-06 12:06:55.308 DEBUG 9448 --- [io-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-07-06 12:06:55.308 DEBUG 9448 --- [io-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57cb2fd0]
2025-07-06 12:06:55.309 DEBUG 9448 --- [io-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@936752327 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] will be managed by Spring
2025-07-06 12:06:55.309 DEBUG 9448 --- [io-8080-exec-10] c.e.c.d.FacilityMapper.getFacilityById   : ==>  Preparing: SELECT f.facility_id, f.facility_name, f.facility_type, f.address, f.phone, f.latitude, f.longitude, f.description, f.facility_image, f.homepage, f.capacity, f.current_occupancy, f.operating_hours, f.features, f.average_rating, f.review_count, f.grade_rating, f.registered_member_id, m.name as registered_member_name, f.is_deleted, f.is_approved, CASE WHEN f.is_deleted = true THEN '삭제됨' WHEN f.is_approved = false THEN '승인대기' ELSE '정상' END as status FROM facility f LEFT JOIN member m ON f.registered_member_id = m.member_id WHERE f.facility_id = ?
2025-07-06 12:06:55.309 DEBUG 9448 --- [io-8080-exec-10] c.e.c.d.FacilityMapper.getFacilityById   : ==> Parameters: 1(Long)
2025-07-06 12:06:55.310 DEBUG 9448 --- [io-8080-exec-10] c.e.c.d.FacilityMapper.getFacilityById   : <==      Total: 1
2025-07-06 12:06:55.311 DEBUG 9448 --- [io-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57cb2fd0]
2025-07-06 12:06:55.311  INFO 9448 --- [io-8080-exec-10] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 완료 - facilityName: 서울 행복요양원, status: 정상
2025-07-06 12:06:55.311 DEBUG 9448 --- [io-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57cb2fd0]
2025-07-06 12:06:55.311 DEBUG 9448 --- [io-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57cb2fd0]
2025-07-06 12:06:55.311 DEBUG 9448 --- [io-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57cb2fd0]
2025-07-06 12:06:55.311 DEBUG 9448 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-06 12:06:55.311 DEBUG 9448 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@936752327 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361]
2025-07-06 12:06:55.311 DEBUG 9448 --- [io-8080-exec-10] o.s.jdbc.datasource.DataSourceUtils      : Resetting read-only flag of JDBC Connection [HikariProxyConnection@936752327 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361]
2025-07-06 12:06:55.311 DEBUG 9448 --- [io-8080-exec-10] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@936752327 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] after transaction
2025-07-06 12:06:55.311  INFO 9448 --- [io-8080-exec-10] c.e.c.controller.FacilityController      : 시설 이미지 크롭 페이지 접속: facilityId=1, memberId=6
2025-07-06 12:06:55.312 DEBUG 9448 --- [io-8080-exec-10] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, application/signed-exchange;v=b3;q=0.7, */*;q=0.8]
2025-07-06 12:06:55.332 DEBUG 9448 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:55.346 DEBUG 9448 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/css/common.css", parameters={}
2025-07-06 12:06:55.347 DEBUG 9448 --- [nio-8080-exec-3] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:55.354 DEBUG 9448 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/css/advanced-image-cropper.css", parameters={}
2025-07-06 12:06:55.355 DEBUG 9448 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:55.356 DEBUG 9448 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/js/facility-image-cropper.js", parameters={}
2025-07-06 12:06:55.357 DEBUG 9448 --- [nio-8080-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:55.355 DEBUG 9448 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/js/smart-scroll-utility.js", parameters={}
2025-07-06 12:06:55.355 DEBUG 9448 --- [nio-8080-exec-9] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:55.357 DEBUG 9448 --- [nio-8080-exec-6] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-06 12:06:55.364 DEBUG 9448 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:55.364 DEBUG 9448 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:06:55.364 DEBUG 9448 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:07:08.409 DEBUG 9448 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:07:08.409 DEBUG 9448 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:07:08.409 DEBUG 9448 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Fill pool skipped, pool is at sufficient level.
2025-07-06 12:07:38.418 DEBUG 9448 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:07:38.418 DEBUG 9448 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:07:38.418 DEBUG 9448 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Fill pool skipped, pool is at sufficient level.
2025-07-06 12:08:08.423 DEBUG 9448 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:08:08.423 DEBUG 9448 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:08:08.423 DEBUG 9448 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Fill pool skipped, pool is at sufficient level.
2025-07-06 12:08:15.385 DEBUG 9448 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/facility/crop-images/save/1", parameters={multipart}
2025-07-06 12:08:15.437 DEBUG 9448 --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.example.carelink.controller.FacilityController#saveFacilityImage(Long, MultipartFile, String, String, String, HttpSession)
2025-07-06 12:08:15.439  INFO 9448 --- [nio-8080-exec-3] c.e.c.controller.FacilityController      : 🔥 시설 이미지 저장 시작 - facilityId: 1, 받은 파라미터들 확인
2025-07-06 12:08:15.439  INFO 9448 --- [nio-8080-exec-3] c.e.c.controller.FacilityController      : 📋 altText: '시설 메인 이미지 - 행복요양원 외관', format: 'webp', imageIndex: 'null'
2025-07-06 12:08:15.439  INFO 9448 --- [nio-8080-exec-3] c.e.c.controller.FacilityController      : 📁 파일 정보 - 이름: 'facility_image.webp', 크기: 84533bytes, 타입: 'image/webp'
2025-07-06 12:08:15.439  INFO 9448 --- [nio-8080-exec-3] c.e.c.controller.FacilityController      : 👤 로그인 사용자: facility01 (role: FACILITY)
2025-07-06 12:08:15.439 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.example.carelink.service.FacilityService.getFacilityById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-07-06 12:08:15.440 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1740201103 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] for JDBC transaction
2025-07-06 12:08:15.440 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.datasource.DataSourceUtils      : Setting JDBC Connection [HikariProxyConnection@1740201103 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] read-only
2025-07-06 12:08:15.440  INFO 9448 --- [nio-8080-exec-3] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 시작 - facilityId: 1
2025-07-06 12:08:15.440 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-07-06 12:08:15.440 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44ae6a5a]
2025-07-06 12:08:15.440 DEBUG 9448 --- [nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1740201103 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] will be managed by Spring
2025-07-06 12:08:15.440 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.FacilityMapper.getFacilityById   : ==>  Preparing: SELECT f.facility_id, f.facility_name, f.facility_type, f.address, f.phone, f.latitude, f.longitude, f.description, f.facility_image, f.homepage, f.capacity, f.current_occupancy, f.operating_hours, f.features, f.average_rating, f.review_count, f.grade_rating, f.registered_member_id, m.name as registered_member_name, f.is_deleted, f.is_approved, CASE WHEN f.is_deleted = true THEN '삭제됨' WHEN f.is_approved = false THEN '승인대기' ELSE '정상' END as status FROM facility f LEFT JOIN member m ON f.registered_member_id = m.member_id WHERE f.facility_id = ?
2025-07-06 12:08:15.441 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.FacilityMapper.getFacilityById   : ==> Parameters: 1(Long)
2025-07-06 12:08:15.442 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.FacilityMapper.getFacilityById   : <==      Total: 1
2025-07-06 12:08:15.442 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44ae6a5a]
2025-07-06 12:08:15.443  INFO 9448 --- [nio-8080-exec-3] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 완료 - facilityName: 서울 행복요양원, status: 정상
2025-07-06 12:08:15.443 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44ae6a5a]
2025-07-06 12:08:15.443 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44ae6a5a]
2025-07-06 12:08:15.443 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44ae6a5a]
2025-07-06 12:08:15.443 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-06 12:08:15.443 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1740201103 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361]
2025-07-06 12:08:15.443 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.datasource.DataSourceUtils      : Resetting read-only flag of JDBC Connection [HikariProxyConnection@1740201103 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361]
2025-07-06 12:08:15.443 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1740201103 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] after transaction
2025-07-06 12:08:15.444  INFO 9448 --- [nio-8080-exec-3] c.e.c.controller.FacilityController      : 🖼️ 시설 이미지 저장 요청 - facilityId: 1, 형식: webp, 인덱스: null, 크기: 84533 bytes
2025-07-06 12:08:15.444  INFO 9448 --- [nio-8080-exec-3] c.e.c.controller.FacilityController      : 🏷️ 시설 이미지 Alt 텍스트 설정: 시설 메인 이미지 - 행복요양원 외관
2025-07-06 12:08:15.444  INFO 9448 --- [nio-8080-exec-3] c.e.c.controller.FacilityController      : 📷 업로드된 이미지 형식: image/webp
2025-07-06 12:08:15.444  INFO 9448 --- [nio-8080-exec-3] c.e.c.controller.FacilityController      : 🚀 WebP 형식 감지 - 효율적 압축 적용됨
2025-07-06 12:08:15.444  INFO 9448 --- [nio-8080-exec-3] c.e.c.controller.FacilityController      : 🔧 서비스 호출 전 - facilityId: 1, orderIndex: null, altText: '시설 메인 이미지 - 행복요양원 외관'
2025-07-06 12:08:15.444 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.example.carelink.service.FacilityImageService.saveSingleFacilityImage]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-07-06 12:08:15.444 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@82203879 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] for JDBC transaction
2025-07-06 12:08:15.447  INFO 9448 --- [nio-8080-exec-3] c.e.c.service.FacilityImageService       : 📸 단일 시설 이미지 저장 시작 - facilityId: 1, order: null
2025-07-06 12:08:15.449  INFO 9448 --- [nio-8080-exec-3] c.e.c.service.FacilityImageService       : 📝 파일명 변환: 'facility_image.webp' → 'facility_1_0_9b977a7e-5aec-4b75-8709-30774be1cd3e.webp'
2025-07-06 12:08:15.451  INFO 9448 --- [nio-8080-exec-3] c.e.c.service.FacilityImageService       : 시설 이미지 파일 저장 완료: C:\carelink-uploads\facility\facility_1_0_9b977a7e-5aec-4b75-8709-30774be1cd3e.webp
2025-07-06 12:08:15.451 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-07-06 12:08:15.451 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249b3700]
2025-07-06 12:08:15.451 DEBUG 9448 --- [nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@82203879 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] will be managed by Spring
2025-07-06 12:08:15.451 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.countImagesByFacilityId        : ==>  Preparing: SELECT COUNT(*) FROM facility_images WHERE facility_id = ?
2025-07-06 12:08:15.451 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.countImagesByFacilityId        : ==> Parameters: 1(Long)
2025-07-06 12:08:15.454 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.countImagesByFacilityId        : <==      Total: 1
2025-07-06 12:08:15.454 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249b3700]
2025-07-06 12:08:15.454 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249b3700] from current transaction
2025-07-06 12:08:15.454 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.insertFacilityImage            : ==>  Preparing: INSERT INTO facility_images ( facility_id, image_path, image_alt_text, image_order, is_main_image, upload_date ) VALUES ( ?, ?, ?, ?, ?, NOW() )
2025-07-06 12:08:15.455 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.insertFacilityImage            : ==> Parameters: 1(Long), /uploads/facility/facility_1_0_9b977a7e-5aec-4b75-8709-30774be1cd3e.webp(String), 시설 메인 이미지 - 행복요양원 외관(String), 4(Integer), false(Boolean)
2025-07-06 12:08:15.457 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.insertFacilityImage            : <==    Updates: 1
2025-07-06 12:08:15.460 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249b3700]
2025-07-06 12:08:15.460  INFO 9448 --- [nio-8080-exec-3] c.e.c.service.FacilityImageService       : ✅ facility_images 테이블에 저장 완료 - imageId: 5, path: /uploads/facility/facility_1_0_9b977a7e-5aec-4b75-8709-30774be1cd3e.webp
2025-07-06 12:08:15.460 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249b3700] from current transaction
2025-07-06 12:08:15.460 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.countImagesByFacilityId        : ==>  Preparing: SELECT COUNT(*) FROM facility_images WHERE facility_id = ?
2025-07-06 12:08:15.461 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.countImagesByFacilityId        : ==> Parameters: 1(Long)
2025-07-06 12:08:15.462 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.countImagesByFacilityId        : <==      Total: 1
2025-07-06 12:08:15.462 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249b3700]
2025-07-06 12:08:15.462 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249b3700] from current transaction
2025-07-06 12:08:15.463 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.getMainImageByFacilityId       : ==>  Preparing: SELECT image_id, facility_id, image_path, image_alt_text, image_order, is_main_image, upload_date, updated_at FROM facility_images WHERE facility_id = ? AND is_main_image = TRUE LIMIT 1
2025-07-06 12:08:15.463 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.getMainImageByFacilityId       : ==> Parameters: 1(Long)
2025-07-06 12:08:15.464 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.getMainImageByFacilityId       : <==      Total: 1
2025-07-06 12:08:15.464 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249b3700]
2025-07-06 12:08:15.464  INFO 9448 --- [nio-8080-exec-3] c.e.c.service.FacilityImageService       : 🔄 시설 테이블 메인 이미지 정보 업데이트 시작 - facilityId: 1, imageCount: 5, mainImagePath: /uploads/facility/facility_1_4_7ca60785-ad60-401e-9039-4c46a7493707.webp
2025-07-06 12:08:15.464 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249b3700] from current transaction
2025-07-06 12:08:15.464 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.updateFacilityMainImage        : ==>  Preparing: UPDATE facility SET facility_image = ?, image_count = ?, updated_at = NOW() WHERE facility_id = ?
2025-07-06 12:08:15.464 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.updateFacilityMainImage        : ==> Parameters: /uploads/facility/facility_1_4_7ca60785-ad60-401e-9039-4c46a7493707.webp(String), 5(Integer), 1(Long)
2025-07-06 12:08:15.466 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.updateFacilityMainImage        : <==    Updates: 1
2025-07-06 12:08:15.466 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249b3700]
2025-07-06 12:08:15.466  INFO 9448 --- [nio-8080-exec-3] c.e.c.service.FacilityImageService       : ✅ 시설 테이블 업데이트 성공 - facilityId: 1, 업데이트된 행: 1
2025-07-06 12:08:15.466 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249b3700]
2025-07-06 12:08:15.466 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249b3700]
2025-07-06 12:08:15.466 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249b3700]
2025-07-06 12:08:15.466 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-06 12:08:15.466 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@82203879 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361]
2025-07-06 12:08:15.468 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@82203879 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] after transaction
2025-07-06 12:08:15.468  INFO 9448 --- [nio-8080-exec-3] c.e.c.controller.FacilityController      : ✅ 서비스 호출 완료 - 저장된 이미지ID: 5, 경로: /uploads/facility/facility_1_0_9b977a7e-5aec-4b75-8709-30774be1cd3e.webp
2025-07-06 12:08:15.468  INFO 9448 --- [nio-8080-exec-3] c.e.c.controller.FacilityController      : ✅ 시설 이미지 저장 성공: facilityId=1, imageId=5
2025-07-06 12:08:15.468 DEBUG 9448 --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-07-06 12:08:15.468 DEBUG 9448 --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [{facilityId=1, imageId=5, success=true, imagePath=/uploads/facility/facility_1_0_9b977a7e-5aec-4b75- (truncated)...]
2025-07-06 12:08:15.469 DEBUG 9448 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:08:15.473 DEBUG 9448 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/facility/api/1/images", parameters={}
2025-07-06 12:08:15.473 DEBUG 9448 --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.example.carelink.controller.FacilityController#getFacilityImages(Long, HttpSession)
2025-07-06 12:08:15.474 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.example.carelink.service.FacilityService.getFacilityById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-07-06 12:08:15.474 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@815601379 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] for JDBC transaction
2025-07-06 12:08:15.474 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.datasource.DataSourceUtils      : Setting JDBC Connection [HikariProxyConnection@815601379 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] read-only
2025-07-06 12:08:15.474  INFO 9448 --- [nio-8080-exec-3] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 시작 - facilityId: 1
2025-07-06 12:08:15.474 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-07-06 12:08:15.475 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68358ea4]
2025-07-06 12:08:15.475 DEBUG 9448 --- [nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@815601379 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] will be managed by Spring
2025-07-06 12:08:15.475 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.FacilityMapper.getFacilityById   : ==>  Preparing: SELECT f.facility_id, f.facility_name, f.facility_type, f.address, f.phone, f.latitude, f.longitude, f.description, f.facility_image, f.homepage, f.capacity, f.current_occupancy, f.operating_hours, f.features, f.average_rating, f.review_count, f.grade_rating, f.registered_member_id, m.name as registered_member_name, f.is_deleted, f.is_approved, CASE WHEN f.is_deleted = true THEN '삭제됨' WHEN f.is_approved = false THEN '승인대기' ELSE '정상' END as status FROM facility f LEFT JOIN member m ON f.registered_member_id = m.member_id WHERE f.facility_id = ?
2025-07-06 12:08:15.475 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.FacilityMapper.getFacilityById   : ==> Parameters: 1(Long)
2025-07-06 12:08:15.481 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.FacilityMapper.getFacilityById   : <==      Total: 1
2025-07-06 12:08:15.482 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68358ea4]
2025-07-06 12:08:15.482  INFO 9448 --- [nio-8080-exec-3] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 완료 - facilityName: 서울 행복요양원, status: 정상
2025-07-06 12:08:15.482 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68358ea4]
2025-07-06 12:08:15.482 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68358ea4]
2025-07-06 12:08:15.482 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68358ea4]
2025-07-06 12:08:15.482 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-06 12:08:15.482 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@815601379 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361]
2025-07-06 12:08:15.482 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.datasource.DataSourceUtils      : Resetting read-only flag of JDBC Connection [HikariProxyConnection@815601379 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361]
2025-07-06 12:08:15.483 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@815601379 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] after transaction
2025-07-06 12:08:15.483 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.example.carelink.service.FacilityImageService.getImagesByFacilityId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-07-06 12:08:15.483 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@244511073 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] for JDBC transaction
2025-07-06 12:08:15.483 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.datasource.DataSourceUtils      : Setting JDBC Connection [HikariProxyConnection@244511073 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] read-only
2025-07-06 12:08:15.483  INFO 9448 --- [nio-8080-exec-3] c.e.c.service.FacilityImageService       : 시설 이미지 목록 조회 시작 - facilityId: 1
2025-07-06 12:08:15.483 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-07-06 12:08:15.484 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a829b71]
2025-07-06 12:08:15.484 DEBUG 9448 --- [nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@244511073 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] will be managed by Spring
2025-07-06 12:08:15.484 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.getImagesByFacilityId          : ==>  Preparing: SELECT image_id, facility_id, image_path, image_alt_text, image_order, is_main_image, upload_date, updated_at FROM facility_images WHERE facility_id = ? ORDER BY image_order ASC, upload_date ASC
2025-07-06 12:08:15.484 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.getImagesByFacilityId          : ==> Parameters: 1(Long)
2025-07-06 12:08:15.486 DEBUG 9448 --- [nio-8080-exec-3] c.e.c.d.F.getImagesByFacilityId          : <==      Total: 5
2025-07-06 12:08:15.486 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a829b71]
2025-07-06 12:08:15.486  INFO 9448 --- [nio-8080-exec-3] c.e.c.service.FacilityImageService       : 시설 이미지 목록 조회 완료 - facilityId: 1, 이미지 수: 5
2025-07-06 12:08:15.486 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a829b71]
2025-07-06 12:08:15.486 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a829b71]
2025-07-06 12:08:15.486 DEBUG 9448 --- [nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a829b71]
2025-07-06 12:08:15.486 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-06 12:08:15.486 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@244511073 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361]
2025-07-06 12:08:15.486 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.datasource.DataSourceUtils      : Resetting read-only flag of JDBC Connection [HikariProxyConnection@244511073 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361]
2025-07-06 12:08:15.487 DEBUG 9448 --- [nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@244511073 wrapping com.mysql.cj.jdbc.ConnectionImpl@7341d361] after transaction
2025-07-06 12:08:15.487  INFO 9448 --- [nio-8080-exec-3] c.e.c.controller.FacilityController      : 📋 시설 이미지 목록 조회 - facilityId: 1, 이미지 수: 5
2025-07-06 12:08:15.487 DEBUG 9448 --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-07-06 12:08:15.492 DEBUG 9448 --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [[FacilityImageDTO(imageId=2, facilityId=1, imagePath=/uploads/facility/facility_1_0_7c8034d3-7bf5-47 (truncated)...]
2025-07-06 12:08:15.495 DEBUG 9448 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:08:15.500 DEBUG 9448 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_0_7c8034d3-7bf5-4724-832f-ed08b641263f.webp", parameters={}
2025-07-06 12:08:15.501 DEBUG 9448 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_0_9b977a7e-5aec-4b75-8709-30774be1cd3e.webp", parameters={}
2025-07-06 12:08:15.501 DEBUG 9448 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_0_437f8090-2744-498e-86e0-f8efa91ca0a1.webp", parameters={}
2025-07-06 12:08:15.501 DEBUG 9448 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_0_a2a95d6a-0c77-4641-b1b6-1ea49beff29d.webp", parameters={}
2025-07-06 12:08:15.501 DEBUG 9448 --- [nio-8080-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:08:15.501 DEBUG 9448 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_4_7ca60785-ad60-401e-9039-4c46a7493707.webp", parameters={}
2025-07-06 12:08:15.501 DEBUG 9448 --- [nio-8080-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:08:15.501 DEBUG 9448 --- [nio-8080-exec-9] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:08:15.501 DEBUG 9448 --- [nio-8080-exec-6] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:08:15.502 DEBUG 9448 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:08:15.504 DEBUG 9448 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:08:15.504 DEBUG 9448 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:08:15.506 DEBUG 9448 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:08:15.507 DEBUG 9448 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:08:15.508 DEBUG 9448 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:08:38.433 DEBUG 9448 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:08:38.433 DEBUG 9448 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:08:38.433 DEBUG 9448 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Fill pool skipped, pool is at sufficient level.