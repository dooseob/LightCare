2025-07-06 12:43:29.750  INFO 14204 --- [nio-8080-exec-4] c.e.c.service.FacilityImageService       : 🔄 시설 테이블 메인 이미지 정보 업데이트 시작 - facilityId: 1, imageCount: 8, mainImagePath: /uploads/facility/facility_1_4_7ca60785-ad60-401e-9039-4c46a7493707.webp
2025-07-06 12:43:29.751 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77743194] from current transaction
2025-07-06 12:43:29.751 DEBUG 14204 --- [nio-8080-exec-4] c.e.c.d.F.updateFacilityMainImage        : ==>  Preparing: UPDATE facility SET facility_image = ?, image_count = ?, updated_at = NOW() WHERE facility_id = ?
2025-07-06 12:43:29.751 DEBUG 14204 --- [nio-8080-exec-4] c.e.c.d.F.updateFacilityMainImage        : ==> Parameters: /uploads/facility/facility_1_4_7ca60785-ad60-401e-9039-4c46a7493707.webp(String), 8(Integer), 1(Long)
2025-07-06 12:43:29.753 DEBUG 14204 --- [nio-8080-exec-4] c.e.c.d.F.updateFacilityMainImage        : <==    Updates: 1
2025-07-06 12:43:29.753 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77743194]
2025-07-06 12:43:29.753  INFO 14204 --- [nio-8080-exec-4] c.e.c.service.FacilityImageService       : ✅ 시설 테이블 업데이트 성공 - facilityId: 1, 업데이트된 행: 1
2025-07-06 12:43:29.753 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77743194]
2025-07-06 12:43:29.753 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77743194]
2025-07-06 12:43:29.753 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77743194]
2025-07-06 12:43:29.753 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-06 12:43:29.753 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@738361978 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399]
2025-07-06 12:43:29.755 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@738361978 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] after transaction
2025-07-06 12:43:29.755  INFO 14204 --- [nio-8080-exec-4] c.e.c.controller.FacilityController      : ✅ 서비스 호출 완료 - 저장된 이미지ID: 8, 경로: /uploads/facility/facility_1_4_facility_one_image_four_306101b9.webp
2025-07-06 12:43:29.756  INFO 14204 --- [nio-8080-exec-4] c.e.c.controller.FacilityController      : ✅ 시설 이미지 저장 성공: facilityId=1, imageId=8
2025-07-06 12:43:29.756 DEBUG 14204 --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-07-06 12:43:29.756 DEBUG 14204 --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [{facilityId=1, imageId=8, success=true, imagePath=/uploads/facility/facility_1_4_facility_one_image_ (truncated)...]
2025-07-06 12:43:29.758 DEBUG 14204 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:43:30.267 DEBUG 14204 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/facility/api/1/images", parameters={}
2025-07-06 12:43:30.268 DEBUG 14204 --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.example.carelink.controller.FacilityController#getFacilityImages(Long, HttpSession)
2025-07-06 12:43:30.268 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.example.carelink.service.FacilityService.getFacilityById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-07-06 12:43:30.269 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@852519780 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] for JDBC transaction
2025-07-06 12:43:30.269 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.datasource.DataSourceUtils      : Setting JDBC Connection [HikariProxyConnection@852519780 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] read-only
2025-07-06 12:43:30.269  INFO 14204 --- [nio-8080-exec-5] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 시작 - facilityId: 1
2025-07-06 12:43:30.269 DEBUG 14204 --- [nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-07-06 12:43:30.269 DEBUG 14204 --- [nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31177245]
2025-07-06 12:43:30.269 DEBUG 14204 --- [nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@852519780 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] will be managed by Spring
2025-07-06 12:43:30.270 DEBUG 14204 --- [nio-8080-exec-5] c.e.c.d.FacilityMapper.getFacilityById   : ==>  Preparing: SELECT f.facility_id, f.facility_name, f.facility_type, f.address, f.phone, f.latitude, f.longitude, f.description, f.facility_image, f.homepage, f.capacity, f.current_occupancy, f.operating_hours, f.features, f.average_rating, f.review_count, f.grade_rating, f.registered_member_id, m.name as registered_member_name, f.is_deleted, f.is_approved, CASE WHEN f.is_deleted = true THEN '삭제됨' WHEN f.is_approved = false THEN '승인대기' ELSE '정상' END as status FROM facility f LEFT JOIN member m ON f.registered_member_id = m.member_id WHERE f.facility_id = ?
2025-07-06 12:43:30.270 DEBUG 14204 --- [nio-8080-exec-5] c.e.c.d.FacilityMapper.getFacilityById   : ==> Parameters: 1(Long)
2025-07-06 12:43:30.272 DEBUG 14204 --- [nio-8080-exec-5] c.e.c.d.FacilityMapper.getFacilityById   : <==      Total: 1
2025-07-06 12:43:30.272 DEBUG 14204 --- [nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31177245]
2025-07-06 12:43:30.273  INFO 14204 --- [nio-8080-exec-5] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 완료 - facilityName: 서울 행복요양원, status: 정상
2025-07-06 12:43:30.273 DEBUG 14204 --- [nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31177245]
2025-07-06 12:43:30.273 DEBUG 14204 --- [nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31177245]
2025-07-06 12:43:30.273 DEBUG 14204 --- [nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31177245]
2025-07-06 12:43:30.273 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-06 12:43:30.273 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@852519780 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399]
2025-07-06 12:43:30.273 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.datasource.DataSourceUtils      : Resetting read-only flag of JDBC Connection [HikariProxyConnection@852519780 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399]
2025-07-06 12:43:30.273 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@852519780 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] after transaction
2025-07-06 12:43:30.274 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.example.carelink.service.FacilityImageService.getImagesByFacilityId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-07-06 12:43:30.274 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2067813844 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] for JDBC transaction
2025-07-06 12:43:30.274 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.datasource.DataSourceUtils      : Setting JDBC Connection [HikariProxyConnection@2067813844 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] read-only
2025-07-06 12:43:30.274  INFO 14204 --- [nio-8080-exec-5] c.e.c.service.FacilityImageService       : 시설 이미지 목록 조회 시작 - facilityId: 1
2025-07-06 12:43:30.274 DEBUG 14204 --- [nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-07-06 12:43:30.274 DEBUG 14204 --- [nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@714f85a3]
2025-07-06 12:43:30.275 DEBUG 14204 --- [nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2067813844 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] will be managed by Spring
2025-07-06 12:43:30.275 DEBUG 14204 --- [nio-8080-exec-5] c.e.c.d.F.getImagesByFacilityId          : ==>  Preparing: SELECT image_id, facility_id, image_path, image_alt_text, image_order, is_main_image, upload_date, updated_at FROM facility_images WHERE facility_id = ? ORDER BY image_order ASC, upload_date ASC
2025-07-06 12:43:30.275 DEBUG 14204 --- [nio-8080-exec-5] c.e.c.d.F.getImagesByFacilityId          : ==> Parameters: 1(Long)
2025-07-06 12:43:30.278 DEBUG 14204 --- [nio-8080-exec-5] c.e.c.d.F.getImagesByFacilityId          : <==      Total: 8
2025-07-06 12:43:30.278 DEBUG 14204 --- [nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@714f85a3]
2025-07-06 12:43:30.278  INFO 14204 --- [nio-8080-exec-5] c.e.c.service.FacilityImageService       : 시설 이미지 목록 조회 완료 - facilityId: 1, 이미지 수: 8
2025-07-06 12:43:30.278 DEBUG 14204 --- [nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@714f85a3]
2025-07-06 12:43:30.278 DEBUG 14204 --- [nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@714f85a3]
2025-07-06 12:43:30.278 DEBUG 14204 --- [nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@714f85a3]
2025-07-06 12:43:30.278 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-06 12:43:30.278 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2067813844 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399]
2025-07-06 12:43:30.278 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.datasource.DataSourceUtils      : Resetting read-only flag of JDBC Connection [HikariProxyConnection@2067813844 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399]
2025-07-06 12:43:30.279 DEBUG 14204 --- [nio-8080-exec-5] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2067813844 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] after transaction
2025-07-06 12:43:30.279  INFO 14204 --- [nio-8080-exec-5] c.e.c.controller.FacilityController      : 📋 시설 이미지 목록 조회 - facilityId: 1, 이미지 수: 8
2025-07-06 12:43:30.280 DEBUG 14204 --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-07-06 12:43:30.286 DEBUG 14204 --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [[FacilityImageDTO(imageId=2, facilityId=1, imagePath=/uploads/facility/facility_1_0_7c8034d3-7bf5-47 (truncated)...]
2025-07-06 12:43:30.289 DEBUG 14204 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:43:30.293 DEBUG 14204 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_4_7ca60785-ad60-401e-9039-4c46a7493707.webp", parameters={}
2025-07-06 12:43:30.295 DEBUG 14204 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:43:30.297 DEBUG 14204 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_0_9b977a7e-5aec-4b75-8709-30774be1cd3e.webp", parameters={}
2025-07-06 12:43:30.297 DEBUG 14204 --- [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_4_facility_one_image_four_306101b9.webp", parameters={}
2025-07-06 12:43:30.297 DEBUG 14204 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_0_7c8034d3-7bf5-4724-832f-ed08b641263f.webp", parameters={}
2025-07-06 12:43:30.297 DEBUG 14204 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_0_a2a95d6a-0c77-4641-b1b6-1ea49beff29d.webp", parameters={}
2025-07-06 12:43:30.298 DEBUG 14204 --- [nio-8080-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:43:30.298 DEBUG 14204 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:43:30.298 DEBUG 14204 --- [nio-8080-exec-8] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:43:30.299 DEBUG 14204 --- [nio-8080-exec-7] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:43:30.299 DEBUG 14204 --- [nio-8080-exec-9] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:43:30.299 DEBUG 14204 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_0_437f8090-2744-498e-86e0-f8efa91ca0a1.webp", parameters={}
2025-07-06 12:43:30.300 DEBUG 14204 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_0_8439d14c-9432-40b8-ad46-e8397766d52d.webp", parameters={}
2025-07-06 12:43:30.301 DEBUG 14204 --- [nio-8080-exec-3] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:43:30.301 DEBUG 14204 --- [io-8080-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:43:30.304 DEBUG 14204 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:43:30.305 DEBUG 14204 --- [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:43:30.306 DEBUG 14204 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:43:30.306 DEBUG 14204 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:43:30.307 DEBUG 14204 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:43:30.309 DEBUG 14204 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:43:30.311 DEBUG 14204 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_0_db2a29f9-e8d6-4c43-860b-a5be6ddc32be.webp", parameters={}
2025-07-06 12:43:30.311 DEBUG 14204 --- [nio-8080-exec-6] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:43:30.314 DEBUG 14204 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:43:43.126 DEBUG 14204 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:43:43.126 DEBUG 14204 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:43:43.126 DEBUG 14204 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Fill pool skipped, pool is at sufficient level.
2025-07-06 12:44:01.523 DEBUG 14204 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/facility/api/1/images", parameters={}
2025-07-06 12:44:01.524 DEBUG 14204 --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.example.carelink.controller.FacilityController#getFacilityImages(Long, HttpSession)
2025-07-06 12:44:01.524 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.example.carelink.service.FacilityService.getFacilityById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-07-06 12:44:01.525 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1271567274 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] for JDBC transaction
2025-07-06 12:44:01.525 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.datasource.DataSourceUtils      : Setting JDBC Connection [HikariProxyConnection@1271567274 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] read-only
2025-07-06 12:44:01.525  INFO 14204 --- [nio-8080-exec-4] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 시작 - facilityId: 1
2025-07-06 12:44:01.525 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-07-06 12:44:01.525 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499c2498]
2025-07-06 12:44:01.525 DEBUG 14204 --- [nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1271567274 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] will be managed by Spring
2025-07-06 12:44:01.526 DEBUG 14204 --- [nio-8080-exec-4] c.e.c.d.FacilityMapper.getFacilityById   : ==>  Preparing: SELECT f.facility_id, f.facility_name, f.facility_type, f.address, f.phone, f.latitude, f.longitude, f.description, f.facility_image, f.homepage, f.capacity, f.current_occupancy, f.operating_hours, f.features, f.average_rating, f.review_count, f.grade_rating, f.registered_member_id, m.name as registered_member_name, f.is_deleted, f.is_approved, CASE WHEN f.is_deleted = true THEN '삭제됨' WHEN f.is_approved = false THEN '승인대기' ELSE '정상' END as status FROM facility f LEFT JOIN member m ON f.registered_member_id = m.member_id WHERE f.facility_id = ?
2025-07-06 12:44:01.526 DEBUG 14204 --- [nio-8080-exec-4] c.e.c.d.FacilityMapper.getFacilityById   : ==> Parameters: 1(Long)
2025-07-06 12:44:01.527 DEBUG 14204 --- [nio-8080-exec-4] c.e.c.d.FacilityMapper.getFacilityById   : <==      Total: 1
2025-07-06 12:44:01.528 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499c2498]
2025-07-06 12:44:01.528  INFO 14204 --- [nio-8080-exec-4] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 완료 - facilityName: 서울 행복요양원, status: 정상
2025-07-06 12:44:01.528 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499c2498]
2025-07-06 12:44:01.528 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499c2498]
2025-07-06 12:44:01.528 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499c2498]
2025-07-06 12:44:01.528 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-06 12:44:01.528 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1271567274 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399]
2025-07-06 12:44:01.528 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.datasource.DataSourceUtils      : Resetting read-only flag of JDBC Connection [HikariProxyConnection@1271567274 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399]
2025-07-06 12:44:01.528 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1271567274 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] after transaction
2025-07-06 12:44:01.529 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.example.carelink.service.FacilityImageService.getImagesByFacilityId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-07-06 12:44:01.529 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@19985631 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] for JDBC transaction
2025-07-06 12:44:01.529 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.datasource.DataSourceUtils      : Setting JDBC Connection [HikariProxyConnection@19985631 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] read-only
2025-07-06 12:44:01.529  INFO 14204 --- [nio-8080-exec-4] c.e.c.service.FacilityImageService       : 시설 이미지 목록 조회 시작 - facilityId: 1
2025-07-06 12:44:01.529 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-07-06 12:44:01.529 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2920a885]
2025-07-06 12:44:01.529 DEBUG 14204 --- [nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@19985631 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] will be managed by Spring
2025-07-06 12:44:01.529 DEBUG 14204 --- [nio-8080-exec-4] c.e.c.d.F.getImagesByFacilityId          : ==>  Preparing: SELECT image_id, facility_id, image_path, image_alt_text, image_order, is_main_image, upload_date, updated_at FROM facility_images WHERE facility_id = ? ORDER BY image_order ASC, upload_date ASC
2025-07-06 12:44:01.530 DEBUG 14204 --- [nio-8080-exec-4] c.e.c.d.F.getImagesByFacilityId          : ==> Parameters: 1(Long)
2025-07-06 12:44:01.533 DEBUG 14204 --- [nio-8080-exec-4] c.e.c.d.F.getImagesByFacilityId          : <==      Total: 8
2025-07-06 12:44:01.533 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2920a885]
2025-07-06 12:44:01.534  INFO 14204 --- [nio-8080-exec-4] c.e.c.service.FacilityImageService       : 시설 이미지 목록 조회 완료 - facilityId: 1, 이미지 수: 8
2025-07-06 12:44:01.534 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2920a885]
2025-07-06 12:44:01.534 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2920a885]
2025-07-06 12:44:01.534 DEBUG 14204 --- [nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2920a885]
2025-07-06 12:44:01.534 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-06 12:44:01.534 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@19985631 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399]
2025-07-06 12:44:01.534 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.datasource.DataSourceUtils      : Resetting read-only flag of JDBC Connection [HikariProxyConnection@19985631 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399]
2025-07-06 12:44:01.534 DEBUG 14204 --- [nio-8080-exec-4] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@19985631 wrapping com.mysql.cj.jdbc.ConnectionImpl@2529b399] after transaction
2025-07-06 12:44:01.534  INFO 14204 --- [nio-8080-exec-4] c.e.c.controller.FacilityController      : 📋 시설 이미지 목록 조회 - facilityId: 1, 이미지 수: 8
2025-07-06 12:44:01.535 DEBUG 14204 --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-07-06 12:44:01.535 DEBUG 14204 --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [[FacilityImageDTO(imageId=2, facilityId=1, imagePath=/uploads/facility/facility_1_0_7c8034d3-7bf5-47 (truncated)...]
2025-07-06 12:44:01.537 DEBUG 14204 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:44:01.548 DEBUG 14204 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/uploads/facility/facility_1_4_7ca60785-ad60-401e-9039-4c46a7493707.webp", parameters={}
2025-07-06 12:44:01.549 DEBUG 14204 --- [nio-8080-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [URL [file:C:/carelink-uploads/facility/]]
2025-07-06 12:44:01.551 DEBUG 14204 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-06 12:44:13.132 DEBUG 14204 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:44:13.132 DEBUG 14204 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:44:13.132 DEBUG 14204 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Fill pool skipped, pool is at sufficient level.
2025-07-06 12:44:43.145 DEBUG 14204 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:44:43.145 DEBUG 14204 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:44:43.145 DEBUG 14204 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Fill pool skipped, pool is at sufficient level.
2025-07-06 12:45:13.155 DEBUG 14204 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:45:13.155 DEBUG 14204 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-07-06 12:45:13.155 DEBUG 14204 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Fill pool skipped, pool is at sufficient level.

🎨 시설 이미지 크롭퍼 페이지 로드 완료
1:721 📚 facility-image-cropper.js가 메인 로직을 처리합니다.
facility-image-cropper.js:25 🎬 시설 이미지 크롭퍼 초기화 시작 (프로필 방식 완전 적용)
facility-image-cropper.js:30 🏢 시설 ID: 1
facility-image-cropper.js:43 🔍 브라우저 이미지 포맷 지원 확인
facility-image-cropper.js:57 📊 포맷 지원 현황: {avif: false, webp: true}
facility-image-cropper.js:66 ⚠️ AVIF 미지원으로 옵션 숨김
facility-image-cropper.js:83 🔍 DOM 요소 초기화 시작
facility-image-cropper.js:138 ✅ DOM 요소 초기화 완료
facility-image-cropper.js:143 🔗 이벤트 리스너 설정 시작
facility-image-cropper.js:149 📁 파일 입력 이벤트 리스너 등록됨
facility-image-cropper.js:163 ✅ 파일 선택 버튼 이벤트 등록 완료
facility-image-cropper.js:310 ✨ Alt 텍스트 자동 생성 버튼 등록됨
facility-image-cropper.js:313 ⚙️ 압축 컨트롤 설정 완료
facility-image-cropper.js:318 🔍 SEO 최적화 기능 설정 시작
facility-image-cropper.js:342 ✅ SEO 기능 설정 완료 - 키워드 버튼 14개 등록됨
facility-image-cropper.js:1695 ⌨️ 키보드 단축키 설정 완료
facility-image-cropper.js:268 ✅ 이벤트 리스너 설정 완료
facility-image-cropper.js:1566 🎯 드래그 앤 드롭 설정 완료
facility-image-cropper.js:38 ✅ 시설 이미지 크롭퍼 초기화 완료
contentScript.bundle.js:347 Strategy 4: No clear indicators found, assuming All tab
facility-image-cropper.js:156 📁 파일 선택 버튼 클릭됨
facility-image-cropper.js:479 📁 다중 파일 업로드 이벤트 발생
facility-image-cropper.js:487 📸 선택된 파일 수: 1
facility-image-cropper.js:517 🔍 파일 검증: 행복요양원.png
facility-image-cropper.js:534 📦 파일 크기: 행복요양원.png (2.26MB) - 제한 없음
facility-image-cropper.js:536 ✅ 파일 검증 통과: 행복요양원.png
facility-image-cropper.js:544 🔄 1개 파일 순차 처리 시작
facility-image-cropper.js:547 📸 파일 처리 중: 행복요양원.png (1/1)
facility-image-cropper.js:563 ✅ 이미지 로드 완료: 행복요양원.png (1/1)
facility-image-cropper.js:567 🎉 모든 이미지 로드 완료 - 크롭 단계로 이동
facility-image-cropper.js:591 🖼️ 크롭퍼에 이미지 로드: 행복요양원.png
facility-image-cropper.js:601 ✅ 이미지 로드 완료, 크롭퍼 초기화 시작
facility-image-cropper.js:639 🔧 크롭퍼 초기화 - 16:9 비율 (프로필 방식)
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:681 ✅ 크롭퍼 준비 완료
facility-image-cropper.js:682 📐 컨테이너 크기: {width: 601, height: 328}
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:716 🎯 setupSmartScroll: 컨테이너 찾음 crop-image-container
facility-image-cropper.js:722 🖱️ 스마트 스크롤 기능 활성화
facility-image-cropper.js:810 ✅ 시설 크롭퍼 스마트 스크롤 이벤트 등록 완료
facility-image-cropper.js:811 🎯 이벤트 대상 컨테이너: crop-image-container DIV
facility-image-cropper.js:812 📏 현재 컨테이너 크기: 601 x 328
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:736 🔍 현재 줌: 0.19 방향: 축소
facility-image-cropper.js:784 🚫 최소 축소 완전 차단 - 줌 기능 무력화
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:886 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:900 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:919 🔄 이미지 크롭 중: 1/1
facility-image-cropper.js:944 ✅ 이미지 크롭 완료: 1
facility-image-cropper.js:955 🎉 모든 이미지 크롭 완료 - 압축 단계로 이동
facility-image-cropper.js:1880 🔄 압축 단계로 돌아가기
facility-image-cropper.js:1885 📦 압축 단계 표시 완료
facility-image-cropper.js:1007 ⚠️ AVIF 미지원으로 WebP로 폴백
facility-image-cropper.js:1074 🔧 압축 미리보기 업데이트: WEBP, 품질: 80%
facility-image-cropper.js:347 🏷️ 키워드 클릭됨: 로비
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_3030.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_6243.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_6339.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_6491.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_7026.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_7028.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_7228.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_7354.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_8610.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_8612.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_8699.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_8938.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_9197.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_9201.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_9395.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_9578.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_9580.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_9677.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_facility-lobby_9778.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_nursing_homefacility_9859.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_nursing_homefacility_1305.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_nursing_home-facilit_1307.jpg
facility-image-cropper.js:426 📄 파일명 미리보기 업데이트: facility_1_0_nursing_home-facilit_8343.jpg
facility-image-cropper.js:211 📋 다음 단계 버튼 클릭 - 이미지 저장 후 관리 단계로 이동
facility-image-cropper.js:1768 🔄 모든 이미지 저장 시작...
facility-image-cropper.js:1780 📊 저장할 이미지 수: 1장
facility-image-cropper.js:1829 📤 이미지 1 업로드 중...
facility-image-cropper.js:1841 ✅ 이미지 1 저장 성공 (ID: 10)
facility-image-cropper.js:1853 🎉 모든 이미지 저장 완료: 1/1장
facility-image-cropper.js:219 ✅ 1장의 이미지 저장 완료
facility-image-cropper.js:1865 🔄 이미지 관리 단계로 이동
facility-image-cropper.js:1870 🛠️ 관리 단계 표시 완료
facility-image-cropper.js:1901 🔄 관리 이미지 그리드 업데이트 시작
facility-image-cropper.js:1924 📋 서버에서 가져온 이미지 수: 10개
facility-image-cropper.js:2021 🔧 Bootstrap 드롭다운 초기화 완료: 10개
