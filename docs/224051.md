2025-07-05 22:40:51.396 DEBUG 11988 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/js/kakaomap.js", parameters={}
2025-07-05 22:40:51.397 DEBUG 11988 --- [nio-8080-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 22:40:51.397 DEBUG 11988 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/css/advanced-image-cropper.css", parameters={}
2025-07-05 22:40:51.397 DEBUG 11988 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/css/rich-text-editor.css", parameters={}
2025-07-05 22:40:51.397 DEBUG 11988 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:40:51.398 DEBUG 11988 --- [nio-8080-exec-4] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 22:40:51.398 DEBUG 11988 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/js/facility-edit.js", parameters={}
2025-07-05 22:40:51.399 DEBUG 11988 --- [nio-8080-exec-3] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 22:40:51.399 DEBUG 11988 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 22:40:51.400 DEBUG 11988 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/js/phone-formatter.js", parameters={}
2025-07-05 22:40:51.400 DEBUG 11988 --- [nio-8080-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 22:40:51.406 DEBUG 11988 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:40:51.407 DEBUG 11988 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:40:51.407 DEBUG 11988 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:40:51.408 DEBUG 11988 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/js/advanced-image-cropper.js", parameters={}
2025-07-05 22:40:51.408 DEBUG 11988 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/js/rich-text-editor.js", parameters={}
2025-07-05 22:40:51.409 DEBUG 11988 --- [nio-8080-exec-7] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 22:40:51.408 DEBUG 11988 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:40:51.409 DEBUG 11988 --- [io-8080-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 22:40:51.411 DEBUG 11988 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:40:51.411 DEBUG 11988 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:40:51.417 DEBUG 11988 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:40:51.417 DEBUG 11988 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:40:51.983 DEBUG 11988 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-07-05 22:40:51.983 DEBUG 11988 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-07-05 22:40:51.983 DEBUG 11988 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Fill pool skipped, pool is at sufficient level.
2025-07-05 22:40:57.523 DEBUG 11988 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/facility/crop-images/1", parameters={}
2025-07-05 22:40:57.523 DEBUG 11988 --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.example.carelink.controller.FacilityController#cropImagePage(Long, HttpSession, Model, RedirectAttributes)
2025-07-05 22:40:57.524 DEBUG 11988 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.example.carelink.service.FacilityService.getFacilityById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-07-05 22:40:57.525 DEBUG 11988 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@2097537878 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c] for JDBC transaction
2025-07-05 22:40:57.525 DEBUG 11988 --- [nio-8080-exec-9] o.s.jdbc.datasource.DataSourceUtils      : Setting JDBC Connection [HikariProxyConnection@2097537878 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c] read-only
2025-07-05 22:40:57.525  INFO 11988 --- [nio-8080-exec-9] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 시작 - facilityId: 1
2025-07-05 22:40:57.525 DEBUG 11988 --- [nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-07-05 22:40:57.525 DEBUG 11988 --- [nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bb2293]
2025-07-05 22:40:57.526 DEBUG 11988 --- [nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2097537878 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c] will be managed by Spring
2025-07-05 22:40:57.526 DEBUG 11988 --- [nio-8080-exec-9] c.e.c.d.FacilityMapper.getFacilityById   : ==>  Preparing: SELECT f.facility_id, f.facility_name, f.facility_type, f.address, f.phone, f.latitude, f.longitude, f.description, f.facility_image, f.homepage, f.capacity, f.current_occupancy, f.operating_hours, f.features, f.average_rating, f.review_count, f.grade_rating, f.registered_member_id, m.name as registered_member_name, f.is_deleted, f.is_approved, CASE WHEN f.is_deleted = true THEN '삭제됨' WHEN f.is_approved = false THEN '승인대기' ELSE '정상' END as status FROM facility f LEFT JOIN member m ON f.registered_member_id = m.member_id WHERE f.facility_id = ?
2025-07-05 22:40:57.527 DEBUG 11988 --- [nio-8080-exec-9] c.e.c.d.FacilityMapper.getFacilityById   : ==> Parameters: 1(Long)
2025-07-05 22:40:57.530 DEBUG 11988 --- [nio-8080-exec-9] c.e.c.d.FacilityMapper.getFacilityById   : <==      Total: 1
2025-07-05 22:40:57.531 DEBUG 11988 --- [nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bb2293]
2025-07-05 22:40:57.531  INFO 11988 --- [nio-8080-exec-9] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 완료 - facilityName: 서울 행복요양원, status: 정상
2025-07-05 22:40:57.531 DEBUG 11988 --- [nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bb2293]
2025-07-05 22:40:57.531 DEBUG 11988 --- [nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bb2293]
2025-07-05 22:40:57.531 DEBUG 11988 --- [nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bb2293]
2025-07-05 22:40:57.531 DEBUG 11988 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-05 22:40:57.531 DEBUG 11988 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@2097537878 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c]
2025-07-05 22:40:57.531 DEBUG 11988 --- [nio-8080-exec-9] o.s.jdbc.datasource.DataSourceUtils      : Resetting read-only flag of JDBC Connection [HikariProxyConnection@2097537878 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c]
2025-07-05 22:40:57.532 DEBUG 11988 --- [nio-8080-exec-9] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@2097537878 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c] after transaction
2025-07-05 22:40:57.532  INFO 11988 --- [nio-8080-exec-9] c.e.c.controller.FacilityController      : 시설 이미지 크롭 페이지 접속: facilityId=1, memberId=6
2025-07-05 22:40:57.533 DEBUG 11988 --- [nio-8080-exec-9] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, application/signed-exchange;v=b3;q=0.7, */*;q=0.8]
2025-07-05 22:40:57.554 DEBUG 11988 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:40:57.571 DEBUG 11988 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/css/common.css", parameters={}
2025-07-05 22:40:57.572 DEBUG 11988 --- [nio-8080-exec-6] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 22:40:57.573 DEBUG 11988 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/js/smart-scroll-utility.js", parameters={}
2025-07-05 22:40:57.574 DEBUG 11988 --- [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/js/facility-image-cropper.js", parameters={}
2025-07-05 22:40:57.575 DEBUG 11988 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/css/advanced-image-cropper.css", parameters={}
2025-07-05 22:40:57.575 DEBUG 11988 --- [nio-8080-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 22:40:57.575 DEBUG 11988 --- [nio-8080-exec-8] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 22:40:57.576 DEBUG 11988 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-07-05 22:40:57.581 DEBUG 11988 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:40:57.583 DEBUG 11988 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:40:57.583 DEBUG 11988 --- [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:40:57.584 DEBUG 11988 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:41:21.995 DEBUG 11988 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-07-05 22:41:21.995 DEBUG 11988 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-07-05 22:41:21.995 DEBUG 11988 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Fill pool skipped, pool is at sufficient level.
2025-07-05 22:41:52.000 DEBUG 11988 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-07-05 22:41:52.000 DEBUG 11988 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-07-05 22:41:52.000 DEBUG 11988 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Fill pool skipped, pool is at sufficient level.
2025-07-05 22:42:00.555 DEBUG 11988 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/facility/crop-images/save/1", parameters={multipart}
2025-07-05 22:42:00.606 DEBUG 11988 --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.example.carelink.controller.FacilityController#saveFacilityImage(Long, MultipartFile, String, String, String, HttpSession)
2025-07-05 22:42:00.610  INFO 11988 --- [nio-8080-exec-6] c.e.c.controller.FacilityController      : 🔥 시설 이미지 저장 시작 - facilityId: 1, 받은 파라미터들 확인
2025-07-05 22:42:00.611  INFO 11988 --- [nio-8080-exec-6] c.e.c.controller.FacilityController      : 📋 altText: '시설 대표 이미지 - 행복요양원 (5장)', format: 'webp', imageIndex: 'null'
2025-07-05 22:42:00.611  INFO 11988 --- [nio-8080-exec-6] c.e.c.controller.FacilityController      : 📁 파일 정보 - 이름: 'facility_image.webp', 크기: 100341bytes, 타입: 'image/webp'
2025-07-05 22:42:00.611  INFO 11988 --- [nio-8080-exec-6] c.e.c.controller.FacilityController      : 👤 로그인 사용자: facility01 (role: FACILITY)
2025-07-05 22:42:00.611 DEBUG 11988 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.example.carelink.service.FacilityService.getFacilityById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-07-05 22:42:00.611 DEBUG 11988 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@356180548 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c] for JDBC transaction
2025-07-05 22:42:00.611 DEBUG 11988 --- [nio-8080-exec-6] o.s.jdbc.datasource.DataSourceUtils      : Setting JDBC Connection [HikariProxyConnection@356180548 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c] read-only
2025-07-05 22:42:00.612  INFO 11988 --- [nio-8080-exec-6] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 시작 - facilityId: 1
2025-07-05 22:42:00.612 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-07-05 22:42:00.612 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@807734c]
2025-07-05 22:42:00.612 DEBUG 11988 --- [nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@356180548 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c] will be managed by Spring
2025-07-05 22:42:00.612 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.FacilityMapper.getFacilityById   : ==>  Preparing: SELECT f.facility_id, f.facility_name, f.facility_type, f.address, f.phone, f.latitude, f.longitude, f.description, f.facility_image, f.homepage, f.capacity, f.current_occupancy, f.operating_hours, f.features, f.average_rating, f.review_count, f.grade_rating, f.registered_member_id, m.name as registered_member_name, f.is_deleted, f.is_approved, CASE WHEN f.is_deleted = true THEN '삭제됨' WHEN f.is_approved = false THEN '승인대기' ELSE '정상' END as status FROM facility f LEFT JOIN member m ON f.registered_member_id = m.member_id WHERE f.facility_id = ?
2025-07-05 22:42:00.613 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.FacilityMapper.getFacilityById   : ==> Parameters: 1(Long)
2025-07-05 22:42:00.614 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.FacilityMapper.getFacilityById   : <==      Total: 1
2025-07-05 22:42:00.614 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@807734c]
2025-07-05 22:42:00.614  INFO 11988 --- [nio-8080-exec-6] c.e.carelink.service.FacilityService     : 시설 상세 정보 조회 완료 - facilityName: 서울 행복요양원, status: 정상
2025-07-05 22:42:00.614 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@807734c]
2025-07-05 22:42:00.614 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@807734c]
2025-07-05 22:42:00.614 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@807734c]
2025-07-05 22:42:00.614 DEBUG 11988 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-05 22:42:00.614 DEBUG 11988 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@356180548 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c]
2025-07-05 22:42:00.614 DEBUG 11988 --- [nio-8080-exec-6] o.s.jdbc.datasource.DataSourceUtils      : Resetting read-only flag of JDBC Connection [HikariProxyConnection@356180548 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c]
2025-07-05 22:42:00.615 DEBUG 11988 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@356180548 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c] after transaction
2025-07-05 22:42:00.615  INFO 11988 --- [nio-8080-exec-6] c.e.c.controller.FacilityController      : 🖼️ 시설 이미지 저장 요청 - facilityId: 1, 형식: webp, 인덱스: null, 크기: 100341 bytes
2025-07-05 22:42:00.615  INFO 11988 --- [nio-8080-exec-6] c.e.c.controller.FacilityController      : 🏷️ 시설 이미지 Alt 텍스트 설정: 시설 대표 이미지 - 행복요양원 (5장)
2025-07-05 22:42:00.615  INFO 11988 --- [nio-8080-exec-6] c.e.c.controller.FacilityController      : 📷 업로드된 이미지 형식: image/webp
2025-07-05 22:42:00.615  INFO 11988 --- [nio-8080-exec-6] c.e.c.controller.FacilityController      : 🚀 WebP 형식 감지 - 효율적 압축 적용됨
2025-07-05 22:42:00.615  INFO 11988 --- [nio-8080-exec-6] c.e.c.controller.FacilityController      : 🔧 서비스 호출 전 - facilityId: 1, orderIndex: null, altText: '시설 대표 이미지 - 행복요양원 (5장)'
2025-07-05 22:42:00.615 DEBUG 11988 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [com.example.carelink.service.FacilityImageService.saveSingleFacilityImage]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-07-05 22:42:00.615 DEBUG 11988 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@161995092 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c] for JDBC transaction
2025-07-05 22:42:00.618  INFO 11988 --- [nio-8080-exec-6] c.e.c.service.FacilityImageService       : 📸 단일 시설 이미지 저장 시작 - facilityId: 1, order: null
2025-07-05 22:42:00.620  INFO 11988 --- [nio-8080-exec-6] c.e.c.service.FacilityImageService       : 시설 이미지 파일 저장 완료: C:\carelink-uploads\facility\facility_1_0_437f8090-2744-498e-86e0-f8efa91ca0a1.webp
2025-07-05 22:42:00.621 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-07-05 22:42:00.621 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf04e53]
2025-07-05 22:42:00.621 DEBUG 11988 --- [nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@161995092 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c] will be managed by Spring
2025-07-05 22:42:00.621 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.F.countImagesByFacilityId        : ==>  Preparing: SELECT COUNT(*) FROM facility_images WHERE facility_id = ?
2025-07-05 22:42:00.621 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.F.countImagesByFacilityId        : ==> Parameters: 1(Long)
2025-07-05 22:42:00.629 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.F.countImagesByFacilityId        : <==      Total: 1
2025-07-05 22:42:00.629 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf04e53]
2025-07-05 22:42:00.629 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf04e53] from current transaction
2025-07-05 22:42:00.629 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.F.insertFacilityImage            : ==>  Preparing: INSERT INTO facility_images ( facility_id, image_path, image_alt_text, image_order, is_main_image, upload_date ) VALUES ( ?, ?, ?, ?, ?, NOW() )
2025-07-05 22:42:00.630 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.F.insertFacilityImage            : ==> Parameters: 1(Long), /uploads/facility/facility_1_0_437f8090-2744-498e-86e0-f8efa91ca0a1.webp(String), 시설 대표 이미지 - 행복요양원 (5장)(String), 2(Integer), false(Boolean)
2025-07-05 22:42:00.633 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.F.insertFacilityImage            : <==    Updates: 1
2025-07-05 22:42:00.635 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf04e53]
2025-07-05 22:42:00.635  INFO 11988 --- [nio-8080-exec-6] c.e.c.service.FacilityImageService       : ✅ facility_images 테이블에 저장 완료 - imageId: 3, path: /uploads/facility/facility_1_0_437f8090-2744-498e-86e0-f8efa91ca0a1.webp
2025-07-05 22:42:00.635 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf04e53] from current transaction
2025-07-05 22:42:00.635 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.F.countImagesByFacilityId        : ==>  Preparing: SELECT COUNT(*) FROM facility_images WHERE facility_id = ?
2025-07-05 22:42:00.635 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.F.countImagesByFacilityId        : ==> Parameters: 1(Long)
2025-07-05 22:42:00.636 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.F.countImagesByFacilityId        : <==      Total: 1
2025-07-05 22:42:00.636 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf04e53]
2025-07-05 22:42:00.636 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf04e53] from current transaction
2025-07-05 22:42:00.636 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.F.getMainImageByFacilityId       : ==>  Preparing: SELECT image_id, facility_id, image_path, image_alt_text, image_order, is_main_image, upload_date, updated_at FROM facility_images WHERE facility_id = ? AND is_main_image = TRUE LIMIT 1
2025-07-05 22:42:00.636 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.F.getMainImageByFacilityId       : ==> Parameters: 1(Long)
2025-07-05 22:42:00.637 DEBUG 11988 --- [nio-8080-exec-6] c.e.c.d.F.getMainImageByFacilityId       : <==      Total: 1
2025-07-05 22:42:00.637 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf04e53]
2025-07-05 22:42:00.637  INFO 11988 --- [nio-8080-exec-6] c.e.c.service.FacilityImageService       : 🔄 시설 테이블 메인 이미지 정보 업데이트 - facilityId: 1, imageCount: 3, mainImagePath: /uploads/facility/facility_1_4_7ca60785-ad60-401e-9039-4c46a7493707.webp
2025-07-05 22:42:00.637 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf04e53]
2025-07-05 22:42:00.637 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf04e53]
2025-07-05 22:42:00.637 DEBUG 11988 --- [nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf04e53]
2025-07-05 22:42:00.637 DEBUG 11988 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-07-05 22:42:00.637 DEBUG 11988 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@161995092 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c]
2025-07-05 22:42:00.655 DEBUG 11988 --- [nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@161995092 wrapping com.mysql.cj.jdbc.ConnectionImpl@31ac291c] after transaction
2025-07-05 22:42:00.655  INFO 11988 --- [nio-8080-exec-6] c.e.c.controller.FacilityController      : ✅ 서비스 호출 완료 - 저장된 이미지ID: 3, 경로: /uploads/facility/facility_1_0_437f8090-2744-498e-86e0-f8efa91ca0a1.webp
2025-07-05 22:42:00.655  INFO 11988 --- [nio-8080-exec-6] c.e.c.controller.FacilityController      : ✅ 시설 이미지 저장 성공: facilityId=1, imageId=3
2025-07-05 22:42:00.656 DEBUG 11988 --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2025-07-05 22:42:00.656 DEBUG 11988 --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [{facilityId=1, imageId=3, success=true, imagePath=/uploads/facility/facility_1_0_437f8090-2744-498e- (truncated)...]
2025-07-05 22:42:00.657 DEBUG 11988 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-07-05 22:42:22.002 DEBUG 11988 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Before cleanup stats (total=5, active=0, idle=5, waiting=0)
2025-07-05 22:42:22.002 DEBUG 11988 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - After cleanup  stats (total=5, active=0, idle=5, waiting=0)
2025-07-05 22:42:22.003 DEBUG 11988 --- [iCP housekeeper] com.zaxxer.hikari.pool.HikariPool        : CareLink-HikariCP - Fill pool skipped, pool is at sufficient level.

🖼️ 크롭퍼에 이미지 로드: 행복요양원_내부라운지.png
facility-image-cropper.js:398 ✅ 이미지 로드 완료, 크롭퍼 초기화 시작
facility-image-cropper.js:436 🔧 크롭퍼 초기화 - 16:9 비율 (프로필 방식)
facility-image-cropper.js:596 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:610 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:463 ✅ 크롭퍼 준비 완료
facility-image-cropper.js:596 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:610 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:485 🖱️ 스마트 스크롤 기능 활성화
facility-image-cropper.js:551 ✅ 데스크탑/모바일 스마트 스크롤 이벤트 등록 완료
facility-image-cropper.js:596 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:610 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:503 🔍 현재 줌: 0.23 방향: 축소
facility-image-cropper.js:596 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:610 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:503 🔍 현재 줌: 0.21 방향: 축소
facility-image-cropper.js:596 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:610 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:503 🔍 현재 줌: 0.20 방향: 축소
facility-image-cropper.js:596 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:610 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:503 🔍 현재 줌: 0.20 방향: 축소
facility-image-cropper.js:596 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:610 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:503 🔍 현재 줌: 0.20 방향: 축소
facility-image-cropper.js:596 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:610 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:503 🔍 현재 줌: 0.20 방향: 축소
facility-image-cropper.js:596 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:610 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:503 🔍 현재 줌: 0.20 방향: 축소
facility-image-cropper.js:596 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:610 ✅ 미리보기 업데이트 완료
facility-image-cropper.js:503 🔍 현재 줌: 0.20 방향: 축소
✅ 미리보기 업데이트 완료
facility-image-cropper.js:629 🔄 이미지 크롭 중: 5/5
facility-image-cropper.js:654 ✅ 이미지 크롭 완료: 5
facility-image-cropper.js:665 🎉 모든 이미지 크롭 완료 - 압축 단계로 이동
facility-image-cropper.js:685 📦 압축 단계 표시 완료
facility-image-cropper.js:717 ⚠️ AVIF 미지원으로 WebP로 폴백
facility-image-cropper.js:795 ✨ Alt 텍스트 자동 생성 시작
facility-image-cropper.js:814 Alt 텍스트 자동 생성 완료: 시설 대표 이미지 - 행복요양원 (5장)
facility-image-cropper.js:784 🔧 압축 미리보기 업데이트: WEBP, 품질: 80%
facility-image-cropper.js:206 💾 모든 이미지 저장 시작
facility-image-cropper.js:824 📤 시설 이미지 서버 저장 시작
facility-image-cropper.js:858 🔍 원본 이미지 정보 - 이름: 행복요양원_내부라운지.png, Base64 길이: 133811
facility-image-cropper.js:873 📤 이미지 Blob 생성 완료: 97.99KB
facility-image-cropper.js:874 📋 FormData 구성 - altText: '시설 대표 이미지 - 행복요양원 (5장)', format: 'webp', quality: '0.8'
facility-image-cropper.js:881 📎 FormData[altText]: 시설 대표 이미지 - 행복요양원 (5장)
facility-image-cropper.js:881 📎 FormData[format]: webp
facility-image-cropper.js:881 📎 FormData[quality]: 0.8
facility-image-cropper.js:879 📎 FormData[facilityImage]: Blob (97.99KB, image/webp)
facility-image-cropper.js:890 📸 전송할 이미지 수: 1
facility-image-cropper.js:898 📡 서버 응답 상태: 200
facility-image-cropper.js:903 📥 서버 응답 데이터: Object
facility-image-cropper.js:906 ✅ 시설 이미지 저장 성공
facility-image-cropper.js:953 🎆 완료 단계 표시
facility-image-cropper.js:1059 🖼️ 최종 이미지 그리드 업데이트: 5개
facility-image-cropper.js:596 🖼️ 미리보기 업데이트 시작
facility-image-cropper.js:610 ✅ 미리보기 업데이트 완료