<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{layout/header :: header}">
    <title>관리자 대시보드 - CareLink</title>
</head>
<body class="d-flex flex-column min-vh-100 pt-5">
<nav th:replace="~{layout/header :: navbar}"></nav>

<div th:replace="~{layout/header :: messages}"></div>

<main class="flex-grow-1">
    <div class="container mt-4">
        <!-- 브레드크럼 -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">홈</a></li>
                <li class="breadcrumb-item active" aria-current="page">관리자 대시보드</li>
            </ol>
        </nav>

        <!-- 페이지 헤더 -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex align-items-center justify-content-between">
                    <div>
                        <h1 class="h2 mb-1">
                            <i class="fas fa-tachometer-alt text-primary me-2"></i>
                            관리자 대시보드
                        </h1>
                        <p class="text-muted mb-0">CareLink 전체 시스템을 관리할 수 있습니다.</p>
                    </div>
                    <div>
                        <span class="badge bg-success fs-6">
                            <i class="fas fa-crown me-1"></i>Administrator
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 빠른 서비스 카드 (맨 위 큰 카드 4개) -->
        <div class="row g-4 mb-5">
            <div class="col-12">
                <h3 class="mb-4">
                    <i class="fas fa-bolt text-warning me-2"></i>
                    빠른 서비스
                </h3>
            </div>

            <!-- 시설 승인 관리 -->
            <div class="col-md-6 col-xl-3">
                <div class="card h-100 shadow-lg border-0" style="background: linear-gradient(135deg, #ff9a56 0%, #ff6b35 100%);">
                    <div class="card-body text-white text-center p-4">
                        <div class="display-4 mb-3">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h4 class="card-title mb-3">시설 승인</h4>
                        <h2 class="mb-3" th:text="${pendingFacilities}">0</h2>
                        <p class="mb-3">승인 대기 중인 시설</p>
                        <a href="/admin/facilities?status=PENDING" class="btn btn-light btn-lg w-100">
                            <i class="fas fa-eye me-2"></i>승인 관리
                        </a>
                    </div>
                </div>
            </div>

            <!-- 회원 관리 -->
            <div class="col-md-6 col-xl-3">
                <div class="card h-100 shadow-lg border-0" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <div class="card-body text-white text-center p-4">
                        <div class="display-4 mb-3">
                            <i class="fas fa-users"></i>
                        </div>
                        <h4 class="card-title mb-3">회원 관리</h4>
                        <h2 class="mb-3" th:text="${totalMembers}">0</h2>
                        <p class="mb-3">전체 등록 회원</p>
                        <a href="/admin/members" class="btn btn-light btn-lg w-100">
                            <i class="fas fa-list me-2"></i>회원 관리
                        </a>
                    </div>
                </div>
            </div>

            <!-- 게시판 관리 -->
            <div class="col-md-6 col-xl-3">
                <div class="card h-100 shadow-lg border-0" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                    <div class="card-body text-white text-center p-4">
                        <div class="display-4 mb-3">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <h4 class="card-title mb-3">게시판 관리</h4>
                        <h2 class="mb-3">ALL</h2>
                        <p class="mb-3">공지사항 및 게시글</p>
                        <a href="/board" class="btn btn-light btn-lg w-100">
                            <i class="fas fa-edit me-2"></i>게시판 관리
                        </a>
                    </div>
                </div>
            </div>

            <!-- 리뷰 관리 -->
            <div class="col-md-6 col-xl-3">
                <div class="card h-100 shadow-lg border-0" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    <div class="card-body text-white text-center p-4">
                        <div class="display-4 mb-3">
                            <i class="fas fa-star"></i>
                        </div>
                        <h4 class="card-title mb-3">리뷰 관리</h4>
                        <h2 class="mb-3">ALL</h2>
                        <p class="mb-3">시설 리뷰 및 평가</p>
                        <a href="/review" class="btn btn-light btn-lg w-100">
                            <i class="fas fa-star me-2"></i>리뷰 관리
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 통계 대시보드 (페이지 이동 없이 한 화면에 표시) -->
        <div class="row g-4 mb-5">
            <div class="col-12">
                <h3 class="mb-4">
                    <i class="fas fa-chart-bar text-info me-2"></i>
                    시스템 통계
                </h3>
            </div>

            <!-- 회원 통계 -->
            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <div class="text-primary mb-2">
                            <i class="fas fa-users fa-2x"></i>
                        </div>
                        <h6 class="card-title text-muted">전체 회원</h6>
                        <h3 class="text-primary mb-2" th:text="${totalMembers}">0</h3>
                        <small class="text-muted">등록된 회원 수</small>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <div class="text-success mb-2">
                            <i class="fas fa-building fa-2x"></i>
                        </div>
                        <h6 class="card-title text-muted">시설 회원</h6>
                        <h3 class="text-success mb-2" th:text="${facilityMembers}">0</h3>
                        <small class="text-muted">시설 운영자</small>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <div class="text-info mb-2">
                            <i class="fas fa-user fa-2x"></i>
                        </div>
                        <h6 class="card-title text-muted">일반 회원</h6>
                        <h3 class="text-info mb-2" th:text="${userMembers}">0</h3>
                        <small class="text-muted">구직자 및 가족</small>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-lg-3">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <div class="text-warning mb-2">
                            <i class="fas fa-clock fa-2x"></i>
                        </div>
                        <h6 class="card-title text-muted">승인 대기</h6>
                        <h3 class="text-warning mb-2" th:text="${pendingFacilities}">0</h3>
                        <small class="text-muted">시설 승인 대기</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- 실시간 활동 현황 -->
        <div class="row g-4 mb-4">
            <div class="col-12">
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-transparent">
                        <h5 class="mb-0">
                            <i class="fas fa-activity text-success me-2"></i>
                            실시간 활동 현황
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-md-3">
                                <div class="border-end">
                                    <h4 class="text-primary">
                                        <i class="fas fa-eye me-1"></i>
                                        <span id="todayVisits">-</span>
                                    </h4>
                                    <small class="text-muted">오늘 방문자</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="border-end">
                                    <h4 class="text-success">
                                        <i class="fas fa-user-plus me-1"></i>
                                        <span id="todaySignups">-</span>
                                    </h4>
                                    <small class="text-muted">오늘 가입자</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="border-end">
                                    <h4 class="text-info">
                                        <i class="fas fa-edit me-1"></i>
                                        <span id="todayPosts">-</span>
                                    </h4>
                                    <small class="text-muted">오늘 게시글</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <h4 class="text-warning">
                                    <i class="fas fa-star me-1"></i>
                                    <span id="todayReviews">-</span>
                                </h4>
                                <small class="text-muted">오늘 리뷰</small>
                            </div>
                        </div>
                        <div class="mt-3 text-center">
                            <button class="btn btn-outline-primary btn-sm" onclick="refreshStats()">
                                <i class="fas fa-sync me-1"></i>데이터 새로고침
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/footer :: footer}"></footer>

<div th:replace="~{layout/footer :: scripts}"></div>

<script>
// 데이터 새로고침 함수
function refreshStats() {
    location.reload();
}

// 페이지 로드 시 통계 업데이트
$(document).ready(function() {
    console.log('관리자 대시보드 로드 완료');
    
    // 승인 대기 시설이 있으면 강조
    const pendingCount = parseInt($('[th\\:text="${pendingFacilities}"]').text());
    if (pendingCount > 0) {
        console.log('승인 대기 시설:', pendingCount);
    }
});
</script>

</body>
</html>